/*! For license information please see chat.js.LICENSE.txt */
!function(){"use strict";var e={679:function(e,t,r){var a=r(864),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},s={};function c(e){return a.isMemo(e)?o:s[e.$$typeof]||n}s[a.ForwardRef]={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},s[a.Memo]=o;var l=Object.defineProperty,f=Object.getOwnPropertyNames,u=Object.getOwnPropertySymbols,d=Object.getOwnPropertyDescriptor,h=Object.getPrototypeOf,p=Object.prototype;e.exports=function e(t,r,a){if("string"!=typeof r){if(p){var n=h(r);n&&n!==p&&e(t,n,a)}var o=f(r);u&&(o=o.concat(u(r)));for(var s=c(t),m=c(r),g=0;g<o.length;++g){var b=o[g];if(!(i[b]||a&&a[b]||m&&m[b]||s&&s[b])){var v=d(r,b);try{l(t,b,v)}catch(e){}}}}return t}},418:function(e){var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;function n(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var a={};return"abcdefghijklmnopqrst".split("").forEach((function(e){a[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},a)).join("")}catch(e){return!1}}()?Object.assign:function(e,i){for(var o,s,c=n(e),l=1;l<arguments.length;l++){for(var f in o=Object(arguments[l]))r.call(o,f)&&(c[f]=o[f]);if(t){s=t(o);for(var u=0;u<s.length;u++)a.call(o,s[u])&&(c[s[u]]=o[s[u]])}}return c}},921:function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&Symbol.for,a=r?Symbol.for("react.element"):60103,n=r?Symbol.for("react.portal"):60106,i=r?Symbol.for("react.fragment"):60107,o=r?Symbol.for("react.strict_mode"):60108,s=r?Symbol.for("react.profiler"):60114,c=r?Symbol.for("react.provider"):60109,l=r?Symbol.for("react.context"):60110,f=r?Symbol.for("react.async_mode"):60111,u=r?Symbol.for("react.concurrent_mode"):60111,d=r?Symbol.for("react.forward_ref"):60112,h=r?Symbol.for("react.suspense"):60113,p=r?Symbol.for("react.suspense_list"):60120,m=r?Symbol.for("react.memo"):60115,g=r?Symbol.for("react.lazy"):60116,b=r?Symbol.for("react.fundamental"):60117,v=r?Symbol.for("react.responder"):60118,y=r?Symbol.for("react.scope"):60119;function _(e){if("object"==typeof e&&null!==e){var t=e.$$typeof;switch(t){case a:switch(e=e.type){case f:case u:case i:case s:case o:case h:return e;default:switch(e=e&&e.$$typeof){case l:case d:case g:case m:case c:return e;default:return t}}case n:return t}}}function w(e){return _(e)===u}t.typeOf=_,t.AsyncMode=f,t.ConcurrentMode=u,t.ContextConsumer=l,t.ContextProvider=c,t.Element=a,t.ForwardRef=d,t.Fragment=i,t.Lazy=g,t.Memo=m,t.Portal=n,t.Profiler=s,t.StrictMode=o,t.Suspense=h,t.isValidElementType=function(e){return"string"==typeof e||"function"==typeof e||e===i||e===u||e===s||e===o||e===h||e===p||"object"==typeof e&&null!==e&&(e.$$typeof===g||e.$$typeof===m||e.$$typeof===c||e.$$typeof===l||e.$$typeof===d||e.$$typeof===b||e.$$typeof===v||e.$$typeof===y)},t.isAsyncMode=function(e){return w(e)||_(e)===f},t.isConcurrentMode=w,t.isContextConsumer=function(e){return _(e)===l},t.isContextProvider=function(e){return _(e)===c},t.isElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===a},t.isForwardRef=function(e){return _(e)===d},t.isFragment=function(e){return _(e)===i},t.isLazy=function(e){return _(e)===g},t.isMemo=function(e){return _(e)===m},t.isPortal=function(e){return _(e)===n},t.isProfiler=function(e){return _(e)===s},t.isStrictMode=function(e){return _(e)===o},t.isSuspense=function(e){return _(e)===h}},864:function(e,t,r){e.exports=r(921)},251:function(e,t,r){r(418);var a=r(804),n=60103;if(t.Fragment=60107,"function"==typeof Symbol&&Symbol.for){var i=Symbol.for;n=i("react.element"),t.Fragment=i("react.fragment")}var o=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s=Object.prototype.hasOwnProperty,c={key:!0,ref:!0,__self:!0,__source:!0};function l(e,t,r){var a,i={},l=null,f=null;for(a in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(f=t.ref),t)s.call(t,a)&&!c.hasOwnProperty(a)&&(i[a]=t[a]);if(e&&e.defaultProps)for(a in t=e.defaultProps)void 0===i[a]&&(i[a]=t[a]);return{$$typeof:n,type:e,key:l,ref:f,props:i,_owner:o.current}}t.jsx=l,t.jsxs=l},893:function(e,t,r){e.exports=r(251)},804:function(e){e.exports=React}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var i=t[a]={exports:{}};return e[a](i,i.exports,r),i.exports}r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},function(){var e=r(804),t=r.n(e),a=ReactDOM,n=r.n(a);var i=function(){function e(e){var t=this;this._insertTag=function(e){var r;r=0===t.tags.length?t.insertionPoint?t.insertionPoint.nextSibling:t.prepend?t.container.firstChild:t.before:t.tags[t.tags.length-1].nextSibling,t.container.insertBefore(e,r),t.tags.push(e)},this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.prepend=e.prepend,this.insertionPoint=e.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(e){e.forEach(this._insertTag)},t.insert=function(e){this.ctr%(this.isSpeedy?65e3:1)==0&&this._insertTag(function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}(this));var t=this.tags[this.tags.length-1];if(this.isSpeedy){var r=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(t);try{r.insertRule(e,r.cssRules.length)}catch(e){0}}else t.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode&&e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}(),o=Math.abs,s=String.fromCharCode,c=Object.assign;function l(e){return e.trim()}function f(e,t,r){return e.replace(t,r)}function u(e,t){return e.indexOf(t)}function d(e,t){return 0|e.charCodeAt(t)}function h(e,t,r){return e.slice(t,r)}function p(e){return e.length}function m(e){return e.length}function g(e,t){return t.push(e),e}var b=1,v=1,y=0,w=0,x=0,k="";function A(e,t,r,a,n,i,o){return{value:e,root:t,parent:r,type:a,props:n,children:i,line:b,column:v,length:o,return:""}}function C(e,t){return c(A("",null,null,"",null,null,0),e,{length:-e.length},t)}function O(){return x=w>0?d(k,--w):0,v--,10===x&&(v=1,b--),x}function S(){return x=w<y?d(k,w++):0,v++,10===x&&(v=1,b++),x}function N(){return d(k,w)}function j(){return w}function z(e,t){return h(k,e,t)}function E(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function T(e){return b=v=1,y=p(k=e),w=0,[]}function P(e){return k="",e}function M(e){return l(z(w-1,B(91===e?e+2:40===e?e+1:e)))}function D(e){for(;(x=N())&&x<33;)S();return E(e)>2||E(x)>3?"":" "}function R(e,t){for(;--t&&S()&&!(x<48||x>102||x>57&&x<65||x>70&&x<97););return z(e,j()+(t<6&&32==N()&&32==S()))}function B(e){for(;S();)switch(x){case e:return w;case 34:case 39:34!==e&&39!==e&&B(x);break;case 40:41===e&&B(e);break;case 92:S()}return w}function I(e,t){for(;S()&&e+x!==57&&(e+x!==84||47!==N()););return"/*"+z(t,w-1)+"*"+s(47===e?e:S())}function L(e){for(;!E(N());)S();return z(e,w)}var U="-ms-",F="-moz-",W="-webkit-",G="comm",J="rule",q="decl",Y="@keyframes";function H(e,t){for(var r="",a=m(e),n=0;n<a;n++)r+=t(e[n],n,e,t)||"";return r}function V(e,t,r,a){switch(e.type){case"@import":case q:return e.return=e.return||e.value;case G:return"";case Y:return e.return=e.value+"{"+H(e.children,a)+"}";case J:e.value=e.props.join(",")}return p(r=H(e.children,a))?e.return=e.value+"{"+r+"}":""}function Z(e,t){switch(function(e,t){return(((t<<2^d(e,0))<<2^d(e,1))<<2^d(e,2))<<2^d(e,3)}(e,t)){case 5103:return W+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return W+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return W+e+F+e+U+e+e;case 6828:case 4268:return W+e+U+e+e;case 6165:return W+e+U+"flex-"+e+e;case 5187:return W+e+f(e,/(\w+).+(:[^]+)/,"-webkit-box-$1$2-ms-flex-$1$2")+e;case 5443:return W+e+U+"flex-item-"+f(e,/flex-|-self/,"")+e;case 4675:return W+e+U+"flex-line-pack"+f(e,/align-content|flex-|-self/,"")+e;case 5548:return W+e+U+f(e,"shrink","negative")+e;case 5292:return W+e+U+f(e,"basis","preferred-size")+e;case 6060:return W+"box-"+f(e,"-grow","")+W+e+U+f(e,"grow","positive")+e;case 4554:return W+f(e,/([^-])(transform)/g,"$1-webkit-$2")+e;case 6187:return f(f(f(e,/(zoom-|grab)/,W+"$1"),/(image-set)/,W+"$1"),e,"")+e;case 5495:case 3959:return f(e,/(image-set\([^]*)/,W+"$1$`$1");case 4968:return f(f(e,/(.+:)(flex-)?(.*)/,"-webkit-box-pack:$3-ms-flex-pack:$3"),/s.+-b[^;]+/,"justify")+W+e+e;case 4095:case 3583:case 4068:case 2532:return f(e,/(.+)-inline(.+)/,W+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(p(e)-1-t>6)switch(d(e,t+1)){case 109:if(45!==d(e,t+4))break;case 102:return f(e,/(.+:)(.+)-([^]+)/,"$1-webkit-$2-$3$1"+F+(108==d(e,t+3)?"$3":"$2-$3"))+e;case 115:return~u(e,"stretch")?Z(f(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(115!==d(e,t+1))break;case 6444:switch(d(e,p(e)-3-(~u(e,"!important")&&10))){case 107:return f(e,":",":"+W)+e;case 101:return f(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+W+(45===d(e,14)?"inline-":"")+"box$3$1"+W+"$2$3$1"+U+"$2box$3")+e}break;case 5936:switch(d(e,t+11)){case 114:return W+e+U+f(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return W+e+U+f(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return W+e+U+f(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return W+e+U+e+e}return e}function X(e){return P(Q("",null,null,null,[""],e=T(e),0,[0],e))}function Q(e,t,r,a,n,i,o,c,l){for(var d=0,h=0,m=o,b=0,v=0,y=0,_=1,w=1,x=1,k=0,A="",C=n,z=i,E=a,T=A;w;)switch(y=k,k=S()){case 40:if(108!=y&&58==T.charCodeAt(m-1)){-1!=u(T+=f(M(k),"&","&\f"),"&\f")&&(x=-1);break}case 34:case 39:case 91:T+=M(k);break;case 9:case 10:case 13:case 32:T+=D(y);break;case 92:T+=R(j()-1,7);continue;case 47:switch(N()){case 42:case 47:g(ee(I(S(),j()),t,r),l);break;default:T+="/"}break;case 123*_:c[d++]=p(T)*x;case 125*_:case 59:case 0:switch(k){case 0:case 125:w=0;case 59+h:v>0&&p(T)-m&&g(v>32?te(T+";",a,r,m-1):te(f(T," ","")+";",a,r,m-2),l);break;case 59:T+=";";default:if(g(E=K(T,t,r,d,h,n,c,A,C=[],z=[],m),i),123===k)if(0===h)Q(T,t,E,E,C,i,m,c,z);else switch(b){case 100:case 109:case 115:Q(e,E,E,a&&g(K(e,E,E,0,0,n,c,A,n,C=[],m),z),n,z,m,c,a?C:z);break;default:Q(T,E,E,E,[""],z,0,c,z)}}d=h=v=0,_=x=1,A=T="",m=o;break;case 58:m=1+p(T),v=y;default:if(_<1)if(123==k)--_;else if(125==k&&0==_++&&125==O())continue;switch(T+=s(k),k*_){case 38:x=h>0?1:(T+="\f",-1);break;case 44:c[d++]=(p(T)-1)*x,x=1;break;case 64:45===N()&&(T+=M(S())),b=N(),h=m=p(A=T+=L(j())),k++;break;case 45:45===y&&2==p(T)&&(_=0)}}return i}function K(e,t,r,a,n,i,s,c,u,d,p){for(var g=n-1,b=0===n?i:[""],v=m(b),y=0,_=0,w=0;y<a;++y)for(var x=0,k=h(e,g+1,g=o(_=s[y])),C=e;x<v;++x)(C=l(_>0?b[x]+" "+k:f(k,/&\f/g,b[x])))&&(u[w++]=C);return A(e,t,r,0===n?J:c,u,d,p)}function ee(e,t,r){return A(e,t,r,G,s(x),h(e,2,-2),0)}function te(e,t,r,a){return A(e,t,r,q,h(e,0,a),h(e,a+1,-1),a)}var re=function(e,t,r){for(var a=0,n=0;a=n,n=N(),38===a&&12===n&&(t[r]=1),!E(n);)S();return z(e,w)},ae=function(e,t){return P(function(e,t){var r=-1,a=44;do{switch(E(a)){case 0:38===a&&12===N()&&(t[r]=1),e[r]+=re(w-1,t,r);break;case 2:e[r]+=M(a);break;case 4:if(44===a){e[++r]=58===N()?"&\f":"",t[r]=e[r].length;break}default:e[r]+=s(a)}}while(a=S());return e}(T(e),t))},ne=new WeakMap,ie=function(e){if("rule"===e.type&&e.parent&&!(e.length<1)){for(var t=e.value,r=e.parent,a=e.column===r.column&&e.line===r.line;"rule"!==r.type;)if(!(r=r.parent))return;if((1!==e.props.length||58===t.charCodeAt(0)||ne.get(r))&&!a){ne.set(e,!0);for(var n=[],i=ae(t,n),o=r.props,s=0,c=0;s<i.length;s++)for(var l=0;l<o.length;l++,c++)e.props[c]=n[s]?i[s].replace(/&\f/g,o[l]):o[l]+" "+i[s]}}},oe=function(e){if("decl"===e.type){var t=e.value;108===t.charCodeAt(0)&&98===t.charCodeAt(2)&&(e.return="",e.value="")}},se=[function(e,t,r,a){if(e.length>-1&&!e.return)switch(e.type){case q:e.return=Z(e.value,e.length);break;case Y:return H([C(e,{value:f(e.value,"@","@"+W)})],a);case J:if(e.length)return function(e,t){return e.map(t).join("")}(e.props,(function(t){switch(function(e,t){return(e=t.exec(e))?e[0]:e}(t,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return H([C(e,{props:[f(t,/:(read-\w+)/,":-moz-$1")]})],a);case"::placeholder":return H([C(e,{props:[f(t,/:(plac\w+)/,":-webkit-input-$1")]}),C(e,{props:[f(t,/:(plac\w+)/,":-moz-$1")]}),C(e,{props:[f(t,/:(plac\w+)/,U+"input-$1")]})],a)}return""}))}}],ce=function(e){var t=e.key;if("css"===t){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,(function(e){-1!==e.getAttribute("data-emotion").indexOf(" ")&&(document.head.appendChild(e),e.setAttribute("data-s",""))}))}var a=e.stylisPlugins||se;var n,o,s={},c=[];n=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),(function(e){for(var t=e.getAttribute("data-emotion").split(" "),r=1;r<t.length;r++)s[t[r]]=!0;c.push(e)}));var l,f,u,d,h=[V,(d=function(e){l.insert(e)},function(e){e.root||(e=e.return)&&d(e)})],p=(f=[ie,oe].concat(a,h),u=m(f),function(e,t,r,a){for(var n="",i=0;i<u;i++)n+=f[i](e,t,r,a)||"";return n});o=function(e,t,r,a){l=r,H(X(e?e+"{"+t.styles+"}":t.styles),p),a&&(g.inserted[t.name]=!0)};var g={key:t,sheet:new i({key:t,container:n,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:o};return g.sheet.hydrate(c),g};r(679);var le=function(e){for(var t,r=0,a=0,n=e.length;n>=4;++a,n-=4)t=1540483477*(65535&(t=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+(59797*(t>>>16)<<16),r=1540483477*(65535&(t^=t>>>24))+(59797*(t>>>16)<<16)^1540483477*(65535&r)+(59797*(r>>>16)<<16);switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+(59797*(r>>>16)<<16)}return(((r=1540483477*(65535&(r^=r>>>13))+(59797*(r>>>16)<<16))^r>>>15)>>>0).toString(36)},fe={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1};var ue=/[A-Z]|^ms/g,de=/_EMO_([^_]+?)_([^]*?)_EMO_/g,he=function(e){return 45===e.charCodeAt(1)},pe=function(e){return null!=e&&"boolean"!=typeof e},me=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e(r)),t[r]}}((function(e){return he(e)?e:e.replace(ue,"-$&").toLowerCase()})),ge=function(e,t){switch(e){case"animation":case"animationName":if("string"==typeof t)return t.replace(de,(function(e,t,r){return ve={name:t,styles:r,next:ve},t}))}return 1===fe[e]||he(e)||"number"!=typeof t||0===t?t:t+"px"};function be(e,t,r){if(null==r)return"";if(void 0!==r.__emotion_styles)return r;switch(typeof r){case"boolean":return"";case"object":if(1===r.anim)return ve={name:r.name,styles:r.styles,next:ve},r.name;if(void 0!==r.styles){var a=r.next;if(void 0!==a)for(;void 0!==a;)ve={name:a.name,styles:a.styles,next:ve},a=a.next;return r.styles+";"}return function(e,t,r){var a="";if(Array.isArray(r))for(var n=0;n<r.length;n++)a+=be(e,t,r[n])+";";else for(var i in r){var o=r[i];if("object"!=typeof o)null!=t&&void 0!==t[o]?a+=i+"{"+t[o]+"}":pe(o)&&(a+=me(i)+":"+ge(i,o)+";");else if(!Array.isArray(o)||"string"!=typeof o[0]||null!=t&&void 0!==t[o[0]]){var s=be(e,t,o);switch(i){case"animation":case"animationName":a+=me(i)+":"+s+";";break;default:a+=i+"{"+s+"}"}}else for(var c=0;c<o.length;c++)pe(o[c])&&(a+=me(i)+":"+ge(i,o[c])+";")}return a}(e,t,r);case"function":if(void 0!==e){var n=ve,i=r(e);return ve=n,be(e,t,i)}break;case"string":}if(null==t)return r;var o=t[r];return void 0!==o?o:r}var ve,ye=/label:\s*([^\s;\n{]+)\s*(;|$)/g;var _e=function(e,t,r){if(1===e.length&&"object"==typeof e[0]&&null!==e[0]&&void 0!==e[0].styles)return e[0];var a=!0,n="";ve=void 0;var i=e[0];null==i||void 0===i.raw?(a=!1,n+=be(r,t,i)):n+=i[0];for(var o=1;o<e.length;o++)n+=be(r,t,e[o]),a&&(n+=i[o]);ye.lastIndex=0;for(var s,c="";null!==(s=ye.exec(n));)c+="-"+s[1];return{name:le(n)+c,styles:n,next:ve}};e.useInsertionEffect?e.useInsertionEffect:e.useLayoutEffect;function we(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return _e(t)}var xe=function(e,t,r){var a=e.key+"-"+t.name;!1===r&&void 0===e.registered[a]&&(e.registered[a]=t.styles)},ke={}.hasOwnProperty,Ae=(0,e.createContext)("undefined"!=typeof HTMLElement?ce({key:"css"}):null);var Ce=Ae.Provider,Oe=function(t){return(0,e.forwardRef)((function(r,a){var n=(0,e.useContext)(Ae);return t(r,n,a)}))},Se=(0,e.createContext)({});var Ne=e.useInsertionEffect?e.useInsertionEffect:function(e){e()};var je="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",ze=function(e,t){var r={};for(var a in t)ke.call(t,a)&&(r[a]=t[a]);return r[je]=e,r},Ee=function(e){var t=e.cache,r=e.serialized,a=e.isStringTag;xe(t,r,a);Ne((function(){return function(e,t,r){xe(e,t,r);var a=e.key+"-"+t.name;if(void 0===e.inserted[t.name]){var n=t;do{e.insert(t===n?"."+a:"",n,e.sheet,!0),n=n.next}while(void 0!==n)}}(t,r,a)}));return null},Te=Oe((function(t,r,a){var n=t.css;"string"==typeof n&&void 0!==r.registered[n]&&(n=r.registered[n]);var i=t[je],o=[n],s="";"string"==typeof t.className?s=function(e,t,r){var a="";return r.split(" ").forEach((function(r){void 0!==e[r]?t.push(e[r]+";"):a+=r+" "})),a}(r.registered,o,t.className):null!=t.className&&(s=t.className+" ");var c=_e(o,void 0,(0,e.useContext)(Se));s+=r.key+"-"+c.name;var l={};for(var f in t)ke.call(t,f)&&"css"!==f&&f!==je&&(l[f]=t[f]);return l.ref=a,l.className=s,(0,e.createElement)(e.Fragment,null,(0,e.createElement)(Ee,{cache:r,serialized:c,isStringTag:"string"==typeof i}),(0,e.createElement)(i,l))}));var Pe=function(){function e(e){this.isSpeedy=void 0===e.speedy||e.speedy,this.tags=[],this.ctr=0,this.nonce=e.nonce,this.key=e.key,this.container=e.container,this.before=null}var t=e.prototype;return t.insert=function(e){if(this.ctr%(this.isSpeedy?65e3:1)==0){var t,r=function(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t}(this);t=0===this.tags.length?this.before:this.tags[this.tags.length-1].nextSibling,this.container.insertBefore(r,t),this.tags.push(r)}var a=this.tags[this.tags.length-1];if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(a);try{var i=105===e.charCodeAt(1)&&64===e.charCodeAt(0);n.insertRule(e,i?0:n.cssRules.length)}catch(e){0}}else a.appendChild(document.createTextNode(e));this.ctr++},t.flush=function(){this.tags.forEach((function(e){return e.parentNode.removeChild(e)})),this.tags=[],this.ctr=0},e}();var Me=function(e){function t(e,a,c,l,d){for(var h,p,m,g,_,x=0,k=0,A=0,C=0,O=0,T=0,M=m=h=0,R=0,B=0,I=0,$=0,L=c.length,U=L-1,F="",W="",G="",J="";R<L;){if(p=c.charCodeAt(R),R===U&&0!==k+C+A+x&&(0!==k&&(p=47===k?10:47),C=A=x=0,L++,U++),0===k+C+A+x){if(R===U&&(0<B&&(F=F.replace(u,"")),0<F.trim().length)){switch(p){case 32:case 9:case 59:case 13:case 10:break;default:F+=c.charAt(R)}p=59}switch(p){case 123:for(h=(F=F.trim()).charCodeAt(0),m=1,$=++R;R<L;){switch(p=c.charCodeAt(R)){case 123:m++;break;case 125:m--;break;case 47:switch(p=c.charCodeAt(R+1)){case 42:case 47:e:{for(M=R+1;M<U;++M)switch(c.charCodeAt(M)){case 47:if(42===p&&42===c.charCodeAt(M-1)&&R+2!==M){R=M+1;break e}break;case 10:if(47===p){R=M+1;break e}}R=M}}break;case 91:p++;case 40:p++;case 34:case 39:for(;R++<U&&c.charCodeAt(R)!==p;);}if(0===m)break;R++}switch(m=c.substring($,R),0===h&&(h=(F=F.replace(f,"").trim()).charCodeAt(0)),h){case 64:switch(0<B&&(F=F.replace(u,"")),p=F.charCodeAt(1)){case 100:case 109:case 115:case 45:B=a;break;default:B=E}if($=(m=t(a,B,m,p,d+1)).length,0<P&&(_=s(3,m,B=r(E,F,I),a,N,S,$,p,d,l),F=B.join(""),void 0!==_&&0===($=(m=_.trim()).length)&&(p=0,m="")),0<$)switch(p){case 115:F=F.replace(w,o);case 100:case 109:case 45:m=F+"{"+m+"}";break;case 107:m=(F=F.replace(b,"$1 $2"))+"{"+m+"}",m=1===z||2===z&&i("@"+m,3)?"@-webkit-"+m+"@"+m:"@"+m;break;default:m=F+m,112===l&&(W+=m,m="")}else m="";break;default:m=t(a,r(a,F,I),m,l,d+1)}G+=m,m=I=B=M=h=0,F="",p=c.charCodeAt(++R);break;case 125:case 59:if(1<($=(F=(0<B?F.replace(u,""):F).trim()).length))switch(0===M&&(h=F.charCodeAt(0),45===h||96<h&&123>h)&&($=(F=F.replace(" ",":")).length),0<P&&void 0!==(_=s(1,F,a,e,N,S,W.length,l,d,l))&&0===($=(F=_.trim()).length)&&(F="\0\0"),h=F.charCodeAt(0),p=F.charCodeAt(1),h){case 0:break;case 64:if(105===p||99===p){J+=F+c.charAt(R);break}default:58!==F.charCodeAt($-1)&&(W+=n(F,h,p,F.charCodeAt(2)))}I=B=M=h=0,F="",p=c.charCodeAt(++R)}}switch(p){case 13:case 10:47===k?k=0:0===1+h&&107!==l&&0<F.length&&(B=1,F+="\0"),0<P*D&&s(0,F,a,e,N,S,W.length,l,d,l),S=1,N++;break;case 59:case 125:if(0===k+C+A+x){S++;break}default:switch(S++,g=c.charAt(R),p){case 9:case 32:if(0===C+x+k)switch(O){case 44:case 58:case 9:case 32:g="";break;default:32!==p&&(g=" ")}break;case 0:g="\\0";break;case 12:g="\\f";break;case 11:g="\\v";break;case 38:0===C+k+x&&(B=I=1,g="\f"+g);break;case 108:if(0===C+k+x+j&&0<M)switch(R-M){case 2:112===O&&58===c.charCodeAt(R-3)&&(j=O);case 8:111===T&&(j=T)}break;case 58:0===C+k+x&&(M=R);break;case 44:0===k+A+C+x&&(B=1,g+="\r");break;case 34:case 39:0===k&&(C=C===p?0:0===C?p:C);break;case 91:0===C+k+A&&x++;break;case 93:0===C+k+A&&x--;break;case 41:0===C+k+x&&A--;break;case 40:if(0===C+k+x){if(0===h)switch(2*O+3*T){case 533:break;default:h=1}A++}break;case 64:0===k+A+C+x+M+m&&(m=1);break;case 42:case 47:if(!(0<C+x+A))switch(k){case 0:switch(2*p+3*c.charCodeAt(R+1)){case 235:k=47;break;case 220:$=R,k=42}break;case 42:47===p&&42===O&&$+2!==R&&(33===c.charCodeAt($+2)&&(W+=c.substring($,R+1)),g="",k=0)}}0===k&&(F+=g)}T=O,O=p,R++}if(0<($=W.length)){if(B=a,0<P&&(void 0!==(_=s(2,W,B,e,N,S,$,l,d,l))&&0===(W=_).length))return J+W+G;if(W=B.join(",")+"{"+W+"}",0!=z*j){switch(2!==z||i(W,2)||(j=0),j){case 111:W=W.replace(y,":-moz-$1")+W;break;case 112:W=W.replace(v,"::-webkit-input-$1")+W.replace(v,"::-moz-$1")+W.replace(v,":-ms-input-$1")+W}j=0}}return J+W+G}function r(e,t,r){var n=t.trim().split(m);t=n;var i=n.length,o=e.length;switch(o){case 0:case 1:var s=0;for(e=0===o?"":e[0]+" ";s<i;++s)t[s]=a(e,t[s],r).trim();break;default:var c=s=0;for(t=[];s<i;++s)for(var l=0;l<o;++l)t[c++]=a(e[l]+" ",n[s],r).trim()}return t}function a(e,t,r){var a=t.charCodeAt(0);switch(33>a&&(a=(t=t.trim()).charCodeAt(0)),a){case 38:return t.replace(g,"$1"+e.trim());case 58:return e.trim()+t.replace(g,"$1"+e.trim());default:if(0<1*r&&0<t.indexOf("\f"))return t.replace(g,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function n(e,t,r,a){var o=e+";",s=2*t+3*r+4*a;if(944===s){e=o.indexOf(":",9)+1;var c=o.substring(e,o.length-1).trim();return c=o.substring(0,e).trim()+c+";",1===z||2===z&&i(c,1)?"-webkit-"+c+c:c}if(0===z||2===z&&!i(o,1))return o;switch(s){case 1015:return 97===o.charCodeAt(10)?"-webkit-"+o+o:o;case 951:return 116===o.charCodeAt(3)?"-webkit-"+o+o:o;case 963:return 110===o.charCodeAt(5)?"-webkit-"+o+o:o;case 1009:if(100!==o.charCodeAt(4))break;case 969:case 942:return"-webkit-"+o+o;case 978:return"-webkit-"+o+"-moz-"+o+o;case 1019:case 983:return"-webkit-"+o+"-moz-"+o+"-ms-"+o+o;case 883:if(45===o.charCodeAt(8))return"-webkit-"+o+o;if(0<o.indexOf("image-set(",11))return o.replace(O,"$1-webkit-$2")+o;break;case 932:if(45===o.charCodeAt(4))switch(o.charCodeAt(5)){case 103:return"-webkit-box-"+o.replace("-grow","")+"-webkit-"+o+"-ms-"+o.replace("grow","positive")+o;case 115:return"-webkit-"+o+"-ms-"+o.replace("shrink","negative")+o;case 98:return"-webkit-"+o+"-ms-"+o.replace("basis","preferred-size")+o}return"-webkit-"+o+"-ms-"+o+o;case 964:return"-webkit-"+o+"-ms-flex-"+o+o;case 1023:if(99!==o.charCodeAt(8))break;return"-webkit-box-pack"+(c=o.substring(o.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+o+"-ms-flex-pack"+c+o;case 1005:return h.test(o)?o.replace(d,":-webkit-")+o.replace(d,":-moz-")+o:o;case 1e3:switch(t=(c=o.substring(13).trim()).indexOf("-")+1,c.charCodeAt(0)+c.charCodeAt(t)){case 226:c=o.replace(_,"tb");break;case 232:c=o.replace(_,"tb-rl");break;case 220:c=o.replace(_,"lr");break;default:return o}return"-webkit-"+o+"-ms-"+c+o;case 1017:if(-1===o.indexOf("sticky",9))break;case 975:switch(t=(o=e).length-10,s=(c=(33===o.charCodeAt(t)?o.substring(0,t):o).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|c.charCodeAt(7))){case 203:if(111>c.charCodeAt(8))break;case 115:o=o.replace(c,"-webkit-"+c)+";"+o;break;case 207:case 102:o=o.replace(c,"-webkit-"+(102<s?"inline-":"")+"box")+";"+o.replace(c,"-webkit-"+c)+";"+o.replace(c,"-ms-"+c+"box")+";"+o}return o+";";case 938:if(45===o.charCodeAt(5))switch(o.charCodeAt(6)){case 105:return c=o.replace("-items",""),"-webkit-"+o+"-webkit-box-"+c+"-ms-flex-"+c+o;case 115:return"-webkit-"+o+"-ms-flex-item-"+o.replace(k,"")+o;default:return"-webkit-"+o+"-ms-flex-line-pack"+o.replace("align-content","").replace(k,"")+o}break;case 973:case 989:if(45!==o.charCodeAt(3)||122===o.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(c=e.substring(e.indexOf(":")+1)).charCodeAt(0)?n(e.replace("stretch","fill-available"),t,r,a).replace(":fill-available",":stretch"):o.replace(c,"-webkit-"+c)+o.replace(c,"-moz-"+c.replace("fill-",""))+o;break;case 962:if(o="-webkit-"+o+(102===o.charCodeAt(5)?"-ms-"+o:"")+o,211===r+a&&105===o.charCodeAt(13)&&0<o.indexOf("transform",10))return o.substring(0,o.indexOf(";",27)+1).replace(p,"$1-webkit-$2")+o}return o}function i(e,t){var r=e.indexOf(1===t?":":"{"),a=e.substring(0,3!==t?r:10);return r=e.substring(r+1,e.length-1),M(2!==t?a:a.replace(A,"$1"),r,t)}function o(e,t){var r=n(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return r!==t+";"?r.replace(x," or ($1)").substring(4):"("+t+")"}function s(e,t,r,a,n,i,o,s,c,f){for(var u,d=0,h=t;d<P;++d)switch(u=T[d].call(l,e,h,r,a,n,i,o,s,c,f)){case void 0:case!1:case!0:case null:break;default:h=u}if(h!==t)return h}function c(e){return void 0!==(e=e.prefix)&&(M=null,e?"function"!=typeof e?z=1:(z=2,M=e):z=0),c}function l(e,r){var a=e;if(33>a.charCodeAt(0)&&(a=a.trim()),a=[a],0<P){var n=s(-1,r,a,a,N,S,0,0,0,0);void 0!==n&&"string"==typeof n&&(r=n)}var i=t(E,a,r,0,0);return 0<P&&(void 0!==(n=s(-2,i,a,a,N,S,i.length,0,0,0))&&(i=n)),"",j=0,S=N=1,i}var f=/^\0+/g,u=/[\0\r\f]/g,d=/: */g,h=/zoo|gra/,p=/([,: ])(transform)/g,m=/,\r+?/g,g=/([\t\r\n ])*\f?&/g,b=/@(k\w+)\s*(\S*)\s*/,v=/::(place)/g,y=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,w=/\(\s*(.*)\s*\)/g,x=/([\s\S]*?);/g,k=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,O=/([^-])(image-set\()/,S=1,N=1,j=0,z=1,E=[],T=[],P=0,M=null,D=0;return l.use=function e(t){switch(t){case void 0:case null:P=T.length=0;break;default:if("function"==typeof t)T[P++]=t;else if("object"==typeof t)for(var r=0,a=t.length;r<a;++r)e(t[r]);else D=0|!!t}return e},l.set=c,void 0!==e&&c(e),l},De="/*|*/";function Re(e){e&&Be.current.insert(e+"}")}var Be={current:null},Ie=function(e,t,r,a,n,i,o,s,c,l){switch(e){case 1:switch(t.charCodeAt(0)){case 64:return Be.current.insert(t+";"),"";case 108:if(98===t.charCodeAt(2))return""}break;case 2:if(0===s)return t+De;break;case 3:switch(s){case 102:case 112:return Be.current.insert(r[0]+t),"";default:return t+(0===l?De:"")}case-2:t.split("/*|*/}").forEach(Re)}},$e=function(e){void 0===e&&(e={});var t,r=e.key||"css";void 0!==e.prefix&&(t={prefix:e.prefix});var a=new Me(t);var n,i={};n=e.container||document.head;var o,s=document.querySelectorAll("style[data-emotion-"+r+"]");Array.prototype.forEach.call(s,(function(e){e.getAttribute("data-emotion-"+r).split(" ").forEach((function(e){i[e]=!0})),e.parentNode!==n&&n.appendChild(e)})),a.use(e.stylisPlugins)(Ie),o=function(e,t,r,n){var i=t.name;Be.current=r,a(e,t.styles),n&&(c.inserted[i]=!0)};var c={key:r,sheet:new Pe({key:r,container:n,nonce:e.nonce,speedy:e.speedy}),nonce:e.nonce,inserted:i,registered:{},insert:o};return c};var Le={bg:"#f5f4f5",grey_1:"#7d7d7d",grey_2:"#D8D8D8",grey_3:"#5D676D",grey_4:"silver",grey_5:"#e7e7e7",grey_6:"#c0c0c0",grey_7:"#e8e8e8",grey_8:"#ebedee",grey_9:"#869299",grey_10:"#b1b8bc",grey_11:"#52636C",grey_12:"#c9c9c9",blue:"#0d2532",strong:"#ff9800",positive:"#4aaa61",negative:"#d03434",blossom:"#20ae61",warning:"#e87e0d"},Ue=$("HTML").hasClass("RTL"),Fe=Ue?"rtl":"ltr";Ue&&document.getElementById("bchat_full")&&(Ue=!1,$("HTML").removeClass("RTL"));var We=Ue?"right":"left",Ge=Ue?"left":"right",Je={colors:Le,classes:{direction:we("direction:",Ue?"rtl":"ltr",";",""),float:we("float:",Ue?"right":"left",";",""),opposite_float:we("float:",Ue?"left":"right",";",""),opposite_text_align:we("text-align:",Ue?"left":"right",";",""),side:Ue?"right":"left",opposite_side:Ue?"left":"right",circled_text:{name:"1t9h3hr",styles:"display:inline-block;min-width:1em;min-height:1em;line-height:1em;padding:0.2em 0.4em;text-align:center;border-radius:50%"},shadowed:{name:"omw885",styles:"box-shadow:0 0 1px 0 rgba(0, 0, 0, 0.3),2px 2px 4px 1px rgba(0, 0, 0, 0.2)"},margin_near:function(e){return we("margin-",Ue?"right":"left",":",e,";","")},margin_far:function(e){return we("margin-",Ue?"left":"right",":",e,";","")},padding_near:function(e){return we("padding-",Ue?"right":"left",":",e,";","")},padding_far:function(e){return we("padding-",Ue?"left":"right",":",e,";","")}},z_index:5e3,mobile_resolution:1024,isRTL:Ue,near:We,far:Ge,direction:Fe},qe=mobx;function Ye(e){return(Ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function He(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Ve(e,t){return(Ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var r,a=Qe(e);if(t){var n=Qe(this).constructor;r=Reflect.construct(a,arguments,n)}else r=a.apply(this,arguments);return Xe(this,r)}}function Xe(e,t){return!t||"object"!==Ye(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return et(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return et(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function et(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function tt(e,t,r,a){var n=0,i=0,o=0;a=Object.assign({add:!0,remove:!1,sortBy:!1,merge:!1},a);var s=new Map(e.map((function(e){return[e[r],e]})));if(a.remove){var c,l=new Map(t.map((function(e){return[e[r],e]}))),f=Ke(s.keys());try{for(f.s();!(c=f.n()).done;){var u=c.value;l.has(u)||(s.delete(u),i++)}}catch(e){f.e(e)}finally{f.f()}}var d,h=Ke(t);try{for(h.s();!(d=h.n()).done;){var p=d.value,m=s.get(p[r]);if(m){if(a.merge){var g=Object.assign((0,qe.toJS)(m),p);_.isEqual(m,g)||(s.set(p[r],g),o++)}}else a.add&&(s.set(p[r],p),n++)}}catch(e){h.e(e)}finally{h.f()}if(n||i||o){var b=Array.from(s.values());a.sortBy&&(b=b.sort(_.isFunction(a.sortBy)?a.sortBy:function(e,t){return e[a.sortBy]-t[a.sortBy]})),e.replace(b)}return{addCount:n,removeCount:i,mergedCount:o}}function rt(e){window.Worker?new Worker(Blsm.prm.Mainref+"chat/chat_ww.js?500").onmessage=function(t){e()}:setInterval((function(){e()}),500)}var at=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ve(e,t)}(i,e);var t,r,a,n=Ze(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=n.call(this,e)).state={hasError:!1},t}return t=i,(r=[{key:"componentDidCatch",value:function(e,t){throw this.setState({hasError:!0}),new Error(e.message)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}])&&He(t.prototype,r),a&&He(t,a),i}(t().Component);function nt(e){return $("<div></div>").append(e).text()}var it=400,ot=320,st=475;function ct(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=ft(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function lt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||ft(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ft(e,t){if(e){if("string"==typeof e)return ut(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ut(e,t):void 0}}function ut(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ht=function(e){return Array.isArray(e)||(0,qe.isObservableArray)(e)},pt={}.hasOwnProperty,mt=function e(){for(var t=[],r=0;r<arguments.length;r++){var a=arguments[r];if(a){var n=dt(a);if("string"===n||"number"===n)t.push(a);else if(Array.isArray(a)&&a.length){var i=e.apply(null,a);i&&t.push(i)}else if("object"===n)for(var o in a)pt.call(a,o)&&a[o]&&t.push(o)}}return t.join(" ")||void 0},gt={"&":"%26","/":"%2F","=":"%3D"},bt=function(e){return"string"==typeof e?e.replace(/([&=/])/g,(function(e,t){return gt[t]})):e},vt=function e(t){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?Object.entries(t).filter((function(e){return void 0!==e[1]&&null!==e[1]})).map((function(t){var i=lt(t,2),o=i[0],s=i[1];o=a?a+"["+o+"]":o,n&&ht(s)&&(s=s.join("_"));var c=r?bt:encodeURIComponent;return null!==s&&"object"===dt(s)?e(s,r,o):"".concat(c(o),"=").concat(c(s))})).join("&"):""};var yt=function(e){return $.isPlainObject(e)},_t=function e(t,r,a){if(!0===r(t))return t;var n=Array.isArray(t)||yt(t)?Object.values(t):(0,qe.isObservableArray)(t)||(0,qe.isObservableObject)(t)?(0,qe.values)(t):void 0;if(n){var i,o=ct(n);try{for(o.s();!(i=o.n()).done;){var s=i.value,c=e(s,r,a);if(void 0!==c)return!a||Array.isArray(s)||(0,qe.isObservableArray)(s)||a.unshift(s),c}}catch(e){o.e(e)}finally{o.f()}}},wt=function(){return window.innerWidth<=1023};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});document.body.requestFullscreen||document.body.webkitRequestFullscreen;var xt=["method","data","onProgressUp","onProgressDown","json","onError","onComplete","selfErrorHandling"];function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function At(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ot(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Ot(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ot(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function St(e,t){if(null==e)return{};var r,a,n=function(e,t){if(null==e)return{};var r,a,n={},i=Object.keys(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||(n[r]=e[r]);return n}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}var Nt,jt,zt,Et,Tt,Pt,Mt,Dt,Rt,Bt,It,$t=function(e,t,r){var a=t||{},n=a.method,i=void 0===n?"GET":n,o=a.data,s=a.onProgressUp,c=a.onProgressDown,l=a.json,f=a.onError,u=a.onComplete,d=a.selfErrorHandling,h=St(a,xt);if(e=function(e,t){var r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return["test","ajax/","Launcher","integrations/","setup"].some((function(t){return e.startsWith(t)}))||(e=(e.startsWith("chat")?"chat/chat_api?/":"api?/")+(e.endsWith("&")?e.slice(0,-1):e.endsWith("/")?e:e+"/"),r&&(e=e.csrf())),t&&(e+="&"+vt(t)),Blsm.prm.Mainref+e}(e,null,!1),(["DELETE","PATCH","PUT"].includes(i)||l)&&yt(o))if(l){for(var p={},m=0,g=Object.entries(o);m<g.length;m++){var b=Ct(g[m],2),v=b[0],y=b[1];y instanceof File&&(p[v]=y)}o=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach((function(t){At(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({json:JSON.stringify(o)},p)}else h.contentType="application/json",o=JSON.stringify(o);var _=Object.assign({},h,{success:r,data:o,method:i,error:function(t,r,a){null==f||f(t),!d&&Ut(t,r,a,e)},complete:function(e){var t;if(null==u||u(e.responseJSON),!d&&200==e.status&&null!==(t=e.responseJSON)&&void 0!==t&&t.res&&"1"!=e.responseJSON.res){var r=e.responseJSON.res||lng("an error occurred");Blsm.Error(r)}}});if(e.includes("api?")){_.headers={origin_hash:encodeURIComponent(window.location.hash)};var w=Blsm.csrf_get();w&&(_.headers["X-CSRF-TOKEN"]=w)}o&&void 0!==_t(o,(function(e){return e instanceof File}))&&Object.assign(_,{method:"POST",processData:!1,contentType:!1,data:Lt(o)}),(s||c)&&(_.xhr=function(){var e=new window.XMLHttpRequest;return s&&e.upload.addEventListener("progress",(function(e){return e.lengthComputable&&s(e.loaded,e.total)}),!1),c&&e.addEventListener("progress",(function(e){return e.lengthComputable&&c(e.loaded,e.total)}),!1),e});var x=$.ajax(e,_);return{abortFetch:function(){return x.abort()}}},Lt=function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,a=arguments.length>2?arguments[2]:void 0;return yt(t)||Array.isArray(t)?Object.keys(t).forEach((function(n){return e(t[n],r,a?"".concat(a,"[").concat(n,"]"):n)})):r.append(a,t),r},Ut=function(e,t,r,a){var n,i,o;if("abort"!==r&&console&&console.error("Error (ajax): ",{jqXHR:e,textStatus:t,errorThrown:r,url:a}),![0,502,503,504].includes(e.status)&&!(["/api?/notifications/","/api?/comments/","arrowchat","ipapi.co/"].some((function(e){return a.includes(e)}))||e.responseJSON&&e.responseJSON.redirect)){var s=(null===(n=e.responseJSON)||void 0===n?void 0:n.error_msg)||e.responseText||lng("an error occurred"),c=null===(i=e.responseJSON)||void 0===i?void 0:i.error_code;Blsm.prm.LOCALHOST&&null!==(o=e.responseJSON)&&void 0!==o&&o.unexpected_output&&(s+="\n"+e.responseJSON.unexpected_output),c?Blsm.Error(s,lng("the server returned an error")):Blsm.Error(s,lng("the server returned an error")+" :(",{htmlMsg:!0})}};new Map;function Ft(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||Jt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Wt(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Jt(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}function Gt(e){return function(e){if(Array.isArray(e))return qt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jt(e,t){if(e){if("string"==typeof e)return qt(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?qt(e,t):void 0}}function qt(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}function Yt(e,t,r,a){r&&Object.defineProperty(e,t,{enumerable:r.enumerable,configurable:r.configurable,writable:r.writable,value:r.initializer?r.initializer.call(a):void 0})}function Ht(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Vt(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Zt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Xt(e,t,r,a,n){var i={};return Object.keys(a).forEach((function(e){i[e]=a[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=r.slice().reverse().reduce((function(r,a){return a(e,t,r)||r}),i),n&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(n):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Qt=t().createContext(null),Kt=function(e,t){return e.last_mtime?t.last_mtime-e.last_mtime:-1},er=(jt=Xt((Nt=function(){function e(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Ht(this,e),Yt(this,"online",jt,this),Yt(this,"recent",zt,this),Yt(this,"active",Et,this),Yt(this,"listNewChatMode",Tt,this),Yt(this,"listOpened",Pt,this),Yt(this,"listSearch",Mt,this),Yt(this,"status",Dt,this),Yt(this,"on",Rt,this),Yt(this,"_profileDisplay",Bt,this),Zt(this,"singleton",!1),Zt(this,"self_id",null),Zt(this,"attachmentsOn",Blsm.isFeatureEnabled("chat_attachments")),Zt(this,"_server_status","available"),Zt(this,"_chat_data",new Map),Zt(this,"_room_participants",new Map),Yt(this,"_times",It,this),Zt(this,"_chat_read",[]),Zt(this,"_chat_req",[]),Zt(this,"_typing_to",new Set),Zt(this,"_idleTimeout",null),Zt(this,"_hiddenBeeped",!1),Zt(this,"_title",{org:null,msg:null}),Zt(this,"_sounds",{}),Zt(this,"_heartBeatInterval",void 0),(0,qe.makeObservable)(this),this.singleton=!!r.singleton;try{this._sounds.new_message=new Audio(Blsm.prm.Mainref+"images/chat/new_message.mp3")}catch(e){}this._heartBeat(),this._heartBeatInterval=setInterval((function(){return t._heartBeat()}),500),rt((function(){t._blinkTitle()})),this._idleTimeout=setTimeout((function(){return t.status="away"}),6e4),$(document).on("load mousemove keydown DOMMouseScroll mousewheel mousedown touchstart touchmove",(function(){t.status="available",clearTimeout(t._idleTimeout),t._idleTimeout=setTimeout((function(){return t.status="away"}),6e4)})),this._msgSW({focused:!0}),$(document).on("visibilitychange",(function(){document.hidden||(t._hiddenBeeped=!1,t.active.forEach((function(e){return t._markChatAsRead(t.chatData(e))})),t._msgSW({focused:!0}))})),(0,qe.observe)(this,"on",(function(e){Blsm.local_storage.set("bchat_off",e.newValue?void 0:1),e.newValue||t.active.clear()})),(0,qe.observe)(this,"listOpened",(function(e){e.newValue&&wt()?(window.scrollTo(0,0),$("#bchat_bg").css({"overflow-y":"hidden","max-height":"0",position:"relative"})):$("#bchat_bg").css({"overflow-y":"auto","max-height":"none",position:"static"})})),(0,qe.observe)(this,"_profileDisplay",(function(e){e.newValue?wt()&&history.pushState({chat_profile_open:1},"chat_profile_open"):history.state&&1===history.state.chat_profile_open&&history.back()})),$(window).on("popstate",(function(){if(wt())if(t._profileDisplay)t._profileDisplay=!1;else if(t.active.length){var e=t.chatData(t.active[0]);e.display_info?e.display_info=!1:t.deactivateChat(t.active[0])}else t.toggleList(!1)}))}var t,r,a;return t=e,(r=[{key:"sendMessage",value:function(e){var t=this,r=this.chatData(e),a=r.input_msg.trim();a&&(r.input_msg="",$t("chatSet/send_message/"+e,{method:"POST",data:{message:a}},(function(r){return t._sendSuccess(e,r)})))}},{key:"attachmentSend",value:function(e){var t=this,r=this.chatData(e),a=(new Date).getTime(),n=r.cur_upload[0];r.uploads.set(a,0),r.cur_upload=null,$t("chatSet/send_message/"+e,{method:"POST",data:{file:n},complete:function(){return t.chatData(e).uploads.delete(a)},progressUp:function(e,t){return t>0&&r.uploads.set(a,Math.round(e/t*100*10)/10)}},(function(r){return t._sendSuccess(e,r,a)}))}},{key:"attachmentPreview",value:function(e,t){var r=this,a=new FileReader;a.readAsDataURL(t),a.onload=function(a){r.chatData(e).cur_upload=[t,a.target.result]}}},{key:"attachmentPaste",value:function(e,t){var r=Gt(t.items).find((function(e){return"file"===e.kind&&e.type.startsWith("image")}));if(r){var a=r.getAsFile();this.attachmentPreview(e,a)}}},{key:"_sendSuccess",value:function(e,t){if(t.error)throw new Error(t.error);tt(this.chatData(e).messages,[t],"id",{sortBy:"id"}),this.recent.find((function(t){return t.chat_id===e})).last_mtime=t.mtime,this.recent=this.recent.sort(Kt)}},{key:"_heartBeat",value:function(){var e=this;if(this.on&&!1!==this._times.beat){var t=(new Date).getTime();if(this._chat_req.length||!(t-this._times.beat<("away"===this.status?3e4:7e3))){var r={};t-this._times.get_users>=6e4&&(r.get_users=1),this._chat_read.length&&(r.chat_read=this._chat_read,this._chat_read=[]),this._chat_req.length&&(r.chat_req=this._chat_req,this._chat_req=[]),this._typing_to.size&&(r.typing_to=Gt(this._typing_to),this._typing_to.clear()),this._server_status!==this.status&&(r.status=this._server_status=this.status),this._times.beat=!1,$t("chatGet/core/"+this._times.server,{method:"POST",data:r,dataType:"json",selfErrorHandling:!0,onError:function(t){return 401===t.status&&clearInterval(e._heartBeatInterval)},onComplete:function(){e._times.beat=(new Date).getTime(),r.get_users&&(e._times.get_users=e._times.beat)}},(function(t){if(t.self_id&&(e.self_id=t.self_id),t.recent&&tt(e.recent,t.recent,"chat_id",{sortBy:Kt}).addCount&&e._times.server>0&&0===e.active.filter((function(e){return t.recent.find((function(t){return t.chat_id===e}))})).length&&e._play("new_message"),t.online&&(tt(e.online,t.online,"chat_id",{remove:!0,merge:!0}),tt(e.recent,t.online,"chat_id",{add:!1,merge:!0,sortBy:Kt})),t.messages){var r,a=new Map,n=null,i=Wt(t.messages);try{for(i.s();!(r=i.n()).done;){var o=r.value,s=a.get(o.chat_id);s||a.set(o.chat_id,s=[]),s.push(o),e._times.server>0&&"1"!==o.self&&(n=o)}}catch(e){i.e(e)}finally{i.f()}if(n){var c=e.recent.find((function(e){return e.chat_id===n.chat_id}));c&&(e._title.org&&document.title===e._title.msg&&(document.title=e._title.org),e._title.msg=lng("%s sent you a message",c.name.caps()),e.singleton&&Blsm.helpers.favicon_dot(!0))}var l,f=Wt(a.entries());try{var u=function(){var t=Ft(l.value,2),r=t[0],a=t[1],n=e.chatData(r),i=tt(n.messages,a,"id",{sortBy:"id"});!e.active.includes(r)||n.minimized||document.hidden?0<(i.addCount-=a.filter((function(e){return"1"===e.self})).length)&&(e.on&&(!n.new_count||!e._hiddenBeeped&&document.hidden)&&e.recent.find((function(e){return e.chat_id===r}))&&(document.hidden&&(e._hiddenBeeped=!0),e._play("new_message")),i.addCount&&(n.new_count+=i.addCount)):e._markChatAsRead(e.chatData(r),!0),e._appendRecent(r,{last_mtime:n.messages[n.messages.length-1].mtime})};for(f.s();!(l=f.n()).done;)u()}catch(e){f.e(e)}finally{f.f()}}var d=t.typing||[];e._chat_data.forEach((function(e,t){d.includes(t)||(e.r_typing=!1)})),d.forEach((function(t){e.chatData(t).r_typing=!0})),t.s_time&&(e._times.server=t.s_time)}))}}}},{key:"chatData",value:function(e){var t=this,r=this._chat_data.get(e);return r||(r=(0,qe.observable)({chat_id:e,_pages_load:-1,can_fetch:!0,messages:[],uploads:new Map,new_count:0,minimized:!1,display_info:!1,r_typing:!1,input_msg:"",cur_upload:null,getMessages:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.can_fetch&&(-1===this._pages_load||t)&&(this.can_fetch=!1,$t("chatGet/history/"+this.chat_id+"/"+(this._pages_load+1),{},(function(t){e._pages_load++,e.can_fetch=20===t.length,tt(e.messages,t,"id",{sortBy:"id"})}))),this.messages},get noMessages(){return this._pages_load>-1&&0===this.messages.length&&0===this.uploads.size}}),!e.startsWith("r_")&&(0,qe.observe)(r,"input_msg",(function(){r.input_msg.trim()?t._typing_to.add(e):t._typing_to.delete(e)})),(0,qe.observe)(r,"minimized",(function(){t._markChatAsRead(r),r.display_info=!1})),(0,qe.observe)(r,"display_info",(function(){r.display_info&&wt()&&history.pushState({chat_info_open:1},"chat_info_open")})),this._chat_data.set(e,r)),r}},{key:"roomParticipants",value:function(e){var t=this,r=this._room_participants.get(e);return r||(r=(0,qe.observable)({updates_count:-1,users:[],is_mod:!1}),this._room_participants.set(e,r),$t("chatGet/participants/"+e,{},(function(e){if(e.error)throw new Error(e.error);tt(r.users,e,"chat_id",{sortBy:"name"}),r.is_mod=void 0!==r.users.find((function(e){return e.chat_id===t.self_id&&1===e.is_mod})),r.updates_count++}))),r}},{key:"activateChat",value:function(e,t){if(this.self_id!==e)if(this.active.includes(e)){var r=this.chatData(e);r.minimized&&(r.minimized=!1)}else{if(this._appendRecent(e,{},t),this.singleton)this.active.length&&this.deactivateChat(this.active[0]),this.active.push(e);else for(this.active.push(e);this.active.length>1&&window.innerWidth<this.active.reduce((function(e,t){return e+(t.startsWith("r_")?st:ot)}),it);)this.deactivateChat(this.active[0]);wt()&&history.pushState({chat_open:1},"chat_open"),this._markChatAsRead(this.chatData(e))}}},{key:"deactivateChat",value:function(e){this.active.remove(e);var t=this.recent.find((function(t){return t.chat_id===e}));t&&!t.last_mtime&&("room"===t.type?t.last_mtime=this._times.server:this.recent.remove(t));var r=this.chatData(e);r&&(r.cur_upload=null,r.minimized=!1,r.display_info=!1)}},{key:"toggleList",value:function(e){this.listOpened=void 0===e?!this.listOpened:!!e,this.listOpened?wt()&&history.pushState({chat_list_open:1},"chat_list_open"):(this.toggleListSearchMode(!1),history.state&&1===history.state.chat_list_open&&history.back())}},{key:"toggleListSearchMode",value:function(e){this.listNewChatMode=void 0===e?!this.listNewChatMode:!!e,this.listNewChatMode||(this.listSearch="")}},{key:"_appendRecent",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0,a=this.online.find((function(t){return t.chat_id===e}))||r;return a&&tt(this.recent,[Object.assign((0,qe.toJS)(a),t)],"chat_id",{merge:!0,sortBy:Kt}),!!this.recent.find((function(t){return t.chat_id===e}))||(this._chat_req.push(e),!1)}},{key:"roomCreate",value:function(e){var t=this;(e=e.trim())&&(this.listNewChatMode=!1,$t("chatSet/create_room",{method:"POST",data:{name:e}},(function(e){if(e.error)throw new Error(e.error);tt(t.online,[e],"chat_id",{remove:!0,merge:!0}),tt(t.recent,[e],"chat_id",{add:!1,merge:!0,sortBy:Kt}),t.activateChat(e.chat_id)})))}},{key:"roomLeave",value:function(e){var t=this.recent.find((function(t){return t.chat_id===e}));t&&(this.active.remove(t.chat_id),this.recent.remove(t)),$t("chatSet/leave_room/"+e)}},{key:"roomUpdateName",value:function(e,t){if(t=t.trim()){var r=this.recent.find((function(t){return t.chat_id===e}));if(r){if(r.name===t)return;r.name=t}var a=this.online.find((function(t){return t.chat_id===e}));a&&(a.name=t),$t("chatSet/update_room_name/"+e,{method:"POST",data:{name:t}})}}},{key:"_blinkTitle",value:function(){if(!document.hidden)return this._title.org&&document.title===this._title.msg&&(document.title=this._title.org),this._title.msg=null,void(this.singleton&&Blsm.helpers.favicon_dot(!1));document.title===this._title.msg?document.title=this._title.org:document.title===this._title.org?this._title.msg&&(document.title=this._title.msg):this._title.org=document.title}},{key:"_msgSW",value:function(e){this.on&&navigator.serviceWorker&&navigator.serviceWorker.controller&&navigator.serviceWorker.controller.postMessage(JSON.stringify(e))}},{key:"_play",value:function(e){if(this.on&&this._sounds[e]){var t=this._sounds[e].play();t&&t.catch((function(){}))}}},{key:"_markChatAsRead",value:function(e,t){(e.new_count||t)&&(e.new_count=0,!this._chat_read.includes(e.chat_id)&&this._chat_read.push(e.chat_id))}},{key:"loading",get:function(){return 0===this._times.server}},{key:"side_room_info",get:function(){var e=this;return!!(this.singleton&&this.active.length&&this.chatData(this.active[0]).display_info)&&this.recent.find((function(t){return t.chat_id===e.active[0]}))}}])&&Vt(t.prototype,r),a&&Vt(t,a),e}()).prototype,"online",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),zt=Xt(Nt.prototype,"recent",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Et=Xt(Nt.prototype,"active",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Tt=Xt(Nt.prototype,"listNewChatMode",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Pt=Xt(Nt.prototype,"listOpened",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Mt=Xt(Nt.prototype,"listSearch",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Dt=Xt(Nt.prototype,"status",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"available"}}),Rt=Xt(Nt.prototype,"on",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!Blsm.local_storage.get("bchat_off")}}),Bt=Xt(Nt.prototype,"_profileDisplay",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),It=Xt(Nt.prototype,"_times",[qe.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{server:0,beat:0,get_users:0}}}),Xt(Nt.prototype,"loading",[qe.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"loading"),Nt.prototype),Xt(Nt.prototype,"side_room_info",[qe.computed],Object.getOwnPropertyDescriptor(Nt.prototype,"side_room_info"),Nt.prototype),Nt),tr=mobxReactLite;function rr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function ar(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nr(e){return(nr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ir=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&sr(or(e,t),t)},or=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof moment?e:e?("string"==typeof e&&/^\d+$/.test(e)&&(e=+e),"object"!==nr(e)||e instanceof moment||e instanceof Date||(e=(e.date||"")+" "+(e.hour||"")),"string"!=typeof e||/^\d{4}-\d\d-\d\d/.test(e)||(t=moment(e,Blsm.prm.datetime_moment_format)),"number"==typeof e&&e<9e9&&(e*=1e3),t||(t=r.utc?moment.utc(e):moment(e)),void 0!==t._tzm&&(t=t.utcOffset(t._tzm)),t):void 0},sr=function(e,t){var r=moment().startOf("day");if(e){var a=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(r),!0).forEach((function(t){ar(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rr(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({date:!0,time:!0,year:!0,leading_zero:!1,named_month:!1,format:!1,html5format:!1,relative:!1,obj:!1},t),n={};if(a.relative&&e.isAfter(r))return cr(e);if(a.html5format)return e.format(Blsm.prm[(a.date?"date":"")+(a.time?"time":"")+"_input_format"]);if(a.format)return e.format(a.format);var i=e.format(a.year?Blsm.prm.date_moment_format:Blsm.prm.short_date_moment_format),o=e.format(Blsm.prm.time_moment_format);return a.hideMidnight&&/^0+\D0+$/.test(o)&&(o=""),a.obj?(a.date&&(n.date=i),a.time&&(n.hour=o),n):(n="",(!0===a.date||"not_today"===a.date&&e.isBefore(r))&&(n=i),!a.time&&n||(n+=(n?" ":"")+o),n)}},cr=function(e){var t=parseInt(Date.now()/1e3),r=t-e.unix();return r<60?lng("few seconds ago"):(r=Math.round(r/60))<2?lng("one minute ago"):r<60?lng("%s minutes ago",r):e.format("M-D-Y")!==or(t).format("M-D-Y")?sr(e,{time:!1}):sr(e,{date:!1})},lr={ActionsSubmit:"far fa-caret-square-down",AssignActivity:"far fa-clipboard-check",AssignOutsource:"fas fa-share-square",AssignReview:"fas fa-users",accessibility:"fal fa-glasses",align_center:"far fa-align-center",align_left:"far fa-align-left",align_right:"far fa-align-right",arrow_down:"fas fa-chevron-down",arrow_down_double:"fas fa-chevrons-down",arrow_go_left:"far fa-arrow-left",arrow_go_right:"far fa-arrow-right",arrow_left:"fas fa-chevron-left",arrow_left_double:"fas fa-chevrons-left",arrow_out_square:"far fa-arrow-up-right-from-square",arrow_right:"fas fa-chevron-right",arrow_right_double:"fas fa-chevrons-right",arrow_to_left:"far fa-arrow-to-left",arrow_to_right:"far fa-arrow-to-right",arrow_up:"fas fa-chevron-up",arrow_up_double:"fas fa-chevrons-up",asterisk:"fas fa-asterisk",attachment:"far fa-paperclip",auto_enrolled:"fas fa-sync-alt",back:"fas fa-reply","badge-airplane":"fas fa-plane","badge-ambulance":"fas fa-ambulance","badge-badge":"fas fa-award","badge-bananas":"fas fa-sausage","badge-beer":"fas fa-beer","badge-bicycle":"fas fa-biking","badge-branch":"fas fa-leaf-maple","badge-bulb":"fas fa-lightbulb","badge-bus":"fas fa-bus","badge-cake":"fas fa-birthday-cake","badge-car":"fas fa-car","badge-cherries":"fas fa-apple-alt","badge-chilis":"fas fa-pepper-hot","badge-clapper":"fas fa-ticket","badge-fire":"fas fa-fire","badge-flag":"fas fa-flag","badge-flower":"fas fa-flower-tulip","badge-globe":"fas fa-globe-stand","badge-good-mood":"fas fa-smile-beam","badge-graduation":"fas fa-diploma","badge-ice-crystal":"fas fa-snowflake","badge-juice":"fas fa-glass-citrus","badge-leaf":"fas fa-leaf","badge-lifting":"fas fa-whistle","badge-lightning":"fas fa-bolt","badge-line-chart":"fas fa-chart-bar","badge-love":"fas fa-heart","badge-medal":"fas fa-medal","badge-mobile-phone":"fas fa-mobile-android-alt","badge-money-bag":"fas fa-sack-dollar","badge-moon":"fas fa-moon","badge-old-phone":"fas fa-phone-rotary","badge-open-book":"fas fa-book-open","badge-rain":"fas fa-cloud-showers-heavy","badge-rising-graph":"fas fa-chart-line","badge-running":"fas fa-running","badge-shield":"fas fa-shield-alt","badge-ski":"fas fa-skiing","badge-strech":"fas fa-boxing-glove","badge-sun":"fas fa-sun","badge-swimming":"fas fa-swimmer","badge-target":"fas fa-bullseye-arrow","badge-taxi":"fas fa-taxi","badge-tea-cup":"fas fa-mug-tea","badge-traffic-light":"fas fa-traffic-light","badge-train":"fas fa-train","badge-tree":"fas fa-tree-alt","badge-trophy":"fas fa-trophy","badge-video-camera":"fas fa-camera-movie","badge-wine-glasses":"fas fa-champagne-glasses","badge-wrench-screw":"fas fa-tools",bold:"far fa-bold",bookmark:"far fa-star",bookmark_filled:"fas fa-star",bug:"fas fa-bug",burger:"fas fa-bars",by_mail:"far fa-envelope",calendar:"fas fa-calendar-alt",call:"fas fa-phone-alt",camera:"fas fa-camera",caret_down:"fas fa-caret-down",caret_up:"fas fa-caret-up",chalkboard:"fas fa-chalkboard",challenge:"fas fa-bullseye-arrow",channel:"fas fa-signal-stream",chat:"fas fa-comment-dots",chat_info:"far fa-comment-exclamation",checkbox:"far fa-square",checkbox_checked:"fas fa-check-square",cheers:"fas fa-champagne-glasses",clear:"far fa-minus-hexagon",clock:"far fa-clock",clone:"far fa-clone",close:"fas fa-times",coach:"fas fa-chalkboard-teacher",collapse_all:"far fa-compress-alt",content:"fas fa-book-open",copy:"far fa-copy",course:"fas fa-graduation-cap",create:"fas fa-pen-square",cupcake:"far fa-birthday-cake",desktop:"fas fa-briefcase",details:"far fa-list-alt",digging:"fas fa-person-digging",diploma:"far fa-diploma",discussion:"far fa-comments-alt",dislike:"fas fa-thumbs-down",download:"fas fa-download",edit:"fas fa-pencil-alt",empty:"",empty_cart:"fas fa-dolly-empty",enter:"fas fa-sign-in-alt",entity_assignment:"fas fa-clipboard-check",entity_course:"fas fa-graduation-cap",entity_event:"fas fa-calendar-star",entity_external:"fas fa-suitcase-rolling",entity_group:"fas fa-people-group",entity_meeting:"fas fa-calendar-alt",entity_org_unit:"fas fa-sitemap",entity_qualification:"fas fa-stamp",entity_share:"fas fa-book-open",entity_workplan:"fas fa-briefcase",equals:"far fa-equals",event:"fas fa-calendar-star",exit:"fas fa-sign-out-alt",exit_full_screen:"fas fa-compress",expand_all:"far fa-expand-alt",export:"fas fa-file-export",external_content:"fas fa-puzzle",feedback:"fas fa-comment-alt-edit",filter:"far fa-filter",fire:"fas fa-fire",font:"far fa-font",for_u:"fas fa-hand-holding-seedling",forward:"fas fa-share",full_screen:"fas fa-expand",fullscreen:"fas fa-expand",game:"fas fa-gamepad-alt","globe-americas":"fas fa-globe-americas",go_arrow:"fas fa-arrow-right",go_backward:"fas fa-backward",go_forward:"fas fa-forward",google:"fab fa-google",group:"fas fa-user-friends",hierarchy:"fas fa-folder-tree",history:"fas fa-history",home:"fas fa-home",image:"far fa-image",import:"fas fa-file-plus",italic:"far fa-italic",kiosk:"fas fa-tablet-alt",light_bulb:"fal fa-lightbulb-on",like:"fas fa-thumbs-up",link:"far fa-link",list:"far fa-list",list_music:"fas fa-list-music",list_ol:"fas fa-list-ol",lock:"fas fa-lock-alt",lock_open:"fas fa-lock-open-alt",love:"far fa-heart",love_full:"fas fa-heart",mailbox:"fas fa-inbox",manager:"fas fa-user-tie",map_spot:"fas fa-map-marked-alt",mark_plus:"far fa-plus",mark_plus_light:"far fa-plus",mark_v:"fas fa-check",mark_v_light:"fas fa-check",mark_v_strong:"fas fa-check",mark_x:"fas fa-times",mark_x_light:"fas fa-times",media:"far fa-photo-video",meeting:"fas fa-users-class",menu:"far fa-ellipsis-v",menu_calendar:"fas fa-calendar-alt",menu_dashboard:"fas fa-tachometer-alt",menu_h:"far fa-ellipsis-h",menu_info:"fas fa-info-circle",menu_library:"fas fa-book-open",menu_management:"fas fa-cog",menu_messages:"fas fa-inbox",menu_overview:"fas fa-clipboard-check",menu_workspaces:"fas fa-briefcase",message:"fas fa-envelope",mfa:"far fa-shield",mfa_on:"far fa-shield-check",minimize:"far fa-window-minimize",mng_approvals:"fas fa-file-certificate",mng_budget:"fas fa-wallet",mng_courses:"fas fa-graduation-cap",mng_domain:"fas fa-server",mng_elearning:"fas fa-clipboard-check",mng_qualifications:"fas fa-stamp",mng_resources:"fas fa-box-open",mng_settings:"fas fa-cog",mng_site:"fas fa-at",mng_users:"fas fa-users",mobile:"fas fa-mobile-alt",move:"fas fa-arrows-alt",new:"far fa-plus-square",no_entry:"fas fa-ban",notice:"fas fa-megaphone",notifications:"far fa-bell",notifications_off:"far fa-bell-slash",online_content:"fas fa-globe-americas",open:"fas fa-folder-open",order:"far fa-list-ol",pause:"fas fa-pause",phone:"fas fa-mobile-alt",photos:"far fa-images",pin:"far fa-thumbtack",pin_filled:"fas fa-thumbtack",placeholder:"far fa-brackets-curly",play:"fas fa-play",pointer:"fas fa-map-marker",pointer_alt:"fas fa-map-marker-alt",poll:"fas fa-poll",popout:"fas fa-external-link",portal:"fas fa-archway",pretend:"fas fa-mask",preview:"fas fa-eye",print:"fas fa-print",qrcode:"fas fa-qrcode",radio:"far fa-circle",radio_checked:"fas fa-check-circle",radio_full:"fas fa-circle",receipt:"fas fa-file-invoice-dollar",recycle:"fas fa-recycle",reload:"fas fa-redo",reply:"fas fa-reply",reply_all:"fas fa-reply-all",report:"fas fa-chart-column",required:"fas fa-star",rescue:"far fa-comment-alt-medical",reset:"fas fa-undo",sand_clock:"fas fa-hourglass-end",save:"far fa-save",search:"fas fa-search",send:"fas fa-paper-plane",send_comment:"fas fa-paper-plane-top",send_schedule:"fal fa-envelope-open-text",settings:"fas fa-cog",share:"fas fa-share-alt",shuffle:"fas fa-random",sign_minus:"fas fa-minus-circle",sign_notification:"fas fa-exclamation-circle",sign_ok:"far fa-check-circle",sign_plus:"fas fa-plus-circle",skill:"fas fa-brain",skill_l0:"fas fa-paper-plane",skill_l1:"fas fa-helicopter",skill_l2:"fas fa-fighter-jet",skill_l3:"fas fa-space-shuttle",skill_unranked:"fas fa-circle-question",slack:"fab fa-slack",sort:"fas fa-sort",sort_down:"fad fa-sort-down",sort_up:"fad fa-sort-up",split:"fas fa-users-class",strikethrough:"far fa-strikethrough",suitcase:"fas fa-suitcase",support:"fas fa-headset",support_login:"fas fa-headset",switch_users:"fas fa-people-arrows",sync:"fas fa-sync-alt",telescope:"fas fa-telescope",trash:"far fa-trash-alt",trash_all:"fas fa-broom",tree:"fas fa-project-diagram",triangle_down:"fas fa-caret-down",underline:"far fa-underline",upload:"fas fa-cloud-upload-alt",user:"fas fa-user",user_advanced_filter:"fas fa-users-cog",user_pin:"fas fa-id-badge",user_plus:"fas fa-user-plus",user_sync:"fas fa-users-cog",users:"fas fa-users",vendor_activity:"far fa-flag-checkered",vendor_assignment:"far fa-clipboard-check",vendor_audio:"far fa-file-audio",vendor_blog:"far fa-blog",vendor_checklist:"far fa-clipboard-list-check",vendor_courseware:"far fa-file",vendor_dictionary:"far fa-spell-check",vendor_doc:"far fa-file-word",vendor_evaluation:"far fa-file-user",vendor_excel:"far fa-file-times",vendor_external:"far fa-link",vendor_faq:"far fa-question-square",vendor_file:"far fa-file",vendor_final:"far fa-badge-check",vendor_form:"far fa-file-contract",vendor_general:"far fa-file",vendor_glossary:"far fa-spell-check",vendor_html:"far fa-file-code",vendor_image:"far fa-file-image",vendor_lesson:"far fa-file",vendor_master:"far fa-archive",vendor_meeting:"far fa-stopwatch",vendor_pdf:"far fa-file-pdf",vendor_ppt:"far fa-file-powerpoint",vendor_scorm:"far fa-shapes",vendor_survey:"far fa-ballot",vendor_swf:"far fa-shapes",vendor_test:"far fa-ballot-check",vendor_text:"far fa-text-size",vendor_tincan:"far fa-shapes",vendor_video:"far fa-file-video",vendor_wiki:"fab fa-wikipedia-w",view_list:"fas fa-bars",view_tiles:"fas fa-grid-2",visible_off:"fas fa-eye-low-vision",volume:"fas fa-volume",volume_mute:"fas fa-volume-mute",waiting_list:"fas fa-user-clock",warning_triangle:"fas fa-triangle-exclamation",width:"fas fa-arrows-h",wizard:"fas fa-magic",zoom_meeting:"fad fa-camera-home"},fr=function(e){return"users"===e?"icon icon-blossom_logo fas fa-users":"icon icon-".concat(e," ").concat(function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"arrow_far"===e?e="arrow_".concat(t?"left":"right"):"arrow_near"===e&&(e="arrow_".concat(t?"right":"left")),"arrow_to_far"===e?e="arrow_to_".concat(t?"left":"right"):"arrow_to_near"===e&&(e="arrow_to_".concat(t?"right":"left")),"arrow_go_far"===e?e="arrow_go_".concat(t?"left":"right"):"arrow_go_near"===e&&(e="arrow_go_".concat(t?"right":"left")),e in lr?lr[e]:(console.log("unknown '".concat(e,"' icon")),"fas fa-bug")}(e)||"")},ur=r(893),dr=ur.Fragment;function hr(e,t,r){return ke.call(t,"css")?(0,ur.jsx)(Te,ze(e,t),r):(0,ur.jsx)(e,t,r)}function pr(e,t,r){return ke.call(t,"css")?(0,ur.jsxs)(Te,ze(e,t),r):(0,ur.jsxs)(e,t,r)}function mr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var br=we("background:#fff;position:relative;height:100%;width:100%;.bs-scroll{overflow-y:auto;}.bs-new_button,.bs-search,.bs-new_room{padding:12px 16px;.icon{",Je.classes.margin_far("12px"),";display:inline-block;}}.bs-new_button{font-weight:600;color:",Je.colors.blue,";cursor:pointer;background:",Je.colors.grey_8,";}.bs-search{padding:0 16px;background:#fff;border-bottom:1px solid ",Je.colors.grey_2,";.icon-search{font-size:1.3em;color:",Je.colors.grey_3,";}.icon-close{width:21px;height:21px;font-size:10px;padding:6px;color:",Je.colors.grey_9,";background:",Je.colors.bg,";border-radius:50%;cursor:pointer;&:hover{background:",Je.colors.grey_7,";}}}.bs-new_room{padding:0 16px;color:",Je.colors.blue,";background:",Je.colors.grey_8,";.icon-AssignReview{font-size:1.3em;}}.bs-search,.bs-new_room{input{border:0;background:transparent;height:56px;width:calc(100% - 100px);}}.bs-start_msg{padding:25px 10px;text-align:center;color:",Je.colors.grey_10,";font-weight:600;text-transform:uppercase;.icon{font-size:2.5em;margin-bottom:12px;}}#bchat_inline &{box-shadow:0 2px 11px 0 rgba(0, 0, 0, 0.21);border-top:8px solid ",Je.colors.strong,";border-bottom:4px solid #fff;border-radius:8px 8px 0 0;.bs-scroll{max-height:calc(70vh - 100px);.bs-start_msg{max-height:calc(70vh - 100px);height:300px;display:table;width:100%;>div{display:table-cell;vertical-align:middle;}}}@media (max-width: ",Je.mobile_resolution-1,"px){border-radius:0;.bs-scroll{max-height:calc(100% - 110px);}}.bc-side_title{padding:14px 17px 17px 17px;background-color:",Je.colors.strong,";color:#fff;font-weight:600;font-size:1.15em;.bt-options{",Je.classes.opposite_float,";cursor:pointer;font-size:1.3em;line-height:1em;}}}#bchat_full &{display:flex;flex-direction:column;}",""),vr=we("background-color:",Je.colors.strong,";border-radius:50%;color:#fff;cursor:pointer;height:30px;width:30px;text-align:center;font-size:14px;line-height:30px;display:inline-block;",""),yr=we(".bl-title{color:",Je.colors.grey_11,";padding:0 15px;font-weight:600;margin:10px 0 5px;}&>ul{list-style:none;margin:0;padding:0;}",""),_r=we("padding:10px 16px 7px;cursor:pointer;position:relative;min-height:55px;&.active,&:hover{background-color:",Je.colors.grey_7,";}.bc-li-avatar,.bc-li-thumb{display:block;width:34px;height:34px;border-radius:3px;position:relative;",Je.classes.float,";",Je.classes.margin_far("12px"),";}.bc-li-avatar{background-size:contain;background:#e6e6e6 no-repeat center;}.bc-li-thumb{background:",Je.colors.grey_12,";color:#fff;font-size:20px;text-align:center;line-height:1.85em;}.bc-li-name{color:",Je.colors.blue,";font-weight:600;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;font-size:0.9em;}.bc-li-preview{margin-top:4px;color:",Je.colors.grey_3,";overflow:hidden;text-overflow:ellipsis;white-space:nowrap;font-size:0.9em;&.rtl{direction:rtl;text-align:right;}}.bc-li-meta{",Je.classes.opposite_float,";",Je.classes.opposite_text_align,";",Je.classes.margin_near("10px"),";.bc-li-time{color:",Je.colors.grey_3,";font-size:0.8em;}.bc-li-waiting{",Je.classes.circled_text,";background:orange;color:#fff;}}",""),wr=(0,tr.observer)((function(t){var r=t.c,a=t.inRecentList,n=(0,e.useContext)(Qt),i=n.chatData(r.chat_id),o=(i.messages.length?i.messages[i.messages.length-1].message:r.last_message)||"";o=nt(o.replace(/<img src="chat:(.*)"\/>/,""));var s="bc-listitem";return a&&n.singleton&&n.active.length&&r.chat_id===n.active[0]&&(s+=" active"),pr("li",{className:s,css:_r,onClick:function(){return n.activateChat(r.chat_id,r)},children:["room"===r.type?hr("div",{className:"bc-li-thumb",children:hr("span",{className:fr("users")})}):hr("div",{className:"bc-li-avatar",style:{backgroundImage:"url("+r.avatar+")"},children:r.status&&hr(Er,{c:r,sub_class:"bc-li-status"})}),pr("div",{className:"bc-li-meta",children:[r.last_mtime&&hr("div",{className:"bc-li-time",title:ir(r.last_mtime),children:ir(r.last_mtime,{date:"not_today",time:!1})}),r.chat_id===n.self_id&&hr("i",{className:"bc-li-time",children:lng("you").caps()}),1===r.is_mod&&hr("div",{className:fr("badge"),title:lng("manager").caps()}),i.new_count>0&&hr("div",{className:"bc-li-waiting",children:i.new_count})]}),hr("div",{className:"bc-li-name",title:r.name,children:r.name}),o&&hr("div",{className:"bc-li-preview"+(o.isRtl()?" rtl":""),children:o})]})})),xr=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt).roomParticipants(r.chat_id).users;return pr("div",{css:yr,children:[pr("div",{className:"bl-title",children:[lng("room members").caps()," (",a.length,")"]}),hr("ul",{children:a.map((function(e){return hr(wr,{c:e},e.chat_id)}))})]})})),kr=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt),r=t.listSearch.toLowerCase(),a=t.listSearch?t.online.filter((function(e){return e.name.toLowerCase().includes(r)})):t.online;return pr("div",{css:yr,children:[pr("div",{className:"bl-title",children:[lng("active users and rooms").caps()," (",a.length,")"]}),hr("ul",{children:a.map((function(e){return hr(wr,{c:e},e.chat_id)}))})]})})),Ar=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt);return t.recent.length?hr("div",{css:yr,children:hr("ul",{children:t.recent.map((function(e){return hr(wr,{c:e,inRecentList:!0},e.chat_id)}))})}):hr("div",{className:"bs-start_msg",children:pr("div",{children:[hr("div",{className:fr("chat_info")}),lng("no chats yet").caps()]})})})),Cr=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt),r=mr((0,e.useState)(""),2),a=r[0],n=r[1],i=(0,e.useCallback)((function(){return t.toggleListSearchMode(!1)}),[]);return pr("div",{css:br,children:[t.singleton?hr(Lr,{c:{name:lng("new chat").caps()},onBack:i,clickTitle:i}):pr("div",{className:"bc-side_title",children:[pr("span",{style:{cursor:"pointer"},onClick:function(){return t.toggleListSearchMode(!1)},children:[hr("span",{className:fr("arrow_near")})," ",lng("new chat").caps()]}),hr("span",{className:"bt-options",children:hr("span",{className:fr("close"),onClick:function(){return t.toggleList(!1)}})})]}),pr("div",{className:"bs-search",children:[hr("span",{className:fr("search")}),hr("input",{value:t.listSearch,onChange:function(e){return t.listSearch=e.target.value},placeholder:lng("filter users or rooms").caps()}),t.listSearch&&hr("span",{className:fr("close"),onClick:function(){return t.listSearch=""}})]}),t.listSearch?null:pr("div",{className:"bs-new_room",children:[hr("span",{className:fr("AssignReview")}),hr("input",{value:a,maxLength:25,onChange:function(e){return n(e.target.value)},onKeyUp:function(e){return"Enter"===e.key&&t.roomCreate(a)},placeholder:lng("create new room...").caps()}),a.trim()&&hr("span",{css:vr,className:fr("mark_v_light"),title:lng("create room").caps(),onClick:function(){return t.roomCreate(a)}})]}),hr("div",{className:"bs-scroll",children:hr(kr,{})})]})})),Or=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt),r=(0,e.useCallback)((function(){return t.toggleList(!1)}),[]);return pr("div",{css:br,children:[t.singleton?hr(Lr,{c:{name:lng("chats").caps(),avatar:Blsm.user.avatar},logo:!0,avatarTitle:Blsm.user.first_name+" "+Blsm.user.last_name,avatarClick:function(){return t.profileDisplay=!0}}):pr("div",{className:"bc-side_title",children:[lng("chats").caps(),hr("span",{className:"bt-options",children:hr("span",{className:fr("close"),onClick:r})})]}),t.loading?hr("div",{className:"bs-scroll loader"}):pr(dr,{children:[pr("div",{className:"bs-new_button",onClick:function(){return t.listNewChatMode=!0},children:[hr("span",{css:vr,className:fr("mark_plus_light")}),lng("new chat").caps()+" (".concat(t.online.length,")")]}),hr("div",{className:"bs-scroll",children:hr(Ar,{})})]})]})})),Sr=(0,tr.observer)((function(){return(0,e.useContext)(Qt).listNewChatMode?hr(Cr,{}):hr(Or,{})}));function Nr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return jr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function jr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var zr=we("{width:10px;height:10px;border-radius:50%;border:1px solid #fff;span&{display:inline-block;}&.available{background-color:#02AA62;}&.away{background-color:#ffba48;}&.busy{background-color:red;}&.offline{background-color:silver;}&.invisible:before{background-color:blue;}&.ct-status{color:",Je.colors.grey_3,";display:inline-block;}&.bc-li-status{position:absolute;left:-3px;bottom:-5px;}}",""),Er=(0,tr.observer)((function(t){var r=t.c,a=t.sub_class,n=r?r.status:(0,e.useContext)(Qt).status;return hr("span",{css:zr,className:(a?a+" ":"")+n})})),Tr={name:"1slaf18",styles:"padding:15px 15px 0 15px;.icon{cursor:pointer;}.bc_ri_title{border-bottom:1px solid transparent;display:inline-block;}input{width:250px;border:0;border-bottom:1px solid #0d2532;background:none;padding:0;}"},Pr=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt),n=(0,e.useRef)(null),i=Nr((0,e.useState)(!1),2),o=i[0],s=i[1],c=Nr((0,e.useState)(r.name),2),l=c[0],f=c[1],u=function(){a.roomUpdateName(r.chat_id,l),s(!1),f(r.name)};return(0,e.useEffect)((function(){o&&n.current.focus()})),(a.roomParticipants(r.chat_id).is_mod||Blsm.user.isAdmin)&&!r.lms_group_id&&hr("div",{css:Tr,children:pr(dr,o?{children:[hr("span",{className:fr("mark_v_light"),onClick:u}),"",hr("input",{type:"text",value:l,maxLength:25,style:{direction:l.isRtl()?"rtl":"ltr"},onChange:function(e){return f(e.target.value)},onKeyUp:function(e){"Escape"===e.key?s(!1):"Enter"===e.key&&u()},ref:n})]}:{children:[hr("span",{className:fr("edit"),onClick:function(){return s(!0)}})," ",hr("span",{className:"bc_ri_title",children:r.name})]})})})),Mr=we("padding:15px 15px 0 15px;font-weight:600;color:",Je.colors.strong,";.bc_ri_leave_confirm{color:",Je.colors.negative,";}.bc_ri_leave_cancel{color:",Je.colors.positive,";}.bc_ri_leave_confirm,.bc_ri_leave_cancel{&:hover{cursor:pointer;text-decoration:underline;}}",""),Dr=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt),n=Nr((0,e.useState)(!1),2),i=n[0],o=n[1];return hr("div",{css:Mr,children:i?pr(dr,{children:[hr("span",{className:fr("exit")})," ",lng("leave room").caps(),":",hr("span",{className:"bc_ri_leave_confirm",onClick:function(){return a.roomLeave(r.chat_id)},children:lng("yes").caps()}),"",hr("span",{className:"bc_ri_leave_cancel",onClick:function(){return o(!1)},children:lng("no").caps()})]}):pr("span",{style:{cursor:"pointer"},onClick:function(){return o(!0)},children:[hr("span",{className:fr("exit")})," ",lng("leave room").caps()]})})})),Rr={name:"1db95u0",styles:"height:calc(100% - 47px);overflow:auto"},Br=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt),n=a.roomParticipants(r.chat_id),i=(0,e.useCallback)((function(){return a.chatData(r.chat_id).display_info=!1}),[]);return pr(dr,{children:[a.singleton&&hr(Lr,{c:{name:lng("room details").caps()},onClose:i,onBackMobile:i}),pr("div",{css:Rr,className:n.updates_count<0?" loader":"",children:[hr(Pr,{c:r}),hr(Dr,{c:r}),n.updates_count>=0&&hr(xr,{c:r})]})]})})),Ir=we("box-shadow:0 2px 2px 0 rgba(0, 0, 0, 0.1);background:#fff;padding:10px 19px 15px;.ct-buttons{",Je.classes.opposite_float,";color:#000;>span{cursor:pointer;display:inline-block;margin-left:5px;}.ct-waiting{",Je.classes.circled_text,";background:orange;color:#fff;}}.ct-title,.ct-back{color:",Je.colors.blue,";font-size:1.15em;font-weight:600;user-select:none;.icon{&.icon-arrow_near{width:1.3em;}&.icon-group{font-size:1.3em;}}}.ct-main{text-overflow:ellipsis;overflow:hidden;white-space:nowrap;}#bchat_inline .bc-minimized &{padding:2px 19px 7px;}.bchat:not(.bc-minimized) & .ct-title:hover{text-decoration:underline;}@media (max-width: ",Je.mobile_resolution-1,"px){#bchat_inline &{position:fixed;width:100vw;top:0;padding-top:15px;.ct-buttons{font-size:1.3em;>span{margin-left:10px;}}}#bchat_inline .bchat:not(.bc-room) &{.ct-title:hover{text-decoration:none;}}}",""),$r=we("box-shadow:0 2px 2px 0 rgb(32, 174, 97);min-height:76px;padding:16px;z-index:1;display:flex;.ct-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}.ct-main{flex:1;}.ct-buttons,.ct-logo{order:2;}.ct-main,.ct-buttons,.ct-back{line-height:43px;}.ct-main{&.double_line{line-height:normal;}}.ct-avatar,.ct-thumb{width:44px;height:44px;border-radius:3px;margin-right:12px;}.ct-back{padding-right:6px;}.ct-avatar{background:#e6e6e6 no-repeat center;background-size:contain;}.ct-thumb{background:",Je.colors.grey_12,";color:#fff;font-size:22px;text-align:center;line-height:2em;}.ct-logo{margin-top:4px;font-size:40px;color:",Je.colors.blossom,";}",""),Lr=(0,tr.observer)((function(e){var t=e.c,r=e.clickTitle,a=e.onClose,n=e.onBack,i=e.onBackMobile,o=e.logo,s=e.avatarClick,c=e.avatarTitle;return pr("div",{css:[Ir,$r,"",""],children:[o&&hr("div",{className:"ct-logo",children:hr("div",{className:fr("users")})}),a&&hr("div",{className:"ct-buttons",children:hr("span",{className:mt("mobile_off",fr("close")),onClick:a,title:lng("close").caps()})}),i&&hr("div",{className:"ct-back pointer mobile_only",onClick:i,children:hr("span",{className:fr("arrow_near")})}),n&&hr("div",{className:"ct-back",style:{cursor:"pointer"},onClick:n,children:hr("span",{className:fr("arrow_near")})}),"room"===t.type?hr("div",{className:"ct-thumb",children:hr("span",{className:fr("users")})}):t.avatar&&hr("div",{className:"ct-avatar",style:{backgroundImage:"url("+t.avatar+")"},title:c,onClick:s}),pr("div",{className:"ct-main"+(t&&t.status?" double_line":""),children:[hr("div",{style:r?{cursor:"pointer"}:{},className:"ct-title",onClick:r,children:t.name}),t.status&&pr(dr,{children:[hr(Er,{c:t,sub_class:"ct-status"}),"",t.status.caps()]})]})]})})),Ur=(0,tr.observer)((function(t){var r=t.c,a=t.clickTitle,n=(0,e.useContext)(Qt),i=n.chatData(r.chat_id);return pr("div",{css:Ir,children:[pr("div",{className:"ct-buttons",children:[i.new_count>0&&pr(dr,{children:[hr("div",{className:"ct-waiting",children:i.new_count}),""]}),!i.minimized&&hr("span",{className:mt("mobile_off",fr("minimize")),onClick:function(){return i.minimized=!0},title:lng("minimize").caps()}),hr("span",{className:fr("close"),onClick:function(){return n.deactivateChat(r.chat_id)},title:lng("close").caps()})]}),pr("div",{className:"ct-main",onClick:a,children:["room"===r.type?i&&i.display_info?hr("span",{className:fr("arrow_near")}):hr("span",{className:fr("group")}):hr(Er,{c:r,sub_class:"ct-status"}),"",hr("span",{className:"ct-title",children:r.name})]})]})})),Fr=we("position:absolute;background-color:rgba(0, 0, 0, 0.66);z-index:100;top:0;left:0;width:100vw;height:0;transition:height 0s linear;transition-delay:.2s;overflow:hidden;display:flex;justify-content:center;align-items:center;.bcm-frame{background:white;box-shadow:0 1px 5px #000000;border-radius:4px;padding:20px;position:relative;transform:translateY(100vh);transition:transform .2s linear;}&.visible{transition-delay:0s;height:100vh;.bcm-frame{transform:none;}}.icon-close{position:absolute;right:5px;top:5px;cursor:pointer;}.bcm-button{background-color:",Je.colors.strong,";color:#FFF;cursor:pointer;font-weight:600;font-size:1.1em;padding:2px 4px;border-radius:3px;}.bcm-separator{border-top:1px solid silver;width:100%;margin:10px 0;}@media (max-width: ",Je.mobile_resolution-1,"px){align-items:flex-end;.bcm-frame{border-radius:4px 4px 0 0;}}",""),Wr=(0,tr.observer)((function(t){var r=t.visible,a=t.className,n=t.children,i=t.onClose,o=(0,e.useRef)(null),s=Nr((0,e.useState)(null),2),c=s[0],l=s[1];return $("body").toggleClass("pull_refresh_disabled",!!r),hr("div",{css:Fr,className:r?"visible":"",onClick:function(e){return!o.current.contains(e.target)&&i()},onTouchStart:function(e){return l(e.touches[0].clientY)},onTouchMove:function(e){return e.changedTouches[0].clientY-c>100&&i()},children:pr("div",{className:"bcm-frame "+a,ref:o,children:[i&&hr("div",{className:mt("mobile_off",fr("close")),onClick:i}),n]})})})),Gr=we("width:300px;display:flex;flex-direction:column;align-items:center;.bcm-pv-avatar{background:#e6e6e6 no-repeat center;background-size:contain;border-radius:3px;width:100px;height:100px;}.bcm-pb-name{margin-top:10px;font-weight:600;}@media (max-width: ",Je.mobile_resolution-1,"px){width:100vw;max-width:400px;}",""),Jr=(0,tr.observer)((function(t){!function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(t);var r,a=(0,e.useContext)(Qt);return pr(Wr,{css:Gr,onClose:function(){return a.profileDisplay=!1},visible:a.profileDisplay,children:[hr("div",{className:"bcm-pv-avatar",style:{backgroundImage:"url("+Blsm.user.avatar+")"}}),hr("div",{className:"bcm-pb-name",children:r?r.full_name||(r.user_first_name||r.first_name||"")+" "+(r.user_last_name||r.last_name||""):""}),hr("div",{className:"bcm-separator"}),hr("div",{className:"bcm-button",onClick:function(){return confirm(lng("are you sure?"))&&(location="?logout=1")},children:lng("logout").caps()})]})}));var qr=[["#ffb300",lng("orange")],["#aabd04",lng("olive")],["#2bba30",lng("green")],["#2fca86",lng("sea green")],["#00b8a5",lng("light sea green")],["#00bcd4",lng("turquoise")],["#e87e0d",lng("dark orange")],["#f44336",lng("red")],["#e91e63",lng("deep pink")],["#9c27b0",lng("violet")],["#3f51b5",lng("royal blue")],["#2196f3",lng("sky blue")]];function Yr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==r)return;var a,n,i=[],o=!0,s=!1;try{for(r=r.call(e);!(o=(a=r.next()).done)&&(i.push(a.value),!t||i.length!==t);o=!0);}catch(e){s=!0,n=e}finally{try{o||null==r.return||r.return()}finally{if(s)throw n}}return i}(e,t)||Hr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){if(e){if("string"==typeof e)return Vr(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Vr(e,t):void 0}}function Vr(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,a=new Array(t);r<t;r++)a[r]=e[r];return a}var Zr,Xr=we('margin-top:10px;display:block;&:after{display:block;content:"";clear:both;}>div{border-radius:0 4px 4px 4px;max-width:90%;padding:2px 5px;background-color:#fff;color:',Je.colors.blue,";min-width:110px;box-shadow:0 1px 0.5px rgba(0, 0, 0, 0.3);position:relative;",Je.classes.float,";&.file_upload{text-align:center;.loader{min-height:50px;}}.chat-msg{overflow-wrap:break-word;word-wrap:break-word;padding:0 10px;img{max-width:100%;max-height:250px;&.emojione{height:64px;}}&.has_text img.emojione{max-height:1.7em;position:relative;bottom:2px;}&.rtl{direction:rtl;text-align:right;}}.chat-from{color:",Je.colors.grey_4,";font-size:0.8em;font-weight:600;}.chat-meta{",Je.classes.opposite_text_align,";color:",Je.colors.grey_4,';font-size:0.8em;}.chat-spitz{position:absolute;left:-12px;top:0;width:12px;height:19px;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAmCAMAAADp2asXAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAACQUExURUxpccPDw9ra2m9vbwAAAAAAADExMf///wAAABoaGk9PT7q6uqurqwsLCycnJz4+PtDQ0JycnIyMjPf3915eXvz8/E9PT/39/RMTE4CAgAAAAJqamv////////r6+u/v7yUlJeXl5f///5ycnOXl5XNzc/Hx8f///xUVFf///+zs7P///+bm5gAAAM7Ozv///2fVensAAAAvdFJOUwCow1cBCCnqAhNAnY0WIDW2f2/hSeo99g1lBYT87vDXG8/6d8oL4sgM5szrkgl660OiZwAAAHRJREFUKM/ty7cSggAABNFVUQFzwizmjPz/39k4YuFWtm55bw7eHR6ny63+alnswT3/rIDzUSC7CrAziPYCJCsB+gbVkgDtVIDh+DsE9OTBpCtAbSBAZSEQNgWIygJ0RgJMDWYNAdYbAeKtAHODlkHIv997AkLqIVOXVU84AAAAAElFTkSuQmCC");background-position:50% 50%;background-repeat:no-repeat;background-size:contain;}}&.me>div{border-radius:4px 0 4px 4px;',Je.classes.opposite_float,";background-color:",Je.colors.grey_5,";.chat-spitz{position:absolute;left:auto;right:-12px;background-image:url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAmCAYAAADeB1slAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuNi1jMTM4IDc5LjE1OTgyNCwgMjAxNi8wOS8xNC0wMTowOTowMSAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTcgKFdpbmRvd3MpIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEzMTJBODkzMzVFODExRTlBNDc4Rjk4NEZBQTE1M0Y5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkEzMTJBODk0MzVFODExRTlBNDc4Rjk4NEZBQTE1M0Y5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6QTMxMkE4OTEzNUU4MTFFOUE0NzhGOTg0RkFBMTUzRjkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6QTMxMkE4OTIzNUU4MTFFOUE0NzhGOTg0RkFBMTUzRjkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7l7XTSAAABX0lEQVR42mJ8/vz5fwYSwP///7///ft3EQsLS4aEhARB9UwMJAJGRkZOoOHpP3/+VCRGPckWwMDTp09laWrBly9fXtHMgq9fv97R09O7QTMLHj58mEesWpItuH379iQtLa3tNLHgw4cPF1VVVfNJ0UO0BcC0/+3Zs2fhpPqYaAuuXLmSAQyamzSxABipS/T19ReTkyCYiEiS9+Tl5WMlJSUZqW4BsNz5/eLFi3gQm9QyiygLLl26VKSsrHyEgQKA0wKgi7cBw30KA4UAqwU/fvx4yc3NnctABYDNgv/37t1L5OPju0cTC4DpvZGUooAkC968eXNMR0enkYGKAG7Bnz9/Pv7+/TuegcoAbsGNGzcygJnpDk0suHXr1mRg0KxgoAFgBBp+l5eXV5kczcS0KhiB6V3MMS7tFTkWbJ7WRziIgIXZGwYaAkZggUZL88lvtoxaMGrBqAWjFlARAAQYAC8cf7TkoxfOAAAAAElFTkSuQmCC');}}",""),Qr=(0,tr.observer)((function(e){var t=e.color,r=e.m,a=r.from,n=r.self,i=r.message,o=r.mtime,s=i?i.replace(/<img src="chat:(.*)"\/>/,(function(e,t){return window.location.origin+Blsm.prm.Mainref+"GetFile?chat_file="+t})):"",c=s.isRtl(),l=nt(s=s.emojify().nl2br().linkify(!0)).trim().length>0;return hr("li",{css:Xr,className:"1"===n||null===a?" me":"",children:pr("div",{children:[hr("div",{className:"chat-from",style:{color:t},children:a||""}),hr("div",{className:"chat-msg"+(c?" rtl":"")+(l?" has_text":""),children:hr("span",{dangerouslySetInnerHTML:{__html:s}})}),hr("div",{className:"chat-meta",children:hr("span",{title:ir(o),children:ir(o,{date:"not_today",time:!1})})}),hr("div",{className:"chat-spitz"})]})})})),Kr=we("text-align:center;color:",Je.colors.grey_6,";margin-top:20%;",""),ea=we("border:0 solid transparent;border-width:5px 0;user-select:text;overflow:auto;height:calc(100% - 115px);background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 80 40' width='80' height='40'%3E%3Cpath fill='%23000000' fill-opacity='0.03' d='M0 40a19.96 19.96 0 0 1 5.9-14.11 20.17 20.17 0 0 1 19.44-5.2A20 20 0 0 1 20.2 40H0zM65.32.75A20.02 20.02 0 0 1 40.8 25.26 20.02 20.02 0 0 1 65.32.76zM.07 0h20.1l-.08.07A20.02 20.02 0 0 1 .75 5.25 20.08 20.08 0 0 1 .07 0zm1.94 40h2.53l4.26-4.24v-9.78A17.96 17.96 0 0 0 2 40zm5.38 0h9.8a17.98 17.98 0 0 0 6.67-16.42L7.4 40zm3.43-15.42v9.17l11.62-11.59c-3.97-.5-8.08.3-11.62 2.42zm32.86-.78A18 18 0 0 0 63.85 3.63L43.68 23.8zm7.2-19.17v9.15L62.43 2.22c-3.96-.5-8.05.3-11.57 2.4zm-3.49 2.72c-4.1 4.1-5.81 9.69-5.13 15.03l6.61-6.6V6.02c-.51.41-1 .85-1.48 1.33zM17.18 0H7.42L3.64 3.78A18 18 0 0 0 17.18 0zM2.08 0c-.01.8.04 1.58.14 2.37L4.59 0H2.07z'%3E%3C/path%3E%3C/svg%3E\");>ul{padding:5px 12px;list-style:none;max-width:1100px;margin:0 auto;}#bchat_full &{height:calc(100% - 146px);@media (min-width: ",Je.mobile_resolution,"px){padding:0 16px;}}#bchat_inline &{@media (max-width: ",Je.mobile_resolution-1,"px){margin-top:47px;max-height:calc(100% - 123px);}}",""),ta=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt).chatData(r.chat_id),n=(0,e.useRef)(new Map).current,i=(0,e.useRef)(null),o=(0,e.useRef)(0),s=(0,e.useCallback)((function(){o.current=i.current.scrollHeight-i.current.scrollTop,i.current.scrollTop<50&&a.getMessages(!0)}),[]),c=(0,e.useCallback)((function(e){i.current&&(o.current-=e.target.height,i.current.scrollTop=i.current.scrollHeight-o.current),e.target.removeEventListener("load",c)}),[]),l=(0,e.useRef)(!1);(0,e.useEffect)((function(){if(i.current&&(i.current.scrollTop=i.current.scrollHeight-o.current),l.current){if(i.current){var e,t=function(e,t){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=Hr(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var a=0,n=function(){};return{s:n,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,o=!0,s=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return o=e.done,e},e:function(e){s=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(s)throw i}}}}(i.current.getElementsByTagName("img"));try{for(t.s();!(e=t.n()).done;){var r=e.value;r.complete||r.addEventListener("load",c)}}catch(e){t.e(e)}finally{t.f()}}}else l.current=!0}));var f=a.getMessages();return a.noMessages?pr("div",{css:Kr,children:[lng("be the first to say something").caps()," :)"]}):hr("div",{css:ea,onScroll:s,ref:i,children:pr("ul",{children:[f.map((function(e){var t,a;return"room"===r.type&&e.from&&((t=n.get(e.from))||n.set(e.from,(a=n.size+1,t=qr[(a-1)%qr.length][0]))),hr(Qr,{m:e,color:t},e.id)})),Array.from(a.uploads).map((function(e){var t=Yr(e,2),r=t[0],a=t[1];return hr("li",{css:Xr,className:"me",children:pr("div",{className:"file_upload",children:[hr("div",{className:"loader"}),a,"%",hr("br",{})]})},"upload_"+r)}))]})})}));function ra(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function aa(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ra(Object(r),!0).forEach((function(t){na(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ra(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function na(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var ia,oa,sa=function(){var e=we.apply(void 0,arguments),t="animation-"+e.name;return{name:t,styles:"@keyframes "+t+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}(Zr||(ia=["\n\t0% {\n\t\t//opacity: .2;\n\t\ttransform: translateY(0px)\n\t}\n\t28% {\n\t\t//opacity: 1;\n\t\ttransform: translateY(-5px)\n\t}\n\t44% {\n\t\t//opacity: .2;\n\t\ttransform: translateY(0px)\n\t}"],oa||(oa=ia.slice(0)),Zr=Object.freeze(Object.defineProperties(ia,{raw:{value:Object.freeze(oa)}})))),ca=we("bottom:56px;left:12px;position:absolute;>span{font-size:1.8em;color:",Je.colors.grey_1,";animation:",sa," 1.5s infinite ease-in-out;display:inline-block;animation-delay:.2s;&:nth-of-type(2){animation-delay:.3s;}&:nth-of-type(3){animation-delay:.4s;}}","");function la(){return pr("span",{css:ca,children:[hr("span",{children:""}),hr("span",{children:""}),hr("span",{children:""})]})}var fa=we("position:absolute;bottom:68px;background:white;right:0;left:0;text-align:center;border:1px solid #c3c3c3;box-shadow:0 0 3px 1px rgba(0, 0, 0, .2);padding:15px;min-height:100px;.icon-close{position:absolute;right:5px;top:5px;cursor:pointer;font-size:0.7em;color:",Je.colors.grey_11,";}img{max-height:200px;max-width:80%;}.icon-send{position:absolute;top:calc(50% - 40px);left:calc(50% - 40px);font-size:50px;background:rgba(0, 0, 0, 0.3);border-radius:50%;padding:15px 12px 15px 18px;color:white;cursor:pointer;&:hover{background:rgba(0, 0, 0, 0.5);}}",""),ua=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt),n=a.chatData(r.chat_id);return pr("div",{css:fa,children:[hr("div",{className:fr("close"),title:lng("remove attachment").caps(),onClick:function(){return n.cur_upload=null}}),hr("img",{src:n.cur_upload[1],alt:""}),hr("div",{className:fr("send"),onClick:function(){return a.attachmentSend(r.chat_id)}})]})})),da=(0,tr.observer)((function(t){var r=t.c,a=t.offset,n=(0,e.useContext)(Qt),i=n.chatData(r.chat_id),o={className:"bchat bc-minimized"};return"room"===r.type&&(o.className+=" bc-room"),n.singleton||(o.style={right:a+"px"}),hr("div",aa(aa({css:ga},o),{},{onClick:function(){return i.minimized=!1},children:hr(Ur,{c:r,new_count:i.new_count})}))})),ha=we("position:absolute;bottom:0;left:0;right:0;background:#fff;>textarea{width:calc(100% - 72px);height:67px;border:0;padding:24px 18px;&.duo_lines{padding:14px 18px;}&.multi_lines{padding:5px 18px;}}.bnm-controls{",Je.classes.opposite_float,";",Je.classes.padding_far("16px"),";margin:16px 0;.icon{display:inline-block;color:",Je.colors.grey_6,";font-size:19px;padding:8px 0;cursor:pointer;}.bchat_nm_seperator{border-left:1px solid ",Je.colors.grey_2,";margin:0 8px;display:inline-block;height:35px;vertical-align:bottom;}.icon-send{color:",Je.colors.strong,";.RTL &{transform:scale(-1);}}}",""),pa=(0,tr.observer)((function(t){var r,a=t.c,n=(0,e.useContext)(Qt),i=n.chatData(a.chat_id),o=(0,e.useRef)(null),s=(0,e.useRef)(!1),c=(0,e.useRef)(null);return(0,e.useEffect)((function(){s.current||(s.current=!0,wt()||c.current.focus())}),[]),pr("div",{css:ha,children:[pr("div",{className:"bnm-controls",children:[window.FormData&&window.FileReader&&n.attachmentsOn&&pr(dr,{children:[hr("input",{type:"file",accept:"image/*",style:{display:"none"},ref:o,onChange:function(){o.current.files[0]&&(n.attachmentPreview(a.chat_id,o.current.files[0]),o.current.value=null)}}),hr("div",{className:fr("camera"),onClick:function(){return o.current.click()}})]}),i.input_msg&&pr(dr,{children:[hr("div",{className:"bchat_nm_seperator"}),hr("div",{className:fr("send"),onClick:function(){n.sendMessage(a.chat_id),c.current.focus()}})]})]}),hr("textarea",{value:i.input_msg,ref:c,maxLength:"10000",style:Object.assign({backgroundColor:Je.colors.bg},i.input_msg?{direction:i.input_msg.isRtl()?"rtl":"ltr"}:{}),onChange:function(e){i.input_msg=e.target.value.trimStart()},onPaste:function(e){return n.attachmentPaste(a.chat_id,e.clipboardData)},onKeyDown:function(e){return!/android|iPad|iPhone/i.test(navigator.userAgent)&&!e.shiftKey&&"Enter"===e.key&&n.sendMessage(a.chat_id)},className:-1<(r=i.input_msg.indexOf("\n"))?-1<i.input_msg.indexOf("\n",r+1)?"multi_lines":"duo_lines":"",placeholder:lng("say something...").caps()}),hr("div",{style:{clear:"both"}})]})})),ma=(0,tr.observer)((function(t){var r=t.c,a=(0,e.useContext)(Qt),n=a.chatData(r.chat_id),i=(0,e.useCallback)((function(){return a.deactivateChat(r.chat_id)}),[]),o=(0,e.useCallback)((function(){"user"!==r.type||wt()?"room"===r.type&&(n.display_info=!n.display_info):window.location.hash="#user/"+r.chat_id}),[]);return a.singleton?hr(Lr,{c:r,clickTitle:o,onBackMobile:i}):hr(Ur,{c:r,clickTitle:o})})),ga=we("background:",Je.colors.bg,";#bchat_full &{position:relative;height:100%;}#bchat_inline &{box-shadow:0 2px 11px 0 rgba(0, 0, 0, 0.21);border-top:8px solid #fff;border-radius:8px 8px 0 0;position:absolute;bottom:0;height:400px;max-height:90vh;width:295px;&.bc-room{width:450px;}&.bc-minimized{height:auto;}@media (max-width: ",Je.mobile_resolution-1,"px){z-index:",Je.z_index,";width:100vw!important;height:100vh;top:0;max-height:none;border-radius:0;}}",""),ba=(0,tr.observer)((function(t){var r=t.c,a=t.offset,n=(0,e.useContext)(Qt),i=n.chatData(r.chat_id),o={className:"bchat"};return"room"===r.type&&(o.className+=" bc-room"),n.singleton||(o.style={right:a+"px"}),i.minimized?hr(da,{offset:a,c:r}):pr("div",aa(aa({css:ga},o),{},{children:[hr(ma,{c:r}),!n.singleton&&i.display_info?hr(Br,{c:r}):pr(dr,{children:[hr(ta,{c:r}),i.cur_upload&&hr(ua,{c:r}),hr(pa,{c:r}),i.r_typing&&hr(la,{})]})]}))})),va=(0,tr.observer)((function(t){var r=t.offset,a=t.chat_id,n=(0,e.useContext)(Qt),i=n.chatData(a),o={className:"bchat"};a.startsWith("r_")&&(o.className+=" bc-room"),n.singleton||(o.style={right:r+"px"});var s={chat_id:a,name:lng("loading").caps()+"...",type:a.startsWith("r_")?"room":"user"};return i.minimized?hr(da,{offset:r,c:s}):hr("div",aa(aa({css:ga},o),{},{children:hr(Ur,{c:s})}))})),ya=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt);if(!t.active.length)return null;var r=wt()?0:it;return t.active.map((function(e){var a=t.recent.find((function(t){return t.chat_id===e})),n=hr(at,{children:a?hr(ba,{offset:r,c:a}):hr(va,{offset:r,chat_id:e})},e);return wt()||(r+=e.startsWith("r_")?st:ot),n}))}));var _a=we("direction:ltr;box-shadow:0 2px 11px 0 rgba(0, 0, 0, 0.21);border-radius:3px 3px 0 0;padding:10px 15px;background:#fff;color:",Je.colors.blue,";font-weight:600;cursor:pointer;position:absolute;right:250px;bottom:0;user-select:none;@media (max-width: ",Je.mobile_resolution-1,"px){right:0;position:fixed;z-index:",Je.z_index,";}.label{display:inline-block;",Je.classes.direction,";}.bbar-waiting{",Je.classes.circled_text,";background:orange;color:#fff;}.switch{font-size:.7em;vertical-align:sub;margin-left:15px;input:checked+.slider{background-color:",Je.colors.blue,";}}&.bchat-off{padding:5px 10px;",Je.classes.opposite_side,":0;",Je.isRTL?"right: auto;":""," cursor:default;.switch{margin-left:0;}}",""),wa=we("position:absolute;width:325px;right:50px;bottom:0;@media (max-width: ",Je.mobile_resolution-1,"px){z-index:",Je.z_index,";width:100%;height:100vh;top:0;right:0;}",""),xa={name:"6qfuvo",styles:'display:inline-block;direction:ltr;.slider{box-sizing:content-box;cursor:pointer;width:2em;padding:0.25em;border-radius:2.25em;display:block;background-color:#ccc;transition:.4s;&:before{display:block;content:""!important;height:1em;width:1em;background-color:white;transition:.4s;border-radius:50%;}}input{display:none;&:focus+.slider{box-shadow:0 0 1px silver;}&:checked+.slider:before{-ms-transform:translateX(1em);transform:translateX(1em);}}'},ka=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt),r=(0,e.useRef)(null),a=t.recent.reduce((function(e,r){return e+t.chatData(r.chat_id).new_count}),0);return $("body").toggleClass("bchat-on",t.on),pr(dr,{children:[t.listOpened?hr("div",{css:wa,children:hr(Sr,{})}):pr("div",{css:_a,className:t.on?"":" bchat-off",onClick:function(e){return t.on?!r.current.contains(e.target)&&t.toggleList():null},children:[t.on&&pr(dr,{children:[hr(Er,{})," ",pr("span",{className:"label",children:[lng("chat").caps()," (",t.online.length,")"]}),a>0&&pr("span",{children:["",hr("span",{className:"bbar-waiting",children:a})]}),""]}),pr("label",{css:xa,className:"switch",ref:r,title:(t.on?lng("turn chat off"):lng("turn chat on")).caps(),children:[hr("input",{type:"checkbox",onChange:function(e){return t.on=e.target.checked},checked:t.on}),hr("span",{className:"slider"})]})]}),hr(ya,{})]})})),Aa=we("width:100%;height:100vh;display:flex;.bcf-col-list,.bcf-col-chat,.bcf-col-extra{height:100%;display:flex;flex-direction:column;overflow:hidden;position:relative;}.bcf-col-list{flex:1;z-index:1;border-right:1px solid ",Je.colors.grey_2,";}.bcf-col-chat{flex:3;z-index:2;}.bcf-col-extra{flex:1;z-index:3;border-left:1px solid ",Je.colors.grey_2,";background:#fafafa;}@media (max-width: ",Je.mobile_resolution-1,"px){display:block;.bcf-col-list,.bcf-col-chat,.bcf-col-extra{position:absolute;width:100%;height:100vh;transition:transform .2s linear;will-change:transform;&:empty{transform:translateX(100%);transition:none;}}}",""),Ca=(0,tr.observer)((function(){var t=(0,e.useContext)(Qt).side_room_info;return pr("div",{css:Aa,children:[hr("div",{className:"bcf-col-list",children:hr(Sr,{})}),hr("div",{className:"bcf-col-chat",children:hr(ya,{})}),t&&hr("div",{className:"bcf-col-extra",children:hr(Br,{c:t})})]})}));function Oa(e,t){for(var r=0;r<t.length;r++){var a=t[r];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Sa=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,r,a;return t=e,(r=[{key:"full",value:function(){this.cs=new er({singleton:!0}),n().render(pr(Qt.Provider,{value:this.cs,children:[hr(Ca,{}),hr(Jr,{})]}),document.getElementById("bchat_full"))}},{key:"inline",value:function(){var e=we("position:fixed;z-index:",Je.z_index,";width:100%;bottom:0;@media not screen{display:none;}@media (max-width: ",Je.mobile_resolution-1,"px){position:static;bottom:auto;}",""),t=$('<div id="bchat_inline"></div>').appendTo($("body"));this.cs=new er,n().render(hr(Ce,{value:$e({key:"chat"}),children:hr(Qt.Provider,{value:this.cs,children:hr("div",{css:e,children:hr(ka,{})})})}),t[0])}},{key:"openChat",value:function(e){this.cs&&(this.cs.on=!0,this.cs.activateChat(""+e))}},{key:"chatWithGroup",value:function(e,t){var r=this;$t("ajax/ArrowchatExtAjax.class.php",{method:"POST",data:{req:"EnterGroupRoom",group_id:e,meeting_id:t}},(function(e){1==e.res?r.openChat("r_"+e.chatroom_id):Blsm.Error(e.res||lng("an error occurred").caps())}))}}])&&Oa(t.prototype,r),a&&Oa(t,a),e}();window.bchat=new Sa}()}();