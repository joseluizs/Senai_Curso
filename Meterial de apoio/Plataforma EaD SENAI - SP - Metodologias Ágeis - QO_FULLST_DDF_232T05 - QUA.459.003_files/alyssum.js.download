!function(){var e,t,n,r,o={90603:function(e,t,n){"use strict";n.d(t,{_:function(){return P},y:function(){return j}});var r=n(35944),o=n(87363),i=n(70917),a=n(27821),l=n(15560),s=n(24210),c=n(16920),u=n(9107),p=n(66975),d=n(32808),f=n(98e3),m=n(71134),g=n(68567),h=n(85024),b=n(23838);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v,_,w=(v=function(e,t){return(v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),O=function(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e},k=function(){return(k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},x=function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"===("undefined"==typeof Reflect?"undefined":y(Reflect))&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var l=e.length-1;l>=0;l--)(o=e[l])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},S=function(e,t){for(var n=0,r=t.length,o=e.length;n<r;n++,o++)e[o]=t[n];return e},j=function(e){function t(t){var n,o,i=e.call(this,t)||this;return Object.defineProperty(i,"files",{enumerable:!0,configurable:!0,writable:!0,value:[]}),Object.defineProperty(i,"myContentInGroup",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),i.files=S([],t.files).map((function(e){var t=(0,a.observable)({file_name:e.name,file_size:e.size,temp_name:"",progress:0,xhr:(0,f.SC)("content/upload_content_files",{data:{file:e},onProgressUp:function(e,n){return t.progress=(0,m.NM)(100*e/n)},onError:function(){return t.temp_name=!1}},(function(e){return t.temp_name=e.temp_name}))});return t})),i.title=lng("create multiple file content"),i.successMessage=lng("content saved successfully"),i.myContentInGroup=t.my_content_in_group,i._fields=[{name:"share",type:"hidden",value:null==t?void 0:t.share},{name:"unit_id",type:"hidden",value:null==t?void 0:t.unit_id},{name:"folder_id",label:lng("folder"),required:!0,type:"component",Render:h.p,props:{folderTree:t.folderOptions},insert:(null===(n=t.folderOptions)||void 0===n?void 0:n.length)>0},{name:"category_id",label:lng("category"),type:"select",options:(0,m.wd)(t.categoriesOptions),insert:(null===(o=t.categoriesOptions)||void 0===o?void 0:o.length)>0},{type:"component",node:(0,r.tZ)(P,{files:i.files},void 0)}],i._prepFields(),i.ready=!0,i}return w(t,e),Object.defineProperty(t.prototype,"customDirty",{get:function(){return!0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"save",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.files.some((function(e){return""===e.temp_name}))?(0,g.qR)(lng("please wait for all uploads to complete.").caps()):((0,b.vm)().closeDialog(),this.saveToUrl("content/save_content_files",Object.assign(e,{dnduploadfiles:this.files.map((function(e){return{temp_name:e.temp_name,name:e.file_name}})).filter((function(e){var t;return(null===(t=e.temp_name)||void 0===t?void 0:t.length)>0})),my_content_in_group:this.myContentInGroup})))}}),x([a.computed],t.prototype,"customDirty",null),t}(s.I),C=(0,i.iv)(_||(_=O(["\n\t> div {\n\t\tmargin-top: 1em;\n\t}\n"],["\n\t> div {\n\t\tmargin-top: 1em;\n\t}\n"]))),P=(0,l.observer)((function(e){var t=e.files;return(0,o.useEffect)((function(){return function(){return t.forEach((function(e){return e.xhr.abortFetch()}))}}),[]),(0,r.tZ)("div",k({css:C},{children:t.map((function(e,t){return(0,r.tZ)(Z,{file:e},t)}))}),void 0)})),Z=(0,l.observer)((function(e){var t=e.file,n=t.file_name,o=t.progress,i=t.temp_name;return(0,r.BX)("div",k({css:u.a,style:c.g.styles.progressBG(o)},{children:[(0,r.BX)("div",k({className:"meta"},{children:[(0,r.tZ)(p.JO,{icon:(0,d.DW)(n,!0)},void 0),(0,r.tZ)("div",{css:c.g.classes.flex_grow},void 0),!1===i&&(0,r.tZ)(p.JO,{icon:"sign_notification",color:c.g.colors.negative,toolTip:lng("upload failed").caps()},void 0)]}),void 0),(0,r.tZ)("span",k({className:"name"},{children:n}),void 0)]}),void 0)}))},55762:function(e,t,n){"use strict";n.d(t,{SV:function(){return p}});var r=n(87363),o=n.n(r);n(27821);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=u(e);if(t){var o=u(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function u(e){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var p=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(i,e);var t,n,r,o=s(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).state={hasError:!1},t}return t=i,(n=[{key:"componentDidCatch",value:function(e,t){throw this.setState({hasError:!0}),new Error(e.message)}},{key:"render",value:function(){return this.state.hasError?null:this.props.children}}])&&a(t.prototype,n),r&&a(t,r),i}(o().Component)},32656:function(e,t,n){"use strict";n(72466);var r=n(15560),o=n(70917),i=n(16920),a=n(87363),l=n.n(a),s=n(33051),c=n(64902),u=n(66975),p=n(40441),d=n(71134),f=n(70081),m=n(98e3),g=n(48207),h=n(53178),b=n(43698),y=n(7392),v=n(23838),_=n(35944);function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var k=(0,o.iv)(".exp{margin-bottom:30px;}.error{color:",i.g.colors.negative,";}.inputs{margin:15px 0;display:flex;align-items:center;>*+*{",i.g.classes.margin_near("10px"),";}}",""),x=function(){var e=w((0,a.useState)(""),2),t=e[0],n=e[1],r=w((0,a.useState)(""),2),o=r[0],i=r[1],l=w((0,a.useState)(""),2),s=l[0],c=l[1],u=(0,f.tm)();var p=window.location.protocol+"//"+window.location.host+Blsm.prm.relative_path;return s&&(p+="?"+(0,d.Wh)({login_token:s})),(0,_.tZ)("div",{css:k,width:"650px",children:(0,_.BX)(g.U0,{children:[(0,_.tZ)("div",{children:(0,_.tZ)(h.s,{value:p,size:260})}),(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"exp",children:lng("scan the QR code with your mobile device.").caps()}),(0,_.BX)("form",{onSubmit:function(e){e.preventDefault(),t&&(0,m.SC)("users/login_token",{data:{password:t},method:"POST"},(function(e){u.current&&(e.error?(c(""),i(e.error)):e.login_token&&(c(e.login_token),i(e.error)))}))},children:[lng("You may enter your password to skip login screen at your device:").caps(),(0,_.BX)("div",{className:"inputs",children:[(0,_.tZ)(b.I,{type:"password",wrapped:!0,label:lng("password"),value:t||void 0,onChange:n,error:o}),(0,_.tZ)("div",{children:(0,_.tZ)(y.l,{theme:"contained",formButton:!0,disabled:!t,children:lng("confirm").caps()})})]})]}),o&&(0,_.tZ)("div",{className:"error",children:o}),s&&(0,_.tZ)("div",{children:lng("QR code will be valid for 5 minutes!")})]})]})})},S=function(){return(0,v.vm)().openDialog("Component",{child:(0,_.tZ)(x,{}),title:lng("mobile qr code")})},j=n(88989);function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Z(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Z(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){if(e){if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?B(e,t):void 0}}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=(0,o.iv)("display:flex;justify-content:center;align-items:center;>._main{",i.g.classes.margin_near("1em"),";",i.g.classes.margin_far("0.5em"),";._label{display:block;color:",i.g.colors.text_main,";font-weight:700;&:hover{text-decoration:underline;}}._sub_label{font-size:.8em;}}",i.g.mQuery.max(650),"{>._main{display:none;}}",""),E=function(e){var t,n,r,o=e.user,i=e.className,a=o.id,l=o.real_data,f=[{onClick:function(){return(0,p.p4)({logout:!0},!0)},label:lng("logout").caps(),icon:"exit"},l&&{onClick:function(){return(0,v.vm)().pretend(0)},label:lng("stop pretending").caps(),icon:"no_entry"},!(null!==(t=Blsm.InitialData.parameters)&&void 0!==t&&t.dont_go_mobile)&&!(0,d.tq)()&&{onClick:S,label:lng("go mobile").caps(),icon:"qrcode"}],g=j.X.get("recent_pretend")||[];l&&(null===(n=g[0])||void 0===n?void 0:n.id)!==a&&(g.unshift({id:a,name:(0,d.v2)(o),path:Blsm.prm.Mainref||null}),(g=g.filter((function(e,t){return g.findIndex((function(t){return t.id==e.id&&(!e.path||e.path==t.path)}))===t}))).length=Math.min(11,g.length),j.X.set("recent_pretend",g));var h=Blsm.user.isPowerManager||(null===(r=Blsm.user.real_data)||void 0===r?void 0:r.isPowerManager),b=g.filter((function(e){var t=e.id,n=e.path;return!((0,d.Tz)(t)||n&&n!==Blsm.prm.Mainref)})).map((function(e){return{val:e.id,label:e.name}}))||[];(b.length||l||Blsm.user.isAdmin||h)&&(f.push({separator:!0,label:lng("pretend").caps()}),(l||Blsm.user.isAdmin||h)&&f.push({input:{type:"text",label:lng("pretend to be")+"...",maxWidth:"136px",wrapped:!0,showId:!0,suggest:{getData:(0,d.pR)((function(e,t){var n;return(0,m.SC)("users/autocomplete",{data:{term:e||"",cross_domain:1,show_domain:Blsm.user.isAdmin||null!==(n=Blsm.user.real_data)&&void 0!==n&&n.isAdmin?1:0,exclude:null==l?void 0:l.id}},t)}))},onSelect:function(e){return(0,v.vm)().pretend(e.id)}},inputOnly:!0}),b.length&&f.push.apply(f,P(b)));var y=[],w=!1,O=void 0;if(Blsm.user.domains_list){w=lng("admins").caps(),Blsm.user.isAdmin||y.push({val:null,label:lng("admins").caps()});var k=parseInt(Blsm.user.domain_id);Blsm.user.domains_list.forEach((function(e){var t=C(e,2),n=t[0],r=t[1];Blsm.user.isAdmin||n!==k?y.push({val:n,label:r}):w=r})),O=function(e){return(0,m.SC)("ajax/requests.php",{method:"POST",data:{req:"AdminSwitchDomain",domain:e}},(function(){return location.reload(!0)}))}}else Blsm.user.multi_user.length&&(Blsm.user.multi_user.forEach((function(e){var t=C(e,2),n=t[0],r=t[1];parseInt(Blsm.user.id)===n?w=r:y.push({val:n,label:r})})),O=function(e){return(0,m.SC)("ajax/requests.php",{method:"POST",data:{req:"SwitchMultiUser",multiuser:e}},(function(){Blsm.cookies.set("csrf_token","",{expires:-1,path:Blsm.prm.relative_path}),window.location.replace(location.href.split("#")[0])}))});return(0,_.BX)("div",{css:T,className:i,children:[(0,_.tZ)(p.A,{href:{user:a},children:(0,_.tZ)(c.qE,{className:"_avatar",size:"2.3em",rounded:!1,user:o,balloon:!1})}),(0,_.BX)("div",{className:"_main",children:[(0,_.tZ)(p.A,{href:{user:a},className:"_label",children:(0,d.v2)(o)}),(0,_.BX)("div",{className:"_sub_label",children:[l&&(0,_.tZ)(p.A,{href:{user:l.id},children:(0,d.v2)(l)}),y.length>0&&(0,_.BX)(_.HY,{children:[l&&(0,_.tZ)(_.HY,{children:", "}),(0,_.tZ)(s.x,{dropDownLike:!0,options:y,onSelect:O,scrollable:!0,children:w})]})]})]}),(0,_.tZ)(s.x,{options:f,onSelect:function(e){return e&&(0,v.vm)().pretend(e)},children:(0,_.tZ)(u.JO,{icon:"menu",buttonLike:!0})})]})},I=n(73105),A=n(23205),D=n(67861);function R(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e){return function(e){if(Array.isArray(e))return q(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||F(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||F(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(e){if("string"==typeof e)return q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?q(e,t):void 0}}function q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var X=(0,o.iv)("display:flex;align-items:center;",i.g.classes.margin_far("5px"),";>.search_input{background-color:",i.g.darkMode?i.g.colors.bg_input:"#F6F6F6",";padding:0 10px;display:flex;align-items:center;border-radius:8px;height:41px;>.Icon-search{cursor:pointer;transition:font-size .1s;}>input{flex-grow:1;background-color:transparent;height:100%;border:0;color:",i.g.colors.text_main,";width:250px;&::placeholder{color:",i.g.colors.text_placeholder,";}}}",i.g.mQuery.max(520),"{",i.g.classes.margin_near("10px"),";.Icon-search{font-size:17px;}.search_input{>input{width:150px;}}&._focused{position:fixed;top:0;left:0;right:0;height:",i.g.consts.TOP_BAR_HEIGHT,"px;background:white;border-radius:0;z-index:1;}}",""),L=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).searchStore,t=M((0,a.useState)(!1),2),n=t[0],r=t[1],o=(0,d.tq)();if(o&&!n)return(0,_.tZ)("div",{css:X,children:(0,_.tZ)(u.JO,{icon:"search",onClick:function(){return r(!0)}})});var i=e.skillSearchForm?z(e.skillSearchForm.values.values()).map((function(e){return e})):[],l=["content","mycontent","catalog","assignments","users","groups"].includes(e.activeCategory);return(0,_.BX)("form",{css:X,onSubmit:function(e){return e.preventDefault()},className:(0,d.AK)({_focused:n}),children:[e.recentSearches.length>0&&(0,_.tZ)(H,{icon:"clock",contextMenu:{items:e.recentSearches,onSelect:function(t){return e.loadHistory(t)},title:lng("recent searches")}})," ",!o&&(0,_.tZ)(H,{icon:"search",label:(0,D.hI)()[e.activeCategory],contextMenu:{items:e.searchCategories,title:lng("search category"),onSelect:function(t){return e.activeCategory=t},inForm:!0}})," ",(0,_.BX)("div",{className:"search_input",children:[(0,_.tZ)("input",{type:"text",placeholder:lng("search").caps()+"...",value:e.searchTerm,onChange:function(t){return e.setQDelayed(t.target.value)},onKeyUp:function(t){return"Escape"===t.key?e.clearSearch():"Enter"===t.key?e.doSearch():void 0},ref:function(e){return n&&(null==e?void 0:e.focus())},onBlur:function(){return r(!1)}}),(0,_.tZ)(u.JO,{icon:"arrow_go_"+Blsm.lang.lngAlignOpposite,onClick:function(){return e.doSearch()},toolTip:lng("search")})]})," ",e.skillSearchForm&&(0,_.tZ)(H,{form:e.skillSearchForm,icon:"skill",label:lng("skills"),active:i.length>0,disabled:!l})]})})),U=(0,o.iv)("padding:0 10px;border-radius:8px;height:41px;border:1px solid ",i.g.colors.separator_light,";display:flex;align-items:center;cursor:pointer;&:hover{color:",i.g.colors.blue,";background-color:",i.g.colors.blue_shade,";}>div.label{margin:0 10px;white-space:nowrap;}&.active{.search-option-icon{color:",i.g.colors.blue,";}}&.disabled{color:",i.g.colors.disabled_text,";background-color:",i.g.colors.disabled_input,";cursor:not-allowed;}",""),V={name:"24arfb",styles:"padding:0 10px 12px"},H=function(e){var t,n=e.form,r=e.contextMenu,o=e.icon,i=e.label,a=e.active,l=e.disabled;return n?t=(0,_.tZ)("div",{css:V,children:(0,_.tZ)(A.l,{type:"inline",form:n})}):r&&(t=(0,_.tZ)(s.h,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?R(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):R(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r))),l?(0,_.tZ)("div",{children:(0,_.BX)("div",{css:U,className:(0,d.AK)({disabled:l}),children:[o&&(0,_.tZ)(u.JO,{icon:o,className:"search-option-icon"}),i&&(0,_.tZ)("div",{className:"label",children:i.caps()})]})}):(0,_.tZ)("div",{children:(0,_.tZ)(I.y,{content:t,behavior:r?"menu":"click",balloonModes:{align:Blsm.lang.lngAlignOpposite,ignoreAnchor:!0,noTriangle:!0},children:(0,_.BX)("div",{css:U,className:(0,d.AK)({active:a}),children:[o&&(0,_.tZ)(u.JO,{icon:o,className:"search-option-icon"}),i&&(0,_.tZ)("div",{className:"label",children:i.caps()}),n&&(0,_.tZ)(u.JO,{icon:"triangle_down"})]})})})},G=n(29180),J=n(95405),W=n(77376),K=n(39483),Y=n(85597);function Q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Q(Object(n),!0).forEach((function(t){te(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function te(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ne={name:"1l347xn",styles:"flex-grow:1;justify-content:center;display:flex;align-items:center;.Icon{font-size:1.4rem;}.Icon-light_bulb{font-size:1rem;}.empty-notifications{padding:10px 20px;}"},re=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9),t=e.notificationsStore.approvalTypesSorted(),n=e.notificationsStore.totalApprovals(),r=t.map((function(e){return Y.KX[e]})).join(", "),o=(0,a.useRef)(0),l=e.notificationsStore.t2k_echo_req;return(0,_.BX)("div",{css:ne,children:[n>0&&(0,_.tZ)(u.JO,{icon:"sign_notification",color:i.g.colors.blossom,smallButtonLike:!0,toolTip:lng("%s approvals waiting",n)+" (".concat(r,")"),href:{list:"approvals",params:"type=".concat(t[0])}}),l&&(0,_.tZ)(J.SV,{children:(0,_.tZ)(u.JO,{icon:"light_bulb",title:lng("Instructor Insights|timetoknow").caps(),badge:e.notificationsStore.t2k_echo_count,alertBadge:!0,smallButtonLike:!0,href:"#t2k_echo"})}),(0,_.tZ)(I.y,{content:(0,_.tZ)(ie,{}),onOpen:function(){e.notificationsStore.new_count&&(o.current=setTimeout((function(){e.notificationsStore.new_count=0,Blsm.helpers.favicon_dot(!1),(0,m.SC)("notifications/update_gui_notification_time",{method:"POST"})}),1500))},onClose:function(){return clearTimeout(o.current)},mobileLayoutSupport:!0,noPortal:!0,children:(0,_.tZ)(u.JO,{icon:"notifications",badge:e.notificationsStore.new_count,alertBadge:!0,smallButtonLike:!0})})]})})),oe=(0,o.iv)("min-width:350px;color:",i.g.colors.text_sec,";.notification-header{display:flex;padding:10px;align-items:baseline;.spacer{flex-grow:1;}.mark-read,.show-important{font-size:.9em;color:",i.g.colors.text_main,";cursor:pointer;&:hover{text-decoration:underline;}}.important-on{color:",i.g.colors.dominant_main,";}.title{font-size:1.1em;font-weight:bold;color:",i.g.colors.text_main,";}}.notifications-list{max-height:calc(100vh - 170px);overflow:auto;}.empty-notifications{text-align:center;}.get-more{background-color:",i.g.colors.bg_1,";color:",i.g.colors.text_main,";text-align:center;cursor:pointer;padding:1px;}",""),ie=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9);return(0,_.BX)("div",{css:oe,children:[(0,_.BX)("div",{className:"notification-header",children:[(0,_.tZ)("div",{className:"title",children:lng("notifications").caps()}),(0,_.tZ)("div",{className:"spacer"}),(0,_.tZ)("div",{className:"show-important"+(e.notificationsStore.showImportant?" important-on":""),onClick:function(){return e.notificationsStore.toggleImportant()},children:e.notificationsStore.showImportant?lng("show all").caps():lng("show important").caps()}),"|",(0,_.tZ)("div",{className:"mark-read",onClick:function(){return e.notificationsStore.markNotificationsRead()},children:lng("mark all as read").caps()})]}),e.notificationsStore.filteredNotifications.length?(0,_.tZ)("div",{className:"notifications-list",children:e.notificationsStore.filteredNotifications.map((function(e){return(0,_.tZ)(ae,{notification:e},e.pn_id)}))}):(0,_.tZ)("div",{className:"empty-notifications",children:(0,_.tZ)(u.JO,{icon:"notifications_off"})}),e.notificationsStore.notifications.length<e.notificationsStore.total&&(0,_.BX)("div",{className:"get-more",onClick:function(){return e.notificationsStore.fetchNotifications({more:!0})},children:[lng("more").caps(),"..."]})]})})),ae=function(e){return(0,_.tZ)(J.SV,{children:(0,_.tZ)(le,ee({},e))})},le=(0,r.observer)((function(e){var t=e.notification;switch(t.object_type){case"message":return(0,_.tZ)(me,{notification:t});case"activity":return(0,_.tZ)(se,{notification:t});case"following_assignment":return(0,_.tZ)(ge,{notification:t});case"comment_mention":return(0,_.tZ)(he,{notification:t});default:return console.error("NotificationItem: unknown notification",t),(0,_.tZ)("div",{})}})),se=(0,r.observer)((function(e){var t=e.notification;switch(t.activity_type){case"assignment":return(0,_.tZ)(ce,{notification:t});case"task":return(0,_.tZ)(ue,{notification:t});case"comment":return"patients_communication"===t._attr.data.comment_type?(0,_.tZ)(fe,{notification:t}):(0,_.tZ)(pe,{notification:t});case"discussion":return(0,_.tZ)(de,{notification:t});default:return console.error("BaseActivityNotificationItem: unknown activity",t),(0,_.tZ)("div",{})}})),ce=(0,r.observer)((function(e){var t=e.notification,n=t._attr,r=n.context_group_id,o=n.data,i={title:o.activity_assignment_name,is_read:t.is_read,href:"#workspace/".concat(r,"/components//").concat(o.activity_assignment_id),time:t.time,user:t.user,pn_id:t.pn_id,status:{}},a=(0,_.BX)("div",{children:["update"===o.action&&lng("updated by").caps()+" "+(0,d.v2)(t.user),(0,_.tZ)(G.ij,{time:i.time})]});return(0,_.tZ)(ye,ee(ee({},i),{},{children:a}))})),ue=(0,r.observer)((function(e){var t=e.notification,n=t._attr.data,r={title:t.task_title,is_read:t.is_read,href:{edit:"task",id:t.task_id},time:t.time,user:t.user,pn_id:t.pn_id,status:{task_resolution:t.task_resolution,task_status:t.task_status,assignee:t.assignee_name,updates:t.subs.length}},o="";switch(n.action){case"create":o=(0,_.BX)("span",{children:[lng("created by").caps()," ",(0,d.v2)(t.user)]});break;case"update":o=(0,_.BX)("span",{children:[lng("updated by").caps()," ",(0,d.v2)(t.user)]})}return(0,_.tZ)(ye,ee(ee({},r),{},{children:o}))})),pe=(0,r.observer)((function(e){var t,n=e.notification,r=n._attr,o=r.context_group_id,i=r.data,a={title:"",is_read:n.is_read,href:null,time:n.time,user:n.user,pn_id:n.pn_id,status:{}},l=(0,d.v2)(n.user),s={},c=o,u=i,f=n.time,m="",g=u.comment_text?(0,d.s9)(u.comment_text):null;if("create"===u.action)switch(u.comment_type){case"discussion":t={edit:"discussion",id:i.discussion_id},m=(0,_.BX)("span",{children:[lng("commented in")," '",u.discussion_title,"'"]});break;case"task_manager":case"task":l=n.task_title,s={task_resolution:n.task_resolution,task_status:n.task_status,assignee:n.assignee_name,updates:n.subs.length},t={edit:"task",id:u.task_id,section:"c=".concat(u.comment_id)},m=g?(0,_.tZ)(I.u,{html:u.comment_text.mentions(),children:(0,_.BX)("div",{children:[(0,d.v2)(n.user)," ",lng("commented on the task")]})}):(0,_.BX)("div",{children:[(0,d.v2)(n.user)," ",lng("commented on the task")]});break;case"assignment":"catalog"===u.assignment_type?(t=(0,p.p4)({workspace:c,tab:"components",component:u.assignment_id}),m=(0,_.BX)("span",{children:[lng("commented on the content")," '",u.assignment_name,"'"]})):(t=(0,p.p4)({workspace:c,tab:"components",component:u.assignment_id}),m=(0,_.BX)("span",{children:[lng("commented on the assignment")," '",u.assignment_name,"'"]}));break;case"content":t=(0,p.p4)({workspace:c,tab:"social",component:u.lesson_id}),m=(0,_.BX)("span",{children:[lng("commented on the blog post")," '",u.assignment_name,"'"]});break;case"comment":switch(u.real_type){case"task_manager":case"task":l=n.task_title,s={task_resolution:n.task_resolution,task_status:n.task_status,assignee:n.assignee_name,updates:n.subs.length},t={edit:"task",id:u.task_id,section:"c=".concat(u.comment_id)},m=g?(0,_.tZ)(I.u,{html:u.comment_text.mentions(),children:(0,_.BX)("div",{children:[(0,d.v2)(n.user)," ",lng("replied to a comment on the task")]})}):(0,_.BX)("div",{children:[(0,d.v2)(n.user)," ",lng("replied to a comment on the task")]});break;case"discussion":t={edit:"discussion",id:i.discussion_id},m=(0,_.BX)("span",{children:[lng("replied to a comment on the discussion")," '",u.discussion_title,"'"]});break;case"assignment":"catalog"===u.assignment_type?(t=(0,p.p4)({workspace:c,tab:"components",component:u.assignment_id}),m=(0,_.BX)("span",{children:[lng("replied to a comment on the content")," '",u.assignment_name,"'"]})):(t=(0,p.p4)({workspace:c,tab:"components",component:u.assignment_id}),m=(0,_.BX)("span",{children:[lng("replied to a comment on the assignment")," '",u.assignment_name,"'"]}));break;case"content":t=(0,p.p4)({workspace:c,tab:"social",component:u.lesson_id}),m=(0,_.BX)("span",{children:[lng("replied to a comment on the blog post")," '",u.assignment_name,"'"]});break;default:console.error("note: unknown activity",u)}break;case"performance":t=(0,p.p4)({report:"Performance",params:{performance_id:u.performance_id}}),m=(0,_.BX)("span",{children:[lng("commented on a performance for")," '",u.performance_name,"'"]});break;default:console.error("note: unknown activity",u)}return a.title=l,a.href=t,a.status=s,a.time=f,(0,_.tZ)(ye,ee(ee({},a),{},{children:m}))})),de=(0,r.observer)((function(e){var t=e.notification,n=t._attr.data,r={title:(0,d.v2)(t.user),is_read:t.is_read,href:{edit:"discussion",id:n.discussion_id},time:t.time,user:t.user,pn_id:t.pn_id},o=(0,_.tZ)("div",{children:"create"===n.action&&"".concat(lng("started the new discussion")," '").concat(n.discussion_title,"'")});return(0,_.tZ)(ye,ee(ee({},r),{},{children:o}))})),fe=(0,r.observer)((function(e){var t=e.notification,n=t._attr.patient,r={title:n.patient_first_name+" "+n.patient_last_name,is_read:t.is_read,href:{workspace:n.patient_case+"/patients_communication"},time:t.time,user:{user_avatar:n.patient_photo,user_first_name:n.patient_first_name,user_last_name:n.patient_last_name,user_id:n.patient_id},pn_id:t.pn_id};return(0,_.tZ)(ye,ee(ee({},r),{},{children:(0,_.tZ)("span",{children:lng("replied to your message on the subject %s",n.patient_case_subject)})}))})),me=(0,r.observer)((function(e){var t,n=e.notification,r=n._attr,o=r.data,i=r.user,a={title:"",is_read:n.is_read,href:Blsm.prm.Mainref+"#messages/in/"+o.message_id,time:n.time,user:i,pn_id:n.pn_id};return i?(a.title=(0,d.v2)(i),t="".concat(lng("wrote you the message")," '").concat(o.message_subject,"'")):(a.title=lng("system message").caps(),t=o.message_subject),(0,_.tZ)(ye,ee(ee({},a),{},{children:t}))})),ge=(0,r.observer)((function(e){var t=e.notification,n=t._attr,r=n.object_id,o=n.data,i={title:lng("you have a following assignment").caps(),is_read:t.is_read,href:(0,p.p4)({launcher:"assignment",id:r,cuser:o.cuser,absolute:!0}),time:t.time,user:t.user,pn_id:t.pn_id},a=(0,_.BX)("span",{children:[lng("the assignment").caps(),' "',o.assignment_name,'" ',lng("is waiting for you following the completion of the assignment"),' "',o.original_assignment_name,'"']});return(0,_.tZ)(ye,ee(ee({},i),{},{children:a}))})),he=(0,r.observer)((function(e){var t=e.notification,n=t._attr.data,r={title:t.task_title,is_read:t.is_read,href:{edit:"task",id:n.task_id,section:"c=".concat(n.comment_id)},time:t.time,user:t.user,pn_id:t.pn_id},o=(0,_.BX)("span",{children:[(0,d.v2)(n)," ",(0,_.tZ)("span",{style:{color:i.g.colors.dominant_main,fontWeight:600},children:lng("mentioned")})," ",lng("you in a comment")]});return(0,_.tZ)(ye,ee(ee({},r),{},{children:o}))})),be=(0,o.iv)(">div{padding:10px 20px;font-weight:500;cursor:pointer;font-size:.9em;display:flex;&.unread{background-color:",i.g.colors.bg_1,";font-weight:600;.activity-title{color:",i.g.colors.text_main,";}}&:hover{background-color:",i.g.colors.bg_2,";}}._avatar{",i.g.classes.margin_far("6px"),";}.activity-row1{display:flex;",i.g.mQuery.mobile,"{flex-direction:column;}}.activity-title{font-weight:600;color:",i.g.colors.text_main,";display:inline-block;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:calc(100vw - 65px);}.relative-date{font-style:italic;font-size:.9em;",i.g.classes.margin_near("5px"),";}",""),ye=(0,r.observer)((function(e){var t=e.pn_id,n=e.href,r=e.is_read,o=e.user,i=e.title,l=e.status,s=e.time,d=e.children,f=(0,a.useContext)(v.l9);return(0,_.tZ)(p.A,{href:n,newTab:"string"==typeof n&&"#"!==n[0],css:be,onClick:function(){return f.notificationsStore.markRead(t)},children:(0,_.BX)("div",{className:r?"":"unread",children:[(0,_.tZ)("div",{children:o?(0,_.tZ)(c.qE,{className:"_avatar",size:"2.3em",rounded:!1,user:o,balloon:!1}):""}),(0,_.BX)("div",{children:[(0,_.BX)("div",{className:"activity-row1",children:[(0,_.tZ)(K.m,{elType:"span",className:"activity-title",children:i}),l&&l.task_resolution?(0,_.BX)("span",{className:"activity-status",children:[" ",(0,_.tZ)(u.gT,{color:(0,W.Pp)(l.task_resolution),size:".6em"})," ",(0,W.HR)(l.task_status,l.task_resolution).caps(!1)," ",(0,_.BX)("span",{className:"action-assignee",title:lng("assignee"),children:["(",l.assignee,")"]})]}):"",s?(0,_.tZ)(G.ij,{className:"relative-date",time:s}):""]}),(0,_.tZ)("div",{className:"activity-row2",children:d})]})]})})})),ve=n(15940),_e=(0,o.iv)("position:fixed;z-index:",i.g.z.top_bar,";top:0;height:",i.g.consts.TOP_BAR_HEIGHT,"px;",i.g.classes.near(i.g.consts.SIDE_BAR_WIDTH+"px"),";width:calc(100vw - ",i.g.consts.SIDE_BAR_WIDTH+"px",");",i.g.mQuery.mobile,"{",i.g.classes.near("0"),";width:100vw;}",""),we=(0,o.iv)("background-color:",i.g.colors.bg_main,";color:",i.g.colors.text_sec,";box-shadow:0 0 5px rgba(",i.g.darkMode?"255, 255, 255, 1":"0, 0, 0, .3",");display:flex;align-items:center;padding:0 1em;.Icon-hierarchy{cursor:pointer;}._search{flex-grow:50;max-width:500px;}._padding{flex-grow:50;}.Button{>.Icon{",i.g.classes.margin_far("10px"),";}}.Icon-support{font-size:1.4rem;}._user{",i.g.classes.margin_near("8px"),";}.Icon-burger{font-size:1.2rem;}.Icon-qrcode_scan{font-size:27px;}",""),Oe=function(){return(0,_.tZ)(J.SV,{css:_e,children:(0,_.tZ)(ke,{})})},ke=(0,r.observer)((function(){var e,t,n=(0,a.useContext)(v.l9),r=n.user,o=n.hierarchy_button_show,i=n.sideMenuStore,l=n.searchStore,c=[];return Blsm.InitialData.support_auth_on&&c.push({href:Blsm.prm.Mainref+"redirect.php?target=jwt_blossom_support",label:lng("Blossom support center"),newTab:!0}),Blsm.canAccessModule("Manage")&&null!==(e=Blsm.InitialData.branding)&&void 0!==e&&e.manual&&c.push({href:Blsm.InitialData.branding.manual[1],label:Blsm.InitialData.branding.manual[0],newTab:!0}),null!==(t=Blsm.InitialData.branding)&&void 0!==t&&t.contact_link&&c.push({href:Blsm.InitialData.branding.contact_link,label:lng("contact & support").caps(!1),newTab:!0}),window.Branch.helpLinks(c),(0,_.tZ)("div",{css:[_e,we,"",""],className:"react_container",children:Blsm.user.id?(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.JO,{icon:"burger",className:"mobile_only",onClick:function(){return i.opened=!0}}),o&&(0,_.tZ)(I.u,{text:lng("hierarchy")+"...",children:(0,_.tZ)(u.JO,{icon:"hierarchy",id:"react_bc_hierarchy_button",className:"mobile_off",onClick:function(e){return e.stopPropagation(),Platform.MainView.hierarchy_view.$el.toggle()}})}),l.searchCategories.length>0&&(0,_.tZ)("div",{className:"_search",children:(0,_.tZ)(L,{})}),(0,_.tZ)("div",{className:"_padding"}),c.length>0&&(0,_.tZ)("div",{children:c.length>1?(0,_.tZ)(s.x,{options:c,children:(0,_.tZ)(u.JO,{icon:"support",smallButtonLike:!0})}):(0,_.tZ)(I.u,{text:c[0].label.caps(),children:(0,_.tZ)(p.A,{href:c[0].href,newTab:!0,children:(0,_.tZ)(u.JO,{icon:"support",smallButtonLike:!0})})})}),(0,_.tZ)(re,{}),(0,_.tZ)(E,{className:"_user",user:r})]}):(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"_padding"}),(0,_.BX)(ve.zx,{onClick:S,children:[(0,_.tZ)(u.JO,{icon:"qrcode"}),lng("go mobile").caps()]}),(0,_.BX)(ve.zx,{href:"login",children:[(0,_.tZ)(u.JO,{icon:"user"}),lng("login").caps()]})]})})})),xe=n(45459);function Se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Se(Object(n),!0).forEach((function(t){Ce(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Be=(0,o.iv)("position:fixed;z-index:",i.g.z.management_menu,";top:",i.g.consts.TOP_BAR_HEIGHT,"px;bottom:0;width:865px;max-width:calc(100vw - ",i.g.consts.SIDE_BAR_WIDTH,"px);",i.g.classes.near(i.g.consts.SIDE_BAR_WIDTH+"px"),";padding:20px 0 20px 0;box-shadow:0px 3px 6px rgba(0, 0, 0, 0.16);background-color:",i.g.darkMode?i.g.colors.bg_page_containers:"#fafafa",";color:",i.g.colors.text_sec,";.admin-panel-head{padding:0 20px;.admin-panel-title{color:",i.g.colors.text_main,";font-weight:700;font-size:1.4em;margin-top:20px;}}.scroll-area{position:absolute;top:120px;bottom:0;width:100%;overflow-y:auto;margin-top:20px;padding:0 20px;ul.admin-panel-list{padding:0;margin:0;list-style:none;display:flex;flex-wrap:wrap;}}",""),Te=(0,r.observer)((function(e){var t=e.aniProps,n=(0,a.useContext)(v.l9).sideMenuStore,r=(0,a.useRef)(),o=function(e){n.addRecentLink(e),n.managementMenuOpen=!1};(0,f.t$)(r,(function(e){return!e.target.closest("#management")&&(n.managementMenuOpen=!1)}));var i=n.filterText.trim().replace(/\s\s+/g," ").toLowerCase().replace(/['"]/g,"");return(0,_.BX)("div",je(je({css:Be,ref:r},t),{},{children:[(0,_.BX)("div",{className:"admin-panel-head",children:[(0,_.tZ)("div",{className:"admin-panel-title title",children:lng("management").caps()}),(0,_.tZ)(De,{onSubmit:function(){var e,t=Pe(n.managementMenuOptions);try{for(t.s();!(e=t.n()).done;){var r,a=Pe(e.value.items);try{for(a.s();!(r=a.n()).done;){var l=r.value;if(l.label.toLowerCase().replace(/['"]/g,"").includes(i))return o(l.link),(0,p.p4)(l.link,!0)}}catch(e){a.e(e)}finally{a.f()}}}catch(e){t.e(e)}finally{t.f()}}})]}),(0,_.BX)("div",{className:"scroll-area",children:[(0,_.tZ)(Ne,{linkClicked:o}),(0,_.tZ)("ul",{className:"admin-panel-list",children:n.managementMenuOptions.map((function(e){var t=i?e.items.filter((function(e){return e.label.toLowerCase().replace(/['"]/g,"").includes(i)})):e.items;return(0,_.tZ)(Ie,{title:e.title,icon:e.icon,tutorial:e.tutorial,items:t,linkClicked:o},e.title)}))})]})]}))})),Ee=(0,o.iv)("width:270px;margin:13px 0 20px 0;.category_title{color:",i.g.colors.text_main,";font-weight:600;.category_icon{vertical-align:middle;font-size:1.4rem;}}>.links{margin:9px 0 0 0;padding:0;",i.g.classes.padding_near("1em"),";}",""),Ie=(0,r.observer)((function(e){var t=e.title,n=e.icon,r=e.items,o=e.linkClicked;return r.length?(0,_.BX)("li",{css:Ee,children:[(0,_.BX)("div",{className:"category_title",children:[(0,_.tZ)(u.JO,{icon:n,className:"category_icon"}),"   ",t.caps()]}),(0,_.tZ)("div",{className:"links",children:r.map((function(e){return(0,_.tZ)(Me,{item:e,linkClicked:o},e.label)}))})]}):null})),Ae=(0,o.iv)("margin-top:25px;display:flex;align-items:center;padding-bottom:5px;border-bottom:1px solid ",i.g.colors.separator,";.Icon{font-size:1.2em;}form{flex-grow:1;input{background:transparent;border:0;width:100%;&::placeholder{color:#869298;}}}.input-clear{font-size:0.8em;cursor:pointer;}",""),De=(0,r.observer)((function(e){var t=e.onSubmit,n=(0,a.useContext)(v.l9).sideMenuStore;return(0,_.BX)("div",{css:Ae,className:"admin-panel-filter",children:[(0,_.tZ)(u.JO,{icon:"search"}),"  ",(0,_.tZ)("form",{onSubmit:function(e){e.preventDefault(),t()},children:(0,_.tZ)("input",{type:"search",placeholder:lng("filter").caps()+"...",value:n.filterText,onChange:function(e){return n.filterText=e.target.value},ref:function(e){return null==e?void 0:e.focus()}})}),n.filterText.length>0&&(0,_.tZ)(u.JO,{icon:"close",className:"input-clear",onClick:function(){return n.filterText=""}})]})})),Re=(0,o.iv)("background:",i.g.colors.dominant_main,";color:white;border-radius:6px;padding:1rem;margin:0 -1rem 1rem;>.category_title{font-weight:600;.category_icon{vertical-align:middle;font-size:1.4rem;}}>.links{display:flex;flex-wrap:wrap;>div{",i.g.classes.padding_near("1em"),";width:270px;margin-top:0.8em;}a[href]{color:inherit;&:hover{text-decoration:underline;}}}",""),Ne=(0,r.observer)((function(e){var t=e.linkClicked,n=(0,a.useContext)(v.l9).sideMenuStore.recentUse;return n.length?(0,_.BX)("div",{css:Re,className:"admin-panel-filter",children:[(0,_.BX)("div",{className:"category_title",children:[(0,_.tZ)(u.JO,{icon:"clock",className:"category_icon"}),"   ",lng("recently used").caps()]}),(0,_.tZ)("div",{className:"links",children:n.map((function(e){return(0,_.tZ)(Me,{item:e,linkClicked:t,inRecentList:!0},e.label)}))})]}):null})),ze=(0,o.iv)("margin-top:0.8em;.Icon{",i.g.classes.margin_far(".5em"),";}a{color:#696A72;display:inline-block;&[href]{color:inherit;&:hover{text-decoration:underline;}}&.tutorial{font-size:14px!important;vertical-align:super!important;}}>ul.subs{",i.g.classes.padding_near("1.5em"),";>li{list-style:none;font-size:0.9em;margin:0.4em;}}",""),Me=function(e){var t=e.item,n=e.linkClicked,r=e.inRecentList;return(0,_.BX)("div",{css:ze,children:[t.help?(0,_.tZ)(xe.I,{helpKey:t.help}):(0,_.tZ)(u.e$,{}),(0,_.tZ)(p.A,{href:t.link,onClick:function(){return n(t.link)},children:t.label.caps()}),!r&&t.tutorial&&(0,_.tZ)(I.u,{text:lng("online tutorial").caps(),children:(0,_.tZ)(u.JO,{icon:"badge-bulb",href:"https://www.blossom-kc.com/support/tutorials?tc="+t.tutorial,newTab:!0,className:"tutorial"})}),!r&&t.subs&&(0,_.tZ)("ul",{className:"subs",children:t.subs.map((function(e){var t=e.link,r=e.label;return(0,_.tZ)("li",{children:(0,_.tZ)(p.A,{href:t,onClick:function(){return n(t)},children:r.caps()})},r)}))})]})},Fe=n(45338),qe=(n(57882),n(22698)),Xe=n(29523),Le=n(41042);function Ue(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ue(Object(n),!0).forEach((function(t){He(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ue(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||We(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Je(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=We(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function We(e,t){if(e){if("string"==typeof e)return Ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ke(e,t):void 0}}function Ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $e=(0,o.iv)("position:fixed;z-index:",i.g.z.side_bar,";top:0;bottom:0;min-width:",i.g.consts.SIDE_BAR_WIDTH,"px;max-width:",i.g.consts.SIDE_BAR_WIDTH,"px;transition:max-width .3s ease-in-out,margin .3s ease-in-out;",i.g.classes.near("0"),";",i.g.mQuery.mobile,"{&:not(.opened){transition:max-width 0s ease-in-out,margin .3s ease-in-out;",i.g.classes.margin_near("-".concat(i.g.consts.SIDE_BAR_WIDTH,"px")),";}}",""),Ye=(0,o.iv)("display:flex;flex-direction:column;color:",i.g.colors.text_sec,";background-color:",i.g.theme.mm_bg,";",i.g.classes.border_far("1px solid ".concat(i.g.colors.separator)),";overflow:hidden;._top{flex-grow:1;._logo{display:block;height:",i.g.consts.TOP_BAR_HEIGHT,"px;margin:20px 0 25px;>img{margin:auto;display:block;max-height:40px;max-width:",i.g.consts.SIDE_BAR_WIDTH,"px;transition:max-width .3s linear;}}._links{flex-grow:1;position:relative;}}._bottom{white-space:nowrap;padding:19px 0;>*{display:inline-block;",i.g.classes.margin_far("25px"),";color:",i.g.theme.mm_fg,";&:hover{color:",i.g.theme.mm_fg_active,";}&:first-of-type{width:",i.g.consts.SIDE_BAR_WIDTH,"px;",i.g.classes.margin_far(0),";text-align:center;>*{text-align:initial;}}}._lang{cursor:default;font-weight:700;}}&.opened{max-width:400px;._logo>img{max-height:70px;max-width:225px;transition:max-width .3s linear;}}",""),Qe=function(){return(0,_.tZ)(J.SV,{css:$e,children:(0,_.tZ)(et,{})})},et=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).sideMenuStore;(0,f.iP)();var t=(0,a.useRef)(null);(0,f.t$)(t,e.opened?function(){return e.opened=!1}:void 0);var n=(0,f.Xf)(100,(function(){return e.opened=!0}),(function(){return e.opened=!1})),r=n.events,o=n.cancelEvent,l=e.managementMenuOpen,c=e.activeItem,u=e.menuBuild,d=(0,a.useRef)(null),m=(0,a.useRef)(null),g=function(){return e.opened=!1},h=Object.entries(Blsm.lang.available||{}).map((function(e){var t=Ge(e,2),n=t[0];return{val:n,label:t[1],active:Blsm.lang.current===n}})),b=Ge((0,Le.$)({show:l,type:"slide"}),2),y=b[0],w=b[1];return(0,_.BX)(_.HY,{children:[y&&(0,_.tZ)(Te,{aniProps:w}),(0,_.tZ)(Fe.mp,{onSwipedLeft:i.g.isRTL?void 0:g,onSwipedRight:i.g.isRTL?g:void 0,delta:20,children:(0,_.BX)("div",Ve(Ve({css:[$e,Ye,"",""],className:"react_container ".concat(e.opened?"opened":"")},r),{},{ref:function(e){if(t.current=e,e){var n=d.current,r=19;do{var o,i=Je(n.children);try{for(i.s();!(o=i.n()).done;){o.value.style.padding=r+"px 0"}}catch(e){i.e(e)}finally{i.f()}r--}while(r>=0&&n.offsetTop+n.offsetHeight+60>e.offsetHeight)}},onClick:function(t){m.current.contains(t.target)||(o(),e.opened=!1)},children:[(0,_.BX)("div",{className:"_top",children:[(0,_.tZ)(p.A,{className:"_logo",href:i.g.theme.homePage,newTab:!0,children:(0,_.tZ)("img",{src:e.opened?i.g.theme.logo_full:i.g.theme.logo_small,alt:i.g.theme.name})}),(0,_.tZ)("div",{className:"_links",ref:d,children:u.map((function(e,t){return(0,_.tZ)(nt,Ve(Ve({},e),{},{active:"management"===e.id&&l||e.id===c}),t)}))})]}),(0,_.BX)("div",{className:"_bottom",ref:m,children:[h.length>0&&(0,_.tZ)(s.x,{className:"_lang",options:h,onSelect:Xe.rt,children:Blsm.lang.current.substring(0,2).caps()}),(0,_.tZ)(qe.Dq,{})]})]}))})]})})),tt=(0,o.iv)("display:block;white-space:nowrap;cursor:pointer;min-width:225px;color:",i.g.theme.mm_fg,";&:hover,&.active{color:",i.g.theme.mm_fg_active,";}>div{font-size:21px;width:",i.g.consts.SIDE_BAR_WIDTH,"px;display:inline-block;text-align:center;}._alert_count{",i.g.classes.circled_text,";background-color:",i.g.colors.yellow,";color:white;font-size:9px;position:absolute;right:7px;opacity:1;transition-property:opacity;transition-duration:200ms;transition-timing-function:ease-out;}",""),nt=function(e){var t=e.href,n=e.icon,r=e.label,o=e.active,i=e.count,a=e.onClick,l=e.id,s=e.className,c=void 0===s?"":s;return(0,_.BX)("a",{css:tt,href:t,className:c+(o?" active":""),onClick:a,id:l,children:[(0,_.tZ)(u.JO,{icon:n}),r.caps(),i>0&&(0,_.tZ)("span",{className:"_alert_count",children:i})]})},rt=n(26291),ot=n(71137),it=n(31092),at=n(27018),lt=n(3755),st=n(56852),ct=n(15967),ut=n(40443),pt=n(22334),dt=n(22906),ft=n(28432);function mt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return gt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function gt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ht=(0,o.iv)("color:",i.g.colors.text_main,";._body{display:flex;align-items:center;height:240px;justify-content:space-between;padding:0 2em;}",""),bt=(0,o.iv)("width:66%;display:flex;flex-direction:column;height:100%;justify-content:space-around;>div{display:flex;align-items:center;justify-content:space-between;}._progress{width:270px;margin-right:25px;._title{font-weight:bold;font-size:1.15em;}}._next{width:270px;margin-top:25px;._title{margin-bottom:8px;}>div:nth-of-type(2){display:flex;}.Icon{font-size:20px;",i.g.classes.margin_far("13px"),";color:",i.g.colors.text_sec,";}._name{font-weight:600;}._details{color:",i.g.colors.text_sec,";}}",""),yt=(0,o.iv)("width:180px;._status{color:",i.g.colors.green,";border :4px solid ",i.g.colors.green,";font-weight:bold;font-size:1.5em;padding:.8em 1em;min-width:180px;text-align:center;}._score{text-align:center;margin-top:1.5em;display:flex;justify-content:space-around;align-items:end;>div{width:50%;>._title{font-size:1.15em;}>._value{font-size:3.5em;line-height:1em;color:",i.g.colors.green,";}}>._diploma{color:",i.g.colors.green,";width:50%;font-size:40px;}}&._failed{._status{color:",i.g.colors.negative,";border :4px solid ",i.g.colors.negative,";}._value{color:",i.g.colors.negative,";}}",""),vt=(0,r.observer)((function(e){var t=e.ws,n=t.features.assignments&&t.user_scores&&t.is_member,r=t.features.meetings&&t.arrived_to_meetings&&t.is_member,o=t.features.tasks&&!(n||r),a=t.user_scores||{},l=a.c_completed,s=a.stored,c=t.getDiploma();return(0,_.BX)(g.W2,{css:ht,children:[(0,_.BX)(ut.B,{title:lng("progress"),icons:t.headerActions(),children:[(0,_.tZ)(ft.Yy,{ws:t}),(0,_.tZ)(ft.ns,{ws:t})]}),(0,_.BX)("div",{className:"_body",children:[(0,_.BX)("div",{css:bt,children:[(0,_.BX)("div",{children:[n&&(0,_.tZ)(_t,{count_assignments:t.user_scores.count_assignments,count_completed:t.user_scores.count_completed,required_assignments_completion:t.scoring_details.required_assignments_completion}),r&&(0,_.tZ)(wt,{attendance:t.arrived_to_meetings.attendance,total_meetings:t.arrived_to_meetings.total_meetings,required_meetings_attendance:t.scoring_details.required_meetings_attendance}),o&&t.tasks_stats.resolutions&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(St,{resolutions:t.tasks_stats.resolutions,title:lng("all tasks")}),(0,_.tZ)("div",{style:{height:"170px",borderLeft:"1px solid ".concat(i.g.colors.separator),margin:"0 25px"}}),(0,_.tZ)(St,{resolutions:t.tasks_stats.mine,title:lng("tasks allocated to me")})]})]}),t.is_member&&(0,_.BX)("div",{children:[t.nextAssignment&&(0,_.tZ)(Ot,{nextAssignment:t.nextAssignment}),t.nextMeeting&&(0,_.tZ)(kt,{nextMeeting:t.nextMeeting})]})]}),("0"===l||"1"===l)&&(0,_.BX)("div",{css:yt,className:"0"===l?"_failed":"",children:[(0,_.tZ)("div",{className:"_status",children:("1"===l?lng("completed|workspace"):lng("not completed|workspace")).toUpperCase()}),(0,_.BX)("div",{className:"_score",children:[s&&(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_title",children:lng("score").caps()}),(0,_.tZ)("div",{className:"_value",children:s})]}),c&&(0,_.tZ)(u.JO,{icon:"diploma",className:"_diploma",toolTip:lng("download diploma").caps(),href:c,color:i.g.colors.green})]})]})]})]})})),_t=function(e){var t=e.count_completed,n=e.count_assignments,r=e.required_assignments_completion;return(0,_.BX)("div",{className:"_progress",children:[(0,_.tZ)("div",{className:"_title",children:lng("assignments").caps()}),(0,_.tZ)(lt.k,{numerator:t,denominator:n,valueInBar:!0,bigLabel:!0,note:lng("%s required",(r||"0")+"%")})]})},wt=function(e){var t=e.attendance,n=e.total_meetings,r=e.required_meetings_attendance;return(0,_.BX)("div",{className:"_progress",children:[(0,_.tZ)("div",{className:"_title",children:lng("meetings").caps()}),(0,_.tZ)(lt.k,{numerator:t,denominator:n,valueInBar:!0,bigLabel:!0,note:lng("%s participation required",(r||"0")+"%")})]})},Ot=function(e){var t=e.nextAssignment;return(0,_.BX)("div",{className:"_next",children:[(0,_.tZ)("div",{className:"_title",children:lng("next assignment").caps()}),(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"play",href:t.link}),(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_name",children:t.title}),(0,_.tZ)("div",{className:"_details",children:(0,pt.GG)(t.date)})]})]})]})},kt=function(e){var t=e.nextMeeting;return(0,_.BX)("div",{className:"_next",children:[(0,_.tZ)("div",{className:"_title",children:lng("next meeting").caps()}),(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"meeting"}),(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_name",children:t.title}),(0,_.tZ)("div",{className:"_details",children:(0,pt.GG)((0,dt.Lj)(t,"start_date"))})]})]})]})},xt={name:"1owieab",styles:".title{font-weight:bold;font-size:1.15em;padding-bottom:15px;}.data{display:flex;}.legend{display:flex;flex-wrap:wrap;width:260px;}"},St=function(e){for(var t=e.resolutions,n=e.title,r=[],o=0,i=0,a=Object.entries(t);i<a.length;i++){var l=mt(a[i],2),s=l[0],c=l[1];r.push({label:(0,W.Ey)(s),color:(0,W.Pp)(s),number:c}),o+=1*c}return 0===r.length&&r.push({label:(0,W.Ey)("open"),color:(0,W.Pp)("open"),number:0}),(0,_.BX)("div",{css:xt,children:[(0,_.tZ)("div",{className:"title",children:n.caps()}),(0,_.BX)("div",{className:"data",children:[(0,_.tZ)(st.kL,{type:"pie",data:r,height:"140px",width:"160px"}),(0,_.tZ)("div",{className:"legend",children:r.map((function(e,t){var n=e.label,r=e.color,i=e.number;return(0,_.tZ)(ct.t,{numerator:i,denominator:o,label:n,color:r},t)}))})]})]})},jt=n(75898),Ct=n(6401);function Pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pt(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Tt=(0,o.iv)(jt.NI,";margin-right:1em;._menu{",i.g.classes.opposite_float,";}._fore{padding:10px;top:55px;color:",i.g.colors.text_main,";>._question{height:100px;padding-top:20px;font-weight:700;._ellipsis{",i.g.classes.ellipsis_lines(3),";}}>._choices{height:155px;display:flex;flex-direction:column;>*{flex-grow:1;}}}",""),Et=function(e){return(0,_.tZ)(J.aK,{children:(0,_.tZ)(It,Zt({},e))})},It=(0,r.observer)((function(e){var t=e.poll,n=e.color,r=e.workspaceStore,o=t.question,i=t.choices,a=t.answered,l=t.results,c=t.due_date,p=t.past,d=t.vote,f=t.mayEdit,m=t.isAnswered?l.reduce((function(e,t){return e+t}),0):null;return(0,_.BX)("div",{css:Tt,children:[(0,_.tZ)("div",{className:"_back",style:{backgroundColor:n},children:c&&(0,_.BX)(jt.jC,{color:"rgba(255, 255, 255, .4)",noBoxShadow:!0,icon:"clock",children:[p?lng("poll ended at"):lng("poll ends at")," ",(0,_.tZ)(G.qp,{time:c,showTime:!1})]})}),(0,_.BX)("div",{className:"_fore",children:[f&&(0,_.tZ)(s.x,{className:"_menu",options:[{label:lng("edit").caps(),onClick:function(){return(0,v.vm)().openDialog("form",new Ct.y({data:{poll:t,groupId:r.group_id},onSaveSuccess:function(){return(0,v.vm)().closeDialog()}}))}},{label:lng("delete").caps(),onClick:function(){return r.deletePoll(t)}}],children:(0,_.tZ)(u.JO,{icon:"menu"})}),(0,_.tZ)(K.m,{className:"_question",children:(0,_.tZ)(I.u,{text:o,minLength:60,children:(0,_.tZ)("div",{className:"_ellipsis",children:o})})}),(0,_.tZ)(K.m,{className:"_choices",children:i.map((function(e,n){return(0,_.tZ)(Dt,{userAnswer:n===parseInt(a),text:e,count:l.length>n?l[n]:0,total:m,onclick:function(){return!t.isAnswered&&d(n)}},n)}))})]})]})})),At=(0,o.iv)("border:1px solid ",i.g.colors.separator,";border-radius:9px;min-height:21px;position:relative;&._clickable{cursor:pointer;}&.userAnswer,&._clickable:hover{box-shadow:0 0 3px ",i.g.colors.dominant_main,";border-color:",i.g.colors.dominant_main,";}>._p{border-radius:9px;background-color:#C2D8FD;height:100%;}>._t{display:flex;align-items:center;position:absolute;top:0;width:100%;height:100%;padding:0 10px;>._ellipsis{",i.g.classes.ellipsis,";width:83%;}._grow{flex-grow:1;}._voted{font-size:.8em;}}",""),Dt=function(e){var t=e.text,n=e.userAnswer,r=e.count,o=void 0===r?0:r,i=e.total,a=e.onclick;return(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{css:At,className:(0,d.AK)({userAnswer:n,_clickable:null===i}),onClick:a,title:t.length>19?t:void 0,children:[i>0&&(0,_.tZ)("div",{className:"_p",style:{width:100*o/i+"%"}}),(0,_.BX)("div",{className:"_t",children:[(0,_.tZ)("div",{className:"_ellipsis",children:t}),(0,_.tZ)("span",{className:"_grow"}),i>0&&(0,_.BX)("span",{className:"_voted",children:[o," ",lng("voted")]})]})]}),(0,_.tZ)("div",{})]})},Rt=n(31991),Nt=n(37938),zt=n(539),Mt=n(11766),Ft=n(76364),qt=n(8411),Xt=n(75247),Lt=n(82883),Ut=n(57697),Vt=n(40493),Ht=n(85311),Gt=n(42755),Jt=n(24210),Wt=n(35519);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nn(e);if(t){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?tn(e):t}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var on=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(i,e);var t,n,r,o=Qt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),rn(tn(t=o.call(this,e)),"group_id",null),rn(tn(t),"groupName",""),t.group_id=(null==e?void 0:e.group_id)||t.group_id,t.groupName=(null==e?void 0:e.groupName)||t.groupName,t.required_qualifications=Object.values(null==e?void 0:e.required_qualifications),t.title=lng("required qualifications")+" - "+t.groupName,t.saveUrl="groups/save_required_qualifications",(0,m.SC)("groups/required_qualifications",{data:{group_id:t.group_id}},(function(e){t.buildFields({required_qualifications:e})})),t}return t=i,(n=[{key:"buildFields",value:function(e){var t=this;this._fields=[{type:"set",insert:"qualification",fields:[{type:"component",node:(0,_.BX)("div",{children:[" ",lng("choose other qualifications that are required to complete this qualification").caps()]})},{type:"multiple_items",name:"required_qualifications",label:lng("select required qualifications"),poster:!0,theme:"bright",valueIsMap:!0,objectKeys:["id","order"],searchData:function(e,n){var r={req:"AutoComplete",exclude:null==t?void 0:t.group_id,owned:1,types:["Qualification"],term:e.term||"",id:e.ids||""};(0,m.SC)("ajax/GroupsAjax.class.php",{data:r},n)},buttons:[{Render:Wt.Pl,onChange:function(e,t){var n=t.value;return e.order=n,e}}]}]}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign({group_id:this.group_id},e))}}])&&$t(t.prototype,n),r&&$t(t,r),i}(Jt.I),an=(0,o.iv)("height:85px;width:250px;border-radius:10px;padding:10px 15px;position:relative;color:",i.g.colors.text_sec,";z-index:1;background-color:",i.g.colors.half_white,";&.row-style{min-height:55px;width:600px;justify-content:start;background-color:",i.g.colors.dominant_white,";}&.completed{display:flex;align-items:center;border:1px solid ",i.g.colors.blossom,";cursor:pointer;>div{",i.g.classes.margin_far("10px"),";}&:hover{box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}}&.open,&.failed{border:1px solid ",i.g.colors.blossom,";display:flex;flex-direction:column;justify-content:space-around;cursor:pointer;&:hover{box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}}&.locked{border:1px solid ",i.g.colors.separator,";display:flex;align-items:center;>div{",i.g.classes.margin_far("10px"),";}}&.manager{display:flex;align-items:center;border:1px solid ",i.g.colors.light_blue,";cursor:pointer;justify-content:space-between;>div{",i.g.classes.margin_far("10px"),";}&:hover{box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}}.current{position:absolute;top:-15px;",i.g.classes.far("3px"),";font-size:24px;}.name{",i.g.classes.ellipsis_lines(2),";}&:hover{z-index:2;}",""),ln=function(e){var t,n,r,o,a,l=e.qualification,c=e.current,f=e.id,m=e.className,g=e.fetchQualList;a=l.has_perm?"manager":"1"===l.c_completed?"completed":"0"===l.c_completed?"failed":l.user_id?"open":"locked";var h=l.user_id||l.has_perm?function(){return(0,p.p4)({workspace:l.group_id},!0)}:void 0,b=l.is_owner?function(){return(0,v.vm)().openDialog("form",new on({group_id:l.group_id,groupName:l.group_name,required_qualifications:l.deps,onSaveSuccess:function(){return(0,v.vm)().closeDialog(),g()}}))}:void 0,y="row-style"===m,w=y?15:20,O=y?35:45;return(0,_.BX)("div",{css:an,className:(0,d.AK)("QualificationCard",a,m),id:f,onClick:h,children:["manager"===a&&(0,_.tZ)("div",{children:(0,_.tZ)(Gt.ZT,{icon:"manager",color:"#FFF",bgColor:i.g.colors.light_blue,iconSize:w,size:O})}),"completed"===a&&(0,_.tZ)("div",{children:(0,_.tZ)(Gt.ZT,{icon:"mark_v_light",color:"#FFF",bgColor:i.g.colors.blossom,iconSize:w,size:O})}),"failed"===a&&(0,_.tZ)("div",{children:(0,_.tZ)(Gt.ZT,{icon:"mark_x_light",color:"#FFF",bgColor:i.g.colors.negative,iconSize:20})}),"locked"===a&&(0,_.tZ)("div",{children:(0,_.tZ)(Gt.ZT,{icon:"lock",color:i.g.colors.text_main,bgColor:i.g.colors.disabled_background,iconSize:w,size:O})}),(0,_.tZ)("div",{className:"name",children:(0,_.tZ)("span",{children:l.group_name})}),"open"===a&&(0,_.tZ)(lt.k,{denominator:(null==l||null===(t=l.ras)||void 0===t?void 0:t.required)+(null==l||null===(n=l.rcs)||void 0===n?void 0:n.required),numerator:(null==l||null===(r=l.ras)||void 0===r?void 0:r.done)+(null==l||null===(o=l.rcs)||void 0===o?void 0:o.done)}),c&&(0,_.tZ)("div",{children:(0,_.tZ)(u.JO,{toolTip:lng("you are here"),icon:"pointer",className:"current",color:i.g.colors.dominant_main})}),y&&(0,_.tZ)(Ht.zh,{}),l.is_owner&&(0,_.tZ)(s.x,{options:[{label:lng("edit"),href:{edit:"workspace",id:l.group_id}},{label:lng("edit required qualifications"),onClick:b}],children:(0,_.tZ)(u.JO,{icon:"menu",buttonLike:!0})})]})},sn=(0,a.lazy)((function(){return Promise.all([n.e(866),n.e(833)]).then(n.t.bind(n,91420,23))})),cn=(0,o.iv)("margin:20px 60px 0;padding:10px 30px 0;position:relative;max-height:calc(100vh - 335px);overflow:auto;border-top:1px solid ",i.g.colors.separator,";.level{padding-bottom:40px;display:flex;justify-content:center;flex-wrap:wrap;&.spaced{justify-content:space-between;}}.QualificationCard{margin-bottom:10px;}",""),un=function(e){var t=e.ws,n=[];t.qual_list.forEach((function(e){var t=e.deps.reduce((function(e,t){for(var r=n.length-1;r>=0&&!n[r].find((function(e){return e.group_id===t}));r--);return Math.max(e,r)}),-1);n[t+1]||(n[t+1]=[]),n[t+1].push(e)}));for(var r=function(e){n[e].sort((function(t,r){return n[e+1].findIndex((function(e){return e.deps.includes(t.group_id)}))-n[e+1].findIndex((function(e){return e.deps.includes(r.group_id)}))}))},l=n.length-2;l>=0;l--)r(l);return(0,_.tZ)(a.Suspense,{fallback:(0,_.tZ)(zt.$,{}),children:(0,_.tZ)("div",{css:cn,children:n.map((function(e,n){return(0,_.tZ)("div",{className:(0,d.AK)("level",{spaced:e.length>1}),children:e.map((function(e,r){return(0,_.BX)(a.Fragment,{children:[(0,_.tZ)(ln,{id:"qc_"+e.group_id,qualification:e,css:(0,o.iv)("margin-left:",n%2==0?25:-25,"px;",""),fetchQualList:function(){return t.fetchQualList()},current:t.group_id==e.group_id}),e.deps.map((function(t){return(0,_.tZ)(sn,{start:"qc_"+t,end:"qc_"+e.group_id,headSize:4,lineColor:i.g.colors.set[(n+r)%16],headColor:i.g.colors.set[(n+r)%16],curvness:.5,arrowBodyProps:{strokeDasharray:""}},"qc_".concat(t,"_").concat(e.group_id))}))]},e.group_id)}))},n)}))})})},pn=n(67033);var dn=(0,o.iv)("margin:20px 60px 0;padding:10px 30px 0;position:relative;max-height:calc(100vh - 335px);overflow:auto;border-top:1px solid ",i.g.colors.separator,";",""),fn=function(e){var t=e.ws,n=[],r=[],o=[],i=[];return t.qual_list.forEach((function(e){e.has_perm?i.push(e):"1"===e.c_completed?n.push(e):e.user_id?o.push(e):r.push(e)})),(0,_.tZ)("div",{css:dn,children:(0,_.BX)(pn.U,{children:[i.length>0&&(0,_.tZ)(gn,{data:i,title:lng("manager"),groupId:t.group_id,fetchQualList:function(){return t.fetchQualList()}}),n.length>0&&(0,_.tZ)(gn,{data:n,title:lng("completed"),groupId:t.group_id,fetchQualList:function(){return t.fetchQualList()}}),o.length>0&&(0,_.tZ)(gn,{data:o,title:lng("open"),groupId:t.group_id,fetchQualList:function(){return t.fetchQualList()}}),r.length>0&&(0,_.tZ)(gn,{data:r,title:lng("next"),fetchQualList:function(){return t.fetchQualList()}})]})})},mn={name:"mbeivf",styles:"padding-top:10px;.title{font-size:1.6em;font-weight:600;padding-bottom:10px;}.list{display:flex;flex-wrap:wrap;>div{margin:10px;}}"},gn=function(e){var t=e.data,n=e.title,r=e.groupId,o=e.fetchQualList;return(0,_.BX)("div",{css:mn,children:[(0,_.tZ)("div",{className:"title",children:n.caps()}),(0,_.tZ)("div",{className:"list",children:t.map((function(e){return(0,_.tZ)(ln,{qualification:e,current:r==e.group_id,fetchQualList:function(){return o()}},e.group_id)}))})]})},hn=n(10101),bn=(0,o.iv)("display:flex;justify-content:center;margin:20px 60px 0;padding:40px 30px 0;position:relative;max-height:calc(100vh - 335px);overflow:auto;border-top:1px solid ",i.g.colors.separator,";",""),yn=function(e){var t=e.ws;return(0,_.tZ)("div",{css:bn,children:(0,_.tZ)(pn.U,{children:(0,_.tZ)(hn.mp,{tree:t.conditionsTree,idField:"group_id",nameField:"group_name",activeId:t.group_id+"",renderNode:function(e,t){return(0,_.tZ)(ln,{qualification:e,current:t,className:"row-style"},e.group_id)},nodeHeight:61,treeMargin:60})})})};function vn(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _n(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _n(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var wn=(0,o.iv)("height:125px;background-color:#FFF;color:",i.g.colors.dark_blue,";padding:30px 70px;display:flex;align-items:center;justify-content:space-between;.title-info{width:68%;}",i.g.mQuery.mobile,"{flex-direction:row;width:100%;padding:20px;}.title-info{display:flex;flex-direction:row;text-align:",i.g.near,";>div{",i.g.classes.margin_near("15px"),";}}.level-title{display:flex;flex-direction:column;justify-content:center;align-items:start;.top-level-title{display:inline-block;font-size:1em;font-weight:500;}.bottom-level-title{display:inline-block;font-size:1.5em;font-weight:600;margin-top:7px;}}.progress-expand{display:flex;width:30%;.levels-progress{padding:0 40px;display:flex;width:50%;flex-direction:column;border-left:1px solid ",i.g.colors.separator,";text-align:center;",i.g.mQuery.mobileNarrow,"{display:none;}}.levels-progress-number{font-size:2em;font-weight:300;>span{color:",i.g.colors.disabled_text,";}}.expand-button{width:40%;align-self:center;text-align:",i.g.far,";",i.g.mQuery.mobile,"{display:none;}}}",""),On=(0,r.observer)((function(e){var t,n=e.ws,r=null===(t=n.qual_list)||void 0===t?void 0:t.filter((function(e){return!!e.c_completed}));return(0,_.BX)("div",{css:wn,children:[(0,_.BX)("div",{className:"title-info",children:[(0,_.tZ)(Ut.F$,{ribbon:!0,color:"#F25341",size:"75",label:n.qual_top_name,underLabel:!1}),(0,_.BX)("div",{className:"level-title",children:[(0,_.tZ)("div",{className:"top-level-title",children:n.qual_top_name}),(0,_.tZ)("div",{className:"bottom-level-title",children:n.group_name})]})]}),n.is_member&&!!n.creditRequired&&(0,_.BX)("div",{className:"top-level-title",children:[lng("credits").caps(),": ",n.userCredit,"/",n.creditRequired]}),(0,_.BX)("div",{className:"progress-expand",children:[(0,_.BX)("div",{className:"levels-progress",children:[(0,_.tZ)("div",{children:lng("progress").caps()}),(0,_.BX)("div",{className:"levels-progress-number",children:[r.length," ",(0,_.BX)("span",{children:["/ ",n.qual_list.length]})]})]}),(0,_.tZ)("div",{className:"expand-button",children:(0,_.tZ)(y.l,{theme:n.qualificationLevelsExpand>1?"outlined":"contained",onClick:function(){return n.qualificationLevelsExpand++},children:n.qualificationLevelsExpand>1?(0,_.tZ)("span",{children:lng("close").caps()}):(0,_.BX)("span",{children:[(0,_.tZ)(u.JO,{icon:"map_spot"})," ",lng("view full path").caps()]})})})]}),n.qualificationLevelsExpand>1&&(0,_.tZ)(xn,{ws:n,onClose:function(){return n.qualificationLevelsExpand=1},wantToClose:n.qualificationLevelsExpand>2})]})})),kn=(0,o.iv)("@keyframes levelsSlideIn{from{top:calc(-100% - 100px);}to{top:-100px;}}@keyframes levelsSlideOut{from{top:-100px;}to{top:calc(-100% - 100px);}}position:fixed;z-index:",i.g.z.top_bar-1,";top:195px;bottom:0;left:0;right:0;color:initial;overflow:hidden;margin:0;border-top:1px solid ",i.g.colors.dark_blue,";.slider{position:absolute;background-color:#FFF;animation:levelsSlideIn .8s cubic-bezier(.65, -0.32, .44, 1.33);top:-100px;width:100%;height:calc(100% + 100px);padding:100px 20px 0;>div{padding:40px 80px;}}&._start{.slider{top:calc(-100% - 100px);}}&._close{.slider{animation:levelsSlideOut .5s cubic-bezier(.65, -0.32, .44, 1.33);top:calc(-100% - 100px);}}.top-bar{display:flex;margin:0 100px;align-items:center;.title{font-size:2em;font-weight:600;}}",""),xn=function(e){var t,n=e.ws,r=e.onClose,o=e.wantToClose;(0,f.Ry)();var i=vn((0,a.useState)(0),2),l=i[0],s=i[1],c=vn((0,a.useState)((null===(t=n.group_options)||void 0===t?void 0:t.qualification_path_default)||"cards"),2),u=c[0],p=c[1];(0,a.useEffect)((function(){s(l+1),o&&r&&setTimeout(r,500)}),[o]);var m=[{val:"cards",icon:"view_tiles",label:lng("card view")},{val:"chart",icon:"tree",label:lng("flow chart")},{val:"conditions",icon:"hierarchy",label:lng("conditions tree")}],g=m.find((function(e){return e.val===u}));return(0,_.tZ)("div",{css:kn,className:(0,d.AK)({_start:0===l,_close:2===l}),children:(0,_.tZ)("div",{className:"slider",children:(0,_.BX)("div",{children:[(0,_.BX)("div",{className:"top-bar",children:[(0,_.tZ)("div",{className:"title",children:lng("my path").caps()}),(0,_.tZ)(Ht.zh,{}),(0,_.tZ)("div",{style:{margin:"0 15px",fontSize:"1.2em"},children:g.label.caps()}),(0,_.tZ)(Vt.T,{options:m,onChange:p,value:u,size:40})]}),"cards"===u&&(0,_.tZ)(fn,{ws:n}),"chart"===u&&(0,_.tZ)(un,{ws:n}),"conditions"===u&&(0,_.tZ)(yn,{ws:n})]})})})},Sn=n(23016),jn=n(40676),Cn=n(69637),Pn=(0,r.observer)((function(e){var t=e.filteredItems,n=e.actions,r=[{title:lng("subject")},{title:lng("started by")},{title:lng("Start date")},{title:lng("last update")},{}];return(0,_.tZ)(jn.iA,{cols:r,collection:t,actions:n,RowRenderer:Bn,rowIdCol:"com_id",noWindow:!0})})),Zn=(0,o.iv)(".Avatar{vertical-align:middle;",i.g.classes.margin_far(".5em"),";}",""),Bn=(0,r.observer)((function(e){var t=e.row;return(0,_.BX)("tr",{css:Zn,onClick:function(){return(0,v.vm)().openCommentsDialog({type:"patients_communication",object_id:t.com_id})},children:[(0,_.tZ)(Cn.U6,{children:t.subject}),(0,_.BX)("td",{children:[(0,_.tZ)(c.qE,{user:t.owner})," ",(0,d.v2)(t.owner)]}),(0,_.tZ)("td",{children:(0,_.tZ)(G.qp,{time:t.creation_time})}),(0,_.tZ)("td",{children:(0,_.tZ)(G.ij,{time:t.modification_time})}),(0,_.tZ)(Cn.jA,{children:(0,_.tZ)(u.JO,{icon:"pretend",toolTip:lng("open communication as patient"),href:Blsm.prm.Mainref+"patient_com?com=".concat(t.com_id,"_").concat(t.access_key).concat("vendev"in(0,d.Lv)()?"&vendev":""),newTab:!0})})]})})),Tn=n(68567),En=n(87138),In=n(82267);function An(e){return(An="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Dn(Object(n),!0).forEach((function(t){Nn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Nn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mn(e,t){return(Mn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xn(e);if(t){var o=Xn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qn(this,n)}}function qn(e,t){return!t||"object"!==An(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Xn(e){return(Xn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ln=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mn(e,t)}(i,e);var t,n,r,o=Fn(i);function i(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.call(this,Rn(Rn({},e),{},{baseRoute:"tasks"}))}return t=i,(n=[{key:"createAttributes",value:function(){var e,t=this;this.attributes=[{name:"task_type_id",label:lng("type"),type:"component",Render:In.Sj,props:{tasks_types:this.serverResponse.tasks_types}},{name:"status_id",label:lng("status"),type:"component",Render:In.A_,props:{tasks_status:null===(e=this.serverResponse.tasks_status)||void 0===e?void 0:e.map((function(e){return{status_id:e.status_id,status_name:e.status_name,task_resolution:e.task_resolution,enabled:e.enabled}}))}},{name:"allocated_to",label:lng("assignee"),type:"select",emptyOption:!0,options:[{optgroup:!0,label:lng("managers").caps(),options:this.serverResponse.users.filter((function(e){return e.is_manager})).map((function(e){return{val:e.user_id,label:e.full_name}}))},{optgroup:!0,label:lng("members").caps(),options:this.serverResponse.users.filter((function(e){return!e.is_manager})).map((function(e){return{val:e.user_id,label:e.full_name}}))}]},{type:"component",Render:Wt.R9,label:lng("some of the tasks may not allow changing the assignee to the selected one").caps(),bold:!0,visible:function(e){return e.get("allocated_to")&&!t.serverResponse.users.find((function(t){return t.user_id===e.get("allocated_to")})).is_manager}},this.serverResponse.is_group_manager&&{name:"priority",label:lng("priority"),type:"select",options:(0,d.wd)(Blsm.InitialData.parameters.priority),emptyOption:!0},{name:"severity",label:lng("severity"),type:"select",options:(0,d.wd)(Blsm.InitialData.parameters.severity),emptyOption:!0},{name:"start_date",label:lng("start date"),type:"date_time",minDate:moment().subtract(1,"days")},{name:"due_date",label:lng("due date"),type:"date_time",minDate:moment().subtract(1,"days")},{name:"manager_only",label:lng("manager only"),type:"checkbox"},{name:"task_locked",label:lng("lock for members"),type:"checkbox"},{name:"archive",label:lng("archive|verb"),type:"checkbox"}].filter((function(e){return e})),this._fields=[{type:"checkbox",name:"send_notifications",label:lng("send notifications")}]}},{key:"SaveSuccess",value:function(){}}])&&zn(t.prototype,n),r&&zn(t,r),i}(En.U);function Un(e){return(Un="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vn(e){return function(e){if(Array.isArray(e))return Hn(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Hn(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hn(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hn(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Gn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gn(Object(n),!0).forEach((function(t){tr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kn(e,t){return(Kn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $n(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=er(e);if(t){var o=er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yn(this,n)}}function Yn(e,t){return!t||"object"!==Un(t)&&"function"!=typeof t?Qn(e):t}function Qn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function er(e){return(er=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function tr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var nr,rr,or=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Kn(e,t)}(a,e);var t,n,r,o=$n(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),tr(Qn(t=o.call(this,e)),"groupId",void 0),t.groupId=e.group_id;var n={};n.assignments=e.assignments.reduce((function(e,t){return Jn(Jn({},e),{},tr({},t.assignment_id,{id:t.assignment_id,label:t.title,poster:t.image}))}),{}),n.content=e.content.reduce((function(e,t){return Jn(Jn({},e),{},tr({},t._attr.lesson_id,{id:t._attr.lesson_id,label:t.title,poster:t.image}))}),{});var r=(0,v.vm)().getStore("workspace",t.groupId);return t.title=lng("manage components").caps(),t.successMessage=lng("components saved successfully"),t._fields=[r.mayCreateAssignments()&&{type:"multiple_items",name:"assignments",label:lng("assignments"),valueIsMap:!0,poster:!0,theme:"bright",searchData:function(e,t){var n=e.term,r=e.ids;(0,m.SC)("assignment/search_owned",{data:{term:n,id:r,limit:r?null:10}},t)}},r.mayShareContent()&&{type:"multiple_items",name:"content",label:lng("content"),valueIsMap:!0,poster:!0,theme:"bright",searchData:function(e,t){var n=e.term,r=e.ids;(0,m.SC)("content",{data:{join_catalog:1,term:n,id:r,limit:r?null:10}},t)}},{type:"single_item",name:"import_from_group",label:lng("import from another workspace"),searchData:function(e,t){(0,m.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",managed_perm:"manage",term:e.term||"",id:e.ids||""}},t)},onValueChange:function(e){e.length&&(0,m.SC)("groups/import_components/group_id="+e,{},(function(e){var n=e.assignments,o=e.content;if(r.mayCreateAssignments()){var a=n.filter((function(e){return!Array.from(t.getValue("assignments").values()).find((function(t){return t.id===e.assignment_id}))})),l=[].concat(Vn(a.map((function(e){return[e.assignment_id,{id:e.assignment_id,label:e.name,poster:e.assignment_image,subLabel:{text:lng("new").caps(),color:i.g.colors.positive}}]}))),Vn(t.getValue("assignments").entries()));t.updateValue(new Map(l),"assignments")}if(r.mayShareContent()){var s=o.filter((function(e){return!Array.from(t.getValue("content").values()).find((function(t){return t.id===e.lesson_id}))})),c=[].concat(Vn(s.map((function(e){return[e.lesson_id,{id:e.lesson_id,label:e.name,poster:e.assignment_image,subLabel:{text:lng("new").caps(),color:i.g.colors.positive}}]}))),Vn(t.getValue("content").entries()));t.updateValue(new Map(c),"content")}t.updateValue([],"import_from_group")}))}}],t._prepFields(n),t.ready=!0,t}return t=a,(n=[{key:"save",value:function(e){e.groupId=this.groupId,this.saveToUrl("groups/syncComponents",e)}},{key:"SaveSuccess",value:function(){var e=(0,v.vm)();e.closeDialog(),e.invalidateStore("workspace",this.groupId)}}])&&Wn(t.prototype,n),r&&Wn(t,r),a}(Jt.I),ir=n(27821);function ar(e){return(ar="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function sr(e,t){return(sr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dr(e);if(t){var o=dr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ur(this,n)}}function ur(e,t){return!t||"object"!==ar(t)&&"function"!=typeof t?pr(e):t}function pr(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dr(e){return(dr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fr,mr,gr,hr,br,yr,vr=(nr=ir.action.bound,rr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&sr(e,t)}(i,e);var t,n,r,o=cr(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,ir.makeObservable)(pr(t)),t.title=lng("add existing workspace as sub",e.typeName),t._build_fields(),t}return t=i,(n=[{key:"_build_fields",value:function(){var e=this,t=this.params.availableRootGroups.filter((function(t){return t.id!==e.params.parent_id})).map((function(e){return{val:e.id,label:e.label}}));this._fields=[{type:"select",name:"group",label:lng("select workspace")+" (".concat(this.params.typeName,")"),options:t,searchText:!0}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("groups/add_sub_group",{sub_groups:[e.group],parent:this.params.parent_id})}},{key:"SaveSuccess",value:function(){(0,v.vm)().closeDialog(),this.params.fetchHierarchy()}}])&&lr(t.prototype,n),r&&lr(t,r),i}(Jt.I),fr=rr.prototype,mr="SaveSuccess",gr=[nr],hr=Object.getOwnPropertyDescriptor(rr.prototype,"SaveSuccess"),br=rr.prototype,yr={},Object.keys(hr).forEach((function(e){yr[e]=hr[e]})),yr.enumerable=!!yr.enumerable,yr.configurable=!!yr.configurable,("value"in yr||yr.initializer)&&(yr.writable=!0),yr=gr.slice().reverse().reduce((function(e,t){return t(fr,mr,e)||e}),yr),br&&void 0!==yr.initializer&&(yr.value=yr.initializer?yr.initializer.call(br):void 0,yr.initializer=void 0),void 0===yr.initializer&&(Object.defineProperty(fr,mr,yr),yr=null),rr),_r=n(68297),wr=n(40965);function Or(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return kr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xr=[{val:"0",label:lng("off"),color:i.g.colors.text_placeholder,icon:"notice"},{val:"2",label:lng("managers only"),color:i.g.colors.warning,icon:"notice"},{val:"1",label:lng("on"),color:i.g.colors.dominant_main,icon:"notice"}],Sr=function(e){var t=e.index;return(0,o.iv)("display:flex;color:",i.g.colors.dominant_white,";justify-content:center;height:100%;position:relative;>*{display:flex;margin:auto 0;flex:1;justify-content:center;align-items:center;}>.group-messages-visibility-selector{position:absolute;top:0;",i.g.far,":10px;padding:5px;margin:10px;}>.group-messages-scroll-button-container{&.end{justify-content:flex-end;align-items:flex-end;}&.start{justify-content:flex-start;align-items:flex-start;}>.group-messages-scroll-button{display:flex;cursor:pointer;border-radius:40px;height:40px;width:40px;background-color:rgba(255, 255, 255, 0.2);& .disabled{cursor:default;display:none;}&:hover{background-color:rgba(255, 255, 255, 0.5);}>.scroll-icon{margin:auto;}}}>.group-message{width:100%;display:flex;flex-direction:column;margin:auto 10px;position:relative;>.message-list-container{position:relative;overflow:hidden;max-width:25vw;>.message-list{display:flex;flex-wrap:nowrap;flex-direction:row;>.message{width:100%;flex-shrink:0;transition:transform .5s ease-in-out;transform:translateX(",100*t*(i.g.isRTL?1:-1),"%);}}}>.group-message-actions{position:absolute;top:-10px;",i.g.far,":0;}}","")},jr=(0,r.observer)((function(e){var t,n=e.id,r=(0,a.useContext)(v.l9).getStore("workspace",n),l=r.groupMessages,c=r.mayAddMessage,p=r.mayEditMessageVisibility,d=r.group_options,f=r.addGroupMessage,m=r.removeGroupMessage,g=r.toggleGroupMessage,h=r.updateNoticeBoardVisibility,b=Or((0,a.useState)(0),2),y=b[0],w=b[1];switch((0,a.useEffect)((function(){w(0)}),[l]),d.notice_board){case"0":t=i.g.colors.text_placeholder;break;case"2":t=i.g.colors.warning;break;default:t=i.g.colors.dominant_main}var O,k=[{val:"remove",label:lng("remove message"),icon:"trash"},{val:"edit",label:lng("edit message"),icon:"edit"}];l.length>0&&l[y]&&k.push(2==(null===(O=l[y])||void 0===O?void 0:O.deleted)?{val:"toggle",label:lng("activate message"),icon:"notifications"}:{val:"toggle",label:lng("deactivate message"),icon:"notifications_off"});return(0,_.BX)("div",{css:Sr({index:y}),className:"mobile_off",children:[p&&(null==d?void 0:d.notice_board)&&(0,_.tZ)("div",{css:(0,o.iv)("color:",i.g.colors.text_main,";",""),className:"group-messages-visibility-selector",children:(0,_.tZ)(s.x,{title:lng("message board"),onSelect:function(e){return h(e)},options:[0!==parseInt(d.notice_board)&&{label:lng("add a new message"),onClick:function(){return f()},icon:"new"},{label:lng("visibility"),separator:!0}].concat(xr),children:(0,_.tZ)(Gt.ZT,{icon:"notice",bgColor:t})})}),r.features.group_messages&&l&&l.length>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"group-messages-scroll-button-container end",children:0!==y&&(0,_.tZ)("div",{className:"group-messages-scroll-button",onClick:function(){return w(y-1)},children:(0,_.tZ)(u.JO,{className:"scroll-icon",icon:"arrow_near"})})}),(0,_.BX)("div",{className:"group-message",children:[c&&(0,_.tZ)("div",{className:"group-message-actions",children:(0,_.tZ)(s.x,{options:k,onSelect:function(e){switch(e){case"remove":(0,Tn.BB)(lng("are you sure you want to delete this message?"),{onConfirm:function(){return m(l[y],(function(){return w(0)}))}});break;case"edit":(0,v.vm)().openDialog("form",new _r.M({data:{ws:n,message:l[y]}}));break;case"toggle":g(l[y])}},title:lng("message options"),children:(0,_.tZ)(u.JO,{icon:"menu_h"})})}),(0,_.tZ)("div",{className:"message-list-container",children:(0,_.tZ)("div",{className:"message-list",children:l.map((function(e,t){return(0,_.tZ)("div",{className:"message",children:(0,_.tZ)(Pr,{message:e,index:t,currentIndex:y})},t)}))})})]}),(0,_.tZ)("div",{className:"group-messages-scroll-button-container start",children:y!==l.length-1&&(0,_.tZ)("div",{className:"group-messages-scroll-button",onClick:function(){return w(y+1)},children:(0,_.tZ)(u.JO,{className:"scroll-icon",icon:"arrow_far"})})})]})]})})),Cr=(0,o.iv)("display:flex;max-width:100%;flex-direction:column;justify-content:center;align-items:center;>.message-date{font-weight:bold;font-size:.9em;}>.message-text{max-width:100%;max-height:1.5em;word-wrap:break-word;",i.g.classes.ellipsis,";}>.show-full-message{text-decoration:underline;cursor:pointer;}",""),Pr=(0,r.observer)((function(e){var t=e.message;return(0,_.BX)("div",{css:Cr,children:[(0,_.tZ)("div",{className:"message-date",children:moment(new Date(1e3*t.time)).format("".concat(Blsm.prm.date_moment_format," kk:mm"))}),(0,_.tZ)("div",{className:"message-text",children:(0,d.s9)(t.text)}),(0,_.tZ)("div",{onClick:function(){(0,Tn.qR)((0,_.tZ)(wr.x,{content:t.text}),{title:moment(new Date(1e3*t.time)).format("".concat(Blsm.prm.date_moment_format," kk:mm")),width:"60%"})},className:"show-full-message",children:lng("show full message").caps()})]})})),Zr=n(99234),Br=n(82307),Tr=n(55758),Er=n(79793);function Ir(e){return(Ir="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ar(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Dr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Rr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Nr(e,t){return(Nr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fr(e);if(t){var o=Fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Mr(this,n)}}function Mr(e,t){return!t||"object"!==Ir(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fr(e){return(Fr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nr(e,t)}(a,e);var t,n,r,o=zr(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).options=e.options||{},t.onSave=e.onSave,t.data=e.data,t.title=lng("create learning unit").caps(),t.headExtra=(0,_.tZ)(Er.b,{children:e.data.unit_id&&(0,_.tZ)(u.JO,{icon:"trash",className:"task-button",onClick:function(){return e.onDelete()}})}),t._buildFields(),t._prepFields(e.data||{}),t.ready=!0,t}return t=a,(n=[{key:"save",value:function(e){var t;null===(t=this.onSave)||void 0===t||t.call(this,e)}},{key:"_buildFields",value:function(){var e=this;this._fields=[{type:"text",name:"unit_name",label:lng("unit name")},{type:"select",name:"parent_unit",label:lng("parent unit"),options:this.options.parentUnits.filter((function(t){var n=Ar(t,1)[0];return!(0,d.B5)(e.data.unit_id)||n!=e.data.unit_id}))},{type:"number",name:"unit_order",label:lng("unit position")+" (".concat(lng("relative to parent"),")")},{type:"checkbox",name:"unit_hide",label:lng("hide unit"),disable:function(){return!!e.values.get("unit_hide_to_date")&&!e.values.get("unit_hide")}},{type:"date",name:"unit_hide_to_date",label:lng("hide until date"),disable:function(){return!!e.values.get("unit_hide")}},{type:"component",node:(0,_.BX)("div",{style:{fontWeight:"600",textAlign:i.g.near},children:[(0,_.BX)("div",{children:[lng("notice").caps(),": ",lng("hiding the learning unit will only affect the learning units tab.").caps()]}),(0,_.tZ)("div",{children:lng("components can still be accessed from other places.").caps()})]})}]}}])&&Rr(t.prototype,n),r&&Rr(t,r),a}(Jt.I),Xr=n(49039),Lr=(0,o.iv)(">._title{display:flex;margin-bottom:2rem;align-items:center;>div{color:",i.g.colors.text_main,";font-size:1.4rem;font-weight:600;}}>.units-scroll{max-height:83vh;overflow-x:hidden;overflow-y:auto;padding-top:5px;",i.g.classes.padding_near("8px"),";",i.g.classes.padding_far("3px"),";border-bottom:1px solid ",i.g.colors.separator_light,";>._main_unit{color:",i.g.colors.text_sec,";min-height:50px;",i.g.classes.padding_near("18px"),";",i.g.classes.border_near("2px solid #dfdfdf"),";padding-bottom:1.5em;&:last-of-type{border-color:transparent;}._unit_name{display:flex;position:relative;>._completed{position:absolute;top:6px;",i.g.near,":-24px;width:11px;height:11px;border-radius:50%;transition:all .1s ease-in-out;text-align:center;font-size:0.5rem;}span.name{overflow:hidden;white-space:nowrap;text-overflow:ellipsis;}.unit-edit{visibility:hidden;padding:0 3px;}span.count{font-weight:normal;color:",i.g.colors.text_light_disabled,';margin-left:15px;}}>div{position:relative;top:-5px;>._unit_name:before{content:"";position:absolute;top:5px;',i.g.near,":-24px;width:11px;height:11px;border-radius:50%;background-color:",i.g.colors.text_sec,";transition:all .1s ease-in-out;}>div ._unit_name{font-size:.85em;",i.g.classes.margin_near(".5em"),";margin-top:.5em;}._unit_name{font-weight:600;cursor:pointer;&.disabled{color:",i.g.colors.text_light_disabled,";cursor:not-allowed;}}}}.learning-unit:hover{>div>div>.unit-edit{visibility:visible;}}}&:not(.disabled)>.units-scroll>._main_unit>div ._unit_name{>._completed{background-color:",i.g.colors.text_sec,";&:not(._main){",i.g.near,":-30.5px;top:3.5px;.fas{margin-top:2.5px;}}}&:hover,&._active{color:",i.g.colors.dominant_main,";&:before{top:1px;",i.g.near,":-28px;width:19px;height:19px;background-color:",i.g.colors.dominant_main,";}>._completed{background-color:",i.g.colors.dominant_main,";&._main{font-size:0.85rem;top:1.5px;}}}}&.disabled>.units-scroll>._main_unit>div{>._unit_name:before{background-color:",i.g.colors.text_light_disabled,";}._unit_name{color:",i.g.colors.text_light_disabled,";cursor:not-allowed;}}",""),Ur=(0,r.observer)((function(e){var t=e.ws;return(0,_.BX)("div",{css:Lr,children:[(0,_.BX)("div",{className:"_title",children:[(0,_.tZ)("div",{children:lng("learning units",{phrase:!0}).caps()}),(0,_.tZ)(Ht.zh,{}),(null==t?void 0:t.mayChangeComponents())&&(0,_.tZ)("span",{children:(0,_.tZ)(u.JO,{icon:"new",toolTip:lng("new learning unit"),onClick:function(){return o=new qr({data:{parent_unit:(null===(e=t.active_unit)||void 0===e||null===(n=e.parent_unit)||void 0===n?void 0:n.unit_id)||(null===(r=t.active_unit)||void 0===r?void 0:r.unit_id)},options:{parentUnits:t.parentUnitsList()},onSave:function(e){t.saveUnit(e),(0,v.vm)().closeDialog()}}),void(0,v.vm)().openDialog("form",o);var e,n,r,o}})})]}),(0,_.tZ)("div",{className:"units-scroll",children:t.orderedUnits.length>0&&t.orderedUnits.map((function(e){return(0,_.tZ)(Vr,{unit:e,main:!0},(0,dt.Lj)(e,"unit_id"))}))})]})})),Vr=(0,r.observer)((function e(t){var n,r,o=t.unit,a=t.main,l=null===(n=o.workspace)||void 0===n?void 0:n.mayChangeComponents(),s=(null===(r=o._attr)||void 0===r?void 0:r.unit_hide)||o._attr.unit_hide_to_date&&o._attr.unit_hide_to_date>(0,d.c7)();if((0===o.fullCount||s)&&!l)return null;return(0,_.tZ)("div",{className:(0,d.AK)("learning-unit",{_main_unit:a}),children:(0,_.BX)("div",{children:[(0,_.BX)("div",{className:(0,d.AK)("_unit_name",{_active:o.active}),onClick:function(){return o.workspace.setActiveUnit(o)},title:(0,dt.Lj)(o,"unit_name"),children:[o.isCompleted&&(0,_.tZ)(u.JO,{className:(0,d.AK)("_completed",{_main:a}),icon:"mark_v",color:i.g.colors.bg_main}),(0,_.tZ)("span",{className:"name",children:(0,dt.Lj)(o,"unit_name")}),(0,_.tZ)(Ht.zh,{}),l&&(0,d.B5)(o.unit_id)&&s&&(0,_.tZ)(u.JO,{className:"unit-hidden",icon:"preview",toolTip:lng("unit hidden")}),l&&(0,d.B5)(o.unit_id)&&(0,_.tZ)(u.JO,{icon:"edit",className:"unit-edit",toolTip:lng("edit learning unit"),onClick:function(e){return e.stopPropagation(),t=new qr({data:o._attr,options:{parentUnits:o.workspace.parentUnitsList()},onSave:function(e){o.workspace.saveUnit(e,o.unit_id),(0,v.vm)().closeDialog()},onDelete:function(){(0,Tn.BB)(lng("are you sure you want to delete the learning unit?"),{onConfirm:function(){o.workspace.deleteUnit(o.unit_id),(0,v.vm)().closeDialog()}})}}),void(0,v.vm)().openDialog("form",t);var t}}),o.count>0&&(0,_.tZ)("span",{className:"count",children:o.count})]}),o.active&&(0,_.tZ)("div",{className:"_sub_units",children:o.sub_units.length>0&&o.sub_units.map((function(t){return(0,_.tZ)(e,{unit:t},(0,dt.Lj)(t,"unit_id"))}))})]})})})),Hr=(0,o.iv)(">.InputDropDown{display:block;}>.title{color:",i.g.colors.text_main,";font-size:1.2rem;font-weight:600;}",""),Gr=function(e){var t=e.ws,n=t.orderedUnits.map((function(e){return 0!==e.fullCount&&{id:e.unit_id,name:e.name,count:e.count,sons:e.sub_units.map((function(e){return{id:e.unit_id,name:e.name,count:e.count,sons:[]}}))}}));return(0,_.BX)("div",{css:Hr,children:[(0,_.tZ)("div",{className:"title",children:lng("learning units",{phrase:!0}).caps()}),(0,_.tZ)(Xr.B,{tree:n,value:t.active_unit_id,onChange:function(e){return t.setActiveUnit({unit_id:e})},showSearch:!1})]})},Jr=n(33550),Wr=n(34765),Kr=n(95033),$r=n(60619),Yr=n(7166),Qr=(0,o.iv)("display:flex;.components{flex-grow:1;padding:20px;min-height:550px;width:100%;.title-container{display:flex;justify-content:space-between;}.drop-files{",i.g.classes.opposite_float,";}.title{font-size:1.3rem;color:",i.g.colors.text_main,";font-weight:700;padding:0 10px 5px;}}",i.g.mQuery.mobile,"{flex-direction:column;.components{padding:0px;min-height:0;}}",""),eo=(0,r.observer)((function(e){var t,n=e.ws,r=n.filteredAssignments.length,o=n.allEvents.length,i=n.filteredSharedContent.length,a=n.unitsTree(),l=n.components.filter((function(e){return e.selected})),c=!(0,d.xb)((0,ir.toJS)(n.components_filterNsort).filter),m=n.components.length>0||c,h=n.MeetingActions(),y=l.filter((function(e){return"share"===e.type})),w=y.every((function(e){return e._attr.lesson_owners.some((function(e){return(0,d.Tz)(e)}))||3==e._attr.lesson_public||Blsm.user.isManager&&2==e._attr.lesson_public}));(0,f.iP)(),h.push(m&&n.mayChangeComponents()&&{icon:"edit",toolTip:w?lng("edit multiple content"):lng("some of the content cannot be edited as you do not have the editing permissions"),action:w&&y.length?function(){(0,v.vm)().openDialog("form",new Br.s({names:y.map((function(e){return e.title})),ids:y.map((function(e){var t=e._attr,n=e.assignment_id;return t.lesson_id?t.lesson_id:n})),folderOptions:n.folderTree,extraUrlData:{ws:n.id},onSaveSuccess:function(){return(0,v.vm)().closeDialog(),n.fetch()}}))}:void 0},(null==a?void 0:a.length)&&n.mayChangeComponents()&&{icon:"AssignOutsource",menu:l.length>0&&a,onSelect:function(e){return n.moveSelectedToUnit(e)},toolTip:0===l.length?lng("move component"):void 0});var O=(0,f.qD)(n.components_filterNsort),k=O.filtersVals,x=O.setFilterVals,S=O.sort,j=O.setSort,C=n.tabFiltersSorts,P=C.filters,Z=C.sorts,B=n.mayCreateMeetings()?[{href:(0,p.p4)({edit:"meeting",params:{ws:n.group_id,unit:(0,d.B5)(n.active_unit_id),date:(0,pt.k6)(n.activeCalendarDate,{format:"YYYY-MM-DD"})}}),label:lng("new meeting")},(0==n.units.length||0===n.active_unit_id||-1===n.active_unit_id)&&{label:lng("new event"),onClick:function(){return n.openEventForm()}}]:[],T=n.unitIds.length>0&&(n.componentsList.some((function(e){return e.unitId}))||n.mayCreateComponent())||n.showUnits;return(0,_.BX)("div",{css:Qr,children:[T&&((0,d.tq)()?(0,_.tZ)("div",{children:(0,_.tZ)(Gr,{ws:n})}):(0,_.tZ)(Tr.h,{className:"lu-side-panel",width:"250px",children:(0,_.tZ)(Ur,{ws:n})})),(0,_.tZ)("div",{className:"components",children:m?n.componentsView?(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"title-container",children:(0,_.tZ)("div",{className:"title",children:null===(t=n.active_unit)||void 0===t?void 0:t.attr("unit_name")})}),(0,_.tZ)(qt.CX,{actions:h,filters:m?P:[],filtersVals:k,onFilter:x,sorts:m?Z:[],sort:S,onSort:j,alwaysShow:!0,checkAll:n.mayChangeComponents()?{checked:n.isVisibleChecked,onCheck:function(e){return n.checkVisible(e)}}:void 0}),n.mayChangeComponents()?(0,_.tZ)(Jr.b,{onSort:function(e){var t=e.new_order;return n.setComponentOrder(t)},children:n.components.map((function(e){return(0,_.tZ)(Wr.Q,{item:e,onClick:function(){return n.setActiveComponent(e.assignment_id)}},e.assignment_id)}))}):n.components.map((function(e){return(0,_.tZ)(Wr.Q,{item:e,onClick:function(){return n.setActiveComponent(e.assignment_id)}},e.assignment_id)})),n.meetingUrl&&(0,_.tZ)(Tn.bZ,{title:lng("invite guest"),width:"40vw",onCancel:function(){return n.setMeetingUrl(!1)},children:(0,_.BX)("div",{children:[(0,_.tZ)(Yr.g,{copy:n.meetingUrl,success:lng("invite link copied to clipboard"),buttonLike:!0,toolTip:lng("copy|verb")}),lng("copy and send to user:").caps(),(0,_.tZ)("br",{}),(0,_.tZ)(b.I,{wrapped:!0,type:"text",value:n.meetingUrl,onFocus:function(e){return e.target.select(),document.execCommand("copy")}})]})})]}):(0,_.BX)(_.HY,{children:[r+o+i===0&&(0,_.tZ)("div",{children:lng("nothing to show")}),r>0&&(0,_.BX)(_.HY,{children:[(0,_.BX)(g.uD,{children:[lng("assignments").caps()," (",r,")"]}),(0,_.tZ)(Kr.Mz,{assignments:n.filteredAssignments,useCarousel:!0,filtersAbove:!0})]}),o>0&&(0,_.BX)(_.HY,{children:[(0,_.BX)(g.uD,{children:[lng("schedule",{phrase:!0}).caps()," (",o,")"]}),(0,_.tZ)($r.V,{sideComponent:(0,_.tZ)(s.x,{options:B,children:(0,_.tZ)(u.JO,{icon:"new"})}),activeDate:n.activeCalendarDate,onDateSelect:function(e){return n.activeCalendarDate=e},onStripClick:function(e){return n.onCalendarStripClick(e)},events:n.allEvents})]}),i>0&&(0,_.BX)(_.HY,{children:[(0,_.BX)(g.uD,{children:[lng("content").caps()," (",i,")"]}),(0,_.tZ)(Kr.Mz,{displayTags:!0,assignments:n.filteredSharedContent,filtersAbove:!0})]})]}):(0,_.tZ)(no,{ws:n})})]})})),to=(0,o.iv)(".first-title{text-align:center;font-size:1.5em;font-weight:600;}.second-title{text-align:center;font-size:1.1em;}.buttons{display:flex;justify-content:center;margin-top:20px;>div{margin:0 15px;min-width:200px;text-align:center;border-radius:12px;padding:30px 10px;border:1px solid ",i.g.colors.separator_light,";.header{font-size:1.2em;padding:10px 0 15px;}.el_icon{font-size:2.1em;}}}._nothing{text-align:center;width:100%;font-size:2em;color:",i.g.colors.text_sec,";font-style:italic;}",""),no=function(e){var t=e.ws;return(0,_.tZ)("div",{css:to,children:t.mayCreateComponent()?(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"first-title",children:lng("let's create the first component").caps()}),(0,_.tZ)("div",{className:"second-title",children:lng("what do you want to create?").caps()}),(0,_.BX)("div",{className:"buttons",children:[t.mayCreateAssignments()&&(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"menu_overview",color:i.g.colors.green}),(0,_.tZ)("div",{className:"header",children:lng("assignment").caps()}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,v.vm)().openDialog("TypeSelector",(0,Kr.aA)({ws:t.group_id,unit:(0,d.B5)(t.active_unit_id)}))},children:lng("create assignment").caps()})]}),t.mayCreateMeetings()&&(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"menu_calendar",color:i.g.colors.purple}),(0,_.tZ)("div",{className:"header",children:lng("meeting").caps()}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,p.p4)({edit:"meeting",params:{ws:t.group_id,unit:(0,d.B5)(t.active_unit_id)}},!0)},children:lng("create meeting").caps()})]}),t.mayShareContent()&&(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"content",color:i.g.colors.light_blue}),(0,_.tZ)("div",{className:"header",children:lng("content").caps()}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,p.p4)({edit:"share",params:{ws:t.group_id,unit:(0,d.B5)(t.active_unit_id)}},!0)},children:lng("share content").caps()})]})]})]}):(0,_.tZ)("div",{className:"_nothing",children:lng("nothing to show").caps()})})};function ro(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function oo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ro(Object(n),!0).forEach((function(t){io(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ro(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function io(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ao(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return lo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lo(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function lo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var so={name:"pss8dm",styles:"display:flex;.components{flex-grow:1;overflow:auto;min-height:550px;}"},co={name:"13z6iip",styles:"font-size:1.5em"},uo=(0,r.observer)((function(e){var t=e.ws,n=t.scheduleItems.length>0,r=(0,f.qD)(t.schedule_filterNsort),o=r.filtersVals,i=r.setFilterVals,l=r.sort,s=r.setSort,c=t.tabFiltersSorts,p=c.filters,d=c.sorts,m=t.scheduleItems,g=(0,a.useMemo)((function(){var e,t=[],n=[],r=ao(m);try{for(r.s();!(e=r.n()).done;){var o=e.value;"dayNumber"===o.type?(0,pt._3)(o.date).isAfter()||(0,pt.zk)((0,pt._3)(o.date))?n.push(o):t.push(o):o.start_time.isAfter()||(0,pt.zk)(o.start_time)?n.push(o):t.push(o)}}catch(e){r.e(e)}finally{r.f()}return[].concat(n,t)}),[m]);m.forEach((function(e){var t,n=[];null!==(t=e.zoomRecordings)&&void 0!==t&&t.length&&n.push({icon:"zoom_meeting",toolTip:lng("zoom recordings")}),e.warnings&&n.push({icon:"warning_triangle",toolTip:e.warnings}),n.length&&(e.customIcons=(0,_.tZ)(_.HY,{children:n.map((function(e,t){return(0,_.tZ)(u.JO,oo(oo({},e),{},{css:co}),t)}))}))}));var h="sortTime"===l.by?g:m;return(0,_.tZ)("div",{css:so,children:(0,_.BX)("div",{className:"components",children:[(0,_.tZ)(qt.CX,{actions:t.MeetingActions(),filters:p,filtersVals:o,onFilter:i,sorts:n?d:[],sort:l,onSort:s,alwaysShow:!0,checkAll:t.mayChangeComponents()&&{checked:t.isVisibleChecked,onCheck:function(e){return t.checkVisible(e)}}}),h.map((function(e){return"dayNumber"!==e.type?(0,_.tZ)(Wr.Q,{item:e,onClick:function(){return(0,v.vm)().showSideDrawer(e)}},e.type+"_"+(e.assignment_id||e.id)):(0,_.tZ)(fo,oo({},e),e.day)}))]})})})),po=(0,o.iv)("border-radius:7px;background-color:",i.g.colors.background_dark,";text-align:center;font-weight:600;font-size:1.1em;padding:10px;",""),fo=function(e){var t=e.day,n=e.date;return(0,_.BX)("div",{css:po,children:[n," ",lng("day").caps()," #",t]})},mo=n(24061),go=n(94238),ho=n(12213),bo=n(92464);function yo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return vo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function vo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _o=(0,r.observer)((function(e){var t=e.userStore,n=t.blog,r=t.user_id,o=t.removeBlog,i=t.toggleLockPostComments,a=t.toggleUserVotePost;return(0,_.tZ)(wo,{collection:n,userId:r,removeBlog:o,toggleLockPostComments:i,toggleUserVotePost:a})})),wo=(0,r.observer)((function(e){var t=e.collection,n=e.userId,r=e.removeBlog,o=e.toggleLockPostComments,l=e.toggleUserVotePost,s=yo((0,a.useState)(!1),2),c=s[0],u=s[1],d=[lng("title"),lng("comments"),lng("actions")],f=[{icon:"new",action:function(){return(0,p.p4)({edit:"content",params:{type:"blog",blog_in_profile:n}},!0)},toolTip:lng("new post")}];return(0,_.BX)(_.HY,{children:[(0,_.tZ)(jn.iA,{cols:d,rowIdCol:"lesson_id",collection:t,actions:f,RowRenderer:Oo,noWindow:!0,rowProps:{removeBlog:r,toggleLockPostComments:o,toggleUserVotePost:l,rowAction:function(e){return u(e)}},sticky:i.g.consts.TABLE_HEAD_HEIGHT,mobileSupport:!0}),c&&(0,_.tZ)(g.T,{icon:{icon:"vendor_blog",color:"green"},poster:{image:c.poster,title:c.lesson_name},title:c.poster?"":c.lesson_name,onClose:function(){return u(!1)},children:(0,_.tZ)(xo,{postInfo:c})})]})})),Oo=(0,r.observer)((function(e){var t,n=e.row,r=e.rowProps,o=n.lesson_id,a=n.lesson_name,l=n.likes,s=n.lesson_options,c=n.poster,d=n.author,f=n.can_edit,m=n.comment_count,g=r.removeBlog,h=r.toggleLockPostComments,b=r.toggleUserVotePost,y=r.rowAction,v=i.g.consts.ITEM_IMG_SIZE+"px",w=parseInt(m),O=Blsm.user.id==d.user_id||Blsm.user.isPowerManager,k="0"!=f,x=[{_:(0,_.BX)(_.HY,{children:[(0,_.tZ)(bo.XI,{className:"_img",img:i.g.func.imgUrl(c),size:[v,v]})," ",a]})},{_:(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.JO,{icon:"discussion"})," ",w?w+" "+lng("comments"):lng("no comments").caps()]})},{type:"icons",icons:[{icon:l.user_vote?"love_full":"love",badge:null===(t=n.likes)||void 0===t?void 0:t.likes,onClick:function(){return b(n)},color:l.user_vote?i.g.colors.dominant_main:void 0},Blsm.isFeatureEnabled("assignments_comments")&&O&&(null!=s&&s.lock_comments?{icon:"lock",toolTip:lng("unlock comments"),onClick:function(){return h(n)}}:{icon:"lock_open",toolTip:lng("lock comments"),onClick:function(){return h(n)}}),k&&{icon:"edit",onClick:function(){return(0,p.p4)({edit:"content",id:o},!0)}},k&&{icon:"trash",onClick:function(){return g(n)}}]}];return(0,_.tZ)(jn.lF,{tds:x,onClick:function(){return null==y?void 0:y(n)}})})),ko=(0,o.iv)(".title{font-weight:600;color:",i.g.colors.text_main,";margin:15px 0;}.post-content{margin:15px 0;padding:20px 2px;border-top:1px solid ",i.g.colors.separator,";}",""),xo=function(e){var t=e.postInfo,n=t.lesson_id,r=t.author,o=t.creation_time,i=t.lesson_text_data,a=t.category_name,l=t.lesson_options,s=t.comments,c=new ho.pE({type:"content",object_id:n});return(0,_.BX)("div",{css:ko,children:[(0,_.tZ)("div",{className:"title",children:(0,d.v2)(r)}),(0,_.tZ)(G.qp,{time:o,showTime:!1}),(0,_.tZ)("div",{children:a.caps()}),(0,_.tZ)(wr.x,{className:"post-content",content:i}),Blsm.isFeatureEnabled("assignments_comments")&&(0,_.BX)("div",{children:[(s.length>0||!(null!=l&&l.lock_comments))&&(0,_.BX)("div",{className:"title",children:[(0,_.tZ)(u.JO,{icon:"discussion"})," ",lng("comments").caps()]}),(0,_.tZ)(go.H,{locked:null==l?void 0:l.lock_comments,commentsStore:c,deletable:"1"===t.can_edit,connectTo:{type:"content",object_id:n},refresh:!0,allowFileSharing:!0})]})]})},So=n(55832),jo=n(10918),Co=n(25584),Po=n(28534);function Zo(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Bo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Bo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Bo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var To=(0,r.observer)((function(e){var t=e.ws,n=Zo((0,a.useState)("list"),2),r=n[0],o=n[1],l=Zo((0,a.useState)((new Date).getFullYear()),2),s=l[0],c=l[1],u=[{name:"group_id",label:"#",type:"text"},{name:"group_name",label:lng("name"),type:"text",outOfMenu:!0},{name:"classification_name",label:lng("classification"),type:"select_multi",options:(0,So._V)("classification_name",t.planning)}],p=[{val:"",label:lng("default")},{val:"group_id",label:"#"},{val:"group_name",label:lng("name")},{val:"classification_name",label:lng("classification")}],d=[{title:"#",sortVal:"group_id",input:"text"},{title:lng("name"),sortVal:"group_name",input:"text",outOfMenu:!0},{title:lng("classification"),sortVal:"classification_name",input:"text"},{title:lng("actions")},{checkAll:!0}];if("calendar"===r)return(0,_.BX)("div",{children:[(0,_.tZ)(qt.$Q,{actions:[{icon:"list",action:function(){return o("list")},toolTip:lng("list view")}]}),(0,_.tZ)(jo.v,{curYear:s,moveYear:function(e){return c("up"===e?s+1:s-1)},eventsArray:(0,jo.a)(t.planning,s)})]});var f=[{icon:"calendar",action:function(){return o("calendar")},toolTip:lng("yearly calendar")},{icon:"edit",toolTip:lng("edit multiple items"),action:function(){return t.checkedPlanningItems.length&&(0,v.vm)().openDialog("form",new Co.d({ids:t.checkedPlanningItems.map((function(e){return e.group_id})),names:t.checkedPlanningItems.map((function(e){return e.group_name})),objName:"Group",showStatusSelection:!0,fieldsSelectInitialValue:["cb_status","cb_group_invisible"],onSaveSuccess:function(){return(0,v.vm)().closeDialog(),t.fetch()}}))}},t.mayEditSetting()&&{icon:"visible_off",toolTip:lng("turn off all of plan visibility"),action:function(){return(0,Tn.BB)(lng("are you sure you want to turn off visibility for all the courses in this workplan?"),{onConfirm:function(){return(0,m.SC)("groups/workplan_off",{method:"POST",data:{group_id:t.group_id}},(function(){return(0,Po.qV)(lng("plan visibility turned off!"))}))}})}}];return(0,_.tZ)("div",{children:(0,_.tZ)(jn.iA,{cols:d,collection:t.filteredPlanning,filters:u,sorts:p,filterNsort:t.planning_filterNsort,actions:f,RowRenderer:Eo,rowIdCol:"group_id",displayCount:!0,sticky:i.g.consts.TABLE_HEAD_HEIGHT+1})})})),Eo=(0,r.observer)((function(e){var t=e.row,n=t.group_id,r=t.group_name,o=t.classification_name,a=t.poster;return(0,_.BX)("tr",{onClick:function(){return(0,p.p4)({edit:"workspace",id:n},!0)},children:[(0,_.BX)("td",{children:["#",n]}),(0,_.tZ)(Cn.U6,{children:(0,_.BX)(Ht.c_,{style:{alignItems:"center"},children:[(0,_.tZ)(c.cU,{img:i.g.func.imgUrl(a)}),"   ",(0,_.tZ)("span",{children:r})]})}),(0,_.tZ)("td",{children:o}),(0,_.tZ)(Cn.jA,{children:(0,_.tZ)(u.JO,{buttonLike:!0,icon:"enter",toolTip:lng("go to the workspace"),href:{workspace:n}})}),(0,_.tZ)(Cn.Fo,{o:t})]})})),Io=n(66005),Ao=n(90603),Do=n(60409),Ro=n(95875);var No,zo,Mo={name:"ich0ul",styles:"max-width:900px;margin:0 auto;min-height:400px;._welcome_message{line-height:1.8em;img{max-width:100%;}}"},Fo=(0,r.observer)((function(e){var t=e.ws,n=t.welcome_message,r=t.displayManagers;return(0,_.BX)("div",{css:Mo,children:[(0,_.tZ)(wr.x,{content:n,className:"_welcome_message"}),(0,_.tZ)("div",{className:"_managers",children:(0,_.tZ)(Xo,{displayManagers:r})})]})})),qo=(0,o.iv)(">._title{display:block;overflow:hidden;color:",i.g.colors.text_main,";font-size:1.2em;font-weight:600;margin:17px 12px;padding:3px;}._about_manager{margin:20px 0;._inner{align-items:unset;}._inner_content{padding:10px 20px;}._title{font-weight:600;margin-bottom:15px;}._subTitle{color:",i.g.colors.text_main,";white-space:pre-line;}}",""),Xo=(0,r.observer)((function(e){var t=e.displayManagers;return t&&t.length?(0,_.BX)("div",{css:qo,children:[(0,_.tZ)("div",{className:"_title",children:lng("about managers",{phrase:!0}).caps()}),t.map((function(e){return(0,_.tZ)(Ro.o,{avatar:e,avatarBalloon:!1,title:e.full_name,subTitle:e.user_about,href:{user:e.user_id},className:"_about_manager",avatarSize:"150px"},e.user_id)}))]}):null})),Lo=n(25680);function Uo(e){return(Uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ho(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Go(e){return function(e){if(Array.isArray(e))return Jo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Wo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ko(e,t){return(Ko=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $o(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qo(e);if(t){var o=Qo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Yo(this,n)}}function Yo(e,t){return!t||"object"!==Uo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qo(e){return(Qo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ei=(No=ir.action.bound,function(e,t,n,r,o){var i={};Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((zo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ko(e,t)}(a,e);var t,n,r,o=$o(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).title=lng("task settings"),t.group_id=e.group_id,(0,m.SC)("tasks/edit_group_task_settings/group_id="+e.group_id,{},(function(e){var n=e.task_types.filter((function(e){return e.global})),r=e.task_types.filter((function(e){return!e.global})),o=e.task_status.filter((function(e){return e.global})),a=e.task_status.filter((function(e){return!e.global}));t._fields=[{type:"section",visible:function(){return n.length>0},title:lng("task types that are available everywhere:").caps(),titleSmall:!0,fields:[{type:"component",node:(0,_.tZ)(Lo.r,{children:n.map((function(e){return(0,_.tZ)(jt.jC,{color:e.colors[0],accentColor:e.colors[1],children:e.name},"type-"+e.id)}))})}]},{type:"select_multi",name:"task_types",label:lng("additional task types for this workspace"),emptyLabel:0===r.length?lng("no additional task types available for this workspace"):void 0,disabled:0===r.length,options:r.filter((function(e){return!e.global})).map((function(e){return{label:e.name,val:e.id,color:e.colors[0]}}))},{type:"section",visible:function(){return o.length>0},title:lng("task status that are available everywhere:").caps(),titleSmall:!0,fields:[{type:"component",node:(0,_.tZ)(Lo.r,{children:o.map((function(e){return(0,_.tZ)(jt.jC,{color:(0,W.Pp)(e.resolve),children:e.name},"status-"+e.id)}))})}]},{type:"select_multi",name:"task_status",label:lng("additional task statuses for this workspace"),emptyLabel:0===a.length?lng("no additional task statuses available for this workspace"):void 0,disabled:0===a.length,options:a.filter((function(e){return!e.global})).map((function(e){return{label:e.name,val:e.id,color:(0,W.Pp)(e.resolve)}}))},{type:"component",Render:Wt.R9,bold:!0,label:lng("select the visibility of fields:").caps(),visible:function(){return e.task_fields.length>0}}].concat(Go(e.task_fields.map((function(e){return{type:"switcher",name:"task_fields["+e.field_id+"]",label:e.field_name,options:[{val:"1",label:lng("off").caps(),color:i.g.colors.text_placeholder},{val:"2",label:lng("managers only").caps(),color:i.g.colors.warning},{val:"0",label:lng("on").caps(),color:i.g.colors.dominant_main}]}}))),[{type:"checkbox",name:"task_privacy",label:lng("task is available only to creator and group manager")}]);var l=e.task_fields.reduce((function(e,t){return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vo(Object(n),!0).forEach((function(t){Ho(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}(Ho({},t.field_id,t.enabled),e)}),{});t._prepFields({task_types:r.filter((function(e){return e.enabled})).map((function(e){return e.id})),task_status:a.filter((function(e){return e.enabled})).map((function(e){return e.id})),task_fields:l,task_privacy:e.task_privacy}),t.ready=!0})),t}return t=a,(n=[{key:"save",value:function(e){this.saveToUrl("tasks/update_group_task_settings",Object.assign({group_id:this.group_id},e))}},{key:"SaveSuccess",value:function(){(0,v.vm)().closeDialog()}}])&&Wo(t.prototype,n),r&&Wo(t,r),a}(Jt.I)).prototype,"SaveSuccess",[No],Object.getOwnPropertyDescriptor(zo.prototype,"SaveSuccess"),zo.prototype),zo);function ti(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ri(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ni(e){return function(e){if(Array.isArray(e))return oi(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ri(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ri(e,t){if(e){if("string"==typeof e)return oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oi(e,t):void 0}}function oi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ii=(0,o.iv)("._top_widgets{padding-top:90px;",i.g.classes.content_width,";margin:-65px auto ",i.g.consts.CONT_MARGIN,"px;color:",i.g.colors.text_sec,";display:flex;>*:nth-of-type(2){flex-grow:1;}}._display_message{text-align:center;color:white;font-size:2em;padding-top:18px;}",""),ai=(0,r.observer)((function(e){var t,n,r,o,l=e.id,s=(0,a.useContext)(v.l9).getStore("workspace",l),c=s.ready,m=s.group_name;(0,d.Ju)(m);var h=(0,f.iP)();if((0,a.useEffect)((function(){var e=j.X.get("recent_groups_"+Blsm.user.id)||[],t=[l].concat(ni(e));j.X.set("recent_groups_"+Blsm.user.id,ni(new Set(t)))}),[]),!c)return(0,_.tZ)(Xt.h,{});var b=s.display_message,y=s.polls,w=s.filteredDiscussionsBlogs,O=s.discussionsBlogs,k=s.discussions_blogs_filterNsort,x=s.filteredTasks,S=s.tasks,C=s.tasks_filterNsort,P=s.is_manager,Z=s.is_owner,B=s.selectedTasks,T=s.tab,E=s.lastBackTab,I=s.tabs,A=s.createPoll,D=s.removeBlog,R=s.toggleUserVotePost,N=s.toggleLockPostComments,z=s.activeBlog,M=s.setActiveBlog,F=s.patients_communication,q=s.loading_tasks,X=s.showNewComponentButton;if(b)return(0,_.tZ)(rt.T,{css:ii,bottomPadding:!0,contBG:!0,children:(0,_.tZ)(Lt.Fz,{children:(0,_.tZ)("div",{className:"_display_message",children:b})})});var L,U=[{icon:"trash",action:B.length?function(){return s.deleteTasks(B)}:void 0,toolTip:lng("delete task")},P&&{icon:"edit",action:B.length?function(){return(0,v.vm)().openDialog("form",new Ln({names:B.map((function(e){return e.task_title})),ids:B.map((function(e){return e.task_id})),extraUrlData:{ws:l},onSaveSuccess:function(){return(0,v.vm)().closeDialog(),s.fetchTasks()}}))}:void 0},(P||Z)&&{icon:"AssignOutsource",toolTip:lng("move task"),action:B.length?function(){return s.moveTasks(B)}:void 0},(P||Z)&&{icon:"settings",action:function(){return(0,v.vm)().openDialog("form",new ei({group_id:l}))}},(P||Z)&&{icon:"menu",menu:[{label:lng("import tasks"),href:{import:"tasks",params:{group_id:l}}},{label:lng("task status report"),href:{report:"TasksStatusReport",params:{group:l}}}]}],V=null,H=function(e){switch(e){case"components":return(0,_.tZ)(eo,{ws:s});case"social":return(0,_.BX)(_.HY,{children:[(s.features.discussions||s.features.blog)&&(0,_.tZ)(Sn.O,{filteredItems:w,items:O,filterNsort:k,removeBlog:D,toggleUserVotePost:R,toggleLockPostComments:N,setActiveBlog:M}),s.features.polls&&(0,_.tZ)(Rt.T,{children:y.map((function(e){return(0,_.tZ)(Et,{workspaceStore:s,poll:e,color:i.g.func.id2color(e.assignment_id)},e.assignment_id)}))}),z&&(0,_.tZ)(g.T,{icon:{icon:"vendor_blog",color:"green"},poster:{image:z.poster,title:z.lesson_name},title:z.poster?"":z.lesson_name,onClose:function(){return M(!1)},children:(0,_.tZ)(xo,{postInfo:z})})]});case"tasks":return(0,_.tZ)(at.B,{filteredTasks:x,tasks:S,filterNsort:C,actions:U,priorityOn:P,loading:q,barExtraComponent:P?(0,_.tZ)(u.JO,{icon:"report",href:{report:"TasksActivityReport",params:{range:"today",group:s.group_id}},toolTip:lng("open tasks activity report")}):void 0,showArchiveFilter:!0});case"patients_communication":return(0,_.tZ)(Pn,{filteredItems:F,actions:[s.isGeneralManager()&&{icon:"by_mail",action:function(){return s.createCommunication()},toolTip:lng("send message to patient")}]});case"schedule":return(0,_.tZ)(uo,{ws:s});case"requirements":return(0,_.tZ)(Zr.TY,{workspaces:s.required_courses});case"welcome":return(0,_.tZ)(Fo,{ws:s});case"planning":return(0,_.tZ)(To,{ws:s})}return null};s.backTabsList.includes(T)?L=H(T):(V=T,L=H(E));var G="components"===T&&s.mayCreateComponent(),W=[s.mayCreateAssignments()&&{label:lng("assignment"),onClick:function(){return(0,v.vm)().openDialog("TypeSelector",(0,Kr.aA)({ws:s.group_id,unit:(0,d.B5)(s.active_unit_id)}))}},s.mayCreateMeetings()&&{label:lng("meeting"),onClick:function(){return(0,p.p4)({edit:"meeting",params:{ws:s.group_id,unit:(0,d.B5)(s.active_unit_id)}},!0)}},s.mayShareContent()&&{label:lng("content"),onClick:function(){return(0,p.p4)({edit:"share",params:{ws:s.group_id,unit:(0,d.B5)(s.active_unit_id)}},!0)}},s.mayCreateMeetings()&&mi(s,["course","group","qualification","course_template"])&&{label:lng("import meetings from excel"),onClick:function(){return(0,p.p4)({import:"meetings"},!0)}},s.mayCreateEvents()&&{label:lng("new event"),onClick:function(){return s.openEventForm()}},s.mayCreateDiscussion()&&{label:lng("new discussion").caps(),onClick:function(){return(0,p.p4)({edit:"discussion",params:{ws:l}},!0)}},s.mayCreatePoll()&&{label:lng("new poll").caps(),onClick:A},s.mayCreatePost()&&{label:lng("new post").caps(),onClick:function(){return(0,p.p4)({edit:"content",params:{type:"blog",blog_in_group:s.group_id}},!0)}},s.mayCreateTask()&&{label:lng("new task"),onClick:function(){return(0,p.p4)({edit:"task",params:{ws:l}},!0)}}].filter((function(e){return e})),K=[G&&Blsm.isFeatureEnabled("learning_units")&&(0,d.B5)(s.group_id)&&0===s.unitIds.length&&{icon:"arrow_to_near",action:function(){return s.showUnits=!s.showUnits},toolTip:lng("toggle learning units panel")},G&&{icon:"create",toolTip:lng("manage components"),action:function(){var e=new or({assignments:s.assignments.filter((function(e){return"manual"!==e.attr("assignment_type")})).slice(),content:s.contents,group_id:s.group_id});(0,v.vm)().openDialog("form",e)}},X&&W.length?W.length>1?{icon:"new",menu:W}:{icon:"new",toolTip:W[0].label,action:W[0].onClick}:null],$=h.width>600&&((null===(t=s.arrived_to_meetings)||void 0===t?void 0:t.total_meetings)||(null===(n=s.user_scores)||void 0===n?void 0:n.count_assignments)||(null===(r=s.tasks_stats)||void 0===r?void 0:r.resolutions)||(null===(o=s.user_scores)||void 0===o?void 0:o.c_completed));return(0,_.BX)(rt.T,{css:ii,bottomPadding:!0,contBG:!0,children:["Qualification"===s.group_type&&s.qual_list.length>1&&(0,_.tZ)(On,{ws:s}),(0,_.tZ)(Lt.Fz,{children:(0,_.tZ)(jr,{id:l})}),(0,_.tZ)(rt.a,{children:$?(0,_.BX)(_.HY,{children:[(0,_.tZ)(J.SV,{children:(0,_.tZ)(ft.bp,{ws:s})}),(0,_.tZ)(J.SV,{children:(0,_.tZ)(vt,{ws:s})})]}):(0,_.tZ)(J.SV,{children:(0,_.tZ)(ft.iR,{ws:s})})}),I.length>0&&(0,_.tZ)(g.W2,{fitWidth:!0,noBottomPadding:!0,head:(0,_.tZ)(qt.$Q,{tabs:(0,_.tZ)(it.m,{tabs:I,activeTab:T,inContainerHead:!0,onSelect:function(e){return s.tab=e}}),actions:K,extraComponent:s.canUploadFiles()&&(0,_.tZ)(mo.Ss,{onDrop:function(e){return s.onFileDrop(e)},toolTip:lng("drag files here to add them as assignments or shared content")}),compactView:"compact"===s.componentsView,onViewSelect:"components"===s.tab?function(e){return s.componentsCompactView(e)}:void 0}),children:(0,_.tZ)(J.SV,{children:L})}),V?(0,_.tZ)(ci,{onClose:function(){return s.tab=E},tab:V,ws:s}):void 0,(0,_.tZ)(Ft.$,{})]})})),li=(0,o.iv)("._head{display:flex;align-items:center;}.Icon-close{",i.g.classes.opposite_text_align,";color:",i.g.colors.text_sec,";cursor:pointer;}._grow{flex-grow:1;}>._title{font-size:1.3rem;color:",i.g.colors.text_main,";font-weight:700;}",""),si={name:"6l0w94",styles:"display:flex;flex-direction:row;>*{margin:0 5px;}"},ci=(0,r.observer)((function(e){var t=e.tab,n=e.onClose,r=e.ws,o=(0,a.useRef)(null),i=ti((0,a.useState)(null),2),l=i[0],s=i[1],c=function(e){(0,v.vm)().openDialog("form",new Ao.y({files:e,share:r.group_id,my_content_in_group:r.group_id,onSaveSuccess:function(e){return r.addToMyContents(e.lessons)}}))},u=[{icon:"new",menu:[{label:lng("text content"),href:(0,p.p4)({edit:"content",params:{type:"text",my_content_in_group:r.group_id}})},{label:lng("file content"),href:(0,p.p4)({edit:"content",params:{type:"file",my_content_in_group:r.group_id}})}]}],d=[{label:"#",name:"lesson_id",type:"text"},{label:lng("name"),name:"name",type:"text"},{label:lng("description"),name:"lesson_description",type:"text"},{label:lng("category").caps(),name:"category_name",type:"text"},{label:lng("content type").caps(),name:"lesson_type",type:"select_multi",options:[{val:"Text",label:lng("text")},{val:"File",label:lng("file")}]}],f=function(){return o.current.close()};return(0,_.tZ)(ot.d,{scroll:!0,onClose:n,ref:o,refDrawerBody:s,from:"hierarchy"===t?"side":"bottom",children:(0,_.tZ)("div",{css:li,children:(0,_.tZ)(g.W2,{head:function(e){var t,n,o=(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return history.back()},children:lng("go back").caps()});switch(e){case"members":return(0,_.tZ)(g.$0,{icon:"user",title:r.group_name?lng("members of %s|workspace",r.group_name):lng("members"),onClose:f,headExtra:r.mayEditMembers()?(0,_.BX)("div",{css:si,children:[r.sections.includes("waiting_list")&&r.waitingList&&r.waitingList.length>0&&(0,_.BX)(y.l,{theme:"contained",onClick:function(){return r.tab="waiting_list"},children:[lng("waiting list").caps()," (",r.waitingList.length,")"]}),r.sections.includes("registration")&&r.registeredUsers&&(null===(t=r.registeredUsers)||void 0===t?void 0:t.length)>0&&(0,_.BX)(y.l,{theme:"contained",onClick:function(){return r.tab="registration"},children:[lng("users in registration").caps()," (",null===(n=r.registeredUsers)||void 0===n?void 0:n.length,")"]})]}):null});case"managers":return(0,_.tZ)(g.$0,{icon:"manager",title:r.group_name?lng('managers of "%s"',r.group_name):lng("managers"),onClose:f,headExtra:r.mayEditSetting()?(0,_.tZ)("div",{css:si,children:r.sections.includes("mailing_list")&&(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return r.tab="mailing_list"},children:lng("mailing list").caps()})}):null});case"reports":return(0,_.tZ)(g.$0,{icon:"report",title:r.group_name?lng('reports of "%s"',r.group_name):lng("reports"),onClose:f});case"waiting_list":return(0,_.tZ)(g.$0,{icon:"waiting_list",title:r.group_name?lng('waiting list of "%s"',r.group_name):lng("waiting list"),onClose:f,headExtra:o});case"registration":return(0,_.tZ)(g.$0,{icon:"users",title:r.group_name?lng('users in registration to "%s"',r.group_name):lng("registration"),onClose:f,headExtra:o});case"hierarchy":return(0,_.tZ)(g.$0,{icon:"hierarchy",title:lng("hierarchy"),onClose:f});case"my_contents":return(0,_.tZ)(g.$0,{icon:"content",title:lng("my content"),onClose:f});case"mailing_list":return(0,_.tZ)(g.$0,{icon:"message",title:lng("mailing list"),onClose:f,headExtra:o});default:return null}}(t),stickyHead:!0,children:function(e){switch(e){case"members":return!!r.members&&(0,_.tZ)(Nt.PH,{collection:r.members,scrollParent:l,reload:function(){return r.fetchMembers()},allowedUserFields:r.allowedUserFields,workspace:r});case"managers":return!!r.managers&&(0,_.tZ)(Nt.J,{collection:r.managers,scrollParent:l,reload:function(){return r.fetchManagers()},workspace:r});case"reports":return!!r.reports&&(0,_.tZ)(Mt.uP,{reports:r.reports,reportsBundle:r.reportsBundle,group_id:r.group_id,workspace:r});case"registration":return(0,_.tZ)(Nt.h3,{collection:r.registeredUsers,scrollParent:l,workspace:r});case"waiting_list":return!(!r.mayEditMembers()||!r.waiting_list_active)&&(!!r.waitingList&&(0,_.tZ)(Nt.v2,{collection:r.waitingList,scrollParent:l,allowedUserFields:r.allowedUserFields,workspace:r}));case"hierarchy":return(0,_.tZ)(pi,{workspace:r,drawerEl:o});case"my_contents":return(0,_.tZ)(Io.E,{collection:r.myContents,actions:u,filters:d,barExtraComponent:(0,_.tZ)(mo.Ss,{onDrop:c})});case"mailing_list":return(0,_.tZ)(Nt.Z5,{scrollParent:l,workspace:r});default:return(0,_.tZ)(zt.$,{})}}(t)})})})})),ui={name:"1azpx8r",styles:"margin-bottom:20px"},pi=(0,r.observer)((function(e){var t=e.workspace,n=ti((0,a.useState)(""),2),r=n[0],o=n[1],i=t.group_type;"group"===i.toLowerCase()&&t.is_course&&(i="course");var l=t.fetchHierarchy,s=t.availableRootGroups,c=Blsm.isFeatureEnabled("group_subset")&&"Group"==t.group_type&&t.isGeneralManager(),u=(0,Do.p)(t.group_type,t.is_course).caps(),d=s.filter((function(e){return e.id!==t.id})).length>0;return(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{css:ui,children:(0,_.tZ)(b.I,{type:"search",onChange:o,value:r,label:lng("search"),wrapped:!0})}),(0,_.tZ)(hn.mp,{tree:t.hierarchy,filterText:r,onSelect:function(e){return(0,p.p4)({workspace:e},!0)},idField:"id",nameField:"name",mayEdit:t.is_owner||c,activeId:t.id,buttons:function(e,n){var r,o,a={icon:"edit",label:lng("edit workspace")+" (".concat(u,")"),onClick:function(){return(0,p.p4)({edit:"workspace",id:e},!0)}};if("Subset"===n.type)return[(t.is_manager||t.is_owner||(null===(o=Blsm.user)||void 0===o?void 0:o.isPowerManager))&&{icon:"trash",label:lng("delete subset"),onClick:function(){return(0,Tn.BB)(lng("are you sure that you want to delete this subset?").caps(),{onConfirm:function(){return(0,m.SC)("groups/remove_sub_group",{method:"POST",data:{group_id:n.id}},(function(){return l()}))}})}},a];var f={label:lng("add subset"),onClick:function(t){t.stopPropagation(),(0,Tn.cS)(lng("insert subset name"),{title:lng("add new subset"),confirmText:lng("save"),onConfirm:function(t){return(0,m.SC)("groups/add_subset",{method:"POST",data:{group_name:t,parent_id:e}},(0,ir.action)((function(){return l()})))}})}};return t.is_owner||null!==(r=Blsm.user)&&void 0!==r&&r.isPowerManager?[{icon:"new",actions:[{label:lng("add new workspace")+" (".concat(u,")"),onClick:function(t){t.stopPropagation(),(0,p.p4)({edit:"workspace",params:{type:i.toLowerCase(),parent_id:e}},!0)}},d&&{label:lng("add existing workspace")+" (".concat(u,")"),onClick:function(t){t.stopPropagation(),(0,v.vm)().openDialog("form",new vr({parent_id:e,availableRootGroups:s,fetchHierarchy:l,typeName:u}))}},c&&f]},a]:c?[{icon:"new",actions:[f]}]:[]}})]})})),di=(0,o.iv)("width:100%;",i.g.classes.margin_far("1em"),";color:",i.g.colors.text_main,";._poster{height:164px;width:164px;background-color:",i.g.colors.bg_1,";background-size:cover;background-position:center;margin:-102px auto 0;border-radius:20px;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}._top{justify-content:space-between;align-items:flex-start;margin-bottom:10px;}",""),fi=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("workspace","personal"),t=e.ready,n=e.group_name;return(0,d.Ju)(n),t?(0,_.BX)(rt.T,{css:ii,bottomPadding:!0,contBG:!0,children:[(0,_.tZ)(Lt.Fz,{}),(0,_.tZ)(rt.a,{children:(0,_.tZ)(g.W2,{css:di,children:(0,_.tZ)(Ht.c_,{className:"_top",children:(0,_.tZ)(ft.p8,{ws:e})})})}),(0,_.tZ)(g.W2,{fitWidth:!0,noBottomPadding:!0,head:(0,_.tZ)(qt.$Q,{compactView:"compact"===e.componentsView,onViewSelect:"components"===e.tab?function(t){return e.componentsCompactView(t)}:void 0}),children:(0,_.tZ)(J.SV,{children:(0,_.tZ)(eo,{ws:e})})}),(0,_.tZ)(Ft.$,{})]}):(0,_.tZ)(Xt.h,{})})),mi=function(e,t){return t.indexOf(e.is_course?"course":e.group_type.toLowerCase())>-1},gi=n(34065),hi=(0,r.observer)((function(e){var t=e.onDialogClose,n=(0,a.useContext)(v.l9).getStore("edit"),r=n.loadingChunk,o=n.error,i=n.ready,l=n.formObj;return r?(0,_.tZ)(Xt.h,{}):o?(0,_.tZ)(rt.T,{children:o}):((0,d.Ju)(l.windowTitle),l.setOnClose(t),l.dialog?(0,_.tZ)(gi.m,{form:n.formObj,onClose:t}):!1===i?(0,_.tZ)(Xt.h,{}):(0,_.tZ)(A.l,{type:"page",form:l}))})),bi=n(43389),yi=(0,r.observer)((function(e){var t=e.userStore,n=t.roles,r=t.managed_ous,o=t.managed_groups,i=r.concat(o);return(0,_.BX)(_.HY,{children:[i.length>0&&(0,_.tZ)(vi,{title:lng("workspaces"),collection:i}),n.length>0&&(0,_.tZ)(Oi,{title:lng("roles"),collection:n})]})})),vi=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("workspace name"),lng("type"),lng("permission type"),"".concat(lng("create"),"\n(").concat(lng("assignments"),")"),"".concat(lng("set weights"),"\n(").concat(lng("assignments"),")"),"".concat(lng("create"),"\n(").concat(lng("meetings"),")"),"".concat(lng("edit"),"\n(").concat(lng("meetings"),")"),"".concat(lng("set attendance"),"\n(").concat(lng("meetings"),")"),"".concat(lng("share"),"\n").concat(lng("content")),Blsm.isFeatureEnabled("evaluation")&&"".concat(lng("view"),"\n").concat(lng("evaluations")),lng("general")];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"group_id",collection:n,RowRenderer:wi,compact:!0,noWindow:!0,mobileSupport:!0})]})})),_i=function(e,t,n,r){return 0<e&&e<=n&&!(r&&["perm_assignments|1","perm_assignments|2","perm_meetings|1"].includes(t+"|"+n))},wi=(0,r.observer)((function(e){var t=e.row,n=t.group_name,r=t.group_type,o=t.group_id,i=t.is_course,a=t.permission_name,l=t.perm_assignments,s=t.perm_meetings,c=t.perm_content,d=t.perm_evaluation,f=t.perm_config,m=t.template_guard,g=[{type:"main",_:(0,_.tZ)(p.A,{href:{workspace:o},children:n})},(0,Do.p)(r,i),{_:a||(0,_.BX)("i",{children:["-",lng("custom").caps(),"-"]})},{type:"icons",_:_i(l,"perm_assignments",1,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(l,"perm_assignments",2,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(s,"perm_meetings",1,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(s,"perm_meetings",2,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(s,"perm_meetings",3,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(c,"perm_content",1,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},Blsm.isFeatureEnabled("evaluation")&&{type:"icons",_:_i(d,"perm_evaluation",1,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})},{type:"icons",_:_i(f,"perm_config",1,m)&&(0,_.tZ)(u.JO,{icon:"mark_v"})}];return(0,_.tZ)(jn.lF,{tds:g})})),Oi=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("name"),lng("description"),lng("permissions")];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"group_id",collection:n,RowRenderer:ki,compact:!0,noWindow:!0,mobileSupport:!0})]})})),ki=(0,r.observer)((function(e){var t=e.row,n=[{type:"main",_:t.group_name},{type:"description",html:t.group_description},{_:t.permissions.map((function(e,t){return(0,_.tZ)("div",{children:e},t)}))}];return(0,_.tZ)(jn.lF,{tds:n})})),xi=n(94576);function Si(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ji(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ji(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ji(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ci=(0,o.iv)("width:100%;transition:0.4s;",i.g.mQuery.mobile,"{padding:25px 0;}",""),Pi=function(e){var t=e.title,n=e.content,r=e.initialState,o=void 0===r||r,i=Si((0,a.useState)(o),2),l=i[0],s=i[1];return(0,_.BX)("div",{css:Ci,children:[(0,_.tZ)(Ti,{open:l,onClick:function(){return s(!l)},title:t.caps()}),l&&(0,_.tZ)(Ii,{open:l,children:n})]})},Zi={name:"134wp3x",styles:"width:100%;cursor:pointer;display:flex;.title{font-size:1.3rem;font-weight:600;}"},Bi={name:"t10jb8",styles:"margin:5px"},Ti=function(e){var t=e.title,n=e.open,r=e.onClick;return(0,_.BX)("div",{css:Zi,onClick:r,className:"_title",children:[(0,_.tZ)("span",{className:"title",children:t}),(0,_.tZ)(u.JO,{css:Bi,icon:"arrow_".concat(n?"down":"up")})]})},Ei={name:"1qv38fn",styles:"padding:10px;max-height:100%"},Ii=function(e){var t=e.children;return(0,_.tZ)("div",{css:Ei,className:"_content",children:t})};function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Di=(0,r.observer)((function(e){var t=e.userStore,n=t.courses,r=t.groups,o=t.qualifications_roles,i=t.authorization_qualification,a=t.all_sub_professions,l=t.qualifications,s=t.isSelf,c=t.wsFilterNsort,u=t.wsShowComponents,p=t.manageGroups,m=t.filteredCourses,g=t.removeUserWorkspace,h=i.filter((function(e){return e.c_completed})),y=i.filter((function(e){return!e.c_completed})),v=(0,d.v7)({all_sub_professions:a.length>0&&lng("professions"),qualifications_roles:o.length>0&&lng("qualification roles"),completed_authorization_qualification:h.length>0&&lng("job authorizations"),potential_authorization_qualification:y.length>0&&lng("potential job authorizations"),qualifications:l.length>0&&lng("qualifications"),courses:n.length>0&&lng("courses"),groups:r.length>0&&lng("other workspaces")},(function(e){return!!e})),w=[{name:"group_name",label:lng("name"),type:"text",outOfMenu:!0},{name:"group_id",label:"#",type:"text"}],O=(0,f.qD)(c),k=O.filtersVals,x=O.setFilterVals,S=c.filter.table?(0,d.v7)(v,(function(e,t){return c.filter.table.includes(t)})):v,j=(0,_.tZ)(qt.CX,{filters:w,filtersVals:k,onFilter:x,extraComponent:(0,_.tZ)(b.I,{type:"checkbox",value:u,onChange:function(e){return t.wsShowComponents=!!e},label:lng("show components").caps()}),alwaysShow:!0});return(0,_.BX)(_.HY,{children:[j,(0,_.BX)("div",{children:[S.all_sub_professions&&(0,_.tZ)(zi,{title:v.all_sub_professions,collection:a,isSelf:s,showComponents:u,filterNsort:c,showType:!0,profLevel:!0}),S.qualifications_roles&&(0,_.tZ)(zi,{title:v.qualifications_roles,collection:o,isSelf:s,showComponents:u,filterNsort:c,showType:!0}),S.completed_authorization_qualification&&(0,_.tZ)(zi,{showType:!0,title:v.completed_authorization_qualification,collection:h,isSelf:s,showComponents:u,filterNsort:c}),S.potential_authorization_qualification&&(0,_.tZ)(zi,{showType:!0,title:v.potential_authorization_qualification,collection:y,isSelf:s,showComponents:u,filterNsort:c}),S.qualifications&&(0,_.tZ)(zi,{title:v.qualifications,collection:l,isSelf:s,showComponents:u,filterNsort:c,showType:!0}),S.courses&&(0,_.tZ)(Ri,{title:v.courses,collection:m||n,manageGroups:p,filterNsort:c,removeUserWorkspace:g}),S.groups&&(0,_.tZ)(Ri,{title:v.groups,collection:r,manageGroups:p,filterNsort:c,removeUserWorkspace:g})]})]})})),Ri=(0,r.observer)((function(e){var t=e.collection,n=e.manageGroups,r=e.filterNsort,o=e.removeUserWorkspace,i=e.title,a=t.some((function(e){return e.time_commitment})),l=t.some((function(e){return e.weekly_hours})),s=(0,So.WB)(t,r.filter,r.sort),c=[lng("name"),lng("active"),lng("hours"),lng("start date"),lng("end date"),lng("completion date"),lng("attendance"),lng("score"),lng("completed"),lng("diploma"),a&&lng("time commitment"),l&&lng("weekly hours"),n&&lng("actions")];return(0,_.tZ)(Pi,{title:i,content:(0,_.tZ)(jn.iA,{cols:c,rowIdCol:"group_id",collection:s,RowRenderer:Ni,filterNsort:r,compact:!0,noWindow:!0,mobileSupport:!0,rowProps:{hasTimeCommitment:a,hasWeeklyHours:l,manageGroups:n,removeUserWorkspace:o}})})})),Ni=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=n.hasTimeCommitment,o=n.hasWeeklyHours,a=n.manageGroups,l=n.removeUserWorkspace,s=t.group_id,c=t.is_member,f=t.group_name,m=t.is_active,g=t.total_time,h=t.group_open_date,b=t.group_close_date,y=t.c_performance_date,v=t.c_completed,w=t.passed_meetings,O=t.total_meetings,k=t.arrived_to_meetings,x=t.c_performance_score,S=t.diploma_link,j=t.diploma_file_ext,C=t.diploma_send,P=t.time_commitment,Z=t.weekly_hours,B=t.is_course,T=t.is_owner,E=Blsm.user.isPowerManager||(0,d.P$)(T),I=[{type:"main","data-group_id":s,_:(0,_.BX)(_.HY,{children:[!c&&(0,_.tZ)(u.JO,{icon:"menu_info",className:"warning",toolTip:lng("not a member")})," ",E?(0,_.tZ)(p.A,{href:{workspace:s},children:f}):f]})},{type:"icons",_:(0,d.P$)(m)?(0,_.tZ)(u.JO,{color:i.g.colors.positive,icon:"mark_v"}):(0,_.tZ)(u.JO,{color:i.g.colors.negative,icon:"mark_x"})},{_:g>0?(0,d.Rn)(g/3600):""},{_:h>0&&(0,_.tZ)(G.qp,{time:h})},{_:b>0?y<b?(0,pt.GG)(b,{date:!0,time:!1}):qi(b):""},{_:y>0&&(0,_.tZ)(G.qp,{time:y})},{_:O>0?(0,_.tZ)(lt.k,{width:"75px",showPercent:!0,numerator:k,denominator:O,color:Xi(100*k/O),className:"_progress"}):""},{className:(0,d.AK)({color_negative:"1"!=v}),_:null!==v&&Fi(x)},{type:"icons",_:(0,d.P$)(v)?(0,_.tZ)(u.JO,{icon:"mark_v",color:i.g.colors.positive}):"0"!=v||w?"":(0,_.tZ)(u.JO,{icon:"mark_x",color:i.g.colors.negative,toolTip:lng("not reached required attendance")})},{type:"icons",_:(S||C)&&(0,_.BX)(_.HY,{children:[S&&(0,_.tZ)(u.JO,{color:i.g.colors.dominant_main,icon:"diploma",href:S,toolTip:lng("download diploma"),"data-preview":j}),C&&(0,_.BX)(_.HY,{children:[" ",(0,_.tZ)(u.JO,{color:i.g.colors.dominant_main,icon:"by_mail",href:C,toolTip:lng("send diploma by mail to user")})]})]})},!!r&&(P&&(0,_.BX)(_.HY,{children:[P," ",((0,d.P$)(P)?lng("month"):lng("months")).caps()]})),!!o&&Z,!!a&&{type:"icons",_:(0,_.tZ)(_.HY,{children:E&&!y&&(0,_.tZ)(u.JO,{icon:"mark_x",toolTip:(B?lng("remove from course"):lng("remove from group")).caps(),onClick:function(){return l(t)}})})}];return(0,_.tZ)(jn.lF,{tds:I})})),zi=(0,r.observer)((function(e){var t=e.collection,n=e.isSelf,r=e.showType,o=e.profLevel,i=e.showComponents,a=e.filterNsort,l=e.title,s=[],c=t.map((function(e){return parseInt(e.group_id)}));t.forEach((function(e,t){var n;e.key=l+"_"+t,s.push(e),null===(n=e.dependencies)||void 0===n||n.forEach((function(e,n){c.includes(parseInt(e.group_id))||(e.key=l+"_"+t+"_"+n,s.push(e))}))}));var u=(0,So.WB)(s,a.filter,a.sort),p=!!t[0].authorization_qualification,d=[lng("name"),r&&lng("type"),lng("classification"),lng("components",{phrase:!0}),o&&lng("professional level"),p?lng("authorized"):lng("status"),p?lng("authorized date"):lng("completed at"),p?lng("expiry date"):lng("due date"),lng("score"),!o&&lng("diploma"),n&&lng("actions")];return(0,_.tZ)(Pi,{title:l,content:(0,_.tZ)(jn.iA,{cols:d,collection:i?u:u.filter((function(e){return!e.hidden_row})),RowRenderer:Mi,compact:!0,noWindow:!0,mobileSupport:!0,rowIdCol:"key",rowProps:{isSelf:n,showType:r,profLevel:o}})})})),Mi=(0,r.observer)((function(e){var t,n,r=e.row,o=e.rowProps,a=o.showType,l=o.isSelf,s=o.profLevel,c=r.rds,f=r.group_type,m=r.user_id,g=r.group_id,h=r.c_completed,b=r.course_certificate,y=r.file_id,v=r.user_email,w=r.assignment_id,O=r.is_member,k=r.group_name,x=r.classification_name,S=r.c_performance_date,j=r.calc_due_date,C=r.expired,P=r.repeat_type,Z=r.c_performance_score,B=r.available,T=r.assignment_name,E=r.lesson_name,I=r.completed,A=r.last_success_date,D=r.managerun,R=r.is_owner,N=r.level_name,z=r.level_value,M=r.expire_time,F=r.confirm_time,q=r.status_label,X=r.status_color,L=r.auth_status_color,U=r.auth_status_label,V=r.is_course,H=r.dependency_of,J="object"===Ai(c),W=Blsm.user.isPowerManager||(0,d.P$)(R),K=!!r.authorization_qualification;if(K?(t=i.g.colors.reports[L],n=U):J?(t=i.g.colors.reports[X],n=q):w?(t=(0,d.P$)(I)?i.g.colors.reports.green:i.g.colors.reports.yellow,n=(0,d.P$)(I)?lng("completed").caps():lng("not completed").caps()):(t=(0,d.P$)(h)?i.g.colors.reports.green:i.g.colors.reports.yellow,n=(0,d.P$)(h)?lng("completed").caps():lng("not completed").caps()),w||H){var $=["course_template","course"].includes(null==f?void 0:f.toLowerCase()),Y=$?lng("course").caps():lng("assignment").caps(),Q=i.g.colors.entity[$?"course":"assignment"],ee=[{type:"main",indent:!0,_:(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.vB,{}),T||E||k]})},a?{_:(0,_.tZ)(jt.jC,{color:Q,text:Y})}:"",x&&"",{_:(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.gT,{color:t||"gray"})," ",n||"missing"," "]})},{_:(A>0||S>0)&&(0,_.tZ)(G.qp,{time:A||S})},"","",!s&&"",l&&!$&&{type:"icons",_:!D&&(0,_.tZ)(u.JO,{icon:"play",href:{launcher:"assignment",id:w}})}];return(0,_.tZ)(jn.lF,{tds:ee})}var te=null!==(null==c?void 0:c.done)?null==c?void 0:c.done:0,ne="group"===(null==f?void 0:f.toLowerCase())&&V?"course":null==f?void 0:f.toLowerCase(),re=[{type:"main",indent:!J,_:(0,_.BX)(_.HY,{children:[!J&&(0,_.tZ)(u.vB,{}),O||!J?"":(0,_.tZ)(u.JO,{icon:"menu_info",className:"warning",toolTip:lng("not a member")}),W?(0,_.tZ)(p.A,{href:{workspace:g},children:k}):k]})},!!a&&{_:(0,_.tZ)(jt.jC,{color:i.g.colors.entity[ne],children:(0,Do.p)(ne).caps()})},x,{_:J?l?(0,_.tZ)(lt.k,{width:"75px",showPercent:!0,numerator:te,denominator:c.required,color:Xi(100*te/c.required),className:"_progress"}):(0,_.tZ)(p.A,{href:(0,p.p4)({report:"QualificationComponents",params:{user:m,qualification:g}}),children:(0,_.tZ)(lt.k,{width:"75px",numerator:te,denominator:c.required,color:i.g.colors.positive,className:"_progress"})}):(0,_.tZ)(u.JO,{icon:(0,d.P$)(h)?"mark_v":"mark_x",color:(0,d.P$)(h)?i.g.colors.positive:i.g.colors.negative})},!!s&&(0,xi.h1)({level_name:N,level_value:z}),{_:(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.gT,{color:t||"gray"})," ",n||"missing"," "]})},{_:S>0&&(0,_.tZ)(G.qp,{time:K?F:S})},K?{_:M?qi(M):""}:{_:!O&&J?"":"from_required_qualifications"!==P||j?P&&"none"!==P||!S?qi(j):(0,pt.GG)(j,{date:!0,time:!1}):lng("according to required qualifications").caps()},C||null===h?"":{_:Fi(Z)},!s&&{type:"icons",_:h&&(y||(0,d.B5)(b)||v&&(0,d.B5)(b))&&(0,_.BX)(_.HY,{children:[h&&(y||(0,d.B5)(b))&&(0,_.tZ)(u.JO,{color:i.g.colors.dominant_main,icon:"diploma",href:y?{file:"file_id=".concat(y)}:"ajax/requests.php?user=".concat(m,"&group=").concat(g,"&req=diploma"),newTab:!0,toolTip:lng("download diploma")}),h&&v&&(0,d.B5)(b)&&(0,_.tZ)(u.JO,{icon:"by_mail",href:"ajax/requests.php?user=".concat(m,"&group=").concat(g,"&req=diploma&target=mail"),newTab:!0,toolTip:lng("send diploma by mail")})]})},l&&{type:"icons",_:1===B&&(0,_.tZ)(p.A,{href:{workspace:g},children:(0,_.tZ)(u.JO,{icon:"go_arrow"})})}];return(0,_.tZ)(jn.lF,{tds:re})})),Fi=function(e){return(e=parseInt(e))>=0?(0,_.tZ)(jt.jC,{icon:"bookmark_filled",color:Xi(e,!1),children:e}):""},qi=function(e){if(!e)return null;var t=(0,pt._3)(e),n=(0,pt._3)((new Date).getTime());return(0,_.tZ)(jt.jC,{color:Xi((0,pt.GG)(n<t,!0)),children:(0,pt.GG)(t,{date:!0,time:!1})})},Xi=function(e,t){return t?e>=75?i.g.colors.positive:e>=50?i.g.colors.chart.waiting:"0"==e?i.g.colors.task.in_progress:i.g.colors.negative:i.g.colors[e?"positive":"negative"]};var Li=(0,r.observer)((function(e){var t=e.userStore,n=t.compliance_qualifications,r=t.compliance_courses,o=t.compliance_assignments,i=t.compliance_assignments_docs;return(0,_.BX)(_.HY,{children:[n.length>0&&(0,_.tZ)(Hi,{title:lng("compliance qualifications"),collection:n}),r.length>0&&(0,_.tZ)(Hi,{title:lng("compliance courses"),collection:r}),o.length>0&&(0,_.tZ)(Ji,{title:lng("compliance assignments"),collection:o}),i.length>0&&(0,_.tZ)(Ji,{title:lng("procedure documents"),collection:i})]})})),Ui=(0,o.iv)("color:",i.g.colors.negative,";font-weight:bold;",""),Vi={name:"f2qx9q",styles:"max-width:300px;margin:10px 0"},Hi=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("name"),lng("classification"),lng("completion date"),lng("completed"),lng("due date"),lng("diploma")];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)("div",{css:Vi,children:(0,_.tZ)(lt.k,{numerator:n.filter((function(e){return(0,d.P$)(e.c_completed)})).length,denominator:n.length})}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"group_id",collection:n,RowRenderer:Gi,compact:!0,noWindow:!0,mobileSupport:!0})]})})),Gi=(0,r.observer)((function(e){var t=e.row,n=t.group_name,r=t.course_certificate,o=t.classification_name,i=t.c_performance_date,a=t.c_completed,l=t.expired,s=t.next_due_date,c=t.file_id,p=t.user_id,f=t.group_id,m=t.user_email,g=[{type:"main",_:n},o,i,{type:"icons",_:(0,_.tZ)(u.JO,{icon:a?"mark_v":"empty"})},{_:(0,_.tZ)(I.u,{css:l?Ui:void 0,text:l?lng("expired"):void 0,children:s})},{type:"icons",icons:[a&&(c||(0,d.B5)(r))&&{icon:"diploma",href:c?{file:"file_id=".concat(c)}:"ajax/requests.php?user=".concat(p,"&group=").concat(f,"&req=diploma"),newTab:!0,toolTip:lng("download diploma")},a&&m&&(0,d.B5)(r)&&{icon:"by_mail",href:"ajax/requests.php?user=".concat(p,"&group=").concat(f,"&req=diploma&target=mail"),toolTip:lng("send diploma by mail")}]}];return(0,_.tZ)(jn.lF,{tds:g})})),Ji=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("name"),lng("completion date"),lng("completed"),lng("due date")];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)("div",{css:Vi,children:(0,_.tZ)(lt.k,{numerator:n.filter((function(e){return(0,d.P$)(e.completed)})).length,denominator:n.length})}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"assignment_id",collection:n,RowRenderer:Wi,compact:!0,noWindow:!0,mobileSupport:!0})]})})),Wi=(0,r.observer)((function(e){var t=e.row,n=t.assignment_name,r=t.last_success_date,o=t.completed,i=t.expired,a=t.next_due_date,l=[{type:"main",_:n},r,{_:(0,_.tZ)(u.JO,{icon:(0,d.P$)(o)?"mark_v":"empty"})},{_:a&&(0,_.tZ)(I.u,{css:i?Ui:void 0,text:i?lng("expired"):void 0,children:a})}];return(0,_.tZ)(jn.lF,{tds:l})})),Ki=(0,r.observer)((function(e){var t=e.userStore,n=t.evaluation,r=t.self_evaluation;return(0,_.BX)(_.HY,{children:[n.length>0&&(0,_.tZ)($i,{title:lng("evaluation"),collection:n}),r.length>0&&(0,_.tZ)($i,{title:lng("self evaluation"),collection:r})]})})),$i=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("name"),lng("date"),lng("ran by"),lng("report")];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"performance_id",collection:n,RowRenderer:Yi,compact:!0,noWindow:!0,mobileSupport:!0})]})})),Yi=(0,r.observer)((function(e){var t=e.row,n=t.assignment_name,r=t.lesson_name,o=t.performance_date,i=t.may_access,a=t.performance_id,l=t.full_name,c=t.assignment_id,p=t.about_user,f=t.actual_user_id,m=p||f,g=[{type:"main",className:"list_table-main_cell",_:n||r},{_:o?(0,_.tZ)(G.qp,{time:o}):""},(0,d.v2)({full_name:l}),{type:"icons",_:[i&&(0,_.tZ)(s.x,{options:[{val:"",label:lng("performance report"),href:{report:"Performance",params:{performance_id:a}}},Blsm.isFeatureEnabled("reports")&&{val:"",label:lng("user question distribution"),href:{report:"UserQuestionDistribution",params:{assignment:c,user:m}}}],children:(0,_.tZ)(u.JO,{icon:"report"})})]}];return(0,_.tZ)(jn.lF,{tds:g})})),Qi=n(99844),ea=n(74525),ta=n(77693),na=(0,o.iv)(i.g.classes.margin_near(i.g.consts.CARDS_SPACING+"px"),";color:",i.g.colors.text_sec,";div._title{color:",i.g.colors.text_main,";font-weight:600;font-size:1.1em;margin-bottom:1em;}.EmptyMessage{margin-top:30px;}",i.g.mQuery.mobile,"{",i.g.classes.margin_near("0"),";margin-top:20px;}",""),ra=(0,r.observer)((function(e){var t,n=e.userStore,r=(Blsm.isFeatureEnabled("assignments")||Blsm.isFeatureEnabled("meetings")||Blsm.isFeatureEnabled("competency"))&&(null===(t=n.assignments_stats)||void 0===t?void 0:t.total)>0,o=(n.rolesBadges.length||n.badges.length)>0;return(0,_.BX)("div",{css:na,children:[r&&(0,_.tZ)(ia,{userStore:n}),o&&(0,_.tZ)(la,{userStore:n}),!r&&!o&&(0,_.tZ)(ta.M,{title:lng("no extra details for now"),icon:"user"})]})})),oa=(0,o.iv)("margin-bottom:1em;>div._charts{display:flex;flex-wrap:wrap;overflow-y:hidden;overflow-x:auto;flex-direction:initial;",i.g.mQuery.mobile,"{justify-content:center;}&>div{background-color:",i.g.colors.bg_cont,";border:1px solid ",i.g.colors.separator,";border-radius:",i.g.consts.WIDGET_BORDER_RADIUS,"px;width:225px;margin:0 .5em 1em;padding:10px 10px 30px;display:flex;flex-direction:column;>div:nth-child(1){flex-basis:3em;text-align:center;font-weight:600;}>div:nth-child(2){flex-grow:1;display:flex;justify-content:center;align-items:center;}}}",""),ia=(0,r.observer)((function(e){var t=e.userStore,n=t.assignments_stats,r=2+(n.meetings>0?1:0)+(Blsm.isFeatureEnabled("competency")?3:0),o=Math.min(150,720/r)+"px",a={minMidth:o},l=t.id;return(0,_.BX)("div",{css:oa,children:[(0,_.tZ)("div",{className:"_title",children:lng("status").caps()}),(0,_.BX)("div",{className:"_charts",children:[Blsm.isFeatureEnabled("assignments")&&(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{style:a,className:"pointer",onClick:function(){return(0,p.p4)({report:"ReportUserStatus",params:{user:l}},!0)},children:[(0,_.tZ)(I.u,{text:lng("there may be differences between the information displayed on this screen and the report").caps(),children:(0,_.BX)("div",{children:[lng("assignment success").caps(),"*"]})}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[3],numerator:n.completed,denominator:n.total,size:o,valueSign:"%"})})]}),(0,_.BX)("div",{style:a,className:"pointer",onClick:function(){return(0,p.p4)({report:"ReportUserStatus",params:{user:l}},!0)},children:[(0,_.tZ)(I.u,{text:lng("there may be differences between the information displayed on this screen and the report").caps(),children:(0,_.BX)("div",{children:[lng("assignment average score").caps(),"*"]})}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[8],percent:n.avg_score,size:o})})]})]}),Blsm.isFeatureEnabled("meetings")&&n.meetings>0&&(0,_.BX)("div",{style:a,children:[(0,_.tZ)("div",{children:lng("attendance").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[1],numerator:n.attended,denominator:n.meetings,size:o,valueSign:"%"})})]}),Blsm.isFeatureEnabled("competency")&&(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{style:a,children:[(0,_.tZ)("div",{children:lng("total competency").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[6],numerator:n.prof_completed,denominator:n.prof_total,size:o,valueSign:"%"})})]}),(0,_.BX)("div",{style:a,children:[(0,_.tZ)("div",{children:lng("compliance competency").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[2],numerator:n.prof_comp_completed,denominator:n.prof_comp_total,size:o,valueSign:"%"})})]}),(0,_.BX)("div",{style:a,children:[(0,_.tZ)("div",{children:lng("professional competency").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(ea.C,{color:i.g.colors.set[9],numerator:n.prof_non_comp_completed,denominator:n.prof_non_comp_total,size:o,valueSign:"%"})})]})]})]})]})})),aa=(0,o.iv)(">div{>div._badges{display:flex;margin:0 20px;",i.g.mQuery.mobile,"{justify-content:center;}>div+div{",i.g.classes.margin_near("45px"),";}}}",""),la=(0,r.observer)((function(e){var t=e.userStore,n=t.badges,r=t.rolesBadges,o=t.basicDetails.rewards_total_points;return(0,_.BX)("div",{css:aa,children:[r.length>0&&(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_title",children:lng("qualification roles").caps()}),(0,_.tZ)("div",{className:"_badges",children:r.map((function(e){return(0,_.tZ)("div",{children:(0,_.tZ)(Ut.F$,{size:"100",ribbon:!0,color:i.g.colors.set[e.color%e.color.length],label:e.group_name})},e.group_id)}))})]}),n.length>0&&(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_title",children:"".concat(lng("earned badges").caps()," (").concat(o||0," ").concat(lng("points"),")")}),(0,_.tZ)("div",{className:"_badges",children:n.map((function(e){return(0,_.tZ)("div",{children:(0,_.tZ)(Ut.Pp,{icon:e.icon,color:e.color,label:e.badge_name,description:e.badge_description,date:e.reward_time})},e.badge_id)}))})]})]})})),sa=n(9107),ca=(0,r.observer)((function(e){var t=e.userStore,n=t.loginWithLocationData,r=t.disconnectSession,o=[lng("device"),lng("origin ip"),lng("origin location"),lng("expiry"),""];return(0,_.tZ)(jn.iA,{cols:o,collection:n,RowRenderer:ua,compact:!0,noWindow:!0,mobileSupport:!0,rowProps:{disconnectSession:r}})})),ua=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=t.expiry,o=t.user_agent,i=t.ip,a=t.current_session,l=t.geoData,s=n.disconnectSession,c=[{type:"icons",_:(0,_.tZ)(I.u,{text:o,children:(0,_.tZ)("span",{style:{cursor:"default"},children:"💻"})})},{type:"main",_:i},l?"".concat(l.city,", ").concat(l.country_name):"",{_:(0,_.tZ)(G.qp,{time:r})},{type:"icons",icons:[!a&&{icon:"exit",toolTip:lng("disconnect session"),onClick:function(){return s(t)}}]}];return(0,_.tZ)(jn.lF,{tds:c})}));function pa(e){return(pa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function da(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fa(e,t){return(fa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ba(e);if(t){var o=ba(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ga(this,n)}}function ga(e,t){return!t||"object"!==pa(t)&&"function"!=typeof t?ha(e):t}function ha(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ba(e){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fa(e,t)}(i,e);var t,n,r,o=ma(i);function i(e){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=ha(t),a=null,(r="user_id")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a;var l=e.data,s=void 0===l?{}:l;t.user_id=s.user_id,t.title=lng("add a connected user").caps();return t._fields=[{type:"select",name:"domain",label:lng("find users in this domain"),options:Blsm.user.domains_list},{type:"single_item",name:"connect_id",label:"".concat(lng("find user").caps()," (").concat(lng("empty"),":").concat(lng("new"),")"),searchData:function(e,n){(0,m.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",cross_domain:1,term:e.term,admins:"omit",choose_domain:t.values.get("domain")}},n)},searchDataCacheFunc:function(e){return(0,d.SZ)(Object.assign({domain:t.values.get("domain")},e))}},{type:"checkbox",name:"is_power",label:lng("set as power user"),value:1}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("users/connect_multi_user",Object.assign({user_id:this.user_id},e))}}])&&da(t.prototype,n),r&&da(t,r),i}(Jt.I),va=(0,r.observer)((function(e){var t=e.userStore,n=t.slaves,r=t.disconnectMultiUser,o=t.user_id,i=["#",lng("user"),lng("domain"),""],a=[{icon:"new",action:function(){return(0,v.vm)().openDialog("form",new ya({data:{user_id:o},onSaveSuccess:function(e){return(0,v.vm)().closeDialog(),n.push(e)}}))},toolTip:lng("add a connected user")}];return(0,_.tZ)(jn.iA,{cols:i,rowIdCol:"user_id",collection:n,RowRenderer:_a,compact:!0,noWindow:!0,rowProps:{disconnectMultiUser:r},actions:a,mobileSupport:!0})})),_a=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=t.user_id,o=t.user_name,i=t.domain_name,a=t.can_remove,l=n.disconnectMultiUser,s=[r,{type:"main",_:(0,_.tZ)(p.A,{href:{user:r},newTab:!0,children:"".concat((0,d.v2)(t)," (").concat(o,")")})},i,{type:"icons",_:a?(0,_.tZ)(u.JO,{icon:"mark_x",toolTip:lng("remove"),onClick:function(){return(0,Tn.BB)(lng("are you sure you want to disconnect this user?").caps(),{onConfirm:function(){return l(t)}})}}):lng("auto by identity number").caps()}];return(0,_.tZ)(jn.lF,{tds:s})})),wa=n(33346);var Oa=(0,o.iv)("overflow-y:auto;padding:15px;>*{margin:15px;}& ._detail_section{border-top:1px solid ",i.g.colors.separator_light,";padding-top:15px;}._avatar{display:flex;margin-top:20px;justify-content:center;>div{border:6px solid white;box-sizing:content-box;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);border-radius:50%;}}._full_name,._org_unit,._contact{text-align:center;}._full_name{",i.g.classes.widget_title,";margin-top:13px;}._org_unit{a[href]{color:",i.g.colors.link_blue,";&:hover{color:",i.g.colors.link_blue_hover,";}}}._contact{margin-top:0.7em;}._deleted{color:",i.g.colors.warning,";text-align:center;}",i.g.mQuery.mobile,"{width:100%;}",""),ka=(0,r.observer)((function(e){var t=e.userStore,n=t.basicDetails,r=n.org_unit_id,o=n.org_unit_name,i=n.user_about,l=t.user_id,s=t.isSelf,f=t.direct_manager,m=t.userDetails,h=t.deleted,b=t.canEdit,v=(0,a.useRef)(null);return(0,_.tZ)(ot.d,{ref:v,from:"side",onClose:function(){return t.basicDetailsWidgetSpread=!1},scroll:!0,children:(0,_.tZ)(g.W2,{head:(0,_.tZ)(g.$0,{title:lng("more information"),onClose:function(){return v.current.close()}}),stickyHead:!0,children:(0,_.BX)("div",{css:Oa,children:[(0,_.tZ)("div",{className:"_avatar",children:(0,_.tZ)(c.qE,{user:t.basicDetails,size:"152px",shadowed:!0,balloon:!1})}),(0,_.BX)("div",{className:"_full_name",children:[(0,d.v2)(t.basicDetails),h&&(0,_.BX)("span",{className:"_deleted",children:[" (",lng("deleted").caps(),")"]})]}),r&&(0,_.BX)("div",{className:"_org_unit",children:[(0,_.tZ)(p.A,{href:Blsm.user.isPowerManager?{edit:"workspace",id:r}:void 0,toolTip:lng("org' unit"),children:o}),f.user_id&&(0,_.BX)(_.HY,{children:[" (",(0,_.tZ)(Nt.DL,{user:f,toolTip:lng("direct manager")}),")"]}),(Blsm.user.isPowerManager||s||b)&&(0,_.tZ)(u.JO,{icon:"history",smallButtonLike:!0,onClick:function(){t.OUHistory||t.loadOUHistory(),(0,Tn.qR)((0,_.tZ)(Pa,{store:t,OU:t.basicDetails.org_unit_id,currentOU:t.basicDetails.org_unit_name}),{title:lng("org' unit history"),width:"min(100vw, 800px)"})},toolTip:lng("view org' units history").caps()})]}),!s&&!h&&(0,_.BX)("div",{className:"_contact",children:[(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,p.p4)({message:"new",params:{to:l}},!0)},children:lng("message").caps()})," ",void 0!==window.bchat&&(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return window.bchat.openChat(l)},children:lng("chat").caps()})]}),(0,_.tZ)(ja,{details:m,user_about:i})]})})})})),xa={name:"1jj7er4",styles:"padding:15px"},Sa={name:"1v99fnz",styles:"padding:15px;white-space:pre-line"},ja=(0,r.observer)((function(e){var t=e.details,n=e.user_about;return(0,_.BX)(_.HY,{children:[(t||[]).map((function(e){var t=e.label,n=e.fields;return(0,_.tZ)(wa.fM,{toggleTitle:t,toggle:!0,addMargin:!1,children:(0,_.tZ)("div",{css:xa,children:(0,_.tZ)(jn.VD,{pairs:n})})},t)})),n&&(0,_.tZ)(wa.fM,{toggleTitle:lng("about user"),toggle:!0,addMargin:!1,children:(0,_.tZ)("div",{css:Sa,children:n})})]})})),Ca=(0,o.iv)("._org_unit{a[href]{color:",i.g.colors.dominant_main,";}}",""),Pa=(0,r.observer)((function(e){var t=e.store,n=t.OUHistory,r=t.basicDetails,o=t.direct_manager,i=r.org_unit_id,a=r.org_unit_name,l=[{title:lng("org' unit").caps()},{title:lng("date").caps()},{title:lng("action").caps()},{title:lng("note").caps()}];return(0,_.BX)("div",{css:Ca,children:[i&&(0,_.tZ)(g.uD,{children:(0,_.BX)("div",{className:"_org_unit",children:[lng("current org' unit").caps(),": ",(0,_.tZ)(p.A,{href:Blsm.user.isPowerManager?{edit:"workspace",id:i}:void 0,toolTip:lng("org' unit"),children:a}),o.user_id&&(0,_.BX)(_.HY,{children:[" (",(0,_.tZ)(Nt.DL,{user:o,toolTip:lng("direct manager")}),")"]})]})}),(0,_.tZ)(jn.iA,{cols:l,collection:n,RowRenderer:Za})]})})),Za=function(e){var t=e.row,n=t.group_name,r=t.log_time,o=t.log_type,i=t.log_note;return(0,_.BX)("tr",{children:[(0,_.tZ)(Cn.U6,{children:n}),(0,_.tZ)("td",{children:(0,d.ey)(r)}),(0,_.tZ)("td",{children:"JOIN"===o?lng("joined"):"LEAVE"===o?lng("left|verb"):o}),(0,_.tZ)("td",{children:i||null})]})},Ba=n(84268);function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Ia(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e){return function(e){if(Array.isArray(e))return Aa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ia(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ia(e,t){if(e){if("string"==typeof e)return Aa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Aa(e,t):void 0}}function Aa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Da=(0,o.iv)("position:relative;color:",i.g.colors.text_sec,";padding:20px 10px;>._children{display:flex;flex-direction:column;height:100%;}._avatar{display:flex;justify-content:center;>div{border:6px solid white;box-sizing:content-box;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);border-radius:50%;}}._full_name,._org_unit,._contact{text-align:center;}._full_name{",i.g.classes.widget_title,";margin-top:13px;}._about_user{padding:10px;margin:10px;}._org_unit{a[href]{color:",i.g.colors.link_blue,";&:hover{color:",i.g.colors.link_blue_hover,";}}}._contact{margin-top:0.7em;}._deleted{color:",i.g.colors.warning,";text-align:center;}",i.g.mQuery.mobile,"{width:100%;}.RoundIconBatch{display:flex;justify-content:center;padding:30px 0 10px;flex-wrap:wrap;column-gap:11px;row-gap:11px;}",""),Ra=(0,r.observer)((function(e){var t,n,r,o=e.userStore,a=o.basicDetails,l=a.org_unit_id,s=a.org_unit_name,u=o.user_id,f=o.isSelf,m=o.direct_manager,g=o.userDetails,h=o.deleted,b=o.actionIcons,v=[],w=[];return g.forEach((function(e){var t,n,r=e.fields;"monitor"===e.id?(t=w).push.apply(t,Ea(r)):(n=v).push.apply(n,Ea(r))})),v=(0,d.KX)(v,4),w=(0,d.KX)(w,3),(0,_.BX)(Tr.h,{css:Da,children:[(0,_.tZ)("div",{className:"_avatar",children:(0,_.tZ)(c.qE,{user:o.basicDetails,size:"100px",shadowed:!0,balloon:!1})}),(0,_.BX)("div",{className:"_full_name",children:[(0,d.v2)(o.basicDetails),h&&(0,_.BX)("span",{className:"_deleted",children:[" (",lng("deleted").caps(),")"]})]}),l&&(0,_.BX)("div",{className:"_org_unit",children:[(0,_.tZ)(p.A,{href:Blsm.user.isPowerManager?{edit:"workspace",id:l}:void 0,toolTip:lng("org' unit"),children:s}),m.user_id&&(0,_.BX)(_.HY,{children:[" (",(0,_.tZ)(Nt.DL,{user:m,toolTip:lng("direct manager")}),")"]})]}),!f&&!h&&(0,_.BX)("div",{className:"_contact",children:[(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,p.p4)({message:"new",params:{to:u}},!0)},children:lng("message").caps()})," ",void 0!==window.bchat&&(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return window.bchat.openChat(u)},children:lng("chat").caps()})]}),(0,_.tZ)(Gt.bV,{icons:b,size:35,className:"action_icons"}),v.length>0&&(0,_.tZ)(Ma,{profileFields:v[0]}),w.length>0&&(0,_.tZ)(Ma,{profileFields:w[0]}),(0,_.tZ)(Ht.c_,{style:{justifyContent:"center"},children:(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return o.basicDetailsWidgetSpread=!0},style:(t={position:"relative",top:"5px"},n=i.g.near,r="5px",n in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,t),children:lng("see all details").caps()+"..."})})]})})),Na=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:140;return(0,o.iv)("white-space:pre-line;max-height:",e,'px;transition:max-height 0.15s ease-out;overflow:hidden;position:relative;&:after{content:"";position:absolute;background-image:linear-gradient(to bottom, transparent, ',i.g.colors.bg_cont,");height:2em;bottom:0;left:0;right:0;}&._opened{height:auto;overflow:auto;max-height:unset;transition:max-height 0.25s ease-in;&:after{content:none;}}","")},za=((0,r.observer)((function(e){var t=e.user_about,n=e.maxHeight,r=e.mouse,o=Ta((0,a.useState)(!1),2),i=o[0],l=o[1],s=(0,f.Xf)(500,(function(){return l(!0)}),(function(){return l(!1)})).events;return(0,_.tZ)("div",{css:Na(n),className:(0,d.AK)({_opened:r&&i}),onMouseEnter:s.onMouseEnter,onMouseLeave:s.onMouseLeave,children:t})})),(0,o.iv)("margin-top:10px;padding:10px;border-top:1px solid ",i.g.colors.separator_light,";>div{margin-top:10px;>.label{font-size:0.8em;}>.value{color:",i.g.colors.text_main,";}}","")),Ma=function(e){var t=e.profileFields;return(0,_.tZ)("div",{css:za,children:t.map((function(e,t){var n=Ta(e,2),r=n[0],o=n[1];return(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"label",children:r.caps()}),(0,_.BX)("div",{className:"value",children:["string"==typeof o&&o,o.icon&&(0,_.tZ)(u.JO,{icon:o.icon})]})]},t)}))})},Fa=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=[lng("form name"),lng("date started"),lng("current approver"),lng("approval status")].map((function(e){return e.caps()}));return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)(jn.iA,{cols:r,rowIdCol:"performance_id",collection:n,RowRenderer:qa,compact:!0,noWindow:!0,mobileSupport:!0})]})})),qa=(0,r.observer)((function(e){var t=e.row,n=t.lesson_name,r=t.performance_date,o=t.status,i=[{type:"main",_:n},{_:(0,_.tZ)(G.qp,{time:r})},(0,d.v2)(t),null==o?void 0:o.caps()];return(0,_.tZ)(jn.lF,{tds:i})})),Xa=n(18621),La=(0,r.observer)((function(e){var t=e.title,n=e.collection,r=e.store,o=[lng("name"),lng("required days"),lng("planned days"),lng("completed days"),lng("remaining days"),lng("member of group")],i=[{icon:"new",action:function(){return(0,v.vm)().openDialog("form",new Xa.Z({userMode:!0,user_id:r.user_id,onSaveSuccess:function(){(0,v.vm)().closeDialog(),r.fetch()}}))}}];return(0,_.BX)(_.HY,{children:[t&&(0,_.tZ)(g.uD,{children:t.caps()}),(0,_.tZ)(jn.iA,{cols:o,actions:i,collection:n,RowRenderer:Ua,compact:!0,noWindow:!0})]})})),Ua=(0,r.observer)((function(e){var t=e.row,n=t.group_name,r=t.required_days,o=t.planned_days,a=t.completed_days,l=t.remaining_days,s=t.member_of_group,c=t.first_date,p=t.user_id,d=t.group_id,f=[{type:"main",_:n},r,{style:{color:parseInt(o)>=parseInt(r)?i.g.colors.positive:i.g.colors.negative},_:o},a,l,{_:(0,_.BX)(_.HY,{children:["1"===s&&(0,_.tZ)(u.JO,{icon:"mark_v"})," ",(0,_.tZ)(G.qp,{time:c,showTime:!1})]})}];return(0,_.tZ)(jn.lF,{tds:f,onClick:function(){return(0,v.vm)().openDialog("form",new Xa.Z({userMode:!0,user_id:p,group_id:d,onSaveSuccess:function(){(0,v.vm)().closeDialog(),(0,v.vm)().getStore("user",p).fetch()}}))}})})),Va=n(37137),Ha=n(71612),Ga=n(2645),Ja=n(25562),Wa=n(7477),Ka=n(5293);function $a(e){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ya(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qa(e,t){return(Qa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function el(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nl(e);if(t){var o=nl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tl(this,n)}}function tl(e,t){return!t||"object"!==$a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function nl(e){return(nl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var rl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qa(e,t)}(i,e);var t,n,r,o=el(i);function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e);var r=e.approverData,a=null==r||null===(t=r.approver_options)||void 0===t?void 0:t.map((function(e){return{val:e.id,label:"[#".concat(e.id,"] ").concat(e.label)}}));return n.confirmButtonLabel=lng("register").caps(),n.title=e.group_name.caps(),n._fields=[{type:"hidden",name:"group_id",required:!0},{type:"hidden",name:"action",required:!0},{type:"textarea",name:"message",label:lng("you may enter additional text")},{type:"select",name:"chosen_approver_id",label:lng("you may choose the approver"),options:a,insert:(null==a?void 0:a.length)>0}],n._prepFields(e),n.ready=!0,n}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("registration/action",e)}}])&&Ya(t.prototype,n),r&&Ya(t,r),i}(Jt.I);function ol(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function il(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ol(Object(n),!0).forEach((function(t){al(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ol(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function al(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ll(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return sl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return sl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function sl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var cl=(0,o.iv)(".close{color:",i.g.colors.text_sec,";}.title{font-size:1.3rem;color:",i.g.colors.text_main,";font-weight:700;margin-bottom:10px;}.select-instance{font-size:1.1em;color:",i.g.colors.text_main,";margin-bottom:10px;}.sub-title{font-size:1.2em;color:",i.g.colors.text_main,";margin:10px 0;font-weight:600;}.description{margin-top:16px;color:",i.g.colors.text_sec,";}.row{position:relative;display:flex;}.description-text{color:#92929D;}.register-btn{flex-grow:2;font-size:1.1em;}.showMore-btn{flex-grow:1;margin-inline-start:10px;}.course-field{margin:10px auto;}",""),ul=(0,r.observer)((function(e){var t,n,r,o,i=e.onClose,l=e.info,c=e.activeTab,d=(0,a.useContext)(Ga.wV),f=function(e){var t,n;if(d.anonymous){var r="login?hash=cregistration/"+e.group_id,o="register?domain="+e._attr.domain_id,i=Blsm.prm.registrable_domains.indexOf(e._attr.domain_id)>-1;(0,Tn.qR)((0,_.BX)("div",{children:[lng("to register to this course please").caps()," ",(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return(0,p.p4)(r,!0)},children:lng("login")}),i&&(0,_.BX)("div",{children:[(0,_.tZ)("b",{children:lng("if you do not have a login, sign up").caps()})," ",(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return(0,p.p4)(o,!0)},children:lng("register")})]})]}),{closeText:lng("close"),title:lng("you are not logged in!")})}else{var a=null;switch(e.statusInfo.action){case"join":a={text:lng('are you sure you want to join "%s"?',{phrase:!0,replace:e.group_name}),title:lng("you joined successfully").caps(),msg:"".concat(lng("go to the workspace").caps(),' "').concat(e.group_name,'"'),onClick:function(){return(0,p.p4)({workspace:e.group_id},!0)}};break;case"join_waiting_list":a={text:lng('are you sure you want to join "%s" waiting list?',{phrase:!0,replace:e.group_name}),msg:lng("you joined the waiting list").caps()};break;case"leave":a={text:lng('are you sure you want to leave "%s"?',e.group_name),msg:lng('you left "%s"',e.group_name).caps()};break;case"leave_waiting_list":a={text:lng('are you sure you want to leave "%s" waiting list?',e.group_name),msg:lng("you left the waiting list").caps()};break;case"cancel_request":a={text:lng("are you sure you want to cancel the registration request?"),msg:lng("registration request canceled").caps()};break;case"register":null!==(t=d.options)&&void 0!==t&&null!==(n=t.general_options)&&void 0!==n&&n.disable_req_text?a={text:lng('are you sure you want to register to "%s"?',e.group_name),msg:lng("registration request sent and is waiting for approval").caps()}:(0,v.vm)().openDialog("form",new rl({group_id:e.group_id,group_name:e.group_name,action:e.statusInfo.action,approverData:e.approver_data,onSaveSuccess:function(){(0,v.vm)().closeDialog(),(0,Po.qV)(lng("registration request sent and is waiting for approval")),d.fetch()}}));break;case"manageMembers":d.setActive(e.group_id);break;case"buy":(0,m.SC)("registration/begin_paypal_purchase",{data:{id:e.group_id,type:"group",name:e.group_name},method:"POST"},(function(e){return(0,p.p4)(e.redirect_url,!0)}))}a&&(0,Tn.BB)(a.text,{onConfirm:function(){return(0,m.SC)("registration/action",{data:{group_id:e.group_id,action:e.statusInfo.action},method:"POST"},(function(){d.fetch(),(0,Po.LB)(a)}))}})}},h=(0,a.useRef)(null),b=l.menuOptions,w=l.statusInfo,O=ll((0,a.useState)(null),2),k=O[0],x=O[1],S=l.typeName||(0,Do.p)(null===(t=l._attr)||void 0===t?void 0:t.group_type,null===(n=l._attr)||void 0===n?void 0:n.is_course),j=l.isTemplate&&"reg_to_template"!==l.attr("registration_type")?lng("select course instance"):"manager"===l.tab?lng("manage your users in this %s|course",S):lng("apply for %s|course",S);return(0,_.tZ)(ot.d,{from:"side",onClose:i,ref:h,scroll:!0,refDrawerBody:x,children:(0,_.tZ)(g.W2,{head:(0,_.tZ)(g.$0,{title:j,onClose:function(){return h.current.close()},headExtra:(0,_.tZ)(jt.jC,{color:null===(r=l.statusInfo)||void 0===r?void 0:r.cardColor,children:null===(o=l.statusInfo)||void 0===o?void 0:o.selfText})}),stickyHead:!0,children:(0,_.BX)("div",{css:cl,children:[(0,_.BX)("div",{className:"row",children:[(0,_.tZ)("span",{className:"title",children:l.title}),(0,_.tZ)(Ht.zh,{}),b&&(0,_.tZ)(s.x,{className:"_menu",options:b,children:(0,_.tZ)(u.JO,{icon:"menu"})})]}),l.category&&(0,_.tZ)("span",{children:l.category}),"manager"!==c||l.registerNumbers.instances.length>0?(0,_.BX)("div",{children:[!l.haveInstances&&(0,_.tZ)("div",{className:"sub-title",children:lng("details").caps()}),(0,_.tZ)(Ja.RN,{courseInfo:l}),!l.haveInstances&&(0,_.tZ)(Ja.Td,il({},l.registerNumbers)),l.haveInstances?l.registerNumbers.instances.map((function(e){return(0,_.tZ)(dl,{instance:e,onSelectAction:f},e.group_id)})):w&&(0,_.tZ)("div",{className:"row",children:(0,_.tZ)(y.l,{disabled:!w.action,className:"register-btn ".concat(null==w?void 0:w.selfButtonClass),theme:"contained",onClick:function(){return f(l)},children:lng(w.selfButtonText).caps()})})]}):(0,_.tZ)("div",{children:(0,_.tZ)(Ja.RN,{courseInfo:l})}),"manager"===c&&!l.haveInstances&&(0,_.tZ)(ml,{drawerBody:k,info:l})]})})})})),pl=(0,o.iv)("border:1px solid ",i.g.colors.separator,";border-radius:7px;padding:17px 24px;margin-bottom:16px;font-size:14px;.title{font-size:18px;}.status-n-numbers{padding-top:10px;padding-right:16px;margin-top:11px;margin-bottom:23px;}",""),dl=function(e){var t,n=e.instance,r=e.onSelectAction,o=n.group_name,i=n.description,l=n.statusInfo,s=n.registerNumbers,c=n.activityDates,u=n.estimated_cost_for_member,p=n.registrationDates,f=(0,d.s9)(i.text,70),m=ll((0,a.useState)(!1),2),g=m[0],h=m[1],b=g?lng("less information").caps():lng("more information").caps();return(0,_.BX)("div",{css:pl,children:[(0,_.BX)("div",{className:"row",children:[(0,_.tZ)("span",{className:"title",children:o}),(0,_.tZ)(Ht.zh,{})]}),i.text&&!g&&(0,_.tZ)("div",{className:"description-text",onClick:function(){return h(!g)},children:f}),c&&!g&&(0,_.tZ)(Ja.L0,{title:lng("activity dates"),className:"course-field",start:c.start,end:c.end}),"FUTURE_REGISTRATION"===(null==l?void 0:l.status)&&(0,_.tZ)(Ja.L0,{title:lng("registration dates"),className:"course-field",start:p.start,end:p.end}),u&&!g&&(0,_.BX)("div",{className:"course-field",children:[lng("estimated cost").caps(),": ",(0,_.tZ)("span",{className:"description-text",children:u})]}),g&&(0,_.tZ)(Ja.RN,{courseInfo:n}),(0,_.BX)("div",{className:"status-n-numbers row",children:["manager_register"!==n._attr.group_access&&(0,_.tZ)("div",{children:(0,_.tZ)(jt.jC,{color:null==l?void 0:l.cardColor,children:null==l?void 0:l.selfText})}),(0,_.tZ)(Ja.Jx,{inLine:!0,text:lng("members").caps(),number:s.members}),(0,_.tZ)(Ja.Jx,{inLine:!0,text:lng("remaining places").caps(),number:s.remainingPlaces})]}),(0,_.BX)("div",{className:"row",children:[l&&(0,_.tZ)(y.l,{className:"register-btn",disabled:!l.action,theme:"contained",onClick:function(){return r(n)},children:null==l||null===(t=l.selfButtonText)||void 0===t?void 0:t.caps()}),n.displayCourseFieldsBtn&&(0,_.tZ)(y.l,{className:"showMore-btn",theme:"outlined",onClick:function(){return h(!g)},children:b})]})]})},fl={name:"7mkb9f",styles:".addBtn,.removeBtn{display:block;margin:5px;}"},ml=function(e){var t=e.info,n=(0,a.useContext)(Ga.wV),r=n.newMembers,o=n.addNewMembers,i=n.handleSelectNewMember,l=n.group_close_date,s=n.group_open_date,c=t.group_id,u=ll((0,a.useState)("new"),2),p=u[0],d=u[1];0===n.existingMembers.length&&0===n.waitingRequests.length&&n.fetchMembers(c);var f=[{val:"new",label:lng("member list")},{val:"waiting",label:lng("waiting request")},{val:"existing",label:lng("registered members")}];return(0,_.BX)("div",{css:fl,children:[(0,_.tZ)(it.m,{tabs:f,activeTab:p,onSelect:function(e){return d(e)}}),"new"===p&&(0,_.tZ)(vl,{group_id:c,handleSelectNewMember:i,addNewMembers:o,newMembers:r,start:s,end:l}),["waiting","existing"].includes(p)&&(0,_.tZ)(gl,{type:p,members:"waiting"===p?n.waitingRequests:n.existingMembers,group_id:c})]})},gl=(0,r.observer)((function(e){var t=e.type,n=e.members,r=e.group_id;return(0,_.BX)(_.HY,{children:[(0,_.tZ)(jn.iA,{collection:n,RowRenderer:"new"===t?bl:hl,rowIdCol:"user_id",rowProps:{removeNewUser:function(e){n.remove(e)}},noWindow:!0,showBar:!1}),"existing"===t&&n.length>0&&(0,_.tZ)(y.l,{className:"removeBtn",theme:"contained",onClick:function(){var e=n.filter((function(e){return e._checked}));0!==e.length&&(0,Tn.BB)(lng("are you sure you want to delete the selected members?"),{onConfirm:function(){(0,m.SC)("registration/departmental_remove_members",{data:{members:e.map((function(e){return e.user_id})),workspace:r}},(function(){return n.replace(n.filter((function(e){return!e._checked})))}))}})},children:lng("remove selected members").caps()})]})})),hl=(0,r.observer)((function(e){var t=e.row,n=t.full_name,r=t.org_unit_name,o=t.isNew,i=t.addition_time,a=t.request_date,l=t.approver_name;return(0,_.BX)("tr",{children:[(0,_.tZ)("td",{children:n}),(0,_.tZ)("td",{children:r}),(0,_.BX)("td",{children:[(0,_.tZ)(G.qp,{time:i})," ",o&&lng("new").caps()]}),(0,_.tZ)("td",{children:(0,_.tZ)(G.qp,{time:a})}),(0,_.tZ)("td",{children:l}),(i||o)&&(0,_.tZ)(Cn.Fo,{o:t})]})})),bl=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=t.full_name,a=t.group_name,l=t.statusInfo,s=t.canJoin,c=t.result,p=n.removeNewUser;return(0,_.BX)("tr",{children:[(0,_.tZ)("td",{children:(0,_.tZ)(u.JO,{icon:"close",buttonLike:!0,toolTip:lng("remove user"),onClick:function(){return p(t)}})}),(0,_.tZ)("td",{children:r}),(0,_.tZ)("td",{children:a}),(0,_.tZ)("td",{children:(0,_.tZ)(jt.jC,{color:s?i.g.colors.positive:i.g.colors.negative,children:l.departmental})}),(0,_.tZ)("td",{children:(0,_.tZ)("span",{css:(0,o.iv)({color:c.color},"",""),children:null==c?void 0:c.label})})]})})),yl={name:"1r0yqr6",styles:"margin-top:10px"},vl=(0,r.observer)((function(e){var t=e.group_id,n=e.handleSelectNewMember,r=e.newMembers,o=e.addNewMembers,i=e.start,l=e.end,s=ll((0,a.useState)(""),2),c=s[0],u=s[1],p=ll((0,a.useState)(!1),2),f=p[0],g=p[1],h=(0,a.useCallback)((0,d.pR)((function(e,n){return(0,m.SC)("registration/departmental_users_autocomplete/"+t,{data:{term:e,exclude:r.map((function(e){return e.user_id}))}},n)})),[]);return(0,_.BX)("div",{css:yl,children:[(0,_.tZ)(Ja.L0,{title:lng("activity dates"),start:i,end:l}),(0,_.BX)(Ht.c_,{children:[(0,_.tZ)("div",{style:{flexGrow:1},children:(0,_.tZ)(Ka.n2,{label:lng("find your users"),filled:!!c,focused:f,children:(0,_.tZ)(Wa.Q,{getData:h,onTextChange:u,onSelect:n,onFocus:function(){return g(!0)},onBlur:function(){return g(!1)}})})}),Blsm.isFeatureEnabled("manager_registration_self_add")&&!(null!=r&&r.find((function(e){return(0,d.Tz)(e.user_id)})))&&(0,_.tZ)(y.l,{theme:"contained",onClick:function(){(0,m.SC)("registration/get_status",{data:{user_id:Blsm.user.id,workspace_id:t}},(function(e){var t={user_id:Blsm.user.id,full_name:(0,d.v2)(Blsm.user),group_name:lng("myself").caps(),status:e,poster:Blsm.user.user_avatar};n(t)}))},style:{display:"inline-flex",alignItems:"center"},children:lng("add myself").caps()})]}),r&&(0,_.tZ)("div",{style:{maxHeight:"64vh",overflow:"auto"},children:(0,_.tZ)(gl,{type:"new",members:r,group_id:t})}),r.length>0&&(0,_.tZ)(y.l,{className:"addBtn",theme:"contained",onClick:o,children:lng("register selected users").caps()})]})})),_l=n(62366);function wl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ol(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?wl(Object(n),!0).forEach((function(t){kl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function kl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var xl=(0,a.lazy)((function(){return Promise.all([n.e(287),n.e(94)]).then(n.bind(n,61112)).then((function(e){return{default:e.FullCalendarWrapperInner}}))})),Sl=l().forwardRef((function(e,t){return(0,_.tZ)(a.Suspense,{fallback:(0,_.tZ)(zt.$,{}),children:(0,_.tZ)(xl,Ol(Ol({},e),{},{ref:t}))})}));Sl.displayName="FullCalendarWrapper";var jl=n(25690);function Cl(e){return function(e){if(Array.isArray(e))return Bl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Zl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Zl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zl(e,t){if(e){if("string"==typeof e)return Bl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Bl(e,t):void 0}}function Bl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tl={month:"dayGridMonth",week:"timeGridWeek",day:"timeGridDay"},El=(0,r.observer)((function(){var e,t=(0,a.useContext)(v.l9).getStore("cregistration");if((0,d.Ju)(lng("catalog",{phrase:!0})),!t.ready)return(0,_.tZ)(Xt.h,{});var n=t.tabs,r=t.activeTab;return(0,_.tZ)(Ga.wV.Provider,{value:t,children:(0,_.BX)(rt.T,{contBG:!0,children:[(0,_.tZ)(Lt.v7,{headline:lng("catalog",{phrase:!0}),noGradient:!0,banner:(null==t||null===(e=t.options)||void 0===e?void 0:e.catalog_page_poster)||"",tabs:{tabs:n,activeTab:r,onSelect:function(e){return t.activeTab=e}},actions:Blsm.user.isPowerManager&&(0,_.tZ)(u.JO,{icon:"settings",toolTip:lng("courses management").caps(),href:{edit:"courses_management"},buttonLike:!0})}),(0,_.tZ)(Il,{})]})})})),Il=(0,r.observer)((function(){var e,t,n,r=(0,a.useContext)(Ga.wV),o=(0,f.qD)(r.filters),i=o.filtersVals,l=o.setFilterVals,s=o.sort,c=o.setSort,u=(0,a.useRef)(null),p=Pl((0,a.useState)(""),2),m=p[0],g=p[1],h=Pl((0,a.useState)("month"),2),b=h[0],y=h[1],v=r.activeTab,w=r.sections,O=r.groupInfo,k=r.view,x=[{name:"group_name",label:lng("search by name"),type:"search",outOfMenu:!0,wrapped:!0},(null===(e=r.classifications)||void 0===e?void 0:e.length)>0&&{name:"classification_name",maxLabelLength:20,outOfMenu:!0,wrapped:!0,label:lng("classification"),options:Cl((0,d.wd)(r.classifications)),type:"select_multi"},(null===(t=r.statuses)||void 0===t?void 0:t.length)>0&&{name:"status",maxLabelLength:20,outOfMenu:!0,wrapped:!0,label:lng("status"),options:Cl((0,d.wd)(r.statuses)),type:"select_multi"},(null===(n=r.tags)||void 0===n?void 0:n.length)>0&&{name:"tags",maxLabelLength:20,outOfMenu:!0,wrapped:!0,label:lng("tags"),options:Cl((0,d.wd)(r.tags)),type:"select_multi"},{name:"group_open_date",outOfMenu:!0,wrapped:!0,label:lng("from date"),type:"date"},{name:"group_close_date",outOfMenu:!0,wrapped:!0,label:lng("to date"),type:"date"},{name:"has_allocation",label:lng("allocated for my org' unit"),type:"checkbox"}],S=[{val:"",label:lng("default")},{val:"sorting_date",label:lng("open date")}];return(0,_.BX)(Ba.Q,{children:[(0,_.tZ)(qt.CX,{filters:x,filtersVals:i,onFilter:l,sorts:S,sort:s,onSort:c,spreadFilters:!0,extraComponent:(0,_.tZ)(Dl,{}),alwaysShow:!0,zIndex:2}),"calendar"!==k?"sorting_date"===s.by?(0,_.tZ)(ql,{regStore:r,activeTab:v,view:k}):(0,_.tZ)(Nl,{sections:w,activeTab:v,compactView:"list"===k}):(0,_.BX)(_.HY,{children:[(0,_.tZ)("br",{}),(0,_.tZ)(Fl,{workspaces:r.extractSchedule(r.workspaces)}),(0,_.tZ)(jl.A,{goPrev:function(){return u.current.prev()},goNext:function(){return u.current.next()},goToday:function(){return u.current.today()},viewType:b,onChangeViewType:function(e){return u.current.changeView(Tl[e]),y(e)},title:m}),(0,_.tZ)(Sl,{ref:u,noHeader:!0,height:"calc(100vh - 325px)",events:r.asEvents,eventClick:function(e){return r.setActive(e.event.ect_id?"e"+e.event.ect_id:e.event.group_id)},viewType:Tl[b],onChange:function(e){return g(e.title)}},v)]}),O&&!O.ect_id&&(0,_.tZ)(ul,{info:O,activeTab:v,onClose:function(){return r.setActive(null)}}),O&&O.ect_id&&(0,_.tZ)(_l.G,{user_id:O.user_id,ect_id:O.ect_id,onClose:function(){return r.setActive(null)}})]})})),Al=[{val:"tiles",label:lng("tiles"),icon:"view_tiles"},{val:"list",label:lng("list"),icon:"view_list"},{val:"calendar",label:lng("calendar"),icon:"calendar"}],Dl=(0,r.observer)((function(){var e=(0,a.useContext)(Ga.wV),t={};return t["margin"+i.g.near.caps()]="20px",(0,_.tZ)("div",{style:t,children:(0,_.tZ)(s.x,{options:Al,onSelect:function(t){return e.view=t},title:lng("display"),children:(0,_.tZ)(u.JO,{icon:{list:"view_list",calendar:"calendar",tiles:"view_tiles"}[e.view]})})})})),Rl=(0,o.iv)(".no_courses{color:",i.g.colors.grey_1,";text-align:center;padding-top:60px;font-size:1.3em;text-transform:uppercase;}",""),Nl=function(e){var t=e.sections,n=e.activeTab,r=e.compactView,o=[];for(var i in t)switch(n){case"self":["external","available","pending","registered"].includes(i)&&o.push(t[i]);break;case"manager":"manager"===i&&o.push(t[i])}var a=0;return o.forEach((function(e){var t;return a+=(null==e||null===(t=e.courses)||void 0===t?void 0:t.length)||0})),(0,_.tZ)("div",{css:Rl,children:a?o.map((function(e){var t=e.classifications,o=e.courses,i=e.title,a=[];return t&&(a=Object.keys(t).sort((function(e,t){return e.localeCompare(t,void 0,{sensitivity:"accent"})}))).push(a.splice(a.indexOf("others"),1)[0]),0===(null==o?void 0:o.length)?null:(0,_.tZ)("div",{children:t?(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{mainTitle:!0,title:i,count:null==o?void 0:o.length}),a.map((function(e){var o;return(null===(o=t[e])||void 0===o?void 0:o.length)>0&&(0,_.tZ)(zl,{courses:t[e],activeTab:n,compactView:r,title:"others"===e?lng("other classifications").caps():e},e)}))]}):(0,_.tZ)(zl,{courses:o,activeTab:n,compactView:r,title:i})},i)})):(0,_.BX)("div",{className:"no_courses",children:[(0,_.tZ)(u.JO,{icon:"mng_courses"})," ",lng("no courses").caps()]})})},zl=function(e){var t=e.courses,n=e.activeTab,r=e.compactView,o=e.title,i=e.useCarousel;return(0,_.tZ)(Zr.TY,{useCarousel:void 0===i?!r:i,floatingControls:!0,workspaces:t,page:"registration",activeTab:n,title:o,count:null==t?void 0:t.length,mainTitle:!0,compactView:r})},Ml=(0,o.iv)("display:flex;margin-top:10px;margin-bottom:10px;>div{padding:0 10px;border-",i.g.near,":1px solid ",i.g.colors.border,";&:first-of-type{border-",i.g.near,":none;}}",""),Fl=function(e){var t=e.workspaces,n=new Map;return t.forEach((function(e){var t;if(null!==(t=e.statusInfo)&&void 0!==t&&t.cardColor){var r=n.has(e.statusInfo.cardColor)?n.get(e.statusInfo.cardColor):new Set;r.add(e.statusInfo.selfText),n.set(e.statusInfo.cardColor,r)}})),0===n.size?null:(0,_.BX)("div",{css:Ml,children:[(0,_.BX)("span",{children:[lng("legend").caps(),": "]}),Cl(n.entries()).map((function(e){return(0,_.BX)("div",{children:[(0,_.tZ)(u.gT,{color:e[0],size:".7em"})," ",(0,_.tZ)("span",{children:Cl(e[1]).join(" / ")})]},e[0])}))]})};function ql(e){var t=e.activeTab,n=e.regStore,r=e.view;return(0,_.BX)("div",{children:[(0,_.tZ)("br",{}),n.dateSorted.length>0&&(0,_.tZ)(zl,{courses:n.dateSorted,activeTab:t,compactView:"list"===r,useCarousel:!1}),n.dateSorted.length>0&&n.noDate.length>0&&(0,_.tZ)(Zr.PQ,{mainTitle:!0,title:lng("without dates"),count:0}),n.noDate.length>0&&(0,_.tZ)(zl,{courses:n.noDate,activeTab:t,compactView:"list"===r,useCarousel:!1})]})}var Xl=n(76259),Ll=n(75151),Ul=(0,o.iv)("font-size:1rem;display:flex;align-items:center;>div{",i.g.classes.margin_far(".5em"),";}",""),Vl=function(e){var t=e.crumbs,n=e.onClick,r=e.idAttr,o=void 0===r?"id":r,i=e.labelAttr,l=void 0===i?"label":i;return(0,_.tZ)("div",{css:Ul,className:"BreadCrumbs",children:t.map((function(e,t){return(0,_.BX)(a.Fragment,{children:[t>0&&(0,_.tZ)(u.JO,{icon:"arrow_far"}),(0,_.tZ)(ve.zx,{onClick:function(){return n(e[o])},theme:ve.zy,children:e[l].caps()})]},e[o])}))})},Hl=n(40236),Gl=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("catalog");if((0,d.Ju)(lng("catalog",{phrase:!0})),!e.ready)return(0,_.tZ)(Xt.h,{});var t=e.haveMyContentPermission,n=e.mayDragFiles,r=e.onFileDrop;return(0,_.tZ)(Xl.s.Provider,{value:e,children:(0,_.BX)(rt.T,{internalScrolling:!0,children:[(0,_.tZ)(Lt.v7,{headline:lng("knowledge center",{phrase:!0}),after_tabs:n()?(0,_.tZ)("div",{children:(0,_.tZ)(mo.Ss,{onDrop:function(e){return r(e)},toolTip:lng("drag files here to add them as shared content")})}):void 0,actions:t()&&(0,_.tZ)(y.l,{theme:"contained",href:{list:"content"},className:"mobile_off",children:lng("my content").caps()})}),(0,_.tZ)(Kl,{})]})})})),Jl=(0,o.iv)("padding-top:4px;",i.g.mQuery.mobile,"{border-bottom:1px solid ",i.g.colors.separator,";transition:max-height .2s ease;max-height:700px;overflow:hidden;",i.g.classes.shadow_strong,";&:not(.expanded){max-height:73px;}}.tags_wrapper{position:relative;.TagsContainer{margin-top:10px;}}",""),Wl=(0,o.iv)(".BreadCrumbs{margin-bottom:18px;}.title{font-size:1.3rem;font-variant-ligatures:no-contextual;font-weight:600;margin:16px 0 10px;}.cat_cards{margin-bottom:15px;>div.cat_card{border:1px solid ",i.g.colors.separator,";width:",i.g.consts.CARD_WIDTH,"px;border-radius:15px;padding:10px 15px;cursor:pointer;background-color:",i.g.colors.bg_cont,";}}",""),Kl=(0,r.observer)((function(){var e=(0,a.useContext)(Xl.s),t=e.loading,n=e.content,r=e.filtersForm,o=e.tags,l=e.skills,s=e.selectedSkills,c=e.toggleSkillSelection,p=e.clearSkillsSelection,f=e.selectedTags,m=e.toggleTagSelection,g=e.clearTagSelection,h=e.tag_categories,b=e.contentCount,y=e.pageSize,v=e.curPage,w=e.subCategories,O=e.categoryBreadCrumbs,k=(0,_.tZ)(Tr.h,{className:(0,d.AK)({expanded:r.expanded}),css:Jl,children:(0,_.BX)(Jt.q3.Provider,{value:r,children:[(0,_.tZ)(wa.au,{input:r.fields}),(0,_.BX)("div",{className:"tags_wrapper",children:[(f.size>0||s.size>0)&&(0,_.tZ)(u.JO,{icon:"clear",toolTip:lng("clear"),onClick:function(){return p(),g()},css:u.y$}),(0,_.tZ)(Lo.r,{justify:!0,title:lng("relevant tags"),children:o.map((function(e){var t=e.tag_id,n=e.tag_name,r=e.times;return(0,_.tZ)(Lo.V,{tag:n,count:r,active:f.has(t),onClick:function(){return m(t)}},t)}))}),(0,_.tZ)(Lo.r,{justify:!0,title:lng("relevant skills"),children:l.map((function(e){var t=e.sk_id,n=e.name;return(0,_.tZ)(Lo.V,{tag:n,active:s.has(t),onClick:function(){return c(t)}},t)}))}),h.map((function(e){var t=e.tags_category_id,n=e.tag_category_name,r=e.tags;return(0,_.tZ)(Lo.r,{justify:!0,title:n,children:r.map((function(e){var t=e.tag_id,n=e.tag_name,r=e.times;return(0,_.tZ)(Lo.V,{tag:n,count:r,active:f.has(t),onClick:function(){return m(t)}},t)}))},t)}))]})]})}),x="";return null!=r&&r.getValue("cat")&&(w||null!=r&&r.getValue("term"))?null!=r&&r.getValue("term")&&(x=lng("maybe it's somewhere else")):x=lng("we looked really hard!"),(0,_.BX)(Ba.Z,{side:k,css:Wl,children:[(null==O?void 0:O.length)>0&&(0,_.tZ)(Vl,{crumbs:O,onClick:function(t){return e.setCategoryId(t)}}),(null==w?void 0:w.length)>0&&!Blsm.isFeatureEnabled("hide_categories_in_knowledge_center")&&(0,_.BX)("div",{style:{overflow:"hidden"},children:[(0,_.tZ)("div",{className:"title",children:null!=r&&r.getValue("cat")?lng("sub categories").caps():lng("categories").caps()}),(0,_.tZ)(Hl.Hl,{className:"cat_cards",vertSpacing:i.g.consts.CARDS_SPACING/2,children:null==w?void 0:w.map((function(t){return(0,_.BX)("div",{className:"cat_card",onClick:function(){return e.setCategoryId(t.id)},children:[(0,_.tZ)(u.JO,{icon:"vendor_master"})," ",t.label.caps()]},t.id)}))})]}),t?(0,_.tZ)(zt.$,{}):(0,_.BX)(_.HY,{children:[n.length<1&&!(w&&(null==r||!r.getValue("term")))&&(0,_.tZ)(_.HY,{children:(0,_.tZ)(ta.M,{title:lng("there is no content to display"),subTitle:x,icon:"digging",button:null!=r&&r.getValue("cat")&&null!=r&&r.getValue("term")?{label:lng("check in all categories"),click:function(){return null==r?void 0:r.updateValue("","cat")}}:null})}),n.length>0&&(0,_.BX)("div",{style:{overflow:"hidden"},children:[(0,_.tZ)("div",{className:"title",children:lng("content").caps()+" ("+b+")"}),(0,_.tZ)(Kr.Mz,{assignments:n,noFilterSort:!0,compactView:!1}),(0,_.tZ)(Ll.t,{pageSize:y,totalItems:b,curPage:v||0,onChange:function(t){return e.curPage=t}})]})]})]})})),$l=n(88918),Yl=n(37659),Ql=n(80919),es=n(64821);var ts=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("library");(0,d.Ju)(lng("digital library",{phrase:!0}));var t=e.tabs,n=e.activeTab,r=e.tabStore(n);return(0,_.tZ)(Ha.W.Provider,{value:e,children:(0,_.BX)(rt.T,{children:[(0,_.tZ)(Lt.v7,{headline:lng("digital library ",{phrase:!0}),tabs:{tabs:t,activeTab:n,onSelect:function(t){return e.activeTab=t}}}),function(e){switch(e){case"cregistration":return(0,_.tZ)(ns,{cregistrationStore:r});case"catalog":return(0,_.tZ)(os,{catalogStore:r});case"ocontent":return(0,_.tZ)(is,{onlineContentStore:r});case"channels":return(0,_.tZ)(rs,{channelStore:r});default:return(0,_.tZ)(cs,{store:r})}}(n)||"",(null==r?void 0:r.sideMenu)&&(0,_.tZ)(ss,{store:r,onClose:function(){return r.toggleSideMenu()}})]})})})),ns=(0,r.observer)((function(e){var t=e.cregistrationStore;if(!t.ready)return(0,_.tZ)(rt.T,{children:(0,_.tZ)(zt.$,{})});var n=t.tabs,r=t.activeTab;return(0,_.BX)(Ga.wV.Provider,{value:t,children:[(0,_.tZ)(it.m,{tabs:n,activeTab:r,onSelect:function(e){return t.activeTab=e},subTabs:!0}),(0,_.tZ)(Il,{})]})})),rs=(0,r.observer)((function(e){var t=e.channelStore,n=t.ready,r=t.channels,o=t.filterNsort,i=t.filtersArr,a=t.sortsArr,l=(0,f.qD)(o),s=l.filtersVals,c=l.setFilterVals,u=l.sort,p=l.setSort;return n?(0,_.BX)(Ba.Q,{children:[(0,_.tZ)(qt.CX,{filters:i,filtersVals:s,onFilter:c,sorts:a,sort:u,onSort:p,spreadFilters:!0}),(0,_.BX)(g.W2,{children:[(0,_.tZ)(Zr.PQ,{title:lng("channels"),mainTitle:!0,count:r.length}),r&&(0,_.tZ)(Hl.Hl,{children:null==r?void 0:r.map((function(e){return(0,_.tZ)(ps,{data:e},e.channel_id)}))})]})]}):(0,_.tZ)(rt.T,{children:(0,_.tZ)(zt.$,{})})})),os=(0,r.observer)((function(e){var t=e.catalogStore;return t.ready?(0,_.tZ)(Xl.s.Provider,{value:t,children:(0,_.tZ)(Kl,{})}):(0,_.tZ)(rt.T,{children:(0,_.tZ)(zt.$,{})})})),is=(0,r.observer)((function(e){var t=e.onlineContentStore,n=t.content,r=t.filtersArr,o=t.filterNsort,i=t.followed_content,a=t.loading,l=(0,f.qD)(o),s=l.filtersVals,c=l.setFilterVals;return t.ready?(0,_.BX)(Ba.Q,{children:[(0,_.tZ)(qt.CX,{spreadFilters:!0,filters:r,filtersVals:s,onFilter:c,minHeight:"70px"}),i.length>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{title:lng("pinned content"),mainTitle:!0,count:i.length}),(0,_.tZ)(Hl.Hl,{children:i.map((function(e){return(0,_.tZ)(jt.xr,{entity:e,playLink:{onClick:function(){return t.toggleSideMenu(e)}},onTitleClick:function(){return t.toggleSideMenu(e)}},e.id)}))})]}),(0,_.tZ)(Zr.PQ,{title:lng("online content"),mainTitle:!0,count:n.length}),a?(0,_.tZ)(zt.$,{}):(0,_.tZ)(Hl.Hl,{children:n.map((function(e){return(0,_.tZ)(jt.xr,{entity:e,playLink:{onClick:function(){return t.toggleSideMenu(e)}},onTitleClick:function(){return t.toggleSideMenu(e)}},e.id)}))})]}):(0,_.tZ)(rt.T,{children:(0,_.tZ)(zt.$,{})})})),as=function(e){return(0,o.iv)(".close{color:",i.g.colors.text_sec,";}.details{background-image:url(",e,");background-repeat:no-repeat;background-size:cover;background-position:top;min-height:250px;padding-top:1rem;display:flex;flex-direction:column;justify-content:space-between;.title{font-size:1.3rem;color:",i.g.colors.text_main,";font-weight:700;padding:10px;background:rgba(240, 240, 240, .85);}.note{margin:10px;}.link-btn{margin:0 auto;font-size:1.2rem;border-left:4px solid white;border-top:4px solid white;border-right:4px solid white;border-radius:10px 10px 0 0;background-color:white;a{border-radius:10px 10px 0 0;}}}.content{padding:0 1rem;.upper-note{color:",i.g.colors.text_sec,";display:flex;align-items:center;font-size:1.2rem;margin:6px 0;}.TagsContainer{padding-top:10px;}.description{margin:16px 0;color:",i.g.colors.text_main,";padding:5px;background:rgba(240, 240, 240, .6);border-radius:10px;}.sub-title{font-weight:600;font-size:1.1rem;}}","")},ls={name:"1otlq80",styles:"font-size:1.3rem"},ss=(0,r.observer)((function(e){var t,n=e.onClose,r=e.store,o=(0,a.useRef)(null),l=r.currentContent;if(!l)return!1;var s=l.oc_id,c=l.title,p=l.icon,d=l.tags,f=l.description,m=l.category,h=l.link,b=l.following,v=l.image,w=l.completed,O=l.gradeInfo,k=l.status,x=l.bottomNote,S=l.duration,j=new ho.pE({type:"online_content",object_id:s});return(0,_.tZ)(ot.d,{from:"side",onClose:n,ref:o,scroll:!0,children:(0,_.tZ)(g.W2,{padded:!1,head:(0,_.tZ)(g.$0,{title:m,icon:p,onClose:function(){return o.current.close()},headExtra:(0,_.tZ)(u.JO,{css:ls,iconClass:"pin-icon",buttonLike:!0,onClick:function(){return l.togglePin(l)},color:!!b&&i.g.colors.dominant_main,icon:b?"pin_filled":"pin",toolTip:b?lng("unpin"):lng("pin")})}),stickyHead:!0,children:(0,_.BX)("div",{css:as(v),children:[(0,_.BX)("div",{className:"details",children:[(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"title",children:c}),w&&(0,_.tZ)("div",{className:"note",children:(0,_.BX)(jt.jC,{title:O?O.label+": "+O.displayGrade:"",color:i.g.colors.positive,className:"mainNote",children:[(0,_.tZ)(u.JO,{icon:"mark_v_light"})," ",null==k||null===(t=k.text)||void 0===t?void 0:t.caps()]})})]}),(0,_.tZ)("div",{className:"link-btn",children:(0,_.BX)(y.l,{theme:"contained",href:h,children:[lng("enter").caps()," ",(0,_.tZ)(u.JO,{icon:"enter"})]})})]}),(0,_.BX)("div",{className:"content",children:[(x||S)&&(0,_.BX)("div",{className:"upper-note",children:[x&&(0,_.BX)("div",{className:"provider",children:[x.text," "]})," ",x&&S&&(0,_.tZ)("span",{children:" | "})," ",S&&(0,_.BX)("span",{className:"duration",children:[" ",(0,_.tZ)(u.JO,{icon:"sand_clock"})," ",S]})," "]}),d&&(0,_.tZ)(Lo.r,{children:null==d?void 0:d.map((function(e){return(0,_.tZ)(Lo.V,{tag:e,smaller:!0},e)}))}),f.isHtml?(0,_.tZ)(wr.x,{className:"description",content:null==f?void 0:f.text}):(0,_.tZ)("div",{className:"description",children:null==f?void 0:f.text}),(0,_.tZ)("div",{className:"sub-title",children:lng("comments").caps()}),(0,_.tZ)(go.H,{locked:!1,commentsStore:j,deletable:!1,connectTo:{type:"online_content",object_id:s},refresh:!0,allowFileSharing:!0})]})]})})})})),cs=(0,r.observer)((function(e){var t=e.store;if(!t.ready)return(0,_.tZ)(rt.T,{children:(0,_.tZ)(zt.$,{})});var n=t.popular,r=t.recent,o=t.skills,i=t.unfinished,a=t.bookmarked,l=t.followedOc,s=t.channels,c=[{items:o,title:lng("recommended for you")},{items:n,title:lng("popular")},{items:r,title:lng("new")},{items:i,title:lng("in progress")},{items:a,title:lng("bookmarked")},{items:l,title:lng("pinned")},{items:s,title:lng("channels")}];return(0,_.tZ)(Ba.Q,{children:c.map((function(e){var n=e.items,r=e.title;return(null==n?void 0:n.length)>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{title:r,mainTitle:!0,count:n.length}),(0,_.tZ)(Rt.T,{floatingControls:!0,children:n.map((function(e,n){return(0,_.tZ)(us,{store:t,entity:e},n)}))})]})}))})})),us=function(e){var t=e.entity,n=e.store;return t instanceof $l.N?(0,_.tZ)(Zr.gL,{entity:t,activeTab:"self",inContainer:!0}):t instanceof Yl.m?(0,_.tZ)(Kr.Al,{assignment:t,inContainer:!0,noComments:!0}):t instanceof Ql.O?(0,_.tZ)(jt.xr,{entity:t,playLink:{onClick:function(){return n.toggleSideMenu(t)}},onTitleClick:function(){return n.toggleSideMenu(t)}}):t instanceof es.$?(0,_.tZ)(ps,{data:t}):void 0},ps=function(e){var t=e.data,n=t.channel_name,r=t.ownerId,o=t.ownerName,i=t.ownerAvatar,a=t.followersNum,l=t.playlistsNum,s={user_id:r,full_name:o,user_avatar:i};return(0,_.BX)("div",{css:ds,children:[(0,_.BX)("div",{className:"card-header",children:[(0,_.tZ)(c.qE,{user:s,size:"40px"}),(0,_.tZ)("h3",{className:"channel-name",children:n}),(0,_.tZ)("span",{className:"channel-user",children:o})]}),(0,_.BX)("div",{className:"card-content",children:[(0,_.BX)("div",{className:"followers content-el",children:[(0,_.tZ)("span",{className:"title",children:lng("followers").caps()}),(0,_.tZ)("span",{children:a})]}),(0,_.BX)("div",{className:"playlists content-el",children:[(0,_.tZ)("span",{className:"title",children:lng("playlists").caps()}),(0,_.tZ)("span",{children:l})]})]}),(0,_.tZ)("div",{className:"card-bottom",children:(0,_.tZ)(y.l,{style:{width:"100%"},theme:"contained",href:{user:r,tab:"channel"},children:lng("visit channel").caps()})})]})},ds=(0,o.iv)(jt.NI,";width:250px;display:flex;flex-direction:column;margin:20px;padding:20px;justify-content:center;text-align:center;color:",i.g.colors.text_main,";border:1px solid ",i.g.colors.separator,";border-radius:8px;.card-header{display:flex;flex-direction:column;align-items:center;}.card-content{margin-top:30px;display:flex;justify-content:space-around;.content-el{display:flex;flex-direction:column;font-weight:600;>.title{margin-bottom:7px;font-weight:400;color:",i.g.colors.text_sec,";}}}.card-bottom{margin-top:20px;}",""),fs=n(95761);function ms(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function gs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var hs={name:"bn94ig",styles:">div{height:100%;display:flex;flex-direction:column;justify-content:center;}"},bs=(0,r.observer)((function(e){var t=e.userStore,n=t.skillsStore,r=t.isSelf,o=t.basicDetails,i=t.user_id;if(!n.ready)return(0,_.tZ)(zt.$,{});if(n.skillStore)return(0,_.tZ)(_s,{store:n});var a=n.occupationSkills,l=n.additionalSkills,s=n.unrankedSkills,c=n.gainedSkills,u=n.filterNsort,p=n.leaderboard,d=o.user_first_name,f=[{name:"name",label:lng("name").caps(),type:"search",outOfMenu:!0,wrapped:!0},{name:"skill_level",label:lng("level").caps(),type:"select_multi",options:[{val:0,label:"entry"},{val:1,label:"basic"},{val:2,label:"intermediate"},{val:3,label:"advanced"}]}],m=[{val:"",label:lng("default")},{val:"name",label:lng("name")},{val:"skill_level",label:lng("level")}],g=r?lng("my skills"):lng("%s's skills",d),h=(null==a?void 0:a.length)+(null==l?void 0:l.length)>0,b=n.userOccupation,y=function(e){if(parseInt(i)===parseInt(Blsm.user.id))return[parseInt(i)===parseInt(Blsm.user.id)&&{label:lng("remove from skill list").caps(),val:e,onClick:function(){return n.onRemoveSkill(e)},icon:"trash"}]},w={user:lng("you dont have any documented skills right now.").caps(),other:lng("%s doesn't have any documented skills right now.",d)},O={user:lng("we have gathered all your skills in one place.").caps(),other:lng("we have gathered all of %s's skills in one place.",d).caps()},k={user:lng("wow!").caps()+" "+lng("you have such special skills!").caps(),other:lng("wow! %s have such special skills!",d).caps()},x=r?w.user:w.other;h&&(x=(0,_.BX)(_.HY,{children:[r?O.user:O.other," ",(0,_.tZ)("br",{})," ",r?k.user:k.other]}));var S=hs;return(0,_.BX)("div",{children:[(0,_.tZ)(Lt.Of,{headline:g,tagline:x,contentStyle:S,content:b&&"loading"!==b&&(0,_.tZ)(Va.BD,{occupation:b}),image:"".concat(Blsm.prm.Mainref+Blsm.prm.ViewRef,"images/astronaut.svg")}),s.length>0&&(0,_.tZ)(ys,{info:{message:lng("this user have %i unranked skills",s.length),icon:"warning_triangle"}}),h&&(0,_.tZ)(qt.CX,{filters:f,filtersVals:n.filterNsort.filter,onFilter:function(e){return n.filterNsort.filter=e},sorts:m,sort:n.filterNsort.sort,onSort:function(e){var t=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ms(Object(n),!0).forEach((function(t){gs(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ms(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},u.sort);t.desc=u.sort.by===e&&!u.sort.desc,t.by=e,u.sort=t},collection:n._skills}),a.length>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{title:lng("occupation skills"),mainTitle:!0,count:a.length}),(0,_.tZ)(Rt.T,{cardHeight:205,expandHeight:0,children:a.map((function(e){return(0,_.tZ)(Va.rX,{onSetLevelClick:function(e,t){return n.setSkillLevel({user_id:i,sk_id:e,val:t})},onClick:function(){return n.setCurrentSkill(e)},showFlag:r,skill:e},"o_".concat(e.sk_id))}))})]}),(parseInt(i)===parseInt(Blsm.user.id)||l.length>0)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{title:lng("personal skills"),mainTitle:!0,count:l.length}),(0,_.BX)(Rt.T,{cardHeight:205,expandHeight:0,children:[parseInt(i)===parseInt(Blsm.user.id)&&(0,_.tZ)(Va.ET,{user_id:i,store:n}),l.map((function(e){return(0,_.tZ)(Va.rX,{onSetLevelClick:function(e,t){return n.setSkillLevel({user_id:i,sk_id:e,val:t})},onClick:function(){return n.setCurrentSkill(e)},onFlagClick:function(t){return n.setFollowing({sk_id:e.sk_id,following:t})},showFlag:!a.find((function(t){return t.sk_id===e.sk_id}))&&r,actions:y(e.sk_id),user_id:i,skill:e},"a_".concat(e.sk_id))}))]})]}),c.length>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{title:lng("skills i gained"),mainTitle:!0,count:c.length}),(0,_.tZ)(Rt.T,{cardHeight:205,expandHeight:0,children:c.map((function(e){return(0,_.tZ)(Va.rX,{onClick:function(){return n.setCurrentSkill(e)},skill:e},"g_".concat(e.sk_id))}))})]}),p.length>0&&(0,_.BX)("div",{className:"skill-leaderboard",children:[(0,_.tZ)("div",{className:"leaderboard-header",children:(0,_.tZ)(Zr.PQ,{title:lng("skill leaderboard"),mainTitle:!0})}),(0,_.tZ)(Ps,{leaderboard:p})]}),n.loaded&&n.onBoardingShowingNeeded&&((0,v.vm)().openDialog("form",new fs.ty({skillsStore:n,user_id:i,boarding:!0,onSave:n.onAddSkill}),{wizard:!0}),n.onBoardingShowingNeeded=!1)]})})),ys=function(e){var t=e.children,n=e.info,r=void 0===n?{}:n,o=r.message,i=r.icon;return(0,_.BX)("div",{css:vs,children:[(0,_.BX)("div",{className:"info",children:[i&&(0,_.tZ)(u.JO,{icon:i}),(0,_.tZ)("div",{className:"info-message",children:o.caps()})]}),(0,_.tZ)(Ht.zh,{}),(0,_.tZ)("div",{children:t})]})},vs=(0,o.iv)("border:1px solid ",i.g.colors.dominant_main,";background-color:",i.g.colors.dominant_main_shade,";display:flex;justify-content:space-between;height:auto;border-radius:10px;font-size:1.3rem;color:",i.g.colors.dominant_main,";align-items:center;padding:2%;margin-bottom:10px;.info{align-self:center;font-weight:700;.Icon{font-size:2rem;",i.g.classes.margin_far("10px"),";}.info-message{display:inline-block;}}",""),_s=(0,r.observer)((function(e){var t,n,r,o=e.store;if(!o.skillStore.ready)return(0,_.tZ)(zt.$,{});var a,l=o.skillStore,c=o.userStore,p=o.type,d=l.skill,f=l.leaderboard,m=l.skillLog,g=l.skillSuggestions,h=l.user_id,b=d.name,y=d.skill_level,v=d.manager_level,w=d.sk_id,O=d.editable,k=d.is_personal,x="additional"===p?y:v||y,S=(0,Va.r0)(x),j=[1,2,3].map((function(e){return(0,Va.r0)(e)})),C=(j[x-1]||{color:"#757575",label:lng("unranked|level"),icon:"skill_unranked",val:null}).label,P=!(!x||!f)&&(null===(t=f.find((function(e){return e.user_id==h})))||void 0===t?void 0:t.rank);return j.forEach((function(e){return e.onClick=function(){l.setSkillLevel({user_id:h,sk_id:w,val:e.val,is_personal:k});var t=Blsm.user;o._skills.forEach((function(n){n.sk_id==w&&((t.isPowerManager||t.isManager)&&(n.manager_level=e.val),t.id==h&&(n.skill_level=e.val))}))}})),(0,_.BX)("div",{css:ws((a=S.color,'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">\n\t<rect height="100" width="100" fill="'.concat(a,'"/>\n\t<ellipse cx="').concat(i.g.isRTL?100:-10,'" cy="-20" rx="45" ry="105" fill="#FFF" fill-opacity=".2"/>\n\t<ellipse cx="').concat(i.g.isRTL?-15:115,'" cy="100" rx="40" ry="70" fill="#FFF" fill-opacity=".2"/>\n</svg>'))),children:[null==x&&O&&(0,_.tZ)(ys,{info:{message:lng("set the level of this skill"),icon:"warning_triangle"}}),(0,_.BX)("div",{className:"skill-header",children:[(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"back",onClick:function(){return o.setCurrentSkill(!1)}})," ",b.caps()]}),h&&O&&(0,_.BX)(s.x,{options:j,className:"level",children:[(0,_.tZ)("span",{children:C.caps()})," ",(0,_.tZ)("span",{children:(0,_.tZ)(u.JO,{icon:"caret_down"})})]}),h&&!O&&(0,_.tZ)("div",{className:"level",children:C.caps()})]}),f.length>0&&(0,_.BX)("div",{className:"skill-leaderboard",children:[(0,_.BX)("div",{className:"leaderboard-header",onClick:function(){return l.showLeaderboard=!l.showLeaderboard},children:[(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"leaderboard-title",children:(0,_.tZ)("span",{children:lng("skill leaderboard").caps()})}),P&&(0,_.BX)("div",{className:"leaderboard-sub-title",children:[c.isSelf?lng("your rank is").caps():"".concat(c.basicDetails.user_first_name," ").concat(c.basicDetails.user_last_name),": #",P]})]}),(0,_.tZ)(u.JO,{icon:l.showLeaderboard?"caret_up":"caret_down"})]}),l.showLeaderboard&&(0,_.tZ)("div",{className:"leaderboard-content",children:(0,_.tZ)(Os,{leaderboard:f})})]}),c.isSelf&&(null===(n=l.skillLog)||void 0===n?void 0:n.length)>0&&(0,_.BX)("div",{className:"skill-log",children:[(0,_.tZ)(Zr.PQ,{title:lng("log"),mainTitle:!0,count:m.length}),(0,_.tZ)(Rt.T,{floatingControls:!0,children:m.map((function(e,t){return(0,_.tZ)(us,{entity:e},t)}))})]}),c.isSelf&&(null===(r=l.skillSuggestions)||void 0===r?void 0:r.length)>0&&(0,_.BX)("div",{className:"skill-suggestions",children:[(0,_.tZ)(Zr.PQ,{title:lng("suggestions"),mainTitle:!0,count:g.length}),(0,_.tZ)(Rt.T,{floatingControls:!0,children:g.map((function(e,t){return(0,_.tZ)(us,{entity:e},t)}))})]})]})})),ws=function(e){return(0,o.iv)(".skill-header{margin-top:15px;border-radius:10px;background-image:url('data:image/svg+xml;utf8,",encodeURIComponent(e),"');height:250px;color:white;padding:50px;font-size:2rem;font-weight:700;justify-content:space-between;.level{font-size:1rem;color:#fff;background-color:rgba(255, 255, 255, .3);border-radius:8px;padding:6px 10px;width:fit-content;&:hover{cursor:pointer;}}}.skill-leaderboard{display:flex;justify-content:space-between;padding:30px;margin-top:30px;box-shadow:-10px 0 13px -17px #000000,10px 0 13px -17px #000000,5px 5px 15px 5px rgba(0, 0, 0, 0);border-radius:10px;flex-direction:column;width:100%;.leaderboard-content{display:flex;flex-direction:row;width:100%;.leaderboard-table{width:300px;margin:10px;}}.leaderboard-header{display:flex;justify-content:space-between;.leaderboard-title{font-size:1.3rem;}.leaderboard-sub-title{color:",i.g.colors.text_sec,";margin-top:10px;}}}","")},Os=(0,r.observer)((function(e){var t=e.leaderboard,n=[{title:lng("name").caps()},{title:lng("level").caps()},{title:lng("rank").caps()}];return(0,_.tZ)("div",{css:ks,children:(0,_.tZ)(jn.iA,{cols:n,collection:t,RowRenderer:xs,rowIdCol:"user_id",compact:!0})})})),ks={name:"1lmku8l",styles:"display:flex;margin-top:50px;flex-wrap:wrap;width:100%;.leaderboard-table{margin:10px 20px;th:nth-child(n+2){text-align:center;}.lb-table-header{font-size:1.2rem;color:white;border-radius:10px 10px 0 0;padding:5px 10px;display:flex;justify-content:space-between;}.td-rank{text-align:center;}.td-name span.name{vertical-align:super;}}"},xs=(0,r.observer)((function(e){var t=e.row,n=t.skill_level,r=t.rank,o=t.full_name,i=(0,Va.r0)(parseInt(n)),a=i.label,l=i.color,s=i.icon;return(0,_.BX)("tr",{css:Ss(l),children:[(0,_.tZ)("td",{className:"td-name",children:(0,_.BX)("div",{children:[(0,_.tZ)(c.qE,{user:t}),"  ",(0,_.tZ)("span",{className:"name",children:o})]})}),(0,_.tZ)("td",{children:(0,_.BX)("div",{className:"td-skill",children:[a.caps()," ",(0,_.tZ)(u.JO,{icon:s})]})}),(0,_.BX)("td",{className:"td-rank",children:["#",r]})]},r)})),Ss=function(e){return(0,o.iv)("font-weight:600;.td-name{>div{display:flex;align-items:center;min-width:200px;}}.td-skill{display:flex;background-color:",e,";color:white;height:30px;justify-content:space-between;padding:0 10px;align-items:center;border-radius:50px;width:130px;.Icon{",i.g.classes.margin_near("10px"),";}}","")},js=function(e){return(0,o.iv)("display:flex;background-color:",e,";color:white;height:30px;justify-content:space-between;padding:0 10px;margin:10px 0;align-items:center;border-radius:50px;max-width:25%;width:auto;gap:10px;>div{>._btn{max-width:200px;}}.td-skill-name{display:block;max-width:85%;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;",i.g.classes.margin_far("10px"),";}span{display:flex;justify-content:space-between;}","")},Cs=(0,o.iv)(".tooltip-score{border-top:1px solid ",i.g.colors.separator_light,";margin-top:10px;}.tooltip-title{margin-bottom:5px;font-size:1.2rem;font-weight:600;}",""),Ps=(0,r.observer)((function(e){var t=e.leaderboard,n=[{title:""},{title:lng("name").caps()},{title:lng("skills").caps()}];return(0,_.tZ)("div",{css:ks,children:(0,_.tZ)(jn.iA,{cols:n,collection:t,RowRenderer:Zs,rowIdCol:"user_id",compact:!0})})})),Zs=(0,r.observer)((function(e){var t=e.row,n=t.full_name,r=t.skills,o=t.rank;return(0,_.BX)("tr",{css:Ss,children:[(0,_.tZ)("td",{children:o}),(0,_.tZ)("td",{className:"td-name",children:(0,_.BX)("div",{children:[(0,_.tZ)(c.qE,{user:t}),"  ",(0,_.tZ)("span",{className:"name",children:n})]})}),(0,_.tZ)("td",{style:{display:"flex",gap:"10px"},children:r.map((function(e){var t=e.sk_id,n=e.manager_level,r=e.name,i=e.description,a=e.sk_rating_details,l=(0,Va.r0)(n),s=l.color,c=l.icon,p=JSON.parse(a),d=null!=p&&p.groups?Object.values(p.groups).reduce((function(e,t){return e+t}),0):0,f=null!=p&&p.lessons?Object.values(p.lessons).reduce((function(e,t){return e+t}),0):0;return(0,_.tZ)("div",{css:js(s),children:(0,_.BX)(I.u,{html:(0,_.BX)("div",{css:Cs,className:"td-skill-inner",children:[(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"tooltip-title",children:r.caps()}),i.caps()]}),(0,_.BX)("div",{className:"tooltip-score",children:[lng("courses").caps(),": ",d,", ",lng("shared content").caps(),": ",f]})]}),children:[(0,_.tZ)("span",{className:"td-skill-name",children:r.caps()})," ",(0,_.tZ)(u.JO,{icon:c})]})},"".concat(t,"_").concat(o))}))})]})})),Bs=n(86344);function Ts(e){return(Ts="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Is(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function As(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ds(e,t){return(Ds=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ms(e);if(t){var o=Ms(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ns(this,n)}}function Ns(e,t){return!t||"object"!==Ts(t)&&"function"!=typeof t?zs(e):t}function zs(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ms(e){return(Ms=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ds(e,t)}(i,e);var t,n,r,o=Rs(i);function i(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e),(0,ir.makeObservable)(zs(n)),n.title=lng("invite friends"),n.challenge=e.currentChallenge,n.leaderboard=n.challenge.leaderboard,n.challengeId=e.currentChallenge.id,n.confirmButtonLabel=lng("invite").caps(),n.participants=null===(t=n.leaderboard)||void 0===t?void 0:t.map((function(e){return e.user_id})),n.buildFields(),n}return t=i,(n=[{key:"buildFields",value:function(){var e=this;this._fields=[{type:"hidden",name:"badge_id",value:this.challenge.id},{type:"component",Render:Wt.R9,label:lng("only friends who meet the challenge conditions can be invited").caps(),bold:!0},{type:"multiple_items",name:"ids",label:lng("select users"),poster:!0,theme:"bright",searchData:function(t,n){var r=t.term,o=t.ids,i=(e.values.get("ids")||[]).concat(e.inList||[],e.participants||[]);(0,m.SC)("gamification/autocomplete",{data:{req:"AutoComplete",term:r,id:o||"",exclude:i,challenge_id:e.challengeId}},n)},searchDataCacheFunc:function(t){return(0,d.SZ)(Object.assign({ids:(e.values.get("ids")||[]).concat(e.inList)},t))}},{type:"richtext",name:"custom_message",label:"".concat(lng("add message")," (").concat(lng("optional"),")"),toolbarOptions:{font:!0,color:!0,link:!0,list:!0,align:!0}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("gamification/invite_to_challenge",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Es(Object(n),!0).forEach((function(t){Is(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}},{key:"SaveSuccess",value:function(){(0,v.vm)().closeDialog()}}])&&As(t.prototype,n),r&&As(t,r),i}(Jt.I);function qs(e){return(qs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Xs=(0,r.observer)((function(e){var t=e.store,n=t||(0,a.useContext)(v.l9).getStore("challenges");if(!n.ready)return(0,_.tZ)(Xt.h,{});var r=(0,_.tZ)(Ls,{store:n});return null!=t&&t.user.id?(0,_.tZ)("div",{children:r}):(0,_.tZ)(rt.T,{children:r})})),Ls=(0,r.observer)((function(e){var t,n,r=e.store,o=r.filterNsort,i=r.filters,a=r.sorts,l=r.sideMenu,s=(0,f.qD)(o),c=s.filtersVals,u=s.setFilterVals,p=s.sort,m=s.setSort,g=null===(t=r.user)||void 0===t?void 0:t.id;return r.getCurrentChallenge&&r.toggleSideMenu(r.getCurrentChallenge),n=(0,d.Tz)(g)?(0,_.BX)("div",{children:[(0,_.tZ)(y.l,{href:{challenges:!0},theme:"outlined",children:lng("find new challenges").caps()}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),lng("below, a list of the challenges you joined.").caps()]}):g?"":(0,_.BX)("div",{children:[(0,_.tZ)(y.l,{href:{user:Blsm.user.id,tab:"challenges"},theme:"outlined",children:lng("back to %s|back to some page",lng("my challenges")).caps()}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),lng("join challenges to earn points and badges and maybe your name will be displayed on the wall of fame.").caps()]}),(0,_.BX)(_.HY,{children:[(0,_.tZ)(Lt.Of,{headline:lng("challenges"),tagline:n,image:"".concat(Blsm.prm.Mainref+Blsm.prm.ViewRef,"images/canoe.svg"),padding:!0}),(0,_.BX)(Ba.Q,{children:[(0,_.tZ)(qt.CX,{filters:i,filtersVals:c,onFilter:u,sorts:a,sort:p,onSort:m,colelction:r.challenges}),0===r.challenges.length?(0,_.tZ)(ta.M,{title:lng("no challenges to show"),icon:"challenge"}):(0,_.tZ)(Hl.Hl,{children:r.challenges.map((function(e){return(0,_.tZ)(J.SV,{children:(0,_.tZ)(Hs,{challenge:e,onChallengeClick:function(){return r.toggleSideMenu(e)}})},e.attr("badge_id"))}))})]}),l&&(0,_.tZ)(Us,{onClose:function(){return r.toggleSideMenu(!1)},store:r})]})})),Us=(0,r.observer)((function(e){var t,n=e.store,r=e.onClose,l=(0,a.useRef)(null),s=n.currentChallenge;if(!s)return!1;var c=s.color,p=s.icon,d=s.title,f=s.explain,m=s.dueDate,h=s.description,b=s.type,w=s.joined,O=s.leaderboard,k=s.progress,x=null===(t=s._attr)||void 0===t?void 0:t.badge_conditions,S=null==x?void 0:x.cond_desc,j=s._attr.badge_type,C=s._attr.badge_access,P=function(){return s.invite()};O&&(O.req="object"===qs(null==x?void 0:x.ids)?null==x?void 0:x.ids.length:x.amount?x.amount:1);var Z=(0,_.tZ)(g.$0,{title:d,onClose:r});return(0,_.tZ)(ot.d,{onClose:r,from:"side",scroll:!0,ref:l,children:(0,_.tZ)("div",{children:(0,_.BX)(g.W2,{head:Z,css:Vs(c),children:[(0,_.tZ)("div",{className:"top-strip",children:(0,_.tZ)("div",{className:"badge",children:(0,_.tZ)(Ut.Pp,{icon:p,color:c})})}),(0,_.BX)("div",{className:"header",children:[(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"title",children:d}),(0,_.tZ)("div",{className:"type",children:(0,_.tZ)("span",{children:b.caps()})})]}),(0,_.tZ)("div",{className:"explain",children:f.caps()}),(0,_.tZ)("div",{className:"condition-details",children:S&&S.map((function(e){return(0,_.BX)("div",{css:(0,o.iv)("color:",e.done?i.g.colors.green:"",";",""),children:[(0,_.BX)("div",{children:["(",e.id,") ",e.name]}),e.done&&(0,_.tZ)("span",{children:(0,_.tZ)(u.JO,{icon:"mark_v",color:i.g.colors.green})})]},e.id)}))}),(0,_.tZ)("div",{children:h.caps()}),(0,_.tZ)("div",{children:w?(0,_.tZ)(Ws,{progress:k,badgeType:j}):(0,_.tZ)(y.l,{bold:!0,chunky:!0,theme:"contained",onClick:function(){return s.join()},children:lng("join").caps()})}),(0,_.tZ)("div",{children:w&&(0,_.tZ)(y.l,{bold:!0,chunky:!0,theme:"contained",onClick:function(){return(0,v.vm)().openDialog("form",new Fs({currentChallenge:s,onSave:P}))},children:lng("invite friends").caps()})})]}),(0,_.tZ)("div",{className:"middle",children:(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"calendar"})," ",(0,_.tZ)(G.qp,{time:m,showTime:!1})]})}),O&&(0,_.tZ)(Js,{list:O,type:j}),(0,_.tZ)(Ht.c_,{style:{justifyContent:"center",marginBottom:"10px"},children:w&&null!=k&&k.completed?(0,_.BX)("span",{className:"completed-success",children:[lng("challenge completed")," ",(0,_.tZ)(u.JO,{icon:p})]}):w&&"auto"!=C?(0,_.tZ)(y.l,{bold:!0,chunky:!0,theme:"outlined",onClick:function(){return(0,Tn.BB)(lng("are you sure you want to leave the challenge?"),{onConfirm:function(){return s.leave()}})},children:lng("leave challenge").caps()}):null})]})})})})),Vs=function(e){return(0,o.iv)(".top-strip{height:76px;background-color:",(0,Bs.mR)(e,.3),";position:relative;display:flex;justify-content:center;.badge{position:absolute;top:20px;}}.header{height:auto;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;padding:10px 0;border-bottom:1px solid ",i.g.colors.border,";.explain{margin:12px auto;}.condition-details{display:flex;flex-direction:column;>div{display:flex;justify-content:space-between;padding:5px 10px;}.Icon{",i.g.classes.margin_near("15px"),";}}.title{font-size:1.7em;font-weight:600;text-align:center;margin-top:40px;}.type{margin-top:15px;text-align:center;span{",i.g.classes.content_type_style,";}}.Button{width:250px;}}.middle{padding:20px 0;display:flex;flex-direction:column;align-items:center;justify-content:space-evenly;border-bottom:1px solid ",i.g.colors.border,";color:",i.g.colors.text_sec,";}.completed-success{color:",i.g.colors.green,";border :4px solid ",i.g.colors.green,";font-weight:bold;font-size:1.5em;padding:.8em 1em;min-width:180px;text-align:center;}","")},Hs=(0,r.observer)((function(e){var t,n=e.challenge,r=e.onChallengeClick,a=n.color,l=n.dueDate,s=n.explain,c=n.icon,p=n.title,d=n.id,f=n.type,m=n.joined,g=n.progress;return(0,_.BX)("div",{css:(t=a,(0,o.iv)("position:relative;width:",i.g.consts.CARD_WIDTH,"px;min-width:",i.g.consts.CARD_WIDTH,"px;height:",i.g.consts.CARD_HEIGHT,"px;border-radius:18px;",i.g.classes.shadow_strong,";display:flex;flex-direction:column;justify-content:space-between;.top{border-radius:18px 18px 0 0;position:relative;height:",100,"px;background-color:",(0,Bs.mR)(t,.3),";display:flex;justify-content:center;.badge{position:absolute;top:40px;}.edit{color:",i.g.colors.text_sec,";position:absolute;top:10px;",i.g.far,":10px;}}.middle{height:",i.g.consts.CARD_HEIGHT-100-60,"px;",i.g.classes.padding_near("10px"),";display:flex;flex-direction:column;justify-content:space-evenly;padding:50px 20px 0;color:",i.g.colors.text_sec,";.title{font-size:1.2em;font-weight:600;text-align:center;margin-bottom:10px;color:",i.g.colors.text_main,";}}&:hover .title{text-decoration:underline;}.bottom{height:",60,"px;display:flex;flex-direction:column;justify-content:center;align-items:center;padding:0 20px 20px;>div{width:100%;}}","")),children:[(0,_.BX)("div",{className:"top",children:[(0,_.tZ)("div",{className:"badge",children:(0,_.tZ)(Ut.Pp,{icon:c,color:a})}),Blsm.user.isPowerManager&&(0,_.tZ)("div",{className:"edit",children:(0,_.tZ)(u.JO,{smallButtonLike:!0,icon:"edit",href:{edit:"challenge",id:d}})})]}),(0,_.BX)("div",{className:"middle",children:[(0,_.tZ)("div",{className:"title",onClick:r,children:p}),f&&(0,_.tZ)("div",{children:(0,_.tZ)("span",{css:i.g.classes.content_type_style,children:null==f?void 0:f.caps()})}),s&&(0,_.tZ)("div",{children:s.caps()}),l&&(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"calendar"})," ",(0,_.tZ)(G.qp,{time:l,showTime:!1})]})]}),(0,_.tZ)("div",{className:"bottom",children:m?(0,_.tZ)(Ws,{progress:g,badgeType:n._attr.badge_type}):(0,_.tZ)(y.l,{bold:!0,chunky:!0,theme:"contained",onClick:function(){return n.join()},children:lng("join").caps()})})]})})),Gs=(0,o.iv)("width:400px;margin:30px auto;.title{font-size:1.2em;font-weight:600;margin:10px 5px;}.columns{color:",i.g.colors.text_light_disabled,";>div:first-child{",i.g.classes.margin_near("40px"),";}}.leader{color:",i.g.colors.text_sec,";padding:7px 10px;border-bottom:1px solid ",i.g.colors.separator,";align-items:center;.number{padding:0 5px;width:30px;}.name{align-items:center;}}",""),Js=function(e){var t=e.list,n=e.type;if(null==t||!t.length)return null;var r=null,o={score:{types:["score_assignment","score_workspace"],term:lng("score").caps()},amount:{types:["social_like","social_comment","social_discussion","social_join_challenge","action_enroll","action_view_content"],term:lng("amount").caps()},points:{types:["points"],term:lng("points").caps()}};for(var i in o)o[i].types.includes(n)&&(r=o[i].term);return(0,_.BX)("div",{css:Gs,children:[(0,_.tZ)("div",{className:"title",children:lng("challenge leaderboard").caps()}),(0,_.BX)(Ht.c_,{className:"columns",children:[(0,_.tZ)("div",{children:lng("name").caps()}),(0,_.tZ)(Ht.zh,{}),(0,_.tZ)("div",{children:r})]}),t.map((function(e,n){return(0,_.BX)(Ht.c_,{className:"leader",children:[(0,_.tZ)("div",{className:"number",children:n+1}),(0,_.BX)(Ht.c_,{className:"name",children:[(0,_.tZ)(c.qE,{user:e}),"  ",(0,_.tZ)("span",{children:e.full_name})]}),(0,_.tZ)(Ht.zh,{}),(0,_.BX)("div",{children:[e.score," ",t.req&&"/"+t.req]})]},n)}))]})},Ws=function(e){var t=e.progress,n=e.badgeType;if(!t)return(0,_.tZ)("div",{style:{color:i.g.colors.text_light_disabled},children:lng("no progress to show").caps()});if("string"==typeof t)return(0,_.tZ)("div",{style:{color:i.g.colors.text_sec},children:t});var r=t.req,o=t.res,a=t.text,l="object"===qs(o)?parseInt(o.count):o,s=l>r?r:l,c=["social_like","social_comment","social_discussion","social_join_challenge","action_view_point","points"].includes(n);return(0,_.BX)(_.HY,{children:[(0,_.tZ)("br",{}),(0,_.tZ)(lt.k,{numerator:s,denominator:r,showPercent:c}),(0,_.tZ)("div",{style:{color:i.g.colors.text_sec},children:a})]})},Ks=(0,r.observer)((function(e){var t=e.store,n=t.user,r=t.channelPlaylists,o=t.channelPlaylistsEmpty,i=t.filterNsort;return r?(0,_.BX)(_.HY,{children:[r.length>0&&(0,_.tZ)(_.HY,{children:r.map((function(e,r){var o=e.items,a=e.title,l=e.id,s=e.skills,c=i.filter.playlist_items?o.filter((function(e){return e.title.includes(i.filter.playlist_items)})):o;return(0,_.tZ)(Ys,{items:c,title:a,id:l,skills:s,user:n,channelStore:t},r)}))}),n.isSelf&&(null==o?void 0:o.length)>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(Zr.PQ,{mainTitle:!0,title:lng("empty playlists"),count:o.length,className:"title"}),o.map((function(e,r){var o=e.title,i=e.id;return(0,_.tZ)(Ys,{title:o,id:i,user:n,channelStore:t},r)}))]})]}):(0,_.tZ)(ta.M,{title:lng("there is no content to display"),subTitle:lng("we looked really hard!"),icon:"digging"})})),$s=(0,o.iv)("margin:30px 0;.header-title{font-weight:600;>.title{display:inline-block;padding:10px 0;&:hover{cursor:pointer;}>span{font-size:1.2rem;color:",i.g.colors.text_main,";&.title-count{color:",i.g.colors.text_sec,";}}}&.hide-icons{.Icon{display:none;}&:hover{.Icon{display:inline-block;}}}}.header-cont{display:flex;justify-content:space-between;flex-direction:column;margin-bottom:10px;}",""),Ys=function(e){var t=e.items,n=e.title,r=e.id,a=e.skills,l=e.user,s=e.channelStore;return(0,_.BX)("div",{css:$s,children:[(0,_.BX)("div",{className:"playlist-header",children:[(0,_.BX)("div",{className:(0,d.AK)("header-title",{"hide-icons":t}),children:[(0,_.BX)("div",{className:"title",children:[(0,_.tZ)("span",{onClick:function(){return(0,p.p4)((null==t?void 0:t[0].playLink)||{playlist:r},!0)},children:null==n?void 0:n.caps()})," ",(0,_.BX)("span",{className:"title-count",children:["(",(null==t?void 0:t.length)||lng("empty").caps(),")"]})]}),l.isSelf&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.JO,{icon:"edit",smallButtonLike:!0,onClick:function(){return(0,p.p4)({playlist:r,play:"edit"},!0)}}),(0,_.tZ)(u.JO,{icon:"trash",smallButtonLike:!0,onClick:function(){return(0,Tn.BB)(lng("are you sure you want to delete this playlist?").caps(),{title:lng("delete playlist"),confirmText:lng("delete").caps(),onConfirm:function(){return(0,m.SC)("channel/delete_playlist",{method:"POST",data:{id:r}},(function(){return s.removePlaylist(r)}))}})}})]})]}),(0,_.tZ)("div",{className:"header-cont",children:(null==a?void 0:a.length)>0&&(0,_.tZ)(Lo.r,{children:a.map((function(e){return(0,_.tZ)(Lo.V,{tag:e.label,color:(0,Va.r0)(e.skill_level).color,smaller:!0,tooltip:e.description},e.id)}))})})]}),t&&(0,_.tZ)(Rt.T,{floatingControls:!0,css:(0,o.iv)(i.g.classes.margin_near("1rem;"),";",""),children:t.map((function(e){return e.playLink={play:e.assignment_id,playlist:r},(0,_.tZ)(Kr.Al,{assignment:e},e.assignment_id)}))})]})};function Qs(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ec(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ec(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ec(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var tc={name:"1d3w5wq",styles:"width:100%"},nc=(0,r.observer)((function(e){var t=e.store.channelStore||(0,a.useContext)(v.l9).getStore("channel"),n=t.channel,r=t.ready,o=t.user,i=t.bottomMenu,l=(0,f.qD)(t.filterNsort),s=l.filtersVals,c=l.setFilterVals,u=l.sort,p=l.setSort;if(!r)return(0,_.tZ)(Xt.h,{});var d=[{name:"playlist_name",label:lng("playlist name").caps(),type:"search",outOfMenu:!0,wrapped:!0},{name:"playlist_items",label:lng("item name").caps(),type:"search",outOfMenu:!0,wrapped:!0},{name:"playlist_skills",label:lng("skills"),type:"search",outOfMenu:!0,wrapped:!0},{name:"playlist_id",label:lng("ID").caps(),type:"search"}],m=[{val:"",label:lng("default")},{val:"playlist_name",label:lng("name")},{val:"playlist_id",label:lng("ID")}];return(0,_.BX)("div",{children:[(0,_.tZ)(Lt.Of,{content:(0,_.tZ)(ic,{channelStore:t,channel:n,onFullListClick:function(){return t.toggleBottomMenu()},user:o}),contentStyle:tc}),(0,_.tZ)(qt.CX,{filters:d,filtersVals:s,onFilter:c,sorts:m,spreadFilters:!0,sort:u,onSort:p}),(0,_.tZ)(Ks,{store:t}),i&&(0,_.tZ)(rc,{onClose:function(){return t.toggleBottomMenu()},channel:n})]})})),rc=(0,r.observer)((function(e){var t=e.channel,n=e.onClose,r=(0,a.useRef)(null),o=Qs((0,a.useState)(null),2),i=o[0],l=o[1],s=t.title,c=t.followers,u=t.following,p="following"===t.drawerType?u:c,d="following"===t.drawerType?lng("followed by %s",s.caps()):lng("followers of %s",s.caps()),f=(0,_.tZ)(g.$0,{icon:"manager",title:d.caps(),onClose:n});return(0,_.tZ)(ot.d,{onClose:n,from:"side",scroll:!0,ref:r,refDrawerBody:l,children:(0,_.tZ)("div",{children:(0,_.tZ)(g.W2,{head:f,stickyHead:!0,children:(0,_.tZ)(es.Z,{collection:p,scrollParent:i,type:t.drawerType})})})})})),oc=(0,o.iv)("display:flex;justify-content:space-between;min-width:100%;flex-direction:column;.user-section{display:flex;justify-content:space-between;.user{display:flex;margin:20px 0 25px;",i.g.classes.margin_near("10px"),";align-items:flex-end;width:60%;.header-content{display:flex;flex-direction:column;justify-content:space-around;",i.g.classes.margin_near("30px"),";>div>A{color:",i.g.colors.link_blue,";}>.title{font-size:1.5em;font-weight:600;height:2rem;>.Icon{font-size:1rem;display:none;}}}&:hover{>.header-content>.title>.Icon{display:inline-block;}}}}.actions-buttons{",i.g.classes.margin_far("20px"),";display:flex;flex-direction:column;.explore{display:flex;width:100%;justify-content:space-between;}}.about-section{",i.g.classes.margin_far("20px"),";margin-bottom:20px;display:flex;justify-content:space-between;.explore-btn{margin-top:50px;}}",""),ic=(0,r.observer)((function(e){var t=e.channelStore,n=e.user,r=e.onFullListClick,o=Qs((0,a.useState)(t.channel.subscribed),2),i=o[0],l=o[1],s=t.channel,f=s.id,g=s.title,h=s.store,b=s.followers,v=s.following,w=(null==b?void 0:b.length)>0,O=(null==v?void 0:v.length)>0,k=n.isSelf,x=n.basicDetails,S=f&&g?g:"".concat((0,d.v2)(x)," ").concat(lng("channel"));return(0,_.BX)("div",{css:oc,children:[(0,_.BX)("div",{className:"user-section",children:[(0,_.BX)("div",{className:"user",children:[(0,_.tZ)(c.qE,{user:x,size:"75px"}),(0,_.BX)("div",{className:"header-content",children:[(0,_.BX)("span",{className:"title",children:[S," ",k&&(0,_.tZ)(u.JO,{buttonLike:!0,onClick:function(){return s.editChannel()},icon:"edit"})]}),(w||O)&&(0,_.BX)("div",{children:[w&&(0,_.BX)(p.A,{theme:"hover",onClick:function(){return s.drawerType="followers",r()},children:[lng("followers").caps()," (",b.length,")"]}),w&&O&&" / ",O&&(0,_.BX)(p.A,{theme:"hover",onClick:function(){return s.drawerType="following",r()},children:[lng("following").caps()," (",v.length,")"]})]})]})]}),(0,_.BX)("div",{className:"actions-buttons",children:[k&&(0,_.tZ)(y.l,{chunky:!0,bold:!0,theme:"contained",onClick:function(){return h.addPlaylist()},children:lng("add new playlist")}),!k&&(0,_.tZ)(y.l,{chunky:!0,bold:!0,theme:"contained",onClick:function(){return e=i?1:0,(0,m.SC)("channel/channel_subscribe",{method:"POST",data:{channel_id:f,leave:e}},(function(){return l(!i)}));var e},children:i?lng("unfollow"):lng("follow")})]})]}),(0,_.BX)("div",{className:"about-section",children:[(0,_.tZ)(ac,{channel:s}),k&&!O&&(0,_.tZ)("div",{className:"explore-btn",children:(0,_.tZ)(y.l,{chunky:!0,bold:!0,theme:"outlined",onClick:function(){return(0,p.p4)({library:!0,tab:"channels"},!0)},children:lng("explore more channels").caps()})})]})]})})),ac=(0,r.observer)((function(e){var t=e.channel,n=Qs((0,a.useState)(!1),2),r=n[0],o=n[1],l=(0,pt.k6)((0,pt._3)(t.creation_time),{time:!1,named_month:!0,format:"LL"}),s="".concat(lng("created").caps(),": ").concat(l," ").concat(t.description),c=!!t.description;return(0,_.tZ)("div",{css:lc,children:c?(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{className:"about-title",onClick:function(){return o(!r)},children:[lng("about").caps()," ",(0,_.tZ)(u.JO,{icon:r?"arrow_up":"arrow_down"})]}),(0,_.tZ)("div",{className:"about",children:(0,_.tZ)(wr.x,{css:!r&&c&&i.g.classes.descriptionShowMore,content:s})})]}):(0,_.BX)("div",{children:[lng("created").caps(),": ",l]})})})),lc=(0,o.iv)("margin:10px;display:flex;flex-direction:column;.about-title{margin:5px 0;&:hover{cursor:pointer;}.Icon{font-size:.8rem;}}.about{width:100%;",i.g.classes.padding_far("45px"),";}",""),sc=(0,o.iv)(i.g.mQuery.mobile,"{.TopWidgets{justify-content:center;}}",""),cc=(0,r.observer)((function(e){var t=e.id,n=(0,a.useContext)(v.l9).getStore("user",t);if(!n.ready)return(0,_.tZ)(Xt.h,{});(0,d.Ju)((0,d.v2)(n.basicDetails));var r=n.tab,o=n.topTabs,i=n.subTabs,l=n.showFiles,s=n.basicDetailsWidgetSpread,c={tabs:o,activeTab:i?"":r,onSelect:function(e){return n.tab=e}};return(0,_.BX)(rt.T,{css:sc,internalScrolling:"general"===r,children:[(0,_.tZ)(Lt.v7,{headline:(0,d.v2)(n.basicDetails),tabs:c}),i&&(0,_.tZ)(it.m,{tabs:i,activeTab:r,onSelect:c.onSelect,subTabs:!0}),(0,_.tZ)(J.SV,{children:"general"===r?(0,_.tZ)(_.HY,{children:(0,_.tZ)(Ba.Z,{side:(0,_.tZ)(Ra,{userStore:n}),children:(0,_.tZ)(J.SV,{children:(0,_.tZ)(ra,{userStore:n})})})}):(0,_.tZ)(Ba.Q,{children:(0,_.tZ)(uc,{userStore:n})})}),l&&(0,_.tZ)(sa.G,{userStore:n}),s&&(0,_.tZ)(ka,{userStore:n})]})})),uc=(0,r.observer)((function(e){var t=e.userStore,n=t.tab,r=t.tasks,o=t.filteredTasks,i=t.tasks_filterNsort,a=t.user_id;switch(n){case"workspaces":return(0,_.tZ)(Di,{userStore:t});case"management":return(0,_.tZ)(yi,{userStore:t});case"evaluation":return(0,_.tZ)(Ki,{userStore:t});case"compliance":return(0,_.tZ)(Li,{userStore:t});case"requests":return(0,_.tZ)(Qi.V,{userStore:t});case"tasks":return(0,_.tZ)(at.B,{filteredTasks:o,tasks:r,filterNsort:i,priorityOn:!0,viewMode:!0,displayCount:!0,barExtraComponent:(0,_.tZ)(u.JO,{icon:"report",href:{report:"TasksActivityReport",params:{range:"today",user:a}},toolTip:lng("open tasks activity report")})});case"logins":return(0,_.tZ)(ca,{userStore:t});case"multiuser":return(0,_.tZ)(va,{userStore:t});case"blog":return(0,_.tZ)(_o,{userStore:t});case"forms":return(0,_.tZ)(Fa,{title:lng("submitted forms"),collection:t.forms});case"participation":return(0,_.tZ)(La,{title:lng("planned participation"),collection:t.participation,store:t});case"skills":return(0,_.tZ)(bs,{userStore:t});case"challenges":return t.challengesStore.fetch(),(0,_.tZ)(Xs,{store:t.challengesStore});case"channel":return(0,_.tZ)(nc,{store:t})}return null})),pc=n(50541),dc=n(76691),fc=n(81019);function mc(e){return(mc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function gc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||bc(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hc(e){return function(e){if(Array.isArray(e))return yc(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bc(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bc(e,t){if(e){if("string"==typeof e)return yc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yc(e,t):void 0}}function yc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function vc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _c(e,t){return(_c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xc(e);if(t){var o=xc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oc(this,n)}}function Oc(e,t){return!t||"object"!==mc(t)&&"function"!=typeof t?kc(e):t}function kc(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xc(e){return(xc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Sc=(0,o.iv)("display:flex;flex-direction:column;color:",i.g.colors.text_main,";>._head{padding:20px 20px;display:flex;border-bottom:1px solid ",i.g.colors.separator,";>._subject{flex-grow:1;font-weight:700;font-size:1.8em;}}._options{display:flex;flex-direction:column;}>._body{padding:0 20px;}>.buttonbar{margin-top:1em;margin-bottom:40px;margin-inline-start:20px;display:flex;flex-direction:row;gap:1em;}",""),jc=(0,r.observer)((function(e){var t,n=e.subject,r=e.message,o=e.message_to_user,i=e.message_to_group,l=(0,a.useContext)(dc.Zm),s=(0,a.useMemo)((function(){return new Cc({subject:n,message:r,message_to_user:o,message_to_group:i},l)}),[n,r,o,i]),c=function(){return l.activeMsg=null},p=s.getValue("subject")&&s.getValue("message"),d=s.getValue("message_to_user")||(null===(t=s.getValue("message_to_group"))||void 0===t?void 0:t.size)>0;return(0,_.tZ)(Jt.q3.Provider,{value:s,children:(0,_.tZ)("form",{autoComplete:"off",method:"post",children:(0,_.BX)("div",{css:Sc,children:[(0,_.BX)("div",{className:"_head",children:[(0,_.tZ)("div",{className:"_subject",children:lng("new message").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(u.JO,{icon:"close",buttonLike:!0,onClick:function(){return s.dirty?(0,Tn.BB)("",{title:lng("close without sending"),onConfirm:c,confirmText:lng("leave"),cancelText:lng("keep writing")}):c()}})})]}),(0,_.BX)("div",{className:"_body",children:[(0,_.tZ)(wa.au,{input:s.getFieldByName("message_to_user")}),(0,_.tZ)(wa.au,{input:s.getFieldByName("message_to_group")}),(0,_.BX)("div",{className:"_options",children:[(0,_.tZ)(wa.au,{input:s.getFieldByName("msg_sub_groups")}),(0,_.tZ)(wa.au,{input:s.getFieldByName("recipients_hidden")}),(0,_.BX)("div",{children:[(0,_.tZ)(wa.au,{input:s.getFieldByName("choose_sending_time")}),s.getValue("choose_sending_time")&&(0,_.tZ)("div",{style:{display:"inline-block"},children:(0,_.tZ)(wa.au,{input:s.getFieldByName("sending_time")})})]}),(0,_.tZ)(wa.au,{input:s.getFieldByName("send_sms")})]}),(0,_.tZ)(wa.au,{input:s.getFieldByName("subject")}),(0,_.tZ)(wa.au,{input:s.getFieldByName("message")})]}),(0,_.BX)("div",{className:"buttonbar",children:[(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return s.callSave()},disabled:!(!s.status&&p&&d),children:"saving"===s.status?lng("please wait..."):lng("send").caps()}),(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return s.preset()},disabled:!(!s.status&&p&&!d),children:lng("save draft").caps()})]})]})})})})),Cc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_c(e,t)}(i,e);var t,n,r,o=wc(i);function i(e,t){var n,r,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=kc(n),l=void 0,(a="msgStore")in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,n.msgStore=t,n.buildFields(e,t),n}return t=i,(n=[{key:"buildFields",value:function(e,t){var n=this;if(Object.keys(e.message_to_group||{}).length)for(var r=0,o=Object.keys(e.message_to_group);r<o.length;r++){var i=o[r];e.message_to_group[i]={id:i,group_recipient:["members"]}}this._fields=[{type:"multiple_items",name:"message_to_user",label:lng("select user"),outer_label:lng("send to"),separateLines:!1,inline:!0,theme:"bright",searchData:function(e,t){var n=e.ids,r=e.term;(0,m.SC)("ajax/UsersAjax.class.php",{method:"POST",data:{req:"AutoComplete",term:r||"",id:n||"",exclude_self:1,limit:!n&&null}},t)}},{insert:!!Blsm.user.perm.isGroupViewer,type:"multiple_items",name:"message_to_group",label:lng("select workspace"),outer_label:lng("workspaces"),separateLines:!1,inline:!0,theme:"bright",valueIsMap:!0,objectKeys:["id","label","group_recipient"],validate:function(e){return!!function(e){return!hc(e).find((function(t){var n,r,o=gc(t,1)[0];return 0===(null===(n=e.get(o))||void 0===n||null===(r=n.group_recipient)||void 0===r?void 0:r.length)}))}(e)||{error:lng("please select at least one item")}},buttons:[{Render:function(e){return function(e){var t=e.onChange,n=e.item,r=e.permission_types;return"all"===n.id?null:(0,_.tZ)(b.I,{type:"select_multi",options:(0,d.wd)(r),onChange:t,value:n.group_recipient})}({onChange:e.onChange,item:e.item,permission_types:t.permission_types})},onChange:function(e,t){return t.find((function(e){return(0,d.B5)(e)}))&&(t=t.filter((function(e){return"managers"!==e}))),e.group_recipient=t,e}}],searchData:function(e,t){var r=n.values.get("message_to_group"),o=r&&Array.from(r.values()).map((function(e){return e.id}));(0,m.SC)("groups/autocomplete",{data:{managed_perm:Blsm.ManagerPermissions.VIEW,term:e.term||"",id:e.ids||"",limit:e.ids?null:10,exclude:o}},(function(n){return n.forEach((function(e){return e.group_recipient=["members"]})),Blsm.user.isPowerManager&&(0,d.DM)(e.term)&&n.unshift({id:"all",label:lng("all users in the domain").caps(),name:lng("all users in the domain").caps()}),t(n)}))}},{type:"checkbox",name:"msg_sub_groups",label:lng("include sub workspaces").caps(),mod:["","ENT"]},{type:"checkbox",name:"recipients_hidden",label:lng("conceal recipients list").caps(),mod:["","ENT"]},{type:"checkbox",name:"choose_sending_time",label:lng("send in the future").caps(),mod:["","ENT"]},{name:"sending_time",type:"date_time",minDate:moment().subtract(1,"days"),mod:["","ENT"]},{type:"checkbox",name:"send_sms",label:lng("also send as a text message").caps(),mod:["","ENT"],insert:Blsm.InitialData.special.sms&&Blsm.user.isManager},{type:"section",fields:[{type:"text",name:"subject",outer_label:lng("subject")},{type:"richtext",name:"message",label:lng("message"),toolbarOptions:{font:!0,color:!0,link:!0,attach:!0,media_link:!0,list:!0,align:!0},onValueChange:function(e,t){return n.values.set("message_commands",t)}}]}],this._prepFields(e)}},{key:"SaveSuccess",value:function(e){if(this.status="success",this.msgStore.boxes[this._saving_to_box].invalidate(),this.values.get("choose_sending_time")&&this.values.get("sending_time"))return(0,Po.qV)(lng("future message added successfully").caps()),this.msgStore.activeMsg=null,void(0,p.p4)({message:"new"},!0);(0,d.B5)(e.message_id)?(0,p.p4)({message:e.message_id,tab:this._saving_to_box},!0):(0,Po.Mj)((0,d.HD)(e)?e:JSON.stringify(e))}},{key:"save",value:function(e){this.status="saving",this._saving_to_box="out",this.saveToUrl("messages/new",e)}},{key:"preset",value:function(){this._saving_to_box="preset",this.saveToUrl("messages/preset",this.buildFinalValues())}}])&&vc(t.prototype,n),r&&vc(t,r),i}(Jt.I);var Pc=(0,o.iv)(i.g.mQuery.mobile,"{.MainCol{position:fixed;background:white;width:100vw;height:calc(100vh - ",i.g.consts.TOP_BAR_HEIGHT,"px);overflow-y:auto;}}",""),Zc=(0,o.iv)("display:flex;flex-direction:column;height:100%;justify-content:center;align-items:center;color:",i.g.colors.text_main,";>.Icon{display:block;font-size:150px;}>span{font-size:2em;}",""),Bc=(0,r.observer)((function(){var e,t,n=(0,a.useContext)(v.l9).getStore("messages");(0,f.iP)(),(0,d.Ju)(lng("messages"));var r=n.ready,o=n.activeMsg,i=n.draftSubject,l=n.draftBody,s=n.queryParams;if(!r)return(0,_.tZ)(Xt.h,{});var c,p,m,g=null==s||null===(e=s.to)||void 0===e?void 0:e.split(","),h=(null==s?void 0:s.ws)&&(c={},p=null==s?void 0:s.ws,m={},p in c?Object.defineProperty(c,p,{value:m,enumerable:!0,configurable:!0,writable:!0}):c[p]=m,c);return(0,_.tZ)(rt.T,{css:Pc,internalScrolling:!0,children:(0,_.tZ)(dc.Zm.Provider,{value:n,children:(0,_.tZ)(Ba.Z,{side:(0,_.tZ)(pc.U,{}),children:o||!(0,d.tq)()?(0,_.tZ)(_.HY,{children:"new"===o?(0,_.tZ)(jc,{subject:i,message:l,message_to_user:g,message_to_group:h}):o instanceof dc.v0?(0,_.tZ)(fc.t,{msg:o}):(0,_.BX)("div",{css:Zc,children:[(0,_.tZ)(u.JO,{icon:"mailbox"}),(0,_.tZ)("span",{children:0===parseInt(null===(t=n.activeBox)||void 0===t?void 0:t.totalItems)?"in"===n.activeBoxKey?lng("your inbox is empty"):lng("nothing to show"):"　"})]})}):void 0})})})})),Tc=n(40554),Ec=n(44401),Ic=n(65405),Ac=n(74925);var Dc=(0,o.iv)(i.g.mQuery.mobile,"{margin:20px;}.topButtons{display:flex;margin-bottom:18px;>*{display:block;padding:12px 0;border-radius:10px;}>._new_button{flex-grow:1;}>._import_button{",i.g.classes.margin_near("10px"),";}}>.calendarDiv{padding-inline-start:15px;>.calendar-action{display:none;}}>.calendarDiv:hover{>.calendar-action{display:inline;margin:10px;",i.g.classes.opposite_float,";}}",""),Rc={name:"15kp1k9",styles:"vertical-align:text-bottom"},Nc=(0,r.observer)((function(e){var t=e.onClose,n=(0,a.useContext)(Tc.i),r=function(e){return function(){return e(),t()}};return(0,_.BX)("div",{css:Dc,children:[(0,_.BX)("div",{className:"topButtons",children:[n.mayAddEvent()&&(0,_.BX)(y.l,{theme:"contained",bold:!0,className:"_new_button",onClick:r((function(){return(0,v.vm)().openDialog("form",new Ec.Z)})),children:[(0,_.tZ)(u.JO,{icon:"create"})," ",lng("create new event").caps()]}),Blsm.user.isPowerManager&&(0,_.tZ)(y.l,{theme:"outlined",bold:!0,className:"_import_button",onClick:r((function(){return(0,p.p4)({import:"ical"},!0)})),children:(0,_.tZ)(u.JO,{icon:"import",toolTip:lng("import events from icalendar (ical/ics) file").caps()})})]}),(0,_.tZ)("div",{className:"title",children:(0,_.tZ)(Ic.X,{value:n.allMyCalendars,label:lng("my calendars").caps(),onChange:function(e){return n.checkCalendars(e,"allMyCalendars")}})}),n.mineCalendars.map((function(e){return(0,_.BX)("div",{className:"calendarDiv",children:[(0,_.tZ)(Ic.X,{label:e.name,color:e.color,value:n.activeCalendars[e.id],onChange:function(t){return n.activeCalendars[e.id]=!!t}}),!e.user_id&&(0,_.tZ)(u.JO,{toolTip:lng("public calendar"),spaceBefore:!0,css:Rc,icon:"globe-americas"}),(0,_.tZ)(u.JO,{icon:"edit",className:"calendar-action",onClick:function(){return function(e){n.updateCalendar(e),t()}({calendar:e})}}),(0,_.tZ)(u.JO,{icon:"trash",className:"calendar-action",onClick:function(){return function(e){n.deleteCalendar(e),t()}({calendar:e})}})]},e.id)})),(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"new",toolTip:lng("add calendar").caps(),buttonLike:!0,onClick:function(){return n.addCalendar(),void t()}}),(0,_.tZ)("span",{children:lng("add calendar").caps()})]}),(0,_.tZ)("hr",{}),(0,_.tZ)("div",{className:"title",children:(0,_.tZ)(Ic.X,{value:n.allOtherCalendars,label:lng("other calendars").caps(),onChange:function(e){return n.checkCalendars(e,"allOtherCalendars")}})}),n.otherCalendars.map((function(e){return(0,_.tZ)("div",{className:"calendarDiv",children:(0,_.tZ)(Ic.X,{label:e.name,color:e.color,value:n.activeCalendars[e.id],onChange:function(t){return n.activeCalendars[e.id]=!!t}})},e.id)})),(0,_.tZ)("hr",{}),(0,_.tZ)("div",{className:"title",children:lng("options").caps()}),(0,_.tZ)("div",{children:(0,_.tZ)(Ic.X,{label:lng("schedule",{phrase:!0}),value:n.preferences.meetings,onChange:function(e){return n.preferences.meetings=e}})}),(0,_.tZ)("div",{children:(0,_.tZ)(Ic.X,{label:lng("workspace events"),value:n.preferences.workspace_events,onChange:function(e){return n.preferences.workspace_events=e}})}),(0,_.tZ)("div",{children:(0,_.tZ)(Ic.X,{label:lng("assignments"),value:n.preferences.assignments,onChange:function(e){return n.preferences.assignments=e}})}),(0,_.tZ)("div",{children:(0,_.tZ)(Ic.X,{label:lng("courses"),value:n.preferences.courses,onChange:function(e){return n.preferences.courses=e}})}),(0,_.tZ)("div",{children:(0,_.tZ)(Ic.X,{label:lng("only blocking events"),value:n.preferences.blocking_events,onChange:function(e){return n.preferences.blocking_events=e}})}),(0,_.tZ)("hr",{}),Blsm.isFeatureEnabled("resources")&&(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"title",children:lng("resources").caps()}),(0,_.tZ)(Ac.Uz,{label:lng("resources"),showId:!0,theme:"bright",value:n.resources,onChange:function(e){return n.resources.replace(e)},searchData:function(e,t){return(0,m.SC)("resources/search_resource",{data:{req:"AutoComplete",by_id:e.ids,mode:"all",matches_only:!0}},t)}}),(0,_.tZ)("div",{className:"title",children:lng("resource bundle").caps()}),(0,_.tZ)(Ac.Uz,{label:lng("resource bundles"),showId:!0,theme:"bright",value:n.resourceBundle,onChange:function(e){return n.resourceBundle.replace(e)},searchData:function(e,t){return(0,m.SC)("search/groups",{data:{types:"ResourceBundle",id:e.ids,term:e.term||" "}},t)}})]}),(0,_.tZ)("hr",{}),(0,_.tZ)("div",{className:"title",children:lng("agenda").caps()}),n.agenda.map((function(e,t){return(0,_.tZ)(Mc,{agenda:e},t)}))]})}));Nc.defaultProps={onClose:function(){}};var zc={name:"3zy121",styles:"margin:20px"},Mc=function(e){var t=e.agenda;return(0,_.tZ)("div",{css:zc,children:(0,_.tZ)(Ro.o,{title:"".concat((0,pt.GG)(t.start_date)," - ").concat((0,pt.GG)(t.due_date).split(" ")[0]),subTitle:t.name,onClick:function(){return(0,p.p4)({workspace:t.group_id},!0)}})})};function Fc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function qc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fc(Object(n),!0).forEach((function(t){Xc(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Xc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lc=(0,o.iv)(i.g.mQuery.mobile,"{display:none;}.agendaDiv{padding:10px;}.agendaDiv:hover{background-color:",i.g.colors.bg_2,";}",""),Uc=(0,r.observer)((function(e){return(0,_.tZ)(Tr.h,{css:Lc,children:(0,_.tZ)(Nc,qc({},e))})}));function Vc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gc,Jc=(0,o.iv)(i.g.mQuery.mobileNarrow,"{.fc-daygrid-day-events{font-size:10px;a>.fc-event-title{display:none;}.fc-daygrid-event-dot{margin:0 2px;}}}",""),Wc=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("calendar"),t=e.calendarRef,n=e.title,r=e.viewType,o=e.todayDisabled,i=e.updateFromFC,l=Vc((0,a.useState)(!1),2),s=l[0],c=l[1];if((0,d.Ju)(lng("calendar")),!e.ready)return(0,_.tZ)(Xt.h,{});var p=(0,_.tZ)(Uc,{addCalendar:e.addCalendar,updateCalendar:e.updateCalendar,deleteCalendar:e.deleteCalendar});return(0,_.tZ)(rt.T,{css:Jc,internalScrolling:!0,children:(0,_.tZ)(Tc.i.Provider,{value:e,children:(0,_.BX)(Ba.Z,{side:p,children:[(0,_.BX)(Ht.c_,{children:[(0,_.tZ)(jl.A,{title:(0,_.tZ)("b",{children:n}),goPrev:function(){return t.current.prev()},goNext:function(){return t.current.next()},goToday:!o&&function(){return t.current.today()},viewType:r,onChangeViewType:function(n){return e.viewType=n,t.current[n]()}}),(0,_.tZ)("div",{className:"mobile_only",children:(0,_.tZ)(I.y,{content:(0,_.tZ)(Nc,{onClose:function(){return c(!1)}}),mobileLayoutSupport:!0,behavior:"trigger",onClose:function(){return c(!1)},trigger:s,children:(0,_.tZ)(u.JO,{icon:"filter",onClick:function(){return c(!0)},buttonLike:!0})})})]}),(0,_.tZ)("div",{style:{height:"calc(100vh - 154px)"},children:(0,_.tZ)(Sl,{noHeader:!0,ref:t,viewType:e.viewTypes[r],initialDate:e.start,onChange:i,events:e.getEvents,eventClick:e.eventClick,eventMouseEnter:e.eventMouseEnter,select:function(n){return e.datesSelect(n,t)},eventDrop:e.eventDrop,eventResize:e.eventResize})})]})})})})),Kc=n(5474);function $c(e){return($c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Yc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qc(e,t){return(Qc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function eu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ru(e);if(t){var o=ru(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tu(this,n)}}function tu(e,t){return!t||"object"!==$c(t)&&"function"!=typeof t?nu(e):t}function nu(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ru(e){return(ru=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ou=(function(e,t,n,r,o){var i={};Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Gc=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qc(e,t)}(i,e);var t,n,r,o=eu(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,ir.makeObservable)(nu(t));var n=e.data,r=void 0===n?{}:n;return t.sqlStore=e.sqlStore,t.query=r.query,t.title=lng("query report"),t.saveUrl="SQL/save_report",t.listSavedReports=e.data.listSavedReports,t.requiredSelectedOpt="",t.reportName="",t._fields=[{type:"select",name:"report_id",options:t.listSavedReports,label:lng("overwrite existing report"),emptyOption:lng("create new report"),onValueChange:function(e){var n=t.sqlStore.getSavedReportById(e);t.reportName=e,t.requiredSelectedOpt=e.length>0?"dropdown":"none",t.values.set("report_name",(null==n?void 0:n.name)||""),t.values.set("available_to_pm",n.available_to_managers)},value:t.reportName},{type:"text",name:"report_name",label:lng("enter report name"),onValueChange:function(e){t.reportName=e}},{type:"checkbox",name:"available_to_pm",label:lng("available to power managers")}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){e.is_update="dropdown"===this.requiredSelectedOpt?1:0,this.saveToUrl(this.saveUrl,Object.assign({QueryText:this.query},e))}},{key:"SaveSuccess",value:function(){}}])&&Yc(t.prototype,n),r&&Yc(t,r),i}(Jt.I)).prototype,"SaveSuccess",[ir.action],Object.getOwnPropertyDescriptor(Gc.prototype,"SaveSuccess"),Gc.prototype),Gc);function iu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return au(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return au(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function au(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lu=(0,o.iv)(">*+*{margin-top:5px;}direction:ltr;._buttons_row{display:flex;align-items:center;>*{",i.g.classes.margin_far("3px"),";}.Icon-wizard{color:",i.g.colors.dominant_main,";}select{max-width:calc(100% - 80px);}}textarea{height:120px;width:100%;direction:ltr;text-align:left;}iframe{background-color:",i.g.colors.bg_main,";color:",i.g.colors.text_main,";border:1px solid silver;margin-top:20px;width:100%;height:calc(100vh - ",i.g.consts.TOP_BAR_HEIGHT,"px - 58px);}",""),su=(0,r.observer)((function(){var e,t=(0,a.useContext)(v.l9).getStore("sql"),n=iu((0,a.useState)(),2),r=n[0],o=n[1],l=iu((0,a.useState)(),2),c=l[0],p=l[1],f=iu((0,a.useState)(),2),g=f[0],h=f[1],b=iu((0,a.useState)(),2),w=b[0],O=b[1];(0,d.Ju)("sql");var k=(0,a.useRef)(),x=(0,a.useRef)(),S=t.tables,j=t.recentQueries,C=t.savedReports,P=t.query,Z=t.size,B=t.reformatQuery,T=[{optgroup:!0,label:lng("tables").caps(),options:S.filter((function(e){return!e.is_view})).map((function(e){return{val:e.name,label:e.name+e.details}}))},{optgroup:!0,label:lng("views").caps(),options:S.filter((function(e){return e.is_view})).map((function(e){return{val:e.name,label:e.name+e.details}}))}],E=null===(e=t.selectedTableCols(r))||void 0===e?void 0:e.map((function(e){return{val:e,label:e}})),I=j.map((function(e){return{val:e,label:e}})),A=[{optgroup:!0,label:lng("admin only reports").caps(),options:C.filter((function(e){return!(0,d.P$)(e.available_to_managers)})).map((function(e){return{val:e.id,label:e.name}}))},{optgroup:!0,label:lng("power manager reports").caps(),options:C.filter((function(e){return(0,d.P$)(e.available_to_managers)})).map((function(e){return{val:e.id,label:e.name}}))}],D=[{label:lng("dump schema (selective)"),onClick:function(){return t.selectiveDownload()}},{label:lng("dump schema (slim)"),onClick:function(){return t.sendScehma(1)}},{label:lng("dump schema (no logs)"),onClick:function(){return t.sendScehma("no_logs")}},{label:lng("dump schema"),onClick:function(){return t.sendScehma()}},{label:lng("dump schema (chat only)"),onClick:function(){return t.sendScehma("chat_only")}}],R=function(e){var n;if(null!==(n=e)&&void 0!==n&&n.trim()){var r=x.current,o=r.selectionEnd,i=r.selectionStart;e="from_unixtime"===e&&i<o?"from_unixtime(".concat(t.query.substring(i,o).trim(),")"):e.trim()+" ",t.query=t.query.substring(0,i)+e+t.query.substring(o);var a=i+e.length;setTimeout((function(){return r.setSelectionRange(a,a)}),0)}},N=function(){return j.unshift(P)};return(0,_.BX)(rt.T,{contBG:!0,children:[(0,_.tZ)(Lt.v7,{headline:lng("SQL query"),simple:!0}),(0,_.BX)(Ba.Q,{css:lu,children:[(0,_.BX)("div",{className:"_buttons_row",children:[(0,_.tZ)(u.JO,{icon:"wizard",onClick:B,toolTip:"tidy query"}),(0,_.tZ)("div",{children:"|"}),["SELECT *\nFROM","JOIN","LEFT JOIN","|","WHERE","AND","OR","|","GROUP BY","ORDER BY","LIMIT 1","|","FROM_UNIXTIME"].map((function(e,t){return"|"===e?(0,_.tZ)("div",{children:"|"},t):(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){return R(e)},children:e.replace(/\n/g," ")},t)})),(0,_.tZ)("div",{css:i.g.classes.flex_grow}),(0,_.BX)("span",{children:[Z," "]}),(0,_.tZ)(s.x,{options:D,children:(0,_.tZ)(u.JO,{icon:"download"})})]}),(0,_.BX)("div",{className:"_buttons_row",children:[(0,_.tZ)("div",{style:{position:"relative"},children:(0,_.tZ)(Kc.P,{options:T,emptyOption:!0,value:r,onChange:o})}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return R(r)},children:"Add table"}),E&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{style:{position:"relative"},children:(0,_.tZ)(Kc.P,{options:E,value:c,onChange:p,emptyOption:!0})}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return R(c)},children:"Add column"}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return R(t.selectedTableCols(r).join(", "))},children:"Add all columns"})]})]}),(0,_.BX)("div",{className:"_buttons_row",children:[(0,_.tZ)("div",{style:{position:"relative"},children:(0,_.tZ)(Kc.P,{options:I,emptyOption:"- Recent queries -",value:g,onChange:h})}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return R(g)},children:"Load"})]}),(0,_.BX)("div",{className:"_buttons_row",children:[(0,_.tZ)("div",{style:{position:"relative"},children:(0,_.tZ)(Kc.P,{options:A,emptyOption:"- Saved reports -",value:w,onChange:O})}),(0,_.tZ)(y.l,{theme:"contained",onClick:function(){var e;return R(null===(e=t.getSavedReportById(w))||void 0===e?void 0:e.query)},children:"Load"}),(0,_.tZ)(y.l,{theme:"outlined",onClick:function(){t.deletedSavedReport(w)},children:"Delete report"})]}),(0,_.BX)("form",{method:"post",action:(0,m.Q2)("SQL/query"),target:"QueryRes",ref:k,onSubmit:N,children:[(0,_.tZ)("textarea",{name:"QueryText",spellCheck:"false",onKeyUp:function(e){("F9"===e.key||"Enter"===e.code&&e.ctrlKey)&&(N(),k.current.submit())},value:P,onChange:function(e){return t.query=e.target.value},ref:x}),(0,_.BX)("div",{className:"_buttons_row",children:[(0,_.tZ)(y.l,{formButton:!0,name:"req",value:"exec_query",type:"submit",theme:"contained",children:"Query"}),(0,_.tZ)(y.l,{formButton:!0,name:"req",value:"exec_excel",type:"submit",theme:"outlined",children:"To Excel"}),(0,_.tZ)(y.l,{formButton:!0,name:"req",value:"exec_csv",type:"submit",theme:"outlined",children:"To CSV"}),(0,_.tZ)("div",{children:"|"}),(0,_.tZ)(y.l,{theme:"outlined",disabled:!P,onClick:function(){(0,v.vm)().openDialog("form",new ou({data:{query:t.query,listSavedReports:A},sqlStore:t,onSaveSuccess:function(){(0,v.vm)().closeDialog(),t.fetch()}}))},options:A,children:"Save report"})]})]}),(0,_.tZ)("iframe",{name:"QueryRes"})]})]})})),cu=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).searchStore;(0,d.Ju)("search results");var t=e.searchCategories,n=e.activeCategory,r=e.loading,o=e.moreAvailable,l=e.loadingMore,s=e.getMore,c=e.searchTerm,u=e.suggestion;return(0,_.tZ)(rt.T,{bottomPadding:!0,children:(0,_.BX)("div",{children:[(0,_.tZ)(Lt.v7,{headline:lng("search results for '%s'",c),tabs:{tabs:t,activeTab:n,onSelect:function(t){return e.activeCategory=t}},desc:u?(0,_.BX)("div",{children:[lng("did you mean:").caps()," ",(0,_.tZ)("span",{css:i.g.classes.link,onClick:function(){return e.searchTerm=u},children:u})]}):void 0}),(0,_.tZ)(Ba.Q,{children:(0,_.tZ)("div",{className:"_results_filters",children:(0,_.BX)(J.SV,{children:[(0,_.tZ)(pu,{}),!r&&o&&(l?(0,_.tZ)(zt.$,{}):(0,_.tZ)(y.l,{onClick:s,style:{display:"block"},children:lng("more").caps()+"..."}))]})})})]})})})),uu=(0,o.iv)(".search-results-link{color:",i.g.colors.dominant_main,";}>.results_and_filters{margin-top:1em;display:flex;>div:first-child{flex-grow:1;}._filters{",i.g.classes.margin_near("20px"),";flex-basis:320px;flex-shrink:0;color:",i.g.colors.text_sec,";>div{padding:10px 15px;border:1px solid ",i.g.colors.separator,";border-radius:10px;>._title{border-bottom:1px solid ",i.g.colors.separator,";padding-bottom:10px;margin-bottom:10px;font-weight:600;}}}}div._title{font-weight:600;color:",i.g.colors.text_sec,";font-size:1rem;}",""),pu=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).searchStore,t=(0,f.iP)(),n=e.activeCategory,r=e.results,o=e.compactView,l=e.totalCount,s=e.advanceFilterShow,c=e.filterForm,d=e.allowedUserFields,m=e.searchContentPage,g=e.loading,h=e.searchTerm,b=l||r.length,y=(0,_.tZ)("div",{className:"_filters",children:(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"_title",children:lng("filter").caps()}),(0,_.tZ)(J.SV,{children:(0,_.tZ)(du,{filtersForm:c})})]})}),w="",O=t.width<1e3;c&&(w=O?(0,_.tZ)(I.y,{mobileLayoutSupport:!0,content:(0,_.tZ)("div",{style:{padding:"10px",minWidth:"320px",overflow:"auto",height:"70vh"},children:y}),children:(0,_.tZ)(u.JO,{icon:"filter"})}):(0,_.tZ)(u.JO,{icon:"filter",color:s?i.g.colors.dominant_main:void 0,onClick:function(){return e.advanceFilterShow=!e.advanceFilterShow},toolTip:lng("filter")}));var k=m(n,h),x=(null==k?void 0:k.href)&&h&&(0,_.BX)("span",{children:[(0,_.tZ)("wbr",{}),"(",(0,_.tZ)(p.A,{className:"search-results-link",href:k.href,children:lng('browse for "%s" in %s page',h,k.title)}),")"]}),S=(0,_.BX)("div",{style:{whiteSpace:"nowrap"},children:[(l>0?lng("%s results found",b):r.length>0?lng("showing %s results",r.length):lng("no results found")).caps()," ",b>0&&x]}),j=(0,_.tZ)(qt.$Q,{title:S,compactView:o,extraComponent:w,onViewSelect:["assignments","content","groups"].includes(n)?function(t){return e.compactView=t}:void 0});return(0,_.BX)("div",{css:uu,children:[j,(0,_.BX)("div",{className:"results_and_filters",children:[g?(0,_.tZ)(zt.$,{}):(0,_.tZ)((function(e){switch(e.activeCategory){case"users":return(0,_.tZ)(Nt.PH,{collection:r,noFilterSort:!0,sticky:70,stickyStartHeight:0,allowedUserFields:d});case"tasks":return(0,_.tZ)(at.B,{tasks:r,viewMode:!0,noFilterSort:!0,sticky:70,stickyStartHeight:0});case"assignments":case"content":return(0,_.tZ)(Kr.Mz,{assignments:r,noFilterSort:!0,compactView:o,noComments:!0});case"groups":return(0,_.tZ)(Zr.TY,{workspaces:r,compactView:o});case"catalog":return(0,_.tZ)(Zr.TY,{workspaces:r,activeTab:"self",page:"registration",compactView:o});case"mycontent":return(0,_.tZ)(Io.E,{collection:r,noFilterSort:!0,sticky:70,stickyStartHeight:0});default:return r.length}}),{activeCategory:n}),s&&c&&!O?y:null]}),(0,_.tZ)(Ft.$,{})]})})),du=(0,r.observer)((function(e){var t=e.filtersForm;return(0,_.tZ)(Jt.q3.Provider,{value:t,children:(0,_.tZ)(wa.au,{input:t.fields})})})),fu=n(65155),mu=n(40423),gu=(0,o.iv)(".MainCol{padding:20px;overflow:auto;background-color:",i.g.colors.dominant_white,";table,td,th{border-right:1px solid ",i.g.colors.separator,";vertical-align:middle;padding:2px;font-size:10px;}tr{background-color:",i.g.colors.bg_1,";color:",i.g.colors.bg_1_text,";}tr:hover{background-color:",i.g.colors.bg_2,";}}.fi_title{color:",i.g.colors.text_main,";text-align:center;display:inline-block;font-size:2rem;font-weight:600;margin-bottom:2rem;}.save{padding:35px 15px 0;display:flex;flex-direction:column;}.warning,.declined{color:",i.g.colors.negative,";}.accepted{color:",i.g.colors.positive,";}.hidden{display:none;}.center_text{text-align:center;}.bg_color_negative{color:",(0,Bs.ou)(i.g.colors.negative_bg),";background-color:",i.g.colors.negative_bg,";}.bg_color_marker{color:",(0,Bs.ou)(i.g.colors.highlight),";background-color:",i.g.colors.highlight,";}",""),hu=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("import"),t=e.error,n=e.ready,r=e.importObj;if(t)return(0,_.tZ)(rt.T,{children:t});if(!1===n)return(0,_.tZ)(Xt.h,{});var o=r.status,i=r.title,l=r.titleExtra,s=r.fields,c=r.preview,u=r.previewButtonLabel,p=r.commit,d=r.confirmButtonLabel,f=r.result,m=r.events,g="saving"===o,h=(0,_.tZ)(Tr.h,{children:(0,_.BX)(Jt.q3.Provider,{value:r,children:[(0,_.BX)("div",{className:"fi_title",children:[i.caps(),l]}),(0,_.tZ)(wa.au,{input:s}),(0,_.BX)("div",{className:"save",children:[(0,_.tZ)(fu.O,{chunky:!0,primary:!0,onClick:c,disabled:g,children:u}),(0,_.tZ)(fu.O,{chunky:!0,onClick:p,disabled:g,children:d})]})]})});return(0,_.tZ)(rt.T,{css:gu,internalScrolling:!0,children:(0,_.BX)(Ba.Z,{side:h,children:[g?(0,_.tZ)(zt.$,{}):(0,_.tZ)("div",{dangerouslySetInnerHTML:{__html:f}}),(null==m?void 0:m.length)>0&&(0,_.tZ)(mu.r,{events:m})]})})})),bu=n(7190),yu=n(35997);var vu={name:"1sa6yq3",styles:"display:flex;flex-direction:column;height:100%;._chart{flex-grow:1;padding:0 10px 10px;}"},_u=function(e,t){return(0,o.iv)("display:flex;flex-direction:row;flex-wrap:wrap;height:100%;justify-content:space-around;>.chart-item{display:flex;flex-direction:column;align-items:center;>.chart-title{text-align:center;white-space:nowrap;font-size:1.2em;padding:6px;}>.chart-chart{height:",2!=t?"100%":"70%",";max-width:",2==t?"300px":"200px",";}}","")},wu=function(e){var t=e.bookmark_name,n=e.bookmark_url,r=e.widget_options,o=e.dashboard_data,i=e.activeTab,a=e.bookmark_id,l=e.menuOptions,s=o.graphs[0],c=void 0;n&&(c={report:n.report_name,params:n.parameters},("personal"===i||"recommended"===i&&Blsm.user.isPowerManager)&&(c.bookmarkId=a)),r=(0,d.Mo)(r,{});var u=void 0;if(null!=s&&s.statistics){u={};var f=s.statistics.numbers?s.statistics:s.values;u.numbers=f.map((function(e){var t=e.label,n=e.color,r=e.data,o=e.percent;return{label:t,color:(0,st.JA)(n),number:r,percent:o}})),(0,d.Kn)(s.statistics)&&Object.assign(u,s.statistics)}var m=1===o.graphs.length?o.graphs[0]:void 0,g=parseInt(r.widget_size)||void 0;return(0,_.tZ)(Hl.$L,{title:t,subtitle:Mt.Ux[o.report_name],link:c,size:g,menuOptions:l,children:o.graph_partial_data?(0,_.tZ)("div",{children:(0,_.tZ)(ta.M,{title:lng("graph unavailable"),subTitle:lng("graph loading time exceeds threshold"),icon:"broken_graph",button:{click:function(){return(0,p.p4)(c,!0)},label:lng("enter the detailed report")}})}):(0,_.BX)("div",{css:vu,children:[(0,_.tZ)("div",{className:"_chart",children:o.graphs.length>0?m?(0,_.tZ)(st.kL,{type:m.type,data:m.values||m.data,height:"100%",width:"100%",legend:!u,dataLabel:!0,scaleLabels:null==m?void 0:m.scale_labels}):(0,_.tZ)("div",{css:_u(o.graphs.length,g),children:o.graphs.map((function(e,t){return(0,_.BX)("div",{className:"chart-item",children:[(0,_.tZ)("div",{className:"chart-title",children:null==e?void 0:e.display_label}),(0,_.tZ)("div",{className:"chart-chart",children:(0,_.tZ)(st.kL,{type:e.type,data:e.values||e.data,height:"100%",width:"100%",legend:!u,dataLabel:!0,scaleLabels:null==e?void 0:e.scale_labels},t)})]},t)}))}):lng("no data")}),u&&(0,_.tZ)(ct.Q,{children:u.numbers.filter((function(e){var t=e.statistics;return e.label&&!1!==t})).map((function(e,t){var n=e.color,r=e.label,o=e.date,i=e.number,a=e.percent;return(0,_.tZ)(ct.t,{numerator:o?(0,pt.GG)(i,{time:!1}):(0,d.Rn)(i,2,a?"%":""),label:r,color:(0,st.JA)(n)},t)}))})]})})},Ou={name:"12tmrid",styles:"display:flex;flex-direction:column;padding:5px;>*{margin:0 0 5px 0;}"},ku=function(e){var t=e.reports,n=void 0===t?[]:t,r=e.activeTab;function o(e){var t=e.bookmark_url,n={report:t.report_name,params:t.parameters};return("personal"===r||"recommended"===r&&Blsm.user.isPowerManager)&&(n.bookmarkId=e.bookmark_id),n}return(0,_.tZ)(Hl.$L,{title:lng("report list"),dragHandle:!1,children:(0,_.tZ)(Jr.y.Provider,{value:void 0,children:(0,_.tZ)("div",{css:Ou,children:n.map((function(e){return(0,_.tZ)(Ro.o,{title:e.bookmark_name,href:o(e)},e.bookmark_id)}))})})})},xu=n(41226),Su=n(343);function ju(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cu(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Pu=(0,o.iv)("._filters{margin-bottom:1em;max-width:600px;}._nothing{text-align:center;width:100%;font-size:2em;color:",Su.g.colors.text_sec,";font-style:italic;}.Bar{margin-bottom:1em;}",""),Zu=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("dashboard");if((0,d.Ju)(lng("dashboard")),!e.ready)return(0,_.tZ)(Xt.h,{});var t=e.dashboards,n=e.activeDashboard,r=e.dashboardData,o=e.ous,i=e.activeOu,l=e.sortBookmark,s=e.editable;return(0,_.tZ)(yu.fd.Provider,{value:e,children:t.length>0?(0,_.BX)(rt.T,{css:Pu,contBG:!0,children:[(0,_.tZ)(Lt.v7,{sticky:!0,headline:(0,yu.i3)(n),tabs:{tabs:t.map((function(e){return{val:e,label:(0,yu.i3)(e)}})),activeTab:n,onSelect:function(t){return e.activeDashboard=t}},actions:Blsm.canAccessModule("Reports")&&(0,_.tZ)(y.l,{theme:"contained",href:"#reports",children:lng("reports").caps()})}),(0,_.BX)(Ba.Q,{children:["ou"===n&&o&&(0,_.tZ)("div",{className:"_filters",children:(0,_.tZ)(b.I,{type:"tree_node",tree:o,value:i,onChange:function(t){return e.activeOu=t},wrapped:!0,label:lng("org' unit").caps()})}),["assignments","groups"].includes(n)||"loading"!==r?r?function(){switch(n){case"recommended":case"personal":var t=r.filter((function(e){var t,n;return(null==e||null===(t=e.dashboard_data)||void 0===t||null===(n=t.graphs)||void 0===n?void 0:n.length)>0})),o=r.filter((function(e){var t,n;return!(null!=e&&null!==(t=e.dashboard_data)&&void 0!==t&&null!==(n=t.graphs)&&void 0!==n&&n.length)}));return o.length&&t.push({noGraph:o}),(0,_.tZ)(Hl.Hl,{sortable:s,onSort:l,children:t.map((function(e){return e.noGraph?(0,_.tZ)(ku,{reports:e.noGraph,activeTab:n},"000"):(0,_.tZ)(wu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ju(Object(n),!0).forEach((function(t){Cu(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ju(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({activeTab:n},e),e.bookmark_id)}))});case"ou":return(0,_.tZ)(Mt.uP,{reports:r,group_id:i});case"assignments":return(0,_.tZ)(xu.yy,{dashboardsStore:e});case"groups":return(0,_.tZ)(xu.rZ,{dashboardsStore:e});default:return(0,_.tZ)("div",{})}}():(0,_.tZ)("div",{className:"_nothing",children:lng("nothing to show").caps()}):(0,_.tZ)(zt.$,{})]})]}):(0,_.BX)(pn.U,{children:[(0,_.tZ)(Lt.EL,{}),(0,_.tZ)(ta.M,{title:lng("there is nothing here"),subTitle:lng("you don't have any bookmarks, assignments, workspaces or recommended reports, check again another time!"),icon:"digging"})]})})})),Bu=n(9431),Tu=n(79990),Eu=n(87183);function Iu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Iu(Object(n),!0).forEach((function(t){Du(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Iu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Du(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ru=(0,o.iv)("padding:0 20px;",i.g.mQuery.mobile,"{padding:0 2px;}",""),Nu={name:"1azakc",styles:"text-align:center"},zu={name:"6yeg13",styles:"font-size:3em"},Mu={name:"h2kn9s",styles:"font-size:2em"},Fu=(0,r.observer)((function(e){var t=e.portalStore,n=t.widgets,r=t.poster,l=t.portal_id,s=t.urlParams,c=(0,f.iP)(),p=(0,a.useRef)();(0,a.useEffect)((function(){if(null!=s&&s.wid){var e=p.current.querySelector('[data-widget_id="'.concat(s.wid,'"]'));e&&setTimeout((function(){return e.scrollIntoView({block:"center"})}),300)}}),[l]);return(0,_.BX)(Bu._G.Provider,{value:t,children:[r&&(0,_.tZ)(o.xB,{styles:(0,o.iv)("body{background-image:url('",i.g.func.imgUrl(r,t.domain_id),"');background-size:cover;background-attachment:fixed;background-position:center top;background-repeat:no-repeat;min-height:100vh;}","")}),(0,_.BX)("div",{css:Ru,ref:p,children:[(0,_.tZ)(Xu,{portalStore:t}),0===n.length&&(0,_.BX)("div",{css:Nu,children:[(0,_.tZ)("div",{css:zu,children:(0,_.tZ)(u.JO,{icon:"portal"})}),(0,_.tZ)("div",{css:Mu,children:lng("nothing to show").caps()})]}),(0,_.tZ)(Hl.a5.Provider,{value:{baseWidth:!(0,d.tq)()&&i.g.consts.WIDGET_BASE_WIDTH-(c.width<1920?8:0)},children:(0,_.tZ)(Hl.Hl,{sortable:t.mayEdit&&!(0,d.tq)(),onSort:function(e){var n=e.new_order;t.newOrder(n)},children:n.map((function(e){var t,n,r=e.widget_type,a=e.data,l=e.widget_id;if("error"===(null==a?void 0:a.res))return(0,_.tZ)(Tu.wf,{icon:"sign_notification",widgetStore:e,editForm:null===(n=Eu.Z[r])||void 0===n?void 0:n.form,children:(0,_.tZ)("div",{css:(0,o.iv)("._title{justify-content:center;}._content{width:",i.g.consts.WIDGET_BASE_WIDTH-i.g.consts.WIDGET_PADDING_SIDE,"px;word-wrap:break-word;font-size:.8em;font-family:monospace;}",""),children:(0,_.tZ)(Pi,{title:lng("an error occurred"),content:a.error_msg||lng("unexpected error occurred"),initialState:!1})})},l);var s=null===(t=Eu.Z[r])||void 0===t?void 0:t.widget,c=s?(0,_.tZ)(s,{widget:e}):(0,_.tZ)(Tu.RO,{widget:e});return c?(0,_.tZ)(J.SV,{children:c},l):null}))})})]})]})})),qu={name:"p800g",styles:"display:block;margin-bottom:20px;img{object-fit:cover;max-height:50vh;width:100%;border-radius:10px;}"},Xu=(0,r.observer)((function(e){var t=e.portalStore,n=t.style,r=(0,d.tq)()?n.strip_img_mobile:n.strip_img_desktop,o=qu;if(r&&r!==Jt.ip){var a=(0,_.tZ)("img",{src:i.g.func.imgUrl(r,t.domain_id)});return(0,_.tZ)("div",{css:o,children:n.strip_img_link?(0,_.tZ)(p.A,{href:n.strip_img_link,newTab:"auto",children:a}):a})}return null}));Blsm.Globals=Au(Au({},Blsm.Globals),{},{PortalView:Fu,PortalStore:Bu.AX});var Lu=n(5367),Uu=n(28904);function Vu(e){return(Vu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Hu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gu(e,t){return(Gu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ju(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ku(e);if(t){var o=Ku(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wu(this,n)}}function Wu(e,t){return!t||"object"!==Vu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ku(e){return(Ku=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var $u=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gu(e,t)}(i,e);var t,n,r,o=Ju(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).moveSubPortal=e.moveSubPortal;var n=e.subPortal,r=n.parent_id,a=n.portal_id,l=n.portal_type||[Bu.Bu.GROUP,Bu.Bu.DOMAIN];return t.title=lng("move to another portal").caps(),t._fields=[{type:"hidden",name:"portal_id",value:a},{type:"single_item",name:"parent_id",label:lng("select portal"),theme:"bright",searchData:function(e,t){var n=e.term;(0,m.SC)("search/portal",{data:{types:l,term:n,exclude:r},method:"POST"},t)}}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("portal/set_parent",Object.assign(e))}},{key:"SaveSuccess",value:function(){(0,v.vm)().closeDialog(),this.moveSubPortal({portal_id:this.values.get("portal_id"),parent_id:this.values.get("parent_id")})}}])&&Hu(t.prototype,n),r&&Hu(t,r),i}(Jt.I);function Yu(e){return function(e){if(Array.isArray(e))return Qu(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Qu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qu(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Qu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ep=function(e,t,n){var r=e.title;return n===e.portal_id&&e.portal_id!==t.portal_id&&(r=r+" - "+t.title),r},tp=(0,o.iv)(".BasicHeader{margin-bottom:15px;background-color:rgba(255, 255, 255, 0.5);}.actions{text-align:",i.g.far,";}",""),np=(0,r.observer)((function(){var e,t,n=(0,a.useContext)(v.l9).getStore("portal");if((0,d.Ju)(lng("portal")),!n.ready)return(0,_.tZ)(Xt.h,{});var r,o=n.portals,l=n.activePortalId,c=n.activePortalStore,f=n.moveSubPortal,m=n.addPortalCallback,g=n.editMode,h=null==c?void 0:c.portalToShow,b=h||{},w=b.poster,O=b.can_edit,k=b.showDeactivatedWidgets,x=b.toggleShowDeactivatedWidgets,S=o.map((function(e){return{val:e.portal_id,label:ep(e,h,l),notActive:!(0,d.P$)(e.portal_active),iconFar:l==e.portal_id&&e.group_id?"enter":null,iconFarLink:e.group_id&&(0,p.p4)({workspace:e.group_id})}})),j=!1;(null==c?void 0:c.subs.length)>0&&(j=[],c.subPortalId&&j.push({val:"..",label:lng("parent").caps()}),(r=j).push.apply(r,Yu(c.subs.map((function(e){return{val:e.portal_id,label:e.title}})))),j.push({val:"new",label:lng("new sub page")}));var C=function(e){(0,d.B5)(e)?n.setSubPortalId(e,!0):"new"===e?(0,v.vm)().openDialog("form",new Uu.q({addPortalCallback:m,newPortalInfo:{portal_type:Bu.Bu.SUB,parent_id:c.portal_id,portal_active:!0}})):".."===e&&n.setSubPortalId(null,!0)};return(0,_.tZ)(Bu.rN.Provider,{value:n,children:(0,_.BX)(rt.T,{contBG:!!w,css:tp,children:[(0,_.tZ)(Lt.v7,{headline:rp(),noGradient:!0,tabs:S.length>1||n._activeSubPortalId||g||null!=h&&h.portal_title||null!=h&&h.group_name?{tabs:S,activeTab:l,onSelect:function(e){n.activePortalId=e,n.subPortalId=null},noCaps:!0}:void 0,actions:(0,_.BX)("div",{className:"mobile_off",children:[Blsm.hasPermission("portal_manager")&&!g&&(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return(0,v.vm)().openDialog("form",new Uu.q({addPortalCallback:m,allowAnonymous:n.allowAnonymous,newPortalInfo:{portal_type:Bu.Bu.DOMAIN}}))},children:(0,d.tq)()?lng("create").caps():lng("create portal").caps()}),g&&n.activePortalStore&&(0,_.tZ)(ve.zx,{href:{list:"portals",params:{type:(null===(e=n.activePortalStore)||void 0===e?void 0:e.parent_type)||(null===(t=n.activePortalStore)||void 0===t?void 0:t.portal_type)}},children:lng("manage portals").caps()}),(0,d.P$)(O)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.JO,{icon:"trash",buttonLike:!0,toolTip:lng("delete"),onClick:function(){return n.deletePortal(h)}}),h.parent_id&&(0,_.tZ)(u.JO,{icon:"AssignOutsource",buttonLike:!0,toolTip:lng("move"),onClick:function(){return(0,v.vm)().openDialog("form",new $u({subPortal:h,moveSubPortal:f}))}}),h.mayAddSubPortal&&(j?(0,_.tZ)(s.x,{options:j,onSelect:C,children:(0,_.tZ)(u.JO,{icon:"reply_all",buttonLike:!0})}):(0,_.tZ)(u.JO,{icon:"reply_all",buttonLike:!0,toolTip:lng("new sub page"),onClick:function(){return C("new")}})),(0,_.tZ)(u.JO,{icon:"settings",toolTip:lng("settings"),buttonLike:!0,onClick:function(){return(0,v.vm)().openDialog("form",new Lu.S({portalStore:h}))}}),h.mayHideWidgets&&(0,_.tZ)(u.JO,{icon:"preview",toolTip:lng("show hidden widgets"),buttonLike:!0,color:k?i.g.colors.dominant_main:void 0,onClick:x}),(0,_.tZ)(u.JO,{icon:"new",toolTip:lng("add widget"),buttonLike:!0,onClick:function(){return(0,v.vm)().openDialog("TypeSelector",(0,Eu.Y)(h))}})]})]})}),c&&h&&(h.loaded?(0,_.tZ)(Fu,{portalStore:h}):(0,_.tZ)(zt.$,{}))]})})})),rp=function(){var e=(0,d.v2)(Blsm.user),t=(new Date).getHours();return(t>=21||t<=4?lng("good night %s",e):t>=5&&t<=11?lng("good morning %s",e):t>=12&&t<=14?lng("good day %s",e):t>=15&&t<=17?lng("good afternoon %s",e):lng("good evening %s",e)).caps()},op=(0,o.iv)("",""),ip=(0,r.observer)((function(e){var t,n,r=e.store,o=e.onClose,i=(0,a.useRef)(null);return(0,_.tZ)(ot.d,{scroll:!0,onClose:o,ref:i,size:"100%",children:(0,_.tZ)("div",{css:op,children:(0,_.tZ)(g.W2,{head:(0,_.tZ)(g.$0,{icon:"menu_overview",title:null===(t=r.data)||void 0===t?void 0:t.assignment_name,onClose:function(){return i.current.close()}}),stickyHead:!0,children:r.ready?(null===(n=r.subs)||void 0===n?void 0:n.length)>0?(0,_.tZ)(Kr.Mz,{assignments:r.subs}):(0,_.tZ)(ta.M,{title:lng("there is nothing here"),subTitle:lng("this master assignment is empty"),icon:"empty_cart"}):(0,_.tZ)(zt.$,{})})})})})),ap=(0,o.iv)(i.g.classes.content_width,";",""),lp=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("category_tree"),t=[{val:0,label:lng("domain categories")},{val:1,label:lng("global categories")}];return(0,d.Ju)("category tree"),(0,a.useEffect)((function(){var t=document.querySelector(".cat_".concat(e._tree.lastSon));t&&t.scrollIntoView({behavior:"smooth",block:"center"})}),[e.tree]),e.ready?(0,_.BX)(rt.T,{children:[(0,_.tZ)(Lt.v7,{headline:lng("category tree"),tabs:Blsm.user.isAdmin?{tabs:t,activeTab:e.tab,onSelect:function(t){return e.setTab(t)}}:void 0,actions:Blsm.checkMod(["","ENT"])?(0,_.tZ)(u.JO,{icon:"new",toolTip:lng("add top level category").caps(),onClick:e.addParentCategory}):void 0}),(0,_.tZ)("div",{css:ap,children:(0,_.tZ)(hn.hM,{tree:e.tree,sortable:!0,onNodeMove:e.moveNode,mayEdit:!0,buttons:[{icon:"new",label:lng("add new sub category").caps(),onClick:function(t){return e.addCategory(t)}},{icon:"edit",label:lng("edit sub category").caps(),onClick:function(t){return e.editCategory(t)}},{icon:"trash",label:lng("delete sub category").caps(),onClick:function(t){return e.deleteCategory(t)}}]})})]}):(0,_.tZ)(Xt.h,{})}));var sp=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("resourceplanning"),t=e.ready,n=e.calendarRef,r=e.viewTypes,o=e.viewType,i=e.allUses,l=e.type,s=e.title,c=e.getEvents,u=e.eventClick,p=e.name,d=e.todayDisabled,f=e.updateFromFC,m=e.fcTitle,g=e.changeDate;return t?(0,_.BX)(rt.T,{internalScrolling:!0,children:[(0,_.tZ)(Lt.v7,{headline:s}),(0,_.BX)(Ba.Z,{side:(0,_.tZ)(up,{allUses:i,name:p,changeDate:g,type:l}),children:[(0,_.tZ)(jl.A,{title:(0,_.tZ)("b",{children:m}),goPrev:function(){return n.current.prev()},goNext:function(){return n.current.next()},goToday:!d&&function(){return n.current.today()},viewType:o,onChangeViewType:function(t){return e.viewType=t,n.current[t]()}}),(0,_.tZ)(Sl,{noHeader:!0,ref:n,onChange:f,initialDate:"",viewType:r[o],events:c,eventClick:u})]})]}):(0,_.tZ)(Xt.h,{})})),cp={name:"umwchj",styles:"overflow-y:auto"},up=(0,r.observer)((function(e){var t=e.type,n=e.allUses,r=e.changeDate,o=e.name;return(0,_.BX)("div",{css:cp,children:[(0,_.tZ)("b",{children:o}),"resource"===t&&(0,_.tZ)(pp,{resourceUses:n,changeDate:r}),"bundle"===t&&(0,_.tZ)(dp,{bundleUses:n,changeDate:r})]})})),pp=(0,r.observer)((function(e){var t=e.resourceUses,n=e.changeDate,o=[{title:lng("name"),sortVal:"assignment_name",input:"text"},{title:lng("time"),sortVal:"start_date",input:"text"},{title:lng("amount"),sortVal:"amount_in_use",input:"text"},{title:lng("capacity"),sortVal:"resource_capacity",input:"text"}],i=(0,r.observer)((function(e){var t=e.row,r=t.assignment_name,o=t.start_date,i=t.amount_in_use,a=t.resource_capacity;return(0,_.BX)("tr",{onClick:function(){return n(o)},children:[(0,_.tZ)(Cn.U6,{children:r}),(0,_.tZ)("td",{children:(0,_.tZ)(G.qp,{time:o})}),(0,_.tZ)("td",{children:i}),(0,_.tZ)("td",{children:a})]})}));return(0,_.tZ)("div",{children:(0,_.tZ)(jn.iA,{cols:o,collection:t,rowIdCol:"assignment_id",loading:null===t,RowRenderer:i,compact:!0,noWindow:!0})})})),dp=(0,r.observer)((function(e){var t=e.bundleUses,n=[{title:lng("name")},{title:lng("description")},{title:lng("category")},{title:lng("email")},{title:lng("location")},{title:lng("amount")},{title:lng("capacity")},{title:""}],o=(0,r.observer)((function(e){var t=e.row,n=t.resource_name,r=t.group_name,o=t.description,i=t.category_name,a=t.resource_email,l=t.resource_location,s=t.resource_amount,c=t.resource_capacity,d=t.resource_id;return(0,_.BX)("tr",{children:[(0,_.tZ)(Cn.U6,{children:n||r}),(0,_.tZ)(Cn.FS,{text:o}),(0,_.tZ)("td",{children:i}),(0,_.tZ)("td",{children:a}),(0,_.tZ)("td",{children:l}),(0,_.tZ)("td",{children:s}),(0,_.tZ)("td",{children:c}),(0,_.tZ)("td",{children:(0,_.tZ)(u.JO,{icon:"calendar",buttonLike:!0,toolTip:lng("view schedule").caps(),onClick:function(){return(0,p.p4)({resourcePlanning:d,type:"resource"},!0)}})})]})}));return(0,_.tZ)("div",{children:(0,_.tZ)(jn.iA,{cols:n,collection:t,rowIdCol:"resource_id",loading:null===t,RowRenderer:o,compact:!0,noWindow:!0})})})),fp=n(84943),mp=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("yearly");return(0,d.Ju)(lng("yearly calendar")),(0,_.tZ)(fp.b.Provider,{value:e,children:(0,_.tZ)(rt.T,{children:e.ready?(0,_.BX)("div",{children:[(0,_.tZ)(Lt.v7,{headline:lng("yearly calendar view"),actions:(0,_.BX)(_.HY,{children:[(0,_.tZ)(y.l,{className:"mobile_off",children:(0,_.tZ)(u.JO,{icon:"arrow_near",onClick:function(){return e.moveYear("down")}})}),(0,_.tZ)("div",{className:"current-year",children:e.year}),(0,_.tZ)(y.l,{className:"mobile_off",children:(0,_.tZ)(u.JO,{icon:"arrow_far",onClick:function(){return e.moveYear("up")}})})]})}),(0,_.tZ)(Ba.Q,{children:(0,_.tZ)(jo.v,{curYear:e.year,eventsArray:e.eventsArray})})]}):(0,_.tZ)(zt.$,{})})})}));var gp,hp,bp={name:"ug2nip",styles:"padding:20px 30px 0;min-height:300px;text-align:center;white-space:nowrap;&:before{content:'';display:inline-block;height:100%;vertical-align:middle;margin-right:-0.25em;}>iframe{display:inline-block;vertical-align:middle;width:100%;height:65vh;}"},yp=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("t2k_echo"),t=e.url,n=e.post,r=e.ready;(0,d.Ju)("t2k echo");var o=[];if(!r)return(0,_.tZ)(Xt.h,{});for(var i in n)o.push({key:i,value:n[i]});return(0,_.tZ)(rt.T,{bottomPadding:!0,children:(0,_.BX)("div",{css:bp,children:[(0,_.tZ)(Lt.v7,{headline:(0,_.BX)(_.HY,{children:[(0,_.tZ)(u.JO,{icon:"light_bulb"})," ",lng("Instructor Insights|timetoknow")]})}),(0,_.tZ)("form",{ref:function(e){return null==e?void 0:e.submit()},method:"post",target:"t2k_echo_iframe",action:t,children:o.map((function(e,t){return(0,_.tZ)("input",{type:"hidden",name:e.key,defaultValue:e.value},t)}))}),(0,_.tZ)("iframe",{width:"100%",height:"auto",name:"t2k_echo_iframe",allowFullScreen:!0,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"})]})})})),vp=n(55762),_p=n(7510);function wp(e){return(wp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Op(e){return function(e){if(Array.isArray(e))return kp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return kp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Sp(e,t){return(Sp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function jp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zp(e);if(t){var o=Zp(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Cp(this,n)}}function Cp(e,t){return!t||"object"!==wp(t)&&"function"!=typeof t?Pp(e):t}function Pp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Zp(e){return(Zp=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Bp={name:"nb756s",styles:"width:200px;height:50px;font-size:1.4em;padding:10px;margin-top:2rem"},Tp={name:"1v5a6de",styles:"width:fit-content;margin:0 auto"},Ep=(gp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sp(e,t)}(i,e);var t,n,r,o=jp(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}(Pp(t=o.call(this,e)),"currentTab",hp,Pp(t)),(0,ir.makeObservable)(Pp(t));var n=e.playlist,r=void 0===n?{}:n;return t.playlist=r,t.playlistId=r.id,t.onSaveSuccess=r.onSaveSuccess,t.confirmButtonLabel=!1,t.onTabsChange("explore"),t.values.set("new",!1),t.onItemSelect=function(e){var n=t.values.get("ids");if(n){var r=n.find((function(t){return t===e}));return t.values.set("ids",r?n.filter((function(t){return t!==e})):[e].concat(Op(n)))}return t.values.set("ids",[e])},t.changeView=function(e){t.values.set("new",!e),t.title=!1===e?lng("add to").caps():lng("create new playlist").caps()},t.clearForm=function(){t.values.set("skills",[]),["lesson_id","lesson_name","lesson_description","lesson_data","lessonfile","lessonfile_url","file_attach_type","extern_iframe"].forEach((function(e){return t.values.set(e,void 0)})),t.onTabsChange("explore")},t.buildFields(),t}return t=i,(n=[{key:"buildFields",value:function(){var e=this;this._fields=[{type:"component",name:"sub_tabs",Render:Rp,props:{tabs:[{icon:"telescope",title:lng("explore content").caps(),name:"explore"},{icon:"sign_plus",title:lng("create new content").caps(),name:"create"}],onChange:function(t){return e.currentTab=t},current:function(){return e.currentTab}}},{type:"row_set",visible:function(){return"create"===e.currentTab},fields:[{type:"component",node:(0,_.tZ)("div",{children:lng("mode").caps()+":"})},{type:"radio",name:"file_attach_type",radioValue:"upload",label:lng("upload"),value:"upload"},{type:"radio",name:"file_attach_type",radioValue:"external",label:lng("link")},{type:"radio",name:"file_attach_type",radioValue:"text",label:lng("text")}]},{type:"text",name:"lesson_name",label:lng("name"),visible:function(){return"create"===e.currentTab},required:function(){return"create"===e.currentTab}},{type:"richtext",name:"lesson_description",label:lng("description"),toolbarOptions:{font:!0,color:!0,link:!0,list:!0,align:!0},visible:function(){return"create"===e.currentTab}},{type:"checkbox",name:"extern_iframe",label:"".concat(lng("in frame")," (").concat(lng("optional"),")"),visible:function(){return"external"===e.values.get("file_attach_type")},value:!0,checkboxValue:!0},{type:"text",name:"lessonfile_url",label:lng("content link"),visible:function(){return"external"===e.values.get("file_attach_type")&&"create"===e.currentTab},required:function(){return"external"===e.values.get("file_attach_type")}},{type:"file",name:"lessonfile",label:lng("content file").caps(),maxSize:Blsm.InitialData.parameters.max_file_size.content,visible:function(){return"upload"===e.values.get("file_attach_type")&&"create"===e.currentTab},required:function(){return"upload"===e.values.get("file_attach_type")}},{type:"richtext",name:"lesson_data",label:lng("text").caps(),toolbarOptions:{font:!0,color:!0,link:!0,media:!0,media_link:!0,list:!0,align:!0},visible:function(){return"text"===e.values.get("file_attach_type")&&"create"===e.currentTab},required:function(){return"text"===e.values.get("file_attach_type")}},{type:"multiple_items",name:"skills",label:lng("skills"),showId:!1,theme:"bright",valueIsMap:!0,objectKeys:["id","label","skill_level"],insert:Blsm.isFeatureEnabled("skills_occupations"),visible:function(){return"create"===e.currentTab},buttons:[{Render:_p.EU}],searchData:function(e,t){(0,m.SC)("skills/autocomplete_skill",{data:{term:e.term||"",id:e.ids||""}},t)}},{type:"component",node:(0,_.tZ)("div",{css:Tp,children:(0,_.tZ)(y.l,{css:Bp,theme:"contained",onClick:function(){return Mp(e,e.clearForm)},children:lng("add to playlist").caps()})}),visible:function(){return"create"===e.currentTab}},{type:"single_item",name:"lesson_id",label:lng("type the content name that you want to add").caps(),poster:!0,visible:function(){return"explore"===e.currentTab},required:function(){return"explore"===e.currentTab},searchData:function(e,t){var n=e.term,r=e.ids;(0,m.SC)("content",{data:{term:n,id:r}},t)}},{type:"component",Render:Ap,props:this,visible:function(){return"explore"===e.currentTab}}],this._prepFields(),this.ready=!0}},{key:"onTabsChange",value:function(e){this.currentTab=e}}])&&xp(t.prototype,n),r&&xp(t,r),i}(Jt.I),hp=function(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}(gp.prototype,"currentTab",[ir.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),gp),Ip={name:"1rx5oht",styles:"width:200px;height:50px;font-size:1.4em;padding:10px"},Ap=(0,r.observer)((function(e){var t=e.values.get("lesson_id");return(0,_.BX)("div",{css:Dp,children:[(0,_.tZ)(u.JO,{className:"search-icon",icon:"search"}),(0,_.tZ)("h1",{children:lng("start searching in order to add content").caps()}),(0,_.tZ)("span",{children:lng("type your desired content").caps()}),t?(0,_.tZ)(y.l,{css:Ip,theme:"contained",onClick:function(){return Mp(e,e.clearForm)},children:lng("add to playlist").caps()}):(0,_.tZ)(y.l,{theme:"outlined",href:{catalog:!0},children:lng("or add from knowledge center").caps()})]})})),Dp=(0,o.iv)("text-align:center;>a{padding:10px;}>span{margin-bottom:50px;display:block;font-size:1.2em;color:",i.g.colors.text_sec,";}>.search-icon{color:",i.g.colors.dark_blue,";margin-top:50px;font-size:100px;}",""),Rp=(0,r.observer)((function(e){var t=e.tabs,n=e.onChange,r=e.current;return(0,_.tZ)("div",{css:zp,children:t.map((function(e,t){var o=e.icon,i=e.title,a=e.name;return(0,_.BX)("div",{onClick:function(){return n(a)},css:Np(r()===a),children:[(0,_.tZ)(u.JO,{icon:o})," ",(0,_.tZ)("span",{children:i})]},t)}))})})),Np=function(e){return(0,o.iv)("color:",e?i.g.colors.dominant_main:i.g.colors.text_sec,";border-bottom:",e?"1px solid "+i.g.colors.dominant_main:"none",";padding:10px;>span{",i.g.classes.margin_near("10px"),";font-size:1.4em;font-weight:600;}","")},zp={name:"dhweq7",styles:"display:flex;justify-content:space-around;&:hover{cursor:pointer;}"};function Mp(e,t){var n,r=e.playlist,o=e.currentTab;if("create"===o){var i,a;if(null!==(i=e.fileList)&&void 0!==i&&i.some((function(e){return""===e.temp_name})))return void(0,Tn.qR)(lng("please wait for all uploads to complete.").caps());var l=null===(a=e.fileList)||void 0===a?void 0:a.map((function(e){return{temp_name:e.temp_name,name:e.file_name}})).filter((function(e){var t;return(null===(t=e.temp_name)||void 0===t?void 0:t.length)>0})),s=[],c=e.values.get("skills");c&&(0,d.Nw)(c)&&c.forEach((function(e){return s.push(e)})),n={playlist_id:e._id||e.playlistId,lesson_id:e.values.get("lesson_id"),lesson_name:e.values.get("lesson_name"),lesson_description:e.values.get("lesson_description"),lesson_data:e.values.get("lesson_data"),skills:s,lessonfile:e.values.get("lessonfile"),lessonfile_url:e.values.get("lessonfile_url"),file_attach_type:e.values.get("file_attach_type"),extern_iframe:e.values.get("extern_iframe"),assign_to_domain:!0,dnduploadfiles:l}}"explore"===o&&(n={playlist_id:e.playlistId,lesson_id:e.values.get("lesson_id"),file_attach_type:"select"}),(0,m.SC)("channel/create_playlist_item",{method:"POST",data:n},(function(e){var n,o;return r.onAddItem(e),t(),null===(n=(0,v.vm)().selfUserStore)||void 0===n||null===(o=n.channelStore)||void 0===o||o.invalidate(),(0,Po.qV)(lng("content added successfully"))}))}function Fp(e){return(Fp="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qp(e){return function(e){if(Array.isArray(e))return Xp(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xp(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xp(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xp(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Up(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lp(Object(n),!0).forEach((function(t){Vp(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vp(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hp(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gp(e,t){return(Gp=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Jp(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$p(e);if(t){var o=$p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wp(this,n)}}function Wp(e,t){return!t||"object"!==Fp(t)&&"function"!=typeof t?Kp(e):t}function Kp(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $p(e){return($p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Yp={name:"1w03b31",styles:"display:flex;.Button{margin:0 auto;}"},Qp=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Gp(e,t)}(i,e);var t,n,r,o=Jp(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),(0,ir.makeObservable)(Kp(t));var n=e.onSaveSuccess,r=e.playStore,a=r.playlist,l=void 0===a?{}:a;return t.playStore=r,t.onSaveSuccess=n,t.initialValues=Up(Up({},l._attr),{},{skills:qp(l.skills)}),t.playlist_id=t.initialValues.playlist_id,t.channel_Id=t.initialValues.channel_Id,t.title=!1,t.buildFields(),t._prepFields(t.initialValues),t.ready=!0,t}return t=i,(n=[{key:"buildFields",value:function(){var e=this;this._fields=[{type:"text",name:"playlist_name",label:lng("name"),required:!0,maxLength:200,value:this.playStore.title},{type:"checkbox",name:"status",label:lng("active"),value:this.playStore.status},{type:"component",node:(0,_.tZ)("div",{css:Yp,children:(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return e.saveEdit(e.values)},children:lng("save").caps()})})}]}},{key:"saveEdit",value:function(e){var t=this,n=e.get("playlist_name"),r=e.get("status")?1:0;(0,m.SC)("channel/edit_playlist_details",{data:{playlist_name:n,status:r,channel_id:this.channel_id,playlist_id:this.playlist_id},method:"POST"},(function(){var e,o;return t.onSaveSuccess(),t.playStore.updatePlaylist({title:n,status:r}),null===(e=(0,v.vm)().selfUserStore)||void 0===e||null===(o=e.channelStore)||void 0===o||o.invalidate(),(0,Po.qV)(lng("updated successfully"))}))}}])&&Hp(t.prototype,n),r&&Hp(t,r),i}(Jt.I);function ed(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function td(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ed(Object(n),!0).forEach((function(t){nd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ed(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function nd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var rd=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("play");(0,d.Ju)(lng("dashboard"));var t=e.ready,n=e.editDetailsDrawer;return t?(0,_.tZ)(rt.T,{children:(0,_.BX)(Ht.c_,{children:[(0,_.tZ)(ad,{}),(0,_.tZ)(cd,{}),n&&(0,_.tZ)(ld,{})]})}):(0,_.tZ)(Xt.h,{})})),od=(0,o.iv)("min-width:400px;",i.g.classes.border_far("1px solid ".concat(i.g.colors.separator)),";min-height:calc(100vh - ",i.g.consts.TOP_BAR_HEIGHT,"px);.content-list{height:100vh;overflow-y:scroll;}.list-header{margin:10px 20px;.back-to-btn{margin:10px 0;}.header-title{display:flex;justify-content:space-between;align-items:center;.Icon{color:",i.g.colors.text_sec,";&:hover{cursor:pointer;}}}}",""),id={name:"u34rzg",styles:"border-radius:50px"},ad=(0,r.observer)((function(){var e,t,n=(0,a.useContext)(v.l9).getStore("play"),r=n.playlist,o=n.listId,i=n.playlistTitle,l=n.playlistItems,s=[];return null==l||l.forEach((function(e,r){var o=e._attr,i=o.assignment_id,a=o.assignment_name,l=o.lesson_name,c=o.assignment_image,u=td(td({},e),{},{key:r,id:i,poster:c,label:a||l,mayEdit:parseInt(e._attr.owner_id)===parseInt(Blsm.user.id),active:i===n.activePlayItem});i===n.activePlayItem&&(t=r+1),s.push(u)})),n.activePlayItem&&(n.nextItemId=null===(e=s[t>=s.length?0:t])||void 0===e?void 0:e.id),(0,_.BX)("div",{css:od,children:[(0,_.BX)("div",{className:"list-header",children:[(0,_.tZ)(y.l,{className:"back-to-btn",theme:"contained",onClick:function(){n.createMode=!1,(0,p.p4)({user:r._attr.owner_id,tab:"channel"},!0)},children:lng("go to channel").caps()}),(0,_.BX)("div",{className:"header-title",onClick:function(){return n.toggleEditPlaylistDetails()},children:[(0,_.tZ)("h2",{className:"title",children:i}),(0,_.tZ)(u.JO,{icon:"settings",buttonLike:!0})]}),(0,_.tZ)("h4",{children:r._attr.owner_name.caps()}),(0,_.tZ)("div",{children:(0,_.BX)(y.l,{css:id,theme:"contained",chunky:!0,bold:!0,onClick:function(){return n.toggleCreateMode()},children:[(0,_.tZ)(u.JO,{icon:"mark_plus"})," ",lng("create new content").caps()]})})]}),(0,_.tZ)("div",{className:"content-list",children:(0,_.tZ)(Jr.b,{onSort:function(e){return function(e,t){return t.forEach((function(t){t.order=e.indexOf(t._attr.assignment_id+"")})),(0,m.SC)("channel/playlist_ordering",{method:"POST",data:{ordering:e,playlist_id:o}})}(e.new_order,s)},children:s.map((function(e){return(0,_.tZ)(ud,{item:e,listId:o,active:e.active,playlist:r},e.id)}))})})]})})),ld=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9).getStore("play"),t=(0,a.useRef)(null),n=(0,a.useRef)(new Qp({playStore:e,onSaveSuccess:function(){return t.current.close()}})).current;return(0,_.tZ)(ot.d,{size:"600px",from:"side",onClose:function(){return e.toggleEditPlaylistDetails()},ref:t,scroll:!0,children:(0,_.tZ)(g.W2,{head:(0,_.tZ)(g.$0,{title:"edit playlist",icon:"edit",onClose:function(){return t.current.close()},stickyHead:!0}),children:(0,_.tZ)(Jt.q3.Provider,{value:n,children:(0,_.tZ)(A.l,{form:n,internalForm:!0,type:"inline"})})})})})),sd=(0,o.iv)("padding:20px;flex-grow:1;.new-item-form{width:800px;margin:0 auto;}.launcher-iframe{background-color:",i.g.colors.disabled_background,";vertical-align:bottom;border:0;box-shadow:0 0 3px ",i.g.colors.separator,";&.empty{text-align:center;font-size:2em;color:white;padding-top:20%;}}>.bottom{padding:25px 15px;>.description{font-size:1.1em;color:",i.g.colors.disabled_text,";font-weight:550;}>.toolbar{display:flex;justify-content:space-between;>.info{display:flex;flex-direction:column;>.title{font-size:1.8rem;font-weight:600;padding-bottom:10px;}>.time{margin:10px 0;}}>.buttons{>div{display:flex;}}}>.comments{padding-top:30px;",i.g.classes.padding_near("10px"),";}}.add-to-btn{border-radius:10px;margin:0 8px;}.next-btn{margin:0 8px;}",""),cd=(0,r.observer)((function(){var e,t=(0,a.useContext)(v.l9),n=t.getStore("play"),r=n.playlist,o=n.assignmentPlaying,l=void 0===o?{}:o,s=null==l||null===(e=l.commentsInfo)||void 0===e?void 0:e.connect,c=l.assignment_id,m=l.title,g=l.commentsInfo,h=l.description,b=l.views,w=l.bookmarked,O=l.mayLike,k=l.isAssignmentCommentsLock,x=l.mayEditCommetns,S=l.mayDeleteComments,j=l._attr,C=null==j?void 0:j.skills;(0,f.iP)();var P=(0,a.useRef)(new Ep({playlist:r})).current;return(0,_.tZ)("div",{css:sd,children:c&&!n.createMode?(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{css:i.g.classes.iframeVideoSize,children:(0,_.tZ)("iframe",{className:"launcher-iframe",src:(0,p.p4)({launcher:"assignment",id:n.activePlayItem,iframe:!0}),allowFullScreen:!0,allow:"microphone *; camera *; fullscreen *; autoplay *"})}),(0,_.BX)("div",{className:"bottom",children:[(0,_.BX)("div",{className:"toolbar",children:[(0,_.BX)("div",{className:"info",children:[(0,_.tZ)("span",{className:"title",children:m}),C&&(0,_.tZ)(Lo.r,{children:C.map((function(e){return(0,_.tZ)(Lo.V,{tag:e.label,color:(0,Va.r0)(e.skill_level).color,smaller:!0,tooltip:e.description},e.id)}))}),b>0&&(0,_.BX)("span",{children:[(0,_.tZ)(u.JO,{icon:"user"})," ",(0,d.lo)(b)," ",lng("views")]}),(0,_.tZ)(G.qp,{className:"time",time:j.creation_time,showTime:!1})]}),(0,_.tZ)("div",{className:"buttons",children:(0,_.BX)("div",{children:[(0,_.BX)(y.l,{className:"next-btn",theme:"outlined",onClick:function(){return n.assignmentId=n.nextItemId,n.activePlayItem=n.nextItemId},children:[lng("next").caps()," ",(0,_.tZ)(u.JO,{icon:"arrow_to_right"})]}),(0,_.tZ)("div",{style:{fontSize:"1.5rem"},children:(0,d.DM)(w)&&(0,_.tZ)(jt.rp,{entity:l,onClick:function(){var e;return null===(e=l.toggleBookmark)||void 0===e?void 0:e.call(l)}})}),(0,_.tZ)("div",{style:{fontSize:"1.5rem",margin:"0 8px"},children:O&&(0,_.tZ)(jt.dR,{entity:l,onClick:function(){var e;return null===(e=l.toggleLike)||void 0===e?void 0:e.call(l)}})}),(0,_.tZ)("div",{style:{fontSize:"1.5rem",margin:"0 8px"},children:(0,_.tZ)(u.JO,{color:n.displayComments?i.g.colors.dominant_main:"",onClick:function(){return n.toggleComments()},badge:g.count,icon:"discussion"})}),(0,_.tZ)(y.l,{className:"add-to-btn",theme:"contained",onClick:function(){return r.onItemMove(l.assignment_id,r.id)},children:lng("add to").caps()})]})})]}),(0,_.tZ)("div",{className:"description",children:h.isHtml?(0,_.tZ)(wr.x,{content:null==h?void 0:h.text}):(0,_.tZ)("div",{children:null==h?void 0:h.text})}),n.displayComments&&(0,_.tZ)("div",{className:"comments",children:(0,_.tZ)(go.H,{commentsStore:t.getStore("comments",s),connectTo:s,locked:k,editable:x,deletable:S})})]})]}):n.createMode?(0,_.tZ)("div",{className:"new-item-form",children:(0,_.tZ)(Jt.q3.Provider,{value:P,children:(0,_.tZ)(A.l,{form:P,internalForm:!0,type:"inline"})})}):(0,_.tZ)("div",{css:i.g.classes.iframeVideoSize,children:(0,_.tZ)("div",{className:"launcher-iframe empty MediaPlayer",children:lng("nothing to show").caps()})})})})),ud=function(e){return(0,_.tZ)(vp.SV,{children:(0,_.tZ)(pd,td({},e))})},pd=(0,r.observer)((function(e){var t=e.item,n=e.listId,r=e.active,o=e.playlist,l=(0,a.useContext)(Jr.y),c=(0,a.useContext)(v.l9).getStore("play"),d=t._attr,f=d.assignment_name?d.assignment_name:d.lesson_name,m="File"===d.type_title&&""===d.lesson_file_type?"Link":d.type_title,g=d.owner_full_name;return(0,_.tZ)(p.A,{href:{play:d.assignment_id,playlist:n},onClick:function(){return c.toggleCreateMode(!1)},children:(0,_.BX)("div",{css:dd(t.poster,r),className:"playlist-item",children:[(0,_.tZ)("div",{className:"item-state",children:l&&(0,_.tZ)("span",td(td(td({},l.attributes),l.listeners),{},{children:(0,_.tZ)(u.JO,{iconClass:"state-icon",icon:r?"play":"equals",color:r?i.g.colors.dominant_main:i.g.colors.disabled_text})}))}),(0,_.BX)("div",{className:"item-poster-type",children:[(0,_.tZ)("div",{className:"item-poster"}),(0,_.tZ)("div",{className:"item-type",children:m&&(0,_.tZ)("div",{className:"item-type-title",css:i.g.classes.content_type_style,children:m.caps()})})]}),(0,_.BX)("div",{className:"title-author",children:[(0,_.tZ)("div",{className:"item-title",children:f}),(0,_.tZ)("div",{className:"item-author",children:g})]}),(0,_.tZ)("div",{className:"item-actions invisible",children:o.menuOptions&&(0,_.tZ)(s.x,{className:"actions",options:o.menuOptions(t.id),children:(0,_.tZ)(u.JO,{color:i.g.colors.text_main,icon:"menu_h",buttonLike:!0})})})]})})})),dd=function(e,t){return(0,o.iv)("display:flex;height:115px;justify-content:space-around;overflow-y:scroll;background-color:",t?i.g.colors.background_dark:"",";padding:10px 0;margin:5px 0;.invisible{visibility:hidden;display:flex;align-items:center;}&:hover,&.item-selected{.invisible{visibility:visible;}}.item-actions{display:flex;justify-content:space-between;.actions{align-self:start;}}.item-state{align-self:center;font-size:25px;width:3%;}.item-poster-type{display:flex;flex-direction:column;.item-type{width:100%;border-radius:0;.item-type-title{width:100px;text-align:center;}}.item-poster{width:100px;height:100%;background-repeat:no-repeat;background-size:cover;background-position:center top;background-image:url(",e,");}}.title-author{text-align:",i.g.near,";width:50%;padding:10px;display:flex;flex-direction:column;justify-content:space-evenly;.item-title{font-weight:700;}}>span{align-self:center;}","")};function fd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return md(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return md(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function md(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gd=(0,a.lazy)((function(){return n.e(583).then(n.bind(n,86678)).then((function(e){return{default:e.TestPage}}))})),hd=(0,a.lazy)((function(){return n.e(263).then(n.bind(n,96080)).then((function(e){return{default:e.ReportsPage}}))})),bd={home:bu.U,messages:Bc,calendar:Wc,edit:hi,list:bi.q,sql:su,search:cu,import:hu,reports:hd,dashboard:Zu,cregistration:El,catalog:Gl,library:ts,portal:np,category_tree:lp,resourceplanning:sp,yearly:mp,challenges:Xs,t2k_echo:yp,play:rd,test:gd},yd=(0,r.observer)((function(){return(0,_.BX)(_.HY,{children:[(0,_.tZ)(J.bg,{children:(0,_.tZ)(vd,{})}),(0,_.tZ)(_d,{})]})})),vd=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9),t=fd(e.mainRoute,1)[0],n=bd[t];if(n)return(0,_.tZ)(a.Suspense,{fallback:(0,_.tZ)(zt.$,{}),children:(0,_.tZ)(n,{})});switch(t){case"groups":return e.mainRoute[1]?(0,d.B5)(e.mainRoute[1])?(location.replace((location.href+"").replace("#groups","#workspace")),null):(0,_.tZ)(rt.T,{children:(0,_.tZ)("div",{style:{textAlign:"center",border:"1px solid red"},children:lng("invalid URL").caps()})}):(location.replace((location.href+"").replace(/#.*/,"#home")),null);case"workspace":var r=e.mainRoute[1];if("personal"===r)return(0,_.tZ)(fi,{});if((0,d.B5)(r))return(0,_.tZ)(ai,{id:r});break;case"user":var o=e.mainRoute[1];if((0,d.B5)(o))return(0,_.tZ)(cc,{id:o})}return e.overlayRoute.length>0?null:(0,_.tZ)(rt.T,{children:(0,_.BX)("div",{style:{textAlign:"center",border:"1px solid red"},children:[e.mainRoute.join("/")," - not found!"]})})})),_d=(0,r.observer)((function(){var e=(0,a.useContext)(v.l9);switch(fd(e.overlayRoute,1)[0]){case"edit":return(0,_.tZ)(J.bg,{children:(0,_.tZ)(hi,{onDialogClose:function(){return e.closeOverlay()}})});case"master":var t=fd(e.overlayRoute,3),n=t[0],r=t[1],o=t[2];return(0,_.tZ)(J.bg,{children:(0,_.tZ)(ip,{store:e.getStore(n,r),onClose:function(){return e.closeOverlay((0,d.B5)(o)?(0,p.p4)({workspace:o}).slice(1):null)}})})}return null})),wd=n(45697),Od=n.n(wd);function kd(e){return function(e){if(Array.isArray(e))return jd(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Sd(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Sd(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Sd(e,t){if(e){if("string"==typeof e)return jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jd(e,t):void 0}}function jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Cd=(0,o.iv)("height:",(0,d.tq)()?"calc(100vh - 130px)":"75vh",";>div{display:flex;}.topics{flex-basis:180px;",i.g.classes.margin_far((0,d.tq)()?"20px":"80px"),";margin-top:",(0,d.tq)()?10:30,"px;>div{cursor:pointer;padding:5px 12px;margin:3px;>span{display:",(0,d.tq)()?"inline":"inline-block",";padding:0 6px;}&:hover{background-color:",i.g.colors.light_blue2,";border-radius:10px;color:#FFF;}&.selected{background-color:",i.g.colors.light_blue,";border-radius:10px;color:#FFF;}}}.types{flex-basis:75%;flex-grow:1;height:",(0,d.tq)()?"calc(100vh - 150px)":"calc(75vh - 20px)",";overflow:auto;>div{display:flex;flex-wrap:wrap;}.type-box{border:1px solid ",i.g.colors.separator,";border-radius:10px;padding:10px 7px;margin:6px;width:",(0,d.tq)()?"100%":"230px",";min-height:50px;cursor:pointer;&:hover{",i.g.classes.shadow_strong,";}.type-topic{color:#FFF;padding:5px 12px;border-radius:7px;font-size:.9em;display:inline-block;}.type-type{font-size:1.1em;font-weight:600;color:",i.g.colors.text_main,";margin:8px 0;}.type-text{font-size:.9em;color:",i.g.colors.text_sec,";}}}",""),Pd=function(e){var t=e.types,n=e.topics,r=e.onSelect,o=xd((0,a.useState)(""),2),l=o[0],s=o[1],c=kd(new Set(t.map((function(e){return e.topic})))),f=l?t.filter((function(e){return e.topic===l})):t;return(0,_.tZ)("div",{css:Cd,children:(0,_.BX)("div",{children:[(0,_.BX)("div",{className:"topics",children:[(0,_.BX)("div",{className:(0,d.AK)({selected:""===l}),onClick:function(){return s("")},children:[(0,_.tZ)(u.gT,{color:""===l?i.g.colors.light_blue2:i.g.colors.grey}),(0,_.tZ)("span",{style:{fontWeight:"600"},children:lng("all categories").caps()})]}),c.map((function(e){return(0,_.BX)("div",{className:(0,d.AK)({selected:l===e}),onClick:function(){return s(e)},children:[(0,_.tZ)(u.gT,{color:l===e?i.g.colors.light_blue2:n[e].color}),(0,_.tZ)("span",{children:n[e].label.caps()})]},e)}))]}),(0,_.tZ)("div",{className:"types",children:(0,_.tZ)("div",{children:f.map((function(e){return(0,_.BX)("div",{className:"type-box",onClick:function(){return(0,v.vm)().closeDialog(),void(e.action?(0,d.Wl)(e.action)?e.action():(0,p.p4)(e.action,!0):r&&r(e.type))},children:[(0,_.tZ)("div",{className:"type-topic",style:{backgroundColor:n[e.topic].color},children:n[e.topic].label.caps()}),(0,_.tZ)("div",{className:"type-type",children:e.typeLabel.caps()}),(0,_.BX)("div",{className:"type-text",children:[e.text.caps(),"."]})]},e.type)}))})})]})})};function Zd(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Td(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ed(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ed(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ed(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Id=(0,r.observer)((function(){var e,t,n,r=Td((0,a.useState)(""),2),o=r[0],i=r[1],l=(0,a.useContext)(v.l9),s=l.mainDialog,c=s.dialog,f=s.data,m=s.options,h=null,b=null,y=function(e){var t;null!==(t=b)&&void 0!==t&&t.dirty?((0,d.g4)(e),s.closeConfirm=!0):l.closeDialog()},w=null!=m&&m.hideX?null:null!=m&&m.onClose?function(){return m.onClose(y)}:y;switch(c){case"comments":b=f,h=(0,_.tZ)(go.H,{commentsStore:b,connectTo:b.connectTo,setTitle:function(e){return i(e)}});break;case"form":b=f,h=(0,_.tZ)(A.l,{options:m,form:f,onClose:w,title:f.title,inDialog:!0,fitContent:null==m?void 0:m.fitContent,hideX:null==m?void 0:m.hideX});break;case"TypeSelector":h=(0,_.tZ)(Pd,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zd(Object(n),!0).forEach((function(t){Bd(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zd(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},f)),e=(0,d.tq)()?"100%":"70vw",t=f.title;break;case"Component":h=f.child,t=f.title,e=f.width,n=f.headExtra||null;break;case"Launcher":h=(0,_.BX)("div",{children:[f._attr.lesson_author&&(0,_.BX)("div",{style:{fontWeight:"600",marginBottom:"6px"},children:[lng("by").caps(),": ",f._attr.lesson_author,(0,_.tZ)("br",{})]}),f._attr.modification_time&&(0,_.BX)("div",{style:{fontWeight:"500",marginBottom:"6px",textDecoration:"underline"},children:[lng("last modified").caps(),": ",(0,pt.GG)(f._attr.modification_time,{date:!0,time:!0}),(0,_.tZ)("br",{})]}),(0,_.tZ)(wr.x,{content:f.attr("lesson_text_data")})]}),t=f.title,e="800px",n=(0,_.tZ)(Er.b,{children:(0,_.tZ)(u.JO,{icon:"popout",toolTip:lng("open in a new tab").caps(),onClick:function(){window.open((0,p.p4)(f.link)),l.closeDialog()}})})}if(h){var O,k=(0,_.BX)(_.HY,{children:["form"===c?h:(0,_.tZ)(g.T,{title:t||o,onClose:w,width:e,headExtra:n,hideX:null==m?void 0:m.hideX,children:h}),s.closeConfirm&&(0,_.tZ)(Tn.I4,{onConfirm:l.closeDialog,onCancel:function(){var e;s.closeConfirm=!1,null===(e=f.backFromDirty)||void 0===e||e.call(f)},title:lng("discard changes"),confirmText:lng("close without saving"),children:lng("there are unsaved changes, are you sure you want to close the dialog?").caps()})]});return null!==(O=s.options)&&void 0!==O&&O.noState||(0,d.w1)()?k:(0,_.tZ)(Ad,{beforeClose:w,children:k})}return null})),Ad=function(e){var t=e.beforeClose,n=e.children;return(0,f.IV)(t,"DialogOpener"),(0,_.tZ)(_.HY,{children:n})};Ad.propTypes={beforeClose:Od().func,children:Od().node};n(66418);var Dd=n(77678);function Rd(e){return(Rd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Nd(e,t){return(Nd=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function zd(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fd(e);if(t){var o=Fd(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Md(this,n)}}function Md(e,t){return!t||"object"!==Rd(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Fd(e){return(Fd=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var qd=(0,o.iv)(".tagline{color:",i.g.colors.text_main,";font-weight:700;text-align:center;font-size:1.3rem;margin-bottom:10px;}.sub-title{display:block;text-align:center;font-weight:600;}.msg{display:block;color:",i.g.colors.positive,";text-align:center;margin-top:10px;font-size:0.9rem;&.error{color:",i.g.colors.negative,";}}.main_button{width:100%;border-radius:12px;padding:10px 0;margin-top:17px;}.bottom_link{text-align:center;margin-top:20px;font-weight:600;margin:20px -20px -20px -20px;background:",i.g.colors.bg_1,";padding:10px 0;a{color:",i.g.colors.dominant_main,";}}.password_meter{margin:20px 0;}",""),Xd=(0,r.observer)((function(){var e,t=(0,a.useRef)(),n=(0,a.useRef)(),r=(0,a.useRef)(new Ld).current,l=Blsm.InitialData,s=l.auth_details,c=l.sms_otp,f=l.login_providers,m=void 0===f?{}:f,g=l.login_error,h=l.no_account_message,b=void 0;if(!s&&(m.google||m.facebook||m.saml)){b="";var v=$.deparam(location.search.substring(1));v.dir&&(b+="&dir="+encodeURIComponent(v.dir)),v.hash&&(b+="&hash="+encodeURIComponent(v.hash))}var w=(0,ir.get)(r.values,"t_username")&&(0,ir.get)(r.values,"t_password"),O=function(e){var r;if(null===(r=e.preventDefault)||void 0===r||r.call(e),w){var o=n.current;!o||o.getValue()?t.current.submit():o.execute()}},k=(0,d.Lv)(),x=k.dir,S=k.hash,j=h?qe.LZ:"div";return(0,_.BX)("div",{css:[(0,o.iv)(">.ext_auth{text-align:center;margin-top:20px;>a{display:block;width:100%;border-radius:12px;border:1px solid ",i.g.colors.separator,";padding:9px 0;margin-top:15px;cursor:pointer;background-color:",i.g.colors.yellow,";color:",i.g.colors.text_main,";img{height:16px;vertical-align:sub;}}}.grecaptcha-badge{margin:15px auto 0;}.saml_button{background-color:",i.g.colors.yellow,";}.other-login-separator{display:flex;>span{display:block;border-top:1px solid ",i.g.colors.separator,";width:100%;position:relative;top:10px;margin:0 6px;}>div{flex-grow:1;white-space:nowrap;color:",i.g.colors.text_sec,";}}",""),qd,"",""],children:[(0,_.tZ)("div",{className:"tagline",children:(s?lng("welcome %s",s.auth_name):lng("welcome!")).caps()}),c&&(0,_.tZ)("div",{className:"sub-title",children:lng("enter your username & password").caps()}),h&&(0,_.tZ)(wr.x,{content:h}),g&&(0,_.tZ)(j,{className:"msg error",children:g}),s&&(0,_.tZ)("div",{className:"msg",children:lng("please enter your login details to connect your %s account.",s.auth_provider).caps()}),(0,_.tZ)(Jt.q3.Provider,{value:r,children:(0,_.BX)("form",{autoComplete:"off",method:"post",ref:t,onSubmit:O,children:[(0,_.tZ)(wa.au,{input:r.fields}),(0,_.tZ)("input",{type:"submit",hidden:!0}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!w,onClick:O,children:lng("continue").caps()}),Blsm.InitialData.recaptcha_key&&(0,_.tZ)(Dd.Z,{sitekey:Blsm.InitialData.recaptcha_key,size:"invisible",badge:"inline",ref:n,onChange:O}),s&&(0,_.tZ)(y.l,{className:"main_button",theme:"outlined",onClick:function(){return window.location="?"},children:lng("cancel").caps()})]})}),(0,d.B5)(Blsm.user.id)&&(0,_.tZ)("div",{className:"ext_auth",children:(0,_.tZ)(p.A,{href:(x||Blsm.prm.index_url)+("vendev"in(0,d.Lv)()?"?vendev":"")+(S?"#"+S:""),children:lng("enter as %s",(0,d.v2)(Blsm.user.real_data||Blsm.user)).caps()})}),(c||void 0!==b)&&(0,_.BX)("div",{className:"ext_auth",children:[(0,_.BX)("div",{className:"other-login-separator",children:[(0,_.tZ)("span",{}),(0,_.tZ)("div",{children:lng("or login with").caps()}),(0,_.tZ)("span",{})]}),c&&(0,_.BX)(p.A,{href:"#sms",children:[(0,_.tZ)(u.JO,{icon:"mobile"})," ",lng("code via text message").caps()]}),null===(e=m.saml)||void 0===e?void 0:e.map((function(e){return(0,_.BX)(p.A,{href:"".concat(Blsm.prm.Mainref,"oauth?s=saml").concat(b,"&id=").concat(e.id),className:"saml_button",children:[(0,_.tZ)(u.JO,{icon:"suitcase"})," ",(e.login_button_text||lng("organization login")).caps()]},e.id)})),m.google&&(0,_.BX)(p.A,{href:"".concat(Blsm.prm.Mainref,"oauth?s=google").concat(b),children:[(0,_.tZ)(u.JO,{icon:"google"})," ",lng("continue with google").caps()]}),m.facebook&&(0,_.BX)(p.A,{href:"".concat(Blsm.prm.Mainref,"oauth?s=facebook").concat(b),children:[(0,_.tZ)(u.JO,{icon:"facebook"})," ",lng("continue with facebook").caps()]})]}),Blsm.prm.register_link&&(0,_.BX)("div",{className:"bottom_link",children:[lng("don't have an account?").caps()," ",(0,_.tZ)(p.A,{href:Blsm.prm.register_link,children:lng("sign up").caps()})]})]})})),Ld=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Nd(e,t)}(n,e);var t=zd(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this);var r=Blsm.InitialData,o=r.t_username,a=r.t_remember,l=r.auth_details;return e._fields=[{type:"hidden",name:"t_login",value:1},{type:"text",name:"t_username",placeholder:lng("login name",{phrase:!0}).caps(),value:o,focusOnShow:!o},{type:"password",name:"t_password",placeholder:lng("password",{phrase:!0}).caps(),autoComplete:"current-password",focusOnShow:!!o},{type:"row_set",fields:[{type:"checkbox",name:"t_remember",label:lng("remember me"),value:a,insert:!(0,d.R4)()&&!Blsm.prm.inactivity_logout},{type:"component",node:(0,_.tZ)("div",{style:{textDecoration:"underline"},onClick:function(){return window.ReactNativeWebView.postMessage("detach")},children:lng("back to connect screen").caps()}),insert:(0,d.R4)()},{type:"component",node:(0,_.tZ)("div",{children:(0,_.tZ)(p.A,{href:"#recovery",style:{whiteSpace:"nowrap",color:i.g.colors.dominant_main},children:lng("forgot password?").caps()})}),skinny:!0,align:i.g.far}]}],l&&e._fields.push({type:"hidden",name:"auth_provider",value:l.auth_provider},{type:"hidden",name:"auth_id",value:l.auth_id}),e._prepFields(),e}return n}(Jt.I);function Ud(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Vd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Vd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Vd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hd=(0,r.observer)((function(){var e=Blsm.InitialData.sms_active,t=Ud((0,a.useState)(!1),2),n=t[0],r=t[1],o=Ud((0,a.useState)(""),2),i=o[0],l=o[1],s=Ud((0,a.useState)(""),2),c=s[0],u=s[1],f=Ud((0,a.useState)(""),2),g=f[0],h=f[1],b=Ud((0,a.useState)(!1),2),v=b[0],w=b[1],O=Ud((0,a.useState)(""),2),k=O[0],x=O[1],S=Ud((0,a.useState)(""),2),j=S[0],C=S[1],P=(0,a.useRef)();(0,a.useEffect)((function(){return function(){var e;return null===(e=P.current)||void 0===e?void 0:e.abortFetch()}}),[]);var Z=function(){r(!0),P.current=(0,m.SC)("login/recover_password",{method:"POST",data:{username:i,email:c},onComplete:function(){return r(!1)}},(function(e){h(e.msg),w(e.error)}))},B=function(){r(!0),P.current=(0,m.SC)("login/recover_user_name",{method:"POST",data:{email:k},onComplete:function(){return r(!1)}},(function(e){C(e)}))},T=!n&&i&&(e?c:(0,d.s$)(c)),E=!n&&(0,d.s$)(k),I=function(e){return T&&"Enter"===e.key&&Z()};return(0,_.BX)("div",{css:[qd,"",""],children:[(0,_.tZ)("div",{className:"tagline",children:lng("forgot your password? no worries!").caps()}),(0,_.tZ)(wa.gN,{input:{type:"text",name:"rec_username",placeholder:lng("login name",{phrase:!0}).caps(),maxLength:50,onKeyUp:I},value:i,onChange:l}),(0,_.tZ)(wa.gN,{input:{type:"text",name:"rec_email",placeholder:e?lng("email").caps()+" / "+lng("mobile phone").caps():lng("email").caps(),onKeyUp:I},value:c,onChange:u}),g&&(0,_.tZ)("div",{className:(0,d.AK)("msg",{error:v}),children:g.split("\n").map((function(e,t){return(0,_.tZ)("div",{children:e},t)}))}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!T,onClick:Z,children:(n?lng("please wait"):e||(0,d.s$)(c,!0)?lng("reset my password"):lng("enter valid email")).caps()}),(0,_.tZ)("div",{style:{textAlign:"center",margin:"20px 0"},children:lng("or")}),(0,_.tZ)("div",{className:"tagline",children:lng("forgot your user name?").caps()}),(0,_.tZ)(wa.gN,{input:{type:"text",name:"name_rec_email",placeholder:lng("email").caps(),onKeyUp:function(e){return E&&"Enter"===e.key&&B()}},value:k,onChange:x}),j&&(0,_.tZ)("div",{className:"msg",children:j.split("\n").map((function(e,t){return(0,_.tZ)("div",{children:e},t)}))}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!E,onClick:B,children:(n?lng("please wait"):(0,d.s$)(k,!0)?lng("send me my user name"):lng("enter valid email")).caps()}),(0,_.tZ)("div",{className:"bottom_link",children:(0,_.tZ)(p.A,{href:"#",children:lng("back to login").caps()})})]})}));function Gd(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wd=(0,r.observer)((function(){var e,t=(0,a.useRef)(),n=Gd((0,a.useState)(""),2),r=n[0],o=n[1],i=Blsm.InitialData,l=i.login_error,s=i.otp_form;return e="sms"===s.type?lng("enter the code"):lng("enter 2-step verification code"),(0,_.BX)("div",{css:[qd,"",""],children:[s.msg&&(0,_.tZ)("div",{className:"sub-title",dangerouslySetInnerHTML:{__html:s.msg}}),l&&(0,_.tZ)("div",{className:"msg error",children:l}),(0,_.BX)("form",{autoComplete:"off",method:"post",ref:t,onSubmit:r?void 0:function(e){return e.preventDefault()},children:[(0,_.tZ)(wa.gN,{input:{type:"text",name:"t_otp",placeholder:e.caps(),maxLength:10,focusOnShow:!0},value:r,onChange:o}),(0,_.tZ)("input",{type:"submit",hidden:!0}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!r,onClick:function(){return t.current.submit()},children:lng("continue").caps()})]}),(0,_.tZ)("div",{className:"bottom_link",children:(0,_.tZ)(p.A,{href:"#",children:lng("back to login").caps()})})]})})),Kd=n(1786);function $d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Yd(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Yd(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yd(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qd=(0,r.observer)((function(e){var t=e.recovery,n=(0,a.useRef)(),r=$d((0,a.useState)(t?void 0:""),2),o=r[0],i=r[1],l=$d((0,a.useState)(""),2),s=l[0],c=l[1],u=$d((0,a.useState)(""),2),p=u[0],f=u[1],m=Blsm.InitialData,g=m.login_error,h=m.password_options,b={minlength:h.minlength,change_threshold:h.change_threshold,complex:h.complex},v=!0;return s&&p&&(t||o)?0===(0,Kd.x)(s,{oldPassword:o,requirements:b}).rate?v=lng("better password required"):s!==p&&(v=lng("both passwords must match")):v=!1,(0,_.BX)("div",{css:[qd,"",""],children:[(0,_.tZ)("div",{className:"tagline",children:t?lng("reset your password").caps():Blsm.InitialData.reason}),g&&(0,_.tZ)("div",{className:"msg error",children:g}),(0,_.BX)("form",{autoComplete:"off",method:"post",ref:n,onSubmit:!0===v?void 0:function(e){return e.preventDefault()},children:[!t&&(0,_.tZ)(wa.gN,{input:{type:"password",name:"old_password",placeholder:lng("old password").caps(),autoComplete:"current-password",focusOnShow:!0},className:"old_password",value:o,onChange:i}),(0,_.tZ)(wa.gN,{input:{type:"password",name:"new_password",placeholder:lng("new password").caps(),autoComplete:"new-password"},value:s,onChange:c}),(0,_.tZ)(Kd.k,{className:"password_meter",password:s,oldPassword:!t&&h.check_history?o:void 0,requirements:b}),(0,_.tZ)(wa.gN,{input:{type:"password",name:"confirm_password",placeholder:lng("confirm new password").caps(),autoComplete:"new-password"},value:p,onChange:f}),(0,_.tZ)("input",{type:"submit",hidden:!0}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!0!==v,onClick:function(){return n.current.submit()},children:("string"==typeof v?v:lng("continue")).caps()}),!t&&(0,d.B5)(Blsm.user.id)&&(0,_.tZ)("div",{className:"msg",children:lng("currently logged as %s",(0,d.v2)(Blsm.user)).caps()})]})]})}));function ef(e){return(ef="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tf(e,t){return(tf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function nf(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=of(e);if(t){var o=of(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rf(this,n)}}function rf(e,t){return!t||"object"!==ef(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function of(e){return(of=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var af=(0,r.observer)((function(){var e=(0,a.useRef)(),t=(0,a.useRef)(new lf).current,n=Blsm.InitialData.login_error,r=(0,ir.get)(t.values,"t_username"),o=function(t){var n;null===(n=t.preventDefault)||void 0===n||n.call(t),r&&e.current.submit()};return(0,_.BX)("div",{css:[qd,"",""],children:[(0,_.tZ)("div",{className:"tagline",children:lng("welcome!").caps()}),(0,_.tZ)("div",{className:"sub-title",children:lng("enter your username and receive a code to your mobile").caps()}),n&&(0,_.tZ)("div",{className:"msg error",children:n}),(0,_.tZ)(Jt.q3.Provider,{value:t,children:(0,_.BX)("form",{autoComplete:"off",method:"post",ref:e,onSubmit:o,children:[(0,_.tZ)(wa.au,{input:t.fields}),(0,_.tZ)("input",{type:"submit",hidden:!0}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:!r,onClick:o,children:lng("send code to my mobile").caps()})]})}),(0,_.tZ)("div",{className:"bottom_link",children:(0,_.tZ)(p.A,{href:"#",children:lng("back").caps()})})]})})),lf=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&tf(e,t)}(n,e);var t=nf(n);function n(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this);var r=Blsm.InitialData,o=r.t_username,i=r.t_remember;return e._fields=[{type:"hidden",name:"t_login",value:"sms_only"},{type:"text",name:"t_username",placeholder:lng("login name",{phrase:!0}).caps(),value:o,focusOnShow:!o},{type:"row_set",fields:[{type:"checkbox",name:"t_remember",label:lng("remember me"),value:i,insert:!(0,d.R4)()&&!Blsm.prm.inactivity_logout}]}],e._prepFields(),e}return n}(Jt.I);function sf(e){return(sf="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function cf(e){return function(e){if(Array.isArray(e))return yf(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||bf(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uf(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=bf(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function pf(e,t){return(pf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function df(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gf(e);if(t){var o=gf(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ff(this,n)}}function ff(e,t){return!t||"object"!==sf(t)&&"function"!=typeof t?mf(e):t}function mf(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gf(e){return(gf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||bf(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function bf(e,t){if(e){if("string"==typeof e)return yf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yf(e,t):void 0}}function yf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var vf=(0,r.observer)((function(){var e=Blsm.InitialData.registration_fields,t=hf((0,a.useState)(!1),2),n=t[0],r=t[1],o=hf((0,a.useState)(""),2),i=o[0],l=o[1],s=(0,a.useRef)(),c=(0,a.useRef)(null);c.current||(c.current=new _f);var u=c.current,d=!0,f=u.errors.values().next();f.done||(d=f.value),!0!==d||u.allFilled(["user_first_name","user_last_name","user_name","user_email","user_password","user_password_confirmation"])||(d=!(null==e||!e.length)&&lng("fill all basic details"));var g=(0,a.useRef)();(0,a.useEffect)((function(){return function(){var e;return null===(e=g.current)||void 0===e?void 0:e.abortFetch()}}),[]);return(0,_.BX)("div",{css:qd,children:[(0,_.tZ)("div",{className:"tagline",children:lng("new user? welcome!").caps(!1)}),i&&(0,_.tZ)("div",{className:"msg error",children:i}),(0,_.tZ)(Jt.q3.Provider,{value:u,children:(0,_.BX)("form",{autoComplete:"off",method:"post",ref:s,onSubmit:function(e){return e.preventDefault()},children:[(0,_.tZ)(wa.au,{input:u.fields}),(0,_.tZ)(y.l,{className:"main_button",theme:"contained",disabled:n||!0!==d,onClick:function(){return u.validate().then((function(e){return!0===e&&(r(!0),void(g.current=(0,m.SC)("login/create_user_self",{method:"POST",data:u.buildFinalValues(),onComplete:function(){return r(!1)}},(function(e){if(e.url)return location.href=e.url;l(e.error||"")}))))}))},children:("string"==typeof d?d:lng("continue")).caps()})]})}),(0,_.BX)("div",{className:"bottom_link",children:[lng("already have an account?")," ",(0,_.tZ)(p.A,{href:Blsm.prm.Mainref+"login",children:lng("login").caps()})]})]})})),_f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pf(e,t)}(n,e);var t=df(n);function n(){var e,o,i,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e=t.call(this),o=mf(e),a=!0,(i="validateOnChange")in o?Object.defineProperty(o,i,{value:a,enumerable:!0,configurable:!0,writable:!0}):o[i]=a;var l=Blsm.InitialData,s=l.registration_fields,c=void 0===s?[]:s,u=l.org_units,p=l.custom_fields,f=l.password_options,m=l.field_masks,g=l.mandatory_fields,h=void 0===g?[]:g,b=l.domain,y=l.unique_user_identity_num,v=(0,r.observer)((function(e){var t=e.value;return(0,_.tZ)(Kd.k,{password:(0,ir.get)(t,"user_password"),requirements:{minlength:f.minlength}})}));e._fields=[{type:"section",fields:[{type:"hidden",name:"domain_id",value:b},{type:"row_set",fields:[{type:"text",name:"user_first_name",label:lng("first name")},{type:"text",name:"user_last_name",label:lng("last name")}]},{type:"text",name:"user_name",label:lng("login name",{phrase:!0}),remoteValidate:{url:"login/validate_user_name"}},{type:"text",name:"user_email",label:lng("email"),validate:function(e){return!!(0,d.s$)(e)||{error:lng("please insert valid email")}}},{type:"row_set",fields:[{type:"password",name:"user_password",label:lng("password"),autoComplete:"new-password",validate:function(e){return 0<(0,Kd.x)(e,{requirements:{minlength:f.minlength}}).rate||{error:lng("better password required")}}},{type:"password",name:"user_password_confirmation",label:lng("confirm password"),validate:function(t){return(0,ir.get)(e.values,"user_password")===t||{error:lng("both passwords must match")}}}]},{type:"component",Render:v}]}];var w,O=uf(e._fields[0].fields);try{for(O.s();!(w=O.n()).done;){var k=w.value;if(k.fields){var x,S=uf(k.fields);try{for(S.s();!(x=S.n()).done;){var j=x.value;e._fieldMask(j,m)}}catch(e){S.e(e)}finally{S.f()}}else e._fieldMask(k,m)}}catch(e){O.e(e)}finally{O.f()}var C,P=[],Z=[],B=uf(c);try{for(B.s();!(C=B.n()).done;){var T=C.value,E=void 0;if("user_gender"===T)E={type:"select",options:[["Male",lng("male").caps()],["Female",lng("female").caps()]],emptyOption:!0};else if("user_ou"===T)E={type:"select",options:u,emptyOption:!0};else if("employment_date"===T||"user_birthdate"===T)E={type:"date"};else{if(p[T]){Z.push(p[T]);continue}E={type:"text"}}E.name=T,E.label||(E.label=(0,Do.X)(T).caps()),E.maxLength=(0,xi.i1)(T),y&&"user_identity_num"===T&&(E.remoteValidate="login/validate_user_identity_num/domain=".concat(b,"&")),e._fieldMask(E,m),P.push(E)}}catch(e){B.e(e)}finally{B.f()}Z.length&&P.push.apply(P,cf(e._customFieldsPrep(Z)));for(var I=0,A=P;I<A.length;I++){var D=A[I];D.name&&(e._fieldMask(D,m),h.includes(D.name)&&"checkbox"!==D.type&&(D.required=!0))}return P.length&&(e._fields.push({type:"section",title:lng("extra details"),titleSmall:!0,fields:P}),Object.assign(e._fields[0],{title:lng("basic details"),titleSmall:!0})),e._prepFields(),e}return n}(Jt.I);function wf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Of(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Of(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Of(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var kf=(0,o.iv)("z-index:1;display:flex;background-color:",i.g.colors.bg_main,";",i.g.classes.shadow_strong,";position:fixed;justify-content:flex-end;top:20px;",i.g.far,":30px;padding:7px;border-radius:50px;",i.g.mQuery.mobile,"{top:0;",i.g.far,":0;width:100%;border-radius:0;}>div{padding:3px 10px;&:not(:first-of-type){",i.g.classes.border_near("1px solid ".concat(i.g.colors.separator)),";}a{&:hover{text-decoration:underline;}}._btn{font-weight:600;}}",""),xf=function(e){var t=e.registrationMode,n=Blsm.lang.available&&Object.entries(Blsm.lang.available).map((function(e){var t=wf(e,2),n=t[0];return{val:n,label:t[1],active:Blsm.lang.current===n}}));return(0,_.BX)("div",{css:kf,children:[(0,d.B5)(Blsm.user.id)&&(0,_.tZ)("div",{children:(0,_.tZ)(u.JO,{icon:"exit",href:Blsm.prm.Mainref+"?logout=1",toolTip:lng("logout")})}),!t&&Blsm.prm.register_link&&(0,_.tZ)("div",{children:(0,_.tZ)(p.A,{href:Blsm.prm.register_link,children:lng("register").caps()})}),!t&&Blsm.prm.anonymous_portal&&(0,_.tZ)("div",{children:(0,_.tZ)(p.A,{href:Blsm.prm.Mainref+"?anonymous=1#portal",children:lng("portal").caps()})}),!t&&Blsm.prm.anonymous_courses_catalog&&(0,_.tZ)("div",{children:(0,_.tZ)(p.A,{href:Blsm.prm.Mainref+"?anonymous=1#cregistration",children:lng("courses catalog").caps()})}),n&&(0,_.tZ)("div",{children:(0,_.tZ)(s.x,{options:n,onSelect:Xe.rt,dropDownLike:!0,children:Blsm.lang.current.substring(0,2).caps()})}),(0,_.tZ)("div",{children:(0,_.tZ)(qe.Dq,{})})]})};var Sf={name:"1n6so1b",styles:"line-height:1em;border-radius:20px;padding:5px;max-width:40px;white-space:nowrap;height:40px;overflow:hidden;background-color:white;color:#505050;position:fixed;bottom:20px;left:20px;transition:max-width 1s;.Icon{display:inline-block;vertical-align:middle;transition:transform .3s ease-in;font-size:24px;margin:3px;}&:hover{max-width:100%;.Icon{transform:rotate(360deg);}}"},jf=function(){var e=Blsm.InitialData.contact_link;return e?(0,_.BX)(p.A,{css:Sf,href:e,newTab:!0,children:[(0,_.tZ)(u.JO,{icon:"support_login"}),"   ",lng("contact & support").caps(!1),"  "]}):null},Cf=n(1711),Pf=(0,r.observer)((function(e){var t=e.bgColor,n=Cf.i.modeFilter;return(0,f.OR)("mousedown",(function(e){0!==e.screenX&&0!==e.clientX&&document.body.classList.add("using-mouse")})),(0,f.OR)("keydown",(function(e){"Tab"===e.key&&document.body.classList.remove("using-mouse")})),(0,_.BX)(_.HY,{children:[(0,_.tZ)(o.xB,{styles:Zf({bgColor:t,modeFilter:n})}),(0,_.tZ)(o.xB,{styles:Le.E})]})})),Zf=function(e){var t=e.bgColor,n=void 0===t?i.g.colors.bg_main:t,r=e.modeFilter;return(0,o.iv)("html{font-size:14px;background-color:",n,";",r?"filter: ".concat(r,";"):"",";}*:not(.no_outline):focus{outline:",i.g.colors.dominant_main," auto 2px;}body{font-size:1em;font-family:'Open Sans Hebrew','Open Sans',sans-serif;overflow-x:hidden;overflow-y:auto;box-sizing:content-box;width:100vw;",i.g.classes.direction,";color:",i.g.colors.text_main,';&.using-mouse *:focus{outline-width:0;}}a{color:inherit;text-decoration:none;.tutorial{text-decoration:none!important;color:#FFEB3B!important;padding:3px;text-shadow:0 1px 1px black;}}[type="text"],textarea{background-color:',i.g.colors.bg_input,";}textarea{resize:none;}select{color:#5D676D;}.danger_text{color:",i.g.colors.negative,";}*,*:before,*:after{box-sizing:border-box;}",i.g.mQuery.notMobile,"{.mobile_only{display:none!important;}::-webkit-scrollbar{width:6px;height:6px;}::-webkit-scrollbar-thumb{border-radius:3px;background-color:#c1c1c1;}::-webkit-scrollbar-thumb:hover{background-color:#828282;}}",i.g.mQuery.mobile,"{.mobile_off{display:none!important;}body.bchat-on{padding-bottom:50px;}}","")};function Bf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Tf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Tf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Tf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Ef=function(){return(0,o.iv)("color:",i.g.colors.text_sec,";>.middle{min-height:100vh;display:flex;justify-content:center;align-items:center;",i.g.mQuery.mobile,"{padding-top:40px;}>._dialog{background-color:",i.g.colors.bg_main,";",i.g.classes.shadow_strong,';width:360px;max-width:90vw;margin:20px 0;border-radius:20px;overflow:hidden;padding:20px;.logo{background:transparent url("',i.g.theme.login_logo,'") no-repeat center center;background-size:contain;height:63px;margin:27px 0;}.separator{border-bottom:1px solid ',i.g.colors.separator,";margin:0 12px 30px;}}}.qr{position:fixed;opacity:0.8;bottom:20px;right:20px;border:2px solid white;}","")},If=function(e){var t=e.text;return(0,_.BX)("div",{css:[qd,"",""],children:[(0,_.tZ)("div",{style:{textAlign:"center"},children:t.caps()}),(0,_.tZ)("div",{className:"bottom_link",children:(0,_.tZ)(p.A,{href:"#",children:lng("back to login").caps()})})]})};function Af(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Df(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Df(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Df(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rf=(0,o.iv)("width:660px;max-width:100%;padding:10px;margin:0 auto;.subject{color:",i.g.colors.text_main,";font-size:1.6em;font-weight:700;margin-bottom:10px;}.greeting{color:",i.g.colors.text_main,";font-size:1.2em;margin-bottom:20px;}",""),Nf=(0,r.observer)((function(e){var t=e.com_id,n=e.subject,r=e.patient_first_name,o=e.patient_last_name,i=Af((0,a.useState)(!1),2),l=i[0],s=i[1],c={type:"patients_communication",object_id:t},u=new ho.pE(c,{endPoint:"patientCom"});return(0,_.BX)("div",{css:Rf,children:[(0,_.tZ)(Pf,{bgColor:"#fff"}),(0,_.tZ)(K.m,{className:"subject",children:n}),(0,_.tZ)(K.m,{className:"greeting",children:"".concat(lng("hello").caps()," ").concat(r," ").concat(o)}),l?(0,_.tZ)("div",{className:"greeting",children:lng("your message was sent, you can now close the window.").caps()}):(0,_.tZ)(go.H,{commentsStore:u,connectTo:u.connectTo,afterSend:function(){return s(!0)},confirmSend:!0,richTextOptions:{attach:!0}})]})}));var zf={name:"18fwt0k",styles:"margin:0 auto 50px;max-width:1000px;.chart-title{font-size:20px;text-align:center;}"};function Mf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ff(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mf(Object(n),!0).forEach((function(t){qf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xf(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Lf(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Lf(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Lf(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Uf=(0,o.iv)(i.g.classes.margin_far("5px"),";display:flex;flex-direction:column;height:100%;overflow:hidden;>.Tabs{flex-grow:0;margin:10px 0;display:flex;justify-content:center;}",""),Vf=function(e){var t=e.assignmentId,n=e.opened,r=Xf((0,a.useState)("launcher"),2),o=r[0],i=r[1],l=(0,a.useRef)({}).current,s=(0,a.useRef)();if((0,a.useEffect)((function(){Blsm.InitLauncherComments=function(e){return l[o]&&(l[o].inner_context=e)},Blsm.prm.performance_id&&setInterval((function(){return(0,m.SC)("generic/performance_online/performance="+Blsm.prm.performance_id)}),3e4)}),[]),(0,a.useEffect)((function(){var e;return n&&(null===(e=s.current)||void 0===e?void 0:e.resize())}),[n]),!n)return null;l[o]||(l[o]=new ho.pE({object_id:t,type:o,to_user:"launcher_manager"===o?Blsm.user.id:void 0}));var c=[{val:"launcher",label:lng("public")},{val:"launcher_private",label:lng("personal")},{val:"launcher_manager",label:lng("manager")}];return(0,_.BX)("div",{css:Uf,children:[(0,_.tZ)(it.m,{tabs:c,activeTab:o,onSelect:i,ref:s}),(0,_.tZ)(go.H,{commentsStore:l[o],connectTo:l[o].connectTo,refresh:"launcher_private"!==o,spreadHeight:"calc(100% - 60px)"})]})},Hf=n(38152),Gf=["src","controls","download","autoPlay"];function Jf(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wf(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jf(Object(n),!0).forEach((function(t){Kf(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jf(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Kf(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var Yf=function(e){var t=e.src,n=e.controls,r=void 0===n||n,o=e.download,i=void 0===o||o,a=e.autoPlay,l=void 0!==a&&a,s=$f(e,Gf);return(0,_.tZ)("video",Wf(Wf({controls:r,autoPlay:l,onContextMenu:i?null:function(e){return e.preventDefault(),!1},controlsList:i?"":"nodownload"},s),{},{children:(0,_.tZ)("source",{type:"video/mp4",src:t})}))},Qf=(0,r.observer)((function(e){var t=e.meeting,n=[{title:lng("name")},{title:lng("actions")}],r=t.zoomRecordings;return(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("zoom recordings").caps()}),(0,_.tZ)(jn.iA,{cols:n,collection:r,loading:null===r,RowRenderer:em,rowIdCol:"id",rowProps:{meeting:t},compact:!0,noWindow:!0})]})})),em=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=t.id,o=t.count,i=n.meeting,a=i.mayDeleteZoomRecord,l=i.deleteZoomRecord,s=lng("recording #%s",o).caps(),c=Blsm.prm.Mainref+"GetFile?file_id="+r;return(0,_.BX)("tr",{children:[(0,_.tZ)("td",{children:s}),(0,_.BX)(Cn.jA,{children:[(null==a?void 0:a())&&(0,_.tZ)(u.JO,{icon:"trash",buttonLike:!0,onClick:function(){return l(t)}}),Blsm.user.isPowerManager&&(0,_.tZ)(u.JO,{icon:"download",buttonLike:!0,toolTip:lng("download"),href:c,newTab:!0}),(0,_.tZ)(u.JO,{icon:"play",buttonLike:!0,onClick:function(){return(0,Tn.qR)((0,_.tZ)(Yf,{autoPlay:!0,width:"100%",download:!1,src:c}),{title:s,width:"40vw",closeText:lng("close")})}})]})]})}));function tm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rm=function(e){var t=e.type;return(0,o.iv)("height:100%;.container-children{height:calc(100% - 58px);}.side-display{display:flex;flex-direction:column;height:100%;.item-kind{color:",i.g.colors.entity[t]||i.g.colors.text_black,";}}.side-display-top-head-extra{display:flex;justify-content:space-between;}.side-display-title{display:flex;align-items:center;margin-bottom:20px;}.side-display-tabs{border-bottom:1px solid ",i.g.colors.separator,";}.item-details{padding:0 10px 40px;}.item-subtitle{padding:0 10px 5px;}.item-tags{margin:10px 0;}.side-display-bottom{margin:0 10% 30px;a{width:100%;}div{white-space:normal;}}.item-kind{font-size:30px;padding:0 10px;}.item-name{font-weight:600;font-size:1.2em;}.item-time{",i.g.classes.margin_near("5px"),";}.item-section-label{font-size:1.2em;font-weight:600;margin-top:30px;margin-bottom:10px;}.item-section{margin-top:40px;margin-bottom:15px;}.warnings{color:",i.g.colors.warning,";}.item-attribute{margin-bottom:5px;.label{font-weight:600;}}.item-instructors{display:flex;>div{display:flex;align-items:center;",i.g.classes.margin_far("12px"),";}}.item-coach{display:flex;align-items:center;>span{",i.g.classes.margin_near("5px"),";}}.item-comments{padding:10px;}.icons{font-size:1.6em;flex-grow:1;padding:0 15px;}.item-desc{min-height:100px;background-color:",i.g.colors.bg_2,";padding:10px;border-radius:10px;}","")},om=(0,r.observer)((function(e){var t,n,r,o,l,f,m,h,b,w,O,k,x,S,j,C,P,Z=e.item,B=e.onClose,T=e.tab,E=tm((0,a.useState)(T||"details"),2),A=E[0],D=E[1],R=(0,a.useRef)(),N=(0,a.useContext)(v.l9),z=Z.dateNote,M=Z.menu,F=Z.type,q=null===(t=Z.dependencies)||void 0===t?void 0:t.call(Z);Z.commentsInfo&&Z.maySeeCommentsTab&&(C=[{val:"details",label:lng("details")},{val:"comments",label:lng("comments")}],P=Z.commentsInfo.connect);var X=(0,_.BX)("div",{className:"side-display-top-head-extra",children:[(0,_.BX)(Ht.c_,{className:"icons",children:[Z.views>0&&(0,_.tZ)(jt.kO,{views:Z.views}),(0,d.DM)(Z.bookmarked)&&(0,_.tZ)(jt.rp,{entity:Z,onClick:function(){var e;return null===(e=Z.toggleBookmark)||void 0===e?void 0:e.call(Z)}}),Z.mayLike&&(0,_.tZ)(jt.dR,{entity:Z,onClick:function(){var e;return null===(e=Z.toggleLike)||void 0===e?void 0:e.call(Z)}})]}),(0,_.tZ)("div",{children:(null===(n=Z.status)||void 0===n?void 0:n.text)&&(0,_.tZ)(Lo.V,{tag:Z.status.text,color:null===(r=Z.status)||void 0===r?void 0:r.color})})]});return(0,_.tZ)(ot.d,{from:"side",onClose:B,ref:R,scroll:!0,addPushState:!B,children:(0,_.tZ)(g.W2,{css:rm({type:F}),head:(0,_.tZ)(g.$0,{onClose:function(){return R.current.close()},headExtra:X}),stickyHead:!0,children:(0,_.BX)("div",{className:"side-display",children:[(0,_.BX)("div",{className:"side-display-title",children:[(0,_.tZ)("div",{className:"item-kind",children:(0,_.tZ)(u.JO,{icon:Z.icon})}),(0,_.tZ)("div",{children:(0,_.tZ)("div",{className:"item-name",children:Z.title})}),(0,_.tZ)(Ht.zh,{}),(0,_.tZ)("div",{className:"item-menu",children:(0,_.tZ)(s.x,{className:"item-menu",options:(0,d.g4)(M,Z),onSelect:function(e){return(0,Kr.Xq)(e,Z)},children:(0,_.tZ)(u.JO,{icon:"menu",buttonLike:!0})})})]}),Z.subTitle&&(0,_.tZ)("div",{className:"item-subtitle",children:Z.subTitle}),C&&(0,_.tZ)("div",{className:"side-display-tabs",children:(0,_.tZ)(it.m,{tabs:C,activeTab:A,onSelect:function(e){return D(e)},className:"_tabs"})}),"details"===A&&(0,_.BX)("div",{className:"item-details",children:[(Z.type_title||Z.category)&&(0,_.BX)(K.m,{className:"item-tags",children:[Z.type_title&&(0,_.tZ)("span",{css:i.g.classes.content_type_style,children:Z.type_title}),Z.type_title&&Z.category&&(0,_.tZ)(u.An,{}),Z.category&&(0,_.tZ)(Hf.W,{category:Z.category,category_id:Z.category_id})]}),(null==z?void 0:z.toDate)&&(0,_.BX)("div",{className:"item-attribute",children:[(0,_.BX)("span",{className:"label",children:[(null===(o=z.toolTip)||void 0===o?void 0:o.caps())||lng("date").caps(),": "]}),(0,_.tZ)(G.qm,{dateNote:z})]}),Z.warnings&&(0,_.tZ)("div",{className:"item-attribute warnings",children:Z.warnings}),(null===(l=Z._attr)||void 0===l?void 0:l.assignment_score)>0&&(0,_.BX)("div",{className:"item-attribute",children:[(0,_.BX)("span",{className:"label",children:[lng("required score").caps(),":"]})," ",Z._attr.assignment_score]}),Z.accumulation&&(0,_.tZ)("div",{className:"item-attribute",children:Z.as_coach?(0,_.BX)(_.HY,{children:[(0,_.BX)("span",{className:"label",children:[lng("runs required").caps(),":"]})," ",Z.accumulation]}):(0,_.BX)(_.HY,{children:[(0,_.BX)("span",{className:"label",children:[lng("successful runs").caps(),":"]})," ",(0,_.BX)(I.u,{text:lng("successful runs"),children:[" ",Z.successful_runs]}),"/",(0,_.tZ)(I.u,{text:lng("runs required"),children:Z.accumulation})]})}),Z.assignment_access_limit>0&&(0,_.tZ)("div",{className:"item-attribute",children:(0,_.BX)(_.HY,{children:[(0,_.BX)("span",{className:"label",children:[lng("access limit").caps(),":"]})," ",(0,_.BX)(I.u,{text:lng("access limit"),children:[" ",Z.running_times]}),"/",(0,_.tZ)(I.u,{text:lng("access limit"),children:Z.assignment_access_limit})]})}),(null==q?void 0:q.length)>0&&(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("prerequisites").caps()}),q.map((function(e){return(0,_.BX)("div",{onClick:function(){return Z.setActiveComponent(e.assignment_id)},children:[(0,_.tZ)(u.JO,{icon:e.satisfied?"sign_ok":"sign_notification",color:e.satisfied?i.g.colors.positive:i.g.colors.negative})," ",(0,_.tZ)(p.A,{theme:"hover",children:e.assignment_name||e.lesson_name})]},e.assignment_id)}))]}),(null==Z||null===(f=Z.locations)||void 0===f?void 0:f.length)>0&&(0,_.tZ)("div",{className:"item-section",children:Z.locations.map((function(e,t){return(0,_.BX)("div",{className:"item-attribute",children:[(0,_.BX)("span",{className:"label",children:[e.label,":"]})," ",e.value]},t)}))}),(null===(m=Z.instructors)||void 0===m?void 0:m.length)>0&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("instructors").caps()}),(0,_.tZ)("div",{className:"item-instructors",children:Z.instructors.map((function(e){return(0,_.BX)("div",{children:[(0,_.tZ)(c.qE,{user:e}),(0,_.tZ)("span",{children:e.full_name})]},e.resource_id)}))})]}),Z.coachUser&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("coach").caps()}),(0,_.BX)("div",{className:"item-coach",children:[(0,_.tZ)(c.qE,{user:Z.coachUser}),(0,_.tZ)("span",{children:Z.coachUser.full_name})]})]}),(null==Z?void 0:Z.maySeeResources)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("resources").caps()}),(0,_.tZ)("div",{children:Z.resources.map((function(e){return(0,_.BX)("div",{className:"item-attribute",children:[e.resource_name," (",(0,_.tZ)(I.u,{text:lng("amount in use"),children:e.amount_in_use}),")"]},e.user_id)}))})]}),Z.maySetSelfAttendance&&(0,_.BX)("div",{children:[(0,_.BX)("div",{className:"item-section-label",children:[lng("going").caps(),"?"]}),(0,_.BX)("div",{children:[(0,_.tZ)(y.l,{onClick:function(){return Z.setAttending("yes")},theme:"yes"===Z.attending?"contained":"outlined",children:lng("yes").caps()}),(0,_.tZ)(Ht.Zv,{}),(0,_.tZ)(y.l,{onClick:function(){return Z.setAttending("no")},theme:"no"===Z.attending?"contained":"outlined",children:lng("no").caps()})]})]}),(null===(h=Z.description)||void 0===h?void 0:h.text)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("description").caps()}),(0,_.tZ)("div",{className:"item-desc",children:Z.description.isHtml?(0,_.tZ)(wr.x,{content:null===(b=Z.description)||void 0===b?void 0:b.text}):(0,_.tZ)("div",{children:null===(w=Z.description)||void 0===w?void 0:w.text})})]}),(null===(O=Z.gradeInfo)||void 0===O?void 0:O.displayGrade)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:null===(k=Z.gradeInfo)||void 0===k?void 0:k.label}),(0,_.tZ)("div",{children:(0,_.tZ)(I.u,{text:null===(x=Z.gradeInfo)||void 0===x?void 0:x.toolTip,children:null===(S=Z.gradeInfo)||void 0===S?void 0:S.displayGrade})})]}),(null===(j=Z.content)||void 0===j?void 0:j.length)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)("div",{className:"item-section-label",children:lng("content").caps()}),(0,_.tZ)("div",{children:Z.content.map((function(e){return(0,_.tZ)("div",{children:(0,_.BX)(p.A,{href:e.link,theme:"highlight",children:[(0,_.tZ)(u.JO,{icon:e.icon}),(0,_.tZ)(Ht.Zv,{}),e.title]})},e.assignment_id)}))})]}),Z.onlineUrlCopy&&(0,_.BX)("div",{children:[lng("online meeting link").caps()," ",(0,_.tZ)(Yr.g,{copy:(0,p.p4)(Z.onlineUrlCopy),success:lng("link copied to clipboard"),buttonLike:!0})]}),Z.haveZoomRecordings&&(0,_.tZ)(Qf,{meeting:Z})]}),"comments"===A&&P&&(0,_.tZ)("div",{className:"item-comments",children:(0,_.tZ)(go.H,{commentsStore:N.getStore("comments",P),connectTo:P,locked:null==Z?void 0:Z.isAssignmentCommentsLock,editable:null==Z?void 0:Z.mayEditCommetns,deletable:null==Z?void 0:Z.mayDeleteComments,allowFileSharing:Blsm.isFeatureEnabled("comments_attachments")})}),(0,_.tZ)(Ht.zh,{}),(0,_.BX)("div",{className:"side-display-bottom",children:[Z.secondaryLink&&(0,_.tZ)(y.l,{theme:"outlined",href:Z.secondaryLink.link,children:Z.secondaryLink.label}),Z.notice&&(0,_.tZ)(y.l,{processHrefClick:!0,href:Z.link,theme:"contained",chunky:!0,disabled:!Z.link,children:Z.notice})]})]})})})}));function im(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function am(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?im(Object(n),!0).forEach((function(t){lm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):im(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function lm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var sm=(0,r.observer)((function(){var e=(0,v.vm)();return(0,_.tZ)(_.HY,{children:e.componentSideDrawer&&(0,_.tZ)(om,am(am({item:e.componentSideDrawer.component},e.componentSideDrawer.options),{},{onClose:function(){var t,n;return(0,d.g4)(null===(t=e.componentSideDrawer)||void 0===t||null===(n=t.options)||void 0===n?void 0:n.close),e.showSideDrawer(null)}}))})})),cm=n(54880),um=n(92669),pm=n(68018);function dm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return fm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var mm=function(e){var t=e.minutes,n=dm((0,a.useState)(!1),2),r=n[0],o=n[1];return(0,a.useEffect)((function(){var e=setInterval((function(){!r&&(new Date).getTime()-window.localStorage.getItem("last_activity")>6e4*t&&o(!0)}),1e3);return function(){return clearInterval(e)}}),[]),r?(0,_.tZ)(gm,{onStay:function(){return o(!1)},onLogout:function(){return(0,p.p4)({logout:!0},!0)}}):null},gm=function(e){var t=e.onStay,n=e.onLogout,r=dm((0,a.useState)(60),2),o=r[0],l=r[1],s=(0,a.useRef)();s.current||(s.current=(new Date).getTime());var c=function(){window.localStorage.setItem("last_activity_action","logout:"+(new Date).getTime()),n()};return(0,a.useEffect)((function(){var e=setInterval((function(){var r=dm((window.localStorage.getItem("last_activity_action")||"").split(":",2),2),i=r[0],a=r[1];"stay"===i&&a>s.current?t():"logout"===i&&a>s.current?n():o>0?l(o-1):(c(),clearInterval(e))}),1e3);return function(){return clearInterval(e)}}),[o]),(0,_.BX)(Tn.I4,{title:lng("inactivity logout"),onConfirm:c,onCancel:function(){window.localStorage.setItem("last_activity_action","stay:"+(new Date).getTime()),t()},cancelText:lng("stay logged in"),confirmText:lng("logout")+" ("+o+")",zIndex:i.g.z.inactivity_alert,children:[lng("you've been inactive for a while, and will be automatically logged off shortly.").caps(),(0,_.tZ)("br",{}),(0,_.tZ)("br",{}),lng('if you wish to stay logged in please press "stay logged in" button.').caps()]})},hm=function(e){return(0,o.iv)("width:100%;height:100%;background:transparent url('",e,"') no-repeat center;background-size:contain;","")},bm=(0,a.memo)((function(e){var t=e.image;return(0,_.tZ)("div",{css:hm(t)})})),ym=n(36220);function vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vm(Object(n),!0).forEach((function(t){wm(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wm(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Om={name:"kh17m3",styles:"width:100%;height:100%;>.MediaPlayer{display:block;height:100%;.Equalizer{height:100%;}}"},km=(0,a.memo)((function(e){var t=(0,a.useRef)(),n=(0,a.useRef)({sum:0,lastTime:0}).current;return(0,a.useEffect)((function(){var r,o;null===(r=(o=Blsm).InitLauncherComments)||void 0===r||r.call(o,"0",10),t.current.addEventListener("timeupdate",(function(){var e,r,o=t.current.currentTime;n.sum+=o-n.lastTime,n.lastTime=o;var i=Math.floor(o);null===(e=(r=Blsm).InitLauncherComments)||void 0===e||e.call(r,""+i,10,(0,pt.xt)(i))})),t.current.addEventListener("seeking",(function(){n.lastTime=t.current.currentTime})),t.current.addEventListener("ended",(function(){return null==e?void 0:e.onEnded()})),Blsm.prm.measure_time_pid&&window.addEventListener("beforeunload",(function(){Blsm.beacon(Blsm.prm.Mainref+"api?/assignment/update_performance_data",{performance_id:Blsm.prm.measure_time_pid,performance_data:JSON.stringify({video_view_time:n.sum,video_duration:t.current.duration})})}))}),[]),(0,_.tZ)("div",{css:Om,children:(0,_.tZ)(ym.S,_m(_m({},e),{},{mediaRef:t}))})}));var xm={name:"1osfmq2",styles:"vertical-align:bottom;border:0;width:100%;height:100%"},Sm=(0,a.memo)((function(e){var t=e.url,n=e.name;return(0,_.tZ)("iframe",{css:xm,src:t,name:n,allowFullScreen:!0,allow:"microphone *; camera *; fullscreen *; autoplay *"})}));function jm(e){return(jm="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Cm(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pm(e,t){return(Pm=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zm(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tm(e);if(t){var o=Tm(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bm(this,n)}}function Bm(e,t){return!t||"object"!==jm(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tm(e){return(Tm=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Em={name:"xzur6n",styles:"margin-top:10px;padding:10px;background-color:#f5f5f5;border-radius:5px;>form{._buttons{padding:15px 0;display:flex;justify-content:center;}}"},Im=(0,r.observer)((function(e){var t=e.form;return(0,_.tZ)("div",{css:Em,children:(0,_.tZ)(Jt.q3.Provider,{value:t,children:t.status?(0,_.tZ)(zt.$,{}):(0,_.BX)("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:[(0,_.tZ)(wa.au,{input:t.fields}),(0,_.tZ)("div",{className:"_buttons",children:(0,_.tZ)(fu.O,{primary:!0,onClick:t.callSave,highlight:t.dirty,id:"submit_button",children:t.confirmButtonLabel})})]})})})})),Am=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pm(e,t)}(i,e);var t,n,r,o=Zm(i);function i(e,t,n){var r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),r=o.call(this,e);var a=e.details,l=void 0===a?{}:a,s=e.may_upload_file,c=e.request,u=e.request_id,p=e.optional_approvers;if(r.confirmButtonLabel=lng("submit").caps(),"manager_review"===t);else if("approval_waiting"===t)r._fields.push({type:"hidden",name:"change_file",value:1}),!c.status&&s&&r._fields.push({type:"file",name:n?"files":"file",label:n?lng("add files"):lng("change file"),maxSize:Blsm.InitialData.parameters.max_file_size.activity,required:!0,multiFile:n});else{var f,g,h;r._fields.push({type:"hidden",name:"submit_request",value:1}),"1"===l.user_text&&r._fields.push({type:"textarea",name:"user_text",label:lng("enter text")}),s&&r._fields.push({type:"file",name:n?"files":"file",label:n?lng("add files"):lng("attach a file"),maxSize:Blsm.InitialData.parameters.max_file_size.activity,multiFile:n}),u&&r._fields.push({type:"hidden",name:"request_id",value:u}),null!==(f=l.assignment_options)&&void 0!==f&&f.partner_submission&&s&&"manager_review"!==l.completion_requirement&&r._fields.push({type:"multiple_items",name:"partner",label:lng("add partners"),poster:!0,theme:"bright",searchData:function(e,t){(0,m.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||"",group:l.group_id,assignment:l.assignment_id,exclude_self:1}},t)}}),p&&r._fields.push({type:"select",name:"approver_id",label:lng("select approver"),options:(0,d.wd)(p)}),null!==(g=l.assignment_options)&&void 0!==g&&g.reading_confirmation_signature&&r._fields.push({type:"signpad",name:"reading_confirmation_signature",label:lng("sign in the section below to confirm submission").caps()+":",required:!0}),null!==(h=l.assignment_options)&&void 0!==h&&h.reading_confirmation_password&&r._fields.push({type:"password",name:"reading_confirmation_password",label:lng("type your password to confirm submission"),required:!0,remoteValidate:{url:"users/verify_password",method:"POST",parseResult:function(e){return!0===e.pass?"":lng("wrong password").caps()}}})}return r._prepFields(),r.ready=!0,r}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("Launcher?"+(0,d.$t)((0,d.Lv)()),e)}},{key:"SaveSuccess",value:function(e){e.error?(this.status="",(0,Po.Mj)(e.error||lng("unknown error"))):e.redirect?"ReturnToMainPage"===e.redirect?window.ReturnToMainPage():location=e.redirect:location.reload()}}])&&Cm(t.prototype,n),r&&Cm(t,r),i}(Jt.I),Dm=function(e){var t=e.request,n=function(e){return(0,m.hn)(null,{request:t.request_id,partner_status:1,status:e})},r=[{title:lng("name").caps()},{title:lng("status").caps()}];return(0,_.tZ)(jn.iA,{cols:r,collection:t.partners,RowRenderer:function(e){var r=e.row;return(0,_.BX)("tr",{children:[(0,_.tZ)(Cn.U6,{children:(0,_.tZ)(p.A,{href:{user:r.user_id,absolute:!0},children:(0,d.v2)(r)})}),(0,_.BX)("td",{children:["accepted"===r.status?(0,_.tZ)("span",{style:{color:i.g.colors.positive},children:lng("accepted").caps()}):"declined"===r.status?(0,_.tZ)("span",{style:{color:i.g.colors.negative},children:lng("declined").caps()}):lng("waiting").caps(),"  ",(0,d.Tz)(r.user_id)&&"accepted"!==r.status&&(0==t.approval_step||1==t.approval_step)&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(ve.zx,{theme:ve.jR,onClick:function(){return n("accepted")},children:lng("join as partner").caps()}),!r.status&&(0,_.BX)(_.HY,{children:[" ",(0,_.tZ)(ve.zx,{theme:ve.AE,onClick:function(){return n("declined")},children:lng("decline join request").caps()})]})]})]})]})},rowIdCol:"user_id"})};function Rm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Nm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var zm=function(e){var t=e.request_report,n=e.multiFile,r=Rm((0,a.useState)(0),2),o=r[0],i=r[1],l=[{title:"#"},{title:lng("user").caps()},{title:lng("time").caps()},{title:lng("data").caps()}];return(0,_.BX)("div",{className:"_section",children:[(0,_.BX)("div",{className:"blue_title",children:[lng("this activity is waiting for approval").caps(),":"]}),(0,_.tZ)(jn.iA,{cols:l,collection:t.steps,RowRenderer:function(e){var r,a,l=e.row;return(0,_.BX)("tr",{children:[(0,_.tZ)("td",{children:l.step}),(0,_.tZ)(Cn.U6,{children:(0,_.tZ)(p.A,{href:{user:l.user_id,absolute:!0},children:(0,d.v2)(l)})}),(0,_.tZ)("td",{children:(0,_.tZ)(G.qp,{time:l.time})}),(0,_.BX)("td",{children:[l.text,(null===(r=t.step_files)||void 0===r||null===(a=r[l.step])||void 0===a?void 0:a.length)>0&&(0,_.tZ)("div",{children:t.step_files[l.step].map((function(e){return(0,_.BX)("div",{children:[(0,_.BX)(p.A,{href:{file:"file_id=".concat(e.file_id)},newTab:!0,children:[e.file_name," (",(0,_.tZ)(G.qp,{time:e.creation_time}),")"]})," ",n&&(0,_.tZ)(u.JO,{icon:"trash",onClick:function(){return n=l.step,r=e.file_id,void(0,Tn.BB)(lng("are you sure you want to delete this file?"),{onConfirm:function(){(0,m.SC)("file/file_id="+r,{method:"DELETE"}),t.step_files[n]=t.step_files[n].filter((function(e){return e.file_id!==r})),i(o+1)}});var n,r}})]},e.file_id)}))})]})]})},rowIdCol:"step"})]})},Mm=n(58714);function Fm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return qm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return qm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xm=(0,o.iv)("padding:10px;background-color:#f5f5f5;border-radius:5px;>.review_head{display:flex;align-items:center;width:100%;>.by_user{flex-grow:1;}>.review_status{background-color:#00A8F6;padding:5px;border-radius:4px;color:white;&.Review{background-color:",i.g.colors.chart.progress,";}&.Yes{background-color:",i.g.colors.chart.success,";}}}>.review_text{font-size:1.3em;padding:20px 0;}>.files_list{margin-bottom:20px;}>.Comments{padding:20px 10px;}",""),Lm=function(e){var t,n=e.performance,r=n.user_id,o=n.answer_text,i=n.files,a=n.performance_id,l=n.performance_completed,s=n.canSetScore,c=n.performance_score,u=new ho.pE({type:"performance",object_id:a});return(0,_.BX)("div",{css:Xm,className:"_section",children:[(0,_.BX)("div",{className:"review_head",children:[(0,_.BX)("div",{className:"by_user",children:[(0,d.Tz)(r)?lng("your answer"):lng("%s's answer",(0,d.v2)(n)),":"]}),(0,d.Tz)(n.user_id)&&(0,_.BX)("div",{className:(0,d.AK)("review_status",l),children:["Review"===l&&lng("under review").caps(),"Yes"===l&&"".concat(lng("score").caps(),": ").concat(c)]}),((null===(t=Blsm.InitialData)||void 0===t?void 0:t.canSetScore)||s)&&(0,_.tZ)(Vm,{performance_id:a,initialScore:"Yes"===l?parseInt(c):void 0})]}),(0,_.tZ)(K.m,{className:"review_text",value:o,children:(0,d.rj)(o)}),(null==i?void 0:i.length)>0&&(0,_.tZ)("div",{className:"files_list",children:i.map((function(e){return(0,_.tZ)("div",{children:(0,_.BX)(p.A,{href:{file:"file_id=".concat(e.file_id)},newTab:!0,children:[e.file_name," (",(0,_.tZ)(G.qp,{time:e.creation_time}),")"]})},e.file_id)}))}),(0,_.tZ)(go.Y.Provider,{value:{bgColor:"white"},children:(0,_.tZ)(go.H,{commentsStore:u,connectTo:u.connectTo})})]})},Um={name:"kig23s",styles:">.Icon.disabled{color:silver;}"},Vm=function(e){var t=e.initialScore,n=e.performance_id,r=Fm((0,a.useState)(t),2),o=r[0],i=r[1],l=!(0,d.kE)(o)||t===o;return(0,_.BX)("div",{css:Um,children:[" ",lng("set score").caps(),": ",(0,_.tZ)(Mm.A,{min:0,max:100,value:o,onChange:i})," ",(0,_.tZ)(u.JO,{icon:"mark_v_strong",className:(0,d.AK)({disabled:l}),disabled:l,toolTip:lng("save score"),onClick:function(){if(!l){var e={req:"set_score",score:o,performance_id:n};(0,m.SC)("Launcher?"+(0,d.$t)((0,d.Lv)()),{method:"post",data:e},(function(){location.reload()}))}}})]})};function Hm(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Gm(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gm(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gm(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Jm=(0,o.iv)("padding:0 15px 15px 15px;margin:0 auto;max-width:800px;overflow:hidden;._head{margin:25px 0;>._title{margin:15px 0;font-size:1.5em;font-weight:600;}>._description{font-size:1.2em;}>._files_links{margin:15px 0;font-size:0.9em;._files_header{font-size:1.1rem;text-decoration:underline;}}}.blue_title{color:",i.g.colors.dominant_main,";}._section{margin:25px 0;}",""),Wm=(0,a.memo)((function(e){var t,n=e.details,r=void 0===n?{}:n,o=e.assignment,i=void 0===o?{}:o,l=e.other_users_answers,s=e.files_links,c=e.request,u=e.request_report,d=e.partner_requests,f="sequence"===r.completion_requirement,m=!1;"manager_review"===r.completion_requirement&&["Review","Yes"].includes(i.performance_completed)?m="manager_review":i.approval_waiting&&c&&(m="approval_waiting");var g=(0,a.useMemo)((function(){return new Am(e,m,f)}),[]);return(0,_.BX)("div",{css:Jm,children:[(0,_.BX)("div",{className:"_head",children:[r.assignment_name&&(0,_.tZ)(K.m,{className:"_title",children:r.assignment_name.caps()}),r.text&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(K.m,{className:"_title",children:lng("description").caps()+":"}),(0,_.tZ)(wr.x,{className:"_description",content:r.text})]}),r.instructions&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(K.m,{className:"_title",children:lng("instructions").caps()+":"}),(0,_.tZ)(wr.x,{className:"_instructions",content:r.instructions})]}),(null==s?void 0:s.length)>0&&(0,_.BX)("div",{className:"_files_links",children:[(0,_.BX)("div",{className:"_files_header",children:[lng("attachments").caps(),":"]}),s.map((function(e){var t=Hm(e,2),n=t[0],r=t[1];return(0,_.tZ)("div",{children:(0,_.tZ)(p.A,{href:n,children:r})},n)}))]})]}),"manager_review"===m&&(0,_.tZ)(Lm,{performance:i}),"approval_waiting"===m&&(0,_.BX)(_.HY,{children:[(0,_.tZ)(zm,{request_report:u,multiFile:f}),(null===(t=c.partners)||void 0===t?void 0:t.length)>0&&(0,_.BX)("div",{className:"_section",children:[(0,_.BX)("div",{className:"blue_title",children:[lng("your partners").caps(),":"]}),(0,_.tZ)(Dm,{request:c})]})]}),!m&&(0,_.tZ)(_.HY,{children:(null==d?void 0:d.length)>0&&(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{className:"_section",children:[(0,_.BX)("div",{className:"blue_title",children:[lng("join one of the following partner groups, or create new submission below").caps(),":"]}),d.length>1&&(0,_.BX)("i",{children:[lng("you can only join one group of partners").caps(),"!"]}),d.map((function(e,t){return(0,_.BX)(a.Fragment,{children:[d.length>1&&(0,_.BX)("div",{children:["#",t+1]}),(0,_.tZ)(Dm,{request:e},e.request_id)]},t)}))]}),(0,_.BX)("div",{className:"blue_title",children:[lng("create new submission").caps(),":"]})]})}),g.fields.length>0&&(0,_.tZ)(Im,{form:g}),"manager_review"===r.completion_requirement&&(null==l?void 0:l.length)>0&&(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{className:"blue_title",children:[lng("other users answers").caps(),":"]}),l.map((function(e){return(0,_.tZ)(Lm,{performance:e},e.performance_id)}))]})]})}));var Km={name:"jixj4z",styles:"width:100%;height:100%;direction:ltr"},$m=(0,a.memo)((function(){return(0,_.tZ)("div",{css:Km,id:"kaltura_launcher_player"})})),Ym=(0,o.iv)("padding:0 15px 15px 15px;margin:0 auto;max-width:800px;overflow:hidden;background-color:",i.g.colors.bg_main,";._head{padding:10px 0;._title{margin:15px 0;font-size:1.5em;font-weight:600;}._author{margin:15px 0;font-size:1.2em;font-weight:600;}._description{font-size:1em;}._last-modified{font-weight:600;}}._content{margin-top:10px;padding:10px;min-height:50px;background-color:",i.g.colors.background_dark,';border-radius:5px;font-size:1.2em;ul,ol{padding:0 20px;}img[src]{max-width:100%;max-height:500px;height:auto;margin:0 auto;@media screen and (max-width: unit((1024 - 1), px)){margin:0;}&[style*="width"]{max-height:initial;}&.image-max-width{width:100%;max-height:initial;}}}',""),Qm=(0,a.memo)((function(e){var t=e.name,n=e.lesson_description,r=e.lesson_data,o=e.lesson_author,i=e.last_modified;return(0,_.BX)("div",{css:Ym,children:[(0,_.BX)("div",{className:"_head",children:[t&&(0,_.tZ)(K.m,{className:"_title",children:t.caps()}),o&&(0,_.BX)(K.m,{className:"_author",children:[lng("by").caps(),": ",o.caps()]}),n&&(0,_.tZ)(wr.x,{content:n,className:"_description"}),i&&(0,_.BX)(K.m,{className:"_last-modified",children:[lng("last modified").caps()+": "," ",(0,d.rj)((0,pt.GG)(i,{time:!0,date:!0}))]})]}),(0,_.tZ)(wr.x,{content:r,className:"_content"})]})}));function eg(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return tg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return tg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function tg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ng=(0,a.memo)((function(e){var t=e.url,n=e.conversion_required,r=e.post,o=eg((0,a.useState)(n),2),i=o[0],l=o[1];return window.pageChanged||(window.pageChanged=function(e){return Blsm.InitLauncherComments(""+--e)}),(0,a.useEffect)((function(){var e,t;null===(e=(t=Blsm).InitLauncherComments)||void 0===e||e.call(t,"0")}),[]),i?(0,_.tZ)(og,{onReady:function(){return l(!1)},post:r}):(0,_.tZ)(Sm,{url:t})})),rg={name:"eub3t0",styles:"display:flex;height:100%;align-items:center;justify-content:center;font-size:1.5em"},og=function(e){var t=e.onReady,n=e.post,r=eg((0,a.useState)(null),2),o=r[0],l=r[1];return(0,a.useEffect)((function(){(0,m.SC)("Launcher"+location.search+"&conv=1",{method:"POST",data:n},(function(e){e.conv_err?l(e.conv_err):t(e)}))}),[]),(0,_.tZ)("div",{css:rg,children:o||(0,_.tZ)(zt.$,{label:lng("please wait, document is getting ready...").caps(),color:i.g.colors.text_main})})};function ig(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ag(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ag(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ag(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lg,sg,cg,ug,pg,dg=(0,o.iv)("width:100%;height:100%;outline-width:0;.slide-main{",i.g.classes.float,";width:100%;height:100%;text-align:center;transition:width 200ms;position:relative;min-width:320px;.slide-img{width:100%;height:100%;background-repeat:no-repeat;background-position:center center;background-size:contain;transition:background 300ms;}.slideNav{position:absolute;top:0;height:100%;background:rgba(0, 0, 0, 0.2);cursor:pointer;display:flex;align-items:center;opacity:0;transition:opacity 200ms;&.prev{",i.g.near,":0;}&.next{",i.g.far,":0;}>.Icon{font-size:40px;color:#fff;}&:hover{opacity:1;}}}.slide-comments{",i.g.classes.float,";height:calc(100vh - 60px);display:none;overflow:auto;white-space:nowrap;background:#fff;>.comments>.comments-list{margin:10px;}}&.comments-open{.slide-comments{display:block;white-space:normal;width:330px;}.slide-main{width:calc(100% - 330px);padding:0 10px;}}&.arrows-visible .slideNav{opacity:1;}",""),fg=(0,a.memo)((function(e){var t=e.lesson_id,n=e.total_slides,r=e.fileTitle,o=e.conversion_required,l=e.post,s=e.setTitleAppendix,c=ig((0,a.useState)(o),2),p=c[0],f=c[1],m=ig((0,a.useState)(0),2),g=m[0],h=m[1],b=ig((0,a.useState)(n),2),y=b[0],v=b[1];y&&s(" (".concat(g+1,"/").concat(y,")"));var w=(0,a.useMemo)((function(){return y&&(0,d.w6)(y).map((function(e){var n=new Image;return n.src="GetFile.php?type=lesson_slide&lid=".concat(t,"&ft=").concat(encodeURIComponent(r),"&sn=").concat(e),n}))}),[t,y,r]),O=ig((0,a.useState)(0),2),k=O[0],x=O[1],S=(0,a.useCallback)((0,d.Ds)((function(){return x(!1)}),1e3),[x]),j=function(e){return h(Math.min(y-1,Math.max(0,g+e)))},C=(0,a.useRef)(0),P=function(e){var t=(new Date).getTime();t-C.current>400&&(C.current=t,j(e))};return(0,a.useEffect)((function(){var e,t;null===(e=(t=Blsm).InitLauncherComments)||void 0===e||e.call(t,g)}),[g]),p?(0,_.tZ)(og,{onReady:function(e){var t=e.total_slides;return v(t),f(!1)},post:l}):(0,_.tZ)("div",{css:dg,className:(0,d.AK)({"arrows-visible":k}),onMouseMove:function(){!k&&x(!0),S()},tabIndex:0,onKeyDown:function(e){var t="ArrowRight"===e.key?1:"ArrowLeft"===e.key?-1:0;0!==t&&j(t*(i.g.isRTL?-1:1))},ref:function(e){return null==e?void 0:e.focus()},children:(0,_.BX)("div",{className:"slide-main",children:[g>0&&(0,_.tZ)("div",{onClick:function(){return P(-1)},className:"slideNav prev",title:lng("previous slide").caps()+" (".concat(g,"/").concat(y,")"),children:(0,_.tZ)(u.JO,{icon:"arrow_near"})}),g<y-1&&(0,_.tZ)("div",{onClick:function(){return P(1)},className:"slideNav next",title:lng("next slide").caps()+" (".concat(g+2,"/").concat(y,")"),children:(0,_.tZ)(u.JO,{icon:"arrow_far"})}),(0,_.tZ)("div",{className:"slide-img",style:{backgroundImage:"url('"+w[g].src+"')"},onClick:function(){return P(1)}})]})})}));function mg(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function gg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hg(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var bg,yg=(sg=hg((lg=function(){function e(t){var n,r,o,i=this,a=t.url,l=t.single_sco,s=t.debug,c=t.token,u=t.api_data,p=t.initial_sco,f=t.end_link,g=t.scos_menu;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mg(this,"url",sg,this),mg(this,"log",cg,this),mg(this,"scosMenu",ug,this),o=[],(r="scosMenuFlat")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,mg(this,"_activeScoId",pg,this),(0,ir.makeObservable)(this),this.url=a,this.api=new window.RunTimeApi(c,s,u,p,null,(function(e){Blsm.InitLauncherComments(""+e),Blsm.prm.performance_id&&(0,m.SC)("generic/performance_location/performance=".concat(Blsm.prm.performance_id,"&location=").concat(e))})),window.API=window.API_1484_11=this.api,g){this._activeScoId=p,(0,hn.v0)(g),this.scosMenu=g;var h=this.api.CalcStatusIcon();(0,d.oH)(this.scosMenu,(function(e){null!=e&&e.id&&e.href&&(e.icon=h[e.id],i.scosMenuFlat.push(e))}))}var b=l;window.ScormExit=function(e){if(g){var t=i.scosMenuFlat.find((function(t){return t.id===e.cur_sco}));t&&(t.icon=i.api.CalcStatusIcon(e.cur_sco))}b&&(i.api.SubmitData(),!s&&l&&window.ScormEnd())},window.addEventListener("beforeunload",(function(){return b=!0})),window.WriteLog=function(e){return i.log=e},window.ScormEnd=function(){return window.AssignmentEnd(f)}}var t,n,r;return t=e,(n=[{key:"activeScoId",get:function(){return this._activeScoId},set:function(e){var t=e&&this.scosMenuFlat.find((function(t){return t.id===e}));t&&(this.api.SetSco(e),this._activeScoId=e,this.url=t.href)}}])&&gg(t.prototype,n),r&&gg(t,r),e}()).prototype,"url",[ir.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),cg=hg(lg.prototype,"log",[ir.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ug=hg(lg.prototype,"scosMenu",[ir.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pg=hg(lg.prototype,"_activeScoId",[ir.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),hg(lg.prototype,"activeScoId",[ir.computed],Object.getOwnPropertyDescriptor(lg.prototype,"activeScoId"),lg.prototype),lg),vg={name:"1yyt0yl",styles:"height:100%;>.log{margin:3px;padding:3px;font-size:.9em;border:1px solid #f0f;}>.scos{height:100%;display:flex;}"},_g=(0,r.observer)((function(e){var t=e.sideMenuOpened,n=(0,a.useMemo)((function(){return new yg(e)}),[]),r=n.log,o=n.url,i=n.scosMenu;return(0,a.useEffect)((function(){Blsm.InitLauncherComments()})),(0,_.BX)("div",{css:vg,children:[r&&(0,_.tZ)("div",{className:"log",children:r}),(0,_.BX)("div",{className:"scos",children:[i&&t&&(0,_.tZ)(Og,{ss:n}),(0,_.tZ)(Sm,{url:o})]})]})})),wg=(0,o.iv)("width:250px;",i.g.classes.border_far("1px solid ".concat(i.g.colors.separator)),";>.buttons{margin-top:20px;display:flex;flex-direction:column;align-items:center;>*+*{margin-top:10px;}}",""),Og=(0,r.observer)((function(e){var t=e.ss,n=t.scosMenu,r=t.activeScoId,o=t.scosMenuFlat,i=o.findIndex((function(e){return e.id===r}));return(0,_.BX)("div",{css:wg,children:[(0,_.tZ)(hn.mp,{tree:n,activeId:r,onSelect:function(e){return t.activeScoId=e}}),(0,_.BX)("div",{className:"buttons",children:[(0,_.BX)("div",{children:[(0,_.tZ)(y.l,{theme:"outlined",disabled:i<=0,onClick:function(){return t.activeScoId=o[i-1].id},children:"<"})," ",(0,_.tZ)(y.l,{theme:"outlined",disabled:i>=o.length-1,onClick:function(){return t.activeScoId=o[i+1].id},children:">"})]}),(0,_.tZ)("div",{children:(0,_.tZ)(y.l,{theme:"contained",onClick:function(){return window.ReturnToMainPage()},children:lng("finish attempt").caps()})})]})]})})),kg=(bg=function(e,t){return(bg=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}bg(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}),xg=function(){return(xg=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},Sg=function(e){var t=e.requirements,n=e.onCancel;(0,f.IV)(n,"ReadingConfirmation"),(0,a.useEffect)((function(){if((0,d.w1)()){try{$("#content_box").contents()}catch(e){$("#content_box").css("visibility","hidden")}return function(){$("#content_box").css("visibility","")}}}),[]);var r=new jg(t),o=[{label:lng("cancel").caps(),action:n,keyboard:"Escape"},{label:lng("confirm").caps(),action:r.callSave,keyboard:"Enter"}];return(0,_.tZ)(A.l,{form:r,onClose:n,title:r.title,dialogTailButtons:o,dialogWidth:"400px",internalForm:!0},void 0)};Sg.propTypes={requirements:Od().object,onCancel:Od().func};var jg=function(e){function t(t){var n=e.call(this,t)||this;n.confirmButtonLabel=!1,n.title=lng("reading confirmation").caps();var r=t.reqPassword,o=t.reqSignature,i=t.postData;if(o&&n._fields.push({type:"signpad",name:"reading_confirmation_signature",label:lng("sign in the section below to confirm submission").caps()+":",required:!0}),r&&n._fields.push({type:"text",name:"reading_confirmation_password",label:lng("type your password to confirm submission"),required:!0,remoteValidate:{url:"users/verify_password",method:"POST",parseResult:function(e){return!0===e.pass?"":lng("wrong password").caps()}}}),null==i?void 0:i.length)for(var a=0,l=i;a<l.length;a++){var s=l[a];n._fields.push({type:"hidden",name:s.name,value:s.value})}return n._prepFields(),n.ready=!0,n}return kg(t,e),Object.defineProperty(t.prototype,"save",{enumerable:!1,configurable:!0,writable:!0,value:function(e){(0,m.hn)(null,xg({confirm_read:1},e))}}),t}(Jt.I);function Cg(e){return(Cg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pg(e,t){return(Pg=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Tg(e);if(t){var o=Tg(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bg(this,n)}}function Bg(e,t){return!t||"object"!==Cg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Tg(e){return(Tg=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Eg=(0,o.iv)("width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;>form{max-width:90vw;background-color:white;border:1px solid ",i.g.colors.separator,";padding:20px;border-radius:10px;>.intro{font-weight:600;font-size:1.2em;}>.error{color:",i.g.colors.negative,";margin-top:15px;}>.Button{width:100%;margin-top:20px;}}",""),Ig=function(e){var t=e.assignment_id,n=e.requirePassword,r=e.error,o=(0,a.useRef)(new Ag({assignment_id:t,requirePassword:n,error:r})).current;return(0,_.tZ)("div",{css:Eg,children:(0,_.tZ)(Jt.q3.Provider,{value:o,children:(0,_.BX)("form",{autoComplete:"off",method:"post",children:[(0,_.tZ)("div",{className:"intro",children:n?lng("please select your user, fill in your password, then click run.").caps():lng("please select your user, then click run.").caps()}),(0,_.tZ)(wa.au,{input:o.fields}),r&&(0,_.tZ)("div",{className:"error",children:r}),(0,_.tZ)(fu.O,{primary:!0,formButton:!0,label:lng("run").caps()})]})})})},Ag=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pg(e,t)}(n,e);var t=Zg(n);function n(e){var r,o=e.assignment_id,i=e.requirePassword;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this))._fields=[{type:"hidden",name:"search_user_id"},{type:"text",name:"search_user",label:lng("connect as user"),placeholder:lng("search user").caps(),suggest:{getData:(0,d.pR)((function(e,t){return(0,m.SC)("assignment/autocomplete_assignment_users",{data:{term:e||"",assignment:o}},t)}))},onSelect:function(e){r.updateValue(e.value,"search_user_id")}},{type:"password",name:"user_password",label:lng("password"),autoComplete:"new-password",insert:i}],r._prepFields(),r}return n}(Jt.I),Dg=["title","content_comments","assignment_id","reading_confirmation","reqPassword","reqSignature","anonymousPostData"];function Rg(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Ng(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return zg(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return zg(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zg(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mg(Object(n),!0).forEach((function(t){qg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function qg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xg=function(e){var t=e.type,n=e.launcherData,r=void 0===n?{}:n,l="iframe"in(0,d.Lv)(),s=(0,a.useRef)(),c=Ng((0,a.useState)(null),2),u=c[0],p=c[1],f=Blsm.LauncherModelData||{},m=f.title,g=f.content_comments,h=f.assignment_id,b=f.reading_confirmation,y=f.reqPassword,v=f.reqSignature,w=f.anonymousPostData,O=Rg(f,Dg),k=Ng((0,a.useState)(""),2),x=k[0],S=k[1],j=Ng((0,a.useState)(r.side_menu),2),C=j[0],P=j[1],Z=Ng((0,a.useState)(!1),2),B=Z[0],T=Z[1],E=(0,a.useRef)(),I=Ng((0,a.useState)(!1),2),A=I[0],D=I[1];(0,a.useEffect)((function(){var e=function(){window.innerHeight>window.innerWidth&&window.scrollTo(0,0)};window.navigator.userAgent.includes("iPhone")&&window.addEventListener("orientationchange",e);var t=function(){return E.current&&(E.current.style.height=window.innerHeight+"px")};return window.navigator.userAgent.includes("Mobile")&&(window.addEventListener("resize",t),t()),function(){window.removeEventListener("orientationchange",e),window.removeEventListener("resize",t)}}),[]);var R,N="media"===t?A?lng("i confirm that I have watched and understood the contents of this video"):lng("please watch the entire video to confirm the assignment"):lng("i confirm that I have read and understood the contents of this document");return(0,_.BX)("div",{css:(R=!b&&!["text","activity","kiosk","kaltura"].includes(t),(0,o.iv)("display:flex;flex-direction:column;",R?"min-":"","height:100vh;>.main_space{background-color:",i.g.colors.bg_main,";flex-grow:1;overflow:auto;display:flex;>.launcher{flex-grow:1;}>.comments{height:100%;width:330px;background:#FFF;border-left:1px solid #d8d8d8;border-right:1px solid #d8d8d8;}}>form{padding:7px;text-align:center;}@media print{height:auto;display:block;>.main_space{display:block;}}","")),ref:E,children:[!l&&(0,_.tZ)(Ug,Fg(Fg({},O),{},{title:m+x,scoMenuIcon:r.side_menu,toggleScoMenu:function(){return P(!C)},content_comments:g,openFullScreen:d.Rh?function(){var e;return null===(e=s.current)||void 0===e?void 0:e[d.Rh]()}:null,toggleComments:function(){return p(!u)}})),(0,_.BX)("div",{className:"main_space",ref:s,children:[(0,_.tZ)("div",{className:"launcher",children:"image"===t?(0,_.tZ)(bm,Fg({},r)):"media"===t?(0,_.tZ)(km,Fg(Fg({},r),{},{onEnded:function(){return D(!0)}})):"activity"===t?(0,_.tZ)(Wm,Fg({},r)):"kaltura"===t?(0,_.tZ)($m,Fg({},r)):"text"===t?(0,_.tZ)(Qm,Fg({},r)):"docs"===t?(0,_.tZ)(ng,Fg({},r)):"slides"===t?(0,_.tZ)(fg,Fg(Fg({},r),{},{setTitleAppendix:S})):"scorm"===t?(0,_.tZ)(_g,Fg(Fg({},r),{},{sideMenuOpened:C})):"iframe"===t?(0,_.tZ)(Sm,Fg({},r)):"kiosk"===t?(0,_.tZ)(Ig,Fg({},r)):"unknown launcher"}),g&&(0,_.tZ)("div",{className:"comments",style:{display:u?"block":"none"},children:(0,_.tZ)(Vf,{assignmentId:h,opened:null!==u})})]}),b&&(0,_.BX)("form",{method:"post",onSubmit:function(e){(y||v)&&(e.preventDefault(),T(!0))},children:[(0,_.tZ)(fu.O,{primary:!0,formButton:!0,name:"confirm_read",value:"1",label:N.caps(),disabled:"media"===t&&!A}),B?(0,_.tZ)(Sg,{requirements:{reqPassword:y,reqSignature:v,postData:w},onCancel:function(){return T(!1)}}):w.map((function(e){return(0,_.tZ)("input",{type:"hidden",name:e.name,value:e.value},e.name)}))]})]})},Lg=(0,o.iv)("background:",i.g.theme.ln_bg," linear-gradient(45deg, rgba(0, 0, 0, 0.3), transparent);color:",i.g.theme.ln_fg,";position:relative;z-index:1;box-shadow:0 0 5px rgba(0, 0, 0, .5);padding:11px 20px 13px 20px;height:50px;font-size:19px;display:flex;justify-content:space-between;>.actions{display:flex;align-items:center;.logo{max-width:65px;max-height:21px;margin:0 10px;}.exit{",i.g.classes.margin_near("10px"),";cursor:pointer;}}.title{",i.g.classes.ellipsis,";.about_user{font-size:0.6em;}}",""),Ug=function(e){var t=e.title,n=e.pretend,r=e.show_download,o=e.openFullScreen,a=e.toggleComments,l=e.content_comments,s=e.scoMenuIcon,c=e.toggleScoMenu,d=e.about_user;return(0,_.BX)("div",{css:Lg,children:[(0,_.BX)("div",{className:"actions",children:[s&&(0,_.tZ)(u.JO,{buttonLike:!0,icon:"list",onClick:c}),(0,_.tZ)("img",{className:"logo",src:i.g.theme.logo_small||"".concat(Blsm.prm.Mainref,"images/v4/blossom_logo_small_white.png"),alt:"logo"}),o&&(0,_.tZ)(u.JO,{buttonLike:!0,icon:"full_screen",onClick:o}),r&&(0,_.tZ)("a",{href:location.href+"&dl=1",target:"_blank",rel:"noreferrer",children:(0,_.tZ)(u.JO,{buttonLike:!0,icon:"download",toolTip:"".concat(lng("download")," / ").concat(lng("open in a new tab")).caps()})}),n&&(0,_.tZ)(u.JO,{buttonLike:!0,icon:"pretend",toolTip:lng("pretending to be %s",n)})]}),(0,_.tZ)("div",{className:"title",children:(0,_.tZ)("span",{children:(0,_.BX)(K.m,{children:[t," ",d&&(0,_.tZ)("span",{className:"about_user",title:lng("about user"),children:(0,_.tZ)("a",{target:"_blank",rel:"noreferrer",href:(0,p.p4)({absolute:!0,user:d.user_id}),children:d.user_full_name})})]})})}),(0,_.BX)("div",{className:"actions",children:[l&&(0,_.tZ)(u.JO,{buttonLike:!0,icon:"discussion",onClick:a}),(0,_.BX)("div",{className:"exit",onClick:function(){return window.ReturnToMainPage()},children:[(0,_.BX)("span",{className:"mobile_off",children:[lng("exit").caps()," "]}),(0,_.tZ)(u.JO,{buttonLike:!0,icon:"exit"})]})]})]})};function Vg(e){return(Vg="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Hg=["wrong_pass"];function Gg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Jg(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wg(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kg(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function $g(e,t){return($g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Yg(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=eh(e);if(t){var o=eh(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Qg(this,n)}}function Qg(e,t){return!t||"object"!==Vg(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function eh(e){return(eh=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function th(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var nh=(0,o.iv)("width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;>form{max-width:90vw;background-color:white;border:1px solid ",i.g.colors.separator,";padding:20px;border-radius:10px;>.intro{font-weight:600;}>.error{color:",i.g.colors.negative,";margin-top:15px;text-align:center;}>.Button{width:100%;margin-top:20px;}}",""),rh=function(e){var t=e.wrong_pass,n=th(e,Hg),r=(0,a.useRef)(new oh(n)).current;return(0,_.tZ)("div",{css:nh,children:(0,_.tZ)(Jt.q3.Provider,{value:r,children:(0,_.BX)("form",{autoComplete:"off",method:"post",onSubmit:function(e){var t;null===(t=e.preventDefault)||void 0===t||t.call(e),r.callSave()},children:[(0,_.tZ)("div",{className:"intro",children:lng("please fill the form below, then click start.").caps()}),t&&(0,_.tZ)("div",{className:"error",children:lng("incorrect password").caps()}),(0,_.tZ)(wa.au,{input:r.fields}),(0,_.tZ)(fu.O,{primary:!0,formButton:!0,label:lng("start").caps()})]})})})},oh=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$g(e,t)}(i,e);var t,n,r,o=Yg(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Wg(this,i),e=o.call(this,t);var n=t.assignment_password,r=t.anonymous_fetch_form;return r&&e._fields.push({type:"text",name:"anonymous_details[first_name]",label:lng("first name").caps()},{type:"text",name:"anonymous_details[last_name]",label:lng("last name").caps()},{type:"text",name:"anonymous_details[identification]",label:lng("identification").caps()}),n&&e._fields.push({type:"text",name:"password",label:lng("password").caps()+":",required:!0}),e._prepFields(),e.ready=!0,e}return t=i,(n=[{key:"save",value:function(e){(0,m.hn)(null,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Gg(Object(n),!0).forEach((function(t){Jg(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({start:1},e))}}])&&Kg(t.prototype,n),r&&Kg(t,r),i}(Jt.I);function ih(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ah(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ah(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ah(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var lh=(0,o.iv)("width:100%;height:100%;display:flex;flex-direction:column;align-items:center;>div{width:400px;max-width:85vw;}.header{margin:2em 0 1em;>.title{font-size:1.5em;margin-bottom:1em;&.center{text-align:center;}}}>.list{flex-grow:1;overflow:auto;>div+div{margin-top:1em;}.strip_data{display:flex;align-items:center;>*{",i.g.classes.margin_near("10px"),";}}}",""),sh=function(e){var t=e.users,n=e.print,r=e.title_none,o=e.select_title,l=e.show_avatar,s=ih((0,a.useState)(""),2),c=s[0],p=s[1];return(0,_.BX)("div",{css:lh,children:[(0,_.tZ)("div",{className:"header",children:0===t.length?(0,_.tZ)("div",{className:"title center",children:r||lng("no users").caps()}):(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{className:"title",children:[o||lng("choose user").caps(),":"]}),(0,_.tZ)(b.I,{type:"search",wrapped:!0,value:c,onChange:p,placeholder:lng("filter").caps()})]})}),(0,_.tZ)("div",{className:"list",children:(0,So.WB)(t,{label:c}).map((function(e){var t,r,o=["Yes","Exemption"].includes(e.performance_completed)?[lng("completed"),i.g.colors.green]:e.has_resume?[lng("resume"),i.g.colors.blue]:!1===e.dependencies_satisfied?[lng("blocked"),i.g.colors.disabled_background]:[lng("to do"),i.g.colors.yellow],a=void 0;(null===(t=e.dependency_list)||void 0===t?void 0:t.length)>0&&(a=(0,_.BX)(_.HY,{children:[(0,_.BX)("div",{children:[lng("dependencies"),":"]}),null===(r=e.dependency_list)||void 0===r?void 0:r.map((function(e){return(0,_.BX)("div",{children:[(0,_.tZ)(u.JO,{icon:"mark_"+(e.satisfied?"v":"x")})," ",e.assignment_name||e.lesson_name]},e.assignment_id)}))]}));return(0,_.tZ)(Ro.o,{title:e.label,avatar:l?e:void 0,avatarBalloon:!1,img:e.poster,markColor:o[1],onClick:function(){return function(e){!1===e.dependencies_satisfied?(0,Tn.BB)(lng("this user has unsatisfied dependencies for this assignment, are you sure you want to run it?"),{confirmText:lng("yes"),cancelText:lng("no"),onConfirm:function(){return setTimeout((function(){return window.location=e.url}),10)}}):window.location=e.url}(e)},children:(0,_.BX)("div",{className:"strip_data",children:[(0,_.tZ)(I.u,{html:a,children:(0,_.tZ)(Lo.V,{tag:o[0],color:o[1]})}),n&&(0,_.tZ)(u.JO,{icon:"print",href:e.url+"&print=1",toolTip:lng("print")}),e.count_performances>0&&(0,_.tZ)(I.u,{text:lng("number of performances"),children:e.count_performances})]})},e.user_id)}))})]})};function ch(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ph=(0,o.iv)("width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;>div{max-width:90vw;background-color:white;border:1px solid ",i.g.colors.separator,";padding:20px;border-radius:10px;.msg{font-size:1.5em;}.redirect_msg{margin-top:1em;}a{text-decoration:underline;}}",""),dh=function(e){var t=e.msg,n=e.url,r=e.redirect_msg,o=e.time,i=ch((0,a.useState)(o||5),2),l=i[0],s=i[1];return(0,a.useEffect)((function(){var e=setInterval((function(){if(l>=1)return 1===l&&(clearInterval(e),Blsm.prm.LOCALHOST||(n?window.location=n:window.location.reload())),s(l-1)}),1e3);return function(){return clearInterval(e)}})),(0,d.HD)(r)&&r.includes("TIME")&&(r=r.replace("TIME",l)),(0,_.tZ)("div",{css:ph,children:(0,_.BX)("div",{children:[(0,_.tZ)("div",{className:"msg",children:t.replace("TIME",l)}),r&&(0,_.tZ)("div",{className:"redirect_msg",dangerouslySetInnerHTML:{__html:r}})]})})};function fh(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return mh(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mh(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function mh(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var gh=(0,o.iv)("width:100%;height:100%;display:flex;flex-direction:column;align-items:center;>div{width:400px;max-width:85vw;}.header{margin:2em 0 1em;>.title{font-size:1.5em;margin-bottom:1em;&.center{text-align:center;}}}>.list{flex-grow:1;overflow:auto;>div+div{margin-top:1em;}.strip_data{display:flex;align-items:center;>*{",i.g.classes.margin_near("10px"),";}}}",""),hh=function(e){var t=e.languages,n=e.resume_lesson;return(0,_.BX)("div",{css:gh,children:[(0,_.tZ)("div",{className:"header",children:(0,_.BX)("div",{className:"title",children:[lng("choose language").caps(),":"]})}),(0,_.tZ)("div",{className:"list",children:t.map((function(e){var t=fh(e,3),r=t[0],o=t[1],a=t[2];return(0,_.tZ)(Ro.o,{title:a.caps(),onClick:function(){return location.href+="&lang=".concat(r)},children:(null==n?void 0:n.toString())===o&&(0,_.tZ)(Lo.V,{tag:lng("resume"),color:i.g.colors.blue})},r)}))})]})};function bh(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function yh(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?bh(Object(n),!0).forEach((function(t){vh(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bh(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function vh(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _h={name:"m0ybr9",styles:"display:flex;flex-direction:column;height:100vh;>.main_space{background-color:#eee;flex-grow:1;overflow:auto;display:flex;}"},wh=function(e){var t=e.type,n=e.data,r=(n||{}).title;return(0,_.BX)("div",{css:_h,children:[(0,_.tZ)(Ug,{title:r}),(0,_.tZ)("div",{className:"main_space",children:"anonymous_form"===t?(0,_.tZ)(rh,yh({},n)):"user_select"===t?(0,_.tZ)(sh,yh({},n)):"language_select"===t?(0,_.tZ)(hh,yh({},n)):"error"===t?(0,_.tZ)(dh,yh({},n)):"unknown type"})]})};Platform.Components={LoginRouter:function(e){var t,n=e.form,r=Bf((0,a.useState)(d.VD),2),l=r[0],s=r[1],c=window.location.protocol+"//"+window.location.host+Blsm.prm.relative_path;(0,f.OR)("hashchange",(function(){s((0,d.VD)())}));var u=(0,a.useRef)();return(0,a.useEffect)((function(){u.current&&(0,d.w1)()&&(u.current.style.height=u.current.offsetHeight+"px")})),(0,_.BX)("div",{css:Ef,children:[(0,_.tZ)(Pf,{}),(0,_.tZ)(o.xB,{styles:(0,o.iv)('body{background:#8f7fc2 url("',i.g.theme.login_bg,'") no-repeat center center fixed;background-size:cover;min-height:100vh;}',"")}),(0,_.tZ)(xf,{registrationMode:"register"===n}),(0,_.tZ)(jf,{}),"1"!==(null===(t=Blsm.InitialData)||void 0===t?void 0:t.dont_go_mobile)&&(0,_.tZ)(h.s,{className:"qr mobile_off",value:c}),(0,_.tZ)("div",{className:"middle",ref:u,children:(0,_.BX)("div",{className:"_dialog",children:[(0,_.tZ)("div",{className:"logo"}),(0,_.tZ)("div",{className:"separator"}),(0,_.tZ)(wa.p8.Provider,{value:"register"===n?"":"login",children:["changepass","passrecover"].includes(n)?(0,_.tZ)(Qd,{recovery:"passrecover"===n}):"register"===n?(0,_.tZ)(vf,{}):"recovery"===l?(0,_.tZ)(Hd,{}):"sms"===l?(0,_.tZ)(af,{}):"otp"===l?(0,_.tZ)(Wd,{}):"activation_email"===l?(0,_.tZ)(If,{text:lng("account activation link was sent to your email.")}):"activation_sequence"===l?(0,_.tZ)(If,{text:lng("you will be notified when your account is approved.")}):(0,_.tZ)(Xd,{})})]})})]})},PatientComPage:Nf,PrintCharts:function(e){return e.graphs.map((function(e,t){var n,r=e.type,o=e.data,i="pie"===r?(null==o||null===(n=o.info)||void 0===n?void 0:n.values)||Object.values(o)[0].values:o;return(0,_.BX)("div",{css:zf,children:[(0,_.tZ)("div",{className:"chart-title",children:e.name}),(0,_.tZ)(st.kL,{type:r,data:i,legend:!0,height:"250px",dataLabel:!0})]},t)}))},V5Main:function(){var e=(0,v.vm)(!0);return(0,_.tZ)(cm.C,{value:(0,um.Z)({key:"main"}),children:(0,_.BX)(v.l9.Provider,{value:e,children:[(0,_.tZ)(Pf,{}),(0,_.tZ)(yd,{}),(0,_.tZ)(Id,{}),(0,_.tZ)(sm,{}),(0,_.tZ)(Oe,{}),(0,_.tZ)(Qe,{}),(0,_.tZ)(pm.k,{}),Blsm.prm.inactivity_logout>0&&(0,d.B5)(Blsm.user.id)?(0,_.tZ)(mm,{minutes:Blsm.prm.inactivity_logout}):null]})})},Launcher:{InitLauncher:function(e){window.ReactDOM.render((0,_.BX)(_.HY,{children:[(0,_.tZ)(Pf,{}),(0,_.tZ)(Xg,Fg({},e))]}),(0,d.wq)("launcher_page"))},InitPreLauncher:function(e){window.ReactDOM.render((0,_.BX)(_.HY,{children:[(0,_.tZ)(Pf,{}),(0,_.tZ)(wh,yh({},e))]}),(0,d.wq)("prelauncher_page"))},LauncherCommentsExt:function(e){var t=Xf((0,a.useState)(!1),2),n=t[0],r=t[1];return(0,a.useEffect)((function(){$(".toggle_comments, #blsm-qp-toggle-comments").show().click((function(){$("#blsm-qp-container").toggleClass("comments-open"),n||r(!0)}))}),[]),(0,_.tZ)(Vf,Ff(Ff({},e),{},{opened:n}))}}}},22698:function(e,t,n){"use strict";n.d(t,{Dq:function(){return O},LZ:function(){return y},a_:function(){return _},kA:function(){return v}});var r=n(87363),o=n(15560),i=n(33051),a=n(66975),l=n(71134),s=n(1711),c=n(35944);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||d(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||d(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){if(e){if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?f(e,t):void 0}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t=e.onClick?function(t){"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),e.onClick(t))}:void 0;return g({tabIndex:t?0:void 0,onKeyDown:t},e)},y=(0,r.forwardRef)((function(e,t){return(0,c.tZ)("div",g(g({},b(e)),{},{ref:t}))})),v=(0,r.forwardRef)((function(e,t){return(0,c.tZ)("th",g(g({},b(e)),{},{ref:t}))})),_=(0,r.forwardRef)((function(e,t){return(0,c.tZ)("a",g(g({},b(e)),{},{ref:t}))})),w={name:"1azakc",styles:"text-align:center"},O=(0,o.observer)((function(){var e=s.i.fontSize,t=s.i.mode,n=[t&&{val:"",label:lng("normal mode")}].concat(p(Object.entries(s.i.modes).map((function(e){var n=u(e,2),r=n[0];return{val:r,label:n[1][0],active:t===r}}))),[{val:"1",label:"A (100%)",active:"1"===e},{val:"1.1",label:"A (110%)",active:"1.1"===e,style:{fontSize:"1.2em"}},{val:"1.2",label:"A (120%)",active:"1.2"===e,style:{fontSize:"1.4em"}}]);return(0,c.tZ)(i.x,{css:w,options:n,onSelect:function(e){(0,l.kE)(e)?s.i.fontSize=e:s.i.mode=e},children:(0,c.tZ)(a.JO,{icon:"accessibility"})})}))},21858:function(e,t,n){"use strict";n.d(t,{u:function(){return o}});var r=n(35944),o=function(e){var t=e.text,n=e.ceiling,o=void 0===n?100:n,i=e.floor,a=void 0===i?60:i,l=(null==t?void 0:t.length)>o?"0.9em":(null==t?void 0:t.length)>a?"1em":"1.1em";return(0,r.tZ)("span",{style:{fontSize:l},children:t})}},68567:function(e,t,n){"use strict";n.d(t,{BB:function(){return Z},I4:function(){return x},NL:function(){return S},bZ:function(){return j},cS:function(){return T},qR:function(){return B},wN:function(){return P}});var r=n(70917),o=n(16920),i=n(48207),a=n(87363),l=n(43698),s=n(71134),c=n(15560),u=n(27821),p=n(70081),d=(n(57882),n(61533)),f=n.n(d),m=n(35944);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=(0,r.iv)("color:",o.g.colors.text_sec,";",""),k=function(e){var t=e.title,n=void 0===t?"":t,r=e.children,o=e.buttons,a=e.width,l=void 0===a?"400px":a,s=e.zIndex,c=e.onClose;return(0,m.tZ)(i.T,{css:O,title:n.caps(),width:l,tailButtons:o,zIndex:s,onClose:c,hideX:!0,children:r})},x=function(e){var t=e.onConfirm,n=e.onCancel,r=e.children,o=e.cancelText,i=void 0===o?lng("cancel"):o,a=e.confirmText,l=void 0===a?lng("confirm"):a,s=e.title,c=void 0===s?lng("confirm"):s,u=e.zIndex,d=e.width;(0,p.IV)(n,"Confirm");var f=[{label:i.caps(),action:n,keyboard:"Escape"},{label:l.caps(),action:t,keyboard:"Enter"}];return(0,m.tZ)(k,{title:c,buttons:f,zIndex:u,width:d,onClose:n,children:"string"==typeof r?r.caps():r})},S=function(e){var t,n=e.title,r=void 0===n?lng("prompt"):n,o=e.onConfirm,i=e.onCancel,s=e.children,c=e.cancelText,u=void 0===c?lng("cancel"):c,p=e.confirmText,d=void 0===p?lng("confirm"):p,f=e.buttons,g=void 0===f?[]:f,b=e.placeholder,_=e.startValue,w=e.inputType,O=e.selectOptions,x=e.inputOptions,S=e.inputRequired,j=e.multiline,C=e.width,P=e.valueValid,Z=void 0===P?function(){return!0}:P,B=v((0,a.useState)(_||(null==O||null===(t=O[0])||void 0===t?void 0:t.val)||""),2),T=B[0],E=B[1],I=[u&&{label:u.caps(),action:i,bold:!0,keyboard:"Escape"},d&&{label:d.caps(),action:function(){return Z(T)&&o(T)},keyboard:j?void 0:"Enter",disabled:!Z(T)||S&&!T}].concat(y(g)).filter((function(e){return e}));Z(T);return(0,m.BX)(k,{title:r,buttons:I,width:C,onClose:i,children:["string"==typeof s?s.caps():s,(0,m.tZ)(l.I,h({type:w||"text",value:T,onChange:function(e){return E(e)},focusOnShow:!0,options:O,wrapped:!0,label:b,labelMargin:!0},x))]})},j=function(e){var t=e.children,n=e.closeText,r=void 0===n?lng("OK"):n,o=e.onCancel,i=e.title,a=void 0===i?lng("alert"):i,l=e.width;(0,p.IV)(o,"Alert");var s=[{label:r.caps(),action:o,bold:!0,theme:"outlined",keyboard:"Enter"}];return(0,m.tZ)(k,{buttons:s,title:a,width:l,onClose:o,children:"string"==typeof t?t.caps():t})},C=(0,u.observable)({type:"",content:null,options:{}}),P=function(){return C.type=""},Z=(0,u.action)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Confirm";C.type=n,C.content=function(){return e},C.options=h(h({},t),{},{onConfirm:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return P(),(0,s.g4)(t.onConfirm,null,n)},onCancel:function(){for(var e=arguments.length,n=new Array(e),r=0;r<e;r++)n[r]=arguments[r];return P(),(0,s.g4)(t.onCancel,null,n)}})})),B=(0,u.action)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Z(e,t,"Alert")})),T=(0,u.action)((function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Z(e,t,"Prompt")})),E=(0,c.observer)((function(){var e=C.type,t=C.content,n=C.options;switch(e){case"Alert":return(0,m.tZ)(j,h(h({},(0,u.toJS)(n)),{},{children:t()}));case"Confirm":return(0,m.tZ)(x,h(h({},(0,u.toJS)(n)),{},{children:t()}));case"Prompt":return(0,m.tZ)(S,h(h({},(0,u.toJS)(n)),{},{children:t()}))}return null}));(0,s.Um)((function(){f().render((0,m.tZ)(E,{}),(0,s.wq)("AlertOpener"))}))},24524:function(e,t,n){"use strict";n.d(t,{M:function(){return s}});var r=n(70917),o=n(16920),i=n(86344),a=n(35944),l=(0,r.iv)("@keyframes rotate-circle{0%{transform:rotate(-45deg);}5%{transform:rotate(-45deg);}12%{transform:rotate(-405deg);}100%{transform:rotate(-405deg);}}@keyframes cm-line-tip{0%{width:0;left:1px;top:19px;}54%{width:0;left:1px;top:19px;}70%{width:50px;left:-8px;top:37px;}84%{width:17px;left:21px;top:48px;}100%{width:25px;left:14px;top:45px;}}@keyframes cm-line-long{0%{width:0;right:46px;top:54px;}65%{width:0;right:46px;top:54px;}84%{width:55px;right:0px;top:35px;}100%{width:47px;right:8px;top:38px;}}width:80px;height:115px;margin:0 auto;.check-icon{width:80px;height:80px;position:relative;border-radius:50%;box-sizing:content-box;border:4px solid ",o.g.colors.green,";&::before{top:3px;left:-2px;width:30px;transform-origin:100% 50%;border-radius:100px 0 0 100px;}&::after{top:0;left:30px;width:60px;transform-origin:0 50%;border-radius:0 100px 100px 0;animation:rotate-circle 4.25s ease-in;}&::before,&::after{content:'';height:100px;position:absolute;background:",o.g.colors.bg_main,";transform:rotate(-45deg);}.cm-line{height:5px;background-color:",o.g.colors.green,";display:block;border-radius:2px;position:absolute;z-index:10;&.line-tip{top:46px;left:14px;width:25px;transform:rotate(45deg);animation:cm-line-tip 0.75s;}&.line-long{top:38px;right:8px;width:47px;transform:rotate(-45deg);animation:cm-line-long 0.75s;}}.cm-circle{top:-4px;left:-4px;z-index:10;width:80px;height:80px;border-radius:50%;position:absolute;box-sizing:content-box;border:4px solid ",(0,i.mR)(o.g.colors.green,.5),";}.cm-fix{top:8px;width:5px;left:26px;z-index:1;height:85px;position:absolute;transform:rotate(-45deg);background-color:",o.g.colors.bg_main,";}}",""),s=function(){return(0,a.tZ)("div",{css:l,children:(0,a.BX)("div",{className:"check-icon",children:[(0,a.tZ)("span",{className:"cm-line line-tip"}),(0,a.tZ)("span",{className:"cm-line line-long"}),(0,a.tZ)("div",{className:"cm-circle"}),(0,a.tZ)("div",{className:"cm-fix"})]})})}},71137:function(e,t,n){"use strict";n.d(t,{d:function(){return f}});var r=n(70917),o=n(16920),i=n(87363),a=n(71134),l=n(70081),s=(n(57882),n(35944));function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=function(e){var t=e.time,n=e.size,i=e.scroll,a=e.axis,l=void 0===a?"top":a,s="side"===l?o.g.near:l,c="side"===l?o.g.far:"top"===l?"bottom":"top",u="Dr"+l,p="min(100vw, ".concat(n,")"),d="left"===l||"right"===l||"side"===l;return(0,r.iv)("@keyframes ",u,"SlideIn{from{",s,":100%;}to{",s,":calc(100% - ",p,");}}@keyframes ",u,"SlideOut{from{",s,":calc(100% - ",p,");}to{",s,":100%;}}@keyframes ",u,"FadeIn{from{opacity:0;}to{opacity:1;}}@keyframes ",u,"FadeOut{from{opacity:1;}to{opacity:0;}}position:fixed;z-index:",o.g.z.top_bar-1,";top:0;bottom:0;left:0;right:0;",o.g.classes.page_position,";background-color:rgba(0, 0, 0, .7);opacity:1;animation:",u,"FadeIn ",t,"s ease-in-out;._slider{position:absolute;",c,":0;",d?"max-width: 100vw":"max-height: 100vh",";",d?"width":"height",":",n,";",d?"height":"width",":100%;background-color:",o.g.colors.bg_main,";animation:",u,"SlideIn ",t,"s ease-in-out;border-",l,":1px solid ",o.g.colors.separator,";z-index:",o.g.z.top_bar,";",i?"overflow: auto;":"",";}&._start{opacity:0;._slider{",l,":100%;}}&._close{animation:",u,"FadeOut ",t,"s ease-in-out;opacity:0;._slider{animation:",u,"SlideOut ",t,"s ease-in-out;",l,":100%;}}","")},d=function(e){return"left"===e?"right":"right"===e?"left":"top"===e?"bottom":"side"===e?"side":"top"},f=(0,i.forwardRef)((function(e,t){var n=e.children,r=e.from,o=void 0===r?"bottom":r,u=e.size,f=e.time,m=void 0===f?.5:f,g=e.scroll,h=e.refDrawerBody,b=e.onClose,y=e.addPushState,v=void 0!==y&&y;u||(u=["top","bottom"].includes(o)?"65%":"533px"),(0,l.Ry)();var _=c((0,i.useState)(0),2),w=_[0],O=_[1];(0,i.useEffect)((function(){O(w+1)}),[]);var k=function(){O(w+1),b&&setTimeout(b,1e3*m+100)};return(0,i.useImperativeHandle)(t,(function(){return{close:k}})),(0,l.IV)(k,"Drawer",!v),(0,s.tZ)("div",{children:(0,s.tZ)("div",{css:p({time:m,size:u,scroll:g,axis:d(o)}),className:(0,a.AK)({_start:0===w,_close:2===w}),onClick:function(e){return e.currentTarget===e.target&&k()},children:(0,s.tZ)("div",{className:"_slider",ref:h,children:n})})})}))},67033:function(e,t,n){"use strict";n.d(t,{U:function(){return s}});var r=n(87363),o=n(35944);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l={name:"18gk200",styles:"@keyframes kfFadeIn{from{opacity:0;}to{opacity:1;}}animation:kfFadeIn .3s ease-in-out;opacity:1;&.first-hide{opacity:0;pointer-events:none;}"},s=function(e){var t=e.children,n=i((0,r.useState)(0),2),a=n[0],s=n[1];return(0,r.useEffect)((function(){s(a+1);var e=setTimeout((function(){return s((function(e){return e+1}))}),500);return function(){return clearTimeout(e)}}),[]),(0,o.tZ)("div",{css:a<2?l:void 0,className:0===a?"first-hide":"",children:t})}},41042:function(e,t,n){"use strict";n.d(t,{$:function(){return p},E:function(){return u}});var r=n(70917),o=n(16920),i=n(87363),a=n(71134);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=o.g.isRTL?-1:1,u=(0,r.iv)("@keyframes io_blowIn{0%{transform:scale(0.01);}100%{transform:scale(1);}}@keyframes io_blowOut{0%{transform:scale(1);opacity:1;}100%{transform:scale(0.01);opacity:0;}}@keyframes io_blow_yIn{0%{transform:scaleY(0.01);}100%{transform:scaleY(1);}}@keyframes io_blow_yOut{0%{transform:scaleY(1);}100%{transform:scaleY(0.01);}}@keyframes io_slideIn{0%{transform:translateX(",1500*-c,"px) skewX(",5*c,"deg) scaleX(1.1);}70%{transform:translateX(",30*c,"px) skewX(2deg) scaleX(.95);}100%{transform:translateX(0px) skewX(0deg) scaleX(1);}}@keyframes io_slideOut{0%{transform:translateX(0px) skewX(0deg) scaleX(1);}30%{transform:translateX(",30*c,"px) skewX(",2*-c,"deg) scaleX(.95);}100%{transform:translateX(",1500*-c,"px) skewX(",5*-c,"deg) scaleX(1.1);}}@keyframes io_fadeIn{0%{opacity:0;}100%{opacity:1;}}@keyframes io_fadeOut{0%{opacity:1;}100%{opacity:0;}}",""),p=function(e){var t=e.show,n=void 0===t||t,r=e.type,o=void 0===r?"fade":r,s=e.speed,c=void 0===s?".3s":s,u=e.onHide,p=l((0,i.useState)(n),2),d=p[0],f=p[1];return(0,i.useEffect)((function(){n&&f(!0)}),[n]),[d,{style:{animation:"io_".concat(o).concat(n?"In":"Out"," ").concat(c," ease-in-out")},onAnimationEnd:function(){n||(f(!1),(0,a.g4)(u))}}]}},97059:function(e,t,n){"use strict";n.d(t,{N4:function(){return b},_P:function(){return m}});var r=n(70917),o=n(66975),i=n(16920),a=n(42755),l=n(35944);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e){var t=e.size,n=t/20+5*e.factor;return(0,r.iv)("width:",t,"px;height:",t,"px;position:relative;>svg{width:100%;height:100%;}>.icon-box{position:absolute;display:flex;justify-content:center;align-items:center;>.Icon{font-size:",n,"px;color:white;}}","")},f=500,m=function(e){for(var t=e.values,n=250,i=3-t.length,a=[],p=[],m=0,h=Object.entries(t);m<h.length;m++){var b=u(h[m],2),y=b[0],v=b[1],_=n-(10+5*i)-60-y*(60+15*i),w=50+15*i;a.push({percent:v.val,r:_,width:w,dotColor:v.color});var O=w/2-5;p.push({icon:v.icon,label:v.label,top:(n-_)/f*200-O/2+"px",left:"calc(50% - ".concat(O/2,"px)"),length:O+"px"})}return(0,l.BX)("div",{css:d({size:200,factor:i}),className:"Rings",children:[(0,l.BX)("svg",{viewBox:"0 0 ".concat(f," ").concat(f),children:[(0,l.tZ)("circle",{cx:n,cy:n,r:n,fill:"rgba(255, 255, 255, .1)"}),a.map((function(e,t){return(0,l.tZ)(g,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),t)}))]}),p.map((function(e,t){return(0,l.tZ)("div",{className:"icon-box",css:(0,r.iv)({left:e.left,top:e.top,width:e.length,height:e.length},"",""),children:(0,l.tZ)(o.JO,{icon:e.icon,toolTip:{text:e.label,theme:"bln-tooltip-bright"}})},t)}))]})},g=function(e){var t=e.percent,n=e.r,r=e.width,o=e.dotColor,i=2*n*Math.PI,a=250,s=Math.max(.001,t/100);return(0,l.BX)(l.HY,{children:[(0,l.tZ)("circle",{r:n,fill:"none",stroke:"rgba(255, 255, 255, .2)",strokeWidth:r,transform:"translate(".concat(a,", ").concat(a,") rotate(-90)")}),(0,l.tZ)("circle",{r:n,fill:"none",stroke:"white",strokeWidth:r,strokeLinecap:"round",transform:"translate(".concat(a,", ").concat(a,") rotate(-90)"),strokeDasharray:"".concat(i," ").concat(i),strokeDashoffset:(1-s)*i,children:(0,l.tZ)("animate",{repeatCount:"1",attributeName:"stroke-dashoffset",dur:"2s",from:i,to:i*(1-s)})}),o&&(0,l.tZ)("circle",{fill:o,cx:a,cy:a-n,r:r/2-5})]})},h=(0,r.iv)("margin:5px;padding:5px;display:inline-flex;border-radius:8px;background:rgba(255,255,255,0.2);width:190px;.info{",i.g.classes.margin_near("10px"),";color:#FFF;.label{font-weight:600;}}",""),b=function(e){var t,n=e.icon,r=e.color,o=e.label,i=e.number;return(0,l.BX)("div",{css:h,children:[(0,l.tZ)(a.kT,{icon:n,color:r}),(0,l.BX)("div",{className:"info",children:[(0,l.tZ)("div",{className:"label",children:null===(t=o.caps)||void 0===t?void 0:t.call(o)}),(0,l.tZ)("div",{children:i})]})]})}},7477:function(e,t,n){"use strict";n.d(t,{Q:function(){return b}});var r=n(70917),o=n(16920),i=n(87363),a=n(64902),l=n(71134),s=n(92945),c=n(80501),u=n(35944);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){return(0,r.iv)("position:relative;display:",e?"block":"inline-block",";input{border-width:0;background-color:transparent;}>input::-ms-clear{display:none;}>._list{background-color:",o.g.colors.bg_input,";color:",o.g.colors.text_sec,";border:1px solid #a9a9a9;position:fixed;z-index:",o.g.z.context_menu,";max-height:45vh;overflow-y:auto;border-radius:8px;}&.open_up>._list{top:auto;bottom:100%;}","")},b=function(e){var t=e.value,n=void 0===t?"":t,r=e.onSelect,o=e.onTextChange,a=e.getData,p=e.onKeyUp,f=e.onFocus,g=e.onBlur,b=e.block,y=e.showId,_=e.autofocus,w=e.textClear,O=void 0===w||w,k=e.readOnly,x=e.inputProps,S=m((0,i.useState)([]),2),j=S[0],C=S[1],P=m((0,i.useState)(null),2),Z=P[0],B=P[1],T=m((0,i.useState)(n),2),E=T[0],I=T[1],A=(0,i.useRef)(0),D=(0,i.useRef)(0),R=(0,i.useRef)(),N=(0,s.v)({onFocus:f,onBlur:g}),z=N.opened,M=N.toggleDD,F=N.selectRef,q=N.labelRef,X=N.ddRef,L=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];M(e,t),B(null)},U=function(e){clearTimeout(D.current),I(e||""),!1===e?(L(!1,!0),o&&setTimeout((function(){return o("")}),100)):D.current=setTimeout((function(){var t=function(e){C(e),L(e.length>0,!0)};R.current=t,a(e,(function(e){return t===R.current&&t(e)}))}),100)},V=function(){return U(!1)},H=function(e){e&&(B(null),I(e.label),L(!1),o&&o(e.label),r&&r(e,V))};return(0,u.BX)("div",{css:h(b),className:"auto_complete",ref:F,children:[(0,u.tZ)(c.o,d({type:"text",value:E,disabled:k,onKeyDown:function(e){["ArrowUp","ArrowDown"].includes(e.key)?(clearTimeout(A.current),A.current=setTimeout((function(){return A.current=null}),500),"ArrowUp"===e.key?B((function(e){return e?e-1:j.length-1})):B((function(e){return null===e?0:(e+1)%j.length}))):"Enter"===e.key?null!==Z&&H(j[Z]):"Escape"===e.key&&L(!1)},onKeyUp:function(e){return p&&p(e,V)},onChange:function(e){return o&&o(e),U(e)},onFocus:function(e){return U(e.target.value),f&&f()},onBlur:function(e){return clearTimeout(D.current),O&&setTimeout((function(){return U(!1)}),100),g&&g(e)},ref:function(e){q.current=e,_&&(0,l.Du)(e)}},x)),!k&&j.length>0&&z&&(0,u.tZ)("div",{className:"_list",ref:X,children:j.map((function(e,t){return(0,u.tZ)(v,d(d({},e),{},{onSelect:function(){return H(e)},active:Z===t,scrollOnArrows:0!==A.current,onMouseEnter:function(){return 0===A.current&&B(t)},showId:y}),e.id||t)}))})]})},y=(0,r.iv)(o.g.classes.font_reset,";color:",o.g.colors.text_main,";cursor:pointer;line-height:1.7em;padding:3px 1em 3px .4em;&.active{background-color:",o.g.colors.dominant_main_shade,";}>._avatar{vertical-align:middle;",o.g.classes.margin_far(".5em"),";}>.description{font-size:.85em;",o.g.classes.padding_near("1em"),";max-width:500px;color:",o.g.colors.text_sec,";}",""),v=function(e){var t=e.id,n=e.label,r=e.avatar,o=e.active,i=e.description,s=e.onSelect,c=e.onMouseEnter,p=e.scrollOnArrows,d=e.showId;return(0,u.BX)("div",{css:y,className:(0,l.AK)("auto_complete_item",{active:o}),onMouseDown:s,onMouseEnter:c,ref:function(e){return p&&o&&e&&(e.scrollIntoViewIfNeeded?e.scrollIntoViewIfNeeded():e.parentNode.scrollTop=e.offsetTop)},children:[r&&(0,u.tZ)(a.qE,{className:"_avatar",user:{user_avatar:r}}),t&&d?"[#"+t+"] ":"",n,i&&(0,u.tZ)("div",{className:"description auto_complete_item",children:i})]})}},39483:function(e,t,n){"use strict";n.d(t,{d:function(){return d},m:function(){return p}});var r=n(40441),o=n(71134),i=n(35944),a=["children","elType","value","keepAlign"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=function(e){var t=e.children,n=e.elType,l=e.value,c=e.keepAlign,p=u(e,a),f=s(s({},p),{},{ref:function(e){return e&&function(e){var t=l||"";if(!l){var n=document.createRange().createContextualFragment(e.innerHTML);if(n.childElementCount)for(var r=0;r<n.childElementCount;r++){var i=n.children[r];t+=(0,o.F5)(i,{filterClass:["mentions_box","mention"]})}else t=e.textContent}var a=t.replace(/^[\s\-*\d.:!#_~`'"￼]+/g,""),s=d(a),u=document.documentElement.classList.contains("RTL")?"right":"left";s?(e.style.direction="rtl",e.style.textAlign=c?u:"right"):(e.style.direction="ltr",e.style.textAlign=c?u:"left")}(e)},children:t});return"a"===n?(0,i.tZ)(r.A,s({},f)):"span"===n?(0,i.tZ)("span",s({},f)):(0,i.tZ)("div",s({},f))},d=function(e){return/[\u0591-\u07FF]/.test(null==e?void 0:e.charAt(0))}},64902:function(e,t,n){"use strict";n.d(t,{I9:function(){return w},cU:function(){return b},qE:function(){return h}});var r=n(16920),o=n(70917),i=n(73105),a=n(71134),l=(n(57882),n(85446)),s=n(35944);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=function(e){var t=e.size,n=void 0===t?"29px":t,r=e.radius,i=void 0===r?"50%":r,a=e.shadowed,l=void 0!==a&&a;return(0,o.iv)("display:inline-block;min-width:",n,";height:",n,";line-height:",n,";font-size:calc(",n," / 2.5);text-align:center;border-radius:",i,";",l?"box-shadow: 0 2px 4px rgba(0,0,0,.4)":"",";vertical-align:bottom;&._clickable{cursor:pointer;}","")},g=function(e){var t=e.size,n=e.radius,r=e.shadowed;return(0,o.iv)(m({size:t,radius:n,shadowed:r}),";background:transparent no-repeat top center;background-size:cover;color:white;","")},h=function(e){var t,n,o=e.user,c=e.size,p=e.rounded,f=void 0===p||p,m=e.shadowed,g=e.onClick,h=e.className,y=e.balloon,v=void 0===y||y,_=o||Blsm.user,w=_.user_id||_.id,O=_.user_first_name,k=_.user_last_name,x=_.user_avatar||_.avatar;if(_.full_name&&!O){var S=d(_.full_name.split(" "),2);O=S[0],k=S[1]}x&&x.includes("avatar_")&&(x=void 0);var j={size:c,rounded:f,shadowed:m,className:(0,a.AK)("Avatar",h),onClick:g,img:x,bgColor:r.g.func.id2color(w),textFallBack:((null===(t=O)||void 0===t?void 0:t[0])||(null===(n=k)||void 0===n?void 0:n[0])||"").toUpperCase()};return v&&w?(0,s.tZ)(i.y,{content:(0,s.tZ)(l.O,{userId:w}),children:(0,s.tZ)(b,u({},j))}):(0,s.tZ)(b,u({},j))},b=function(e){var t=e.size,n=e.rounded,r=void 0===n||n,o=e.shadowed,i=e.className,l=e.onClick,c=e.img,u=e.bgColor,p=e.textFallBack;return(0,s.tZ)("div",{css:g({size:t,radius:r?void 0:".6em",shadowed:o}),className:(0,a.AK)("_circle",i,{_clickable:l}),style:{backgroundColor:u,backgroundImage:c?"url('".concat(c,"')"):void 0},onClick:l,children:!c&&p})},y=function(e){var t=e.size;return(0,o.iv)(m({size:t}),";color:",r.g.colors.text_sec,";text-align:center;border:1px solid ",r.g.colors.separator,";font-size:1em;&.lowerFont{font-size:0.8em;}","")},v=function(e){var t=e.count,n=e.className,r=e.size,o=e.onClick,i=t>=100;return t>=1e3&&(t=Math.floor(t/1e3)+"K"),(0,s.BX)("div",{css:y({size:r}),className:(0,a.AK)("_circle_more",n,{_clickable:o,lowerFont:i}),onClick:o,children:["+",t]})},_=(0,o.iv)(">div{",r.g.classes.margin_far("8px"),";&:last-child{",r.g.classes.margin_far(0),";}}",""),w=function(e){var t=e.users,n=e.maxSlots,r=void 0===n?7:n,o=e.totalCount,i=e.onClick,a=e.className;void 0===o&&(o=t.length);var l=r<o?t.slice(0,r-1):t,c=o-l.length;return(0,s.BX)("div",{css:_,className:a,children:[l.map((function(e){return(0,s.tZ)(h,{user:e,onClick:i?function(){return i(e)}:void 0},e.user_id)})),c>0&&(0,s.tZ)(v,{count:c,onClick:i?function(){return i()}:void 0})]})}},57697:function(e,t,n){"use strict";n.d(t,{F$:function(){return m},Pp:function(){return d},Vy:function(){return h}});var r=n(70917),o=n(66975),i=n(73105),a=n(16920),l=(n(57882),n(22334)),s=n(35944),c=100,u=(0,r.iv)("font-size:.8em;font-weight:600;margin-top:0.8em;",a.g.classes.ellipsis_lines(2),";white-space:normal;",""),p=(0,r.iv)("width:",c,"px;text-align:center;.pentagon{position:relative;height:",105,"px;width:",c,"px;.rect{height:",65,"px;border-radius:10px;border:3px solid white;box-shadow:0 -2px 5px rgba(0, 0, 0, 0.1);}.triangle{position:absolute;height:",1.1*c,"px;top:",38,"px;left:",15,"px;overflow:hidden;transform:rotate(90deg);>div{transform:rotate(45deg);width:",76,"px;height:",76,"px;top:",20,"px;left:-",38,"px;position:relative;border-radius:10px;border:3px solid white;box-shadow:5px -5px 5px rgba(0, 0, 0, 0.1);}}.Icon{color:white;position:absolute;top:42%;left:50%;transform:translate(-50%, -50%);font-size:",33,"px;}}",""),d=function(e){var t=e.icon,n=e.color,r=e.label,a=e.description,c=void 0===a?"":a,d=e.date,f=[r,c,(0,l.GG)(d)].filter((function(e){return!!e})).join("\n\n");return(0,s.tZ)("div",{css:p,children:(0,s.BX)(i.u,{text:f,children:[(0,s.BX)("div",{className:"pentagon",children:[(0,s.tZ)("div",{className:"rect",style:{backgroundColor:n}}),(0,s.tZ)("div",{className:"triangle",children:(0,s.tZ)("div",{style:{backgroundColor:n}})}),(0,s.tZ)(o.JO,{icon:t,balloonAnchor:!1})]}),r&&(0,s.tZ)("div",{css:u,children:r})]})})},f=function(e){return(0,r.iv)("width:",e||c,"px;text-align:center;margin-top:15px;.rectangle{position:relative;height:",e||c,"px;border:3px solid white;box-shadow:0 5px 5px rgba(0, 0, 0, 0.1);border-radius:10px;display:flex;justify-content:center;align-items:center;width:",e||c,"px;.Ribbon{position:absolute;top:-",.17*(e||c),"px;left:-",.18*(e||c),"px;}>.initials{color:white;opacity:0.8;font-size:",.7*(e||c),"px;font-family:monospace;font-weight:600;}}","")},m=function(e){var t=e.color,n=e.size,r=e.ribbon,o=void 0!==r&&r,a=e.label,p=e.description,d=void 0===p?"":p,m=e.date,g=e.underLabel,b=void 0===g||g,y=[a,d,(0,l.GG)(m)].filter((function(e){return!!e})).join("\n\n"),v=(null==a?void 0:a.trim().split(" ")[0])||"";return(0,s.tZ)("div",{css:f(n),children:(0,s.BX)(i.u,{text:y,children:[(0,s.BX)("div",{className:"rectangle",style:{backgroundColor:t},children:[o&&(0,s.tZ)(h,{circleColor:t,size:(n||c)/2.5}),a&&(0,s.tZ)("span",{className:"initials",children:v[0].toUpperCase()})]}),a&&b&&(0,s.tZ)("div",{css:u,children:a})]})})},g=function(e){return(0,r.iv)(">div{position:relative;>.ribbon{position:absolute;top:",.88*e,"px;left:",.16*e,"px;width:",.66*e,"px;height:",.83*e,"px;}>.circle{position:relative;width:",e,"px;height:",e,"px;border-radius:50%;border:2px solid white;color:white;font-size:",.5*e,"px;display:flex;justify-content:center;padding-top:",.12*e,"px;.el_icon{top:-2px;position:relative;}}}","")},h=function(e){var t=e.size,n=void 0===t?36:t,r=e.circleColor,i=void 0===r?a.g.colors.set[5]:r,l=e.stripColor,c=void 0===l?a.g.colors.set[0]:l;return(0,s.tZ)("div",{className:"Ribbon",css:g(n),children:(0,s.BX)("div",{children:[(0,s.tZ)("svg",{className:"ribbon",viewBox:"0 0 24 30",preserveAspectRatio:"none",style:{transform:"translateZ(0)"},children:(0,s.tZ)("path",{fill:c,stroke:"white",strokeWidth:"2",d:"M 0 0 L 0 30 L 12 15 L 24 30 V 0 H 0 Z"})}),(0,s.tZ)("div",{className:"circle",style:{backgroundColor:i},children:(0,s.tZ)(o.JO,{icon:"bookmark_filled",balloonAnchor:!1})})]})})}},73105:function(e,t,n){"use strict";n.d(t,{y:function(){return S},u:function(){return B}});var r=n(87363),o=n(70917),i=n(16920),a=(n(57882),n(39483)),l=n(70081),s=n(71134),c=n(66975),u=n(86344),p=n(61533),d=n.n(p),f=function(e){var t=e.children,n=e.parentEl,o=(0,r.useRef)();return o.current||(o.current=(0,s.wq)((0,s.o0)("BP"))),(0,r.useEffect)((function(){return function(){return document.body.removeChild(o.current)}}),[]),o.current.classList.add("BodyPortal"),o.current.__parentEl=n,d().createPortal(t,o.current)},m=n(41042),g=n(35944),h=["children","content","className","keepOpen","dropDownLike","theme","behavior","onOpen","onClose","btnRadius","closeOnClick","trigger","mobileLayoutSupport","noPortal","balloonModes"],b=["children","text","html","btnRadius","minLength","className","theme"];function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var x=(0,o.iv)("display:inline-block;>._btn{display:inline-block;._ddTriangle{font-size:.9em;color:",i.g.colors.text_sec,";}}",""),S=function(e){var t=e.children,n=e.content,o=e.className,i=e.keepOpen,a=e.dropDownLike,u=e.theme,p=e.behavior,d=void 0===p?"menu":p,f=e.onOpen,b=e.onClose,y=e.btnRadius,_=e.closeOnClick,O=e.trigger,S=e.mobileLayoutSupport,j=e.noPortal,C=e.balloonModes,P=k(e,h),B=w((0,r.useState)(!1),2),T=B[0],E=B[1],I=(0,r.useRef)(null),A=(0,r.useRef)(null),D=(0,l.iP)(),R=D.width<=600&&S,N=(0,s.Fq)();(0,r.useEffect)((function(){return function(){return clearTimeout(L.current)}}),[]),(0,r.useEffect)((function(){"trigger"===d&&(O&&!T?z():T&&M())}),[O]);var z=function(){D.width<=600&&"tooltip"===d||(E(!0),f&&f())},M=function(e){var t;"click"===d&&(null!=e&&e.target&&A.current.contains(e.target)||null!=e&&e.target.classList.contains("auto_complete_item"))||D.width<=600&&"tooltip"===d||(E(!1),null==b||b(),null==e||null===(t=e.stopPropagation)||void 0===t||t.call(e))},F=w((0,m.$)({show:i||T,type:"blow_y",speed:".1s"}),2),q=F[0],X=F[1],L=(0,r.useRef)(0),U={};return"click"===d?U.onClick=function(){T?T&&M():z()}:U={onMouseEnter:function(){R||N||(clearTimeout(L.current),!q&&(L.current=setTimeout((function(){return z()}),200)))},onMouseLeave:function(){clearTimeout(L.current),T&&(L.current=setTimeout((function(){return M()}),"tooltip"===d?0:200))},onClick:function(){(R||N)&&z()}},(0,g.BX)("div",v(v(v({className:o,css:x},"menu"===d?U:{}),P),{},{ref:A,children:[(0,g.tZ)("div",v(v({className:"_btn",ref:I},["tooltip","click"].includes(d)?U:{}),{},{style:y?{borderRadius:y}:void 0,children:(0,g.BX)("span",{children:[t,a&&(0,g.BX)(g.HY,{children:[" ",(0,g.tZ)("span",{className:"_ddTriangle",children:(0,g.tZ)(c.JO,{icon:"triangle_down"})})]})]})})),q&&(0,g.tZ)(Z,{mobileLayout:R,behavior:d,onClickClose:_?M:void 0,balloonClose:M,dropDownLike:a,content:n,theme:u,noPortal:j,aniProps:X,balloonModes:C,btnRef:I})]}))},j={name:"ol51ym",styles:"&.left{margin-right:-6px;>.triangle{right:4px;}}&.right{margin-left:-6px;>.triangle{left:4px;}}"},C=function(e){var t=e.theme,n=e.triangle,r=i.g.darkMode?{bgColor:i.g.colors.bg_cont,txtColor:i.g.colors.text_main,padding:t?"padding: 5px 10px;":""}:"bln-tooltip-dark"===t?{bgColor:"#545454",txtColor:"#FFFFFF",padding:"padding: 5px 10px;"}:"bln-tooltip-bright"===t?{bgColor:"#FFFFFF",txtColor:i.g.colors.text_sec,padding:"padding: 5px 10px;"}:{bgColor:"#FFFFFF",txtColor:""},a=r.bgColor,l=r.txtColor,s=r.padding,c=void 0===s?"":s,p=["bln-tooltip-dark","bln-tooltip-bright"].includes(t)?"img { max-width: 330px; }":"",d=(0,u.mR)(i.g.colors.separator,.4);return(0,o.iv)("white-space:normal;",i.g.classes.font_reset,";z-index:",i.g.z.context_menu,";position:fixed;box-shadow:0 0 3px ",i.g.colors.separator,";background-color:",a,";border-radius:5px;color:",l,";",c,";",p,";","bln-tooltip-dark"===t?"user-select: none; max-width: 550px; word-break: break-word;":"",";img{width:100%;height:auto;}>.content{overflow-y:auto;}&.above{margin-bottom:10px;>.triangle{bottom:-16px;border-color:",d," transparent transparent;&:after{border-color:",a," transparent transparent;top:-11.5px;}}}&.below{margin-top:6px;>.triangle{top:-16px;border-color:transparent transparent ",d,";&:after{border-color:transparent transparent ",a,";top:-8.5px;}}}",n&&j,'>.triangle{pointer-events:none;position:absolute;border-width:8px;border-style:solid;z-index:-1;&:after{position:absolute;content:" ";border-width:10px;border-style:solid;left:-10px;}}@keyframes kfPop{from{bottom:-100vh;}to{bottom:0;}}&.mobileLayout{bottom:0;left:0;right:0;margin:0;border-radius:5px 5px 0 0;min-height:90px;max-height:50%;animation:kfPop .3s ease-in-out;overflow-y:auto;box-shadow:0px -4px 5px -3px ',i.g.colors.half_black,";.full-screen-top{display:flex;justify-content:flex-end;padding:5px;position:sticky;top:0;.Icon{position:absolute;margin-right:10px;font-size:1.2em;}}}","")},P=(0,o.iv)("background-color:rgba(0, 0, 0, 0);transition:background-color .2s;position:fixed;width:100vw;height:100vh;top:0;left:0;&.active{background-color:",i.g.colors.half_black,";}","");function Z(e){var t=e.behavior,n=e.onClickClose,o=e.content,i=e.dropDownLike,a=e.mobileLayout,u=e.balloonClose,p=e.theme,d=e.btnRef,m=e.noPortal,h=e.aniProps,b=e.balloonModes,y=void 0===b?{}:b,_=(0,r.useRef)(null),w=(0,r.useRef)(null);(0,l.t$)(w,["trigger","click"].includes(t)?u:void 0);var O=!(i||y.noTriangle||!o),k=(0,g.BX)(g.HY,{children:[a&&(0,g.tZ)("div",{css:P,ref:function(e){return setTimeout((function(){return null==e?void 0:e.classList.add("active")}),1)}}),(0,g.BX)("div",v(v({css:C({theme:p,triangle:O}),className:(0,s.AK)({mobileLayout:a}),ref:function(e){w.current=e,e&&!a&&function(e,t,n,r){var o=t.style;r.ignoreAnchor||(e=e.getElementsByClassName("balloon-anchor")[0]||e);var i=e.getBoundingClientRect(),a=document.documentElement.clientWidth,l=document.documentElement.clientHeight,s=r.align||(i.right<=a/2?"right":"left"),c=r.vertical||(i.bottom<=l/2?"below":"above");o.left=o.right="auto","right"===s?o.left=i.left+"px":o.right=a-i.right+"px";o.top=o.bottom="auto","below"===c?(o.top=i.bottom+"px",n.style.maxHeight=l-i.bottom-50+"px"):(o.bottom=l-i.top+"px",n.style.maxHeight=i.top-50+"px");$(t).removeClass(["right","left","below","above"]).addClass(s).toggleClass(c)}(d.current,w.current,_.current,y)}},h),{},{onClick:n,children:[a?(0,g.tZ)("div",{className:"full-screen-top",children:(0,g.tZ)(c.JO,{icon:"close",onClick:u,buttonLike:!0})}):O&&(0,g.tZ)("div",{className:"triangle"}),(0,g.tZ)("div",{className:"content",ref:_,children:o})]}))]});return m?k:(0,g.tZ)(f,{parentEl:d.current,children:k})}var B=function(e){var t=(0,s.Kn)(e.text)?Object.assign({},e,e.text):e,n=t.children,r=t.text,o=t.html,i=t.btnRadius,l=t.minLength,c=t.className,u=t.theme,p=k(t,b);return o||r&&!(l&&r.length<l)?(0,g.tZ)(S,v(v({content:o?"string"==typeof o?(0,g.tZ)(a.m,{dangerouslySetInnerHTML:{__html:o}}):(0,g.tZ)(a.m,{children:o}):(0,g.tZ)(a.m,{children:(0,g.tZ)("div",{children:(0,s.rj)(r.caps())})}),theme:u||"bln-tooltip-dark",behavior:o?"menu":"tooltip",className:c,btnRadius:i},p),{},{children:n})):n||null}},8411:function(e,t,n){"use strict";n.d(t,{$Q:function(){return E},CX:function(){return Z},dI:function(){return B}});var r=n(66975),o=n(70917),i=n(16920),a=n(31092),l=n(47095),s=n(87363),c=n(55832),u=n(71134),p=(n(57882),n(33051)),d=n(85311),f=n(65405),m=n(73105),g=n(70081),h=n(7392),b=n(35944);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=(0,o.iv)("display:flex;.Icon._disabled{color:",i.g.colors.disabled_text,";}.Button{",i.g.classes.margin_near("6px"),";}",""),j=function(e){var t=e.actions,n=e.buttonLike;return t.length?(0,b.tZ)("div",{css:S,className:"bar-actions",children:t.map((function(e,t){var o={onClick:(0,u.Wl)(e.action)?e.action:void 0,href:(0,u.Wl)(e.action)?void 0:e.action,className:(0,u.AK)({_disabled:!e.action&&!e.menu},e.className),toolTip:e.toolTip,color:e.color},i=e.icon?(0,b.tZ)(r.JO,k({icon:e.icon,buttonLike:n},o),t):(0,b.tZ)(h.l,k(k({theme:"outlined"},o),{},{children:e.label}),t);return e.menu?(0,b.tZ)(p.x,{options:e.menu,onSelect:e.onSelect,n:!0,children:i},t):i}))}):null},C=(0,o.iv)("color:",i.g.colors.text_sec,";>div{display:inline-block;border:1px solid ",i.g.colors.separator_light,";border-radius:7px;padding:0.3em;cursor:pointer;.Icon{vertical-align:bottom;}}>*+*{",i.g.classes.margin_near(".5em"),";}",""),P=function(e){var t=e.icons,n=e.value,o=void 0===n?[]:n,i=e.onChange;return(0,b.tZ)("div",{css:C,children:t.map((function(e){var t=o.includes(e.val);return(0,b.BX)("div",{onClick:function(){return i(t?o.filter((function(t){return t!==e.val})):[].concat(v(o),[e.val]))},children:[(0,b.tZ)(r.JO,{icon:e.icon,color:t?e.color:void 0})," "+e.label.caps()]},e.val)}))})},Z=function(e){var t=e.filters,n=e.sorts,r=e.filtersVals,o=void 0===r?{}:r,i=e.sort,p=void 0===i?{}:i,d=e.onFilter,f=e.onSort,m=e.compactView,h=void 0!==m&&m,v=e.onViewSelect,_=e.title,w=e.spreadFilters,O=e.actions,S=e.extraComponent,j=e.delay,C=void 0===j?200:j,Z=e.checkAll,B=e.alwaysShow,T=e.collection,I=e.sticky,A=e.zIndex,D=e.displayCount,R=e.minHeight,N=void 0===R?"":R,z=y((0,s.useState)(o),2),M=z[0],F=z[1],q=(0,s.useRef)();(0,g.iP)(),w=!(0,u.tq)()&&w,q.current||M===o||F(o),(0,s.useEffect)((function(){return function(){return clearTimeout(q.current)}}),[]);var X=function(e){F(e),q.current=clearTimeout(q.current),d&&(q.current=setTimeout((function(){return q.current=null,d(e)}),C))},L=void 0,U=void 0,V=(t||[]).filter((function(e){return!!e&&("tab"===e.type?(L=e,!1):"button_toggle"!==e.type||(U=e,!1))})),H={};return((null==T?void 0:T.length)>1||(null==t?void 0:t.length)>0||(null==n?void 0:n.length)>0||B)&&(H={actions:O,extraComponent:S,onViewSelect:v,compactView:h,checkAll:Z,tabs:L&&(0,b.tZ)(a.m,{tabs:L.options,inContainerHead:!0,activeTab:M[L.name]&&M[L.name][0]||"",onSelect:function(e){return X((0,u.v7)(Object.assign({},M,x({},L.name,e?[e]:""))))}}),togglers:U&&(0,b.tZ)(P,{icons:U.options,value:M[U.name],onChange:function(e){return X((0,u.v7)(Object.assign({},M,x({},U.name,e))))}}),sorts:(null==n?void 0:n.length)>0&&(0,b.tZ)(l.P,{sorts:n,by:p.by,desc:p.desc,className:"_sort",onSort:function(e){return f&&f(e)}}),filters:V.length>0&&(0,b.tZ)(c.wn,{spreadFilters:w,filters:V,filtersVals:M,className:"_filter",onFilter:function(e){return X(e)}})}),!(0,u.xb)(H)&&(0,b.tZ)(E,k(k({},H),{},{title:_,sticky:I,spreadFilters:w,zIndex:A,displayCount:D,minHeight:N}))},B=(0,s.createContext)(null),T=function(e,t,n,r){return(0,o.iv)("display:",r?"block":"flex",";align-items:",r?"flex-start":"flex-end",";color:",i.g.colors.text_main,";",t||e?"z-index: ".concat(t||i.g.z.widget_bar+1):"",";",n?"min-height: ".concat(n,";"):""," ",i.g.mQuery.notMobile,"{",e&&(0,o.iv)("&.sticky{position:sticky;top:",e,"px;background:",i.g.colors.bg_main,";padding:5px;}",""),";}.extra-component{",i.g.classes.margin_far("10px"),";}&.light{color:white;}._title{font-size:1.4em;font-weight:700;}._sort{",i.g.classes.margin_near("20px"),";}._filter{",i.g.classes.margin_near(r?"0":"20px"),";display:inline-flex;}._view_button{",i.g.classes.margin_near("20px"),";cursor:pointer;}.bar-other-side{display:flex;align-items:center;}&.with-tabs{.bar-other-side{padding-bottom:7px;}}&.bright{._label{color:#d4d4d4;}._btn span{color:#FFF;}}","")},E=function(e){var t=e.title,n=e.tabs,o=e.togglers,i=e.actions,a=e.spreadFilters,l=e.extraComponent,c=e.sorts,p=e.filters,g=e.onViewSelect,h=e.compactView,y=void 0!==h&&h,v=e.checkAll,_=void 0===v?null:v,w=e.sticky,O=e.zIndex,k=e.displayCount,x=void 0===k?[]:k,S=e.minHeight,C=void 0===S?"":S,P=(0,s.useContext)(B),Z=a?[p,l&&(0,b.tZ)("div",{className:"extra-component",children:l}),c]:[l&&(0,b.tZ)("div",{className:"extra-component",children:l}),c,p],E=(0,b.BX)("div",{className:"bar-other-side",children:[(null==x?void 0:x.display)&&(0,b.tZ)("div",{style:{margin:"0 20px"},children:"".concat(lng("items").caps(),": ").concat(x.count)}),o,Z.map((function(e,t){return(0,b.tZ)(s.Fragment,{children:e},t)})),g&&(0,b.tZ)("div",{children:(0,b.tZ)(r.JO,{icon:"view_"+(y?"list":"tiles"),className:"_view_button",onClick:function(){return g(!y)},toolTip:lng("toggle view")})}),_&&(0,b.tZ)(m.u,{text:lng("check all"),children:(0,b.tZ)(f.X,{value:_.checked,onChange:_.onCheck})})]});return n?(0,b.BX)("div",{css:T(w,O,C,a),className:(0,u.AK)("Bar","with-tabs",P,{sticky:w}),children:[n,(0,b.tZ)(d.zh,{}),i&&(0,b.tZ)(j,{actions:i.filter((function(e){return e})),buttonLike:!0}),E]}):(0,b.BX)("div",{css:T(w,O,C,a),className:(0,u.AK)("Bar",P,{sticky:w}),children:[t&&(0,b.tZ)("div",{className:"_title",children:t}),i&&(0,b.tZ)(j,{actions:i.filter((function(e){return e})),buttonLike:!0}),(0,b.tZ)(d.zh,{}),E]})}},15940:function(e,t,n){"use strict";n.d(t,{AE:function(){return y},jR:function(){return b},zx:function(){return v},zy:function(){return h}});var r=n(70917),o=n(16920),i=n(71134),a=n(40441),l=n(22698),s=n(35944),c=["children","theme","bold","chunky","className","disabled","onClick","active","formButton","allowMultipleClicks"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=(0,r.iv)("display:inline-block;transition:background-color .3s ease-out;user-select:none;padding:calc(.4em - 1px) 1em;border-radius:6px;min-width:55px;text-align:center;white-space:nowrap;@media (max-width: 600px){white-space:normal;}&._bold{font-weight:600;}&._disabled{background-color:",o.g.colors.disabled_background,";cursor:no-drop;border-color:",o.g.colors.disabled_background,";}&._clickable:not(._disabled){cursor:pointer;}&._chunky{margin-top:10px;padding-top:10px;padding-bottom:10px;}",""),g={name:"hkj8ri",styles:"background-color:#F6F6F6;color:#444;&._clickable:not(._disabled):hover{background-color:#f0f5ff;}"},h=(0,r.iv)("background-color:",o.g.colors.bg_cont,";color:#444;&._clickable:not(._disabled):hover{background-color:",o.g.colors.dominant_main_shade,";}",""),b=(0,r.iv)("background-color:",o.g.colors.positive,";color:white;&._clickable:not(._disabled):hover{background-image:linear-gradient(45deg, rgba(0, 0, 0, .2), rgba(0, 0, 0, .2));}",""),y=(0,r.iv)("background-color:",o.g.colors.negative,";color:white;&._clickable:not(._disabled):hover{background-image:linear-gradient(45deg, rgba(0, 0, 0, .2), rgba(0, 0, 0, .2));}",""),v=function(e){var t,n,r=e.children,o=e.theme,u=e.bold,d=e.chunky,h=e.className,b=e.disabled,y=e.onClick,v=e.active,_=e.formButton,w=e.allowMultipleClicks,O=f(e,c),k=p(p({},O),{},{css:[m,o||g],className:(0,i.AK)("Button",h,{_clickable:y||O.href,_bold:u,_disabled:b,_active:v,_chunky:d})});return y&&(k.onClick=function(e){b||t||y(e),w||(t=!0,clearTimeout(n),n=setTimeout((function(){return t=!1}),350))}),O.href?(0,s.tZ)(a.A,p(p({},k),{},{children:r})):_?(0,s.tZ)("button",p(p({},k),{},{disabled:b,children:r})):(0,s.tZ)(l.LZ,p(p({},k),{},{children:r}))}},65155:function(e,t,n){"use strict";n.d(t,{O:function(){return g}});var r=n(70917),o=n(16920),i=n(71134),a=n(7392),l=n(86344),s=n(35944),c=["children","label","primary","onClick","disabled","highlight"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=(0,r.iv)("border-radius:",o.g.consts.BUTTON_BORDER_RADIUS,"px;border-width:2px;padding-top:5px;padding-bottom:5px;white-space:normal;&.fb_shade:not(._disabled){background-color:",o.g.colors.dominant_main_shade,";&._clickable:hover{box-shadow:0 2px 4px ",(0,l.mR)(o.g.colors.dominant_main,.5),";}}&.primary{min-width:100px;}.Icon{",o.g.classes.float,";}",""),g=function(e){var t=e.children,n=e.label,r=e.primary,o=e.onClick,l=e.disabled,u=e.highlight,d=f(e,c);return(0,s.tZ)(a.l,p(p({},d),{},{theme:r?"contained":"outlined",css:m,bold:!0,active:u,disabled:l,onClick:o,className:(0,i.AK)({primary:r,fb_shade:!r},d.className),children:n||t}))}},79793:function(e,t,n){"use strict";n.d(t,{b:function(){return l}});var r=n(70917),o=n(16920),i=n(35944),a=(0,r.iv)("margin:0 5px;display:inline-block;vertical-align:bottom;.task-button{font-size:1.2em;padding:3px 5px 2px;margin:0 4px;display:inline-block;border:1px solid ",o.g.colors.separator,";border-radius:5px;cursor:pointer;&:hover{",o.g.classes.shadow_strong,";}&._filled{color:",o.g.colors.light_blue,";border:1px solid ",o.g.colors.light_blue,";}}",o.g.mQuery.mobileNarrow,"{display:inline-flex;margin-bottom:7px;}",""),l=function(e){var t=e.children;return(0,i.tZ)("div",{css:a,children:t})}},76364:function(e,t,n){"use strict";n.d(t,{$:function(){return d}});var r=n(87363),o=n(70081),i=n(16920),a=n(70917),l=n(42755),s=n(35944);function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,a.iv)("box-shadow:0 3px 6px rgba(0,0,0,0.16);padding:.7em;font-size:1.5rem;position:fixed;",i.g.classes.far("1em"),";bottom:1em;z-index:1;",""),d=function(){var e=c((0,r.useState)(!1),2),t=e[0],n=e[1],a=(0,r.useCallback)((function(){return n(window.pageYOffset>window.innerHeight)}),[]);(0,o.OR)("scroll",a);return t?(0,s.tZ)(l.ZT,{css:p,bgColor:i.g.theme.color_1,icon:"arrow_up",onClick:function(){window.scroll({top:0,left:0,behavior:"smooth"})}}):null}},7392:function(e,t,n){"use strict";n.d(t,{V:function(){return v},l:function(){return b}});var r=n(70917),o=n(16920),i=n(15940),a=n(86344),l=n(35944),s=["children","theme"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=o.g.colors.dominant_main,m=(0,r.iv)("background-color:transparent;color:",f,";&._clickable:not(._disabled):hover{background-color:",o.g.colors.dominant_main_shade,";}",""),g=(0,r.iv)("border:1px solid ",f,";color:",f,";&._clickable:not(._disabled):hover{background-color:",o.g.colors.dominant_main_shade,";}",""),h=(0,r.iv)("border:1px solid ",f,";background-color:",f,";color:white;&._active{border-color:",o.g.colors.dominant_orange,";&:not(._disabled){background-color:",o.g.colors.dominant_orange,";}}&._cancel{border-color:",o.g.colors.negative,";&:not(._disabled){background-color:",o.g.colors.negative,";}}&._clickable:not(._disabled):hover{box-shadow:0 2px 4px ",(0,a.mR)(f,.5),";background-color:",(0,a.HO)(f,-.1),";&._active{background-color:",o.g.colors.dominant_orange,";}}",""),b=function(e){var t=e.children,n=e.theme,r=d(e,s);return(0,l.tZ)(i.zx,u(u({theme:"contained"===n?h:"outlined"===n?g:m},r),{},{children:t}))},y=parseInt(window.innerWidth/46),v=function(e){return(0,l.tZ)(b,u(u({},e),{},{style:{fontSize:window.innerWidth>368?".8em":".".concat(y,"em"),margin:"0 5px"}}))}},42755:function(e,t,n){"use strict";n.d(t,{ZT:function(){return g},bV:function(){return h},kT:function(){return y}});var r=n(70917),o=n(16920),i=n(66975),a=n(33051),l=n(35944),s=["bgColor","color","size","iconSize"],c=["color","size"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m=function(e,t,n,i){return(0,r.iv)("transition:color .3s ease-out,background-color .3s ease-out;.el_icon,&.el_icon{background-color:",e||o.g.colors.dominant_main,";color:",t||"#fff",";width:",n,"px;min-width:",n,"px;height:",n,"px;border-radius:50%;display:inline-flex;align-items:center;justify-content:center;font-size:",i||n/2,"px;cursor:pointer;}","")},g=function(e){var t=e.bgColor,n=e.color,r=e.size,o=void 0===r?45:r,a=e.iconSize,c=void 0===a?null:a,u=f(e,s);return(0,l.tZ)(i.JO,p({css:m(t,n,o,c)},u))},h=function(e){var t=e.icons,n=void 0===t?[]:t,r=e.size;return(0,l.tZ)("div",{className:"RoundIconBatch",children:n.filter((function(e){return!!e})).map((function(e){var t=(0,l.tZ)(g,p(p({},e),{},{size:r,menu:void 0}),e.icon);return e.menu?(0,l.tZ)(a.x,{options:e.menu,children:t},e.icon):t}))})},b=function(e,t){return(0,r.iv)("background-color:#FFF;border-radius:50%;width:",t,"px;height:",t,"px;display:flex;justify-content:center;align-items:center;font-size:",t/2.5,"px;.ring{display:flex;justify-content:center;align-items:center;width:",t-4,"px;height:",t-4,"px;border-radius:50%;border:4px solid ",e,";>.Icon{line-height:0;}}","")},y=function(e){var t=e.color,n=e.size,r=void 0===n?45:n,o=f(e,c);return(0,l.tZ)("div",{css:b(t,r),children:(0,l.tZ)("div",{className:"ring",children:(0,l.tZ)(i.JO,p({color:t},o))})})}},75898:function(e,t,n){"use strict";n.d(t,{NI:function(){return D},dR:function(){return G},jC:function(){return A},kO:function(){return K},rp:function(){return J},xr:function(){return N}});var r=n(87363),o=n(70917),i=n(16920),a=n(70081),l=n(3755),s=n(33051),c=n(64902),u=n(95405),p=n(23838),d=n(66975),f=n(71134),m=n(39483),g=n(73105),h=n(40441),b=n(42755),y=n(25562),v=n(41226),_=n(40965),w=(n(22906),n(15560)),O=n(38152),k=n(21858),x=n(85311),S=(n(57882),n(25680)),j=n(80919),C=n(35944);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=function(e,t,n){return(0,o.iv)("display:inline-block;color:",n||"white",";",t?"":"box-shadow: 0 1px 3px ".concat(n||e),";background-color:",e,";white-space:nowrap;padding:0 6px;line-height:1.7;vertical-align:middle;border-radius:",i.g.consts.FIELD_BORDER_RADIUS,"px;height:fit-content;","")},A=function(e){var t=e.color,n=e.icon,r=e.children,o=e.title,a=e.text,l=e.className,s=e.noBoxShadow,c=e.accentColor,u=(0,C.BX)("div",{css:I(i.g.func.color(t),s,c),className:(0,f.AK)("_note",l),children:[n&&(0,C.BX)(C.HY,{children:[(0,C.tZ)(d.JO,{icon:n})," "]}),a," ",r]});return o?(0,C.tZ)(g.u,{text:o,children:u}):u},D=(0,o.iv)("display:inline-block;position:relative;width:",i.g.consts.CARD_WIDTH,"px;min-width:",i.g.consts.CARD_WIDTH,"px;height:",i.g.consts.CARD_HEIGHT,"px;color:",i.g.colors.text_sec,";._fore{position:absolute;width:93%;left:3.5%;top:133px;border-radius:18px;background-color:",i.g.colors.bg_cont,";padding:10px 15px 0;",i.g.classes.shadow_strong,";&.in_container{",i.g.classes.shadow_strong,";z-index:auto;}}",""),R=(0,o.iv)(D,";&:hover ._fore{transform:translateY(-10px);}._fore{z-index:1;display:flex;flex-direction:column;height:210px;min-height:210px;max-height:min(100vh, 280px);transition:transform .1s ease-out;&:hover{z-index:2;}&.opened{height:auto;._top{&:after{content:none;}}}}&.short{._fore{height:180px;min-height:180px;&.opened{height:auto;}}}&.smooth-theme{._fore{width:100%;left:0;top:158px;border-radius:0 0 18px 18px;height:185px;min-height:185px;&.opened{height:auto;}}}",i.g.mQuery.mobile,"{._back ._a_play{opacity:1;}}&:hover{._fore ._top ._title{text-decoration:underline;}._back ._a_play{opacity:1;}}.card-actions{display:flex;.Icon{font-size:1.6em;&:first-of-type{",i.g.classes.margin_far("4px"),";}}}.bottom-note{display:flex;margin:3px 0;align-items:center;}",""),N=function(e){return(0,C.tZ)(u.aK,{children:(0,C.tZ)(z,T({},e))})},z=(0,w.observer)((function(e){var t=e.playLink,n=e.assignee,o=e.className,i=e.inContainer,l=e.onMenuSelect,s=e.entity,c=e.noComments,u=e.onTitleClick,d=e.noAction,m=P((0,r.useState)(!1),2),g=m[0],h=m[1],b=(0,a.Xf)(500,(function(){return h(!0)}),(function(){return h(!1)})).events,y=(0,r.useContext)(p.l9);n&&(t.params=[],t.params.assignee=n);return(0,C.BX)("div",{css:R,className:o,children:[(0,C.tZ)(F,{entity:s,noAction:d,playLink:t}),(0,C.BX)("div",{className:(0,f.AK)("_fore",{in_container:i,opened:g}),onMouseLeave:b.onMouseLeave,children:[(0,C.tZ)(X,{entity:s,onMouseEnter:b.onMouseEnter,mouseOverFore:g,onMenuSelect:l,onTitleClick:u,playLink:t}),(0,C.tZ)(U,{entity:s,noComments:c,onCommentsClick:function(){s.workspace?s.workspace.setActiveComponent(s.assignment_id,"comments"):y.showSideDrawer(s,{tab:"comments"})},bookmarkClick:function(){var e;return null===(e=s.toggleBookmark)||void 0===e?void 0:e.call(s)},LikesClick:function(){var e;return null===(e=s.toggleLike)||void 0===e?void 0:e.call(s)}})]})]})})),M=(0,o.iv)("&._back{position:absolute;width:100%;height:240px;background-color:silver;background-size:cover;background-position:center;border-radius:20px 20px 0 0;",i.g.classes.shadow_light,";.mainNote{",i.g.classes.near("7%"),";top:4%;position:absolute;}.circledImage{position:absolute;top:10px;left:10px;border:3px solid white;}.match-rate{position:absolute;top:10px;right:10px;border-radius:20px;font-size:.9rem;padding:5px;background-color:",i.g.colors.warning,";color:white;}._manager{position:absolute;top:10px;",i.g.classes.far("20px"),";}.subNote{position:absolute;top:100px;",i.g.classes.far("10px"),";color:",i.g.colors.blue,";background-color:",i.g.colors.blue_shade,";display:inline-block;",i.g.classes.shadow_strong,";white-space:nowrap;padding:0 6px;line-height:1.7;vertical-align:middle;border-radius:",i.g.consts.SKINNY_BORDER_RADIUS,"px;}}",""),F=function(e){var t,n=e.entity,r=e.noAction,o=e.playLink,a=n.cardNote,l=n.image,s=n.circledImage,u=n.completed,p=n.status,f=n.notice,m=n.isManager,h=n.subNote,y=n.type,v=n.assignment_access_limit,_=n.running_times,w=n.matchRate,O=o?"workspace"===y||n instanceof j.O?"enter":"play":"lock";return(0,C.BX)("div",{css:M,className:"_back",style:{backgroundImage:'url("'.concat(l,'")')},children:[s&&(0,C.tZ)(c.cU,{img:s,size:"100px",className:"circledImage",shadowed:!0}),w>0&&(0,C.tZ)("div",{className:"match-rate",children:(0,C.BX)(g.u,{text:lng("skill match percent").caps(),children:[w,"%"]})}),u?(0,C.BX)(A,{title:n.gradeInfo?n.gradeInfo.label+": "+n.gradeInfo.displayGrade:"",color:i.g.colors.positive,className:"mainNote",children:[(0,C.tZ)(d.JO,{icon:"mark_v_light"})," ",null==p||null===(t=p.text)||void 0===t?void 0:t.caps()]}):v>0?(0,C.tZ)(A,{color:_>=v?i.g.colors.negative:i.g.colors.light_blue,className:"mainNote",children:"".concat(lng("accessed").caps()," ").concat(_||0,"/").concat(v)}):(null==a?void 0:a.text)&&(0,C.tZ)(A,T(T({},a),{},{className:"mainNote"})),!r&&(0,C.tZ)(H,{link:o,icon:O,iconTooltip:o?null:f}),m&&(0,C.tZ)(b.ZT,{className:"_manager",icon:"manager",toolTip:lng("you are a manager"),color:"#FFF",bgColor:i.g.colors.half_black,size:18,iconSize:11}),h&&(0,C.tZ)("span",{className:"subNote",children:h})]})},q=(0,o.iv)("&._top{overflow:hidden;position:relative;transition:max-height ",400,'ms ease-out;flex-grow:1;&:after{content:"";position:absolute;background-image:linear-gradient(to bottom, transparent, ',i.g.colors.bg_cont,");height:2em;bottom:0;left:0;right:0;}._title{display:block;margin-top:3px;max-height:4.1em;overflow:hidden;color:",i.g.colors.text_main,";font-size:1.28em;font-weight:700;cursor:pointer;}._subTitle{color:",i.g.colors.text_placeholder,";margin-bottom:5px;display:inline-block;}a._subTitle:hover{text-decoration:underline;}._tags{margin:7px 0;}._description{max-height:110px;>div{width:230px;}}._dependencies{margin-bottom:10px;span{display:inline-block;",i.g.classes.margin_far("7px"),";padding:0 3px;}.done{border-bottom:2px solid ",i.g.colors.positive,";}.not-done{border-bottom:2px solid ",i.g.colors.negative,";}}}",""),X=function(e){var t,n,r=e.entity,o=e.onMouseEnter,a=e.mouseOverFore,l=e.onMenuSelect,c=e.onTitleClick,u=e.playLink,p=r.title,h=r.subTitle,b=r.category,v=r.category_id,w=r.hide_type,j=r.description,P=r.subs,Z=r.statistics,B=r.activityDates,T=r.tags,E=w?null:r.type_title,I=null===(t=r.menu)||void 0===t?void 0:t.call(r),A=null===(n=r.dependencies)||void 0===n?void 0:n.call(r);return(0,C.BX)("div",{css:q,className:"_top",onMouseEnter:o,children:[(0,C.BX)(x.c_,{children:[(0,C.BX)("div",{children:[h&&(0,C.tZ)("span",{className:"_subTitle",children:h}),(0,C.tZ)(m.m,{elType:u&&!c?"a":"span",className:"_title",href:c?void 0:u,onClick:c,children:(0,C.tZ)(k.u,{text:p,floor:10,ceiling:45})})]}),(0,C.tZ)(x.zh,{}),I&&(0,C.tZ)("div",{children:(0,C.tZ)(s.x,{className:"_menu",options:I,onSelect:l,children:(0,C.tZ)(d.JO,{icon:"menu_h",smallButtonLike:!0})})})]}),(E||b)&&(0,C.BX)(m.m,{className:"_tags",children:[E&&(0,C.tZ)("span",{css:r._attr.group_type?i.g.classes.ws_type_style:i.g.classes.content_type_style,className:(0,f.AK)({_required_course:r.qualificationRequirement&&!r._attr.optional}),children:E.caps()}),E&&b&&(0,C.tZ)(d.An,{}),b&&(0,C.tZ)(O.W,{category:b,category_id:v})]}),!Z&&(null==A?void 0:A.length)>0&&(0,C.tZ)(g.u,{text:lng("prerequisites").caps(),className:"_dependencies",children:A.map((function(e){return(0,C.BX)("span",{className:e.satisfied?"done":"not-done",children:[(0,C.tZ)(d.An,{}),e.assignment_name||e.lesson_name]},e.assignment_id)}))}),!Z&&((null==j?void 0:j.text)||T)&&(0,C.BX)(m.m,{className:"_description",style:a?{overflow:"auto"}:{},children:[T&&(0,C.tZ)(S.r,{children:T.map((function(e){return(0,C.tZ)(S.V,{tag:e,smaller:!0},e)}))}),(null==j?void 0:j.text)&&(j.isHtml?(0,C.tZ)(_.x,{content:j.text}):(0,C.tZ)("div",{children:j.text}))]}),B&&(0,C.tZ)(y.L0,{start:B.start,end:B.end}),(null==P?void 0:P.length)>0&&(0,C.BX)("div",{children:[(0,C.tZ)("div",{style:{fontWeight:"600"},children:lng("sub assignments").caps()}),P.map((function(e){return(0,C.BX)("div",{children:[(0,C.tZ)(d.An,{}),e.assignment_name,(0,C.tZ)(d.An,{}),(0,C.tZ)("span",{css:i.g.classes.content_type_style,children:e.type_title})]},e.assignment_id)}))]})]})},L=(0,o.iv)("&._bottom{padding:7px 0;&._separator{border-top:1px solid ",i.g.colors.separator,";}._progress{margin-bottom:7px;}._meta{display:flex;justify-content:space-between;._comments{line-height:29px;cursor:pointer;.Icon-discussion{font-size:1.6em;vertical-align:sub;display:inline-block;",i.g.classes.margin_far(".5em"),";}span+span{text-decoration:underline;}}}.duration{font-size:1.1rem;vertical-align:sub;display:flex;align-items:center;.Icon{font-size:1.2rem;",i.g.classes.margin_far("4px"),";}}}",""),U=function(e){var t,n,r,o=e.entity,i=e.noComments,a=e.onCommentsClick,s=e.bookmarkClick,u=e.LikesClick,p=o.commentsInfo,m=o.users,h=o.countUsers,b=o.progress,_=o.registerNumbers,w=o.statistics,O=o.views,k=o.duration,x=o.bottomNote,S=!i,j=!w&&((0,f.DM)(o.bookmarked)||(0,f.DM)(o.mayLike)||O>0),P=S||(null==m?void 0:m.length)||j;return(0,C.BX)("div",{css:L,className:(0,f.AK)("_bottom",{_separator:!b&&P}),children:[b&&(0,C.tZ)(l.k,{numerator:b.progress[0],denominator:b.progress[1],valueInBar:null===(t=b.settings)||void 0===t?void 0:t.valueInBar,label:null===(n=b.settings)||void 0===n?void 0:n.label,color:null===(r=b.settings)||void 0===r?void 0:r.color,valueNote:o.attr("exemptions")?(0,C.BX)(g.u,{text:lng("number of exemptions"),children:["(",o.attr("exemptions"),")"]}):null,className:"_progress"}),(0,C.BX)("div",{className:"_meta",children:[!w&&S&&o.maySeeCommentsTab&&(0,C.tZ)("div",{className:"_comments",onClick:a,children:(0,C.BX)("span",{children:[(0,C.tZ)(d.JO,{icon:"discussion"}),(0,C.tZ)("span",{children:(null==p?void 0:p.count)>0?"".concat(null==p?void 0:p.count," ").concat(lng("comments")):lng("say something").caps()})]})}),(null==m?void 0:m.length)>0&&(0,C.tZ)(c.I9,{users:m,totalCount:h||(null==m?void 0:m.length),maxSlots:3}),_&&(0,C.tZ)(y.Td,T(T({},_),{},{inCard:!0})),w&&(0,C.tZ)(v.om,T({},w)),j&&(0,C.BX)("div",{className:"card-actions",children:[(null==o?void 0:o.maySeeViews)&&O>0&&(0,C.tZ)(K,{views:O}),(0,f.DM)(o.bookmarked)&&(null==o?void 0:o.mayToggleBookmark)&&(0,C.tZ)(J,{entity:o,onClick:s}),o.mayLike&&(0,C.tZ)(G,{entity:o,onClick:u}),o.togglePin&&(0,C.tZ)(W,{onClick:function(){return o.togglePin()},entity:o})]}),(0,C.BX)("div",{className:"bottom-note",children:[x&&(0,C.tZ)("div",{children:x.text})," ",x&&k&&(0,C.tZ)("span",{children:"|"})," ",k&&(0,C.BX)("div",{children:[(0,C.tZ)(d.JO,{icon:"sand_clock"})," ",k]})]})]})]})},V={name:"tzlwj9",styles:"._a_play{transition:opacity .1s ease-out;width:1em;cursor:pointer;position:absolute;top:44px;left:calc(50% - 20px);&:not(._a_lock){opacity:0;}&._a_lock{cursor:initial;}.RTL &{left:auto;right:calc(50% - 20px);}.dark{top:-3px;left:-2px;position:absolute;font-size:55px;color:rgba(120, 120, 120, .15);.RTL &{left:auto;right:-3px;}}.shadow{position:absolute;font-size:55px;color:rgba(0, 0, 0, .35);.RTL &{right:-3px;}}.light{position:absolute;font-size:50px;color:rgba(255, 255, 255, .95);}}"},H=function(e){var t=e.link,n=e.icon,r=e.iconTooltip;return(0,C.tZ)("div",{css:V,children:(0,C.BX)(h.A,{href:t,className:(0,f.AK)("_a_play",{_a_lock:!t}),processHrefClick:!0,children:[(0,C.tZ)(d.JO,{className:"dark",icon:n}),(0,C.tZ)(d.JO,{className:"shadow",icon:n}),(0,C.tZ)(d.JO,{className:"light",icon:n,toolTip:r})]})})},G=(0,w.observer)((function(e){var t=e.entity,n=e.onClick,r=t.likesCount,o=t.likesVote;return(0,C.tZ)(d.JO,{icon:o?"love_full":"love",toolTip:lng("loved it"),badge:r||void 0,onClick:n,color:o?i.g.colors.pink:void 0,smallButtonLike:!0})})),J=(0,w.observer)((function(e){var t=e.entity,n=e.onClick;return(0,C.tZ)(d.JO,{icon:t.bookmarked?"bookmark_filled":"bookmark",toolTip:lng("add to bookmarks"),onClick:n,color:t.bookmarked?i.g.colors.dominant_main:void 0,smallButtonLike:!0})})),W=(0,w.observer)((function(e){var t=e.entity,n=e.onClick;return(0,C.tZ)(d.JO,{icon:t.following?"pin_filled":"pin",toolTip:t.following?lng("unpin"):lng("pin"),onClick:n,color:t.following?i.g.colors.dominant_main:void 0,smallButtonLike:!0})})),K=function(e){var t=e.views;return(0,C.tZ)(d.JO,{icon:"preview",badge:t,color:i.g.colors.yellow,toolTip:lng("views"),smallButtonLike:!0})}},31991:function(e,t,n){"use strict";n.d(t,{T:function(){return h}});var r=n(70917),o=n(16920),i=n(87363),a=n(70081),l=n(45338),s=n(71134),c=n(42755),u=n(35944);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,r.iv)("position:relative;>._scroll{position:absolute;top:0;left:0;width:100%;overflow-x:hidden;pointer-events:none;>div>div._strip{pointer-events:initial;display:flex;>div{",o.g.classes.margin_near(o.g.consts.CARDS_SPACING+"px"),";&:first-of-type{",o.g.classes.margin_near("0"),";}}}}>.scroll_back,>.scroll_fore{position:absolute;top:80px;border:2px solid ",o.g.colors.dominant_main,";z-index:1;opacity:0.75;&:hover{opacity:0.9;}&.scroll_back{",o.g.near,":10px;}&.scroll_fore{",o.g.far,":20px;}}",""),m=(0,r.iv)("&.inOpenPage{",o.g.classes.content_width,";}&.floatingControls{position:relative;>div{position:absolute;bottom:1em;",o.g.classes.far(0),";}}&:not(.inOpenPage){text-align:",o.g.far,";margin-bottom:10px;}>div{direction:ltr;}._go_button{font-size:0.9em;",o.g.classes.margin_near("1em"),";}.pages{display:inline-flex;}",""),g={name:"g46w8s",styles:"margin-bottom:30px"},h=function(e){var t=e.children,n=e.cardHeight,r=void 0===n?345:n,d=e.expandHeight,h=void 0===d?450:d,b=e.extraComponent,y=e.inOpenPage,v=e.floatingControls,_=e.showListButton,w=p((0,i.useState)(!1),2),O=w[0],k=w[1],x=p((0,i.useState)(!1),2),S=x[0],j=x[1],C=p((0,i.useState)(1),2),P=C[0],Z=C[1],B=p((0,i.useState)(0),2),T=B[0],E=B[1];(0,a.iP)();var I=(0,i.useRef)(null),A=(0,i.useRef)(null),D=(0,i.useRef)(0),R=function(){var e=A.current,t=Math.round(Math.abs(e.scrollLeft)),n=z(),r=e.scrollWidth<=e.offsetWidth?1:Math.ceil(e.scrollWidth/n),o=Math.ceil(t/n);Z(r),E(o),k(o>0),j(o<r-1)},N=function(){if(y){var e=I.current.parentNode.offsetWidth;D.current=Math.max(0,Math.min(30,e-o.g.consts.CONTAINER_MIN_WIDTH),e-o.g.consts.PAGE_CONTENT_MAX_WIDTH)/2,A.current.style["padding".concat(o.g.near.caps())]=D.current+"px"}},z=function(){var e,t=A.current,n=(null===(e=t.querySelector("._strip > div"))||void 0===e?void 0:e.offsetWidth)+o.g.consts.CARDS_SPACING;return Math.max(1,Math.floor((t.offsetWidth-D.current)/n))*n},M=function(e){F(T+1*(e?-1:1))},F=function(e){if(!(e<0||e>=P)){var t=A.current,n=e*z()*(o.g.isRTL&&!(0,s.w1)()?-1:1);$(t).stop().animate({scrollLeft:n},500,"swing",(function(){N(),R()}))}};return(0,u.BX)("div",{ref:function(e){I.current=e,e&&(N(),R())},className:"CardsCarousel",css:g,children:[(b||_)&&(0,u.tZ)("div",{css:m,className:(0,s.AK)("_controls",{inOpenPage:y,floatingControls:v}),children:(0,u.tZ)("div",{children:b})}),(0,u.BX)("div",{css:f,style:{height:r+"px"},children:[O&&(0,u.tZ)(c.ZT,{icon:"arrow_near",bgColor:o.g.colors.bg_cont,color:o.g.colors.dominant_main,className:"scroll_back",onClick:function(){return M(!0)}}),S&&(0,u.tZ)(c.ZT,{icon:"arrow_far",bgColor:o.g.colors.bg_cont,color:o.g.colors.dominant_main,className:"scroll_fore",onClick:function(){return M()}}),(0,u.tZ)("div",{className:"_scroll",ref:A,style:{height:r+h+"px"},children:(0,u.tZ)(l.mp,{onSwipedLeft:function(){return M(o.g.isRTL)},onSwipedRight:function(){return M(!o.g.isRTL)},delta:20,children:(0,u.tZ)("div",{className:"_strip",children:t})})})]})]})}},38152:function(e,t,n){"use strict";n.d(t,{W:function(){return h}});var r=n(27821),o=n(98e3),i=n(73105),a=n(15560),l=n(71134),s=n(16920),c=n(66975),u=n(70917),p=n(35944);var d={name:"1xca2wz",styles:"font-size:1rem;display:flex;align-items:center;gap:10px"},f=(0,r.observable)(new Map),m=function(e,t){if(f.has(e))return f.get(e);t&&(f.set(e,!1),(0,o.SC)("domains/category_path/"+e,{},(function(t){Array.isArray(t)?f.set(e,(0,p.tZ)("div",{css:d,children:t.map((function(e,t){return(0,p.BX)(p.HY,{children:[t>0&&(0,p.tZ)("div",{children:(0,p.tZ)(c.JO,{icon:"arrow_far"})}),(0,p.tZ)("div",{children:e.caps()},e+t)]})}))})):"string"!=typeof t&&1!==t.length||f.set(e,t)})))},g=(0,u.iv)("font-weight:600;",s.g.classes.ellipsis,";max-width:280px;display:inline-block;",""),h=(0,a.observer)((function(e){var t=e.category,n=e.category_id;return(0,l.B5)(n)?(0,p.tZ)(i.y,{content:m(n)||lng("loading...").caps(),theme:"bln-tooltip-dark",children:(0,p.tZ)("span",{css:g,onMouseEnter:function(){return m(n,!0)},children:t})}):(0,p.tZ)("span",{style:{fontWeight:600},children:t})}))},48207:function(e,t,n){"use strict";n.d(t,{$0:function(){return T},T:function(){return R},U0:function(){return M},W2:function(){return P},a5:function(){return N},gx:function(){return E},uD:function(){return L}});var r=n(70917),o=n(16920),i=n(66975),a=n(71134),l=n(70081),s=n(539),c=n(95405),u=n(7392),p=n(42755),d=n(39483),f=n(41042),m=n(87363),g=n(24210),h=n(35944),b=["style"];function y(){return(y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,a.tq)()?8:20,j=(0,a.tq)()?16:20,C=(0,r.iv)("position:relative;background-color:",o.g.colors.bg_cont,";border-radius:",o.g.consts.CONT_BORDER_RADIUS,"px;&.cont-empty{background-color:",o.g.colors.bg_1,";margin-bottom:40px;}._children.padded{padding:",j,"px ",S,"px;}._tail{margin:0 20px 10px;}&.fitWidth{",o.g.classes.content_width,";}",""),P=function(e){var t=e.children,n=e.head,r=e.tail,o=e.fitWidth,i=e.className,l=e.stickyHead,s=e.noBottomPadding,u=e.padded,p=void 0===u||u;return(0,h.BX)("div",{css:C,className:(0,a.AK)(i,{fitWidth:o}),children:[n&&(0,h.tZ)(q,{stickyHead:l,noBottomPadding:s,children:n}),(0,h.tZ)("div",{className:(0,a.AK)("_children","container-children",{padded:p}),children:(0,h.tZ)(c.SV,{children:t})}),r&&(0,h.tZ)("div",{className:"_tail",children:r})]})},Z=(0,r.iv)("display:flex;align-items:center;color:",o.g.colors.text_main,";white-space:nowrap;>.Icon-close{",o.g.classes.opposite_text_align,";color:",o.g.colors.text_sec,";cursor:pointer;font-size:1.2em;&:hover{color:",o.g.colors.negative,";}}>._title{font-size:1.2rem;font-weight:600;white-space:nowrap;max-width:1050px;overflow:hidden;text-overflow:ellipsis;display:flex;align-items:center;",o.g.mQuery.max(1400),"{white-space:normal;}>.Icon{",o.g.classes.margin_far("10px"),";}}&.limitTitle{>._title{overflow:hidden;text-overflow:ellipsis;}}",""),B={name:"18stq5z",styles:"font-size:1.4rem"},T=function(e){var t=e.icon,n=e.title,r=e.headTabs,a=e.headExtra,l=e.headPrefix,s=e.onClose,c=e.poster,u=(null==t?void 0:t.icon)||t,f=null==t?void 0:t.color;return(0,h.BX)(h.HY,{children:[(0,h.BX)("div",{css:Z,className:"floating-dialog-header",children:[l,!n&&t&&(0,h.tZ)(i.JO,{icon:u,color:f,css:B}),n&&(0,h.BX)("div",{className:"_title",children:[u&&(0,h.tZ)(p.ZT,{icon:u}),(0,h.tZ)(d.m,{children:null==n?void 0:n.caps()})]}),r,(0,h.tZ)("div",{css:o.g.classes.flex_grow}),a&&(0,h.tZ)("div",{style:{padding:"0 20px"},children:a}),s&&(0,h.tZ)(i.JO,{icon:"close",onClick:function(){return s()},smallButtonLike:!0})]}),(null==c?void 0:c.image)&&(0,h.tZ)("div",{className:"poster",children:c.title&&(0,h.tZ)("div",{className:"poster-title",children:c.title})})]})},E=(0,r.iv)("position:fixed;z-index:",o.g.z.dialog_overlay,";top:0;left:0;width:100vw;height:100vh;background-color:rgba(0, 0, 0, .7);",""),I=(0,r.iv)(o.g.classes.font_reset,";white-space:normal;",E,";display:flex;flex-direction:column;justify-content:center;align-items:center;",o.g.mQuery.mobile,"{justify-content:flex-start;}>div{max-width:100%;>div._main{display:flex;flex-direction:column;&.fullHeight{height:95vh;>._children{flex-grow:1;}}>._children{max-height:calc(100vh - 150px);overflow-y:auto;",o.g.mQuery.notMobile,"{box-sizing:content-box;padding-bottom:20px;}",o.g.mQuery.mobile,"{max-height:calc(100vh - 170px);padding-bottom:50px;}.container_splitter>*{max-height:calc(100vh - 150px);overflow-y:auto;}}}}._tailButtons{display:flex;justify-content:flex-end;}",o.g.mQuery.max(700),"{>div>div._main{border-radius:0;>._children{margin:",j/2,"px 0;}}}",""),A=function(e){return(0,r.iv)(">div>._main{max-height:90vh;}.container-header{display:contents;.poster{background-image:url('",o.g.func.imgUrl(e),"');background-repeat:no-repeat;background-size:cover;background-position:top;min-height:250px;.poster-title{width:100%;background-color:rgba(240, 240, 240, 0.85);font-size:1.4rem;padding:20px;font-weight:600;margin-top:15px;}}}>div .floating-dialog-header{padding:10px 15px;}","")},D="700px",R=function(e){var t=e.children,n=e.title,r=e.onClose,o=e.hideX,i=e.icon,s=e.className,c=e.width,p=void 0===c?D:c,d=e.fullHeight,y=e.headTabs,v=e.headExtra,w=e.headPrefix,x=e.tailButtons,S=e.padded,j=e.poster,C=e.zIndex;(0,l.Ry)();var Z=k((0,m.useState)(!0),2),B=Z[0],E=Z[1],R=o?null:function(){return E(!1)},N=k((0,f.$)({show:B,type:"blow",onHide:r}),2),z=N[0],M=N[1],F=M.style,q=O(M,b),X=(0,m.useContext)(g.q3);if(X&&(X.backFromDirty=function(){return E(!0)}),!z)return null;var L=(0,h.tZ)(T,{poster:j,title:n,icon:i,headTabs:y,headPrefix:w,headExtra:v,onClose:R}),U=x&&(0,h.tZ)("div",{className:"_tailButtons",children:x.map((function(e,t){return(0,h.tZ)(u.l,_(_({},e),{},{action:void 0,onClick:e.action,bold:!0,theme:t===x.length-1?"contained":void 0,children:e.label.caps()}),t)}))}),V=null==x?void 0:x.some((function(e){return e.keyboard})),H=_({width:p},F);return"fit-content"===p&&(H.minWidth=D),(0,h.tZ)("div",{css:[I,j&&A(j.image),"",""],style:{zIndex:C},className:s,onMouseDown:R?function(e){return e.currentTarget==e.target&&(0,a.Ds)(R,1)()}:void 0,children:(0,h.tZ)("div",_(_({},q),{},{style:H,onKeyUp:function(e){return null==x?void 0:x.filter((function(t){return t.action&&t.keyboard===e.key})).map((function(e){return e.action()}))},tabIndex:V?"0":void 0,className:V?"no_outline":void 0,ref:V?a.Du:void 0,children:(0,h.tZ)(P,{head:L,tail:U,className:(0,a.AK)("_main",{fullHeight:d}),padded:S,children:t})}))})},N=function(e){var t=y({},e);return(0,h.tZ)(R,_(_({},t),{},{children:(0,h.tZ)(s.$,{})}))},z=(0,r.iv)("display:flex;>div{padding:",j,"px ",S,"px;flex:1 1 ",(0,a.w1)()?"auto":0,";border-",o.g.near,":1px solid ",o.g.colors.separator,";&:first-of-type{border-",o.g.near,":0;}}",o.g.mQuery.max(640),"{display:block;>div{border-",o.g.near,":0;border-top:1px solid ",o.g.colors.separator,";&:first-of-type{border-top:0;}}}",""),M=function(e){var t=e.children;return(0,h.tZ)("div",{css:z,className:"container_splitter",children:t})},F=(0,r.iv)("border-bottom:1px solid ",o.g.colors.separator,";padding:15px ",S,"px 10px;min-height:49px;&.stickyHead{position:sticky;top:0;background-color:",o.g.colors.bg_main,";z-index:1;th{border-radius:0;}}&.noBottomPadding{padding-bottom:0;}",""),q=function(e){var t=e.children,n=e.stickyHead,r=e.noBottomPadding;return(0,h.tZ)("div",{css:F,className:(0,a.AK)("container-header",{stickyHead:n,noBottomPadding:r}),children:t})},X={name:"pireoz",styles:"font-size:1.3rem;font-weight:700;margin-bottom:15px;&:not(:first-of-type){margin-top:45px;}"},L=function(e){var t=e.children;return(0,h.tZ)("div",{css:X,children:(0,h.tZ)(c.SV,{children:t})})}},33051:function(e,t,n){"use strict";n.d(t,{h:function(){return O},x:function(){return w}});var r=n(87363),o=n(70917),i=n(16920),a=n(73105),l=n(43698),s=n(66975),c=n(71134),u=n(40441),p=n(35944);function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,o.iv)("text-align:",i.g.near,";>td>*{display:block;padding:9px 20px;color:",i.g.darkMode?i.g.colors.text_sec:"#444",";}td._has_label .Icon{",i.g.classes.margin_far(".5em"),";min-width:18px;}&.active>td>*,>td._clickable:hover>*{cursor:pointer;background-color:",i.g.colors.dominant_main_shade,";color:",i.g.colors.dominant_main,";border-radius:5px;}input:not([type=checkbox]),select,.InputDropDown,textarea{width:150px;}.blsm-input:not(.blsm-input-wrapped){border:1px solid #DCDCDC;border-radius:4px;&:hover{border:1px solid #9E9E9E;}&:focus-within{border:1px solid ",i.g.colors.dominant_main,";}}>td._cb>*{padding:0 20px;.blsm-input{border:none;}}",i.g.mQuery.mobile,"{border-top:1px solid ",i.g.colors.dominant_main_shade,";}",""),y=(0,o.iv)("td{padding:3px 10px;display:flex;font-size:.8em;vertical-align:baseline;>._separator{flex-grow:1;border-top:1px solid ",i.g.colors.separator,";&:not(:only-child){margin-top:0.8em;}}}",""),v=function(e){var t=e.data,n=e.onSelect,r=e.inputChange,o=e.onFocusChanged,i=t.input,a=t.label,d=t.icon,f=t.color,m=t.href,v=t.newTab,_=t.onClick,w=t.active,O=t.className,k=t.style,x=t.separator,S=t.attr,j=t.inputOnly,C="string"==typeof a?a.caps():a;if(x)return(0,p.tZ)("tr",{css:y,children:(0,p.BX)("td",{colSpan:2,children:[C&&(0,p.BX)("div",{children:[C," "]}),(0,p.tZ)("div",{className:"_separator"})]})});var P=_||n;return(0,p.BX)("tr",{css:b,className:(0,c.AK)(O,{active:w}),style:k,children:[!j&&(0,p.tZ)("td",{className:(0,c.AK)({_clickable:m||P,_has_label:C}),children:(0,p.BX)(u.A,g(g({onClick:P,href:m,newTab:v,style:f?{color:f}:void 0},S),{},{children:[d&&(0,p.tZ)(s.JO,{icon:d}),C&&(0,p.BX)("span",{children:[C,i?":":""]})]}))}),i&&(0,p.tZ)("td",{className:(0,c.AK)({_cb:"checkbox"===i.type}),children:(0,p.tZ)("div",{children:(0,p.tZ)(l.I,g(g({},i),{},{onChange:r?function(e){return r(h({},i.name,(0,c.Dw)(e)?e:void 0))}:function(){return null},onFocus:function(){return o(!0)},onBlur:function(){return o(!1)}}))})})]})},_=(0,o.iv)("&.scrollable{overflow-y:auto;max-height:50vh;}.context-menu-title{padding:4px 10px;font-size:1.1em;font-weight:600;color:",i.g.colors.text_sec,";}&.width100 ._btn{&,&>span>div{width:100%;}}table{width:100%;}",""),w=function(e){var t,n=e.children,o=e.className,i=e.options,l=void 0===i?[]:i,s=e.onSelect,u=e.inputChange,f=e.inForm,m=e.scrollable,g=e.onClear,h=e.dropDownLike,b=e.title,y=e.onClose,v=e.noPortal,w=d((0,r.useState)(!1),2),k=w[0],x=w[1],S=null==l||null===(t=l.filter)||void 0===t?void 0:t.call(l,(function(e){return e}));if(0===(null==S?void 0:S.length))return null;var j=(0,p.tZ)(O,{items:S,title:b,inputChange:u,focused:k,setFocused:x,onSelect:s,onClear:g,scrollable:m,inForm:f});return(0,p.tZ)(a.y,{className:(0,c.AK)("ContextMenu",o),css:_,keepOpen:k,content:j,onClose:y,closeOnClick:void 0===u,dropDownLike:h,noPortal:v,mobileLayoutSupport:!0,children:n})},O=function(e){var t=e.items,n=e.title,r=e.inputChange,o=e.focused,i=e.setFocused,a=e.onSelect,l=e.onClear,u=e.scrollable,d=e.inForm;null!=t&&t.some((function(e){return e.icon&&e.label}))&&t.forEach((function(e){return e&&(e.icon=e.icon||"empty")}));var f=(0,p.BX)(p.HY,{children:[l&&(0,p.tZ)(s.JO,{icon:"clear",toolTip:lng("clear"),onClick:l,css:(0,s.Mv)(n)}),n&&(0,p.tZ)("div",{className:"context-menu-title",children:n.caps()}),(0,p.tZ)("table",{children:(0,p.tZ)("tbody",{children:null==t?void 0:t.map((function(e,t){return!e||void 0!==e.visible&&!(0,c.g4)(e.visible)?void 0:(0,p.tZ)(v,{data:e,inputChange:(null==e?void 0:e.onValueChange)||r,onFocusChanged:function(e){return e^o&&i(e)},onSelect:a?function(){return a(e.val)}:void 0},t)}))})})]});return d?(0,p.tZ)("div",{css:_,className:u?" scrollable":"",children:f}):(0,p.tZ)("form",{css:_,className:u?" scrollable":"",autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:f})}},7166:function(e,t,n){"use strict";n.d(t,{g:function(){return g}});var r=n(66975),o=n(87363),i=n(73105),a=n(16920),l=n(35944),s=["copy","success"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=function(e){var t,n=e.copy,c=e.success,p=m(e,s),f=d((0,o.useState)(!1),2),g=f[0],h=f[1];if(null===(t=navigator)||void 0===t||!t.clipboard)return"";var b=function(){h(!0),setTimeout((function(){return h(!1)}),3e3)};return(0,l.tZ)(i.y,{behavior:"trigger",trigger:g,content:(0,l.BX)("div",{style:{padding:"10px",color:a.g.colors.dominant_main},children:[(0,l.tZ)(r.JO,{icon:"radio_checked"})," ",c]}),children:(0,l.tZ)(r.JO,u({icon:"copy",onClick:function(e){return navigator.clipboard.writeText(n).then(b),e.preventDefault()},toolTip:g?void 0:lng("copy to clipboard")},p))})}},6380:function(e,t,n){"use strict";n.d(t,{T:function(){return s}});var r=n(70917),o=n(16920),i=n(71134),a=n(35944),l=(0,r.iv)("z-index:1;display:inline-block;min-width:1em;min-height:1em;line-height:1em;padding:0.3em 0.6em;text-align:center;font-size:.8em;border-radius:10px;vertical-align:bottom;color:white;background-color:",o.g.colors.warning,";transition:opacity .3s ease-in-out;&._empty{opacity:0;}",""),s=function(e){var t=e.badge,n=e.className;return(0,a.tZ)("div",{css:l,className:(0,i.AK)(n,{_empty:0===parseInt(t)}),children:t})}},29180:function(e,t,n){"use strict";n.d(t,{ij:function(){return p},qm:function(){return f},qp:function(){return d}});var r=n(87363),o=n(27821),i=n(15560),a=n(22334),l=n(73105),s=n(71134),c=n(35944),u=(0,o.observable)({val:new Date});setInterval((function(){return u.val=new Date}),6e4);var p=(0,i.observer)((function(e){var t=e.time,n=e.className;return u.val,(0,c.tZ)("span",{className:n,children:(0,a.GG)(t,{relative:!0})})})),d=function(e){var t=e.time,n=e.className,r=e.showDate,o=void 0===r||r,i=e.showTime,l=void 0===i||i,s=e.showYear,u=void 0===s||s,p=e.hideMidnight,d=void 0!==p&&p,f=e.relative,m=void 0!==f&&f;return(0,c.tZ)("span",{className:n,children:(0,a.GG)(t,{date:o,time:l,year:u,hideMidnight:d,relative:m})})},f=function(e){var t=e.dateNote,n=e.showTime,o=void 0===n||n;if(!t)return null;if("auto"===o&&(o=t.start&&t.end&&t.end-t.start>s.dV&&t.end-t.start<s.s2),t.start&&(t.date=(0,a.GG)(t.start,{time:!1}),t.time=o?(0,a.GG)(t.start,{date:!1}):null),t.end&&(t.toDate=(0,a.GG)(t.end,{time:!1}),t.toTime=o?(0,a.GG)(t.end,{date:!1}):null),t.toDate&&t.date)if(t.toDate===t.date)t.toDate=null,t.toTime===t.time&&(t.toTime=null);else{var i,u=null===(i=t.date.match(/\D?\d\d\d\d\D?/))||void 0===i?void 0:i[0];u&&(t.toDate=t.toDate.replace(u,""))}return(0,c.tZ)(l.u,{text:t.toolTip,children:[t.date,t.time,(t.toDate||t.toTime)&&lng("to|date"),t.toDate,t.toTime].filter((function(e){return e})).map((function(e,t){return(0,c.BX)(r.Fragment,{children:[e," "]},t)}))})}},27813:function(e,t,n){"use strict";n.d(t,{m7:function(){return c},mp:function(){return a},s:function(){return s}});var r=n(70917),o=n(16920),i=n(35944),a=(0,r.iv)("color:",o.g.colors.text_black,";background-color:",o.g.colors.mention_bg,";padding:0 2px;border-radius:4px;",""),l=function(e){var t=e.children;return(0,i.tZ)("span",{css:a,children:t})},s=function(){return{strategy:function(e,t,n){return c(e,n,"mention",t)},component:l}},c=function(e,t,n,r){e.findEntityRanges((function(e){var r=e.getEntity();return null!==r&&t.getEntity(r).getType()===n}),r)}},40965:function(e,t,n){"use strict";n.d(t,{d:function(){return k},x:function(){return _}});var r=n(61533),o=n.n(r),i=n(87363),a=n(70917),l=(n(57882),n(16920)),s=n(51125),c=n(68567),u=n(66975),p=n(36220),d=n(35944),f=["content","className","maxWidth","maxHeight","title"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function y(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,i.memo)((function(e){var t=e.content,n=e.nl2br,r=void 0===n||n,a=e.process,s=void 0===a||a,c=e.className,u=e.fixTrailingSpaces,f=void 0===u||u,m=(0,i.useRef)();return t&&(r&&(t=t.nl2br()),s&&(t=t.linkify(!0))),(0,i.useLayoutEffect)((function(){w(m.current,s,f);var e=[];return y(m.current.getElementsByTagName("video")).forEach((function(t){var n,r=document.createElement("div");r.className="video_cont",e.push(r),t.insertAdjacentElement("afterend",r),t.parentNode.removeChild(t),o().render((0,d.tZ)(p.S,{url:t.src||(null===(n=t.querySelector("[src]"))||void 0===n?void 0:n.src)}),r)})),y(m.current.getElementsByTagName("iframe")).forEach((function(e){var t=document.createElement("div");t.className="video_cont",e.insertAdjacentElement("afterend",t),t.appendChild(e)})),function(){return e.forEach((function(e){return o().unmountComponentAtNode(e)}))}})),(0,d.tZ)("div",{dir:"auto",className:c,ref:m,css:l.g.classes.wysiwyg,dangerouslySetInnerHTML:{__html:O(t)}})})),w=function e(t,n,r){if("#text"===t.nodeName){if(r&&(t.textContent=t.textContent.replace(/\s\s/g,"  ")),n){var o=t.textContent.taskify().emojify();if(o!==t.textContent){var i=document.createElement("span");i.innerHTML=o,t.parentNode.replaceChild(i,t)}}}else"A"!==t.nodeName&&t.childNodes.forEach((function(t){return e(t,n,r)}))},O=function(e){var t=function(e){return'<span class="'.concat(e?(0,s.wj)("checkbox_checked"):(0,s.wj)("checkbox"),'" style="display:inline-block;margin: 0 3px;"></span>')};return(e||"").replace(/(^|\n|>)(\s*)\[\*]\s/g,"$1$2".concat(t(!0)," ")).replace(/(^|\n|>)(\s*)\[]\s/g,"$1$2".concat(t(!1)," "))},k=function(e){var t=e.content,n=e.className,r=e.maxWidth,o=void 0===r?"100%":r,i=e.maxHeight,s=void 0===i?"200px":i,p=e.title,m=b(e,f),h=(0,a.iv)("position:relative;._rich{max-width:",o,";max-height:",s,";overflow:auto;border-color:",l.g.colors.separator_light,";border-radius:",l.g.consts.FIELD_BORDER_RADIUS,"px;border-style:solid;border-width:1px;padding:5px;}._expand{font-size:1.2em;background:",l.g.colors.half_white,";color:",l.g.colors.text_black,";position:absolute;",l.g.far,":0;bottom:0;opacity:.1;}&:hover ._expand{opacity:1;}","");return(0,d.BX)("div",{css:h,children:[(0,d.tZ)(u.JO,{className:"_expand",icon:"fullscreen",onClick:function(){(0,c.qR)((0,d.tZ)(_,g({content:t,className:n},m)),{title:p,width:"calc(100% - 2vw)"})},toolTip:lng("full screen").caps()}),(0,d.tZ)("div",{className:"_rich",children:(0,d.tZ)(_,g({content:t,className:n},m))})]})}},85311:function(e,t,n){"use strict";n.d(t,{Zv:function(){return b},c_:function(){return d},jM:function(){return h},zh:function(){return m}});var r=n(70917),o=n(16920),i=n(86344),a=n(35944),l=["children","column"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var d=function(e){var t=e.children,n=e.column,o=p(e,l);return(0,a.tZ)("div",c(c({css:(0,r.iv)({display:"flex",flexDirection:n?"column":void 0},"","")},o),{},{children:t}))},f={name:"1ff36h2",styles:"flex-grow:1"},m=function(){return(0,a.tZ)("div",{css:f})},g=(0,r.iv)("padding:2px 10px;border-radius:6px;border:1px solid transparent;background-color:",o.g.colors.text_light_disabled,";color:",(0,i.ou)(o.g.colors.text_light_disabled),";",""),h=function(e){var t=e.text,n=e.width;return(0,a.tZ)("input",{css:g,style:{width:n},type:"text",readOnly:!0,value:t})},b=function(e){var t=e.width;return(0,a.tZ)("span",{style:{width:t||"10px",display:"inline-block"}})}},95405:function(e,t,n){"use strict";n.d(t,{SV:function(){return v},aK:function(){return k},bg:function(){return w}});var r=n(87363),o=n(70917),i=n(16920),a=n(75898),l=n(35944);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t,n){return t&&u(e.prototype,t),n&&u(e,n),e}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b="Oops! someting went wrong...",y=(0,o.iv)("background-color:",i.g.colors.bg_cont,";border:4px dashed pink;color:",i.g.colors.text_sec,";padding:5px;._sad{font-weight:bold;font-size:50px;}",""),v=function(e){d(n,e);var t=m(n);function n(e){var r;return c(this,n),(r=t.call(this,e)).state={},r}return p(n,[{key:"componentDidCatch",value:function(e,t){this.setState({error:e,errorInfo:t})}},{key:"render",value:function(){return this.state.error?this.renderError(this.state):this.props.children}},{key:"renderError",value:function(e){var t=e.error;return(0,l.BX)("div",{css:y,className:this.props.className,children:[(0,l.tZ)("b",{children:":("})," ",b,(0,l.tZ)("br",{}),(0,l.tZ)("br",{}),(0,l.tZ)("div",{children:t.toString()})]})}}]),n}(r.Component),_=(0,o.iv)(i.g.classes.page_position,";",""),w=function(e){d(n,e);var t=m(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"renderError",value:function(e){var t=e.error,n=e.errorInfo;return(0,l.BX)("div",{css:[y,_,"",""],children:[(0,l.tZ)("div",{className:"_sad",children:":("}),b,(0,l.tZ)("br",{}),(0,l.tZ)("br",{}),(0,l.tZ)("div",{children:t.toString()}),"_self"in(0,r.createElement)("div")&&(0,l.tZ)("pre",{children:n.componentStack})]})}}]),n}(v),O=(0,o.iv)(a.NI,";overflow:auto;display:flex;align-items:center;justify-content:center;text-align:center;",""),k=function(e){d(n,e);var t=m(n);function n(){return c(this,n),t.apply(this,arguments)}return p(n,[{key:"renderError",value:function(e){var t=e.error;return(0,l.tZ)("div",{css:[y,O,"",""],children:(0,l.BX)("div",{children:[(0,l.tZ)("div",{className:"_sad",children:":("}),b,(0,l.tZ)("br",{}),(0,l.tZ)("br",{}),(0,l.tZ)("i",{children:t.toString()})]})})}}]),n}(v)},55832:function(e,t,n){"use strict";n.d(t,{Cy:function(){return C},WB:function(){return S},_V:function(){return j},wn:function(){return x}});var r=n(15560),o=n(27821),i=n(70917),a=n(16920),l=n(33051),s=n(47095),c=n(71134),u=n(66975),p=n(22906),d=n(43698),f=n(70081),m=n(35944);function g(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=(0,i.iv)("align-items:center;._active{color:",a.g.colors.dominant_main,";}>form{",a.g.classes.margin_far("4px"),";display:flex;justify-content:space-evenly;._field_wrapper{margin-right:15px;}}.blsm-input:not(.wrapped){border:1px solid #DCDCDC;border-radius:4px;&:hover{border:1px solid #9E9E9E;}&:focus-within{border:1px solid ",a.g.colors.dominant_main,";}}",""),k={name:"1r5gb7q",styles:"display:inline-block"},x=(0,r.observer)((function(e){var t=e.filters,n=void 0===t?[]:t,r=e.filtersVals,i=e.onFilter,a=e.className,s=e.spreadFilters,p=e.iconProps,g=n.map((function(e){return _(_({},e),{},{input:e.type?Object.assign((0,c.ei)(e,["type","name","options","tree","nameField","checkboxValue","emptyOption","subArray","placeholder"]),{value:r[e.name]||""}):void 0})}));(0,f.iP)();var h=[];g=g.filter((function(e){if(!e)return!1;if(!e.outOfMenu||(s||(0,c.Oz)())&&(!s||(0,c.tq)()))return!0;var t={eInputLabel:e.label,eInput:e.input,eWrapped:e.wrapped};if(s)h.push(t);else{if(s||0!==h.length)return!0;h[0]=t}}));var b=Object.keys((0,o.toJS)(r)).length>0,y=i?function(e){return i((0,c.v7)(Object.assign({},r,e)))}:void 0;return(0,m.BX)("div",{css:O,className:a,children:[h&&(0,m.tZ)("form",{autoComplete:"off",onSubmit:function(e){return e.preventDefault()},css:k,children:h.map((function(e,t){var n,r;return(0,m.tZ)(d.I,_({label:null===(n=e.eInputLabel)||void 0===n?void 0:n.caps(),className:e.eWrapped?"wrapped":"",wrapped:e.eWrapped,style:{verticalAlign:"text-top"},placeholder:s||!s&&e.eWrapped&&0===t||null===(r=e.eInputLabel)||void 0===r?void 0:r.caps(),onChange:y?function(t){return y(w({},e.eInput.name,t||void 0))}:void 0},e.eInput),t)}))}),g.length>0&&(0,m.tZ)(l.x,{className:"_dropdown",options:g,inputChange:y,onClear:i&&b?function(){return i({})}:void 0,children:(0,m.tZ)(u.JO,_({icon:"filter",className:(0,c.AK)({_active:b})},p))})]})})),S=function(e,t,n){for(var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=r.recent,a=r.id_attr,l=r.filters,c=r.subName,u=null==e?void 0:e.slice(),d=function(){var e=h(m[f],2),t=e[0],n=e[1];if(0===(null==n?void 0:n.length)&&!c)return"continue";u=u.filter((function(e){if(l){var r=l.find((function(e){return e.name===t&&e.func}));if(r)return r.func(n,e)}var i,a,s,c,u,d,f,m,g,h,b=(0,o.toJS)((0,p.Lj)(e,t));return Array.isArray(n)?Array.isArray(b)?(b=b.map((function(e){var t;return null==e||null===(t=e.toString)||void 0===t?void 0:t.call(e)})),n.filter((function(e){return b.includes(e)})).length>0):n.includes(null===b?b:null===(i=b)||void 0===i||null===(a=i.toString)||void 0===a?void 0:a.call(i)):"string"==typeof n?null!==(s=(l||[]).find((function(e){return e.name===t})))&&void 0!==s&&s.exact?""===(null===(c=b)||void 0===c?void 0:c.toString())||(null===(u=b)||void 0===u||null===(d=u.toString())||void 0===d?void 0:d.toLowerCase())===(null==n||null===(f=n.toLowerCase)||void 0===f?void 0:f.call(n)):null===(m=b)||void 0===m||null===(g=m.toString())||void 0===g?void 0:g.toLowerCase().includes((null==n||null===(h=n.toLowerCase)||void 0===h?void 0:h.call(n))||""):"boolean"==typeof n?!!n==!!b:!("number"==typeof n&&n>0)||n==b}))},f=0,m=Object.entries((0,o.toJS)(t));f<m.length;f++)d();return n?(0,s.p)(u,n,i,a):u},j=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.labelFunc,i=n.sortFunc,a=n.valIsArray;return g(new Set(t.map((function(t){return a?(0,p.Lj)():(0,o.toJS)((0,p.Lj)(t,e))})))).filter((function(e){return e})).sort(i||void 0).map((function(e){return{val:e,label:r?r(e):e}}))},C=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return{filter:e,sort:{by:t.by||""}}}},5293:function(e,t,n){"use strict";n.d(t,{Q9:function(){return d},n2:function(){return m}});var r=n(87363),o=n(71134),i=n(70917),a=n(16920),l=n(66975),s=n(33346),c=n(39952),u=n(35944);var p=(0,i.iv)("width:20px;height:20px;border-radius:50%;font-size:10px;background-color:",a.g.colors.dominant_main,";color:white;display:inline-flex;justify-content:center;align-items:center;&.error{background-color:",a.g.colors.negative,";}",""),d=function(e){var t=e.type,n=e.toolTip,r=e.className;return(0,u.tZ)("div",{css:p,className:(0,o.AK)(r,t),children:(0,u.tZ)(l.JO,{icon:"error"===t?"sign_notification":"required",toolTip:n})})},f=function(e){return(0,i.iv)("position:relative;display:flex;border:1px solid ",a.g.colors.separator,";transition:border-color .2s ease-out;background-color:",a.g.colors.bg_input,";border-radius:",a.g.consts.FIELD_BORDER_RADIUS,"px;align-items:center;>input,>.InputDropDown{border-radius:",a.g.consts.FIELD_BORDER_RADIUS,"px;}&._focused:not(.readOnly){border-color:",a.g.colors.dominant_main,";}&.readOnly{&,input,select,textarea{color:",a.g.colors.disabled_text,";}*:focus{outline:none;}}>.auto_complete{width:100%;}>input,>select,>textarea,>.select_date>input,>.auto_complete>input,>.image_input>input{border:0;outline:none;background:transparent;width:100%;padding:11px 13px;}>.image_input{width:100%;>input{border-radius:",a.g.consts.FIELD_BORDER_RADIUS,"px;}}>.DraftEditor{width:100%;}>.InputDropDown{width:100%;border:0;>._label{padding:11px 13px;}}>select{padding:10px 13px;}>._placeholder{pointer-events:none;position:absolute;top:0;",a.g.near,":",e?"30px":"13px",";color:",a.g.colors.text_placeholder,";background-color:",a.g.colors.bg_input,";border-radius:",a.g.consts.FIELD_BORDER_RADIUS,"px;padding-top:11px;transition:top .2s,left .2s,font-size .2s,padding .2s,color .2s;&._has_symbol{",a.g.classes.margin_near("1ch"),";}}&._skinny{>input,>select,>textarea,>.InputDropDown>input,>.select_date>input,>.auto_complete>input{padding-top:5px;padding-bottom:5px;border-radius:",a.g.consts.SKINNY_BORDER_RADIUS,"px;}>._placeholder{padding-top:7px;}}&._minimalist{border-radius:0;border-style:none none dashed none;padding:0;>input,>select,>textarea,>.InputDropDown>input,>.select_date>input,>.auto_complete>input{padding:0 1px;}}&._inline{display:inline-flex;>input,>select,>textarea,>.InputDropDown>input,>.select_date>input,>.auto_complete>input{display:inline-block;}}&.labelMargin{margin-top:1em;}input::placeholder{color:silver;}&._focused,&._filled{>._placeholder{top:-.7em;",a.g.near,":7px;padding:0 6px;}}._flag{position:absolute;",a.g.near,":-24px;top:10px;}&._error{border-color:",a.g.colors.negative,";}&._disabled{position:relative;color:",a.g.colors.text_main,';.InputLabel{z-index:1;background-color:transparent;}&:after{content:"";position:absolute;top:0;left:0;width:100%;height:100%;background-color:',a.g.colors.text_light_disabled,";opacity:0.5;border-radius:",a.g.consts.FIELD_BORDER_RADIUS,"px;}}>.Icon{",a.g.classes.margin_near("10px"),";}","")},m=function(e){var t,n,i,a=e.children,p=e.label,d=e.focused,m=e.filled,g=e.required,h=e.error,b=e.skinny,y=e.minimalist,v=e.labelMargin,_=e.inline,w=e.disabled,O=e.readOnly,k=e.icon,x=e.helpKey,S=e.maxWidth,j=e.symbol,C=(0,r.useRef)(),P=(0,r.useContext)(s.p8);return(0,u.BX)("div",{css:f(k),style:{maxWidth:S},ref:function(e){var t;(null==e?void 0:e.clientWidth)-35<(null===(t=C.current)||void 0===t?void 0:t.clientWidth)&&(e.style.minWidth=C.current.clientWidth+35+"px")},className:(0,o.AK)((t={_field_wrapper:!0,_focused:d,_filled:m,_error:h,_skinny:b,_minimalist:y,_inline:_,_disabled:w,labelMargin:v,readOnly:O,_has_symbol:!!j},n="theme_".concat(P),i=P,n in t?Object.defineProperty(t,n,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[n]=i,t)),children:[k&&(0,u.tZ)(l.JO,{icon:k}),a,(0,u.tZ)(c.A,{label:p,error:h,required:g,className:(0,o.AK)("_placeholder",{_has_symbol:!!j}),ref:C,helpKey:x})]})}},23205:function(e,t,n){"use strict";n.d(t,{l:function(){return $}});var r=n(87363),o=n(70917),i=n(16920),a=n(26291),l=n(33346),s=n(67033),c=n(15560),u=n(539),p=n(24524),d=n(65155),f=n(24210),m=n(35944);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,o.iv)("display:flex;flex-direction:column;text-align:center;color:",i.g.colors.text_sec,";width:min(500px, 96vw);margin:0 auto;>.fps_title{color:",i.g.colors.text_main,";font-size:2.4rem;font-weight:600;}button,.fps_next{margin-top:20px;}",""),y=(0,c.observer)((function(){var e=(0,r.useContext)(f.q3);return(0,m.BX)("div",{css:b,children:[(0,m.tZ)(p.M,{}),(0,m.BX)("div",{className:"fps_title",children:[lng("success").caps(),"!"]}),e.successButtons.length>0&&(0,m.BX)(m.HY,{children:[(0,m.tZ)("div",{className:"fps_next",children:lng("what's next?").caps()}),e.successButtons.map((function(e){return(0,m.tZ)(d.O,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({chunky:!0},e),e.label)}))]})]})})),v=n(20747),_=n(17203),w=n(71134),O=n(85311);function k(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,o.iv)("background-color:",i.g.colors.bg_main,";display:flex;position:relative;",i.g.mQuery.mobile,"{flex-direction:column;}>div>._main{color:",i.g.colors.text_main,";flex-grow:1;padding-top:50px;position:relative;>div>.form_section{width:500px;max-width:96vw;margin:0 auto 20px;padding:0 20px;}&.noPanel>div>.form_section{max-width:1000px;width:auto;}}>._overlay{position:absolute;z-index:1;background-color:rgba(255, 255, 255, .5);left:0;top:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;}",i.g.mQuery.mobile,"{>div>._main{padding-top:90px;padding-bottom:70px;@media (max-height: ",i.g.consts.MIN_FORM_HEIGHT_MOBILE,"px){padding-bottom:0;}}}",""),j=(0,c.observer)((function(){var e=(0,r.useContext)(f.q3),t=e.fields,n=e.status,o=e.activeSection,i=e.savePanel,c=e.progress,p=function(e,t){var n,r=k(e);try{for(r.s();!(n=r.n()).done;){var o=n.value;if(o===t)return;var i,a=k(o.fields);try{for(a.s();!(i=a.n()).done;)if(i.value===t)return o}catch(e){a.e(e)}finally{a.f()}}}catch(e){r.e(e)}finally{r.f()}}(t,o),d=p?{type:"section",title:p.title,fields:[o]}:o;p&&o.sectionWidth&&(d.sectionWidth=o.sectionWidth);var g=function(t){e.status="",e.setActiveSection(t)};return(0,m.BX)(a.T,{css:S,children:[(0,m.tZ)(v.$,{activeSection:o,onSelectSection:g}),(0,m.BX)(O.c_,{column:!0,style:{flexGrow:1},children:[(0,m.tZ)("form",{className:(0,w.AK)("_main",{noPanel:!i}),autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:"success"===n?(0,m.tZ)(s.U,{children:(0,m.tZ)(y,{})}):(0,m.tZ)(s.U,{children:(0,m.tZ)(l.au,{input:d})},null==o?void 0:o.title)}),i&&(0,m.tZ)(_.q,{activeSection:o,onSelectSection:g,parentSection:p})]}),"saving"===n&&(0,m.tZ)("div",{className:"_overlay",children:(0,m.tZ)(u.$,{label:c+"%"})}),i&&(0,m.tZ)("div",{style:{width:"315px"}})]})})),C=(n(57882),n(48207)),P=n(70081),Z=n(85946),B=n(23838),T=["internalForm"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=(0,o.iv)("color:",i.g.colors.text_main,";max-width:100%;display:flex;flex-direction:column;padding:0;._overlay{position:absolute;background-color:rgba(255, 255, 255, .5);left:0;top:0;right:0;bottom:0;display:flex;justify-content:center;align-items:center;border-radius:",i.g.consts.CONT_BORDER_RADIUS,"px;}",""),F=(0,c.observer)((function(e){var t=e.internalForm,n=e.noHead,o=e.wizard,i=e.enableConfirmButton,a=(0,r.useContext)(f.q3),s=(0,P.iP)().width>1400&&a.fieldsColumns.length>1,c=a.status,p=a.progress,g=a.FormComponent,h=R((0,r.useState)(0),2),b=h[0],y=h[1],v=a.fields.length;return(0,m.BX)(m.HY,{children:[!n&&a.title&&(0,m.tZ)(Z.D,{children:a.title}),!n&&a.headExtra,!1===a.ready?(0,m.tZ)(u.$,{}):(0,m.BX)(q,{className:"formtag",internalForm:t,css:M,autoComplete:"off",onSubmit:function(e){return e.preventDefault()},children:[s?(0,m.tZ)(C.U0,{children:a.fieldsColumns.map((function(e,t){return(0,m.tZ)("div",{className:"splitter-"+t,children:(0,m.tZ)(l.au,{input:e})},t)}))}):g?(0,m.tZ)(g,{fields:a.fields}):o?(0,m.tZ)(l.$0,{title:a.fields[b].title,children:(0,m.tZ)(l.au,{input:a.fields[b].fields})}):(0,m.tZ)(l.au,{input:a.fields}),"saving"===c&&(0,m.tZ)("div",{className:"_overlay",children:(0,m.tZ)(u.$,{label:p+"%"})}),o?(0,m.tZ)(L,{formCtx:a,numOfSections:v,wizardIndex:b,setWizardIndex:function(e){var t,n=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=N(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(a.fields[b].fields);try{for(n.s();!(t=n.n()).done;){var r=t.value;a._validateField(null,r)}}catch(e){n.e(e)}finally{n.f()}0===a.errors.size&&y(e)}}):i&&a.confirmButtonLabel?(0,m.tZ)(d.O,{primary:!0,onClick:a.callSave,highlight:a.dirty,disabled:!!a.status,children:a.confirmButtonLabel}):null]})]})})),q=function(e){var t=e.internalForm,n=D(e,T);return t?(0,m.tZ)("div",I({},n)):(0,m.tZ)("form",I({},n))},X={name:"1cnbn82",styles:"margin-top:40px;display:flex;justify-content:space-between;align-items:end;>div{min-width:60px;}.conclusion-buttons{text-align:center;}"},L=function(e){var t=e.formCtx,n=e.numOfSections,r=e.wizardIndex,o=e.setWizardIndex;return(0,m.BX)("div",{css:X,children:[(0,m.tZ)("div",{children:r>0&&(0,m.tZ)(d.O,{onClick:function(){return o(r-1)},children:lng("back").caps()})}),(n-1>r||n-1==r)&&(0,m.BX)("div",{className:"conclusion-buttons",children:[n-1>r&&(0,m.tZ)("div",{children:(0,m.tZ)(d.O,{chunky:!0,primary:!0,onClick:function(){return o(r+1)},children:lng("next").caps()})}),n-1==r&&(0,m.tZ)("div",{children:(0,m.tZ)(d.O,{chunky:!0,primary:!0,onClick:t.callSave,highlight:t.dirty,disabled:!!t.status,children:t.confirmButtonLabel})}),t.cancelText&&(0,m.tZ)("div",{children:(0,m.tZ)(d.O,{chunky:!0,onClick:function(){return(0,B.vm)().closeDialog()},children:t.cancelText.caps()})})]}),(0,m.tZ)("div",{})]})};var U={name:"1fttcpj",styles:"display:flex;flex-direction:column"},V=(0,c.observer)((function(e){var t,n=e.onClose,o=e.hideX,i=e.internalForm,a=e.dialogWidth,l=e.dialogTailButtons,s=e.options,c=e.fitContent,u=(s||{}).wizard,p=(0,r.useContext)(f.q3),g=(0,P.iP)(),h=g.width>1400&&p.fieldsColumns.length>1,b=(0,m.BX)("div",{css:(t=g.width>575,t?"":U),children:[p.headExtra,p.confirmButtonLabel&&!u&&(0,m.tZ)(d.O,{primary:!0,onClick:p.callSave,highlight:p.dirty,disabled:!!p.status,children:p.confirmButtonLabel})]}),y=c?"fit-content":a||(h?"1400px":void 0);return(0,m.tZ)(C.T,{className:"fdialog",title:p.title,onClose:n,hideX:o,headExtra:b,headPrefix:p.headPrefix,width:y,padded:!h,tailButtons:l,children:(0,m.tZ)(F,{internalForm:i,noHead:!0,wizard:u})})})),H=["type","form"];function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $=(0,c.observer)((function(e){var t=e.type,n=void 0===t?"dialog":t,r=e.form,o=K(e,H);return(0,m.BX)(f.q3.Provider,{value:r,children:["page"===n&&(0,m.tZ)(j,{}),"inline"===n&&(0,m.tZ)(F,J({},o)),"dialog"===n&&(0,m.tZ)(V,J({},o)),r.extra_component]})}))},33346:function(e,t,n){"use strict";n.d(t,{$0:function(){return P},VE:function(){return T},au:function(){return x},fM:function(){return I},gN:function(){return j},p8:function(){return k}});var r=n(87363),o=n(70917),i=n(16920),a=n(43698),l=n(71134),s=n(15560),c=n(24210),u=n(66975),p=n(45459),d=n(85946),f=n(39483),m=n(20747),g=n(35944),h=["grow","align","onValueChange","onBlur"];function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=(0,r.createContext)(null),x=(0,s.observer)((function(e){var t=e.input,n=e.skinny,o=e.minimalist,i=(0,r.useContext)(c.q3);if(!i)throw new Error("FormContext in FormEl was not found, did you forgot to set FormContext.Provider?");if(!t)return null;var a=i.values,s=i.updateValue,u=i.errors;if(!(0,m.b)(t,i))return null;if(Array.isArray(t)||["row_set","section","indent_set","set"].includes(t.type)){var p=(Array.isArray(t)?t:t.fields).map((function(e,r){return e.disable=e.disable||t.disable,(0,g.tZ)(x,{input:e,skinny:n||t.inline,minimalist:o||t.minimalist},r)}));return"section"===t.type?(0,g.tZ)(P,w(w({},t),{},{children:p})):"row_set"===t.type&&window.innerWidth>368?(0,g.tZ)(T,w(w({},t),{},{children:p})):"indent_set"===t.type?(0,g.tZ)(I,w(w({},t),{},{children:p})):"set"===t.type||"row_set"===t.type&&window.innerWidth<=368?(0,g.tZ)(A,w(w({},t),{},{children:p})):p}return"title"===t.type?(0,g.tZ)(d.D,w(w({},t.props),{},{children:t.label.caps()})):("select"===t.type&&(0,l.Wl)(t.options)&&(t=Object.assign({},t,{options:t.options()})),(0,g.tZ)(j,{input:t,required:!0===t.required||(0,l.g4)(t.required),value:t.name?i.getValue(t.name,t.checkboxValue):a,skinny:n||t.skinny,minimalist:o||t.minimalist,onChange:t.readOnly?null:s,error:u.get(t.name),disabled:(0,l.g4)(t.disable,null,[a])}))})),S=(0,o.iv)('margin-top:1em;[direction="ltr"]{direction:ltr;}[direction="rtl"]{direction:rtl;}>.range_input{width:50%;}.Icon-radio_checked{color:',i.g.colors.dominant_main,";}textarea{height:100px;}&._skinny{margin-top:0;}.sub{font-size:0.8em;margin:2.5px 15px;}.outer_label{display:inline-block;color:",i.g.colors.text_sec,";margin-inline-end:15px;width:fit-content;flex-grow:0;}&.style-checkbox,&.style-toggle{margin-top:0;}",""),j=(0,r.memo)((function(e){var t,n=e.input,o=e.value,s=e.onChange,c=e.error,u=e.disabled,p=e.skinny,d=e.minimalist,f=e.required,m=n.grow,b=n.align,y=n.onValueChange,_=n.onBlur,O=v(n,h),k=O.outer_label,x=O.name,j=O.checkboxValue,C=(0,r.useCallback)((function(){return(0,l.g4)(_)}),[_]),P=(0,r.useCallback)((function(e,t){return null!=s&&s(e,x,j),(0,l.g4)(y,null,[e,t,x])}),[s,y,x,j]);return t="component"===n.type?n.node||(0,g.tZ)(n.Render,w({value:o,input:n,onChange:x?function(e){return s(e,x)}:void 0,error:c},n.props||{})):(0,g.tZ)(a.I,w(w({},O),{},{value:o,disabled:u||O.disabled,onChange:P,onBlur:C,wrapped:!0,required:f,error:c,minimalist:d,skinny:p})),"hidden"===n.type?t:(0,g.BX)("div",{css:S,style:(0,l.v7)({flexGrow:m,maxWidth:b===i.g.far?"fit-content":null}),className:(0,l.AK)("style-"+n.type,"form-field",{_skinny:p,_minimalist:d}),children:[k?(0,g.tZ)("div",{className:"outer_label",children:k.caps()}):null,t,n.sub&&(0,g.tZ)("div",{className:"sub",children:n.sub})]})})),C=function(e,t){return(0,o.iv)(e?"margin-top: 2.5em;":""," ",t?"":"margin-bottom: .7rem;",">._title{display:flex;align-items:center;justify-content:space-between;&._big{justify-content:center;>._label{color:",i.g.colors.dominant_main,";text-align:center;font-size:2rem;font-weight:600;}}&._small{margin:1.2rem 0 .5rem;._label{font-weight:700;color:",i.g.colors.text_main,";.Icon{font-size:17px;",i.g.classes.margin_far("4px"),";}}}}.form_section &>._title._big>._label{margin-top:1.2rem;font-size:1.2rem;color:",i.g.colors.text_sec,";}","")},P=function(e){var t=e.children,n=e.title,r=e.titleSmall,o=e.titleIcon,i=e.titleExtra,a=e.sectionWidth;return(0,g.BX)("div",{css:C(),className:(0,l.AK)("form_section"),style:a?{maxWidth:a,width:"auto"}:null,children:[n&&(0,g.BX)("div",{className:(0,l.AK)("_title",r?"_small":"_big"),children:[(0,g.BX)("div",{className:"_label",children:[o&&(0,g.tZ)(u.JO,{icon:o}),(0,g.tZ)(f.m,{children:n.caps()})]}),i]}),t]})},Z=(0,o.iv)("position:relative;.help-sign{position:absolute;top:calc(50% - 3px);color:",i.g.colors.text_placeholder,";",i.g.classes.padding_near("10px")," ",i.g.classes.near("-35px"),";}",""),B=(0,o.iv)("align-items:center;&:not(._inline){display:flex;justify-content:space-between;}&._inline{display:inline-flex;}&.extraTopMargin{margin-top:2.5em;}>*+*{",i.g.classes.margin_near(".5em"),";}&:not(._inline)>*{flex-grow:1;flex-basis:0;}",""),T=function(e){var t=e.children,n=e.inline,r=e.extraTopMargin,o=e.className,i=e.helpKey,a=(0,g.tZ)("div",{css:B,className:(0,l.AK)({extraTopMargin:r,_inline:n},o),children:t});return i?(0,g.BX)("div",{css:Z,children:[(0,g.tZ)(p.I,{helpKey:i}),a]}):a},E=(0,o.iv)("&.extraTopMargin{margin-top:2.5em;}.toggleTitle{margin-top:2.5em;font-weight:bold;>.toggleIcon{",i.g.classes.opposite_float,";}}.indentSet{",i.g.classes.margin_near("2em"),";}",""),I=function(e){var t=e.children,n=e.extraTopMargin,o=e.toggle,i=e.toggleTitle,a=e.addMargin,s=void 0===a||a,c=b((0,r.useState)(!0),2),p=c[0],d=c[1];return(0,g.BX)("div",{css:E,className:(0,l.AK)({extraTopMargin:n}),children:[o&&(0,g.BX)("div",{className:"toggleTitle",onClick:function(){return d(!p)},children:[(0,g.tZ)("span",{children:null==i?void 0:i.caps()}),(0,g.tZ)(u.JO,{className:"toggleIcon",icon:p?"arrow_down":"arrow_right"})]}),p&&(0,g.tZ)("div",{className:(0,l.AK)({indentSet:s}),children:t})]})},A=function(e){var t=e.children,n=e.extraTopMargin,r=e.title,o=e.titleSmall,i=e.titleIcon,a=e.titleExtra,s=e.noMarginBottom;return(0,g.BX)("div",{css:C(n,s),children:[r&&(0,g.BX)("div",{className:(0,l.AK)("_title",o?"_small":"_big"),children:[(0,g.BX)("div",{className:"_label",children:[i&&(0,g.tZ)(u.JO,{icon:i}),r.caps()]}),a]}),t]})}},17203:function(e,t,n){"use strict";n.d(t,{_:function(){return C},q:function(){return S}});var r=n(70917),o=n(16920),i=n(87363),a=n(65155),l=n(5293),s=n(24210),c=n(15560),u=n(71134),p=n(7392),d=n(66975),f=n(33051),m=n(52205),g=n(20747),h=n(35944);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x=(0,r.iv)("background-color:",o.g.colors.dominant_main_shade,";width:315px;padding:35px 15px 0;display:flex;flex-direction:column;position:fixed;",o.g.far,":0;top:",o.g.consts.TOP_BAR_HEIGHT,"px;bottom:0;z-index:1;._preview{min-height:200px;padding-top:110px;padding-bottom:30px;}",o.g.mQuery.mobile,"{width:auto;padding:5px 22px;position:static;max-height:30vh;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);div.base_menu{display:flex;height:50px;justify-content:space-evenly;>div{flex-basis:33%;text-align:center;}>span{position:absolute;",o.g.far,":2px;bottom:9px;}}@media (min-height: ",o.g.consts.MIN_FORM_HEIGHT_MOBILE,"px){position:sticky;top:auto;",o.g.near,":0;}}",""),S=(0,c.observer)((function(e){var t=e.activeSection,n=e.onSelectSection,r=e.parentSection,o=(0,i.useContext)(s.q3),l=null,c="";if(!o.status){if(r){var g=r.fields.indexOf(t);0<=g&&(l=P(r.fields,g+1,o))}if(!l){var b,v,_,w=o.fields.indexOf(r||t);0<=w&&(l=P(o.fields,w+1,o)),"section"===(null===(b=l)||void 0===b||null===(v=b.fields)||void 0===v||null===(_=v[0])||void 0===_?void 0:_.type)&&(c=l.title,l=P(l.fields,0,o))}}return(0,u.tq)()?(0,h.BX)("div",{css:x,children:[(0,h.BX)("div",{className:"base_menu",children:[o.backToButton?(0,h.tZ)("div",{children:(0,h.BX)(p.l,O(O({theme:"outlined",chunky:!0},o.backToButton),{},{children:[(0,h.tZ)(d.JO,{icon:"reply"})," ",lng("return").caps()]}))}):(0,h.tZ)("div",{}),(0,h.tZ)("div",{children:(0,h.BX)(p.l,{theme:"outlined",chunky:!0,primary:!0,onClick:o.callSave,disabled:!!o.status,children:[" ",(0,h.tZ)(d.JO,{icon:"save"})," ",o.confirmButtonLabel]})}),l?(0,h.tZ)("div",{children:(0,h.BX)(p.l,{theme:"outlined",chunky:!0,onClick:function(){return n(l)},children:[" ",lng("next").caps()," ",(0,h.tZ)(d.JO,{icon:"arrow_go_far"})]})}):(0,h.tZ)("div",{}),o.savePanelExtraButtons.size>0&&(0,h.tZ)("span",{children:(0,h.tZ)(f.x,{className:"_menu",chunky:!0,icon:"menu",options:y(o.savePanelExtraButtons.values()),children:(0,h.tZ)(d.JO,{icon:"menu",buttonLike:!0})})})]}),(0,h.tZ)(C,{})]}):(0,h.BX)("div",{css:x,children:[(0,h.tZ)("div",{className:"_preview",children:o.preview&&(o.preview.custom||(0,h.tZ)(m.d,{title:o.preview.title,poster:o.preview.poster,status:o.preview.status,isApproved:o.preview.isApproved}))}),o.backToButton&&(0,h.BX)(a.O,{chunky:!0,onClick:o.backToButton.onClick,children:[(0,h.tZ)(d.JO,{icon:o.backToButton.icon||"reply"})," ",o.backToButton.label]}),l&&(0,h.BX)(a.O,{chunky:!0,onClick:function(){return n(l)},children:[(0,h.tZ)(d.JO,{icon:"arrow_go_far"})," ",lng("continue to %s",c||l.title).caps()]}),(0,h.BX)(a.O,{chunky:!0,primary:!0,onClick:o.callSave,disabled:!!o.status,children:[(0,h.tZ)(d.JO,{icon:"save"})," ",o.confirmButtonLabel]}),(0,h.tZ)("br",{}),(0,h.tZ)("br",{}),o.savePanelExtraButtons.size>0&&y(o.savePanelExtraButtons.values()).map((function(e,t){return(0,h.BX)(a.O,{chunky:!0,onClick:e.onClick,children:[e.icon&&(0,h.tZ)(d.JO,{icon:e.icon})," ",e.label]},t)})),(0,h.tZ)(C,{})]})})),j=(0,r.iv)("margin:1.5em 1em;color:",o.g.colors.text_sec,";font-size:.9em;>div{cursor:pointer;margin-top:0.5em;}",""),C=(0,c.observer)((function(){var e=(0,i.useContext)(s.q3),t=e.errors;if(!t.size)return null;return(0,h.tZ)("div",{css:j,children:t.toJSON().map((function(t){var n=b(t,2),r=n[0],o=n[1];return(0,h.BX)("div",{onClick:function(){return function(t){var n=[];(0,s.HE)(e.fields,(function(e){return(null==e?void 0:e.name)===t}),n);var r=n.reverse().find((function(e){return"section"===e.type&&e.sid}));r&&(e.status="",e.setActiveSection(r))}(r)},children:[(0,h.tZ)(l.Q9,{type:"error"})," ",o]},r)}))})})),P=function(e,t,n){for(var r=0;e[t+r]&&!(0,g.b)(e[t+r],n);)r++;return e[t+r]}},20747:function(e,t,n){"use strict";n.d(t,{$:function(){return O},b:function(){return k}});var r=n(70917),o=n(16920),i=n(87363),a=n(71134),l=n(24210),s=n(15560),c=n(22698),u=n(49039),p=n(10101),d=n(70081),f=n(66975),m=n(43698),g=n(3533),h=n(35944);function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||v(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e){return function(e){if(Array.isArray(e))return _(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||v(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){if(e){if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_(e,t):void 0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var w=(0,r.iv)("width:350px;padding-top:35px;",o.g.classes.padding_near("60px"),";",o.g.classes.padding_far("30px"),";",o.g.classes.border_far("1px solid "+o.g.colors.separator),";min-height:calc(100vh - ",o.g.consts.TABLE_HEAD_HEIGHT,"px);>.fp_title{color:",o.g.colors.text_main,";font-size:2.2rem;font-weight:600;margin-bottom:1rem;}.fp_sub_title{color:",o.g.colors.text_sec,";font-size:1.4rem;font-weight:600;margin-bottom:2rem;}.fp_search_line{display:flex;align-items:center;margin-bottom:1rem;.fp_search_box{position:relative;display:flex;align-items:center;.fp_search_input{border:1px solid ",o.g.colors.border,";border-radius:5px;padding:4px 8px;}.fp_search_clear{position:absolute;",o.g.classes.far("9px"),";}}}>._entry{color:",o.g.colors.text_sec,";min-height:50px;",o.g.classes.padding_near("18px"),";",o.g.classes.border_near("2px solid #dfdfdf"),';padding-bottom:1.5em;&:last-of-type{border-color:transparent;}>div{position:relative;top:-5px;>._label:before{content:"";position:absolute;top:5px;',o.g.near,":-24px;width:11px;height:11px;border-radius:50%;background-color:",o.g.colors.text_sec,";transition:all .1s ease-in-out;}>div>._label{font-size:1em;",o.g.classes.margin_near(".5em"),";margin-top:.5em;}._label{font-size:1.1em;font-weight:600;cursor:pointer;&.disabled{color:",o.g.colors.text_light_disabled,";cursor:not-allowed;}}}}&:not(.disabled)>._entry>div ._label{&.error{color:",o.g.colors.negative,";}&:hover,&._active{color:",o.g.colors.dominant_main,";&:before{top:1px;",o.g.near,":-28px;width:19px;height:19px;background-color:",o.g.colors.dominant_main,";}}}&.disabled>._entry>div{>._label:before{background-color:",o.g.colors.text_light_disabled,";}._label{color:",o.g.colors.text_light_disabled,";cursor:not-allowed;}}",""),O=(0,s.observer)((function(e){var t=e.activeSection,n=e.onSelectSection,r=(0,i.useContext)(l.q3),o=r.createMode&&"success"===r.status,s=y(r.errors.keys()),u=function(e){return s&&(0,l.HE)(e.fields,(function(e){return(null==e?void 0:e.name)&&s.includes(e.name)}))},v=b((0,i.useState)(!1),2),_=v[0],O=v[1],x=b((0,i.useState)(""),2),j=x[0],C=x[1];(0,d.iP)();var P=[],Z=new Map;return r.fields.map((function(e){var t,n;if(!k(e,r))return null;var o="section"===(null===(t=e.fields)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.type),i={id:e.title,name:e.title.caps(),sons:[]};Z.set(e.title,e),o&&e.fields.map((function(e){if(!k(e,r))return null;i.sons.push({id:e.title,name:e.title.caps(),sons:[]}),Z.set(e.title,e)})),P.push(i)})),(0,p.v0)(P),(0,a.tq)()?(0,h.tZ)(S,{activeSection:t,onSelectSection:n,sections:P,sectionIds:Z}):(0,h.BX)("div",{css:w,className:(0,a.AK)({disabled:o}),children:[r.title&&(0,h.tZ)("div",{className:"fp_title",children:r.title.caps()}),r.subTitle&&(0,h.tZ)("div",{className:"fp_sub_title",children:r.subTitle.caps()}),r.expandAndSearchSections&&(0,h.BX)("div",{className:"fp_search_line",children:[(0,h.BX)("div",{className:"fp_search_box",children:[(0,h.tZ)(m.I,{type:"search",className:"fp_search_input",value:j,onChange:function(e){return C(e)},placeholder:lng("search sections").caps()})," ",(0,h.tZ)(f.JO,{icon:"trash",className:"fp_search_clear",toolTip:lng("clear search"),smallButtonLike:!0,onClick:function(){return C("")}})]}),(0,h.tZ)(f.JO,{icon:_?"collapse_all":"expand_all",toolTip:_?lng("collapse all"):lng("expand all"),smallButtonLike:!0,onClick:function(){return O(!_)}})]}),r.fields.map((function(e){var i,l;if(!k(e,r))return null;var s=!r.status&&(e===t||e.fields.includes(t)),p="section"===(null===(i=e.fields)||void 0===i||null===(l=i[0])||void 0===l?void 0:l.type);return(0,h.tZ)("div",{className:"_entry",children:(0,h.BX)("div",{children:[(0,h.tZ)(c.LZ,{className:(0,a.AK)("_label",{error:u(e),_active:s}),onClick:function(){return!o&&n(p?e.fields.filter((function(e){return k(e,r)}))[0]:e)},children:e.title.caps()}),p&&(s||_||j)&&(0,h.tZ)("div",{children:e.fields.map((function(e){return k(e,r)?j&&!e.title.toLowerCase().includes(j.toLowerCase())?null:(0,h.tZ)(c.LZ,{className:(0,a.AK)("_label",{error:u(e),_active:e===t}),onClick:function(){return!o&&n(e)},children:(0,h.tZ)(g.y,{text:e.title.caps(),highlight:j})},e.title):null}))})]})},e.title)}))]})})),k=function e(t,n){return!(!t||"insert"in t&&!t.insert||"mod"in t&&!Blsm.checkMod(t.mod)||t.visible&&!t.visible(n.values,t.name))&&("section"!==t.type||t.fields.map((function(t){return e(t,n)})).filter((function(e){return!1!==e})).length>0)},x=(0,r.iv)("padding:10px 0;background-color:",o.g.colors.dominant_main_shade,";box-shadow:0 0 5px rgba(0,0,0,.3);position:fixed;left:0;right:0;top:",o.g.consts.TOP_BAR_HEIGHT,"px;z-index:",o.g.z.report_headers,";>.fp_title{color:",o.g.colors.text_main,";font-size:1.5rem;font-weight:600;text-align:center;}.fp_sub_title{color:",o.g.colors.text_sec,";font-size:1.2rem;font-weight:600;text-align:center;}>.fp_tree{text-align:center;}",""),S=function(e){var t=e.activeSection,n=e.onSelectSection,r=e.sections,o=e.sectionIds,s=(0,i.useContext)(l.q3),c=s.createMode&&"success"===s.status;return(0,h.BX)("div",{css:x,className:(0,a.AK)({disabled:c}),children:[s.title&&(0,h.tZ)("div",{className:"fp_title",children:s.title.caps()}),(0,h.tZ)("div",{className:"fp_tree",children:(0,h.tZ)(u.B,{tree:r,value:t.title,onChange:function(e){var t,r,i=o.get(e),a="section"===(null===(t=i.fields)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.type);return n(a?i.fields.filter((function(e){return!1!==e.insert}))[0]:i)},showSearch:!1})})]})}},45459:function(e,t,n){"use strict";n.d(t,{I:function(){return u}});var r=n(66975),o=n(98e3),i=n(27821),a=n(15560),l=n(35944),s=(0,i.observable)(new Map),c=function(e,t){if(s.has(e))return s.get(e);t&&e&&(s.set(e,!1),(0,o.SC)("generic/help_key",{data:{key:e}},(function(t){return s.set(e,"string"==typeof t?t:"error loading help")})))},u=(0,a.observer)((function(e){var t=e.helpKey,n=e.helpText;return(0,l.tZ)(r.JO,{className:"help-sign",icon:"menu_info",toolTip:n||c(t)||lng("loading...").caps(),onMouseEnter:function(){return c(t,!0)}})}))},3533:function(e,t,n){"use strict";n.d(t,{y:function(){return o}});var r=n(35944),o=function(e){var t=e.text,n=e.highlight.toLowerCase();if(!t.toLowerCase().includes(n))return t;var o=t.split(new RegExp("(".concat(n,")"),"gi"));return(0,r.BX)("span",{children:[" ",o.map((function(e,t){return e.toLowerCase()===n?(0,r.tZ)("mark",{children:e},t):(0,r.tZ)("span",{children:e},t)}))," "]})}},21810:function(e,t,n){"use strict";n.d(t,{Hr:function(){return c}});var r=n(70917),o=n(16920),i=n(35944);function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(){return(s=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var c=function(e){var t=s({},e),n=(0,r.iv)("margin:10px 10px;height:0;border-bottom:1px solid ",o.g.colors.separator_light,";","");return(0,i.tZ)("div",function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({css:n},t))}},66975:function(e,t,n){"use strict";n.d(t,{An:function(){return C},JO:function(){return w},Mv:function(){return P},TG:function(){return T},YG:function(){return v},e$:function(){return O},gT:function(){return x},vB:function(){return j},y$:function(){return Z}});var r=n(70917),o=n(71134),i=n(45697),a=n(73105),l=n(16920),s=(n(57882),n(40441)),c=n(22698),u=n(51125),p=n(86344),d=n(42755),f=n(35944),m=["icon","className","iconClass","toolTip","badge","alertBadge","buttonLike","smallButtonLike","color","balloonAnchor","strikethrough","disabled","spaceAfter","spaceBefore"];function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v=(0,r.iv)("display:inline-block;position:relative;&.buttonLike,&.smallButtonLike{border-radius:50%;padding:9px;line-height:1em;&.disabled{pointer-events:none;}&.smallButtonLike{padding:5px;}i{width:1em;text-align:center;}&:not(.disabled){&:hover{color:",l.g.colors.blue,";background-color:",l.g.colors.blue_shade,";}}}&._clickable{cursor:pointer;}&.grab{cursor:grab;}._badge{position:absolute;top:-1em;",l.g.classes.far("-1em"),";z-index:1;",l.g.classes.circled_text,";font-size:.8rem;background-color:",l.g.colors.bg_main,";color:",l.g.colors.text_sec,";border:2px solid ",l.g.colors.text_sec,";transition:opacity .3s ease-in-out;&._red{border-color:#FC5959;color:#FC5959;}&._empty{opacity:0;}}&.Icon-empty i{width:12px;height:1em;display:inline-block;}&.strikethrough{background:linear-gradient(to right top, transparent 47%, currentColor 50%, currentColor 53%, transparent 56%);::before{opacity:.5;}}",""),_=["checkbox","checkbox_checked","radio","radio_checked"],w=function(e){var t,n=e.icon,r=e.className,i=e.iconClass,p=e.toolTip,d=e.badge,g=e.alertBadge,b=e.buttonLike,w=e.smallButtonLike,O=e.color,k=e.balloonAnchor,x=void 0===k||k,S=e.strikethrough,j=e.disabled,C=e.spaceAfter,P=e.spaceBefore,Z=y(e,m),B=(0,f.tZ)("i",{className:(0,o.AK)((0,u.wj)(n,l.g.isRTL),i,{"balloon-anchor":x})}),T=void 0!==d&&(0,f.tZ)("div",{className:(0,o.AK)("_badge",{_red:g,_empty:0===parseInt(d)}),children:(0,o.lo)(d)}),E={css:[v,C?l.g.classes.margin_far(l.g.consts.ICON_MARGIN):void 0,P?l.g.classes.margin_near(l.g.consts.ICON_MARGIN):void 0],className:(0,o.AK)(!p&&["Icon","Icon-"+n,r],"el_icon",{_clickable:!j&&(Z.onClick||Z.href||_.includes(n)),grab:!j&&"move"===n,strikethrough:S,buttonLike:b,disabled:j,smallButtonLike:w}),style:O?{color:O}:void 0};return t=Z.href?(0,f.BX)(s.A,h(h(h({},Z),E),{},{children:[B,T]})):(0,f.BX)(c.LZ,h(h(h({},Z),E),{},{children:[B,T]})),p?(0,f.tZ)(a.u,{text:p,className:(0,o.AK)("Icon","Icon-"+n,r),children:t}):t},O=function(e){return(0,f.tZ)(w,h(h({},e),{},{icon:"empty"}))},k=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"1em";return(0,r.iv)("display:inline-block;width:",t,";height:",t,";border-radius:50%;background-color:",e,";","")},x=function(e){var t=e.color,n=e.size;return(0,f.tZ)("div",{css:k(t,n)})},S={name:"18mpvln",styles:"display:inline-block;font-weight:normal"},j=function(e){var t=e.depth,n=void 0===t?0:t;return(0,f.BX)("div",{css:S,children:[" ".repeat(2*n),l.g.isRTL?(0,f.tZ)(f.HY,{children:"↲"}):(0,f.tZ)(f.HY,{children:"↳"})," "]})},C=function(e){switch(e.type){case"dot":default:return(0,f.tZ)(f.HY,{children:" • "})}};C.propTypes={type:i.string};var P=function(e){return(0,r.iv)("position:absolute;top:2px;",e?l.g.far:l.g.near,":2px;color:",l.g.colors.dominant_main,";z-index:1;","")},Z=(0,r.iv)("position:absolute;top:2px;",l.g.far,":2px;color:",l.g.colors.dominant_main,";z-index:1;",""),B=(0,r.iv)("&:hover{.el_icon,&.el_icon{background-color:",(0,p.HO)(l.g.theme.color_1,.15),";color:#fff;}}&._disabled{opacity:.5;background-color:",(0,p.HO)(l.g.theme.color_1,.15),";color:white;}",""),T=function(e){var t=e.icon,n=e.className,r=e.onClick,i=e.disabled,a=e.negativeColors,s=a?"white":l.g.theme.color_1,c=a?l.g.theme.color_1:"white";return(0,f.tZ)(d.ZT,{css:B,bgColor:c,color:s,icon:t,className:(0,o.AK)(n,{_disabled:i}),onClick:r,disabled:i,size:30})}},92464:function(e,t,n){"use strict";n.d(t,{VK:function(){return c},XI:function(){return l},kj:function(){return s}});var r=n(70917),o=n(16920),i=n(71134),a=(n(57882),n(35944)),l=function(e){var t=e.size,n=e.shadowed,l=e.className,s=e.onClick,c=e.img,u=e.bgColor,p=e.textFallBack,d=e.overlayText,f=e.contain,m=void 0===f?"cover":f,g=(0,r.iv)("display:inline-block;vertical-align:middle;position:relative;min-width:",t[0],";height:",t[1],";line-height:",t[1],";text-align:center;border-radius:",o.g.consts.IMG_BORDER_RADIUS,"px;",n?"box-shadow: 0 2px 4px rgba(0,0,0,.4)":"",";width:",t[0],";height:",t[1],";flex-basis:",t[0],";background-color:",u,";background-image:",c?"url('".concat(c,"')"):void 0,";background-size:",m,";background-repeat:no-repeat;background-position:center;&._clickable{cursor:pointer;}.overlayText{display:block;position:absolute;bottom:0;left:0;height:fit-content;max-height:33%;overflow-y:auto;overflow-x:hidden;width:100%;font-size:.8em;line-height:1;min-height:1.7em;padding:3px 10px;text-overflow:ellipsis;background-color:",o.g.colors.half_black,";color:",o.g.colors.dominant_white,";}","");return(0,a.BX)("div",{css:g,className:(0,i.AK)(l,{_clickable:s}),onClick:s,children:[!c&&p,d&&(0,a.tZ)("div",{className:"overlayText",children:d})]})},s=6,c=function(e){var t,n=e.layout,o=e.maxPhotos,i=e.height,l=e.width,c=e.children;if(o||(o=s),!(null!==(t=c)&&void 0!==t&&t.length)>0)return null;c.length>o&&(c=c.slice(0,o));var u,p=c.length,d={narrow:{1:{columns:1,rows:1,nth:[]},2:{columns:1,rows:2,nth:[]},3:{columns:2,rows:3,nth:["grid-column-end: span 2;grid-row-end: span 2;"]},4:{columns:2,rows:2,nth:[]},5:{columns:2,rows:4,nth:["grid-column-end: span 2; grid-row-end: span 2;"]},6:{columns:2,rows:3,nth:[]}},wide:{1:{columns:1,rows:1,nth:[]},2:{columns:2,rows:1,nth:[]},3:{columns:2,rows:2,nth:["grid-row-end: span 2;"]},4:{columns:4,rows:2,nth:["grid-column-end: span 2; grid-row-end: span 2;","grid-column-end: span 2;"]},5:{columns:4,rows:2,nth:["grid-column-end: span 2; grid-row-end: span 2;"]},6:{columns:3,rows:2,nth:[]}},mobile:{1:{columns:1,rows:1,nth:[]},2:{columns:1,rows:2,nth:[]},3:{columns:2,rows:3,nth:["grid-column-end: span 2;grid-row-end: span 2;"]},4:{columns:2,rows:2,nth:[]},5:{columns:2,rows:6,nth:["grid-row-end: span 3;","grid-row-end: span 2;","grid-row-end: span 2;","grid-row-end: span 3;","grid-row-end: span 2;"]},6:{columns:2,rows:3,nth:[]}}}[n][p]||[];return(0,a.tZ)("div",{css:(u={height:i,width:l},(0,r.iv)("display:grid;height:",u.height||"100%",";width:",u.width||"100%",";grid-template-columns:repeat(",d.columns,", 1fr);grid-template-rows:repeat(",d.rows,", 1fr);grid-columns:repeat(",d.columns,", 1fr);grid-rows:repeat(",d.rows,", 1fr);grid-auto-flow:row;justify-items:stretch;align-items:stretch;justify-content:stretch;align-content:stretch;grid-gap:4px;",d.nth.map((function(e,t){return"> *:nth-child(".concat(t+1,") { ").concat(e,"}")})),";","")),children:c})}},65405:function(e,t,n){"use strict";n.d(t,{X:function(){return w},Z:function(){return k}});var r=n(66975),o=n(87363),i=n(70917),a=n(16920),l=n(71134),s=n(39952),c=n(45459),u=n(35944),p=["value","label","onChange","checkboxValue","checkedWithGreaterValue","color","disabled","className","helpKey","reversed","selfState","iconTrue","iconFalse"],d=["value","onChange","checkboxValue","disabled","label"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v=(0,i.iv)("user-select:none;display:inline-flex;align-items:flex-start;position:relative;>input{display:none;}>span{margin-top:9px;}.help-sign{color:",a.g.colors.text_placeholder,";",a.g.classes.margin_near(".5em"),";margin-top:9px;}",""),_={name:"1otlq80",styles:"font-size:1.3rem"},w=function(e){var t=e.value,n=e.label,i=e.onChange,l=e.checkboxValue,d=e.checkedWithGreaterValue,f=e.color,g=e.disabled,b=e.className,w=e.helpKey,O=e.reversed,k=e.selfState,x=void 0!==k&&k,S=e.iconTrue,j=void 0===S?"checkbox_checked":S,C=e.iconFalse,P=void 0===C?"checkbox":C,Z=y(e,p),B=(0,o.useRef)(null),T=h((0,o.useState)(!1),2),E=T[0],I=T[1],A=x?E:t,D=l?d?l<=A:l===A:!!A&&"0"!==A;return(0,u.BX)("label",{css:v,className:b,onClick:function(e){return e.stopPropagation()},role:"checkbox","aria-checked":D^O?"true":"false",tabIndex:0,onKeyDown:function(e){var t;return" "===e.key&&(e.preventDefault(),null===(t=B.current)||void 0===t?void 0:t.click())},children:[(0,u.tZ)(r.JO,{icon:D^O?j:P,css:_,color:g?a.g.colors.disabled_input_cb:f||a.g.colors.green,buttonLike:!0,disabled:g}),(0,u.tZ)("input",m(m({},Z),{},{ref:B,type:"checkbox",value:l&&!0!==l||1,checked:D,disabled:g,onChange:i?function(e){var t=e.target.checked?l||1:"";return x&&I(!0===l?!!t:t),i(!0===l?!!t:t)}:void 0})),"string"==typeof n?(0,u.tZ)(s.A,{label:n,breakLine:!0}):n,w&&(0,u.tZ)(c.I,{helpKey:w})]})},O=(0,i.iv)('user-select:none;display:inline-flex;direction:ltr;._slider{box-sizing:content-box;cursor:pointer;width:2em;padding:0.25em;border-radius:2.25em;display:block;background-color:#ccc;transition:.4s;&:before{display:block;content:""!important;height:1em;width:1em;background-color:white;transition:.4s;border-radius:50%;}&._checked{background-color:',a.g.colors.dominant_main,";&:before{transform:translateX(1em);}}&.disabled{cursor:default;&:before{background-color:",a.g.colors.disabled_input_cb,";}}}>.InputLabel{margin-",a.g.near,":1ch;}>input{display:none;}",""),k=function(e){var t=e.value,n=e.onChange,r=e.checkboxValue,o=e.disabled,i=e.label,a=y(e,d),c=r?r===t:!!t;return(0,u.BX)("label",{css:O,children:[(0,u.tZ)("div",{className:(0,l.AK)("_slider",{_checked:c,disabled:o})}),(0,u.tZ)("input",m(m({},a),{},{type:"checkbox",value:r||1,checked:c,disabled:o,onChange:n?function(e){return n(e.target.checked?r||1:"")}:void 0})),"string"==typeof i?(0,u.tZ)(s.A,{label:i,breakLine:!0}):i]})}},39191:function(e,t,n){"use strict";n.d(t,{T:function(){return g},z:function(){return b}});var r=n(87363),o=n(70917),i=n(70422),a=n.n(i),l=n(16920),s=n(92945),c=n(85311),u=n(86344),p=n(66975),d=n(71134),f=n(35944);var m=(0,o.iv)("display:inline-block;position:relative;>._picker{background-color:",l.g.colors.bg_main,";border:1px solid #a9a9a9;position:fixed;z-index:1;}.random-color{position:absolute;",l.g.far,":8px;top:8px;}",""),g=function(e){var t=e.name,n=e.value,r=e.onFocus,o=e.onBlur,i=e.placeholder,l=e.onChange,c=e.disabled,g=e.alpha,h=e.random,y=function(){if((0,u.BB)(n))try{new(a().Color)(n)}catch(e){l("")}else l("");o&&o()},v=(0,s.v)({onFocus:r,handleBlur:y,noMinWidth:!0}),_=v.opened,w=v.toggleDD,O=v.selectRef,k=v.labelRef,x=v.ddRef,S=n||i,j=(0,u.BB)(S)?S:"white",C=(0,u.ou)(j);return(0,f.BX)("div",{css:m,className:"image_input",ref:O,children:[(0,f.tZ)("input",{type:"text",name:t,value:n,disabled:c,placeholder:i,onBlur:y,ref:k,onChange:function(e){return l(e.target.value)},onClick:function(){return w(!0)},style:{backgroundColor:j,color:C}}),h&&(0,f.tZ)(p.JO,{className:"random-color",icon:"shuffle",smallButtonLike:!0,onClick:function(){return l((0,d.p)())},toolTip:lng("randomize")}),_&&(0,f.tZ)("div",{className:"_picker",ref:x,children:(0,f.tZ)(b,{value:S,onSelect:l,alpha:g,format:g?"rgb":"hex"})})]})},h={name:"17ru2lz",styles:".picker_done{display:none;}.picker_sample{height:20px;}.picker_alpha .picker_selector{right:-14px;}.suggested-colors{display:flex;padding:0.4em 0.6em;.color-pick{width:1em;height:1em;cursor:pointer;margin:1px;}.color-clear{width:1em;height:1em;cursor:pointer;margin:1px;text-align:center;position:relative;&:before,&:after{position:absolute;content:' ';height:1em;width:1px;background-color:#333;}&:before{transform:rotate(45deg);}&:after{transform:rotate(-45deg);}}}"},b=function(e){var t=e.value,n=e.format,o=void 0===n?"rgb":n,i=e.alpha,s=e.onSelect,u=(0,r.useRef)(null),p=(0,r.useRef)(null);(0,r.useEffect)((function(){p.current=new(a())({parent:u.current,popup:!1,alpha:i,editorFormat:o,editor:!1}),p.current.onChange=function(e){var t;t="hex"===o?i?e.hex():e.hex().slice(0,-2):i?e.rgbaString():e.rgbString(),s(t)}}),[]),(0,r.useEffect)((function(){try{var e;null===(e=p.current)||void 0===e||e.setColor(t,!0)}catch(e){}}),[t]);var d=l.g.colors.set,m=function(e){var t;null===(t=p.current)||void 0===t||t.setColor(e,!0),s(e)};return(0,f.BX)("div",{css:h,children:[(0,f.tZ)("div",{ref:u}),(0,f.BX)("div",{className:"suggested-colors",children:[d.slice(0,11).map((function(e,t){return(0,f.tZ)("div",{className:"color-pick",style:{backgroundColor:e},onClick:function(){return m(e)}},t)})),(0,f.tZ)(c.zh,{}),(0,f.tZ)("div",{className:"color-clear",onClick:function(){return m("")}})]})]})}},62391:function(e,t,n){"use strict";n.d(t,{R:function(){return j},W:function(){return S}});var r=n(70917),o=n(76627),i=n.n(o),a=n(25690),l=n(87363),s=n(16920),c=n(92945),u=n(70081),p=n(66975),d=n(70961),f=n(71134),m=n(35944),g=["onBlur","onFocus","onChange","value","withTime","defaultTime","minDate","maxDate","disabled","readOnly"];function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function b(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){y(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function _(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return w(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var O=(0,r.iv)("width:100%;>input{width:100%;}>._picker{background-color:",s.g.colors.bg_main,";border:1px solid #a9a9a9;position:fixed;z-index:2;padding:10px;display:flex;>.time-picker{",s.g.classes.margin_near("15px"),";}._hours,._minutes{width:56px;}}.clear-date{position:absolute;top:12px;",s.g.classes.far("8px"),";color:",s.g.colors.disabled_text,";}",""),k=Blsm.prm.date_moment_format,x=function(e,t,n){var r=e.date;return e.date&&t&&(r+=" "+((0,f.kE)(e.hour)?e.hour:(null==n?void 0:n[0])||"0").toString().padStart(2,"0")+":"+((0,f.kE)(e.minute)?e.minute:(null==n?void 0:n[1])||"0").toString().padStart(2,"0")),r},S=function(e){var t=e.onBlur,n=e.onFocus,r=e.onChange,o=e.value,s=e.withTime,h=e.defaultTime,y=e.minDate,w=e.maxDate,S=e.disabled,C=e.readOnly,P=v(e,g),Z=_((0,l.useState)(o),2),B=Z[0],T=Z[1],E=(0,c.v)({onFocus:n,onBlur:t}),I=E.opened,A=E.toggleDD,D=E.selectRef,R=E.labelRef,N=E.ddRef,z=(0,u.tm)(),M=function(e){var t=_((e||"").split(" "),2),n=t[0],r=t[1],o=_((void 0===r?"":r).split(":"),2),i=o[0],a=o[1],l=parseInt(void 0===a?"":a),s=parseInt(i);return{date:n,hour:(0,f.kE)(s)?s:"",minute:(0,f.kE)(l)?l:""}}(B);(0,l.useMemo)((function(){return document.activeElement!==R.current&&o!==B&&T(o)}),[o]);var F=function(e){if(e.date||(0,f.kE)(e.hour)||(0,f.kE)(e.minute)||e.clear){e.clear&&(e={date:"",hour:"",minute:""}),e.date||M.date||(e.date="__/__/____");var t=x(Object.assign({},M,e),s,h);r(t),T(t)}},q=function(){if(j(M.date))if(M.hour<0||M.hour>23||M.minute<0||M.minute>59)F({hour:0,minute:0});else{var e=x(M,s,h);e!==B&&r(e)}else F({date:"",hour:"",minute:""})};(0,l.useEffect)((function(){return function(){return!z.current&&q()}}));var X=moment(M.date,k);X.utcOffset(Blsm.prm.timezone_offset);var L=X.isValid()?X.startOf("day"):"",U=(0,f.kE)(M.hour)?M.hour:parseInt(null==h?void 0:h[0]),V=(0,f.kE)(M.minute)?M.minute:parseInt(null==h?void 0:h[1]);return(0,m.BX)("div",{css:O,className:"select_date",ref:D,tabIndex:S?void 0:"0",onKeyDown:function(e){return"Tab"===e.key&&(null!=t&&t(),A(!1))},children:[(0,m.tZ)(i(),b(b({},P),{},{mask:"99/99/9999"+(s?" 99:99":""),type:"text",onFocus:void 0,value:B,disabled:S,readOnly:C,onChange:function(e){var t=e.target.value,n=t.includes("_")?"":t;T(t),n!==o&&r(n)},onBlur:q,inputRef:function(e){return R.current=e},onClick:function(){return A(!0)}})),I&&!S&&!C&&(0,m.BX)("div",{className:"_picker",ref:N,children:[(0,m.tZ)(a.M,{activeDate:L,onDateSelect:function(e){return e&&F({date:e.format(k)})},minDate:(0,f.g4)(y),maxDate:(0,f.g4)(w),inDropDown:!0}),s&&(0,m.tZ)(d.j,{opened:I,activeTime:{hour:U,minute:V},onTimeChange:F})]}),o&&!S&&!C&&(0,m.tZ)(p.JO,{icon:"close",className:"clear-date",onClick:function(){return F({clear:!0})}})]})},j=function(e){var t=moment(e,k);return!(e.includes("_")||!t.isValid()||t.year()<1970||t.year()>2037)}},86134:function(e,t,n){"use strict";n.d(t,{S:function(){return O}});var r=n(70917),o=n(66975),i=n(16920),a=n(39952),l=n(87363),s=n(7392),c=n(24210),u=n(71134),p=n(35944),d=["value","onChange","label","disabled","maxFileSizeStr","multiFile","readOnly","maxSize","maxFiles"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var w=(0,r.iv)("padding-bottom:.8em;>.label_cont{color:",i.g.colors.text_placeholder,";margin-bottom:14px;>.InputLabel{font-weight:600;}}.file_warning{color:",i.g.colors.negative,";}",""),O=function(e){var t=e.value,n=e.onChange,r=e.label,i=e.disabled,f=e.maxFileSizeStr,g=e.multiFile,y=e.readOnly,v=e.maxSize,O=e.maxFiles,k=_(e,d),x=b((0,l.useState)(null),2),S=x[0],j=x[1],C=(0,l.useRef)(),P=g?t:(0,c.DW)(t)?[t]:[],Z=P?null==P?void 0:P.filter((function(e){return!e.delete})).length:0;return(0,p.BX)("div",{css:w,className:"file_input",children:[(0,p.BX)("div",{className:"label_cont",children:["string"==typeof r?(0,p.tZ)(a.A,{label:r}):r,!y&&f?" (".concat(lng("max size").caps(),": ").concat(f,")"):v?" (".concat(lng("max size").caps(),": ").concat((0,u.bQ)(v),")"):"",!y&&O?" (".concat(lng("max number of files").caps(),": ").concat(O,")"):""]}),P.length>0&&P.filter((function(e){return 1!==e.delete})).map((function(e,r){return(0,p.BX)("div",{children:[e.link&&(0,p.tZ)(o.JO,{icon:"download",toolTip:lng("download"),buttonLike:!0,href:e.link,download:!0}),!i&&!y&&(0,p.tZ)(o.JO,{icon:"trash",onClick:function(){return function(e){if(g){var r=[];t.forEach((function(t){t!==e?r.push(t):e.file_id&&r.push(m(m({},t),{},{delete:1}))})),n(r)}else n(c.ip)}(e)},buttonLike:!0})," ",e.name||e.file_name]},r)})),(!(0,c.DW)(t)||g)&&(0,p.BX)("div",{children:[!y&&(0,p.tZ)(s.l,{theme:"outlined",disabled:i||Z>=O,onClick:function(){return C.current.click()},children:lng("choose file").caps()}),(0,p.tZ)("input",m(m({type:"file"},k),{},{onChange:function(e){var r=e.currentTarget.files[0];r&&(v&&r.size>v?j("".concat(lng("file is too big").caps(),": ").concat((0,u.bQ)(r.size)," (").concat(lng("allowed"),": ").concat((0,u.bQ)(v),")")):(j(""),r.id=Math.random(),e.currentTarget.value=null,n(g?[].concat(h(t),[r]):r)))},ref:C,style:{display:"none"}})),S&&(0,p.BX)("span",{className:"file_warning",children:[" ",(0,p.tZ)(o.JO,{icon:"sign_notification"})," ",S]})]})]})}},44050:function(e,t,n){"use strict";n.d(t,{a:function(){return y}});var r=n(87363),o=n(16920),i=n(70917),a=n(66975),l=n(79160),s=n(98e3),c=n(71134),u=n(39952),p=n(28534),d=n(24210),f=n(45459),m=n(35944);function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var b=(0,i.iv)("padding-bottom:.8em;>._label{color:",o.g.colors.text_placeholder,";margin-bottom:14px;font-weight:600;}>._bg{width:240px;height:240px;margin:0 auto;background-color:",o.g.colors.bg_1,";background-size:cover;background-position:center;border-radius:10px;overflow:hidden;position:relative;>img,.replace{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);}>img{max-width:100%;max-height:100%;height:auto;width:auto;}>.replace{display:none;width:fit-content;color:",o.g.colors.dominant_main,";background:rgba(255, 255, 255, .9);padding:14px;border-radius:10px;cursor:pointer;&:hover{",o.g.classes.shadow_strong,";}}>.remove{position:absolute;top:0;",o.g.far,":0;color:#FFF;}&:hover>.replace{display:inline-block;}}.help-sign{",o.g.classes.margin_near("10px"),";}",""),y=function(e){var t=e.value,n=e.onChange,i=e.label,h=e.disabled,y=e.replaceSrc,v=void 0===y?"media_manager":y,_=e.uploadType,w=e.noStretch,O=e.recommendedSize,k=void 0===O?[]:O,x=e.maxFileSize,S=e.removeButton,j=e.error,C=e.required,P=e.helpKey,Z=e.tabs,B=g((0,r.useState)(!1),2),T=B[0],E=B[1],I=(0,r.useRef)(),A=function(e){if(e)if("upload_temp"===v)(0,s.SC)("generic/load_temp_file",{method:"POST",data:{file:e,type:_}},n);else if("file_object"===v){if(x&&e.size>x)return(0,p.nb)(lng("file may not exceed %s",(0,c.bQ)(x)).caps());n(e)}},D=t instanceof File?URL.createObjectURL(t):(0,c.Kn)(t)?t.tmpUrl:t===d.ip?"":o.g.func.imgUrl(t)||t,R=g(k,2),N=R[0],z=R[1];N&&void 0===z&&(z=N),i&&N&&z&&(i+=" (".concat(N,"x").concat(z,")"));var M={};return w||(M.backgroundImage='url("'.concat(D,'")')),z&&(M.height=Math.min(240,Math.max(60,z))+"px"),(0,m.BX)("div",{css:b,className:"image_input",children:[i&&(0,m.tZ)(u.A,{label:i,error:j,required:C}),P&&(0,m.tZ)(f.I,{helpKey:P}),T&&(0,m.tZ)(l.b,{onClose:function(){return E(!1)},onSelect:function(e){return n(null==e?void 0:e.imgtag)},tabs:Z,selectedItem:t}),(0,m.BX)("div",{className:"_bg",style:M,children:[w&&(0,m.tZ)("img",{src:D}),!h&&(0,m.BX)("div",{className:"replace",onClick:function(){"media_manager"===v?E(!0):I.current.click()},children:["media_manager"!==v&&(0,m.tZ)("input",{type:"file",onChange:function(e){return A(e.currentTarget.files[0])},ref:I,style:{display:"none"},accept:Blsm.prm.extensions.img.map((function(e){return"."+e})).join(",")}),(0,m.tZ)(a.JO,{icon:"edit"}),"  ",lng("replace image").caps()]}),!h&&S&&D&&(0,m.tZ)(a.JO,{icon:"trash",className:"remove",buttonLike:!0,onClick:function(){return n("media_manager"===v?null:d.ip)}})]})]})}},43698:function(e,t,n){"use strict";n.d(t,{I:function(){return pe}});var r=n(87363),o=n(76627),i=n.n(o),a=n(71134),l=n(86303),s=n(7093),c=n(65405),u=n(39961),p=n(62391),d=n(58714),f=n(59218),m=n(86134),g=n(74925),h=n(44050),b=n(39191),y=n(5474),v=n(23629),_=n(7477),w=n(98e3),O=n(35944),k=["value","onChange","onSelect","onFocus","onBlur","textClear","disableTextChange","suggest","inline","showId"];function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var C=function(e){var t=e.value,n=e.onChange,o=e.onSelect,i=e.onFocus,l=e.onBlur,s=e.textClear,c=e.disableTextChange,u=e.suggest,p=e.inline,d=e.showId,f=j(e,k),m=x((0,r.useState)(t),2),g=m[0],h=m[1],b=(0,r.useCallback)((null==u?void 0:u.getData)||(0,a.pR)((function(e,t){return(0,w.SC)("search/field_autocomplete",{data:{name:u.field||f.name,table:u.table,domain:u.domain||Blsm.user.domain_id,term:e}},t)})),[]),y=function(e){n(e),h(e)};return(0,O.tZ)(_.Q,{getData:b,onTextChange:!c&&y,onSelect:function(e){y(e.value||e.id),(0,a.g4)(o,null,[e])},onFocus:i,onBlur:l,block:!p,showId:d,value:g,textClear:!!s,inputProps:f})},P=n(5293),Z=n(39952),B=n(49039),T=n(40493),E=(n(57882),n(70961)),I=n(17381),A=n(80501),D=n(27821),R=n(15560),N=n(33346),z=n(39483),M=n(40965),F=n(68567),q=n(66975),X=n(70917),L=n(16920),U=["value","messageType","messageTypes"];function V(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return H(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return H(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var $=(0,D.observable)(new Map),Y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){};if($.has(e))t($.get(e));else{$.set(e,!1);var n="";n=(0,a.kE)(e)?"/id="+e:"/default="+e,(0,w.SC)("systemMessages/message_data"+n,{},(function(n){$.set(e,n),t(n)}))}},Q=(0,X.iv)("display:flex;flex-grow:1;flex-shrink:0;>*+*{",L.g.classes.margin_far("1em"),";}>span{width:100%;}>.Icon-preview{flex-shrink:0;margin:auto;}",""),ee=function(e){var t=e.value,n=e.messageType,r=e.messageTypes,o=K(e,U);return(0,O.BX)("div",{css:Q,children:[(0,O.tZ)(g.Dd,J({value:t,searchData:function(e,t){(0,w.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)},onValueChange:function(e){return Y(e)},buttons:[{Render:re}]},o)),!t&&(n||r)&&(0,O.tZ)(re,{item:{messageType:n,messageTypes:r}})]})},te=(0,R.observer)((function(e){var t,n,o,i,a=V((0,r.useState)(),2),l=a[0],s=a[1];if(e.default)return(0,O.tZ)(N.$0,{title:lng("default system message"),children:(0,O.BX)(N.$0,{title:null==e?void 0:e.title,children:[(0,O.tZ)(z.m,{children:(0,O.tZ)("h1",{children:null==e?void 0:e.h1})}),(0,O.tZ)(z.m,{children:(0,O.tZ)("h2",{children:null==e?void 0:e.h2})}),(0,O.tZ)(z.m,{children:(0,O.tZ)(M.x,{content:null==e?void 0:e.message})})]})});var c=Object.keys(e.domain_languages||{}).filter((function(t){var n,r,o,i;return!!(null!==(n=e["mail_"+t])&&void 0!==n&&n.title||null!==(r=e["mail_"+t])&&void 0!==r&&r.h1||null!==(o=e["mail_"+t])&&void 0!==o&&o.h2||null!==(i=e["mail_"+t])&&void 0!==i&&i.message)})).map((function(t){return{val:t,label:e.domain_languages[t]}})),u=(0,r.useMemo)((function(){return(c||[]).find((function(e){return(null==e?void 0:e.val)===l}))}),[l,c]);return(0,r.useEffect)((function(){var e;c&&!l&&s(null===(e=c[0])||void 0===e?void 0:e.val)}),[c]),(0,O.BX)(N.$0,{title:e.c_email_name,children:[c.length>1&&(0,O.tZ)(N.gN,{input:{type:"select",label:lng("language"),options:c},value:l,onChange:function(e){return s(e)}}),l&&(0,O.BX)(N.$0,{title:null===(t=e["mail_"+l])||void 0===t?void 0:t.title,children:[(0,O.tZ)(z.m,{children:(0,O.tZ)("h1",{children:null===(n=e["mail_"+l])||void 0===n?void 0:n.h1})}),(0,O.tZ)(z.m,{children:(0,O.tZ)("h2",{children:null===(o=e["mail_"+l])||void 0===o?void 0:o.h2})}),(0,O.tZ)(z.m,{children:(0,O.tZ)(M.x,{content:null===(i=e["mail_"+l])||void 0===i?void 0:i.message})})]}),1===c.length&&(0,O.tZ)(z.m,{children:(0,O.tZ)("small",{children:lng("only available in %s|language",null==u?void 0:u.label).caps()})}),0===c.length&&lng("system message is empty").caps()]})})),ne=function(e){var t,n=e.messages,o=e.getMessage,i=V((0,r.useState)(null===(t=n[0])||void 0===t?void 0:t.val),2),l=i[0],s=i[1],c=V((0,r.useState)(),2),u=c[0],p=c[1],d=(0,r.useMemo)((function(){return n.map((function(e){return J(J({},e),{},{label:(0,a.g4)(e.label)})}))}),[]);return(0,r.useEffect)((function(){return o(l,(function(e){return p(e)}))}),[l]),(0,O.BX)("div",{children:[(0,O.tZ)(N.gN,{input:{options:d,type:"select",label:lng("to|person")},value:l,onChange:s}),u&&(0,O.tZ)(te,J(J({},u),{},{default:!0}))]})},re=(0,R.observer)((function(e){var t=e.item;return(0,O.tZ)(q.JO,{icon:"preview",buttonLike:!0,onClick:function(){if((0,a.g4)(t.messageTypes))(0,F.qR)((0,O.tZ)(ne,{messages:(0,a.wd)((0,a.g4)(t.messageTypes)),getMessage:function(e,t){return Y(e,t)}}),{title:lng("system message"),width:"700px"});else{var e=(0,a.kE)(t.id)?t.id:(0,a.g4)(t.messageType);Y(e,(function(e){return(0,F.qR)((0,O.tZ)(te,J(J({},e),{},{default:!(0,a.kE)(t.id)})),{title:lng("system message"),width:"700px"})}))}}})})),oe=void 0;function ie(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ie(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ie(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ce(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=["hidden","checkbox","toggle","radio","radioset","range","file","tags","notification","single_item","multiple_items","img","component","toggle","switcher","signpad"],pe=(0,r.memo)((function(e){var t=e.type,n=e.value,o=e.options,_=e.onChange,w=e.label,k=e.focusOnShow,x=e.mask,S=e.suggest,j=e.required,D=e.error,R=e.onBlur,N=e.onFocus,z=e.checkboxValue,M=e.checkedWithGreaterValue,F=e.emptyOption,q=e.wrapped,X=e.inline,L=e.skinny,U=e.minimalist,V=e.labelMargin,H=e.helpKey,G=e.maxWidth,J=e.nameField,W=se((0,r.useState)(!1),2),K=W[0],$=W[1],Y=Object.assign({},e);q&&void 0===Y.value&&(Y.value=""),Y.onFocus=function(e){return!K&&($(!0),null==N?void 0:N(e))},Y.onBlur=function(e){return K&&($(!1),null==R?void 0:R(e))},Y.className=(0,a.AK)(e.className,"blsm-input",{"blsm-input-wrapped":q}),["insert","label","visible","disable","options","required","validate","focusOnShow","remoteValidate","nameField","mod","suggest","mask","wrapped","required","error","inline","skinny","minimalist","labelMargin","helpKey","maxWidth","checkboxValue","checkedWithGreaterValue","emptyOption"].forEach((function(e){return delete Y[e]})),w&&["checkbox","toggle","radio","range","file","switcher","signpad"].includes(t)&&(Y.label=(0,O.tZ)(Z.A,{label:w,error:D,required:j})),"select"!==t&&Y.emptyOption&&(console.warn("emptyOption is irrelevant for input type",e),delete Y.emptyOption);var Q=k?a.Du:void 0,te=function(){switch(t){case"richtext":return(0,O.tZ)(s.H,ae(ae({},Y),{},{focusOnShow:k}));case"textarea":return(0,O.tZ)("textarea",ae(ae({},Y),{},{onChange:_?function(e){return _(e.target.value)}:void 0,ref:Q}));case"select_multi":return(0,O.tZ)(l._,ae(ae({},Y),{},{options:(0,a.g4)(o,oe,[e]),focusOnShow:k}));case"select":return(0,O.tZ)(y.P,ae(ae({},Y),{},{options:(0,a.wd)((0,a.g4)(o,oe,[e])),emptyOption:F}));case"radioset":return(0,O.tZ)(v.M,ae(ae({},Y),{},{options:o}));case"checkbox":return(0,O.tZ)(c.X,ae(ae({},Y),{},{helpKey:H,checkboxValue:z,checkedWithGreaterValue:M}));case"polar":return(0,O.tZ)(y.P,ae(ae({},Y),{},{options:(0,a.g4)([{val:!1,label:lng("no")},{val:!0,label:lng("yes")}],oe,[e])}));case"toggle":return(0,O.tZ)(c.Z,ae({},Y));case"radio":return(0,O.tZ)(u.Y,ae(ae({},Y),{},{helpKey:H}));case"date":case"date_time":return(0,O.tZ)(p.W,ae(ae({},Y),{},{withTime:"date_time"===t}));case"time":return(0,O.tZ)(E.M,ae({},Y));case"number":return(0,O.tZ)(d.A,ae({},Y));case"range":return(0,O.tZ)(f.L,ae({},Y));case"switcher":return Y.showValueLabel=!(0,a.DM)(Y.showValueLabel)||Y.showValueLabel,(0,O.tZ)(T.T,ae(ae({},Y),{},{options:o}));case"file":return(0,O.tZ)(m.S,ae({},Y));case"signpad":return(0,O.tZ)(I.$,ae({error:D},Y));case"tags":return(0,O.tZ)(g.B7,ae(ae({},Y),{},{label:w,inline:X,helpKey:H}));case"notification":return(0,O.tZ)(ee,ae(ae({},Y),{},{label:w,inline:X,error:D,required:j,helpKey:H,focusOnShow:k}));case"single_item":return(0,O.tZ)(g.Dd,ae(ae({},Y),{},{label:w,inline:X,error:D,required:j,helpKey:H,focusOnShow:k}));case"multiple_items":return(0,O.tZ)(g.Uz,ae(ae({},Y),{},{label:w,inline:X,error:D,required:j,helpKey:H}));case"img":return(0,O.tZ)(h.a,ae(ae({},Y),{},{error:D,required:j,label:w,helpKey:H}));case"color":return(0,O.tZ)(b.T,ae(ae({},Y),{},{helpKey:H}));case"tree_node":return(0,O.tZ)(B.B,ae(ae({},Y),{},{nameField:J}));case"text":if(x)return(0,O.tZ)(i(),ae(ae({},Y),{},{maxLength:void 0,mask:x,onChange:_?function(e){return _(e.target.value)}:void 0,onBlur:function(e){var t;return e.target.value.includes("_")&&_(""),null===(t=Y.onBlur)||void 0===t?void 0:t.call(Y,e)},ref:Q}));if(S)return(0,O.tZ)(C,ae(ae({},Y),{},{suggest:S,onChange:_?function(e){return _(e)}:void 0,ref:Q}));case"search":case"password":return(0,O.tZ)(A.o,ae(ae({},Y),{},{onChange:_?function(e){return _(e)}:void 0,ref:Q}));case"hidden":return(0,O.tZ)("input",ae({},Y));default:return console.error("input of type ".concat(t," is not supported")),(0,O.tZ)("div",{style:{color:"red"},children:"input of type ".concat(t," is not supported")})}};return q&&!ue.includes(t)?(0,O.tZ)(P.n2,{label:w,filled:void 0!==n&&""!==n||void 0!==Y.placeholder||["select_multi","tree_node"].includes(t)||"select"===t&&!Y.emptyOption,focused:K,disabled:Y.disabled,readOnly:Y.readOnly,required:j,error:D,inline:X,skinny:L,minimalist:U,helpKey:H,maxWidth:G,icon:"search"===t?"search":void 0,labelMargin:V,symbol:Y.symbol,children:te()}):te()}))},92945:function(e,t,n){"use strict";n.d(t,{c:function(){return _},v:function(){return y}});var r=n(87363),o=n(70081),i=n(71134),a=n(66975),l=n(70917),s=n(16920),c=n(22698),u=n(65836),p=n(41042),d=n(35944);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=function(e){var t=e.onFocus,n=e.onBlur,i=e.noMinWidth,a=h((0,r.useState)(!1),2),l=a[0],s=a[1],c=h((0,r.useState)(0),2),p=c[0],d=c[1],f=(0,r.useRef)();(0,o.t$)(f,(function(){return m(!1)})),(0,o.OR)("scroll",(0,u.x)((function(){return d(p+1)})),document);var m=function(e){var r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=void 0!==e?e:!l;o!==l&&(s(o),o?null==t||t():r||null==n||n())},g=(0,r.useRef)(),b=(0,r.useRef)();return(0,r.useLayoutEffect)((function(){var e=b.current;if(e){var t=document.documentElement.clientHeight,n=document.documentElement.clientWidth,r=g.current.getBoundingClientRect();r.bottom<=t/2?e.style.top=r.bottom+1+"px":e.style.bottom=t-r.top+1+"px",r.left<=n/2?e.style.left=r.x+"px":e.style.right=n-r.right+"px",i||(e.style.minWidth=r.width+"px")}}),[l,p]),{opened:l,toggleDD:m,selectRef:f,labelRef:g,ddRef:b}},v=function(e){return(0,l.iv)("display:inline-block;border:1px solid #a9a9a9;border-radius:",s.g.consts.FIELD_BORDER_RADIUS,"px;user-select:none;min-height:23px;background-color:",s.g.colors.bg_input,";",e&&"\n\t\twidth: ".concat(e,"; \n\t\tmax-width: min(100%, 90vw);\t\t\n\t"),">._label{padding:1px 6px;display:flex;>.label_text{",s.g.classes.ellipsis,";display:inline-block;max-width:calc(100% - 14px);flex-grow:1;}}>._modal{background-color:",s.g.colors.bg_input,";border:1px solid #a9a9a9;border-radius:",s.g.consts.FIELD_BORDER_RADIUS,"px;position:fixed;z-index:",s.g.z.context_menu,";overflow:auto;max-height:45vh;}","")},_=(0,r.forwardRef)((function(e,t){var n=e.modal,o=e.label,l=e.disabled,s=e.readOnly,u=e.className,f=e.onFocus,g=e.onBlur,b=e.onKeyDown,_=e.wantedWidth,w=e.caps,O=void 0===w||w,k=e.extra,x=y({onFocus:f,onBlur:g}),S=x.opened,j=x.toggleDD,C=x.selectRef,P=x.labelRef,Z=x.ddRef,B=h((0,p.$)({show:S,type:"blow_y",speed:".1s"}),2),T=B[0],E=B[1];return(0,r.useImperativeHandle)(t,(function(){return{toggle:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return j(e,t)},opened:S}})),(0,d.BX)("div",{css:v(_),className:(0,i.AK)("InputDropDown",u,{disabled:l}),ref:C,children:[(0,d.BX)(c.LZ,{className:"_label",onClick:function(){return!l&&!s&&j(void 0,!0)},ref:P,onKeyDown:b,children:[(0,d.tZ)("span",{className:"label_text",children:O?null==o?void 0:o.caps():o})," ",!s&&!l&&(0,d.tZ)(a.JO,{icon:"arrow_down"}),k]}),(T||S)&&(0,d.tZ)("div",m(m({className:"_modal",ref:Z,tabIndex:0,onKeyDown:b},E),{},{children:n}))]})}))},39952:function(e,t,n){"use strict";n.d(t,{A:function(){return p}});var r=n(70917),o=n(16920),i=n(66975),a=n(87363),l=n(71134),s=n(45459),c=n(35944),u=(0,r.iv)("&.no_wrap{white-space:nowrap;}>.Icon,>.help-sign{pointer-events:all;}>.required_icon{font-size:0.6em;vertical-align:super;color:",o.g.colors.blue,";}>.error_icon{color:",o.g.colors.negative,";}>.help-sign{",o.g.classes.margin_near("5px"),";}",""),p=(0,a.forwardRef)((function(e,t){var n=e.label,r=e.required,o=e.error,a=e.className,p=e.breakLine,d=e.helpKey;return n||o||r?(0,c.BX)("span",{css:u,className:(0,l.AK)("InputLabel",a,{no_wrap:p}),ref:t,children:[o&&(0,c.tZ)(i.JO,{icon:"sign_notification",className:"error_icon",toolTip:o}),r&&(0,c.tZ)(i.JO,{icon:"required",className:"required_icon",toolTip:lng("required")}),null==n?void 0:n.caps(),d&&(0,c.tZ)(s.I,{helpKey:d})]}):null}))},74925:function(e,t,n){"use strict";n.d(t,{B7:function(){return D},Dd:function(){return R},Uz:function(){return N}});var r=n(70917),o=n(87363),i=n(71134),a=n(5293),l=n(7477),s=(n(57882),n(37999)),c=n(98e3),u=n(70081),p=n(24210),d=n(39952),f=n(66975),m=n(16920),g=n(33051),h=n(27821),b=n(6380),y=n(35944),v=["value","onChange","onSelect","label","getData","tags","handleKeys","showId","buttons","single","maxItems","inline","disabled","required","error","helpKey","addAll","addMine","mineMenu","innerFilters","focusOnShow","showRemove","onClear"],_=["value","onChange","showRemove","separateLines","buttons","showId","disabled","readOnly","onRemove"],w=["value","onChange","objectType","helpKey"],O=["value","onChange","helpKey"],k=["value","onChange","searchData","valueIsMap","single","maxItems","name","helpKey","showRemove","showId"];function x(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var I=function(e){var t=e.value,n=e.onChange,s=e.onSelect,c=e.label,u=e.getData,p=e.tags,h=e.handleKeys,_=e.showId,w=e.buttons,O=e.single,k=e.maxItems,x=e.inline,S=e.disabled,B=e.required,T=e.error,I=e.helpKey,D=e.addAll,R=e.addMine,N=e.mineMenu,z=e.innerFilters,M=e.focusOnShow,F=e.showRemove,q=e.onClear,X=void 0===q?function(){}:q,L=E(e,v),U=Z((0,o.useState)(""),2),V=U[0],H=U[1],G=Z((0,o.useState)(!1),2),J=G[0],W=G[1],K=function(){return null==N?void 0:N.find((function(e){return t.has(e.val)}))},$=function(e){var r=K();r&&t.delete(r.val);var o=e.map((function(e){return[e.id,e]}));n(new Map([].concat(P(t),P(o))))},Y=h?function(e,t){return h(e,t,V)}:null,Q=O&&(null==t?void 0:t.size)>0||k&&(null==t?void 0:t.size)>=k||!u;if(R&&1===(null==t?void 0:t.size)&&N){var ee=K();ee&&t.set(ee.val,ee)}var te,ne=Z((0,o.useState)(""),2),re=ne[0],oe=ne[1],ie=(0,r.iv)("white-space:nowrap;",m.g.classes.margin_near("5px"),";padding:3px 5px;background-color:",m.g.colors.background_dark,";border-radius:",m.g.consts.SKINNY_BORDER_RADIUS,"px;cursor:pointer;",""),ae=!O&&D&&!!z;return Array.isArray(null==z?void 0:z.options)&&(z.options=z.options.reduce((function(e,t){return j(j({},e),{},C({},t[0],t[1]))}),{})),(0,y.BX)("span",{children:[Q?null:(0,y.tZ)(y.HY,{children:(0,y.BX)(a.n2,{label:c,filled:ae||!!V,focused:J,inline:x,disabled:S||L.readOnly,error:T,required:B,helpKey:I,children:[ae&&(0,y.tZ)("span",{css:ie,children:(0,y.BX)(g.x,{dropDownLike:!0,options:(0,i.wd)(z.options),onSelect:function(e){return oe(e)},inForm:!0,children:[z.label&&z.label+": ",z.options[re]]})}),(0,y.tZ)(l.Q,{getData:function(e,t){return u(e,t,re?C({},z.name,re):void 0)},onTextChange:H,onKeyUp:Y,onSelect:function(e,r){t.has(e.id)||n(O?new Map([[e.id,e]]):new Map([].concat(P(t),[[e.id,e]]))),(0,i.g4)(s,null,[e]),r()},onFocus:function(){return W(!0)},onBlur:function(){return W(!1)},block:!x,skinny:L.skinny,autofocus:M,readOnly:L.readOnly,showId:_}),R&&!L.readOnly&&!O&&(0,y.tZ)(g.x,{options:N,onSelect:function(e){n(new Map([[e,N.find((function(t){return t.val===e}))]]))},css:(0,r.iv)(C({position:"absolute"},m.g.far,D&&(null==t?void 0:t.size)>0?"65px":D?"34px":"3px"),"",""),children:(0,y.tZ)(f.JO,{icon:"manager",buttonLike:!0})}),(null==t?void 0:t.size)>0&&(0,y.tZ)(b.T,{css:(te=(!O&&(null==t?void 0:t.size)>0&&!L.readOnly?1:0)+(D&&!L.readOnly?1:0)+(R?1:0),(0,r.iv)("position:absolute;",m.g.far,":",te?35*te+3+"px":"3px",";","")),badge:null!=t&&t.size?null==t?void 0:t.size:0}),!L.readOnly&&!O&&(null==t?void 0:t.size)>0&&(0,y.tZ)(f.JO,{icon:"trash",toolTip:lng("clear"),buttonLike:!0,onClick:function(){return n(new Map),X()},css:(0,r.iv)(C({position:"absolute"},m.g.far,D?"34px":"3px"),"","")}),!L.readOnly&&!O&&D&&(0,y.tZ)(f.JO,{toolTip:lng("add all"),buttonLike:!0,onClick:function(){var e={noLimit:!0,all:!0};re&&(e[z.name]=re),u(V,$,e)},icon:"sign_plus",css:(0,r.iv)(C({position:"absolute"},m.g.far,"3px"),"","")})]})}),Q&&(0,y.tZ)(d.A,{label:c,error:T,required:B}),O&&0===(null==t?void 0:t.size)?null:(0,y.tZ)(A,j({value:t,onChange:n,separateLines:!x&&!p,buttons:w,disabled:S,showRemove:F,showId:_},L))]})},A=function(e){var t=e.value,n=e.onChange,r=e.showRemove,o=e.separateLines,i=e.buttons,a=e.showId,l=e.disabled,c=e.readOnly,u=e.onRemove,p=E(e,_),d=!l&&!c,f=[];if(null!=t&&t.size){var m,g=x(t);try{for(g.s();!(m=g.n()).done;){var b=Z(m.value,2),v=b[0],w=b[1];f.push(j({key:v},w))}}catch(e){g.e(e)}finally{g.f()}}return(0,y.tZ)(s.o,j({items:f,onRemove:d?function(e){null==u||u(e);var r=t instanceof Map?new Map(P(t)):(0,h.toJS)(t);r.delete(e.key),n(r)}:void 0,showRemove:r,separateLines:o,buttons:i,updateItem:function(e){if(!1!==e){var r=t instanceof Map?new Map(P(t)):(0,h.toJS)(t);r.set(e.key,e),null==n||n(r)}},showId:a},p))},D=function(e){var t=e.value,n=e.onChange,r=e.objectType,a=e.helpKey,l=E(e,w),s=Z((0,o.useState)(z(t,!0)),2),u=s[0],p=s[1],d=(0,o.useCallback)((0,i.pR)((function(e,t){return(0,c.SC)("generic/tag_search",{data:{object_type:r.split(","),term:e}},t)})),[]);(0,o.useEffect)((function(){p(z(t,!0))}),[t]);var f=function(e){p(e),n(M(e))};return(0,y.tZ)(I,j(j({},l),{},{value:u,onChange:f,getData:d,tags:!0,handleKeys:function(e,t,n){if("Enter"===e.key){var r=n.split(",").map((function(e){return e.trim()})).filter((function(e){return e}));f(new Map([].concat(P(u),P(z(r,!0))))),t()}},objectKeys:["label"],helpKey:a}))},R=function(e){var t=e.value,n=e.onChange,r=e.helpKey,o=E(e,O);return(0,y.tZ)(N,j({single:!0,value:t?[t]:[],onChange:function(e){return n(e.length?e[0]:"")},helpKey:r},o))},N=function(e){var t=e.value,n=e.onChange,r=e.searchData,i=e.valueIsMap,a=e.single,l=e.maxItems,s=e.name,c=e.helpKey,d=e.showRemove,f=e.showId,m=void 0===f||f,g=E(e,k),h=(0,u.tm)(),b=Z((0,o.useState)(null),2),v=b[0],_=b[1],w=(0,o.useContext)(p.q3);(0,o.useEffect)((function(){var e=i?new Map(P(t)):z(t);null==v||v.forEach((function(t,n){e.has(n)&&e.set(n,t)})),_(e)}),[t]),(0,o.useEffect)((function(){v?(O(v),w&&w.meta.set(s,v)):w&&s&&w.meta.get(s)&&_(w.meta.get(s))}),[v]);var O=function(e){var t=P(e.keys()),n=null==t?void 0:t.filter((function(t){var n;return!(null!==(n=e.get(t))&&void 0!==n&&n.label)}));n.length&&r({ids:n},(function(e){h.current&&(null==e?void 0:e.length)>0&&_((function(t){var n=new Map(P(t));return e.forEach((function(e){return n.set(e.id.toString(),Object.assign({},n.get(e.id.toString()),e))})),a&&n.size>1?new Map([n.entries().next().value]):n}))}))},x=r?function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};r(j({term:e},n),t)}:void 0;return(0,y.tZ)(I,j(j({},g),{},{value:v,onChange:function(e){_(e),n(i?e:M(e))},getData:x,single:a,maxItems:l,showRemove:d,showId:m,helpKey:c}))},z=function(e,t){var n=new Map;if((0,i.zG)(e)){var r,o=x(e);try{for(o.s();!(r=o.n()).done;){var a=r.value;n.set(a.toString(),t?{label:a}:{})}}catch(e){o.e(e)}finally{o.f()}}return n},M=function(e){return P(e.keys())}},58714:function(e,t,n){"use strict";n.d(t,{A:function(){return f},i:function(){return u}});n(57882);var r=n(28534),o=n(35944),i=["value","onChange","onBlur","min","max","css","symbol","unit","integer"];function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=function(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4?arguments[4]:void 0,a=o?parseInt(e):parseFloat(e);if(isNaN(a)){if(null!=e&&e.length)return i&&(0,r.nb)(lng("please type a number").caps()),!1}else{if(t&&n&&(a<t||a>n))return i&&(0,r.nb)(lng("number should be between %s and %s",t,n).caps()),!1;if(t&&a<t)return i&&(0,r.nb)(lng("number should be %s or higher",t).caps()),!1;if(n&&a>n)return i&&(0,r.nb)(lng("number should be %s or lower",n).caps()),!1}return!0},p={name:"16fg6qb",styles:"margin-inline-start:9px"},d={name:"15sr42p",styles:"margin-inline-end:9px"},f=function(e){var t=e.value,n=e.onChange,r=e.onBlur,a=e.min,s=e.max,f=e.css,m=e.symbol,g=e.unit,h=e.integer,b=c(e,i),y=Math.max((s||"").toString().length,(a||"").toString().length);return y&&((f=f||{}).width="calc(28px + ".concat(y,"ch)")),(0,o.BX)(o.HY,{children:[m&&(0,o.tZ)("span",{css:p,children:m}),(0,o.tZ)("input",l(l({},b),{},{css:f,type:"number",min:a,max:s,value:null==t?"":t,autoComplete:"off",onChange:n?function(e){return n(e.target.value)}:void 0,onBlur:function(){n&&n(u(t,a,s,h,!0)?t:""),null==r||r()}})),g&&(0,o.tZ)("span",{css:d,children:g})]})}},39961:function(e,t,n){"use strict";n.d(t,{Y:function(){return b}});var r=n(70917),o=n(66975),i=n(16920),a=n(39952),l=n(7392),s=n(45459),c=n(35944),u=["value","label","radioValue","onChange","theme","MatButtonStyle","disabled","helpKey"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=(0,r.iv)("user-select:none;display:inline-flex;align-items:center;cursor:pointer;position:relative;>input{display:none;}.help-sign{",i.g.classes.margin_far("1ch"),";}",""),h={name:"1otlq80",styles:"font-size:1.3rem"},b=function(e){var t=e.value,n=e.label,r=e.radioValue,p=e.onChange,f=e.theme,b=e.MatButtonStyle,y=e.disabled,v=e.helpKey,_=m(e,u),w=["outlined","contained"].includes(f),O=(0,c.BX)("label",{css:g,children:[!w&&(0,c.tZ)(o.JO,{icon:"radio"+(t===r?"_checked":""),css:h,color:y?i.g.colors.disabled_input_cb:void 0,buttonLike:!0,disabled:y}),v&&(0,c.tZ)(s.I,{helpKey:v}),(0,c.tZ)("input",d(d({},_),{},{type:"radio",value:r,checked:t===r,disabled:y,onChange:p?function(e){return e.stopPropagation(),p(r)}:void 0})),"string"==typeof n?(0,c.tZ)(a.A,{label:n}):n]});return w?(0,c.tZ)(l.l,{theme:f,style:b,bold:!0,onClick:function(e){return e.stopPropagation(),p(r)},children:O}):O}},23629:function(e,t,n){"use strict";n.d(t,{M:function(){return a}});var r=n(39961),o=n(70917),i=(n(57882),n(35944)),a=function(e){var t=e.value,n=e.onChange,a=e.options,l=e.name,s=e.theme,c=e.disabled,u=(0,o.iv)(["outlined","contained"].includes(s)&&"\n\t\t> div {\n\t\t\tmargin-bottom: 8px;\n\t\t\ttext-align: center;\n\t\t\t._outlined, ._contained {\n\t\t\t\twidth: 300px;\n\t\t\t}\n\t\t}\n\t",";","");return(0,i.tZ)("div",{css:u,children:(a||[]).map((function(e,o){return(0,i.tZ)("div",{children:(0,i.tZ)(r.Y,{value:t,label:e.label,name:l,radioValue:e.val,onChange:n,theme:s,disabled:c})},o)}))})}},59218:function(e,t,n){"use strict";n.d(t,{L:function(){return m}});var r=n(87363),o=n(70917),i=(n(57882),n(16920)),a=n(70081),l=n(39952),s=n(71134),c=n(35944);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=(0,o.iv)("padding-bottom:30px;>.InputLabel{color:",i.g.colors.text_placeholder,";margin-bottom:14px;font-weight:600;display:block;}._comp{position:relative;._track{position:relative;height:7px;background-color:#E2E2E2;cursor:pointer;}>._slider{position:absolute;top:-4px;width:16px;height:16px;border-radius:50%;background-color:",i.g.colors.dominant_main,";user-select:none;}>._value{cursor:default;position:absolute;top:15px;color:",i.g.colors.dominant_main,";font-size:1.15em;min-width:16px;text-align:center;white-space:nowrap;}._marker{display:inline-block;position:absolute;top:0;height:7px;width:1px;background-color:",i.g.colors.text_placeholder,";}}",""),f=function(e,t,n,r){var o=r.current.getBoundingClientRect(),i=Math.round(e+(n-o.left)*(t-e)/o.width);return Math.min(t,Math.max(e,i))},m=function(e){var t=e.label,n=e.value,o=e.onChange,p=e.min,m=void 0===p?0:p,g=e.max,h=void 0===g?100:g,b=e.sign,y=e.disabled,v=e.states,_=void 0===v?[]:v,w=null==n?void 0:n.toString(),O=n,k=w+(b||""),x=function(e){return e},S=null;_.length&&(m=0,h=_.length-1,O=Math.max(0,_.findIndex((function(e){return e.val===w}))),k=_[O].label.caps(),S=_[O].color||null,x=function(e){return _[e].val}),o&&(O<m||O>h)&&o(x(m));var j=u((0,r.useState)(!1),2),C=j[0],P=j[1],Z=(0,r.useRef)(null),B=(0,r.useRef)(null),T=(0,r.useCallback)((function(){return P(!1)}),[]),E=(0,r.useCallback)((function(e){return C&&o(x(f(m,h,e.clientX,Z)))}),[C,m,h]);(0,a.OR)("mousemove",E),(0,a.OR)("mouseup",T);var I=h-m,A="calc(".concat(100*(O-m)/I,"% - 8px)");return(0,c.BX)("div",{css:d,className:"range_input",onClick:function(){return B.current.focus()},children:["string"==typeof t?(0,c.tZ)(l.A,{label:t}):t,(0,c.BX)("div",{className:"_comp",children:[(0,c.tZ)("div",{className:"_track",ref:Z,onClick:function(e){return!y&&o(x(f(m,h,e.clientX,Z)))},children:I<10&&(0,s.w6)(I+1).map((function(e){return(0,c.tZ)("span",{className:"_marker",style:{left:"calc(".concat(100*e/I,"%)")}},e)}))}),(0,c.tZ)("div",{className:"_slider",style:{left:A,backgroundColor:y?i.g.colors.disabled_input_cb:S},tabIndex:y?void 0:"0",onMouseDown:function(){return!y&&P(!0)},onKeyDown:function(e){if(!y){var t=O+("ArrowRight"===e.key?1:"ArrowLeft"===e.key?-1:0);(t=Math.min(h,Math.max(m,t)))!==O&&o(x(t))}},ref:B}),(0,c.tZ)("div",{className:"_value",style:{left:A,color:y?i.g.colors.disabled_input_cb:S},children:k})]}),(0,c.tZ)("input",{type:"hidden",value:n})]})}},7093:function(e,t,n){"use strict";n.d(t,{V:function(){return St},H:function(){return kt}});var r=n(87363),o=n(35369),i=n(9041);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var l=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getCurrentBlock",value:function(e){var t=e.getSelection();return e.getCurrentContent().getBlockForKey(t.getStartKey())}},{key:"getCurrentDirection",value:function(e){var t=e.getDirectionMap(),n=e.getSelection().getStartKey();return t.get(n)}},{key:"removeInlineStyle",value:function(e,t){var n=e.getSelection(),r=t.reduce((function(e,t){return i.Modifier.removeInlineStyle(e,n,t)}),e.getCurrentContent());return i.EditorState.push(e,r,"change-inline-style")}},{key:"getSelectedBlocks",value:function(e,t){for(var n=t.getStartKey(),r=t.getEndKey(),o=e.getBlockForKey(n),i=[o];o.getKey()!=r;)o=e.getBlockAfter(o.getKey()),i.push(o);return i}},{key:"insertString",value:function(e,t,n,r,o){var a=i.Modifier.replaceText(e.getCurrentContent(),o||e.getSelection(),t,n,r);return i.EditorState.push(e,a,"insert-characters")}},{key:"pasteText",value:function(e,t){var n=i.ContentState.createFromText(t).blockMap,r=i.Modifier.replaceWithFragment(e.getCurrentContent(),e.getSelection(),n);return i.EditorState.push(e,r,"insert-fragment")}},{key:"addLink",value:function(t,n){var r=e.addEntity(t,"link","MUTABLE",{url:n}),o=r.newEditorState,a=r.entityKey;return i.RichUtils.toggleLink(o,o.getSelection(),a)}},{key:"addImage",value:function(t,n,r,o){var i=e.addEntity(t,"image","IMMUTABLE",{src:n,inlineFile:r,name:o}),a=i.newEditorState,l=i.entityKey;return a=e.insertString(a," ",null,l),e.insertString(a," ",null,null)}},{key:"addVideo",value:function(t,n){var r=e.addEntity(t,"video","IMMUTABLE",{src:n}),o=r.newEditorState,a=r.entityKey;return i.AtomicBlockUtils.insertAtomicBlock(o,a," ")}},{key:"addIframe",value:function(t,n){var r=e.addEntity(t,"iframe","IMMUTABLE",{src:n}),o=r.newEditorState,a=r.entityKey;return i.AtomicBlockUtils.insertAtomicBlock(o,a," ")}},{key:"addMention",value:function(t,n,r,o){if(!n)return console.warn("mention error",{id:n,name:r}),t;var i=e.addEntity(t,"mention","IMMUTABLE",{id:n,name:r}),a=i.newEditorState,l=i.entityKey,s="@"+r;return a=e.insertString(a,s,null,l,o),a=e.offsetAnchor(a,o,s.length),e.insertString(a," ",null,null)}},{key:"offsetAnchor",value:function(e,t,n){return i.EditorState.acceptSelection(e,new i.SelectionState({anchorKey:t.anchorKey,anchorOffset:t.anchorOffset+n,focusKey:t.anchorKey,focusOffset:t.anchorOffset+n}))}},{key:"addFile",value:function(t,n,r,o){var a=e.addEntity(t,"file","IMMUTABLE",{src:n,inlineFile:r,name:o}),l=a.newEditorState,s=a.entityKey;return i.AtomicBlockUtils.insertAtomicBlock(l,s," ")}},{key:"addPlaceholder",value:function(t,n,r){var o=e.addEntity(t,"placeholder","IMMUTABLE",{placeholder:n}),i=o.newEditorState,a=o.entityKey;return e.insertString(i,r,null,a)}},{key:"selectionContainsSpecialEntity",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["link"],r=t.getCurrentContent(),o=t.getSelection(),i=e.getSelectedBlocks(r,o);return i.some((function(e,t){for(var a=0===t?o.getStartOffset():0,l=t===i.length-1?o.getEndOffset():e.getText().length,s=a;s<l;s++){var c=e.getEntityAt(s);if(c&&!n.includes(r.getEntity(c).type))return!0}return!1}))}},{key:"addEntity",value:function(e,t,n,r){var o=e.getCurrentContent().createEntity(t,n,r),a=o.getLastCreatedEntityKey();return{newEditorState:i.EditorState.set(e,{currentContent:o}),entityKey:a}}},{key:"getCurrentEntity",value:function(e){var t=e.getCurrentContent(),n=e.getSelection(),r=t.getBlockForKey(n.getStartKey()),o=r.getEntityAt(n.getStartOffset())||r.getEntityAt(n.getEndOffset());return!!o&&t.getEntity(o)}},{key:"setBlockData",value:function(e,t){var n=i.Modifier.setBlockData(e.getCurrentContent(),e.getSelection(),t);return i.EditorState.push(e,n,"change-block-data")}},{key:"removeBlock",value:function(e,t){var n=(0,i.convertToRaw)(e.getCurrentContent()),r=null;n.blocks=n.blocks.filter((function(e,o){return e.key!==t.key||(r=n.blocks[o-1],!1)}));var o=i.EditorState.push(e,(0,i.convertFromRaw)(n),"remove-range");return r?i.EditorState.forceSelection(o,new i.SelectionState({anchorKey:r.key,anchorOffset:r.text.length,focusKey:r.key,focusOffset:r.text.length})):o}},{key:"removeEntity",value:function(t,n,r,o){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"",l=new i.SelectionState({anchorKey:n,anchorOffset:r,focusKey:n,focusOffset:o});return e.insertString(t,a,null,null,l)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),e}(),s=n(70917),c=n(16920),u=n(35944);function p(e){var t=e.position,n=e.children,r=e.className,o=document.documentElement.clientWidth,i="left: ".concat(t.left,"px");"RTL"===t.direction&&(i="right: ".concat(o-t.right,"px"));var a=(0,s.iv)("position:fixed;z-index:",c.g.z.context_menu,";top:",t.top,"px;",i,";direction:",t.direction,";","");return(0,u.tZ)("div",{css:a,className:r,children:n})}var d=n(7477),f=n(71134),m=n(66975),g=n(73105),h=(0,s.iv)("display:inline-flex;align-items:center;justify-content:center;width:30px;margin:0 1px;cursor:pointer;border-radius:3px;background-color:",c.g.colors.bg_main,";color:",c.g.colors.text_main,";height:30px;position:relative;&.active{background-color:",c.g.colors.light_blue2,"!important;}&:hover{background-color:",c.g.colors.highlight,"!important;color:#FFF!important;}img{max-height:16px;max-width:16px;}&.disabled{background-color:",c.g.darkMode?c.g.colors.disabled_background:c.g.colors.bg_2,"!important;color:",c.g.darkMode?c.g.colors.text_black:c.g.colors.disabled_background,"!important;cursor:auto;}",""),b=function(e){var t=e.active,n=e.icon,r=e.onToggle,o=e.tooltip,i=e.disabled,a=e.style;return(0,u.tZ)(g.u,{text:o,children:(0,u.tZ)("div",{css:h,className:(0,f.AK)("draft-toolbar-button",{active:t,disabled:i}),onClick:function(){return!i&&(null==r?void 0:r())},style:a,children:(0,u.tZ)(m.JO,{icon:n})})})},y=(0,s.iv)("margin:0 2px;border-left:1px solid ",c.g.colors.separator,";",""),v=function(){return(0,u.tZ)("div",{css:y,className:"Separator"})},w=n(39191);function O(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),P(this,"_fgColors",{}),P(this,"_bgColors",{})}var t,n,r;return t=e,r=[{key:"_getStyleKey",value:function(e,t){var n=O(e.getCurrentInlineStyle()).filter((function(e){return e.startsWith(t)}));return n.length>0?n[0].substring(t.length):void 0}},{key:"getCurColorKey",value:function(t){return e._getStyleKey(t,"fg-")}},{key:"getCurBgColorKey",value:function(t){return e._getStyleKey(t,"bg-")}},{key:"getCurColorsKeys",value:function(e){return O(e.getCurrentInlineStyle()).filter((function(e){return e.startsWith("fg-")||e.startsWith("bg-")}))}},{key:"inlineStylesToCss",value:function(e){var t,n={},r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=k(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;"BOLD"===o&&(n["font-weight"]="bold"),"ITALIC"===o&&(n["font-style"]="italic"),"UNDERLINE"===o&&(n["text-decoration"]="underline"),"STRIKETHROUGH"===o&&(n["text-decoration"]?n["text-decoration"]+=" line-through":n["text-decoration"]="line-through"),o.startsWith("fg-")&&(n.color=o.substring(3)),o.startsWith("bg-")&&(n["background-color"]=o.substring(3))}}catch(e){r.e(e)}finally{r.f()}return n}}],(n=[{key:"addFgColor",value:function(e){var t="fg-".concat(e);return this._fgColors[t]={color:e},t}},{key:"addBgColor",value:function(e){var t="bg-".concat(e);return this._bgColors[t]={backgroundColor:e},t}},{key:"map",get:function(){return j(j({},this._fgColors),this._bgColors)}}])&&C(t.prototype,n),r&&C(t,r),e}();function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E={name:"16ezhqa",styles:"display:flex;padding:10px;>div:first-of-type{margin-right:15px;}>div{>div:first-of-type{font-weight:600;margin-bottom:3px;}}.picker_wrapper{font-size:6px;}.suggested-colors{font-size:10px;}"},I=function(e){var t,n,o=e.styleMap,a=(0,r.useContext)(ft),s=a.editorState(),c=B((0,r.useState)(!1),2),p=c[0],d=c[1],f=B((0,r.useState)(""),2),m=f[0],h=f[1],y=B((0,r.useState)(""),2),v=y[0],_=y[1],O=B((0,r.useState)(!1),2),k=O[0],x=O[1],S=(null===(t=l.getCurrentEntity(s))||void 0===t||null===(n=t.getData)||void 0===n?void 0:n.call(t))||{};(0,r.useEffect)((function(){h(Z.getCurColorKey(s)||""),_(Z.getCurBgColorKey(s)||"");var e=l.getCurrentEntity(s);x(s.getSelection().isCollapsed()||!!e)}),[s]);var j=(0,u.BX)("div",{css:E,children:[(0,u.BX)("div",{children:[(0,u.tZ)("div",{children:lng("background color").caps()}),(0,u.tZ)(w.z,{value:v||"#FFFFFF",onSelect:function(e){return _(e)},format:"hex"})]}),(0,u.BX)("div",{children:[(0,u.tZ)("div",{children:lng("text color").caps()}),(0,u.tZ)(w.z,{value:m||"#333333",onSelect:function(e){return h(e)},format:"hex"})]})]});return(0,u.tZ)(g.y,{behavior:"trigger",trigger:p,content:j,onClose:function(){var e=s,t=Z.getCurColorsKeys(e);t.length&&(e=l.removeInlineStyle(e,t)),m&&(e=i.RichUtils.toggleInlineStyle(e,o.addFgColor(m))),v&&(e=i.RichUtils.toggleInlineStyle(e,o.addBgColor(v))),e!==s&&a.onChange(e),d(!1),h(""),_("")},children:(0,u.tZ)(b,{active:!(!S.color&&!S.backgroundColor),disabled:k,tooltip:lng("text color"),icon:"font",onToggle:function(){return d(!p)},style:{color:m,backgroundColor:v}})})},A=n(43698),D=n(40441),R=n(65405);function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var M=function(){var e=(0,r.useContext)(ft),t=e.editorState(),n=N((0,r.useState)(!1),2),o=n[0],a=n[1],s=N((0,r.useState)(""),2),c=s[0],p=s[1],d=(0,u.tZ)(q,{urlValue:c,confirmLink:function(n){var r=n.url;e.onChange(l.addLink(t,r)),a(!1),p("")},removeLink:function(){var n=t.getSelection();n.isCollapsed()||(e.onChange(i.RichUtils.toggleLink(t,n,null)),a(!1))}});return(0,u.tZ)(g.y,{behavior:"trigger",trigger:o,content:d,onClose:function(){return a(!1)},children:(0,u.tZ)(b,{active:!1,tooltip:lng("add link"),icon:"link",onToggle:function(){a(!0);var e=l.getCurrentEntity(t);p(e?e.getData().url:"")},disabled:t.getSelection().isCollapsed()||l.selectionContainsSpecialEntity(t)})})},F=(0,s.iv)("padding:15px;.label{font-size:.9em;margin-bottom:5px;}.inputs{display:flex;align-items:center;.blsm-input{min-width:300px;}*+*{",c.g.classes.margin_near("6px"),";}.disabled{color:",c.g.colors.text_light_disabled,";}}",""),q=function(e){var t=e.urlValue,n=e.confirmLink,o=e.removeLink,i=e.label,a=e.iframeSupport,l=N((0,r.useState)(t||(Blsm.prm.LOCALHOST?"https://youtu.be/iwGFalTRHDA":"")),2),s=l[0],p=l[1],d=N((0,r.useState)(!1),2),f=d[0],g=d[1],h=X(s),b=D.H8.test(h||s)||D.Qu.test(h||s),y=function(){b&&n({url:h||s,iframe:!!h||f})};return(0,u.BX)("div",{css:F,onMouseDown:function(e){return e.stopPropagation()},children:[(0,u.BX)("div",{className:"label",children:[i||lng("enter link url").caps(),":"]}),(0,u.BX)("div",{className:"inputs",children:[(0,u.tZ)("div",{css:c.g.classes.flex_grow,children:(0,u.tZ)(A.I,{type:"text",wrapped:!0,placeholder:"https://",value:s,onKeyDown:function(e){return"Enter"===e.key&&y()},onChange:function(e){return p(e)},error:!b&&(null==s?void 0:s.length)>0?lng("invalid URL"):void 0,focusOnShow:!0})}),(0,u.tZ)("div",{children:(0,u.tZ)(m.JO,{icon:"mark_v_strong",onClick:y,toolTip:lng("confirm"),disabled:!b,smallButtonLike:!0})}),o&&(0,u.tZ)("div",{children:(0,u.tZ)(m.JO,{icon:"mark_x",onClick:o,toolTip:lng("remove"),smallButtonLike:!0})})]}),a&&(0,u.tZ)("div",{children:(0,u.tZ)(R.X,{label:lng("embed in iframe"),value:!!h||f,disabled:!!h,onChange:g})})]})},X=function(e){var t=document.createRange().createContextualFragment(e).querySelector("iframe");return null==t?void 0:t.src},L=n(7392);function U(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return V(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var H=function(e){var t=e.uploadFile,n=U((0,r.useState)(!1),2),o=n[0],i=n[1],a=(0,u.tZ)(J,{onFileSelect:function(e){return t(e),i(!1)}});return(0,u.tZ)(g.y,{behavior:"trigger",trigger:o,content:a,onClose:function(){return i(!1)},children:(0,u.tZ)(b,{active:!1,tooltip:lng("attach file"),icon:"attachment",onToggle:function(){return i(!0)}})})},G={name:"1jj7er4",styles:"padding:15px"},J=function(e){var t=e.onFileSelect;return(0,u.BX)("div",{css:G,onMouseDown:function(e){return e.stopPropagation()},children:[(0,u.tZ)("div",{children:lng("add file (document or image)").caps()}),(0,u.BX)("label",{children:[(0,u.tZ)(L.l,{theme:"outlined",children:lng("upload").caps()}),(0,u.tZ)("input",{type:"file",style:{display:"none"},onChange:function(e){return t(e.currentTarget.files[0])}})]})]})},W=n(79160),K=n(32808);function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Q=function(){var e=(0,r.useContext)(ft),t=$((0,r.useState)(!1),2),n=t[0],o=t[1];return(0,u.BX)("span",{children:[(0,u.tZ)(b,{active:!1,icon:"media",tooltip:lng("add media from gallery"),onToggle:function(){return o(!0)}}),n&&(0,u.tZ)(W.b,{tabs:["images","gallery","videos"],onClose:function(){return o(!1)},onSelect:function(t){var n;n="vid"===(0,K.r5)(t.name||t.imgtag)?l.addVideo(e.editorState(),c.g.func.imgUrl(t.imgtag)):l.addImage(e.editorState(),c.g.func.imgUrl(t.imgtag)),e.onChange(n)},selectedItem:null})]})};function ee(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return te(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return te(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function te(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ne=function(){var e=(0,r.useContext)(ft),t=ee((0,r.useState)(!1),2),n=t[0],o=t[1],i=ee((0,r.useState)(""),2),a=i[0],s=i[1],c=(0,u.tZ)(q,{urlValue:a,confirmLink:function(t){var n,r=t.url,i=t.iframe?r:(0,f.sR)(r);i&&(n=l.addIframe(e.editorState(),i)),(!n&&r.endsWith(".mp4")||(0,f.en)(r).pathname.endsWith(".mp4"))&&(n=l.addVideo(e.editorState(),r)),n||(n=l.addImage(e.editorState(),r)),e.onChange(n),o(!1),s("")},iframeSupport:!0,label:lng("enter url to Youtube, Vimeo, Ted, mp4 or an image, or paste iframe embed code").caps()});return(0,u.tZ)(g.y,{behavior:"trigger",trigger:n,content:c,onClose:function(){return o(!1)},children:(0,u.tZ)(b,{active:!1,tooltip:lng("add media from link"),icon:"image",onToggle:function(){return o(!0)}})})},re=function(){var e=(0,r.useContext)(ft),t=e.editorState();return(0,u.tZ)(b,{icon:"list",tooltip:lng("bulleted list"),onToggle:function(){e.onChange(i.RichUtils.toggleBlockType(t,"unordered-list-item"))},active:"unordered-list-item"===l.getCurrentBlock(e.editorState()).type})},oe=function(){var e=(0,r.useContext)(ft),t=e.editorState();return(0,u.tZ)(b,{icon:"list_ol",tooltip:lng("numbered list"),onToggle:function(){e.onChange(i.RichUtils.toggleBlockType(t,"ordered-list-item"))},active:"ordered-list-item"===l.getCurrentBlock(e.editorState()).type})},ie=function(){var e=(0,r.useContext)(ft),t=e.editorState(),n=l.getCurrentBlock(t).getData().get("text-align"),o=function(r){return e.onChange(l.setBlockData(t,{"text-align":n!==r?r:void 0}))};return(0,u.BX)(u.HY,{children:[(0,u.tZ)(b,{tooltip:lng("align left"),icon:"align_left",onToggle:function(){return o("left")},active:"left"===n}),(0,u.tZ)(b,{tooltip:lng("align center"),icon:"align_center",onToggle:function(){return o("center")},active:"center"===n}),(0,u.tZ)(b,{tooltip:lng("align right"),icon:"align_right",onToggle:function(){return o("right")},active:"right"===n})]})},ae=n(33051);function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return se(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return se(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ce=function(e){var t=e.placeholders,n=(0,r.useContext)(ft);return(0,u.tZ)(ae.x,{options:Object.entries(t).map((function(e){var t=le(e,2);return{val:t[0],label:t[1]}})),onSelect:function(e){return n.onChange(l.addPlaceholder(n.editorState(),e,t[e]))},children:(0,u.tZ)(b,{icon:"placeholder"})})};function ue(e){var t=e.icon,n=e.tooltip,o=e.style,a=(0,r.useContext)(ft),l=a.editorState(),s=l.getCurrentInlineStyle();return(0,u.tZ)(b,{active:s.has(o),icon:t,onToggle:function(){return a.onChange(i.RichUtils.toggleInlineStyle(l,o))},tooltip:n})}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe=function(e){return[{icon:"bold",style:"BOLD",tooltip:lng("bold")},{icon:"italic",style:"ITALIC",tooltip:lng("italic")},!e&&{icon:"underline",style:"UNDERLINE",tooltip:lng("underline")},{icon:"strikethrough",style:"STRIKETHROUGH",tooltip:lng("strikethrough")}].filter((function(e){return!!e}))},me=(0,s.iv)("position:relative;.dt-buttons{display:inline-flex;padding:3px;border:1px solid ",c.g.colors.separator,";border-radius:3px;",c.g.classes.shadow_light,";margin:0 3px 4px;max-width:100%;flex-flow:wrap;}.mention-autocomplete{color:",c.g.colors.text_black,";background-color:",c.g.colors.mention_bg,";}.Separator+.Separator,.Separator:first-child,.Separator:last-child{display:none;}",""),ge=function(e){var t=e.mentionPos,n=e.mentionData,r=e.selectMention,o=e.exitMention,i=e.uploadFile,a=e.options,l=e.styleMap,s=e.slackMarkdown;return(0,u.BX)("div",{css:me,children:[(0,u.BX)("div",{className:"dt-buttons",onMouseDown:function(e){return e.preventDefault()},children:[a.font&&fe(s).map((function(e,t){return(0,u.tZ)(ue,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),t)})),a.color&&(0,u.tZ)(I,{styleMap:l}),(0,u.tZ)(v,{}),a.link&&(0,u.tZ)(M,{}),a.attach&&(0,u.tZ)(H,{uploadFile:i}),a.media&&(0,u.tZ)(Q,{}),a.media_link&&(0,u.tZ)(ne,{}),(0,u.tZ)(v,{}),a.list&&(0,u.BX)(u.HY,{children:[(0,u.tZ)(re,{}),(0,u.tZ)(oe,{})]}),(0,u.tZ)(v,{}),a.align&&(0,u.tZ)(u.HY,{children:(0,u.tZ)(ie,{})}),a.placeholders&&(0,u.tZ)(ce,{placeholders:a.placeholders})]}),t&&(0,u.tZ)(p,{position:t,className:"mention-autocomplete",children:(0,u.tZ)(d.Q,{autofocus:!0,getData:n,onSelect:r,onBlur:o,onKeyUp:o})})]})};function he(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function be(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?he(Object(n),!0).forEach((function(t){ye(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):he(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ve(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Oe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _e(e){return function(e){if(Array.isArray(e))return ke(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Oe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function we(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Oe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oe(e,t){if(e){if("string"==typeof e)return ke(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ke(e,t):void 0}}function ke(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var xe=function(e,t){for(var n=e.getCurrentContent(),r=(0,i.convertToRaw)(n),o=[],a=[],l=!1,s=e.getDirectionMap(),c=0;c<r.blocks.length;c++){var u=r.blocks[c],p="",d="";l!==u.type&&(l&&(p="ordered-list-item"===l?"</ol>":"</ul>",l=!1),["ordered-list-item","unordered-list-item"].includes(u.type)&&(p+="ordered-list-item"===(l=u.type)?"<ol>":"<ul>")),l&&c===r.blocks.length-1&&(d="ordered-list-item"===l?"</ol>":"</ul>");var f=we(je(u.type,{direction:s.get(u.key).toLowerCase(),"text-align":u.data["text-align"]}),2),m=f[0],g=f[1],h=Ce(u,r.entityMap,1===r.blocks.length,t),b=h.html,y=h.commands;o.push("".concat(p).concat(m).concat(b).concat(g).concat(d)),a=a.concat(y)}var v=o.join(t?"\n":"");return/^<div[^>]*>\s*<\/div>$/.test(v)?{html:"",commands:[]}:{html:v,commands:a}},Se={unstyled:"div",atomic:"div","header-one":"h1","header-two":"h2","header-three":"h3","header-four":"h4","header-five":"h5","header-six":"h6","unordered-list-item":"li","ordered-list-item":"li",blockquote:"blockquote",code:"pre"},je=function(e,t){var n=Se[e],r="";return"center"===t["text-align"]&&(r+=" "+'style="text-align:'.concat(t["text-align"],'"')),"right"===t["text-align"]||"left"===t["text-align"]?r+=" "+'dir="'.concat("right"===t["text-align"]?"rtl":"ltr",'"'):t.direction&&(r+=" "+'dir="'.concat(t.direction,'"')),["<".concat(n).concat(r,">"),"</".concat(n,">")]},Ce=function(e,t,n,r){for(var o={},i={},a=new Set,l=0,s=[].concat(_e(e.inlineStyleRanges),_e(e.entityRanges));l<s.length;l++){var c=s[l],u=c.offset,p=c.length,d=c.style,f=c.key,m=void 0!==f?f:d,g=u,h=u+p;o[g]||(o[g]=[]),o[g].push(m),a.add(g),i[h]||(i[h]=[]),i[h].push(m),a.add(h)}a.add(e.text.length);var b,y=[],v=[],w=0,O="",k=[],x=ve(_e(a).sort((function(e,t){return e-t})));try{var S=function(){var n=b.value;if(i[n]&&(y=y.filter((function(e){return!i[n].includes(e)}))),o[n]&&(y=_e(new Set([].concat(_e(y),_e(o[n]))))),n>w){var a,l="",s="",c="atomic"===e.type?"":_.escape(e.text.substring(w,n)),u=ve(v.filter((function(e){return Number.isInteger(e)})));try{for(u.s();!(a=u.n()).done;){var p=a.value,d=r?Be(t[p]):Pe(t[p]),f=d.sTag,m=d.eTag,g=d.command,h=d.innerHtml;l+=f,s=m+s,h&&(c=h),g&&k.push(g)}}catch(e){u.e(e)}finally{u.f()}var x=r?Te(v.filter((function(e){return!Number.isInteger(e)}))):Ze(v.filter((function(e){return!Number.isInteger(e)}))),S=x.sTag;s=x.eTag+s,O+="".concat(l+=S).concat(c).concat(s)}w=n,v=y};for(x.s();!(b=x.n()).done;)S()}catch(e){x.e(e)}finally{x.f()}return{html:O||(n?"":r?"\n":'<br class="draft-br" />'),commands:k}},Pe=function(e){var t="",n="",r=void 0,o=void 0;switch(e.type){case"link":t='<a href="'.concat(e.data.url,'">'),n="</a>";break;case"image":var i=e.data.src;i.includes("GetFile?")&&(i=i.substring(i.indexOf("GetFile?"))),t='<img src="'.concat(i,'" alt="image" ').concat(e.data.width?'style="width:'.concat(e.data.width,'"'):"","/>"),n="",o=be({type:"image"},e.data);break;case"video":var a=e.data.src;a.includes("GetFile?")&&(a=a.substring(a.indexOf("GetFile?"))),t='<video src="'.concat(a,'"/>'),n="";break;case"iframe":t='<iframe src="'.concat(e.data.src,'" allowFullScreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen">'),n="</iframe>";break;case"mention":t='<span class="mention">',n="</span>",e.data.empty||(o=be({type:"mention"},e.data));break;case"placeholder":t='<span data-blsm_placeholder="'.concat(e.data.placeholder,'">'),n="</span>",r="%".concat(e.data.placeholder,"%");break;case"file":var l=e.data.src;l.includes("GetFile?")&&(l=l.substring(l.indexOf("GetFile?"))),t='<a class="attached-file" href="'.concat(l,'" >'),n="</a>",o=be({type:"file"},e.data)}return{sTag:t,eTag:n,command:o,innerHtml:r}},Ze=function(e){var t="",n="";if(0!==e.filter((function(e){return!["BOLD","ITALIC","UNDERLINE","STRIKETHROUGH"].includes(e)})).length){var r=Z.inlineStylesToCss(e);t='<span style="'.concat((0,f.$e)(r),'">'),n="</span>"}else{var o,i=ve(e);try{for(i.s();!(o=i.n()).done;){var a=o.value;"BOLD"===a&&(t+="<b>",n="</b>"+n),"ITALIC"===a&&(t+="<i>",n="</i>"+n),"UNDERLINE"===a&&(t+="<u>",n="</u>"+n),"STRIKETHROUGH"===a&&(t+="<s>",n="</s>"+n)}}catch(e){i.e(e)}finally{i.f()}}return{sTag:t,eTag:n}},Be=function(e){return{sTag:"<".concat(e.data.url,"|"),eTag:">"}},Te=function(e){var t,n="",r="",o=ve(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;"BOLD"===i&&(n+="*",r="*"+r),"ITALIC"===i&&(n+="_",r="_"+r),"STRIKETHROUGH"===i&&(n+="~",r="~"+r)}}catch(e){o.e(e)}finally{o.f()}return{sTag:n,eTag:r}};lng("off"),lng("immediate"),lng("minutes"),lng("minutes"),lng("hour"),lng("hours"),lng("hours"),lng("hours"),lng("day"),lng("days");var Ee=n(27813),Ie=function(e){var t=e.contentState,n=e.children,r=e.entityKey;return(0,u.tZ)(Ne,{url:t.getEntity(r).getData().url,children:n})},Ae=function(e){var t=e.children,n=e.decoratedText;return(0,u.tZ)(Ne,{url:n,children:t})},De=(0,s.iv)("overflow-wrap:anywhere;.url-edit{color:",c.g.colors.link_blue,";text-decoration:underline;}",""),Re=(0,s.iv)("padding:7px;display:inline-block;a{color:",c.g.colors.dominant_main,";font-weight:bold;}",""),Ne=function(e){var t=e.children,n=e.url;return(0,u.tZ)("span",{css:De,children:(0,u.tZ)(g.y,{content:(0,u.tZ)("span",{css:Re,className:"url-click",contentEditable:!1,children:(0,u.tZ)("a",{href:n,target:"_blank",rel:"noreferrer",children:null==n?void 0:n.truncate(50,"...")})}),children:(0,u.tZ)("span",{className:"url-edit",children:t})})})},ze=function(e){var t=e.children,n=e.decoratedText;return(0,u.tZ)(D.A,{href:{edit:"task",id:/T#(\d+)/.exec(n)[1]},style:{color:c.g.colors.link_blue,fontWeight:"bold"},children:t})},Me=function(e){var t=e.contentState,n=e.children,r=e.entityKey,o=t.getEntity(r).getData(),i=o.color,a=o.backgroundColor;return(0,u.tZ)("span",{style:{color:i,backgroundColor:a},children:n})},Fe=function(e){var t=e.children,n=e.decoratedText;return(0,u.tZ)(qe,{checked:"[*]"===n,children:t})},qe=function(e){var t=e.checked,n=e.children;return(0,u.BX)("span",{style:{display:"inline-block",margin:"0 3px"},children:[(0,u.tZ)(m.JO,{icon:t?"checkbox_checked":"checkbox"}),(0,u.tZ)("span",{style:{display:"none"},children:n})]})},Xe=(0,s.iv)(">span>span[data-text]{",Ee.mp,";background-color:",c.g.colors.yellow,";}",""),Le=(n(82886),n(36220)),Ue=function(e){var t=e.block,n=(0,r.useContext)(ft),o=t.getEntityAt(0);if(o){var i=n.editorState().getCurrentContent().getEntity(o);switch(i.getType()){case"iframe":case"video":return(0,u.tZ)(Ge,{entity:i,block:t});case"file":return(0,u.tZ)(Ve,{entity:i})}}return(0,u.tZ)("div",{children:"unknown atomic entity"})},Ve=function(e){var t=e.entity.getData(),n=t.name,r=t.url;return(0,u.tZ)("a",{className:"attached-file",href:r,rel:"noreferrer",target:"_blank",children:n})},He=(0,s.iv)("position:relative;>.buttons{display:none;position:absolute;top:5px;left:5px;padding:5px;box-shadow:0 0 3px silver;background-color:",c.g.colors.half_white,";font-size:13px;border-radius:5px;>div{margin:0 0.5em;&:hover{color:",c.g.colors.link_blue_hover,";}}a{text-decoration:none;}}&:hover>.buttons{display:flex;}",""),Ge=function(e){var t=e.entity,n=e.block,o=(0,r.useContext)(ft),i=t.getData().src;return(0,u.BX)("div",{css:[He,c.g.classes.iframeVideoSize,"",""],children:["video"===t.getType()?(0,u.tZ)(Le.S,{url:i}):(0,u.tZ)("iframe",{src:i,allowFullScreen:!0,frameBorder:"0",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen"}),(0,u.tZ)("div",{className:"buttons",children:(0,u.tZ)(m.JO,{icon:"trash",onClick:function(){return(0,f.Y3)((function(){return o.onChange(l.removeBlock(o.editorState(),n))}))},toolTip:lng("remove").caps()})})]})},Je=n(68567),We=n(58714),Ke=function(e){var t=e.contentState,n=e.entityKey,o=e.offsetKey,a=e.start,s=e.end,c=e.blockKey,p=(0,r.useContext)(ft),d=t.getBlockForKey(c).getText().length,g=t.getEntity(n).getData(),h=g.src,b=g.width,y=function(e){var r=t.mergeEntityData(n,{width:e});p.onChange(i.EditorState.set(p.editorState(),{currentContent:r}))},v=null==b?void 0:b.endsWith("px"),_=[{label:lng("original width"),onClick:function(){return y()},active:!b},{label:lng("max width"),onClick:function(){return y("100%")},active:"100%"===b},{label:lng("custom width")+(v?" (".concat(b,")"):""),active:v,onClick:function(){(0,Je.cS)(lng("enter image width in pixels"),{title:lng("image size"),confirmText:lng("apply"),inputType:"number",startValue:v?parseInt(b):void 0,inputRequired:!0,inputOptions:{min:50,max:1e3},valueValid:function(e){return(0,We.i)(e,50,1e3)},onConfirm:function(e){return y(e+"px")}})}}];return(0,u.BX)("span",{css:He,style:{display:"inline-block",width:b},contentEditable:!1,children:[(0,u.tZ)("img",{src:h,alt:"image","data-offset-key":o,style:b?{width:b}:{maxHeight:"500px"}}),d===s?" ":"",(0,u.BX)("div",{className:"buttons",children:[(0,u.tZ)(ae.x,{noPortal:!0,options:_,inForm:!0,children:(0,u.tZ)(m.JO,{icon:"width"})}),(0,u.tZ)(m.JO,{icon:"trash",onClick:function(){return(0,f.Y3)((function(){return p.onChange(l.removeEntity(p.editorState(),c,a,s))}))},toolTip:lng("remove").caps()})]})]})};function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ye(Object(n),!0).forEach((function(t){et(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ye(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function et(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function tt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nt(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var rt=function(e,t,n){var r=ot(e,t,n);return i.EditorState.createWithContent((0,i.convertFromRaw)(r),new i.CompositeDecorator([{strategy:function(e,t,n){return(0,Ee.m7)(e,n,"link",t)},component:Ie},(0,Ee.s)(),{strategy:function(e,t){for(var n,r,o=e.getText(),i=/T#\d+/g;null!==(n=i.exec(o));)t(r=n.index,r+n[0].length)},component:ze},{strategy:function(e,t,n){return(0,Ee.m7)(e,n,"color",t)},component:Me},{strategy:function(e,t){for(var n,r,o=e.getText();null!==(n=D.Y3.exec(o));)t(r=n.index,r+n[0].length)},component:Ae},{strategy:function(e,t){for(var n,r,o=e.getText(),i=/(^\s*)\[\*?]\s/g;null!==(n=i.exec(o));)t(r=n.index+n[1].length,r+n[0].length-n[1].length-1)},component:Fe},{strategy:function(e,t,n){return(0,Ee.m7)(e,n,"placeholder",t)},component:function(e){var t=e.children;return(0,u.tZ)("span",{css:Xe,children:t})}},{strategy:function(e,t,n){return(0,Ee.m7)(e,n,"image",t)},component:Ke}]))},ot=function(e,t,n){e=(e=e.startsWith("<div")?e:"<div>".concat(e,"</div>")).replace(/<br \/>/g,"</div><div>");var r=document.createRange().createContextualFragment(e);r.childElementCount||(r=document.createRange().createContextualFragment("<div>".concat(e.mentions(),"</div>")));var o={entityMap:[],blocks:[]},i={list:[]};st(r,i,{addEntity:function(e,t){var n=o.entityMap.length,r=["link"].includes(e)?"MUTABLE":"IMMUTABLE";return o.entityMap.push({data:t,mutability:r,type:e}),n},styleMap:t,placeholders:n});var a,l=tt(i.list);try{for(l.s();!(a=l.n()).done;){var s=a.value;o.blocks.push(it(s.block,s,s.type))}}catch(e){l.e(e)}finally{l.f()}return o.blocks[0]&&"atomic"!==o.blocks[0].type||o.blocks.unshift(at()),"atomic"===o.blocks[o.blocks.length-1].type&&o.blocks.push(at()),o.entityMap=Qe({},o.entityMap),o},it=function(e,t,n){var r=lt(e,t,n);return{key:(0,i.genKey)(),text:t.text,type:r,depth:0,inlineStyleRanges:t.inlineStyleRanges,entityRanges:t.entityRanges,data:t.data}},at=function(){return{key:(0,i.genKey)(),text:"",type:"unstyled",depth:0,inlineStyleRanges:[],entityRanges:[],data:void 0}},lt=function(e,t,n){switch(e.nodeName){case"H1":return"header-one";case"H2":return"header-two";case"H3":return"header-three";case"H4":return"header-four";case"H5":return"header-five";case"H6":return"header-six";case"BLOCKQUOTE":return"blockquote";case"PRE":return"code-block";case"LI":return t.listType;case"DIV":case"P":default:return["image","file","video","iframe"].includes(n)?"atomic":"unstyled"}},st=function e(t,n,r){var o,i,a,l=r.addEntity,s=r.parentNodeName,c=r.styleMap,u=r.placeholders;switch(t.nodeName){case"#text":return"\n"!==t.textContent&&(!["UL","OL"].includes(s)&&{text:t.textContent,entityRanges:[],inlineStyleRanges:[]});case"VIDEO":var p;return n.list.push({type:"video",block:t,text:" ",entityRanges:[{offset:0,length:1,key:l("video",{src:t.src||(null===(p=t.children[0])||void 0===p?void 0:p.src)})}],inlineStyleRanges:[]}),!1;case"IFRAME":return n.list.push({type:"video",block:t,text:" ",entityRanges:[{offset:0,length:1,key:l("iframe",{src:t.src})}],inlineStyleRanges:[]}),!1;case"A":if(null!==(o=t.classList)&&void 0!==o&&o.contains("attached-file"))return n.list.push({type:"file",block:t,text:" ",entityRanges:[{offset:0,length:1,key:l("file",{src:t.href,name:(i=t.href,a=(i=decodeURIComponent(i)).match(/&name=([%\w\-\.]+\.\w{2,4})($|&)/),a||(a=i.match(/&([%\w\-\.]+\.\w{2,4})$/))?a[1]:void 0)})}],inlineStyleRanges:[]}),!1}for(var d={text:"",entityRanges:[],inlineStyleRanges:[]},f=0,m=function(r){var o,i,a=t.childNodes[r],s=e(a,n,{addEntity:l,styleMap:c,parentNodeName:t.nodeName,placeholders:u}),p=function(e){return d.inlineStyleRanges.push({offset:f,length:null==s?void 0:s.text.length,style:e})};if(!1===s)return 1===t.childNodes.length?{v:!1}:"continue";if(s){var m,g=tt(s.inlineStyleRanges);try{for(g.s();!(m=g.n()).done;){var h=m.value;d.inlineStyleRanges.push({offset:h.offset+f,length:h.length,style:h.style})}}catch(e){g.e(e)}finally{g.f()}var b,y=tt(s.entityRanges);try{for(y.s();!(b=y.n()).done;){var v=b.value;d.entityRanges.push({offset:v.offset+f,length:v.length,key:v.key})}}catch(e){y.e(e)}finally{y.f()}}var _="",w={},O=null==s?void 0:s.text;switch(a.nodeName){case"B":case"STRONG":p("BOLD");break;case"U":p("UNDERLINE");break;case"I":p("ITALIC");break;case"S":p("STRIKETHROUGH");break;case"A":_="link",w={url:a.getAttribute("href")};break;case"IMG":O=" ",_="image",w={src:a.src,width:a.style.width||(null!==(o=a.classList)&&void 0!==o&&o.contains("image-max-width")?"100%":void 0)};break;case"SPAN":if(null!==(i=a.classList)&&void 0!==i&&i.contains("mention"))_="mention",w={empty:1};else if(a.dataset.blsm_placeholder){_="placeholder",w={placeholder:a.dataset.blsm_placeholder};var k=null==u?void 0:u[a.dataset.blsm_placeholder];k&&(O=k)}a.style&&(a.style.color&&p(c.addFgColor(a.style.color)),a.style.backgroundColor&&p(c.addBgColor(a.style.backgroundColor)),a.style.textDecoration.includes("underline")&&p("UNDERLINE"),a.style.textDecoration.includes("line-through")&&p("STRIKETHROUGH"),"italic"===a.style.fontStyle&&p("ITALIC"),"bold"===a.style.fontWeight&&p("BOLD"))}if(_){var x,S=l(_,w);d.entityRanges.push({offset:f,length:null===(x=O)||void 0===x?void 0:x.length,key:S})}if(d.text+=O,f=d.text.length,["DIV","P","LI"].includes(a.nodeName)){var j={};a.style["text-align"]?j["text-align"]=a.style["text-align"]:a.dir&&(j["text-align"]="rtl"===a.dir?"right":"left"),n.list.push(Qe(Qe({block:a},d),{},{listType:"OL"===t.nodeName?"ordered-list-item":"unordered-list-item",data:j})),d={text:"",entityRanges:[],inlineStyleRanges:[]},f=0}},g=0;g<t.childNodes.length;g++){var h=m(g);if("continue"!==h&&"object"===$e(h))return h.v}return d};function ct(e){return function(e){if(Array.isArray(e))return dt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||pt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ut(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||pt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pt(e,t){if(e){if("string"==typeof e)return dt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?dt(e,t):void 0}}function dt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ft=(0,r.createContext)(null),mt={name:"e6pman",styles:'.draft-editor-editor{padding:11px 5px;overflow:auto;max-height:70vh;img{max-width:100%;height:auto;}}.fixed_size .public-DraftEditor-content{overflow:auto;height:100px;}.public-DraftStyleDefault-orderedListItem{list-style:auto;&:before{content:"";}}.block_align{&.left>div{text-align:left!important;direction:ltr!important;}&.center>div{text-align:center!important;}&.right>div{text-align:right!important;direction:rtl!important;}}'},gt=function(e){var t=e.value,n=e.placeholder,a=e.onChange,s=e.loadState,p=e.style,d=e.onFocus,m=e.onBlur,g=e.disabled,h=e.mentions,b=e.clear,y=e.theme,v=e.keySubmit,_=e.addMentions,w=e.focusOnShow,O=void 0!==w&&w,k=e.toolbarOptions,x=void 0===k?{font:!0,link:!0}:k,S=e.slackMarkdown,j=(0,r.useRef)(),C=(0,r.useRef)(),P=(0,r.useMemo)((function(){return new Z}),[]),B=ut((0,r.useState)((function(){return s||rt(t,P,x.placeholders)})),2),T=B[0],E=B[1],I=ut((0,r.useState)({}),2),A=I[0],D=I[1],R=ut((0,r.useState)(!1),2),N=R[0],z=R[1],M=ut((0,r.useState)(null),2),F=M[0],q=M[1],X=(0,r.useRef)();X.current=T;var L=function(e){E(e);var t=xe(e,S),n=t.html,r=t.commands;a(n,r,e)};j.current&&(j.current.__orgKeyUp||(j.current.__orgKeyUp=j.current._onKeyUp),j.current._onKeyUp=function(e){if(C.current){if(e.ctrlKey&&"ShiftLeft"===e.code||e.shiftKey&&"ControlLeft"===e.code)return L(l.setBlockData(T,{"text-align":"left"}));if(e.ctrlKey&&"ShiftRight"===e.code||e.shiftKey&&"ControlRight"===e.code)return L(l.setBlockData(T,{"text-align":"right"}))}j.current.__orgKeyUp(e)}),(0,r.useEffect)((function(){if(_){var e=T;null==_||_.forEach((function(t){e=l.addMention(e,t.id,t.name,e.getSelection()),E(e)}))}O&&z(!0)}),[]),(0,r.useEffect)((function(){b&&L(rt(""))}),[b]),(0,r.useEffect)((function(){N&&(E(l.offsetAnchor(T,T.getSelection(),l.getCurrentBlock(T).getText().length)),j.current.focus(),z(!1))}),[N]);var U=function(e){var t=URL.createObjectURL(e);e.type.startsWith("image")?L(l.addImage(T,t,e,e.name)):L(l.addFile(T,t,e,e.name))},V=i.DefaultDraftBlockRenderMap.merge(o.ZP.Map({atomic:{element:"div"}}));return(0,u.tZ)(ft.Provider,{value:{editorState:function(){return X.current},onChange:L},children:(0,u.tZ)("div",{css:mt,className:"DraftEditor",children:(0,u.BX)("div",{className:"draft-editor-root ".concat("fixed"===y?"fixed_size":""),children:[(0,u.tZ)("div",{className:"draft-editor-editor",onClick:function(){return j.current.focus()},style:p,css:c.g.classes.wysiwyg,children:(0,u.tZ)(i.Editor,{editorState:T,onChange:L,handleKeyCommand:function(e,t){if("keySubmit"===e){var n=xe(t,S),r=n.html,o=n.commands;return a(r,o,t),(0,f.g4)(v),"handled"}var l=i.RichUtils.handleKeyCommand(t,e);return l?(L(l),"handled"):"not-handled"},keyBindingFn:function(e){if("Enter"===e.key&&e.ctrlKey)return"keySubmit";var t=T.getSelection();return"@"===e.key&&t.isCollapsed()&&null!=h&&h.length&&(D(t),setTimeout((function(){var e=(0,i.getVisibleSelectionRect)(window);e.direction=l.getCurrentDirection(T),q(e)}),(0,f.tq)()?300:50)),C.current=e.ctrlKey&&"ShiftLeft"===e.code||e.shiftKey&&"ControlLeft"===e.code||e.ctrlKey&&"ShiftRight"===e.code||e.shiftKey&&"ControlRight"===e.code,(0,i.getDefaultKeyBinding)(e)},placeholder:n,ref:j,onFocus:d,onBlur:function(e){var t=xe(T,S),n=t.html,r=t.commands;a(n,r,T),null==m||m(e)},readOnly:g,handlePastedFiles:x.attach&&function(e){for(var t in e)U(e[t])},handlePastedText:function(e,t){return!e&&t?(L(rt(t)),!0):(L(l.pasteText(T,e)),!0)},blockRendererFn:function(e){return"atomic"===e.getType()?{component:Ue,editable:!1,props:{imageEdit:x.media_link}}:null},blockStyleFn:function(e){var t,n=null===(t=e.getData())||void 0===t?void 0:t.get("text-align");return n?"block_align ".concat(n):""},blockRenderMap:V,customStyleMap:P.map})}),(0,u.tZ)(ge,{mentionPos:F,mentionData:function(e,t){t(e?h.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())})):ct(h))},selectMention:function(e){var t=A.merge({focusOffset:A.focusOffset+1});E(l.addMention(T,e.val,e.label,t)),D(null),q(null),z(!0)},exitMention:function(e){("blur"===(null==e?void 0:e.type)||"keyup"===(null==e?void 0:e.type)&&"Escape"===(null==e?void 0:e.key))&&(q(null),z(!0))},uploadFile:U,options:x,styleMap:P,slackMarkdown:S})]})})})},ht=n(5293),bt=["onChange","value","toolbarOptions"];function yt(){return(yt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ot(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var kt=function(e){var t=e.onChange,n=e.value,r=e.toolbarOptions,o=Ot(e,bt);return(0,u.tZ)(gt,_t({onChange:t,value:(n||"").trim(),toolbarOptions:r},o))},xt={name:"16gurcp",styles:"max-width:800px;padding:15px;font-size:1.2em;.draft-editor-editor{min-height:500px;}"},St=function(e){var t=yt({},e);return(0,u.tZ)("div",{css:xt,className:"DocumentRichText",children:(0,u.tZ)(ht.n2,{children:(0,u.tZ)(kt,_t({},t))})})}},5474:function(e,t,n){"use strict";n.d(t,{P:function(){return _}});var r=n(87363),o=(n(57882),n(71134)),i=n(92945),a=n(70917),l=n(16920),s=n(24210),c=n(3533),u=n(35944);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e){return function(e){if(Array.isArray(e))return y(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||b(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=(0,a.iv)("background-color:",l.g.colors.light_blue2,";padding:2px 4px;border-radius:5px;font-size:.9em;position:absolute;",l.g.far,":11px;max-width:50px;overflow:hidden;white-space:nowrap;",""),_=function(e){var t,n,o=e.onChange,a=e.onFocus,l=e.onBlur,c=e.options,p=e.disabled,d=e.readOnly,f=e.emptyOption,m=e.value,b=e.name,y=e.caps,_=void 0===y||y;f&&(c=[{val:"",label:"string"==typeof f?f:""}].concat(h(c))),c.forEach((function(e){return e.label+=""}));var S=g(k(c),2),j=S[0],C=S[1];(0,r.useEffect)((function(){var e=g(k(c),2);j=e[0],C=e[1]}),[c]);var P=g((0,r.useState)(m),2),Z=P[0],B=P[1];(0,r.useEffect)((function(){B(m)}),[m]);var T=null===(t=x(j,Z,"val"))||void 0===t?void 0:t[0];T||(T=j.length>0?j[0]:{}).val!==Z&&B(T.val);var E=(0,r.useContext)(s.q3);E&&E.meta.set(b,j);var I=(0,r.useRef)(),A=g((0,r.useState)(""),2),D=A[0],R=A[1],N=(0,r.useRef)([]),z=function(e){I.current.toggle(!1),B(e),o(e),R("")},M=(0,u.tZ)("div",{style:{padding:"6px"},children:(c||[]).map((function(e,t){return e.optgroup?(0,u.tZ)(O,{groupOptions:e,inputValue:Z,highlight:D,onSelect:z},t):(0,u.tZ)(w,{option:e,inputValue:Z,highlight:D,onSelect:z,caps:_},e.val)}))});return(0,u.tZ)(i.c,{ref:I,modal:M,onFocus:a,onBlur:function(){Z!=m&&o(Z),null==l||l()},label:(null===(n=T)||void 0===n?void 0:n.label)||"",disabled:p,readOnly:d,onKeyDown:function(e){if(!p&&!d){var t=j,n=T.index;if(N.current.length>0&&(t=N.current,n=t.findIndex((function(e){return e.index==n}))),1===e.key.length||"Backspace"===e.key){var r="Backspace"===e.key?D.slice(0,-1):D+e.key.toLowerCase();if(R(r),N.current=x(j,r),0===N.current.length&&(N.current=x(j,r,"val")),r){var i=N.current.reduce((function(e,t){return t.priority<(null==e?void 0:e.priority)?t:e}),{priority:5});(null==i?void 0:i.priority)<5&&B(i.val)}}else switch(["Tab","F5"].includes(e.key)||e.preventDefault(),e.key){case"ArrowUp":var a=n-1;a<0&&(a=t.length-1),B(t[a].val),I.current.opened||o(t[a].val);break;case"ArrowDown":var l=n+1;l>=t.length&&(l=0),B(t[l].val),I.current.opened||o(t[l].val);break;case"Home":B(t[0].val);break;case"End":B(t[t.length-1].val);break;case"Enter":R(""),N.current=[],I.current.toggle(!1,!0),o(Z);break;case"Escape":R(""),N.current=[];break;case"Tab":R(""),N.current=[],I.current.toggle(!1),o(Z)}}},wantedWidth:Math.min(1e3,9*C)+"px",caps:_,extra:D&&(0,u.tZ)("span",{css:v,children:D})})},w=function(e){var t,n,r,o,i,s=e.option,p=e.inputValue,d=e.onSelect,f=e.highlight,m=e.caps,g=s.val,h=g==p,b=m?null===(t=s.label)||void 0===t||null===(n=t.caps)||void 0===n?void 0:n.call(t):s.label;return(0,u.tZ)("div",{css:(r=s,o=r.color,i=r.bgColor,(0,a.iv)("min-height:23px;border-radius:4px;padding:2px 5px;margin:4px;",o?(0,a.iv)("color:",o,";background-color:",i,";&:hover{background-color:",i+"AA",";}",""):(0,a.iv)("&.active{background-color:",l.g.colors.dominant_main,";color:white;}&:hover:not(.active){background-color:",l.g.colors.dominant_main_shade,";color:",l.g.colors.text_main,";}",""),";","")),className:h?"active":"",onClick:d?function(){return d(g)}:void 0,ref:function(e){return h&&(null==e?void 0:e.scrollIntoView())},children:f?(0,u.tZ)(c.y,{text:b,highlight:f}):b},g||"null")},O=function(e){var t,n,r,i=e.groupOptions,a=e.inputValue,l=e.onSelect,s=e.highlight;if(null===(t=i.options)||void 0===t||!t.length)return null;var c=null===(n=i.label)||void 0===n||null===(r=n.caps)||void 0===r?void 0:r.call(n),p=(0,o.wd)(i.options);return(0,u.BX)("div",{label:c,children:[(0,u.tZ)("b",{children:c}),p.map((function(e){return(0,u.tZ)(w,{option:e,inputValue:a,onSelect:l,highlight:s},e.val||"null")}))]})},k=function(e){var t,n=[],r=10,o=m(e);try{for(o.s();!(t=o.n()).done;){var i=t.value;if(i.optgroup){var a,l=m(i.options);try{for(l.s();!(a=l.n()).done;){var s,c=a.value;n.push(c),r=Math.max(r,null==c||null===(s=c.label)||void 0===s?void 0:s.length)}}catch(e){l.e(e)}finally{l.f()}}else{var u;n.push(i),r=Math.max(r,null==i||null===(u=i.label)||void 0===u?void 0:u.length)}}}catch(e){o.e(e)}finally{o.f()}return[n,r]},x=function(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"label",r=[],o=0,i=Object.entries(e);o<i.length;o++){var a=g(i[o],2),l=a[0],s=a[1];if("label"===n)s.label.toLowerCase().startsWith(t)?r.push(d({priority:1,index:parseInt(l)},s)):s.label.toLowerCase().includes(t)&&r.push(d({priority:2,index:parseInt(l)},s));else if(s.val==t)return[d({priority:1,index:parseInt(l)},s)]}return r}},86303:function(e,t,n){"use strict";n.d(t,{_:function(){return g}});var r=n(70917),o=n(16920),i=(n(57882),n(87363)),a=n(66975),l=n(71134),s=n(92945),c=n(15560),u=n(25680),p=n(35944);function d(e){return function(e){if(Array.isArray(e))return f(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var m=(0,r.iv)("label{padding:3px 6px;display:block;",o.g.classes.ellipsis,";input{vertical-align:middle;display:none;}}&.contained,&.contained label{color:",o.g.colors.dominant_white,";background-color:",o.g.colors.dominant_main,";border-color:",o.g.colors.separator_light,";}&.emphasis,&.emphasis label{color:",o.g.colors.dominant_main,";background-color:",o.g.colors.blue_shade,";}",""),g=(0,c.observer)((function(e){var t=e.value,n=void 0===t?[]:t,r=e.options,o=e.onChange,a=e.onFocus,c=e.onBlur,f=e.theme,g=e.className,h=e.disabled,y=e.readOnly,v=e.caps,_=void 0===v||v,w=e.maxLabelLength,O=e.emptyLabel,k=void 0===O?"".concat(lng("select").caps(),"..."):O,x=(0,i.useMemo)((function(){return(r||[]).map((function(e){return e.optgroup?e.options:e})).flat()}),[r]);if("string"==typeof n&&(n=n?n.split(","):[]),"tags"===f)return(0,p.tZ)(u.r,{className:g,children:(r||[]).map((function(e){var t=e.val,r=e.label,i=e.color;return(0,p.tZ)(u.V,{tag:_?r.caps():r,active:n.includes(t),color:i,onClick:function(){return o(n.includes(t)?n.filter((function(e){return e!==t})):[].concat(d(n),[t]))}},t)}))});var S=(0,p.tZ)(p.HY,{children:(r||[]).map((function(e,t){return(0,p.tZ)(b,{option:e,values:n,onChange:o,caps:_},t)}))}),j=x.filter((function(e){var t,r;return null===(t=(r=n).includes)||void 0===t?void 0:t.call(r,e.val)})).map((function(e){return _?e.label.caps():e.label})).join(", ")||k,C=w&&j.length>w?j.slice(0,w)+"...":j;return(0,p.tZ)(s.c,{modal:S,label:C,css:m,className:(0,l.AK)(g,f),onFocus:a,onBlur:c,disabled:h,readOnly:y,caps:_})})),h={name:"1pxl9ke",styles:"font-size:15px"},b=(0,c.observer)((function e(t){var n,r,o=t.option,i=t.values,l=t.onChange,s=t.caps,c=o.color,u=o.label,f=o.optgroup,m=o.options,g=o.val;return f?(null==m?void 0:m.length)>0?(0,p.BX)(p.HY,{children:[(0,p.tZ)("label",{children:(0,p.tZ)("b",{children:u.caps()})}),(m||[]).map((function(t){return(0,p.tZ)(e,{option:t,values:i,onChange:l},t.val)}))]}):null:(0,p.BX)("label",{style:{color:c},children:[(0,p.tZ)(a.JO,{icon:"checkbox"+(null!==(n=i.includes)&&void 0!==n&&n.call(i,g)?"_checked":""),css:h}),(0,p.tZ)("input",{type:"checkbox",checked:l?null===(r=i.includes)||void 0===r?void 0:r.call(i,g):void 0,onChange:l?function(e){var t;return l(e.target.checked?[].concat(d(i),[g]):null===(t=i.filter)||void 0===t?void 0:t.call(i,(function(e){return e!==g})))}:void 0})," ",s?u.caps():u]},g)}))},17381:function(e,t,n){"use strict";n.d(t,{$:function(){return d}});var r=n(70917),o=n(87363),i=n(21518),a=n(39952),l=n(66975),s=n(71134),c=n(16920),u=n(24210),p=n(35944),d=function(e){var t=e.label,n=e.name,d=e.value,f=e.readOnly,m=e.disabled,g=e.onChange,h=e.error,b=(0,r.iv)(".container{display:inline-block;position:relative;background:white;._clear{position:absolute;top:0;",c.g.far,":0;}canvas,.value{display:block;border:2px dashed ",h?c.g.colors.negative:c.g.colors.border,";}}",""),y=(0,o.useRef)(),v=(0,o.useRef)(),_=!(f||m),w=(0,o.useContext)(u.q3),O=function(){_&&(v.current.isEmpty()?(w&&w.meta.set("sigorig_"+n,void 0),g(void 0)):(w&&w.meta.set("sigorig_"+n,v.current.toDataURL()),g((0,s.pH)(y.current))))};return(0,o.useEffect)((function(){if(_)return v.current=new i.Z(y.current),w&&v.current.fromDataURL(w.meta.get("sigorig_"+n)),function(){return v.current.off()}}),[]),(0,p.BX)("div",{css:b,children:[(0,p.tZ)("div",{children:"string"==typeof t?(0,p.tZ)(a.A,{label:t}):t}),(0,p.BX)("div",{className:"container",children:[_&&(0,p.tZ)(l.JO,{className:"_clear",icon:"clear",toolTip:lng("clear"),onClick:function(){v.current.clear(),g(void 0)}}),_&&(0,p.tZ)("canvas",{ref:y,tabIndex:f||m?null:0,onMouseUp:O,onTouchEnd:O}),(0,s.DM)(d)&&!_&&(0,p.tZ)("img",{className:"value",src:d})]})]})}},85946:function(e,t,n){"use strict";n.d(t,{D:function(){return d}});var r=n(16920),o=n(70917),i=n(35944),a=["children","large"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=function(e){var t=e.large;return(0,o.iv)("color:",r.g.colors.dominant_main,";font-weight:600;font-size:",t?1.7:1,"rem;margin:",t?1.2:.4,"rem 0 ",t?.5:.2,"rem;&::first-letter{text-transform:capitalize;}","")},d=function(e){var t=e.children,n=e.large,r=u(e,a);return(0,i.tZ)("div",s(s({css:p({large:n})},r),{},{children:t}))}},80501:function(e,t,n){"use strict";n.d(t,{o:function(){return f}});var r=n(87363),o=n(39483),i=n(35944),a=["value","onChange","autoDir"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var f=(0,r.forwardRef)((function(e,t){var n=e.value,l=e.onChange,c=e.autoDir,p=d(e,a),f=u((0,r.useState)((0,o.d)(n)),2),m=f[0],g=f[1],h=document.documentElement.classList.contains("RTL")?"right":"left",b=c?{direction:m?"rtl":"ltr",textAlign:n.length>0?m?"right":"left":h}:void 0;return(0,i.tZ)("input",s(s({style:b,value:n,onChange:function(e){c&&g((0,o.d)(e.target.value)),null==l||l(e.target.value)}},p),{},{ref:t}))}))},70961:function(e,t,n){"use strict";n.d(t,{M:function(){return O},j:function(){return j}});var r,o=n(70917),i=n(16920),a=n(87363),l=n(76627),s=n.n(l),c=n(70081),u=n(71134),p=n(66975),d=n(92945),f=n(35944),m=["onChange","value"],g=["onBlur","onFocus","onChange","value","defaultTime","disabled"];function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var O=function(e){if((0,u.tq)()&&function(){if((0,u.DM)(r))return r;var e=document.createElement("input");e.setAttribute("type","time");var t="hello";return e.setAttribute("value",t),r=e.value!==t}()){var t=e.onChange,n=e.value,o=w(e,m);return(0,f.tZ)("input",v(v({},o),{},{type:"time",value:n,onChange:t?function(e){return t(e.target.value)}:void 0}))}return(0,f.tZ)(x,v({},e))},k=(0,o.iv)("width:100%;>input{width:100%;}>._picker{background-color:",i.g.colors.bg_main,";border:1px solid #a9a9a9;position:fixed;z-index:2;display:flex;._hours,._minutes{width:50%;}}.clear-date{position:absolute;top:12px;",i.g.classes.far("8px"),";color:",i.g.colors.disabled_text,";}",""),x=function(e){var t=e.onBlur,n=e.onFocus,r=e.onChange,o=e.value,i=e.defaultTime,l=e.disabled,m=w(e,g),b=(0,d.v)({onFocus:n,onBlur:t}),y=b.opened,_=b.toggleDD,O=b.selectRef,x=b.labelRef,S=b.ddRef,C=(0,a.useRef)(o),P=(0,c.tm)();(0,a.useEffect)((function(){return function(){return!P.current&&T()}}));var Z=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.replace(/_/g,"").split(":"),n=h(t,2),r=n[0],o=n[1];return{hour:r,minute:o}},B=function(e){var t=Object.assign({},Z(C.current),e),n=t.hour||t.minute?Math.min(t.hour,23).toString().padStart(2,"0")+":"+Math.min(t.minute,59).toString().padStart(2,"0"):"";C.current=n,n!==o&&r(n)},T=function(){C.current&&B(Z(C.current))},E=h(C.current.split(":"),2),I=E[0],A=E[1],D=void 0===A?"":A,R=(0,u.kE)(I)?I:parseInt(null==i?void 0:i[0]),N=(0,u.kE)(D)?D:parseInt(null==i?void 0:i[1]);return(0,f.BX)("div",{css:k,className:"select_date",ref:O,tabIndex:l?void 0:"0",onKeyDown:function(e){return"Tab"===e.key&&(null!=t&&t(),_(!1))},children:[(0,f.tZ)(s(),v(v({},m),{},{mask:"99:99",type:"text",value:o,onChange:function(e){var t=e.target.value;C.current=t,r(t)},onBlur:T,disabled:l,inputRef:function(e){return x.current=e},onClick:function(){return _(!0)}})),y&&(0,f.tZ)("div",{className:"_picker",ref:S,children:(0,f.tZ)(j,{opened:y,activeTime:{hour:R,minute:N},onTimeChange:B})}),o&&(0,f.tZ)(p.JO,{icon:"close",className:"clear-date",onClick:function(){return B({hour:void 0,minute:void 0})}})]})},S=(0,o.iv)("display:flex;width:100%;direction:ltr;max-width:112px;>div{max-height:230px;}",i.g.classes.border_near("1px solid "+i.g.colors.separator),";._hours,._minutes{",i.g.classes.border_far("1px solid "+i.g.colors.separator),";overflow-y:hidden;&:hover{overflow-y:scroll;}>div{height:32px;line-height:32px;padding:0 12px;cursor:pointer;&:hover{background-color:",i.g.colors.dominant_main_shade,";}&._active{color:",i.g.colors.dominant_main,";}}}",""),j=function(e){var t=e.activeTime,n=e.onTimeChange;return e.opened?(0,f.BX)("div",{css:S,className:"time-picker",children:[(0,f.tZ)("div",{className:"_hours",children:(0,u.w6)(24).map((function(e){return(0,f.tZ)(C,{time:e,type:"hour",onTimeChange:n,activeTime:t},e)}))}),(0,f.BX)("div",{className:"_minutes",children:[(0,u.w6)(12).map((function(e){return(0,f.tZ)(C,{time:5*e,type:"minute",onTimeChange:n,activeTime:t},5*e)})),(0,f.tZ)(C,{time:59,type:"minute",onTimeChange:n,activeTime:t},59)]})]}):null},C=function(e){var t=e.time,n=e.type,r=e.onTimeChange,o=e.activeTime,i=(0,a.useRef)(null),l=(0,a.useMemo)((function(){return t==o[n]}),[o]);return(0,a.useEffect)((function(){l&&i.current.scrollIntoView()}),[l]),(0,f.tZ)("div",{ref:i,className:(0,u.AK)({_active:l}),onClick:function(){return r(_({},n,t))},children:t.toString().padStart(2,"0")})}},49039:function(e,t,n){"use strict";n.d(t,{B:function(){return y}});var r=n(87363),o=n(92945),i=n(71134),a=n(10101),l=n(43698),s=n(35944),c=["tree","value","onChange","disabled","onFocus","onBlur","showSearch"];function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h={name:"1ksdjft",styles:"padding:0 6px"},b={name:"e23o9g",styles:"padding:10px"},y=function(e){var t,n=e.tree,u=e.value,d=e.onChange,m=e.disabled,y=e.onFocus,v=e.onBlur,_=e.showSearch,w=void 0===_||_,O=g(e,c),k=(0,r.useRef)(),x=f((0,r.useState)(""),2),S=x[0],j=x[1],C=f((0,r.useState)(""),2),P=C[0],Z=C[1];Z=(0,r.useCallback)((0,i.Ds)(Z,300),[Z]);var B=(0,s.BX)(s.HY,{children:[w&&(0,s.tZ)("div",{css:b,children:(0,s.tZ)(l.I,{type:"search",wrapped:!0,placeholder:lng("search").caps(),value:S,onChange:function(e){j(e),Z(e)}})}),(0,s.tZ)("div",{css:h,children:(0,s.tZ)(a.mp,p(p({},O),{},{tree:n,filterText:P,activeId:u,onSelect:function(e){return k.current.toggle(!1),d(e)}}))})]}),T=O.nameField||"name";return(0,s.tZ)(o.c,{ref:k,label:(null===(t=(0,i.oH)(n,(function(e){return(null==e?void 0:e.id)===u})))||void 0===t?void 0:t[T])||"".concat(lng("select").caps(),"..."),modal:B,onFocus:y,onBlur:v,disabled:m})}},37999:function(e,t,n){"use strict";n.d(t,{o:function(){return f}});var r=n(70917),o=n(16920),i=n(71134),a=n(66975),l=n(25680),s=n(35944);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var d=(0,r.iv)("max-height:190px;overflow:auto;&._inline{display:inline-flex;flex-wrap:wrap;>div{margin-inline-start:.5em;margin-top:5px;._label+*{margin-inline-start:7px;font-size:0.8em;}}}&._empty{margin-bottom:0;}>div{background-color:",o.g.colors.dominant_main,";color:white;padding:7px 10px;border-radius:1em;display:flex;align-items:center;._id{margin:0 10px;font-size:0.75rem;}._label{flex-grow:1;}}&:not(._inline){>div.list-item{margin-top:4px;}}&.bright:not(._inline){>div.list-item{padding:10px 10px 14px;border-radius:0;background-color:",o.g.colors.bg_main,";color:",o.g.colors.text_main,";border-bottom:1px solid ",o.g.colors.separator,";&:nth-last-child(1){border-bottom:0;}}}&.bright._inline{>div.list-item{background-color:",o.g.colors.bg_input,";color:",o.g.colors.text_main,";border:1px solid ",o.g.colors.separator,";}}._edit{margin-",o.g.far,":5px;}._button{padding:0 5px;white-space:nowrap;}._poster{border-radius:50%;min-width:37px;height:37px;margin:-12px 0;margin-",o.g.near,":-5px;margin-",o.g.far,":8px;text-align:center;background:transparent no-repeat top center;background-size:cover;color:white;}",""),f=function(e){var t=e.items,n=e.showId,r=e.onRemove,c=e.showRemove,f=e.onEdit,m=e.separateLines,g=e.buttons,h=e.updateItem,b=e.theme,y=e.poster;return(0,s.tZ)("div",{css:d,className:(0,i.AK)("items-list",p({_inline:!m,_empty:0===t.length},b||"",!0)),children:Array.isArray(t)&&t.map((function(e){return(0,s.BX)("div",{className:"list-item","data-id":e.id,"data-key":e.key,children:[y&&(0,s.tZ)("div",{className:"_poster",style:{backgroundColor:o.g.func.id2color(e.key),backgroundImage:e.poster?"url('".concat(e.poster,"')"):void 0}}),n&&e.id&&(0,s.BX)("div",{className:"_id",children:["#",e.id]}),(0,s.tZ)("div",{className:"_label",children:e.label||"..."}),e.subLabel&&(0,s.tZ)(l.V,{tag:e.subLabel.text,color:e.subLabel.color}),(null==g?void 0:g.length)>0&&g.map((function(t,n){return(0,s.tZ)("span",{className:"_button",children:(0,s.tZ)(t.Render,u({onChange:function(n){var r;return h(t.onChange?null===(r=t.onChange)||void 0===r?void 0:r.call(t,e,n):e)},item:e},t.props))},n)})),f&&(0,s.tZ)(a.JO,{smallButtonLike:!0,icon:"edit",className:"_edit _button",onClick:function(){return f(e)}}),(!c||c(e))&&r&&(0,s.tZ)(a.JO,{smallButtonLike:!0,className:"_button",icon:"mark_x_light",onClick:function(){return r(e)}})]},e.key)}))})}},41823:function(e,t,n){"use strict";n.d(t,{G:function(){return a}});var r=n(35944);var o=function(e,t){var n=JSON.stringify(e,null,t?1:4);t&&(n=n.slice(2,-1));var r=n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;");return(r=r.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+-]?\d+)?)/g,(function(e){var t="number";return/^"/.test(e)?t=/:$/.test(e)?"key":"string":/true|false/.test(e)?t="boolean":/null/.test(e)&&(t="null"),'<span class="'.concat(t,'">').concat(e,"</span>")}))).replace(/\\\\/g,"\\").replace(/\\"/g,'"').replace(/\\t/g," ").replace(/\\r/g," ").replace(/\\n/g,"<br/>")},i={name:"b104z1",styles:"margin:0;.key{color:#204a87;}.string{color:#4e9a06;}.number{color:#ad7fa8;}.boolean{color:#c4a000;}.null{color:#babdb6;font-style:italic;}"},a=function(e){var t=e.jsonObj,n=e.className;return(0,r.tZ)("pre",{css:i,className:n,dangerouslySetInnerHTML:{__html:o(t,!0)}})}},40441:function(e,t,n){"use strict";n.d(t,{A:function(){return h},H8:function(){return _},N0:function(){return O},Qu:function(){return w},Y3:function(){return v},p4:function(){return b}});var r=n(87363),o=n(73105),i=n(22698),a=n(71134),l=n(16920),s=n(70917),c=n(35944),u=["href","target","children","newTab","toolTip","theme","stopPropagation","processHrefClick"];function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var h=(0,r.forwardRef)((function(e,t){var n,r=e.href,a=e.target,p=e.children,d=e.newTab,m=e.toolTip,h=e.theme,y=e.stopPropagation,v=e.processHrefClick,_=g(e,u),w=null!=r&&r.onClick?null:b(r);void 0===a&&("auto"===(d=null!==(n=d)&&void 0!==n?n:null==r?void 0:r.newTab)?null!=w&&w.match(/^(\w+:)?\/\//)&&!w.startsWith(Blsm.prm.server_name)&&(a="_blank"):!0===d&&(a="_blank"));"highlight"===h&&(_.css=l.g.classes.link),"hover"===h&&(_.css=(0,s.iv)("cursor:pointer;text-decoration:none;&:hover{color:",l.g.colors.link_blue_hover,";text-decoration:underline;}",""));var O=void 0;v&&null!=r&&r.onClick?O=function(e){y&&e.stopPropagation(),r.onClick(e)}:y&&(O=function(e){return e.stopPropagation()});var k=(0,c.tZ)(i.a_,f(f({onClick:O,href:w,target:a,rel:a?"noopener noreferrer":void 0},_),{},{ref:t,children:p}));return m?(0,c.tZ)(o.u,{text:m,children:k}):k})),b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!e)return null;var r=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"/";return e&&!0!==e?t+("object"===p(e)?(0,a.Wh)(e):e):""},o=e.ref;null==o?o=e.newTab?"@close":encodeURIComponent(location.href):"string"==typeof o&&o&&(o=encodeURIComponent(o));var i="";return"string"==typeof e?i=e:e.url?i=e.url:e.user?i="#user/".concat(!0===e.user?Blsm.user.id:e.user).concat(e.tab?"/"+e.tab:""):e.workspace?i="#workspace/".concat(e.workspace,"/").concat(e.tab||"").concat(e.assignment?"//"+e.assignment:""):e.file?i="GetFile?".concat((0,a.HD)(e.file)?e.file:e.file.temp?"temp=".concat(e.file.file_id):e.assignmentId?"type=assignment_file&aid=".concat(e.assignmentId,"&fn=").concat(e.file.file_id.split("_")[1]):(0,a.$t)((0,a.ei)(e.file,["file_id","type","name"]))):e.newrow?i="newrow/?gid="+e.newrow:e.edit?i=["Test","Survey","Courseware","Evaluation","Form","Questionnaire"].includes(e.type)?"qeditor".concat(e.params?r(e.params,"#"):"#q").concat(r(e.id)):"Checklist"===e.type?"checklist".concat(r(e.id)):"#edit/".concat(e.edit,"/").concat(e.id||(0,a.$t)(e.params)).concat(r(e.section)):e.list?i="#list/".concat(e.list,"/").concat((0,a.$t)(e.params)):e.reports?i="#reports":e.report?i="#reports/".concat(e.report,"/").concat((0,a.Wh)(e.params,!1,"",!0),"/").concat(e.tab?e.tab:"").concat(r(e.bookmarkId)):e.reportBookmark?i="#reports/bookmark/bm_id=".concat(e.reportBookmark):e.api?i="api?/"+e.api.csrf():e.launcher?i="Launcher?".concat(e.launcher,"=").concat(e.id).concat(r(e.params,"&")).concat(r(o,"&ref=")).concat(r(e.cuser,"&cuser=")).concat(r("vendev"in(0,a.Lv)()&&1,"&vendev=")).concat(e.iframe?"&iframe":""):e.aicc?i="aicc".concat(r(e.aicc,"?")).concat(r(o,"&ref=")).concat(r("vendev"in(0,a.Lv)()&&1,"&vendev=")):e.playlist?(i="#play".concat(r(e.playlist,"/list=")),e.play&&(i+="".concat(r(e.play,"&id=")))):e.portal?i="#portal".concat(r(e.portal)).concat(r(e.sub_id)).concat(r(e.wid,"/wid=")):e.courseCatalog?(i="#cregistration".concat(r(e.tab)).concat(r(e.params||e.id)),Blsm.user.id&&(Blsm.isFeatureEnabled("digital_library")||Blsm.isFeatureEnabled("online_content"))&&(i="#library/"+i.substring(1))):e.messages||e.message?i="#messages/".concat(e.tab||"in").concat(r(e.id||e.message)).concat(r(e.params)):e.catalog?i="#catalog/".concat(e.term?"term="+e.term:""):e.library?i="#library/".concat(e.tab?e.tab:""):e.categoryTree?i="#category_tree":e.resourcePlanning?i="#resourceplanning/".concat(e.type,"/").concat(e.resourcePlanning):e.calendar?i="#calendar".concat(r(e.params)):e.import?i="#import/".concat(e.import).concat(r(e.params||"")):e.home?i="#home".concat(r(e.home)).concat(r(e.tab)).concat(r(e.params)):e.master?i="#master/".concat(e.master).concat(r(e.ws)):e.challenges?i="#challenges/".concat((0,a.HD)(e.challenges)||(0,a.kE)(e.challenges)?e.challenges:""):e.logout&&(i="?logout=1".concat(r("vendev"in(0,a.Lv)()&&1,"&vendev="))),O()&&/^#[a-z]/i.test(i)&&!/^#portal/i.test(i)?null:(!e.absolute&&"#"===i[0]||"string"==typeof e||e.url||(i=Blsm.prm.Mainref+i),i=i.replace(/\/+$/g,""),t&&(n?window.open(i,"_blank"):location.href=i),i)},y="(https?|ftp|file)://[-A-Z0-9+&@#/%?=~_|!:,.;[\\]]*[-A-Z0-9+&@#/%=~_|[\\]]",v=new RegExp("(\\b".concat(y,"\\b)"),"ig"),_=new RegExp("^".concat(y,"$"),"i"),w=new RegExp("^%\\w+%$","i"),O=function(){return!!window.bportal}},38320:function(e,t,n){"use strict";n.d(t,{a:function(){return l}});var r=n(70917),o=n(16920),i=n(35944),a=(0,r.iv)("position:absolute;background-color:#eee;top:0;left:0;opacity:0.8;width:100%;height:100%;text-align:center;.lds-ellipsis{display:inline-block;position:relative;width:64px;height:100%;}.lds-ellipsis div{position:absolute;top:40%;width:11px;height:11px;border-radius:50%;background:",o.g.colors.blossom,";animation-timing-function:cubic-bezier(0, 1, 1, 0);}.lds-ellipsis div:nth-child(1){left:6px;animation:lds-ellipsis1 0.6s infinite;}.lds-ellipsis div:nth-child(2){left:6px;animation:lds-ellipsis2 0.6s infinite;}.lds-ellipsis div:nth-child(3){left:26px;animation:lds-ellipsis2 0.6s infinite;}.lds-ellipsis div:nth-child(4){left:45px;animation:lds-ellipsis3 0.6s infinite;}@keyframes lds-ellipsis1{0%{transform:scale(0);}100%{transform:scale(1);}}@keyframes lds-ellipsis3{0%{transform:scale(1);}100%{transform:scale(0);}}@keyframes lds-ellipsis2{0%{transform:translate(0, 0);}100%{transform:translate(19px, 0);}}","");function l(){return(0,i.tZ)("div",{css:a,children:(0,i.BX)("div",{className:"lds-ellipsis",children:[(0,i.tZ)("div",{}),(0,i.tZ)("div",{}),(0,i.tZ)("div",{}),(0,i.tZ)("div",{})]})})}},36220:function(e,t,n){"use strict";n.d(t,{S:function(){return v}});var r=n(87363),o=n(70917),i=n(71134),a=n(70081),l=n(22334),s=n(16920),c=n(66975),u=n(33051),p=n(35944);function d(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||m(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||m(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){if(e){if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(e,t):void 0}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h="#ddd",b="#20AE61",y=(0,o.iv)("position:relative;display:inline-block;min-width:250px;>video{display:block;width:100%;height:100%;max-height:calc( 100vh - ",s.g.consts.TOP_BAR_HEIGHT+22+20,"px );}>.controls{background-image:linear-gradient(0, rgba(0, 0, 0, .7), transparent);position:absolute;display:flex;gap:10px;bottom:0;left:0;right:0;padding:20px;user-select:none;color:white;>.ctrl-play{position:relative;min-width:1em;&>.Icon{opacity:0;position:absolute;left:0;pointer-events:none;transition:opacity 300ms ease-in;}&.play .Icon-pause,&.paused .Icon-play,&.ended .Icon-reload{opacity:1;pointer-events:all;}}>.ctrl-track{position:relative;flex-grow:1;&:not(:hover) .ctrl-tooltip{display:none;}.ctrl-tooltip{font-size:11px;position:absolute;bottom:",27,"px;background-color:#545454;color:#FAFAFA;border-radius:3px;padding:2px 5px;margin-left:-28px;&:before{content:'';width:0;height:0;border-left:8px solid transparent;border-right:8px solid transparent;border-top:8px solid #545454;position:absolute;bottom:-7px;left:19px;}}.ctrl-bar{position:absolute;left:0;top:calc((",22,"px - ",3,"px) / 2 - 1px);width:100%;height:",3,"px;background-color:",h,";}.ctrl-thumb{display:inline-block;position:absolute;top:calc((",9,"px + ",3,"px) / 2);transition:left 100ms linear;border-radius:50%;background:",b,";pointer-events:none;width:",9,"px;height:",9,"px;}}>.ctrl-time{width:70px;font-size:14px;text-align:center;}>.ctrl-vol{position:relative;input[type=range][orient=vertical]{writing-mode:bt-lr;-webkit-appearance:slider-vertical;}.ctrl-volume-input{position:absolute;bottom:18px;left:5px;width:13px;transition:opacity 200ms ease-in,height 200ms ease-in;height:0;opacity:0;&.visible{height:120px;opacity:1;}}}.ctrl-rate{.Icon-mark_x{font-size:.7em;}}}>.Icon-go_forward,>.Icon-go_backward{position:absolute;background-color:rgba(0, 0, 0, .3)!important;color:white;top:calc(50% - 16px);left:20px;&.Icon-go_forward{left:auto;right:20px;}}.controls,.Icon-go_forward,.Icon-go_backward{opacity:0;transition:opacity .4s ease-in-out;}&.show_controls{.controls,.Icon-go_forward,.Icon-go_backward{opacity:1;}}",""),v=function(e){var t,n=e.url,o=e.isAudio,s=e.startSecond,m=void 0===s?0:s,g=e.endSecond,v=e.autoPlay,_=e.allowContentMenu,O=e.mediaRef,k=/#t=([\d:.]+)(?:,([\d:.]+))?/,x=null===(t=n)||void 0===t?void 0:t.match(k);Array.isArray(x)&&(m=tpl.time2seconds(x[1])||0,g=tpl.time2seconds(x[2])||void 0,n=n.replace(k,""));var S=(0,r.useRef)(),j=(0,r.useRef)(),C=f((0,r.useState)("paused"),2),P=C[0],Z=C[1],B=f((0,r.useState)(!1),2),T=B[0],E=B[1],I=f((0,r.useState)([]),2),A=I[0],D=I[1],R=f((0,r.useState)(0),2),N=R[0],z=R[1],M=f((0,r.useState)(""),2),F=M[0],q=M[1],X=f((0,r.useState)(1),2),L=X[0],U=X[1],V=f((0,r.useState)(!1),2),H=V[0],G=V[1],J=f((0,r.useState)(1),2),W=J[0],K=J[1],$=f((0,r.useState)(!1),2),Y=$[0],Q=$[1],ee=f((0,r.useState)(null),2),te=ee[0],ne=ee[1],re=!o&&!!i.Rh,oe=f((0,r.useState)(!1),2),ie=oe[0],ae=oe[1];(0,a.OR)("fullscreenchange",(function(){return ae(document.fullscreenElement===S.current)}),document);var le=function(){return j.current.play()},se=function(){return 4===j.current.readyState&&j.current.pause()},ce=function(){var e=j.current,t=e.paused;setTimeout((function(){t===e.paused&&(t?le():se())}),50)},ue=(0,r.useRef)(),pe=function(e){clearTimeout(ue.current),e?Q(!0):ue.current=setTimeout((function(){return Q(!1)}),500)},de=function(e){return e.nativeEvent.offsetX/e.currentTarget.clientWidth*me()},fe=function(e){var t="number"==typeof e?e:m+de(e),n=j.current,r=!n.paused;Math.abs(n.currentTime-t)>.1&&(4===n.readyState&&n.pause(),n.currentTime=t,r&&n.play())},me=function(){return(g||j.current.duration)-m},ge=function(){var e=j.current;e.currentTime<m&&(e.currentTime=m),v&&4===e.readyState&&e.paused&&e.play(),U(e.volume),he()},he=function(){for(var e=j.current,t=["to right"],n=me(),r=0;r<e.buffered.length;r++){var o=Math.max(0,e.buffered.start(r)-m),i=e.buffered.end(r)-m;if(i>0){g&&(i=Math.min(g,i));var a=" "+100*o/n+"%",l=" "+100*i/n+"%";t.push(h+a,b+a,b+l,h+l)}}D(t)},be=function(e){var t=j.current;fe(Math.max(m,Math.min(g||t.duration,t.currentTime+e)))},ye=(0,r.useCallback)((0,i.Ds)((function(){return E(!1)}),3e3),[]),ve=o?"audio":"video";return(0,p.BX)("div",{ref:S,css:y,tabIndex:0,onKeyUp:function(e){"Space"===e.code&&ce();var t="ArrowRight"===e.key?5:"ArrowLeft"===e.key?-5:0;0!==t&&be(t)},onMouseMove:o?void 0:function(){E(!0),ye()},className:(0,i.AK)("MediaPlayer",{fullscreen:ie,muted:"0"===L,"is-audio":o,show_controls:T||o||"play"!==P}),children:[(0,p.tZ)(ve,{ref:function(e){return j.current=e,O&&(O.current=e)},src:n,onClick:ce,onPlay:function(){var e=j.current;e.currentTime<m&&(e.currentTime=m),g&&e.currentTime>g?se():Z("play")},onPause:function(){return Z(g&&j.current.currentTime>=g?"ended":"paused")},onEnded:function(){return Z("ended")},onCanPlay:ge,onCanPlayThrough:ge,onTimeUpdate:function(){var e=j.current,t=Math.max(0,e.currentTime-m);g&&e.currentTime>=g&&"play"===P&&se();var n=Math.min(1,Math.max(0,t/me()));z(n),q((0,l.xt)(t))},onProgress:he,onLoadedData:he,onLoadedMetadata:he,muted:H,onContextMenu:_?void 0:function(e){return e.preventDefault()}}),o&&(0,p.tZ)(w,{on:"play"===P,onClick:ce}),(0,p.BX)("div",{className:(0,i.AK)("controls"),children:[(0,p.BX)("div",{className:(0,i.AK)("ctrl-play",P),children:[(0,p.tZ)(c.JO,{icon:"play",onClick:le}),(0,p.tZ)(c.JO,{icon:"pause",onClick:se}),(0,p.tZ)(c.JO,{icon:"reload",onClick:function(){j.current.currentTime=m,le()}})]}),(0,p.tZ)("div",{className:"ctrl-time",children:F}),(0,p.BX)("div",{className:"ctrl-vol",onMouseEnter:function(){return pe(!0)},onMouseLeave:function(){return pe(!1)},onClick:function(){return G(!H)},children:[(0,p.tZ)(c.JO,{icon:H?"volume_mute":"volume"}),(0,p.tZ)("input",{className:(0,i.AK)("ctrl-volume-input",{visible:Y}),type:"range",min:"0",max:"1",step:"0.01",orient:"vertical",onClick:function(e){return e.stopPropagation()},value:H?0:L,onChange:function(e){return t=e.target.value,(n=j.current)&&(n.volume=t),U(t),void G("0"===t);var t,n}})]}),(0,p.tZ)("div",{className:"ctrl-rate",children:(0,p.BX)(u.x,{onSelect:function(e){var t=j.current;t&&(t.playbackRate=e),K(e)},options:[{separator:!0,label:lng("playback rate").caps()}].concat(d([.25,.5,.75,1,1.25,1.5,1.75,2].map((function(e){return{val:e,label:e,active:e===W}})))),children:[W,(0,p.tZ)(c.JO,{icon:"mark_x"})]})}),(0,p.BX)("div",{className:"ctrl-track",onMouseUp:function(e){return fe(e)},onMouseMove:function(e){return function(e){var t=de(e),n=e.nativeEvent.offsetX;ne(t>=0&&n?{pos:n+2,label:(0,l.xt)(t)}:null)}(e)},children:[(0,p.tZ)("div",{className:"ctrl-bar",style:{backgroundImage:"linear-gradient("+A.join(",")+")"}}),(0,p.tZ)("div",{className:"ctrl-thumb",style:{left:"calc(".concat(100*N,"% - ").concat(4.5*N,"px )")}}),te&&(0,p.tZ)("div",{className:"ctrl-tooltip",style:{left:te.pos},children:te.label})]}),re&&(0,p.tZ)(p.HY,{children:(0,p.tZ)("div",{children:ie?(0,p.tZ)(c.JO,{icon:"exit_full_screen",onClick:function(){return document.exitFullscreen()}}):(0,p.tZ)(c.JO,{icon:"full_screen",onClick:function(){var e;return null===(e=S.current)||void 0===e?void 0:e[i.Rh]()}})})})]}),(0,p.tZ)(c.JO,{icon:"go_forward",buttonLike:!0,onClick:function(){return be(5)}}),(0,p.tZ)(c.JO,{icon:"go_backward",buttonLike:!0,onClick:function(){return be(-5)}})]})},_=function(e){return(0,o.iv)("height:150px;width:100%;display:flex;justify-content:space-between;flex-flow:wrap-reverse;>i{animation-name:equalizer-i;animation-duration:2.2s;animation-iteration-count:infinite;animation-timing-function:ease-in-out;display:inline-block;flex-grow:1;height:9%;transition:height 100ms;&:nth-child(7n+1){animation-delay:-1s;}&:nth-child(7n+2){animation-delay:-0.5s;}&:nth-child(7n+3){animation-delay:-1.5s;}&:nth-child(7n+4){animation-delay:-0.25ms;}&:nth-child(7n+5){animation-delay:-1.25s;}&:nth-child(7n+6){animation-delay:-0.75s;}&:nth-child(7n+7){animation-delay:-1.5s;}}",!e&&"& > i {\n\t\tanimation-name: equalizer-off;\n\t\tanimation-delay: 0ms !important;\n\t\tanimation-duration: 300ms;\n\t\tanimation-iteration-count: 1;\n\t}",";@keyframes equalizer-off{0%{height:50%;}100%{height:8%;}}@keyframes equalizer-i{100%,0%{height:20%;}20%{height:50%;}40%{height:30%;}60%{height:100%;}80%{height:60%;}}","")},w=function(e){var t=e.on,n=e.onClick;return(0,p.tZ)("div",{css:_(t),className:"Equalizer",style:{columnGap:2},onClick:n,children:d(Array(10).keys()).map((function(e){return(0,p.tZ)("i",{style:{backgroundColor:s.g.colors.blossom}},e)}))})}},28534:function(e,t,n){"use strict";n.d(t,{EP:function(){return Z},LB:function(){return P},Mj:function(){return E},nb:function(){return T},qV:function(){return B},qX:function(){return k}});var r=n(70917),o=n(66975),i=n(16920),a=(n(57882),n(61533)),l=n.n(a),s=n(27821),c=n(15560),u=n(86344),p=n(29180),d=n(71134),f=n(40441),m=n(95405),g=n(68567),h=n(24524),b=n(35944);function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){var t=e.type,n=e.color,o=e.onClick;return(0,r.iv)("background-color:",i.g.colors.bg_main,";border-radius:6px;border:1px solid ",n,";box-shadow:0 2px 26px ",(0,u.mR)(n,.3),";padding:12px;margin:15px;display:flex;width:fit-content;>div{display:flex;max-width:min(","error"===t?"850px":"350px",", 100vw - 30px);}.main_icon{color:",n,";font-size:32px;",i.g.classes.margin_far("12px"),";}.Icon-mark_x_light{font-size:20px;cursor:pointer;}.content{flex-grow:1;}.title{font-weight:600;font-size:1.1em;flex-grow:1;color:",i.g.colors.text_main,";}.msg{margin-top:4px;overflow:auto;color:",i.g.colors.text_main,";max-width:","error"===t?"none":"270px",";max-height:300px;",o&&"cursor: pointer",";}.remark{font-size:.8em;color:",i.g.colors.text_sec,";padding-top:7px;display:flex;justify-content:flex-end;>*:not(:first-child){margin-inline-start:5px;}}",i.g.mQuery.mobile,"{margin:10px;}","")},k=function(e){var t,n=e.title,r=e.msg,a=e.type,l=e.icon,s=e.color,c=e.onClick,u=e.href,g=e.onClose,h=e.time,y=e.remark,v=e.htmlMsg,_=e.altIconComponent,w=e.closeOnClick;switch(a){case"error":s=s||i.g.colors.negative,l=l||"sign_notification";break;case"warning":s=s||i.g.colors.yellow,l=l||"menu_info";break;case"notice":s=s||i.g.colors.grey;break;default:s=s||i.g.colors.positive,l=l||"sign_ok"}var k=u?f.A:"div";return(0,b.tZ)(m.SV,{children:(0,b.tZ)(k,{css:O({type:a,color:s,onClick:c||u}),href:u,onClick:function(){null==c||c(),"error"!==a&&w&&g()},className:"blsm-notice",children:(0,b.BX)("div",{children:[_?(0,b.tZ)("div",{className:"main_icon",children:_}):l&&(0,b.tZ)(o.JO,{icon:l,className:"main_icon"}),(0,b.BX)("div",{className:"content",children:[n&&(0,b.tZ)("div",{className:"title",children:(0,d.rj)(n.caps())}),v?(0,b.tZ)("div",{className:"msg",dangerouslySetInnerHTML:v?{__html:r}:void 0}):(0,b.tZ)("div",{className:"msg",children:(0,d.rj)(null==r||null===(t=r.caps)||void 0===t?void 0:t.call(r))}),(h||y)&&(0,b.BX)("div",{className:"remark",children:[h&&(0,b.tZ)(p.qp,{time:h}),y&&(0,b.tZ)("span",{children:y})]})]}),g&&(0,b.tZ)("div",{children:(0,b.tZ)(o.JO,{icon:"mark_x_light",buttonLike:!0,onClick:function(e){e.stopPropagation(),e.preventDefault(),g()}})})]})})})},x=(0,r.iv)("position:fixed;bottom:0;",i.g.far,":0;z-index:",i.g.z.notice,";display:flex;flex-direction:column;align-items:flex-end;word-break:break-word;@keyframes in_animation{from{transform:translateX(",i.g.isRTL?"-":"","500px);}to{transform:translateX(0);}}>div{animation:in_animation .5s;}",""),S=(0,s.observable)([]),j=(0,c.observer)((function(){return S.length?(0,b.tZ)("div",{css:x,children:S.map((function(e){return(0,b.tZ)(k,v(v({},e),{},{onClose:function(){var t;return S.remove(e),null===(t=e.onClose)||void 0===t?void 0:t.call(e)}}),e.__uid)}))}):null}));(0,d.Um)((function(){l().render((0,b.tZ)(j,{}),(0,d.wq)("NoticeQueue"))}));var C=0,P=function(e){S.length>=3&&S.pop(),e.__uid=C++,S.unshift(e)},Z=function(e){return S.remove(S.find((function(t){return t.id===e})))},B=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lng("success"),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(v({msg:e,title:t,type:"success"},n))},T=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lng("warning"),n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(v({msg:e,title:t,type:"warning"},n))},E=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lng("error"),o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return P(Object.assign(o,{msg:e,title:r,type:"error",time:(0,d.c7)(),remark:(null===(t=Blsm.prm.revision)||void 0===t?void 0:t.branch)&&"".concat(Blsm.prm.revision.branch," ").concat(null===(n=Blsm.prm.revision.hash)||void 0===n?void 0:n.substring(0,7))}))};Blsm.Message=Blsm.Alert=function(e){return B(e,lng("pay attention").caps())},Blsm.Success=function(e){return(0,g.qR)((0,b.tZ)(h.M,{}),{title:e,width:(0,d.tq)()?"calc(100% - 2vw)":void 0})},Blsm.Warning=function(e){return T(e)},Blsm.Error=function(e,t,n){return E(e,t||lng("error"),n||{})},Blsm.Confirm=function(e,t,n){return(0,g.BB)(e,v(v({},n),{},{onConfirm:function(){return setTimeout((function(){return t()}),1)}}))},window.onerror=function(e,t,n,r){var o;if(console&&console.warn({errorMsg:e,url:t,lineNumber:n,colNumber:r}),e){var i=(0,d.en)(t||"");if(window.location.hostname===i.hostname){if(!_.find(["collaboration.js","collaboration_vendors.js","tinymce.min.js","vendors.js","jquery-ui","vendors.js","lib-jitsi-meet","external_api"],(function(e){return-1<t.indexOf(e)}))){["Failed to parse URL parameter value: undefined","ResizeObserver loop limit exceeded","Uncaught SyntaxError: Unexpected token <"].indexOf(e)>-1||P({title:lng("an error occurred in browser")+" :(",msg:e,type:"error",time:(0,d.c7)(),remark:"".concat(n||r?"(".concat(n,":").concat(r,")"):""," ").concat(Blsm.prm.revision?"".concat(Blsm.prm.revision.branch," ").concat(null===(o=Blsm.prm.revision.hash)||void 0===o?void 0:o.substring(0,7)):"")})}}}}},75247:function(e,t,n){"use strict";n.d(t,{h:function(){return l}});var r=n(539),o=n(26291),i=n(35944);var a={name:"1xajjm9",styles:"padding-top:150px"},l=function(){return(0,i.tZ)(o.T,{children:(0,i.tZ)("div",{css:a,children:(0,i.tZ)(r.$,{})})})}},26291:function(e,t,n){"use strict";n.d(t,{T:function(){return c},a:function(){return p}});var r=n(70917),o=n(16920),i=n(67033),a=n(71134),l=n(35944),s=(0,r.iv)(o.g.classes.page_position,";",o.g.mQuery.notMobile,"{&.internalScrolling{display:flex;flex-direction:column;height:calc(100vh - ",o.g.consts.TOP_BAR_HEIGHT,"px);}}&.sidePadding{padding-left:20px;padding-right:20px;}&.bottomPadding{padding-bottom:20px;}",""),c=function(e){var t=e.children,n=e.className,c=e.contBG,u=e.sidePadding,p=e.bottomPadding,d=e.internalScrolling;return(0,l.BX)(i.U,{children:[c&&(0,l.tZ)(r.xB,{styles:(0,r.iv)("html{background-color:",o.g.colors.bg_page_containers,";}","")}),(0,l.tZ)("div",{css:s,className:(0,a.AK)(n,"react_container",{sidePadding:u,bottomPadding:p,internalScrolling:d}),children:t})]})},u=(0,r.iv)("padding-top:90px;",o.g.classes.content_width,";margin:-65px auto ",o.g.consts.CONT_MARGIN,"px;color:",o.g.colors.text_sec,";display:flex;>*:nth-of-type(2){flex-grow:1;}",""),p=function(e){var t=e.children;return(0,l.tZ)("div",{css:u,className:"TopWidgets",children:t})}},84268:function(e,t,n){"use strict";n.d(t,{Q:function(){return l},Z:function(){return c}});var r=n(70917),o=n(16920),i=n(35944);var a={name:"1yjx7km",styles:"padding:20px"},l=function(e){var t=e.children,n=e.className;return(0,i.tZ)("div",{css:a,className:n,children:t})},s=(0,r.iv)("display:flex;flex-grow:1;overflow:hidden;",o.g.mQuery.mobile,"{flex-direction:column;}>.MainCol{padding:20px 10px;flex-grow:1;background-color:",o.g.colors.bg_page_containers,";",o.g.mQuery.notMobile,"{overflow:auto;}}",""),c=function(e){var t=e.children,n=e.side,r=e.className;return(0,i.BX)("div",{css:s,className:r,children:[n,t&&(0,i.tZ)("div",{className:"MainCol",children:t})]})}},82883:function(e,t,n){"use strict";n.d(t,{EL:function(){return m},Fz:function(){return y},Of:function(){return _},v7:function(){return h}});var r=n(15560),o=n(70917),i=n(16920),a=n(71134),l=(n(57882),n(86344)),s=n(31092),c=n(35944);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=(0,o.iv)("height:350px;background-image:radial-gradient(circle at 50% -135%, ",i.g.theme.color_1===i.g.colors.purple?"#ce94fc":(0,l.HO)(i.g.theme.color_1,.4)," 30%, ",(0,l.HO)(i.g.theme.color_1,-.3)," 80%);position:relative;>._head_content{",i.g.classes.content_width,";position:relative;display:flex;flex-direction:column;justify-content:center;}>._waves{position:absolute;left:0;bottom:0;width:100%;height:250px;}",""),m=(0,r.observer)((function(e){var t=e.children,n=e.className;return(0,c.tZ)("div",{css:f,className:n,children:(0,c.tZ)("div",{className:"_head_content",children:t})})})),g=function(e){var t=e.banner,n=e.noGradient;return(0,o.iv)("color:",i.g.colors.text_main,";border-bottom:1px solid ",i.g.colors.separator,";background-color:",i.g.colors.bg_main,";",t||n?"":"background-image: linear-gradient(".concat(i.g.isRTL?"-":"","231deg, ").concat((0,l.mR)(i.g.theme.color_1,1),", transparent);")," ",i.g.mQuery.ie,"{max-height:120px;}>._top{padding:20px;display:flex;align-items:center;._head_content{display:flex;justify-content:space-between;flex-grow:1;align-items:center;.actions_banner{position:absolute;",i.g.classes.margin_far("20px"),";",i.g.classes.far("10px"),";top:120px;z-index:2;display:flex;flex-direction:row;width:50px;justify-content:space-evenly;align-items:center;._btn{background-color:rgba(255, 255, 255, 0.5)!important;border-radius:50%;.buttonLike{background:transparent!important;}}}.actions{display:flex;flex-direction:row;align-items:center;&:not(:empty){padding:8px;background-color:rgba(255, 255, 255, 0.5);border-radius:13px;}}&._banner{height:270px;background-image:url(",i.g.func.imgUrl(t),");background-position:center;background-repeat:no-repeat;background-size:cover;border-radius:10px;}>.headline{>._title{font-size:1.8rem;font-weight:600;",i.g.classes.margin_near(t?"20px":0),";padding:5px 10px;color:",t?"#ffffff":i.g.colors.text_main,";z-index:",t?3:0,";position:",t?"absolute":"",";",t&&"background-color: rgba(0, 0, 0, .3) !important; border-radius: 10px;",";}>._desc{color:",i.g.colors.text_sec,";margin-top:.5rem;",t&&"background-color: rgba(0, 0, 0, .3) !important; border-radius: 10px;",";}._count{display:inline-block;background-color:",i.g.colors.dominant_main,";color:white;padding:0 0.4em;border-radius:10px;font-weight:600;font-size:.9em;}}}}",i.g.mQuery.notMobile,"{&.sticky{position:sticky;top:",i.g.consts.TOP_BAR_HEIGHT,"px;z-index:1;}}",i.g.mQuery.mobile,"{>._top{padding:8px 8px 0;>.headline{>._title{font-size:1.3rem;}}}}&.simple{border-bottom-width:0;>._top{padding-bottom:0;text-align:center;>.headline>._title{font-size:1.4rem;}}}>._bottom{display:flex;justify-content:space-between;}","")},h=function(e){var t=e.headline,n=e.desc,r=e.actions,o=e.tabs,l=e.sticky,u=e.count,d=e.simple,f=e.after_tabs,m=e.banner,h=void 0!==m&&m,b=e.noGradient,y=void 0!==b&&b;return(0,c.BX)("div",{css:g({banner:h,noGradient:y}),className:(0,a.AK)("BasicHeader",{sticky:l,simple:d}),children:[(0,c.tZ)("div",{className:"_top",children:(0,c.BX)("div",{className:"_head_content ".concat(h?"_banner":""),children:[(0,c.BX)("div",{className:"headline",children:[(0,c.BX)("div",{className:"_title",children:["string"==typeof t?t.caps():t," ",u>0&&(0,c.tZ)("span",{className:"_count",children:u})]}),(0,c.tZ)("div",{className:"_desc",children:"string"==typeof n?n.caps():n})]}),(0,c.tZ)("div",{className:h?"actions_banner":"actions",children:r})]})}),(0,c.BX)("div",{className:"_bottom",children:[(0,c.tZ)("div",{css:i.g.classes.flex_grow,children:o&&(0,c.tZ)(s.m,p(p({},o),{},{morePadding:!0}))}),f]})]})},b=(0,o.iv)("height:76px;background-color:",i.g.theme.color_1,";",""),y=function(e){var t=e.children;return(0,c.tZ)("div",{css:b,children:t})},v=(i.g.consts.TOP_BAR_HEIGHT,i.g.theme.color_1===i.g.colors.purple||(0,l.HO)(i.g.theme.color_1,.4),(0,l.HO)(i.g.theme.color_1,-.3),function(e){return(0,o.iv)("display:flex;border-bottom:1px solid ",i.g.colors.separator,";margin-bottom:20px;justify-content:space-between;",e&&"padding: 20px;"," .content{display:flex;flex-direction:column;justify-content:space-between;.headlines{padding-top:40px;.headline{color:",i.g.colors.text_main,";font-size:1.7rem;font-weight:600;}.tagline{margin-top:10px;color:",i.g.colors.text_sec,";}}}>img{width:550px;",i.g.classes.margin_far("100px"),";}","")}),_=function(e){var t=e.headline,n=e.tagline,r=e.image,o=e.content,i=e.padding,a=e.contentStyle;return(0,c.BX)("div",{css:v(i),children:[(0,c.BX)("div",{className:"content",css:a,children:[(t||n)&&(0,c.BX)("div",{className:"headlines",children:[t&&(0,c.tZ)("div",{className:"headline",children:null==t?void 0:t.caps()}),n&&(0,c.tZ)("div",{className:"tagline",children:n})]}),(0,c.tZ)("div",{children:o})]}),r&&(0,c.tZ)("img",{src:r,alt:""})]})}},55758:function(e,t,n){"use strict";n.d(t,{h:function(){return s}});var r=n(70917),o=n(16920),i=(n(57882),n(71134)),a=n(35944),l=function(e){var t=e.width;return(0,r.iv)("flex-shrink:0;padding:18px 10px 10px;",o.g.classes.border_far("1px solid "+o.g.colors.separator),";overflow-y:auto;",o.g.mQuery.notMobile,"{width:",t,";}","")},s=function(e){var t=e.children,n=e.className,r=e.width,o=void 0===r?"350px":r;return(0,a.tZ)("div",{css:l({width:o}),className:(0,i.AK)("SidePanel",n),children:t})}},75151:function(e,t,n){"use strict";n.d(t,{t:function(){return c}});var r=n(66975),o=n(71134),i=(n(57882),n(7392)),a=n(16920),l=n(35944);var s={name:"1rmz7lu",styles:"display:flex;justify-content:center;margin:1em 0;&.spread{width:100%;justify-content:space-between;}>div{min-width:auto;margin:0 1px;}&.compact{margin:0;>div{padding:0 2px;}}"},c=function(e){var t=e.totalItems,n=e.pageSize,c=e.curPage,u=e.maySeeAll,p=e.onChange,d=e.compact,f=e.spread,m=Math.ceil(t/n);if(!t||!n||m<2||isNaN(m))return null;var g,h=parseInt(c)+1,b=function(e){return function(){return function(e){return e!==c&&p&&p(e)}(Math.min(m,Math.max(e,u?0:1))-1)}},y=[];for(y.push((0,l.tZ)(i.l,{disabled:h<2,onClick:b(h-1),children:d?(0,l.tZ)(r.JO,{icon:a.g.isRTL?"arrow_right":"arrow_left"}):lng("previous").caps()},"prev")),g=1;g<=(h<3?5:2)&&g<=m;g++)y.push((0,l.tZ)(i.l,{theme:g===h?"contained":void 0,onClick:b(g),children:g},g));var v=h>=m-1?m-4:h-1;for(v>g+1&&(g=v,y.push((0,l.tZ)(i.l,{children:"…"},"hellip1")));g<=h+1&&g<=m;g++)y.push((0,l.tZ)(i.l,{theme:g===h?"contained":void 0,onClick:b(g),children:g},g));for(m-2>g&&(g=m-1,y.push((0,l.tZ)(i.l,{children:"…"},"hellip2")));g<=m;g++)y.push((0,l.tZ)(i.l,{theme:g===h?"contained":void 0,onClick:b(g),children:g},g));return y.push((0,l.tZ)(i.l,{disabled:h>=m||0===h,onClick:b(h+1),children:d?(0,l.tZ)(r.JO,{icon:a.g.isRTL?"arrow_left":"arrow_right"}):lng("next").caps()},"next")),u&&y.push((0,l.tZ)(i.l,{theme:0===h?"contained":void 0,onClick:b(0),children:lng("show all").caps()},"all")),(0,l.tZ)("div",{css:s,className:(0,o.AK)({compact:d,spread:f}),children:y})}},1786:function(e,t,n){"use strict";n.d(t,{k:function(){return i},x:function(){return a}});var r=n(3755),o=n(35944),i=function(e){var t=e.password,n=void 0===t?"":t,i=e.username,l=e.oldPassword,s=e.requirements,c=void 0===s?{}:s,u=e.className,p=a(n,{username:i,oldPassword:l,requirements:c});return(0,o.BX)("div",{className:u,children:[p.message.caps()," ",(0,o.tZ)(r.k,{numerator:Math.max(0,p.rate),denominator:4,topLabels:!1,valueInBar:!1,showPercent:!1,colorByVal:!0})]})},a=function(e,t){var n=t.username,r=t.oldPassword,o=t.requirements,i=o.minlength,a=void 0===i?0:i,l=o.change_threshold,s=void 0===l?-1:l,c=o.complex;if(!e)return{rate:-1,message:""};if(e.length<a)return{rate:0,message:lng("too short")};if(n&&e.toLowerCase().match(n.toLowerCase()))return{rate:0,message:lng("too similar to user name")};if(void 0!==r){if(!r)return{rate:0,message:lng("please enter your current password.")};if(function(e,t){var n,r,o=e.length,i=t.length,a=[];if(!o)return i;if(!i)return o;for(n=0;n<=o;n++)a[n]=[n];for(r=0;r<=i;r++)a[0][r]=r;for(r=1;r<=i;r++)for(n=1;n<=o;n++)e[n-1]==t[r-1]?a[n][r]=a[n-1][r-1]:a[n][r]=Math.min(a[n-1][r],a[n][r-1],a[n-1][r-1])+1;return a[o][i]}(e,r)<=s)return{rate:0,message:lng("similar to current password")}}var u,p,d=(p=0,p+=(u=e).length,u.length>0&&u.length<=4?p+=u.length:u.length>=5&&u.length<=7?p+=6:u.length>=8&&u.length<=15?p+=12:u.length>=16&&(p+=18),u.match(/[a-z]/)&&(p+=1),u.match(/[A-Z]/)&&(p+=5),u.match(/\d/)&&(p+=5),u.match(/.*\d.*\d.*\d/)&&(p+=5),u.match(/[!,@,#,$,%,^,&,*,?,_,~]/)&&(p+=5),u.match(/.*[!,@,#,$,%,^,&,*,?,_,~].*[!,@,#,$,%,^,&,*,?,_,~]/)&&(p+=5),u.match(/(?=.*[a-z])(?=.*[A-Z])/)&&(p+=2),u.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])/)&&(p+=2),u.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z])(?=.*[!,@,#,$,%,^,&,*,?,_,~])/)&&(p+=2),p);return d>40?{rate:4,message:lng("strong")}:c?{rate:0,message:lng("stronger password is required, use capital letters signs and numbers.")}:d>30?{rate:3,message:lng("good")}:d>20?{rate:2,message:lng("weak")}:{rate:1,message:lng("very weak")}}},52205:function(e,t,n){"use strict";n.d(t,{d:function(){return a}});var r=n(70917),o=n(16920),i=n(35944),a=function(e){var t,n=e.poster,a=e.title,l=e.status,s=e.isApproved?o.g.colors.positive:o.g.colors.warning;return(0,i.BX)("div",{css:(t=s,(0,r.iv)("min-width:300px;max-width:300px;._poster{height:164px;width:164px;background-color:",o.g.colors.bg_1,";background-size:cover;background-position:center;margin:-102px auto 0;border-radius:20px;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}._title{margin-top:3px;text-align:center;",o.g.classes.widget_title,";}._status{text-align:center;>span{border-radius:4px;background-color:",t,";color:",o.g.colors.dominant_white,";padding:0 5px;}}","")),children:[(0,i.tZ)("div",{className:"_poster",style:{backgroundImage:'url("'+n+'")'}}),(0,i.tZ)("div",{className:"_title",children:a}),l&&(0,i.tZ)("div",{className:"_status",children:(0,i.tZ)("span",{children:l.caps()})})]})}},3755:function(e,t,n){"use strict";n.d(t,{k:function(){return p}});var r=n(70917),o=n(16920),i=n(71134),a=(n(57882),n(87363)),l=n(35944);function s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var u=function(e){var t=e.width,n=e.color,i=e.textColor;return(0,r.iv)("min-width:",t,";color:",i||o.g.colors.text_sec,";>._top-progress{display:flex;>*:first-of-type{flex-grow:1;}}&.bigLabel{>._top-progress>*:first-of-type{font-size:2.5em;font-weight:lighter;}}>._top-progress>*:first-of-type{>span{color:",n||o.g.colors.green,";}}>._bar{margin-top:.3em;background-color:#DEDEDE;position:relative;height:4px;border-radius:2px;>div:first-of-type{height:4px;border-radius:2px;background-color:",n||o.g.colors.green,";transition:width 1.5s;}>._p{position:absolute;top:0;width:100%;text-align:center;color:white;}}&.valueInBar{>._bar{background-color:#b5b5b5;}>._bar,>._bar>div:first-of-type{height:18px;border-radius:9px;}}._note{font-size:0.8em;margin:0 10px;}","")},p=function(e){var t=e.numerator,n=e.denominator,r=e.valueInBar,o=e.note,c=e.bigLabel,p=e.className,d=e.topLabels,f=void 0===d||d,m=e.colorByVal,g=e.color,h=e.textColor,b=e.label,y=e.showPercent,v=void 0===y||y,_=e.showDenominator,w=void 0===_||_,O=e.valueNote,k=e.width,x=void 0===k?"150px":k;(0,i.HD)(t)&&(t=Number(t)),(0,i.HD)(n)&&(n=Number(n));var S=Math.min((0,i.NM)(t/n*100,2),100)||"",j=s((0,a.useState)(0),2),C=j[0],P=j[1];(0,a.useEffect)((function(){return S!==C&&P(S)}),[S]);var Z,B=""===S?"":"%";return(0,l.BX)("div",{css:u({width:x,color:g,textColor:h}),className:(0,i.AK)(p,{valueInBar:r,bigLabel:c}),children:[f&&(0,l.BX)("div",{className:"_top-progress",children:[(0,l.BX)("div",{children:[b," ",(0,l.tZ)("span",{children:t||0}),w&&" / ".concat(n)," ",O]}),!r&&v&&(0,l.BX)("div",{className:"_p",children:[S,B]})]}),(0,l.BX)("div",{className:"_bar",children:[(0,l.tZ)("div",{style:{width:C+"%",backgroundColor:m?(Z=S,5,156,"hsl("+(Z/100*151+5)+", 65%, 54%)"):g}}),r&&(0,l.tZ)("div",{className:"_p",children:v?S+B:t})]}),o&&(0,l.tZ)("div",{className:"_note",children:o})]})}},53178:function(e,t,n){"use strict";n.d(t,{s:function(){return l}});var r=n(86740),o=n(73105),i=n(35944);var a={name:"146c8ii",styles:"._btn{line-height:0;display:block;}"},l=function(e){var t=e.value,n=e.size,l=void 0===n?80:n,s=e.className;return(0,i.tZ)(o.u,{text:t,css:a,className:s,children:(0,i.tZ)(r.QRCode,{level:"Q",style:{width:l,height:l},value:t})})}},96504:function(e,t,n){"use strict";n.d(t,{_:function(){return ee}});var r,o,i=n(70917),a=n(87363),l=n(98e3),s=n(16920),c=n(33346),u=n(66975),p=n(539),d=n(7392),f=n(71134),m=(n(43698),n(23838)),g=n(27821),h=n(24210),b=n(40676),y=(n(57882),n(15560)),v=n(69637),_=n(35944);function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j(this,n)}}function j(e,t){return!t||"object"!==w(t)&&"function"!=typeof t?C(e):t}function C(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B,T,E,I,A,D,R=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(a,e);var t,n,r,i=S(a);function a(e){var t,n,r,s,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=C(t),r="checkInfo",s=o,c=C(t),s&&Object.defineProperty(n,r,{enumerable:s.enumerable,configurable:s.configurable,writable:s.writable,value:s.initializer?s.initializer.call(c):void 0}),(0,g.makeObservable)(C(t)),t.title=lng("check rules"),t.confirmButtonLabel="",t._fields=[{type:"single_item",name:"user_id",label:lng("select user to check rules"),poster:!0,theme:"bright",searchData:function(t,n){var r=t.ids,o=t.term;(0,l.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:o,cross_domain:!0,choose_domain:e.domain_id,id:r||""}},n)},onSelect:function(n){return(0,l.SC)("rules/"+e.req_type,{method:"POST",data:{user_id:n.id,object_id:e.object_id}},(function(e){t.checkInfo.is_member=e.is_member,t.checkInfo.conditions=e.conditions,t.checkInfo.relations=e.relations}))},onValueChange:function(e){""===e&&(t.checkInfo={is_member:void 0,rules:void 0,conditions:void 0,relations:void 0})}},{type:"component",node:(0,_.tZ)(y.Observer,{children:function(){return(0,_.tZ)(z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},t.checkInfo))}}),visible:function(){return void 0!==t.checkInfo.is_member}}],t._prepFields(),t.ready=!0,t}return t=a,(n=[{key:"dirty",get:function(){return!1}}])&&k(t.prototype,n),r&&k(t,r),a}(h.I),B=r.prototype,T="checkInfo",E=[g.observable],I={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{is_member:void 0,rules:void 0,conditions:void 0,relations:void 0}}},D={},Object.keys(I).forEach((function(e){D[e]=I[e]})),D.enumerable=!!D.enumerable,D.configurable=!!D.configurable,("value"in D||D.initializer)&&(D.writable=!0),D=E.slice().reverse().reduce((function(e,t){return t(B,T,e)||e}),D),A&&void 0!==D.initializer&&(D.value=D.initializer?D.initializer.call(A):void 0,D.initializer=void 0),void 0===D.initializer&&(Object.defineProperty(B,T,D),D=null),o=D,r),N=(0,i.iv)(".member{color:",s.g.colors.positive,";}.not_member{color:",s.g.colors.negative,";}._label{color:",s.g.colors.text_main,";font-weight:600;}",""),z=(0,y.observer)((function(e){var t=e.is_member,n=e.conditions,r=e.relations;return(0,_.BX)("div",{css:N,children:[(0,_.BX)("div",{className:t?"member":"not_member",children:[" ",t?lng("this user is a member of the workspace").caps():lng("this user is not a member of the workspace").caps()]}),r&&(0,_.BX)("div",{className:"_label",children:[lng("relation between rules").caps(),": ",r]}),(null==n?void 0:n.length)>0&&(0,_.tZ)(M,{collection:n})]})})),M=(0,y.observer)((function(e){var t=e.collection,n=[{title:"#"},{title:lng("rule").caps()},{title:lng("sql condition").caps()},{title:lng("result").caps()}];return(0,_.tZ)("div",{children:(0,_.tZ)(b.iA,{cols:n,collection:t,RowRenderer:F,rowIdCol:"key",compact:!0})})})),F=(0,y.observer)((function(e){var t=e.row,n=t.key,r=t.rule,o=t.sql_condition,i=t.result;return(0,_.BX)("tr",{children:[(0,_.tZ)("td",{children:n}),(0,_.tZ)(v.U6,{children:r}),(0,_.tZ)("td",{children:o}),(0,_.tZ)("td",{children:(0,_.tZ)(u.JO,{icon:i?"mark_v":"mark_x",color:i?s.g.colors.positive:s.g.colors.negative})})]})})),q=n(22334),X=n(45459);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function V(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?U(Object(n),!0).forEach((function(t){H(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G(e){return function(e){if(Array.isArray(e))return K(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||W(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||W(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function W(e,t){if(e){if("string"==typeof e)return K(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?K(e,t):void 0}}function K(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var $={name:"1ytjxeh",styles:"padding-bottom:20px;position:relative;.add-rule-button{margin-top:15px;}"},Y=function(e){return e.field&&(e.type||e.val)},Q=function(e){var t,n=[],r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=W(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;Y(o)&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return n},ee=function(e){var t,n=e.title,r=e.onChange,o=e.value,i=e.object_type,s=e.checkRules,c=e.checkRulesData,u=e.helpKey,m=e.collisionCheck,g=(null==o||null===(t=o.rules)||void 0===t?void 0:t.map((function(e){return e.key||(e.key=(0,f.zO)(6)),e})))||[],h=J((0,a.useState)(g),2),b=h[0],y=h[1],v=J((0,a.useState)({forSelect:[],map:new Map}),2),w=v[0],O=v[1],k=J((0,a.useState)((null==o?void 0:o.relation)||"or"),2),x=k[0],S=k[1],j=J((0,a.useState)((null==o?void 0:o.manual_relation)||null),2),C=j[0],P=j[1],Z=J((0,a.useState)(""),2),B=Z[0],T=Z[1];(0,a.useEffect)((function(){var e={rules:Q(b)};x&&(e.relation=x),"manual"===x&&(e.manual_relation=C),0===e.rules.length&&(e=void 0),JSON.stringify(o)!==JSON.stringify(e)&&r(e)}),[b,x,C]),(0,a.useEffect)((function(){(0,l.fN)("rules/rule_fields",{data:{type:i}},(function(e){for(var t,n=[],r=new Map,o={},i=0,a=Object.entries(e);i<a.length;i++){var l,s=J(a[i],2),c=s[0],u=s[1];if("string"==typeof u)null!==(l=o.options)&&void 0!==l&&l.length&&n.push(o),o={optgroup:!0,label:u,options:[]};else r.set(c,u),o.options.push({val:c,label:u.friendly_name,type:u.type,options:u.options})}null!==(t=o.options)&&void 0!==t&&t.length&&n.push(o),O({forSelect:n,map:r})}))}),[]);var E=function(e,t){if(!e)return T(null),e;var n=e.replaceAll(" ","").split("");n=n.map((function(e){return e.toUpperCase()})).filter((function(e){return/[()!&|A-Z]/.test(e)}));var r,o,i=new Set,a=new Set;n.forEach((function(e){var n=/[A-Z]/.test(e);n&&(e.charCodeAt(0)-65>=t&&i.add(e));o&&(/[A-Z]/.test(o)&&n&&a.add(e),/[A-Z]/.test(o)&&/[(!]/.test(e)?a.add(e):(/[&|]/.test(o)&&/[&|]/.test(e)||")"===o&&!/[&|)]/.test(e)||"!"===o&&!/[A-Z(]/.test(e))&&(r=!0)),o=e}));var l=[];return r&&l.push(lng("invalid input").caps()),i.size>0&&l.push("".concat(lng("no matching rules for the labels").caps(),": ").concat(G(i).join(", "))),a.size>0&&l.push("".concat(lng("every two rules must have an operator between them").caps(),": ").concat(G(a).join(", "))),T(l),n.join("")};if(!w.forSelect.length)return(0,_.tZ)(p.$,{});var I=0;return(0,_.BX)("div",{css:$,children:[u&&(0,_.tZ)(X.I,{helpKey:u}),n&&n.caps()+":",(0,_.tZ)("div",{children:b.map((function(e,t){return(0,_.tZ)(ne,{index:Y(e)?I++:null,rule:e,collisionCheck:m,object_id:null==c?void 0:c.object_id,fields:w.forSelect,fieldMap:w.map,onChange:function(e){return function(e,t){y((function(n){var r=V({},e);n[t].field!==e.field&&(r.type=r.val=r.val_b=void 0);var o=G(n);return o.splice(t,1,r),o}))}(e,t)},onRemove:function(){return function(e){y((function(t){var n=G(t);return n.splice(e,1),E(C,Q(n).length),n}))}(t)}},e.key)}))}),b.length<26&&(0,_.tZ)(d.l,{className:"add-rule-button",theme:"contained",onClick:function(){return y((function(e){var t=[].concat(G(e),[{key:(0,f.zO)(6)}]);return E(C,Q(t).length),t}))},children:lng("add rule").caps()}),s&&(0,_.tZ)(fe,V({},c)),(0,_.tZ)(ae,{operators:x,manual:C,onChange:function(e){return S(e)},onManualChange:function(e){P(E(e,Q(b).length))},count:b.length,notice:B})]})},te={name:"1su80o",styles:"display:flex;align-items:center;.rule-row-mid{display:flex;flex-grow:9;>*:first-child{width:fit-content;flex-grow:1;}>*:not(:first-child){flex-grow:9;}}.rule-row-label{flex-grow:1;}.rule-row-remove{margin-top:1em;}.rule-values-bundle{display:flex;}"},ne=function(e){var t,n=e.index,r=e.rule,o=e.fields,l=e.fieldMap,p=e.onRemove,d=e.onChange,f=e.object_id,m=e.collisionCheck,g=J((0,a.useState)(),2),h=g[0],b=g[1],y=r.field,v=r.type,w=r.val,O=r.val_b,k=y&&(null===(t=l.get(y))||void 0===t?void 0:t.type);return(0,_.BX)("div",{css:te,children:[(0,_.tZ)(ue,{index:n}),(0,_.tZ)("div",{className:"rule-row-label select",children:(0,_.tZ)(c.gN,{input:{type:"select",options:o,label:lng("field"),emptyOption:!0},value:y,onChange:function(e){return d(V(V({},r),{field:e}))}})}),r.field&&k&&(0,_.BX)("div",{className:"rule-row-mid",children:[(0,_.tZ)(re,{fieldType:k,relation:v,onChange:function(e){var t,n;return["s_oo","n_oo"].includes(r.type)&&(r.val=null===(t=r.val)||void 0===t?void 0:t.join(",")),["s_oo","n_oo"].includes(e)&&(r.val=null===(n=r.val)||void 0===n?void 0:n.split(",")),d(V(V({},r),{type:e}))}}),(0,_.tZ)(oe,{fieldType:k,relation:v,value:w,val_b:O,field:l.get(y),fieldKey:y,object_id:f,setRowWarning:b,onChange:function(e,t,n){return d(V(V({},r),{val:e,val_b:n}))},collisionCheck:m})]}),(0,_.BX)("div",{className:"rule-row-remove",children:[h&&(0,_.tZ)(u.JO,{css:(0,i.iv)({color:s.g.colors.negative},"",""),icon:"sign_notification",buttonLike:!0,toolTip:h}),(0,_.tZ)(u.JO,{icon:"trash",onClick:p,buttonLike:!0,toolTip:lng("delete row")})]})]})},re=function(e){var t=e.fieldType,n=e.relation,r=e.onChange,o=function(e){switch(e){case"number":return[{val:"n_gt",label:lng("greater than").caps()},{val:"n_lt",label:lng("less than").caps()},{val:"n_iet",label:lng("is equal to").caps()},{val:"n_inet",label:lng("not equal to").caps()},{val:"n_ib",label:lng("is between").caps()},{val:"n_inb",label:lng("not between").caps()},{val:"n_oo",label:lng("one of").caps()}];case"string":return[{val:"s_c",label:lng("contains").caps()},{val:"s_nc",label:lng("not contains").caps()},{val:"s_tiex",label:lng("is exactly").caps()},{val:"s_tin",label:lng("is not").caps()},{val:"s_tie",label:lng("is empty").caps()},{val:"s_tine",label:lng("not empty").caps()},{val:"s_oo",label:lng("one of").caps()}];case"date":return[{val:"d_i",label:lng("date is").caps()},{val:"d_ib",label:lng("is before").caps()},{val:"d_ia",label:lng("is after").caps()}];case"list":return[{val:"1",label:lng("is").caps()},{val:"0",label:lng("is not").caps()}];case"ou":return[{val:"ou_u",label:lng("this unit").caps()},{val:"ou_uns",label:lng("including subs").caps()},{val:"ou_s",label:lng("only sub units").caps()}];case"workspace":return[{val:"ws_u",label:lng("workspace").caps()},{val:"ws_uns",label:lng("including subs").caps()},{val:"ws_s",label:lng("only sub workspaces").caps()},{val:"ws_pm",label:lng("primary manager").caps()}];case"workspace_status":return[{val:"ws_c",label:lng("member and completed").caps()},{val:"ws_nc",label:lng("member and not completed").caps()},{val:"ws_np",label:lng("member and not passed").caps()}];case"flag":case"not_null":case"simple":case"role":return null;default:console.error("not implemented","RuleRelation",{fieldType:e})}}(t);return null===o?null:(0,_.tZ)(c.gN,{input:{type:"select",options:o,label:lng("relation"),emptyOption:!n},value:n,onChange:r})},oe=function(e){var t,n,r=e.fieldType,o=e.relation,i=e.value,s=e.val_b,u=e.field,p=e.fieldKey,d=e.onChange,m=e.object_id,g=e.setRowWarning,h=e.collisionCheck;(0,a.useEffect)((function(){h&&"workspace_status"===r&&i&&me(i,m,g)}),[i]);var b=function(e){var t,n;return null===(t=e||[])||void 0===t||null===(n=t.join)||void 0===n?void 0:n.call(t,",")},y=function(e){return d(e.split(","))};switch(r){case"string":return["s_tie","s_tine"].includes(o)?(0,_.tZ)("div",{}):"s_oo"===o?(0,_.tZ)(c.gN,{input:{type:"text",label:lng("value"),onBlur:function(){return d(G(new Set((i||[]).map((function(e){return e.trim()})).filter((function(e){return!!e})))))}},value:i?b(i):void 0,onChange:y},p):(0,_.tZ)(c.gN,{input:{type:"text",label:lng("value"),placeholder:"e.g. Hello",suggest:(u.field_autocomplete||(null===(t=u.options)||void 0===t?void 0:t.autocomplete))&&{table:u.table,field:u.field,domain:u.domain}},value:i||void 0,onChange:d},p);case"number":return["n_ib","n_inb"].includes(o)?(0,_.BX)("div",{className:"rule-values-bundle",children:[(0,_.tZ)(c.gN,{input:{type:"number",label:lng("value")},value:i||void 0,onChange:function(e,t){d(i=e,t,s)}},p),(0,_.tZ)(c.gN,{input:{type:"number",label:lng("and")},value:s||void 0,onChange:function(e,t){d(i,t,s=e)}},p+"_b")]}):"n_oo"===o?(0,_.tZ)(c.gN,{input:{type:"text",label:lng("value"),onBlur:function(){return d(G(new Set((i||[]).map((function(e){return e.trim()})).filter((function(e){return!!(0,f.kE)(e)})))))}},value:i?b(i):void 0,onChange:y},p):(0,_.tZ)(c.gN,{input:{type:"number",label:lng("value")},value:i||void 0,onChange:d},p);case"date":return(0,_.tZ)(c.gN,{input:{type:"date",label:lng("value")},value:i?(0,q._3)(i).format(Blsm.prm.date_moment_format):void 0,onChange:function(e){return d(e?(0,q._3)(e).format(Blsm.prm.date_input_format):void 0)}},p);case"list":return(0,f.xb)(null===(n=u.options)||void 0===n?void 0:n.select_values)?(0,_.tZ)("div",{}):(0,_.tZ)(c.gN,{input:{type:"select",options:Object.keys(u.options.select_values).map((function(e){return{val:e,label:u.options.select_values[e]}})),label:lng("value"),emptyOption:!0},value:i,onChange:d},p);case"flag":var v=[{val:"1",label:lng("yes").caps()},{val:"0",label:lng("no").caps()}];return(0,_.tZ)(c.gN,{input:{type:"select",options:v,emptyOption:!0},value:i,onChange:d},p);case"not_null":var w=[{val:"1",label:lng("is not empty").caps()},{val:"0",label:lng("is empty").caps()}];return(0,_.tZ)(c.gN,{input:{type:"select",options:w,emptyOption:!0},value:i,onChange:d},p);case"simple":return(0,_.tZ)(c.gN,{input:{type:"text",label:lng("value")},value:i,onChange:d},p);case"ou":case"role":case"workspace":case"workspace_status":var O={ou:"ou",role:"role",workspace:"group,qualification,ou",workspace_status:"group,qualification,course_template"},k={type:"single_item",searchData:function(e,t){(0,l.SC)("groups/autocomplete",{data:{term:e.term||"",id:e.ids||"",types:O[r],for_rules:1}},t)}};return(0,_.tZ)(c.gN,{input:k,value:i||void 0,onChange:function(e){h&&e&&me(e,m,g),d(e)}},p);default:console.error("not implemented","RuleValue",{fieldKey:p,fieldType:r,relation:o,value:i,val_b:s,field:u,onChange:d})}return(0,_.tZ)("div",{})},ie=(0,i.iv)("._radio_select{display:flex;justify-content:space-between;align-items:center;}._notice{padding:8px 5px 0;color:",s.g.colors.negative,";}._manual{position:relative;padding-",s.g.far,":20px;.help-sign{position:absolute;top:10px;",s.g.classes.far(0),";}}",""),ae=function(e){var t=e.operators,n=e.manual,r=e.onChange,o=e.onManualChange,i=e.count,a=e.notice,l="and";return"string"==typeof t?l=t:"object"===L(t)&&(l=Array.isArray(t)?"advanced":"manual"),"advanced"!==l||[3,4].includes(i)||r("and"),i<2?(0,_.tZ)("div",{}):(0,_.BX)("div",{css:ie,children:[(0,_.BX)("div",{className:"_radio_select",children:[(0,_.BX)("div",{style:{marginTop:"1em"},children:[lng("rule operators").caps(),":"]}),(0,_.tZ)(c.gN,{value:l,onChange:r,input:{type:"radio",name:"op_type",label:lng("OR"),radioValue:"or"}}),(0,_.tZ)(c.gN,{value:l,onChange:r,input:{type:"radio",name:"op_type",label:lng("AND"),radioValue:"and"}}),(0,_.tZ)(c.gN,{value:l,onChange:r,input:{type:"radio",name:"op_type",label:lng("manual|action"),radioValue:"manual"}}),[3,4].includes(i)&&(0,_.tZ)(c.gN,{value:l,onChange:function(){return r([])},input:{type:"radio",name:"op_type",label:lng("advanced"),radioValue:"advanced"}})]}),(0,_.BX)("div",{children:["manual"===l&&(0,_.BX)("div",{className:"_manual",children:[(0,_.tZ)(c.gN,{input:{type:"text",label:lng("relation between rules"),style:{direction:"ltr",letterSpacing:".3em"}},value:n||void 0,onChange:o}),(0,_.tZ)(u.JO,{className:"help-sign",icon:"menu_info",toolTip:lng("e.g.: %s","A & (B | C) & D & ! (E | F)")})]}),"advanced"===l&&(0,_.tZ)(se,{operators:t,onChange:function(e){return r(e)},count:i}),(0,_.tZ)("div",{className:"_notice",children:Array.isArray(a)?a.map((function(e,t){return(0,_.tZ)("p",{children:e},t)})):a})]})]})},le={name:"s5xdrg",styles:"display:flex;align-items:center"},se=function(e){var t=e.operators,n=e.onChange,r=e.count,o=[{val:"a",label:lng("AND")},{val:"o",label:lng("OR")},{val:"n",label:lng("AND NOT")}];if(3===r){0===t.length&&n(["a","a"]);var i=[t[0]||"a",t[1]||"a"];return(0,_.BX)("div",{css:le,children:[(0,_.tZ)(de,{open:!0}),(0,_.tZ)(ue,{index:0}),(0,_.tZ)(c.gN,{input:{type:"select",options:o},value:i[0],onChange:function(e){return n([e,i[1]])}}),(0,_.tZ)(ue,{index:1}),(0,_.tZ)(de,{}),(0,_.tZ)(c.gN,{input:{type:"select",options:o},value:i[1],onChange:function(e){return n([i[0],e])}}),(0,_.tZ)(ue,{index:2})]})}if(4===r){var a="2n2"===t[3];0===t.length&&n(["a","a","a"]);var l=[t[0]||"a",t[1]||"a",t[2]||"a"];return(0,_.BX)("div",{css:le,children:[(0,_.tZ)(de,{open:!0}),(0,_.tZ)(ue,{index:0}),(0,_.tZ)(c.gN,{input:{type:"select",options:o},value:l[0],onChange:function(e){return n([e,l[1],l[2]])}}),(0,_.tZ)(ue,{index:1}),a&&(0,_.tZ)(de,{}),(0,_.tZ)(c.gN,{input:{type:"select",options:o},value:l[1],onChange:function(e){return n([l[0],e,l[2]])}}),a&&(0,_.tZ)(de,{open:!0}),(0,_.tZ)(ue,{index:2}),!a&&(0,_.tZ)(de,{}),(0,_.tZ)(c.gN,{input:{type:"select",options:o},value:l[2],onChange:function(e){return n([l[0],l[1],e])}}),(0,_.tZ)(ue,{index:3}),a&&(0,_.tZ)(de,{}),(0,_.tZ)(u.JO,{icon:"sync",toolTip:lng("change parentheses"),color:s.g.colors.dominant_main,onClick:function(){return n(a?l.slice(0,3):[].concat(G(l.slice(0,3)),["2n2"]))}})]})}return(0,_.tZ)("div",{})},ce=(0,i.iv)("margin:.9em 4px 0;padding:5px 13px;font-size:1.3em;background-color:",s.g.colors.dominant_main,";color:white;border-radius:50%;width:37px;height:37px;font-weight:600;white-space:nowrap;",""),ue=function(e){var t=e.index;return(0,_.tZ)("span",{css:ce,children:Number.isInteger(t)?String.fromCharCode(65+t):"--"})},pe={name:"zwfzz3",styles:"margin-top:11px;padding:0 4px;font-size:2.2em"},de=function(e){var t=e.open;return(0,_.tZ)("span",{css:pe,children:t?"(":")"})},fe=function(e){var t=e.object_id,n=e.domain_id,r=e.req_type;return(0,_.tZ)(d.l,{onClick:function(){(0,m.vm)().openDialog("form",new R({object_id:t,domain_id:n,req_type:r}))},children:lng("check saved rules").caps()})},me=function(e,t,n){(0,l.SC)("rules/collision",{data:{ws_behind:e,ws_ahead:t}},(function(e){var t=null;e.behind?t="#".concat(e.behind.id," ").concat(e.behind.name," ").concat(lng("also uses workspace status rule that may create a loop")):e.ahead&&(t="#".concat(e.ahead.id," ").concat(e.ahead.name," ").concat(lng("also uses workspace status rule that may create a loop"))),n(t)}))}},37137:function(e,t,n){"use strict";n.d(t,{BD:function(){return O},ET:function(){return _},r0:function(){return h},rX:function(){return y}});var r=n(70917),o=(n(57882),n(16920)),i=n(66975),a=n(57697),l=n(33051),s=n(23838),c=n(95761),u=n(73105),p=n(87363),d=n(71134),f=n(35944);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=function(e){switch(parseInt(e)){case 1:return{color:"#008cf8",label:lng("beginner|level"),icon:"skill_l1",val:"1"};case 2:return{color:"#ff347c",label:lng("intermediate|level"),icon:"skill_l2",val:"2"};case 3:return{color:"#3dd261",label:lng("advanced|level"),icon:"skill_l3",val:"3"};default:return{color:"#757575",label:lng("unranked|level"),icon:"skill_unranked",val:null}}},b=function(e){return(0,r.iv)("border:1px solid ",o.g.colors.separator,";width:260px;min-width:260px;border-radius:6px;overflow:hidden;>.top{position:relative;height:125px;background-image:url('data:image/svg+xml;utf8,",encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none">\n\t<rect height="100" width="100" fill="'.concat(e,'"/>\n\t<ellipse cx="').concat(o.g.isRTL?100:-10,'" cy="-50" rx="70" ry="105" fill="#FFF" fill-opacity=".2"/>\n\t<ellipse cx="').concat(o.g.isRTL?-15:115,'" cy="130" rx="40" ry="70" fill="#FFF" fill-opacity=".2"/>\n</svg>')),"');&:hover{cursor:pointer;}>.level{position:absolute;bottom:10px;",o.g.near,":10px;color:#fff;background-color:rgba(255, 255, 255, .3);border-radius:8px;padding:6px 10px;}>.Icon{position:absolute;top:5px;",o.g.far,":25px;font-size:65px;color:rgba(255, 255, 255, .7);&.Icon-skill_l1{transform:",o.g.isRTL?"rotate(10deg) scaleX(-1)":"rotate(-10deg)",";}&.Icon-skill_l2,&.Icon-skill_l3,&.Icon-skill_l4{transform:",o.g.isRTL?"rotate(40deg) scaleX(-1)":"rotate(-40deg)",";}}}>.bottom{height:78px;padding:6px;>div+div{margin-top:5px;}.title-flag{display:flex;justify-content:space-between;.title{font-weight:600;font-size:1.1em;max-width:85%;text-wrap:none;>div{width:100%;}>div>div{white-space:nowrap;width:100%;overflow:hidden;text-overflow:ellipsis;}}.flag{margin:3px;border-radius:4px;background-color:transparent;color:",o.g.colors.text_sec,";padding:3px 6px;border:1px solid ",o.g.colors.text_sec,";&.followed{color:white;border:none;background-color:",o.g.colors.dominant_main,";}&:hover{cursor:pointer;}}}.Ribbon{display:inline-block;}}","")},y=function(e){var t=e.skill,n=e.actions,r=e.onClick,s=e.onSetLevelClick,c=e.onFlagClick,g=e.showFlag,y=t.name,v=t.skill_level,_=t.manager_level,w=t.sk_id,O=t.editable,k=t.rating_details,x=t.following,S=t.type,j="additional"===S&&v?v:!("occupation"!==S||!_)&&_,C=!!k&&JSON.parse(k),P=!(null==C||!C.groups)&&Object.values(C.groups).reduce((function(e,t){return e+t}),0),Z=!(null==C||!C.lessons)&&Object.values(C.lessons).reduce((function(e,t){return e+t}),0),B=[1,2,3].map((function(e){return h(e)}));s&&B.forEach((function(e){return e.onClick=function(){return s(w,e.val)}}));var T=B[j-1]||{color:"#757575",label:lng("unranked|level"),icon:"skill_unranked",val:null},E=T.color,I=T.label,A=T.icon,D=m((0,p.useState)(x),2),R=D[0],N=D[1];return(0,f.BX)("div",{css:b(E),children:[(0,f.BX)("div",{className:"top",onClick:r,children:[(0,f.tZ)(l.x,{options:n,children:(0,f.tZ)(i.JO,{color:o.g.colors.dominant_white,icon:"menu_h",buttonLike:!0})}),O&&s&&(0,f.BX)(l.x,{options:B,className:"level",children:[(0,f.tZ)("span",{children:I.caps()})," ",(0,f.tZ)("span",{children:(0,f.tZ)(i.JO,{icon:"caret_down"})})]}),(!O||!s)&&(0,f.tZ)("div",{className:"level",children:I.caps()}),(0,f.tZ)(i.JO,{icon:t.icon||A||"skill_l"+j})]}),(0,f.BX)("div",{className:"bottom",children:[(0,f.BX)("div",{className:"title-flag",children:[(0,f.tZ)("div",{className:"title",children:(0,f.tZ)(u.u,{text:y.caps(),children:y.caps()})}),g&&(0,f.tZ)(u.u,{text:lng("recommendations for this skill will be received in the digital library").caps(),children:(0,f.tZ)("div",{className:(0,d.AK)("flag",{followed:R}),onClick:function(){return!!c&&void(c&&(c(R),N(!R)))},children:(0,f.tZ)(i.JO,{icon:"badge-flag"})})})]}),(P>0||Z>0)&&(0,f.BX)("div",{children:[(0,f.tZ)(a.Vy,{size:24}),P>0&&(0,f.BX)("span",{children:[P," ",lng("workspaces")]}),P>0&&Z>0&&"&",Z>0&&(0,f.BX)("span",{children:[Z," ",lng("content")]})]})]})]})},v=(0,r.iv)("border:1px solid ",o.g.colors.separator,";width:260px;min-width:260px;border-radius:6px;overflow:hidden;position:relative;height:205px;text-align:center;white-space:nowrap;line-height:45px;color:",o.g.colors.text_sec,";&:hover{color:#000000;cursor:pointer;}&:before{content:'';display:inline-block;height:100%;vertical-align:middle;margin-right:-0.25em;}.card{display:inline-block;vertical-align:middle;.Icon{font-size:50px;}.title{font-weight:600;font-size:1.1em;}}",""),_=function(e){var t=e.user_id,n=e.store;return(0,f.tZ)("div",{css:v,onClick:function(){return(0,s.vm)().openDialog("form",new c.ty({store:n,user_id:t,onSave:n.onAddSkill}),{wizard:!0})},children:(0,f.BX)("div",{className:"card",children:[(0,f.tZ)(i.JO,{icon:"sign_plus"}),(0,f.tZ)("div",{className:"title",children:lng("add new skill").caps()})]})})},w=(0,r.iv)("background-color:",o.g.colors.blue_shade,";color:",o.g.colors.blue,";font-weight:500;font-size:1rem;border-radius:8px;display:flex;padding:10px 5px;flex-direction:row;width:250px;align-items:center;.Icon{font-size:2rem;margin:0 10px;}.name{font-size:1.2rem;}",""),O=function(e){var t=e.occupation.name;return t?(0,f.BX)("div",{css:w,children:[(0,f.tZ)(i.JO,{icon:"pointer_alt"}),(0,f.BX)("div",{className:"content",children:[(0,f.BX)("div",{children:[lng("current occupation").caps(),":"]}),(0,f.tZ)("span",{className:"name",children:t.caps()})]})]}):""}},47095:function(e,t,n){"use strict";n.d(t,{P:function(){return d},p:function(){return f}});var r=n(70917),o=n(16920),i=n(33051),a=n(66975),l=n(22906),s=n(35944);function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var p=(0,r.iv)("cursor:default;._dropdown{font-weight:600;display:inline-flex;table{width:100%;}}._label{color:",o.g.colors.text_sec,";display:inline-flex;white-space:nowrap;}",""),d=function(e){var t=e.sorts,n=void 0===t?[]:t,r=e.by,o=e.desc,l=void 0!==o&&o,c=e.onSort,u=e.className,d=n.find((function(e){return e.val===r}));return n.forEach((function(e){return e.active=e.val===r})),(0,s.BX)("div",{css:p,className:u,children:[(0,s.BX)("span",{className:"_label",children:[lng("sort by").caps(),": "]}),(0,s.tZ)(i.x,{className:"_dropdown",options:n,onSelect:function(e){return c&&c(e)},children:(0,s.BX)("span",{style:{whiteSpace:"nowrap"},children:[d?d.label.caps():"invalid sort by"," ",(0,s.tZ)(a.JO,{icon:"arrow_"+(l?"down":"up")})]})})]})},f=function(e,t,n,r){if(""===t.by){if(n){var o=JSON.parse(localStorage.getItem(n)),i=(null==o?void 0:o.map((function(t){return e.find((function(e){return e[r]===t}))})))||[],a=[].concat(c(i),c(e));return c(new Set(a)).filter((function(e){return!!e}))}return t.desc?e.slice().reverse():e}return e.sort((function(e,n){return(t.desc?-1:1)*(((0,l.Lj)(e,t.by)||"")+"").localeCompare(((0,l.Lj)(n,t.by)||"")+"",void 0,{numeric:!0})}))}},33550:function(e,t,n){"use strict";n.d(t,{b:function(){return g},y:function(){return f}});var r=n(45587),o=n(24285),i=n(87363),a=n(79752),l=n(32339),s=n(70917),c=n(16920),u=n(35944);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=(0,i.createContext)(null),m=(0,s.iv)("opacity:.3;position:relative;background-color:white;border-radius:",c.g.consts.WIDGET_BORDER_RADIUS,'px;&:after{content:"";position:absolute;left:0;top:0;width:100%;height:100%;}',""),g=function(e){var t=e.children,n=e.onSort,o=p((0,i.useState)(t.slice()),2),s=o[0],c=o[1],d=p((0,i.useState)(null),2),f=d[0],g=d[1];(0,i.useLayoutEffect)((function(){c(t.slice())}),[t]);var b=s.map((function(e){return(0,u.tZ)(h,{id:e.key,children:e},e.key)})),y=s.map((function(e){return e.key}));return(0,u.BX)(a.LB,{autoScroll:!1,onDragOver:function(e){var t=e.active,n=e.over;n&&t.id!==n.id&&c((function(e){var o=e.findIndex((function(e){return e.key===t.id})),i=e.findIndex((function(e){return e.key===n.id}));return(0,r.Rp)(e,o,i)}))},onDragStart:function(e){return g(e.active.id)},onDragEnd:function(){null==n||n({new_order:y,moved_id:f}),g(null)},modifiers:[l.F4],children:[(0,u.tZ)(r.Fo,{items:y,strategy:function(){},children:b}),(0,u.tZ)(a.y9,{children:f?(0,u.tZ)("div",{css:m,children:s.find((function(e){return f===e.key}))}):null})]})},h=function(e){var t=e.id,n=e.children,i=(0,r.nB)({id:t}),a=i.setNodeRef,l=i.transform,s={transition:i.transition,transform:o.ux.Translate.toString(l)};return(0,u.tZ)("div",{ref:a,style:s,children:(0,u.tZ)(f.Provider,{value:i,children:n})})}},539:function(e,t,n){"use strict";n.d(t,{$:function(){return f}});var r=n(70917),o=n(16920),i=(n(57882),n(35944)),a=["label","color","className","size"];function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p=1200,d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.g.theme.color_1,t=arguments.length>1?arguments[1]:void 0;return(0,r.iv)("@keyframes spinner-ring{0%{transform:rotate(0deg);}100%{transform:rotate(360deg);}}>._animation{width:",t,";height:",t,";overflow:hidden;margin:0 auto;position:relative;div{box-sizing:border-box;display:block;position:absolute;width:100%;height:100%;border:6px solid ",o.g.theme.color_1,";border-radius:50%;animation:spinner-ring ",p,"ms cubic-bezier(0.5, 0, 0.5, 1) infinite;border-color:",e," transparent transparent transparent;}div:nth-of-type(1){animation-delay:-",450,"ms;}div:nth-of-type(2){animation-delay:-",300,"ms;}div:nth-of-type(3){animation-delay:-",150,"ms;}}>._label{margin-top:1em;color:",e,";text-align:center;font-weight:600;font-size:1.2rem;}","")},f=function(e){var t=e.label,n=e.color,r=e.className,o=e.size,l=void 0===o?"".concat(64,"px"):o,c=u(e,a);return(0,i.BX)("div",s(s({css:d(n,l),className:r},c),{},{children:[(0,i.BX)("div",{className:"_animation",children:[(0,i.tZ)("div",{}),(0,i.tZ)("div",{}),(0,i.tZ)("div",{}),(0,i.tZ)("div",{})]}),t&&(0,i.tZ)("div",{className:"_label",children:t})]}))}},95875:function(e,t,n){"use strict";n.d(t,{S:function(){return j},o:function(){return w}});var r=n(87363),o=n(70917),i=n(16920),a=n(95405),l=n(66975),s=n(40441),c=n(71134),u=(n(57882),n(33051)),p=n(33550),d=n(73105),f=n(92464),m=n(64902),g=n(86344),h=n(35944);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=function(e){var t=e.markColor,n=e.titleColor,r=e.translucent;return(0,o.iv)("position:relative;background-color:",(0,g.pp)(i.g.colors.bg_cont,!!r&&.6),";border-radius:9px;color:",i.g.colors.text_sec,";",i.g.classes.shadow_light,";overflow:hidden;padding:0;._inner{display:flex;flex-direction:row;flex-wrap:nowrap;align-items:center;justify-content:flex-start;padding:10px;._inner_content{display:inline-flex;flex-basis:100%;column-gap:20px;._title{flex-basis:180px;}}",t?"border-".concat(i.g.near,": 7px solid ").concat(t,";"):""," ._inner_content>._titles{line-height:1.8em;}}&.shadow_strong{",i.g.classes.shadow_strong,";}&.dark{border:1px solid ",i.g.colors.border_dark,";background-color:",i.g.colors.background_dark,";box-shadow:none;}._titles{display:inline-flex;flex-grow:1;flex-wrap:wrap;white-space:normal;>div{flex-basis:100%;}}._title{display:inline-flex;flex-grow:1;overflow:hidden;color:",n||i.g.colors.text_main,";font-weight:700;font-size:'1.1em';white-space:normal;}._subTitle{color:",i.g.colors.text_sec,";white-space:normal;}._tags{flex-basis:100%;white-space:normal;&.highlightFirstTag span:first-of-type{color:",i.g.colors.yellow,";font-weight:700;}}._img,.Avatar{margin-inline-end:10px;}._sort_handle{visibility:hidden;}&._clickable{&:hover{._title{text-decoration:underline;cursor:pointer;}}}&:hover{._sort_handle{visibility:visible;}}&.condensed{border-radius:7px;._inner{padding:2px 10px;._inner_content>._titles{line-height:1.7em;}}._titles{padding:2px 0;}}._actions{color:",i.g.colors.text_black,";white-space:nowrap;}","")},w=function(e){return(0,h.tZ)(a.SV,{children:(0,h.tZ)(x,y({},e))})},O={name:"1lv1yo7",styles:"display:inline-flex"},k={name:"1u4hpl4",styles:"display:inline"},x=function(e){var t=e.title,n=e.titleColor,o=e.href,a=e.newTab,g=e.className,b=e.onClick,v=e.tags,w=e.highlightFirstTag,x=void 0===w||w,S=e.subTitle,j=e.inContainer,C=e.dark,P=e.translucent,Z=e.condensed,B=e.markColor,T=e.icon,E=e.iconColor,I=e.iconTooltip,A=e.img,D=e.imgSize,R=void 0===D?i.g.consts.ITEM_IMG_SIZE+"px":D,N=e.menuOptions,z=e.menuOnSelect,M=e.toolTip,F=e.children,q=e.additionalTop,X=e.additionalBottom,L=e.avatar,U=e.avatarBalloon,V=e.avatarSize,H=(0,r.useContext)(p.y);return(0,h.tZ)("div",{css:_({markColor:B,titleColor:n,translucent:P}),className:(0,c.AK)(g,{shadow_strong:j,dark:C,condensed:Z,_clickable:!(!b&&!o)}),children:(0,h.BX)("div",{className:"_inner",children:[A&&(0,h.tZ)(f.XI,{className:"_img",img:i.g.func.imgUrl(A),size:[R,R]}),L&&(0,h.tZ)(m.qE,{user:L,balloon:U,size:V}),(0,h.BX)("div",{className:"_inner_content",children:[(0,h.BX)("div",{className:"_titles",onClick:b,children:[q,(0,h.BX)("div",{css:O,children:[T&&(0,h.tZ)(l.JO,{icon:T,color:E,toolTip:I,spaceAfter:!0}),(0,h.tZ)(d.u,{text:M,children:t&&(0,h.tZ)(s.A,{className:"_title",href:o,processHrefClick:!0,newTab:a,css:k,children:t})})]}),S&&(0,h.tZ)("div",{className:"_subTitle",children:S}),(null==v?void 0:v.length)>0&&(0,h.tZ)("div",{className:(0,c.AK)("_tags",{highlightFirstTag:x}),children:v.map((function(e,t){return(0,h.BX)(r.Fragment,{children:[(0,h.tZ)("span",{children:e}),t<v.length-1?(0,h.tZ)(h.HY,{children:" • "}):null]},t)}))}),X]}),F]}),(H||(null==N?void 0:N.length)>0)&&(0,h.BX)("span",{className:"_actions",children:[H&&(0,h.tZ)("span",y(y(y({className:"_sort_handle"},H.attributes),H.listeners),{},{children:(0,h.tZ)(l.JO,{icon:"move",smallButtonLike:!0})})),(null==N?void 0:N.length)>0&&(0,h.tZ)(u.x,{className:"_menu",options:N,onSelect:z,children:(0,h.tZ)(l.JO,{icon:"menu",smallButtonLike:!0})})]})]})})},S=function(e){var t=e.markColor,n=e.titleColor;return(0,o.iv)("position:relative;display:flex;flex-wrap:wrap;flex-direction:row;justify-content:center;text-align:center;background-color:",i.g.colors.bg_1,";padding:5px;",i.g.classes.shadow_light,";&:hover{background-color:",i.g.colors.bg_2,";}",t?"border: 2px solid ".concat(t,";"):"",">*{flex-basis:100%;}._title{display:inline-flex;flex-grow:1;overflow:hidden;color:",n||i.g.colors.text_main,";font-weight:700;font-size:1.1em;}._clickable{cursor:pointer;}._subTitle{color:",i.g.colors.text_sec,";}._tags{flex-basis:100%;span:first-of-type{color:",i.g.colors.yellow,";font-weight:700;}}","")},j=function(e){var t=e.title,n=e.href,o=e.newTab,a=e.titleColor,d=e.subTitle,m=e.tags,g=e.markColor,b=e.className,v=e.onClick,_=e.icon,w=e.iconTooltip,O=e.img,k=e.imgSize,x=void 0===k?i.g.consts.ITEM_IMG_SIZE+"px":k,j=e.menuOptions,C=e.menuOnSelect,P=e.children,Z=(0,r.useContext)(p.y);return(0,h.BX)("div",{css:S({markColor:g,titleColor:a}),className:(0,c.AK)(b,{_clickable:!(!v&&!n)}),children:[O&&(0,h.tZ)(f.XI,{img:O,size:[x,x],className:"_img",contain:"contain"}),(0,h.BX)("div",{children:[_&&(0,h.tZ)(l.JO,{icon:_,toolTip:w}),t&&(0,h.tZ)(s.A,{className:(0,c.AK)("_title",{_clickable:!(!v&&!n)}),href:n,processHrefClick:!0,newTab:o,children:t})]}),d&&(0,h.tZ)("div",{className:"_subTitle",children:d}),(null==m?void 0:m.length)>0&&(0,h.tZ)("div",{className:"_tags",children:m.map((function(e,t){return(0,h.BX)(r.Fragment,{children:[(0,h.tZ)("span",{children:e}),t<m.length-1?(0,h.tZ)(h.HY,{children:" • "}):null]},t)}))}),P,(Z||(null==j?void 0:j.length)>0)&&(0,h.BX)("span",{className:"_actions",children:[Z&&(0,h.tZ)("span",y(y(y({className:"_sort_handle _hover"},Z.attributes),Z.listeners),{},{children:(0,h.tZ)(l.JO,{icon:"move",smallButtonLike:!0})})),(null==j?void 0:j.length)>0&&(0,h.tZ)(u.x,{className:"_menu _hover",options:j,onSelect:C,children:(0,h.tZ)(l.JO,{icon:"menu",smallButtonLike:!0})})]})]})}},40493:function(e,t,n){"use strict";n.d(t,{T:function(){return f}});var r=n(70917),o=n(16920),i=n(66975),a=n(39952),l=n(71134),s=(n(57882),n(87363)),c=n(35944);function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var d=function(e,t){return(0,r.iv)("display:inline-flex;align-items:center;.label{",o.g.classes.margin_far("10px"),";}.value-label{",o.g.classes.margin_near("10px"),";}.control-switcher{position:relative;height:",e,"px;border-radius:9999px;background-color:",o.g.colors.bg_1,";display:inline-block;}.options{display:flex;>div{min-width:",e,"px;height:",e,"px;border-radius:",e,"px;font-size:",e/2,"px;padding:",t?"1em":0,";color:",o.g.colors.grey,";cursor:pointer;display:flex;align-items:center;justify-content:center;}}&.show-option-dots{.options{>div{border:7px solid ",o.g.colors.bg_2,";background-color:",o.g.colors.text_placeholder,";}}}.highlighter{position:absolute;width:",e,"px;height:",e,"px;background-color:",o.g.theme.color_1,";border-radius:",e,"px;top:0;display:flex;align-items:center;justify-content:center;font-size:",e/2,"px;color:#FFF;",o.g.near,":0;cursor:pointer;transition:transform .3s ease-in-out,transform .3s ease-in-out;}","")},f=function(e){var t,n,r=e.onChange,p=e.options,f=void 0===p?[]:p,m=e.value,g=e.size,h=void 0===g?20:g,b=e.disabled,y=e.label,v=e.showValueLabel,_=e.inlineLabels,w=(0,s.useRef)([]),O=(0,s.useRef)(0),k=(0,s.useRef)(null),x=m?f.findIndex((function(e){return e.val==m})):0,S=x+1===f.length?f[0].val:null===(t=f[x+1])||void 0===t?void 0:t.val,j=!_&&f.length>2&&!f.some((function(e){return e.icon})),C=u((0,s.useState)(!1),2),P=C[0],Z=C[1];(0,s.useLayoutEffect)((function(){if(k.current)return k.current.style.width=Math.ceil(w.current[x].getBoundingClientRect().width)+"px",P?B():O.current=setTimeout((function(){return B(),Z(!0)}),300),function(){return clearTimeout(O.current)}}),[m,P]);var B=function(){if(k.current){var e=w.current.slice(0,x).reduce((function(e,t){return e+Math.ceil(t.getBoundingClientRect().width)}),0)*(o.g.isRTL?-1:1);k.current.style.transform="translateX(".concat(e+"px",")")}},T=f[x];return(0,c.BX)("div",{css:d(h,_),className:(0,l.AK)("switcher-input",{"show-option-dots":j}),children:[(0,c.tZ)("div",{className:"label",children:"string"==typeof y?(0,c.tZ)(a.A,{label:y}):y}),(0,c.BX)("div",{className:"control-switcher",children:[(0,c.tZ)("div",{className:"options",children:f.map((function(e,t){return(0,c.BX)("div",{onClick:b?void 0:function(){return r(e.val)},ref:function(e){return w.current[t]=e},children:[e.icon&&(0,c.tZ)(i.JO,{icon:e.icon}),_&&(0,c.BX)(c.HY,{children:[" ",e.label.caps()]})]},e.val||0)}))}),T&&(0,c.BX)("div",{className:"highlighter",onClick:b?void 0:function(){return r(S)},ref:k,style:{backgroundColor:T.color},children:[T.icon&&(0,c.tZ)(i.JO,{icon:T.icon}),_&&(0,c.BX)(c.HY,{children:[" ",T.label.caps()]})]})]}),v&&(null==T?void 0:T.label)&&(0,c.tZ)("div",{className:"value-label",children:null===(n=T.label)||void 0===n?void 0:n.caps()})]})}},40676:function(e,t,n){"use strict";n.d(t,{VD:function(){return U},q3:function(){return M},iA:function(){return q},W7:function(){return z},lF:function(){return X}});var r=n(87363),o=n(15560),i=n(70917),a=n(16920),l=n(45697),s=n(65836),c=n(95405),u=n(55832),p=n(8411),d=n(71134),f=n(70081),m=(n(57882),n(539)),g=n(69637),h=n(22698),b=n(73105),y=n(66975),v=n(35944);var _=(0,i.iv)("background-color:",a.g.darkMode?a.g.colors.bg_cont:"#FAFAFA",";font-size:.9em;text-align:",a.g.near,";padding:2px 10px;white-space:nowrap;z-index:",a.g.z.widget_bar,";&._clickable{cursor:pointer;}&:first-of-type{border-radius:7px 0 0 7px;}&:last-of-type{border-radius:0 7px 7px 0;}&._center{text-align:center;}&._sticky{position:sticky;border-radius:0;box-shadow:0 3px 0 rgba(113, 74, 178, 15%);}&._narrow{width:1px;}>.Icon{margin:0 5px;}&:hover{z-index:",a.g.z.widget_bar+1,";}",""),w={name:"t10jb8",styles:"margin:5px"},O=function(e){var t=e.title,n=e.checkAll,r=e.sortVal,o=e.onSort,i=e.sort,a=e.collection,l=e.tableHeadSticky,s=e.stickyStartHeight,c=e.tooltip,u=e.narrow;return l=!(0,d.tq)()&&l,(0,v.BX)(h.kA,{css:_,style:{top:l?l+s+"px":void 0},className:(0,d.AK)({_center:n,_clickable:r,_sticky:l,_narrow:n||u}),onClick:r?function(){return o(r)}:void 0,children:[(0,d.rj)(null==t?void 0:t.caps()),c&&(0,v.tZ)(b.u,{css:w,text:c,children:(0,v.tZ)(y.JO,{icon:"menu_info"})}),(null==i?void 0:i.by)===r&&(0,v.tZ)(y.JO,{icon:"arrow_"+(i.desc?"down":"up")}),n&&(0,v.tZ)(g.bx,{collection:a})]})},k=n(43698);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){j(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var C=(0,i.iv)("border:1px solid ",a.g.colors.border,";border-radius:7px;margin:5px 0;overflow:hidden;position:relative;font-size:.9rem;>div{display:flex;&>div{padding:3px 5px;}>div:first-child{background-color:#f5f4f5;font-size:.9em;min-width:25%;}&.main>div:nth-child(2){color:",a.g.colors.text_main,";font-weight:600;}}.checkbox{position:absolute;bottom:0;",a.g.far,":0;}",""),P=["main"],Z=(0,o.observer)((function(e){var t=e.tds,n=(0,r.useContext)(z).cols,o=null;return(0,v.BX)("div",{css:C,children:[t.map((function(e,t){var r,i;if(!1===e)return null;var a,l,s={};if((0,d.Kn)(e)){if("checkbox"===e.type)return o=(0,v.tZ)(k.I,{type:"checkbox",className:"checkbox",disabled:e.o.disabled,value:e.o._checked,onChange:function(t){return e.o._checked=t}}),null;if("description"===e.type){var c=e.text,u=e.html;e.isHtml&&!u&&(u=c),a=u?(0,d.s9)(u):c}else if("icons"===e.type&&e.icons){var p=e.icons.filter((function(e){return e}));if(!p.length)return null;a=p.map((function(e,t){return(0,v.tZ)(y.JO,S({buttonLike:!0},e),t)}))}else a=e._;l=P.includes(null==e?void 0:e.type)?null==e?void 0:e.type:void 0,delete(s=S({},e))._,delete s.indent}else a=e;if(!a)return null;var f=n[t];return(0,d.Kn)(f)&&(f=f.title),(0,v.BX)("div",S(S({},s),{},{className:(0,d.AK)(l,s.className),onClick:function(t){return"icons"===e.type&&t.stopPropagation()},children:[(0,v.tZ)("div",{children:f?"".concat(null===(r=(i=f).caps)||void 0===r?void 0:r.call(i),":"):""}),(0,v.tZ)("div",{children:a})]}),t)})),o]})})),B=n(40965),T=["tds"];function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=(0,r.createContext)(null),M=40,F=function(e){var t=e.compact,n=void 0!==t&&t,r=e.whiteSpace;return(0,i.iv)("width:100%;>table{border-collapse:separate;border-spacing:0 5px;width:100%;color:",a.g.colors.text_sec,";>tbody>tr{height:",n?M:63,"px;>td{border-style:solid;border-color:",a.g.colors.border,";border-width:1px 0;padding:",n?0:""," 10px;",r?"white-space: ".concat(r,";"):""," &:first-of-type{border-",a.g.near,"-width:1px;border-top-",a.g.near,"-radius:",n?5:7,"px;border-bottom-",a.g.near,"-radius:",n?5:7,"px;}&:last-of-type{border-",a.g.far,"-width:1px;border-top-",a.g.far,"-radius:",n?5:7,"px;border-bottom-",a.g.far,"-radius:",n?5:7,"px;}&._main{color:",a.g.colors.text_main,";font-weight:600;padding-top:0;padding-bottom:0;}&._bold{font-weight:600;}&._icons{width:1px;white-space:nowrap;>.Icon,>.ContextMenu{display:inline-block;font-size:1.3em;&:not(:first-child){.el_icon:not(.buttonLike):not(.smallButtonLike){",a.g.classes.margin_near("12px"),";}}}}&._img{width:1px;padding:0 20px;line-height:0;img{width:31px;height:31px;object-fit:cover;}}&._type_icon{font-size:1.8em;}&._center{text-align:center;}}&:hover{>td{border-color:",a.g.theme.color_1,";}}}}",a.g.mQuery.mobile,"{overflow:auto;}","")},q=(0,o.observer)((function(e){var t,n=e.cols,o=e.collection,i=e.filters,l=e.sorts,g=e.actions,h=e.RowRenderer,b=e.rowIdCol,y=void 0===b?"_key":b,_=e.rowProps,w=e.filterNsort,k=e.filterDelay,x=e.showBar,S=void 0===x||x,j=e.scrollParent,C=e.sticky,P=e.stickyStartHeight,Z=e.noWindow,B=e.loading,T=e.compact,E=e.whiteSpace,I=e.barExtraComponent,A=e.tableReplacement,D=e.displayCount,N=void 0!==D&&D,q=e.mobileSupport,X=void 0!==q&&q,L=e.forceMobileView,U=void 0!==L&&L,V=(0,f.qD)(w),H=V.filtersVals,G=V.setFilterVals,J=V.sort,W=V.setSort,K=w?o:(0,u.WB)(o,H,J,{filters:i}),$=(0,f.iP)(),Y=X&&$.width<1024||U,Q=!((0,d.xb)(i)&&(0,d.xb)(k)&&(0,d.xb)(l)&&(0,d.xb)(g)&&(0,d.xb)(I)),ee=(0,v.tZ)(p.CX,{filters:i,filtersVals:H,delay:k,onFilter:G,sorts:l,sort:J,onSort:W,actions:g,extraComponent:I,alwaysShow:Q,sticky:C,displayCount:{count:null==K?void 0:K.length,display:N},minHeight:"42px"}),te=(0,v.tZ)("thead",{children:(0,v.tZ)("tr",{style:n&&{height:"32px"},children:null==n?void 0:n.filter((function(e){return!!e||""===e})).map((function(e,t){return(0,v.tZ)(O,R(R({},"string"==typeof e?{title:e}:e),{},{sortVal:l?e.sortVal:void 0,sort:J,onSort:W,collection:K,tableHeadSticky:C&&a.g.consts.TABLE_HEAD_HEIGHT,stickyStartHeight:P}),t)}))})}),ne=(0,r.useCallback)(A||Z||B?void 0:function(e){var t=e.partialList,r=e.style,o=e.listRef;return(0,v.tZ)("div",{css:F({compact:T,whiteSpace:E}),children:(0,v.BX)("table",{style:r,ref:o,children:[te,(0,v.BX)("tbody",{children:[t.map((function(e){return(0,v.tZ)(c.SV,{children:(0,v.tZ)(h,{row:e,rowProps:_,cols:n,rows:t})},e[y])})),(0,v.tZ)("tr",{style:{height:"auto"}})]})]})})});return t=A||(Y?B?(0,v.tZ)(m.$,{}):K.map((function(e){return(0,v.tZ)(c.SV,{children:(0,v.tZ)(h,{row:e,rowProps:_,rows:K})},e[y])})):Z||B||Y?(0,v.tZ)("div",{css:F({compact:T,whiteSpace:E}),children:(0,v.BX)("table",{children:[!Y&&te,(0,v.tZ)("tbody",{children:B?(0,v.tZ)("tr",{children:(0,v.tZ)("td",{colSpan:n.length,style:{border:0},children:(0,v.tZ)(m.$,{})})}):K.map((function(e){return(0,v.tZ)(c.SV,{children:(0,v.tZ)(h,{row:e,rowProps:_,rows:K})},e[y])}))})]})}):(0,v.tZ)(s.C,{items:K,itemHeight:5+(T?M:63),itemBuffer:15,container:j||window,InnerComponent:ne})),(0,v.BX)(z.Provider,{value:{cols:n,mobileView:Y},children:[S&&ee,t]})})),X=(l.object,l.shape({rowAction:l.func}),function(e){var t=e.tds,n=A(e,T);return(0,r.useContext)(z).mobileView?(0,v.tZ)(Z,{tds:t}):(0,v.tZ)("tr",R(R({},n),{},{children:t.filter((function(e){return!1!==e})).map((function(e,t){var n,r="td";return null!=e&&e.type&&("main"===e.type?r=g.U6:"image"===e.type?r=g.NM:"icons"===e.type?r=g.jA:"checkbox"===e.type?r=g.Fo:"description"===e.type?r=g.FS:"td"!==e.type&&console.warn("invalid td type '".concat(e.type,"' in arrToTr"))),(0,d.Kn)(e)?(delete(n=R({},e)).type,n.children=n._,delete n._):n={children:e},(0,v.tZ)(r,R({},n),t)}))}))}),L=(0,i.iv)("tr{td{min-width:",(0,d.tq)()?"40%":"120px",";margin:15px;padding:0 5px;}td:first-child{color:",a.g.colors.text_sec,";font-size:0.9em;}td:last-child{font-weight:600;}}",""),U=function(e){var t=e.pairs;return(0,v.tZ)("table",{css:L,children:(0,v.tZ)("tbody",{children:t.map((function(e,t){var n,r=E(e,3),o=r[0],i=r[1],a=r[2];return(0,v.BX)("tr",{children:[(0,v.tZ)("td",{children:null===(n=o.caps)||void 0===n?void 0:n.call(o)}),(0,v.BX)("td",{children:["string"==typeof i&&(0,v.tZ)(v.HY,{children:"text"===a?(0,v.tZ)(B.x,{content:i}):i}),i.icon&&(0,v.tZ)(y.JO,{icon:i.icon})]})]},t)}))})})}},69637:function(e,t,n){"use strict";n.d(t,{FS:function(){return S},Fo:function(){return v},NM:function(){return k},U6:function(){return w},bx:function(){return _},jA:function(){return O}});var r=n(87363),o=n(70917),i=n(15560),a=n(43698),l=(n(57882),n(16920)),s=n(73105),c=n(71134),u=n(66975),p=n(35944),d=["o"];function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var v=(0,i.observer)((function(e){var t=e.o,n=y(e,d);return(0,p.tZ)("td",h(h({onClick:function(e){return e.stopPropagation()},className:"_center"},n),{},{children:(0,p.tZ)(a.I,{type:"checkbox",disabled:t.disabled,value:t._checked,onChange:function(e){return t._checked=e}})}))})),_=(0,i.observer)((function(e){var t=e.collection,n=!t.find((function(e){return!e._checked||!!e.disabled})),o=f((0,r.useState)(t.length>0&&n),2),i=o[0],l=o[1];return(0,p.tZ)(a.I,{type:"checkbox",value:i,onChange:function(e){return l(e),t.forEach((function(t){return t._checked=t.disabled?t._checked:e}))}})})),w=(0,i.observer)((function(e){var t=e.children,n=e.width,r=e.minWidth,o=e.indent,i={};return n&&(i.width=n),r&&(i.minWidth=r),o&&(i["padding".concat(l.g.isRTL?"Right":"Left")]="30px"),(0,p.tZ)("td",{className:"_main",style:i,children:t})})),O=(0,i.observer)((function(e){var t=e.children,n=e.icons;return(0,p.tZ)("td",{className:"_icons",onClick:function(e){return e.stopPropagation()},children:n?n.filter((function(e){return e})).map((function(e,t){return(0,p.tZ)(u.JO,h({buttonLike:!0},e),t)})):t})})),k=(0,i.observer)((function(e){var t=e.src,n=e.alt;return(0,p.tZ)("td",{className:"_img",children:(0,p.tZ)("img",{src:t,alt:n})})})),x=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:200;return(0,o.iv)("max-width:",e,"px;",l.g.classes.ellipsis,";","")},S=(0,i.observer)((function(e){var t=e.text,n=e.html,r=e.maxWidth,o=void 0===r?200:r,i=e.truncateLength,a=void 0===i?50:i;return e.isHtml&&!n&&(n=t),(0,p.tZ)("td",{children:(0,p.tZ)(s.u,{html:n,text:t,children:(0,p.tZ)("div",{css:x(o),children:n?(0,c.s9)(n,a):null==t?void 0:t.truncate(a)})})})}))},65836:function(e,t,n){"use strict";n.d(t,{C:function(){return c},x:function(){return f}});var r=n(87363),o=n(15560),i=n(70081),a=(n(57882),n(35944));function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c=(0,o.observer)((function(e){var t=e.items,n=void 0===t?[]:t,o=e.itemHeight,s=e.itemBuffer,c=e.container,p=void 0===c?window:c,d=e.InnerComponent,m=(0,r.useRef)(),g=l((0,r.useState)({firstItemIndex:0,lastItemIndex:-1}),2),h=g[0],b=g[1],y=function(){if(m.current){var e=u(m.current,p,n,o,s);!e||e.firstItemIndex>e.lastItemIndex||e.firstItemIndex===h.firstItemIndex&&e.lastItemIndex===h.lastItemIndex||b(e)}};return"undefined"!=typeof window&&"requestAnimationFrame"in window&&(y=f(y)),(0,r.useEffect)(y),(0,i.OR)("scroll",y,p),(0,i.OR)("resize",y,p),(0,a.tZ)(d,{listRef:m,partialList:h.lastItemIndex>-1?n.slice(h.firstItemIndex,h.lastItemIndex+1):[],style:{height:n.length*o,paddingTop:h.firstItemIndex*o,boxSizing:"border-box"}})})),u=function(e,t,n,r,o){if(t&&r&&n&&0!==n.length){var i=t.innerHeight,a=t.clientHeight,l=i||a;if(l){var s=d(t),c=s+l,u=p(e)-p(t),f=r*n.length,m=Math.max(0,s-u),g=Math.max(0,Math.min(f,c-u));return{firstItemIndex:Math.max(0,Math.floor(m/r)-o),lastItemIndex:Math.min(n.length,Math.ceil(g/r)+o)-1}}}},p=function e(t){return void 0!==t&&t?(t.offsetTop||0)+e(t.offsetParent):0},d=function(e){return e.pageYOffset?e.pageYOffset:e.document?e.document.documentElement&&e.document.documentElement.scrollTop?e.document.documentElement.scrollTop:e.document.body&&e.document.body.scrollTop?e.document.body.scrollTop:0:e.scrollY||e.scrollTop||0},f=function(e){var t=arguments,n=this,r=!1;return function(){r||(r=!0,window.requestAnimationFrame((function(){e.apply(n,t),r=!1})))}}},31092:function(e,t,n){"use strict";n.d(t,{m:function(){return v}});var r=n(70917),o=n(87363),i=n(16920),a=(n(57882),n(71134)),l=n(40441),s=n(70081),c=n(66975),u=n(92945),p=n(22698),d=n(6380),f=n(35944);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=(0,o.forwardRef)((function(e,t){var n,l=e.tabs,c=e.activeTab,u=e.onSelect,p=e.className,d=e.inContainerHead,m=e.noCaps,g=e.morePadding,h=e.subTabs,y=e.stickyTabs,v=b((0,o.useState)(!1),2),_=v[0],k=v[1],S=(0,o.useRef)(null),j=(0,o.useRef)(0),C=(0,s.iP)(),P=function(){j.current=O(S.current)+10,k(S.current.clientWidth<=j.current)};return(0,o.useEffect)(P,[C.width,l.length]),(0,o.useImperativeHandle)(t,(function(){return{resize:P}})),(0,f.tZ)("div",{css:(n=y,(0,r.iv)("position:relative;width:100%;",n&&(0,r.iv)("position:sticky;top:50px;padding:10px 0;background-color:",i.g.colors.bg_main,";z-index:1;",""),";&.inContainerHead{max-width:800px;&,.TabItem{min-height:33px;max-height:33px;}}","")),className:(0,a.AK)("Tabs",p,{inContainerHead:d}),ref:S,children:_?(0,f.tZ)(x,{selectedTab:c,onSelect:u,tabs:l,noCaps:m}):l.map((function(e,t){return(0,f.tZ)(w,{tab:e,selectedTab:c,onSelect:u,noCaps:m,morePadding:g,subTabs:h,error:e.error},t)}))})})),_=(0,r.iv)("display:inline-block;cursor:pointer;&.subTabs{padding:7px 1em;font-size:.9em;}&:not(.subTabs){font-weight:600;border-bottom:1px solid transparent;transition:border-color .2s ease-out;padding:0 20px 10px;&.morePadding{padding:0 25px 15px;font-size:1.1em;.Icon{font-size:1.1em;}}&:hover{border-color:",i.g.colors.separator,";}}&._active{color:",i.g.colors.dominant_main,";border-color:",i.g.colors.dominant_main,";white-space:nowrap;}&.error{color:",i.g.colors.negative,";}._label{position:relative;.Icon{vertical-align:bottom;}._label_text{display:inline-block;max-height:33px;max-width:40vw;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;vertical-align:middle;}&.notActive ._label_text{text-decoration:line-through;}}",""),w=function(e){var t=e.tab,n=e.selectedTab,r=e.onSelect,o=e.arrowDown,i=e.noCaps,s=e.morePadding,u=e.subTabs,m=e.error,h=t.label,b=t.active,y=t.val,v=t.href,w=t.badge,O=t.notActive,k=t.icon,x=t.iconLink,S=t.iconFar,j=t.iconFarLink;!i&&h&&h.match(/^[A-Z]/)&&console.warn("Tab item capitalize label by itself, please remove .caps() from array. (".concat(h,")"));var C=(0,f.BX)("div",{className:(0,a.AK)("_label",{notActive:O}),children:[k&&(0,f.tZ)(c.JO,{icon:k,href:x,spaceAfter:!!h}),h&&(0,f.tZ)("div",{className:"_label_text",children:i?h:null==h?void 0:h.caps()})," ",w>=0&&(0,f.tZ)(d.T,{badge:w})," ",o&&(0,f.tZ)(c.JO,{icon:"arrow_down"}),S&&(0,f.tZ)(c.JO,{icon:S,href:j,spaceBefore:!0})]}),P={css:_,onClick:r?function(){return r(y)}:void 0,href:v,className:(0,a.AK)("TabItem",{error:!!m,_active:b||"val"in t&&y===n,subTabs:u,morePadding:s})};return j||P.onClick?(0,f.tZ)(p.LZ,g(g({},P),{},{children:C})):(0,f.tZ)(l.A,g(g({},P),{},{children:C}))},O=function(e){for(var t=0,n=0;n<e.childElementCount;n++)t+=e.children[n].clientWidth;return t},k=(0,r.iv)("user-select:none;min-height:23px;>._label{display:inline-block;}>._list{background-color:white;border:1px solid #a9a9a9;border-radius:4px;position:fixed;z-index:60;overflow:auto;max-height:50vh;padding:7px;>a,>div{display:block;padding:8px 5px;border:none;._badge{float:",i.g.classes.opposite_side,";}}}",""),x=function(e){var t=e.selectedTab,n=e.onSelect,r=e.tabs,o=e.noCaps,i=(0,u.v)({}),a=i.opened,l=i.toggleDD,s=i.selectRef,c=i.labelRef,p=i.ddRef,d=r.find((function(e){return e.val===t}));return(0,f.BX)("div",{css:k,ref:s,children:[(0,f.tZ)("div",{className:"_label",onClick:function(){return l(void 0)},ref:c,children:d&&(0,f.tZ)(w,{tab:d,selectedTab:t,arrowDown:!0,noCaps:o})}),a&&(0,f.tZ)("div",{className:"_list",ref:p,children:r.map((function(e){return(0,f.tZ)(w,{tab:e,selectedTab:t,onSelect:n?function(e){return n(e),l(!1)}:void 0,noCaps:o},e.val||e.label)}))})]})}},25680:function(e,t,n){"use strict";n.d(t,{V:function(){return g},r:function(){return b}});var r=n(70917),o=n(15560),i=n(71134),a=(n(57882),n(16920)),l=n(86344),s=n(66975),c=n(73105),u=n(35944);var p=["#20c3dc","#ff560a","#E91E63","#9C27B0","#673AB7","#3D51B5","#00BCD4","#5AB963","#8BC34A","#eaaf01","#FF9800"],d={},f=function(e,t){return t?{backgroundColor:t,color:(0,l.ou)(t)}:(d[e]||(d[e]=e.split("").reduce((function(e,t){return(e<<5)-e+t.charCodeAt(0)|0}),0)),{backgroundColor:p[(d[e]+2147483647)%p.length],color:"#fff"})},m={name:"1t6zp5c",styles:"font-size:.9em;transition:background-color .3s ease-out;background-color:#f2f2f3;color:#171625;padding:5px 9px;border-radius:14px;user-select:none;&._clickable{cursor:pointer;}&.disabled{opacity:.3;}&.smaller{font-size:.8em;padding:2px 7px;}"},g=(0,o.observer)((function(e){var t=e.tag,n=e.count,r=e.active,o=e.onClick,a=e.disabled,l=e.color,s=e.tooltip,p=e.smaller,d=(0,u.BX)("div",{css:m,style:void 0===r||!0===r?f(t,l):void 0,onClick:a?void 0:o,className:(0,i.AK)({_clickable:!a&&o,disabled:a,smaller:p}),children:[t.caps(),n?" (".concat(n,")"):""]});return s?(0,u.tZ)(c.u,{text:s,children:d}):d})),h=(0,r.iv)("position:relative;>._title{font-size:0.9em;font-weight:600;color:",a.g.colors.text_sec,';}>._tags{display:flex;flex-wrap:wrap;margin:0 -4px;&.justify{justify-content:space-between;&:after{content:"";flex:auto;}}>div{margin:4px 4px 4px;}}',""),b=function(e){var t=e.children,n=e.justify,r=e.title,o=e.className,a=e.onClear;return 0===(null==t?void 0:t.length)?null:(0,u.BX)("div",{css:h,className:(0,i.AK)("TagsContainer",o,{justify:n}),children:[r&&(0,u.tZ)("div",{className:"_title",children:r.caps()}),a&&(0,u.tZ)(s.JO,{icon:"clear",toolTip:lng("clear"),onClick:a,css:s.y$}),(0,u.tZ)("div",{className:"_tags",children:t})]})}},25690:function(e,t,n){"use strict";n.d(t,{A:function(){return k},M:function(){return w}});var r=n(87363),o=n(70917),i=n(16920),a=n(539),l=n(66975),s=(n(57882),n(71134)),c=n(5474),u=n(33051),p=n(22334),d=n(35944);function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=[lng("january|month"),lng("february|month"),lng("march|month"),lng("april|month"),lng("may|month"),lng("june|month"),lng("july|month"),lng("august|month"),lng("september|month"),lng("october|month"),lng("november|month"),lng("december|month")],h=[lng("sun|day short"),lng("mon|day short"),lng("tue|day short"),lng("wed|day short"),lng("thu|day short"),lng("fri|day short"),lng("sat|day short")],b=function(e){for(var t=[],n=(new Date).getFullYear(),r=n-e;r<n+e;r++)t.push({label:r,val:r});return t},y=function(e){var t=e.inDropDown;return(0,o.iv)("cursor:pointer;font-weight:600;text-align:center;padding:.25em 0;>div{width:2.7em;display:inline-block;",t?"":"height: 3.4em;padding-top: .5em;"," ._dots{font-weight:bold;font-size:1.5em;line-height:0;color:",i.g.colors.dominant_main,";}&._today{border-radius:10px;background-color:",i.g.colors.highlight,";color:",i.g.colors.text_main,";}&._active{border-radius:10px;background-color:",i.g.colors.dominant_main,";color:",i.g.colors.dominant_main_shade,";._dots{color:white;}}&._out_of_range{color:#b8b8b8;cursor:default;}}","")},v=function(e){var t=e.date,n=e.today,r=e.active,o=e.eventsCount,i=void 0===o?0:o,a=e.onSelect,l=e.inDropDown,c=e.inRange;return(0,d.tZ)("td",{css:y({inDropDown:l}),className:"day",onClick:function(){return c&&a&&a(t)},children:(0,d.BX)("div",{className:(0,s.AK)({_active:r,_today:n,_out_of_range:!c}),children:[t.date(),(0,d.tZ)("div",{className:"_dots",children:".".repeat(Math.min(3,i))})]})})},_=(0,o.iv)("font-size:1rem;max-width:500px;color:",i.g.colors.text_main,";._table{position:relative;>table{width:100%;th{width:14.2%;color:",i.g.colors.text_sec,";font-size:.8em;font-weight:600;padding:1em 0;text-align:center;}}._load{position:absolute;left:0;top:0;width:100%;height:100%;background:white;opacity:0.5;display:flex;align-items:center;justify-content:center;}}",""),w=function(e){var t=e.activeDate,n=e.onDateSelect,o=e.onMonthChange,i=e.events,l=e.className,s=e.inDropDown,c=e.minDate,m=e.maxDate,y=e.monthNavigation,w=void 0===y||y,O=f((0,r.useState)(t?t.clone().startOf("month"):(0,p.WQ)().startOf("month")),2),x=O[0],S=O[1],j=function(e,t){var n=t?x.month():(0,p.WQ)(e,"MM").month(),r=t?(0,p.WQ)(e,"YYYY").year():x.year();S((0,p.WQ)("".concat(r,"-").concat(n+1),"YYYY-MM")),null==o||o((0,p.WQ)("".concat(r,"-").concat(n+1),"YYYY-MM"))};(0,r.useEffect)((function(){var e;t&&j(null===(e=t.clone)||void 0===e?void 0:e.call(t).startOf("month"))}),[t]);var C=function(e){return S(x.clone().add(e?1:-1,"months")),null==o?void 0:o(x.clone().add(e?1:-1,"months"))},P=function(e,t,n){for(var r=Array(e.day()).fill(null),o=(0,p.WQ)().startOf("day"),i=e.clone().startOf("month"),a=e.month();a===i.month();)r.push({d:i.clone(),today:(0,p.KC)(o,i),active:!!t&&(0,p.KC)(t,i),events_count:(n||[]).filter((function(e){return!!e&&e.calRelevantForDate(i)})).length}),i.add("1","days");return r}(x,t,i);return(0,d.BX)("div",{css:_,className:l,children:[(0,d.tZ)(k,{goNext:w?function(){return C(!0)}:null,goPrev:w?function(){return C(!1)}:null,title:(0,d.BX)(d.HY,{children:[(0,d.tZ)(u.x,{onSelect:j,options:g.map((function(e,t){return{val:t+1,label:e}})),dropDownLike:!0,children:(0,d.tZ)("b",{children:g[x.month()].caps()})})," ",(0,d.tZ)(u.x,{onSelect:function(e){var t;return e!==x.year()&&j(null===(t=x.clone)||void 0===t?void 0:t.call(x).year(e),!0)},dropDownLike:!0,options:b(6),children:x.year()})," "]})}),(0,d.BX)("div",{className:"_table",children:[(0,d.BX)("table",{children:[(0,d.tZ)("thead",{className:"headers",children:(0,d.tZ)("tr",{children:h.map((function(e,t){return(0,d.tZ)("th",{children:e.toUpperCase()},t)}))})}),(0,d.tZ)("tbody",{children:[0,1,2,3,4,5].map((function(e){return(0,d.tZ)("tr",{children:P.slice(7*e,7*e+7).map((function(e,t){return e?(0,d.tZ)(v,{date:e.d,today:e.today,active:e.active,eventsCount:e.events_count,inDropDown:s,onSelect:function(e){return n&&n(e)},inRange:(r=e.d,!(c&&moment(r).isBefore(c)||m&&moment(r).isAfter(m)))},e.d.unix()):(0,d.tZ)("td",{},t);var r}))},e)}))})]}),!1===i&&(0,d.tZ)("div",{className:"_load",children:(0,d.tZ)(a.$,{})})]})]})},O=(0,o.iv)("display:flex;align-items:center;font-size:1.2em;margin-bottom:6px;flex:1;>._strike{flex-grow:1;border-top:1px solid ",i.g.colors.separator,";",i.g.classes.margin_near(".5em"),";}>._navigation{user-select:none;&:first-of-type{",i.g.classes.margin_far(".5em"),";}>*{border:1px solid ",i.g.colors.separator,";color:",i.g.colors.text_sec,";cursor:pointer;border-radius:8px;font-size:0.7em;padding:5px;&.disabled{background-color:",i.g.colors.disabled_background,";cursor:auto;}&+*{",i.g.classes.margin_near("4px"),";}}}",""),k=function(e){var t=e.title,n=e.goPrev,r=e.goNext,o=e.goToday,i=e.viewType,a=e.onChangeViewType;return(0,d.BX)("div",{css:O,className:"headers",children:[(0,d.tZ)("div",{className:"_navigation",children:i&&(0,d.tZ)(c.P,{options:[{val:"month",label:lng("month")},{val:"week",label:lng("week")},{val:"day",label:lng("day")}],value:i,onChange:a})}),(0,d.tZ)("div",{children:t}),(0,d.tZ)("div",{className:"_strike"}),(0,d.BX)("div",{className:"_navigation",children:[n&&(0,d.tZ)(l.JO,{icon:"arrow_near",onClick:n}),r&&(0,d.tZ)(l.JO,{icon:"arrow_far",onClick:r}),void 0!==o&&(0,d.tZ)("span",{onClick:(0,s.Wl)(o)?o:void 0,className:(0,s.AK)({disabled:!(0,s.Wl)(o)}),children:lng("today").caps()})]})]})}},10101:function(e,t,n){"use strict";n.d(t,{Jf:function(){return _},hM:function(){return k},mp:function(){return O},v0:function(){return v}});var r=n(87363),o=n(70917),i=n(16920),a=n(71134),l=(n(57882),n(79752)),s=n(66975),c=n(33051),u=n(15560),p=n(35944);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||b(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=b(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function b(e,t){if(e){if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?y(e,t):void 0}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function e(t){var n,r=0,o=h(t);try{for(o.s();!(n=o.n()).done;){var i=n.value;r+=1+(i._sons_total=i.sons?e(i.sons):0)}}catch(e){o.e(e)}finally{o.f()}return r},_=function(e){var t,n={},r=h(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n[o.id]=o}}catch(e){r.e(e)}finally{r.f()}var i,a=h(e);try{for(a.s();!(i=a.n()).done;){var l=i.value;l.parent&&n[l.parent]&&(n[l.parent].sons||(n[l.parent].sons=[]),n[l.parent].sons.push(l))}}catch(e){a.e(e)}finally{a.f()}var s=e.filter((function(e){return!(e.parent&&n[e.parent])}));return v(s),s},w=function(e){var t=e.treeMargin;return(0,o.iv)("margin:0;&,ul{list-style:none;padding:0;}ul{",i.g.classes.margin_near(t+"px"),";}","")},O=function(e){var t=e.tree,n=e.innerNodeOf,o=e.idField,i=void 0===o?"id":o,a=e._sortable,l=e._nonDroppableNodes,s=e.treeMargin,c=void 0===s?30:s,u=1;return(0,p.tZ)("ul",{css:n?void 0:w({treeMargin:c}),children:t.map((function(o,s){var c=(0,p.tZ)(S,{node:o,treeProps:e,parentDistance:u});return u+=1+(o._sons_total||0),(0,p.BX)(r.Fragment,{children:[a&&(0,p.tZ)(T,{parentId:n,position:s,_nonDroppableNodes:l}),c,a&&s===t.length-1&&(0,p.tZ)(T,{parentId:n,position:s+1,_nonDroppableNodes:l})]},o[i])}))})},k=function(e){var t=e.tree,n=e.onNodeMove,o=g((0,r.useState)(null),2),i=o[0],s=o[1],c=g((0,r.useState)(void 0),2),u=c[0],d=c[1];return(0,p.BX)(l.LB,{onDragEnd:function(e){var t=e.active,r=e.over;(null==r?void 0:r.id)&&(null==n||n(t.id,r.id)),s(null),d(void 0)},onDragStart:function(e){var n=e.active,r=[],o=(0,a.oH)(t,(function(e){return(null==e?void 0:e.id)===n.id}),r),i={};(0,a.oH)(o,(function(e){var t;if(null!=e&&e.id&&(i[e.id]=1,null!==(t=e.sons)&&void 0!==t&&t.length))for(var n=0;n<=e.sons.length;n++)i["".concat(e.id,"|").concat(n)]=1}));var l=r.length>1?r[r.length-2]:{sons:t},c=l.sons.indexOf(o);i["".concat(l.id||"","|").concat(c)]=i["".concat(l.id||"","|").concat(c+1)]=1,s(o),d(i)},collisionDetection:function(e,t){var n=(0,l.Xo)(e,t);return n?n in u?null:n:null},children:[(0,p.tZ)(O,f(f({},e),{},{_sortable:!0,_nonDroppableNodes:u})),(0,p.tZ)(l.y9,{children:i?(0,p.tZ)("div",{css:j({shadow:!0}),children:(0,p.tZ)(C,{treeProps:e,node:i})}):null})]})},x=(0,o.iv)("li>div.trail{position:relative;>div{border:0 solid #c1c1c1;border-bottom-width:1px;border-",i.g.near,"-width:1px;border-bottom-",i.g.near,"-radius:4px;position:absolute;width:15px;",i.g.near,":-12px;bottom:-14px;display:flex;align-items:flex-end;}}",""),S=function(e){var t=e.treeProps,n=e.node,r=e.parentDistance,o=t.filterText,i=void 0===o?"":o,s=t.innerNodeOf,c=t.onSelect,u=t.idField,d=void 0===u?"id":u,m=t.nameField,g=void 0===m?"name":m,h=t.sonsField,b=void 0===h?"sons":h,y=t._sortable,v=t.nodeHeight,_=void 0===v?29:v,w=n[d],k=n[g],S=(0,l.O1)({id:w,disabled:!y}),P=S.attributes,Z=S.listeners,B=S.setNodeRef,T=S.isDragging,E=(0,l.Zj)({id:w,disabled:!y}),I=E.isOver,A=E.setNodeRef;return(0,p.BX)("li",{css:x,children:[!i&&s&&(0,p.tZ)("div",{className:"trail",children:(0,p.tZ)("div",{style:{height:r*(_+(y?15:0))-12+"px"}})}),(null==k?void 0:k.toLowerCase().includes(i.toLowerCase()))&&(0,p.tZ)("div",f(f(f({css:j({sortable:y,isDragging:T}),className:(0,a.AK)({drag_over:I}),onClick:c?function(){return c(w)}:void 0},Z),P),{},{ref:function(e){return A(e),B(e)},children:(0,p.tZ)(C,{treeProps:t,node:n})})),n[b]&&(0,p.tZ)(O,f(f({},t),{},{tree:n[b],innerNodeOf:w}))]})},j=function(e){var t=e.sortable,n=e.isDragging,r=e.shadow;return(0,o.iv)("border-radius:4px;padding:2px 4px;cursor:",t?"move":"pointer",";border:1px dashed transparent;opacity:",n?.3:1,";",r?i.g.classes.shadow_strong:"",";&.drag_over{border-color:silver;}&:hover{background-color:",i.g.colors.dominant_main_shade,";}","")},C=(0,u.observer)((function(e){var t=e.treeProps,n=e.node,r=t.activeId,o=t.renderNode,i=t.idField,l=void 0===i?"id":i,s=t.nameField,c=void 0===s?"name":s,u=t.buttons,d=t.mayEdit,f=n[l],m=f===r;return o?o(n,m):(0,p.tZ)(Z,{id:f,name:n[c],icon:n.icon,count:n.count,active:m,mayEdit:d,buttons:(0,a.g4)(u,null,[f,n]),isGlobalParent:".0"===n.path})})),P=(0,o.iv)("display:flex;align-items:center;>._label{padding:2px 5px;border-radius:4px;}>._count{font-size:.8em;color:",i.g.colors.text_sec,";}>.actions{white-space:nowrap;>*{",i.g.classes.margin_near("3px"),";}}&.active{>._label{background-color:",i.g.colors.dominant_main,";color:white;}>._count{color:",i.g.colors.dominant_main,";}}",""),Z=function(e){var t=e.id,n=e.name,r=e.icon,o=e.count,l=e.active,u=e.mayEdit,d=void 0!==u&&u,f=e.buttons,m=void 0===f?[]:f;return(0,p.BX)("span",{css:P,className:"".concat((0,a.AK)({active:l})," cat_").concat(t),children:[(0,p.BX)("div",{className:"_label",children:[r&&(0,p.BX)(p.HY,{children:[(0,p.tZ)(s.JO,{icon:r})," "]}),n]}),(0,p.tZ)("div",{css:i.g.classes.flex_grow}),(0,p.tZ)("div",{className:"_count",children:o}),(0,p.tZ)("div",{className:"actions",onPointerDown:function(e){return e.stopPropagation()},children:d&&(0,p.tZ)(p.HY,{children:m.map((function(e,r){var o=e.label,i=e.onClick,a=e.actions,l=e.icon;return(null==a?void 0:a.length)>0?(0,p.tZ)(c.x,{options:a,children:(0,p.tZ)(s.JO,{icon:l},r)}):(0,p.tZ)(s.JO,{icon:l,toolTip:o,onClick:function(e){return e.stopPropagation(),i({id:t,name:n})}},r+5)}))})})]})},B=function(e,t){return(0,o.iv)("transition:height .15s ease-in-out;height:15px;border:1px dashed ",e?"silver":t?"#eeeeee":"transparent",";","")},T=function(e){var t=e.parentId,n=e.position,r=e._nonDroppableNodes,o="".concat(t||"","|").concat(n),i=r&&!(o in r),a=(0,l.Zj)({id:o}),s=a.isOver,c=a.setNodeRef;return(0,p.tZ)("li",{css:B(s,i),ref:c})}},85446:function(e,t,n){"use strict";n.d(t,{O:function(){return Z},k:function(){return x}});var r=n(70917),o=n(75898),i=n(16920),a=n(95405),l=n(64902),s=n(71134),c=n(98e3),u=n(66975),p=n(22334),d=n(7392),f=n(40441),m=(n(57882),n(27821)),g=n(15560),h=n(539),b=n(23838),y=n(85311),v=n(35944);function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function w(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){O(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function O(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var k=(0,r.iv)(o.NI,";display:flex;flex-direction:column;font-size:1rem;background-color:",i.g.colors.bg_cont,";border-radius:18px;padding:30px 28px;",i.g.classes.shadow_strong,";justify-content:space-between;._avatar{margin:5px auto;display:flex;justify-content:center;font-size:30px;}._username{color:",i.g.colors.text_main,";font-size:1.4em;font-weight:bold;text-align:center;}._stats{width:100%;td{width:50%;text-align:center;>div{margin-top:0.2em;font-size:1.4em;font-weight:bold;color:",i.g.colors.text_main,";}}}._filter{background-color:",i.g.theme.color_1,";color:white;border-radius:12px;text-align:center;padding:10px 0;font-size:1.1em;font-weight:600;cursor:pointer;&._active{background-color:",i.g.colors.dominant_main,";}}",""),x=function(e){return(0,v.tZ)(a.aK,{children:(0,v.tZ)(S,w({},e))})},S=function(e){var t=e.user,n=e.active,r=e.onButtonClick;return(0,v.BX)("div",{css:k,children:[(0,v.tZ)("div",{className:"_avatar",children:(0,v.tZ)(l.qE,{user:t,size:"84px",shadowed:!0,balloon:!1})}),(0,v.tZ)("div",{className:"_username",children:(0,s.v2)(t)}),(0,v.tZ)("table",{className:"_stats",children:(0,v.tZ)("tbody",{children:(0,v.BX)("tr",{children:[(0,v.BX)("td",{children:[lng("assignments").caps(),(0,v.tZ)("div",{children:t.countAssignments})]}),(0,v.BX)("td",{children:[lng("overdue").caps(),(0,v.tZ)("div",{children:t.countAssignmentsOverdue})]})]})})}),(0,v.tZ)("div",{className:(0,s.AK)("_filter",{_active:n}),onClick:r,children:lng("show assignments").caps()})]})},j=(0,r.iv)("padding:10px;color:",i.g.colors.text_sec,";min-width:210px;max-width:240px;._userTitle{display:flex;position:relative;align-items:center;color:",i.g.colors.text_main,";border:1px solid ",i.g.colors.border,";border-radius:10px;padding:5px;._circledImage{",i.g.classes.margin_far("5px"),";}}.smallTitle{font-weight:600;}.small{font-size:12px;}._userContent{margin-top:8px;>div{margin:2px;div{line-height:1;}}}",""),C=m.observable.map({},{deep:!1}),P={name:"3zy121",styles:"margin:20px"},Z=(0,g.observer)((function(e){var t=e.userId,n=(Blsm.user.isPowerManager||!Blsm.isFeatureEnabled("isolate_users"))&&t!=Blsm.user.id,r=function(e){var t=C;return t.get(e)||(t.set(e,"loading"),(0,c.SC)("users/"+e,{},(function(n){return t.set(e,n)})),t.get(e))}(t);return"loading"===r?(0,v.tZ)(h.$,{css:P}):(0,s.xb)(r)?null:(0,v.BX)("div",{css:j,onClick:function(e){return e.stopPropagation()},children:[(0,v.BX)("div",{className:"_userTitle",children:[(0,v.tZ)(l.cU,{img:r.user_avatar,bgColor:i.g.func.id2color(t),className:"_circledImage"}),(0,v.tZ)(f.A,{theme:"hover",href:{user:t},children:(0,v.tZ)("b",{children:(0,s.v2)(r)})}),(0,v.tZ)(y.zh,{}),Blsm.user.isPowerManager&&t!=Blsm.user.id&&(0,v.tZ)(d.l,{onClick:function(){return(0,b.vm)().pretend(t)},children:(0,v.tZ)(u.JO,{toolTip:lng("pretend to be this user"),icon:"pretend"})})]}),(0,v.BX)("div",{className:"_userContent",children:[(0,v.tZ)("div",{className:"smallTitle small",children:r.user_company}),(0,v.tZ)("div",{className:"smallTitle small",children:r.user_department}),(0,v.tZ)("div",{className:"smallTitle small",children:r.user_job_title}),r.user_birthdate&&(0,v.BX)("div",{className:"small",children:[(0,v.tZ)(u.JO,{icon:"cupcake",color:"#FFAC98"})," ",(0,p.GG)(r.user_birthdate,{time:!1,year:!1})]}),n&&(0,v.tZ)(d.l,{theme:"contained",onClick:function(){return(0,f.p4)({message:"new",params:{to:t}},!0)},children:lng("send message").caps()}),n&&void 0!==window.bchat&&(0,v.tZ)(d.l,{theme:"outlined",onClick:function(){return window.bchat.openChat(t)},children:(0,v.tZ)(u.JO,{icon:"chat"})})]})]})}))},40236:function(e,t,n){"use strict";n.d(t,{$L:function(){return w},Hl:function(){return v},a5:function(){return b}});var r=n(70917),o=n(16920),i=n(87363),a=n(40441),l=n(42755),s=n(55762),c=n(66975),u=n(33051),p=n(71134),d=n(33550),f=(n(57882),n(35944));function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,i.createContext)(null),y=function(e){return(0,r.iv)("display:flex;flex-wrap:wrap;flex-direction:row;justify-content:start;margin:0 -",o.g.consts.CARDS_SPACING/2,"px;padding-bottom:",(0,p.tq)()?"50vh":0,";>div{margin:0 ",o.g.consts.CARDS_SPACING/2+"px"," ",(e||o.g.consts.CARDS_SPACING)+"px",";&._filler{width:",o.g.consts.CARD_WIDTH,"px;margin-bottom:0;}}",o.g.mQuery.mobile,"{justify-content:center;margin:0 -4px;>div{width:100%;margin:0 4px 2em;}}","")},v=function(e){var t=e.children,n=e.className,r=e.sortable,o=e.onSort,i=e.vertSpacing;(0,p.w1)()&&(r=!1);return(0,f.BX)("div",{css:y(i),className:(0,p.AK)("WidgetContainer",n),ref:function(e){e&&!e.style.minHeight&&(e.style.minHeight=Math.min(e.offsetHeight,1e3)+"px")},children:[r?(0,f.tZ)(d.b,{onSort:o,children:t}):t,!r&&(0,p.w6)(6).map((function(e){return(0,f.tZ)("div",{className:"_filler"},e)}))]})},_=(0,r.iv)("border:1px solid ",o.g.colors.separator,";position:relative;background-color:",o.g.colors.bg_cont,";overflow:hidden;",o.g.mQuery.mobile,"{.widget-body{min-height:3em;}._icons{display:block;}}",o.g.mQuery.notMobile,"{height:",o.g.consts.WIDGET_BASE_HEIGHT,"px;._icons{display:none;}}border-radius:",o.g.consts.WIDGET_BORDER_RADIUS,"px;display:flex;flex-direction:column;>.widget-title{padding:7px 15px 0;min-height:35px;font-size:1.1rem;font-weight:600;",o.g.classes.ellipsis,";}>.widget-subtitle{padding:3px 15px 0;min-height:25px;font-size:0.9rem;font-weight:200;",o.g.classes.ellipsis,";}>.widget-body{overflow:auto;flex-grow:1;}._icons{position:absolute;top:5px;",o.g.far,":4px;white-space:nowrap;}&:hover ._icons{display:block;}",""),w=function(e){var t,n=e.title,r=e.subtitle,p=e.children,m=e.link,h=e.newTab,y=e.className,v=e.size,w=void 0===v?1:v,O=e.dragHandle,k=void 0===O||O,x=e.menuOptions,S=e.newMenuOptions,j=e.css,C=e.widgetId,P=(0,i.useContext)(d.y),Z=null===(t=(0,i.useContext)(b))||void 0===t?void 0:t.baseWidth,B=!1===Z?Z:Z||o.g.consts.CARD_WIDTH;return(0,f.BX)("div",{css:[_,j,"",""],className:y,style:{width:B&&w*B+(w-1)*o.g.consts.CARDS_SPACING+"px"},"data-widget_id":C,children:[(0,f.BX)(d.y.Provider,{value:void 0,children:[n&&(0,f.tZ)("div",{className:"widget-title",children:(0,f.tZ)(a.A,{href:m,children:n.caps()})}),r&&(0,f.tZ)("div",{className:"widget-subtitle",children:(0,f.tZ)("span",{children:r.caps()})}),(0,f.tZ)("div",{className:"widget-body",children:(0,f.tZ)(s.SV,{children:p})})]}),(0,f.BX)("div",{className:"_icons",children:[(null==S?void 0:S.length)>0&&(0,f.tZ)(u.x,{options:S,children:(0,f.tZ)(c.JO,{icon:"new",smallButtonLike:!0})}),m&&(0,f.tZ)(l.ZT,{className:"_link_icon",icon:h?"popout":"go_arrow",href:m,newTab:h,size:24}),k&&P&&(0,f.tZ)("span",g(g(g({},P.attributes),P.listeners),{},{children:(0,f.tZ)(c.JO,{icon:"move",smallButtonLike:!0})})),(null==x?void 0:x.length)>0&&(0,f.tZ)(u.x,{options:x,children:(0,f.tZ)(c.JO,{icon:"menu",smallButtonLike:!0})})]})]})}},56852:function(e,t,n){"use strict";n.d(t,{JA:function(){return u},fR:function(){return p},kL:function(){return f}});var r=n(87363),o=n(16920),i=n(539),a=n(35944);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var u=function(e){var t;return e==parseInt(e)?o.g.colors.set[e]:null!==(t=e)&&void 0!==t&&t.startsWith("#")?e:("in_process"===e?e="progress":"no_progress"===e&&(e="waiting"),o.g.colors.chart[e]||"#2196F3")},p=function(e){return e&&e.length>27?e.substr(0,24)+"…":e},d=(0,r.lazy)((function(){return Promise.all([n.e(866),n.e(740),n.e(547)]).then(n.bind(n,23882)).then((function(e){return{default:e.ChartInner}}))})),f=function(e){return(0,a.tZ)(r.Suspense,{fallback:(0,a.tZ)(i.$,{}),children:(0,a.tZ)(d,s({},e))})}},15967:function(e,t,n){"use strict";n.d(t,{Q:function(){return s},t:function(){return u}});var r=n(70917),o=n(16920),i=n(71134),a=(n(57882),n(35944)),l=(0,r.iv)("display:flex;&:not(.side){flex-wrap:wrap;justify-content:center;>div{flex-grow:1;justify-content:center;width:49%;&:nth-of-type(-n+2){border-top:1px solid ",o.g.colors.separator,";border-bottom:1px solid ",o.g.colors.separator,";}&:nth-of-type(even){border-left:1px solid ",o.g.colors.separator,";}}}&.side{width:45%;flex-direction:column;}",""),s=function(e){var t=e.children,n=e.side;return(0,a.tZ)("div",{css:l,className:(0,i.AK)("ChartLegend",{side:n}),children:t})},c=(0,r.iv)("display:flex;height:60px;>div{padding:6px 0 0 6px;}._dot{display:inline-block;height:17px;width:17px;border-radius:50%;margin-right:7px;vertical-align:bottom;}._number{font-weight:lighter;font-size:1.4em;color:",o.g.colors.text_sec,";}",""),u=function(e){var t=e.numerator,n=e.denominator,r=e.label,o=e.color,l=e.onlyPercent,s=t;return n&&(s=l?(0,i.aQ)(t,n,2)+"%":"".concat(t," (").concat((0,i.aQ)(t,n),"%)")),(0,a.BX)("div",{css:c,children:[(0,a.tZ)("div",{children:(0,a.tZ)("span",{className:"_dot",style:{backgroundColor:o}})}),(0,a.BX)("div",{children:[(0,a.tZ)("div",{children:r.caps()}),(0,a.tZ)("div",{className:"_number",children:s})]})]})}},74525:function(e,t,n){"use strict";n.d(t,{C:function(){return s}});var r=n(70917),o=n(16920),i=(n(57882),n(56852)),a=n(35944),l=function(e){var t=e.size;return(0,r.iv)("width:",t,";height:",t,";position:relative;>.label{position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);text-align:center;.valLabel{font-weight:600;}.fractionLabel{font-size:.8em;}}","")},s=function(e){var t=e.percent,n=e.numerator,r=e.denominator,s=e.size,c=void 0===s?"100px":s,u=e.precision,p=void 0===u?2:u,d=e.color,f=e.valueSign,m=void 0===f?"":f,g=o.g.colors.chart;void 0!==r&&(t=0===r?0:100*n/r),void 0===d&&(d=t<33?g.failure:t<66?g.neutral:g.success);var h=[{color:d,number:t},{color:g.bg,number:100-t}],b=Math.pow(10,p);return(0,a.BX)("div",{css:l({size:c}),children:[(0,a.BX)("div",{className:"label",children:[(0,a.BX)("div",{className:"valLabel",children:[Math.round(t*b)/b,m]}),void 0!==r&&(0,a.BX)("div",{className:"fractionLabel",children:[n,"/",r]})]}),(0,a.tZ)(i.kL,{type:"pie",data:h,height:c,width:c,toolTip:!1})]})}},62366:function(e,t,n){"use strict";n.d(t,{G:function(){return pe}});var r=n(15560),o=n(87363),i=n(71137),a=n(31092),l=n(48207),s=n(539),c=n(24210),u=n(33346),p=n(65155),d=n(98e3),f=n(71134),m=n(27821),g=n(66975),h=n(23838),b=n(35944);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t){return(O=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function k(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=j(e);if(t){var o=j(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return x(this,n)}}function x(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?S(e):t}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&O(e,t)}(i,e);var t,n,r,o=k(i);function i(e){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=S(t),a={},(r="value")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,(0,m.makeObservable)(S(t),{_fields:m.observable}),t.value=(null==e?void 0:e.value)||{},t.title=null==e?void 0:e.title;var l=function(e){t._fields.push({type:"row_set",fields:[{type:"checkbox",name:e,value:(0,f.xb)(t.value[e])?0:1,label:Blsm.lang.weekDays[e],onValueChange:function(n){return n?t.addTimeFieldsRow(e):t.removeTimeFieldsRow(e)}},{type:"component",visible:function(){return t.values.get(e)},node:(0,b.tZ)(g.JO,{icon:"new",buttonLike:!0,onClick:function(){return t.addTimeFieldsRow(e)}})}]});var n=[];if(t.value[e])for(var r=0;r<t.value[e].length;r+=2)n.push(t.hourPair(e,r));t._fields.push({type:"indent_set",visible:function(){return t.values.get(e)},name:"indent_set_".concat(e),fields:n})};for(var s in Blsm.lang.weekDays)l(s);return t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"hourPair",value:function(e,t){var n,r,o=this;return{type:"row_set",fields:[{type:"time",label:lng("from|date"),name:"times[".concat(e,"][").concat(t,"]"),value:null===(n=this.value[e])||void 0===n?void 0:n[t]},{type:"time",label:lng("to|date"),name:"times[".concat(e,"][").concat(t+1,"]"),value:null===(r=this.value[e])||void 0===r?void 0:r[t+1]},{type:"component",node:(0,b.tZ)(g.JO,{icon:"trash",buttonLike:!0,onClick:function(){return o.removeTimeFieldsRow(e,t)}})}]}}},{key:"addTimeFieldsRow",value:function(e){var t=this;this._fields.map((function(n){if(n.name==="indent_set_".concat(e)){var r=n.fields,o=2*n.fields.length;r.push(t.hourPair(e,o)),n.fields.replace(r)}}))}},{key:"removeTimeFieldsRow",value:function(e,t){var n=this;this._fields.map((function(r){r.name==="indent_set_".concat(e)&&(void 0!==t?(r.fields.map((function(o){o.fields[0].name==="times[".concat(e,"][").concat(t,"]")&&(o.fields.map((function(e){return n.values.delete(e.name)})),r.fields.remove(o))})),0===r.fields.length&&n.values.set(e,!1)):(r.fields.map((function(e){return e.fields.map((function(e){return n.values.delete(e.name)}))})),r.fields.clear()))}))}},{key:"save",value:function(e){for(var t=e.times,n={},r=0,o=Object.entries(t);r<o.length;r++){for(var i=v(o[r],2),a=i[0],l=i[1],s=[],c=0,u=Object.entries(l);c<u.length;c++){var p=v(u[c],2),d=p[0],f=p[1];parseInt(d)%2==0&&f&&l[parseInt(d)+1]&&s.push(f,l[parseInt(d)+1])}s.length&&(n[a]=s)}this.onSaveSuccess(n)}}])&&w(t.prototype,n),r&&w(t,r),i}(c.I),P=n(16920),Z=n(75898),B=n(40965),T=n(73718);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var I,A,D=["group_id","user_id","approvalRequest","request_id","ect_id","readOnly"];function R(e){return function(e){if(Array.isArray(e))return N(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function z(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t){return(F=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X(this,n)}}function X(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?L(e):t}function L(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var H,G,J,W,K,$,Y=(I=m.action.bound,A=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&F(e,t)}(i,e);var t,n,r,o=q(i);function i(e){var t,n,r,a,l=e.group_id,s=e.user_id,c=e.approvalRequest,u=e.request_id,p=e.ect_id,f=e.readOnly,g=z(e,D);(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),V(L(n=o.call(this,g)),"group_id",void 0),V(L(n),"ect_id",void 0),V(L(n),"user_id",void 0),V(L(n),"diploma_only",void 0),V(L(n),"ectData",{}),V(L(n),"haveUncompletedRequiredGroups",!1),V(L(n),"readOnly",!1),V(L(n),"validateOnChange",!0),V(L(n),"ectName",""),(0,m.makeObservable)(L(n)),c)&&(r=null===(a=c)||void 0===a?void 0:a.target_data,l=l||c.target_id,s=s||c.user_id,u=u||c.request_id,p=p||c.ect_id);return n.group_id=l,n.user_id=s,n.ect_id=p||(null===(t=r)||void 0===t?void 0:t.ect_id),n.diploma_only=!!n.user_id&&!!n.group_id,n.confirmButtonLabel=n.diploma_only?lng("upload diploma").caps():f?lng("save").caps():lng("submit|request").caps(),n.title=r?lng("view external event").caps():n.user_id?n.group_id?lng("edit external event"):lng("new external event"):lng("apply for an external event").caps(),n.fetchUrl="groups/external_course",(0,d.SC)(n.fetchUrl,{data:{id:n.group_id,user_id:n.user_id,ect_id:n.ect_id,request_id:u,approval:r||u?1:0}},(function(e){var t,o,i,a,l=e;l.data=l.data||{},n.haveUncompletedRequiredGroups=!!l.uncompletedRequiredGroupsIds&&void 0===c,n.readOnly=!!f||n.haveUncompletedRequiredGroups,n.disabled=n.haveUncompletedRequiredGroups,n.ectName=null===(t=l.ect_data)||void 0===t?void 0:t.ect_name,r||(r=l.data.target_data||{}),u&&(c=l.data,r.request_files=l.data.request_files),r.r_event_hours=r.r_event_hours||{},r.working_hours=r.working_hours||l.user_working_hours||{},p=p||r.ect_id;var s=n.getDisplaySettings(l.ect_data),d=null!==(o=l.approver_data)&&void 0!==o&&o.user_selection?null===(i=l.approver_data)||void 0===i||null===(a=i.approver_options)||void 0===a?void 0:a.map((function(e){return{val:e.id,label:"[#".concat(e.id,"] ").concat(e.label)}})):[];n.buildFields({resData:l,approvalRequest:c,targetData:r,readOnly:f,displayObj:s,approverOptions:d})})),n}return t=i,(n=[{key:"getDisplaySettings",value:function(e){if(!e)return{};var t=e.display_settings,n={},r=Object.keys(t||{});for(var o in r)r.includes(o)&&"mandatory"===t[r[o]]&&!this.readOnly&&(n[r[o]]="required");return{display_settings:t,rules:n}}},{key:"buildFields",value:function(e){var t,n=this,r=e.resData,o=e.approvalRequest,i=e.targetData,a=e.readOnly,l=e.displayObj,s=e.approverOptions;this.successMessage=this.user_id?lng("external event saved"):lng("application received"),this.sendEmpty=!0,this.saveUrl=this.diploma_only?"groups/save_external_course_diploma/id=".concat(this.group_id,"&user_id=").concat(this.user_id):"groups/apply_for_external_course/ect_id=".concat(this.ect_id);var c=function(){return!0};this.ectData=(null==r?void 0:r.ect_data)||(null==r?void 0:r.data)||{};var u=te.some((function(e){return(0,f.Dw)(i[e])})),p=!(0,f.xb)(null==l?void 0:l.display_settings),m=function(e){return!a&&p?["visible","mandatory"].includes(l.display_settings[e]):(0,f.Dw)(n.values.get(e))},g=function(e){return!a&&p&&"mandatory"===l.display_settings[e]},h=a||Blsm.user.isPowerManager?"text":"number",y="number"===h?void 0:function(e){return(0,f.mE)(e,{min:0})},v={type:"section",name:"external",fields:[{type:"component",node:(0,b.tZ)(Z.jC,{color:P.g.colors.warning,children:lng("you have uncompleted required courses").caps()}),visible:function(){return n.haveUncompletedRequiredGroups}},{type:"text",name:"ext_course_name",label:lng("event name"),required:!a,visible:c,readOnly:a,placeholder:lng("write a title for your request")},{type:"select",name:"importance",label:lng("degree of importance"),emptyOption:!0,options:(0,f.wd)(T.Q),readOnly:a},{type:"textarea",name:"request_msg",label:lng("explanation").caps(),visible:c,readOnly:a,insert:!(null!=o&&o.steps)},{type:"date_time",name:"group_open_date",label:lng("start date"),maxDate:function(){return moment(n.values.get("group_close_date"),Blsm.prm.date_moment_format)}},{type:"date_time",name:"group_close_date",label:lng("end date"),minDate:function(){return moment(n.values.get("group_open_date"),Blsm.prm.date_moment_format)}},{type:"text",name:"group_location",label:lng("location")},{type:"single_item",name:"supplier_id",label:lng("organizing institution"),readOnly:a,searchData:function(e,t){var n=e.term,r=e.ids;(0,d.SC)("suppliers/autocomplete",{data:{term:n,id:r,limit:20,type:"RegExt"}},t)}},{type:"text",name:"r_institution",label:lng("organizing institution")+(m("supplier_id")?" (".concat(lng("other"),")"):"")},{type:"title",label:this.ectData.ect_terms_title||lng("terms and conditions"),visible:function(){return c},insert:!!this.ectData.ect_terms},{type:"component",node:(0,b.tZ)(B.d,{content:i.ect_terms||this.ectData.ect_terms,title:this.ectData.ect_terms_title||lng("terms and conditions")}),visible:c,insert:!!this.ectData.ect_terms},{type:"hidden",name:"ect_terms",value:this.ectData.ect_terms,insert:!!this.ectData.ect_terms&&m("signature")},{type:"signpad",name:"signature",label:lng("signature")},{type:"file",name:"diploma_file",label:lng("diploma").caps(),insert:!!this.user_id&&!!this.diploma_only,visible:c,readOnly:!1},{type:"select",name:"chosen_approver_id",label:lng("you may choose the approver"),visible:c,options:s,insert:s.length>0}]},_={type:"section",name:"additional",fields:[{type:"date",name:"r_absence_start_date",label:lng("start of absence")},{type:"date",name:"r_absence_end_date",label:lng("end of absence")},{type:h,name:"r_days_off",label:lng("days off")+(void 0!==i.days_off?" (".concat(lng("requested"),")"):""),validate:y},{type:h,name:"days_off",label:"".concat(lng("days off")," (").concat(lng("approved"),")"),readOnly:!0,visible:function(){return void 0!==i.days_off},validate:y},{type:h,name:"r_hours",label:lng("academic hours")+(void 0!==i.hours?" (".concat(lng("requested"),")"):""),validate:y},{type:h,name:"hours",label:"".concat(lng("academic hours")," (").concat(lng("approved"),")"),readOnly:!0,visible:function(){return void 0!==i.hours},validate:y},{type:"checkbox",name:"r_professional_development",label:lng("professional development")},{type:"checkbox",name:"r_active",label:lng("presenting")},{type:"component",name:"working_hours",Render:ee,props:{label:lng("working hours").caps(),readOnly:a},label:lng("working hours").caps()},{type:"component",name:"r_event_hours",Render:ee,props:{label:lng("event hours").caps(),readOnly:a}},{type:"file",multiFile:!0,name:"request_files",label:lng("attachments"),readOnly:a,required:function(){return g("attachments")},visible:function(){var e;return m("attachments")||(null===(e=n.values.get("request_files"))||void 0===e?void 0:e.length)>0}}]},w=this._customFieldsPrep(null==r?void 0:r.custom_fields);(t=_.fields).push.apply(t,R(w));var O={type:"section",name:"funding",fields:[{type:"title",label:lng("requested funding"),visible:c},{type:"checkbox",name:"cb_r_paid_leave",label:lng("interested in paid leave"),visible:function(e){return!a&&!(null!=e&&e.get("cb_r_paid_leave"))&&m("r_paid_leave")}},{type:h,name:"r_paid_leave",label:lng("paid leave days"),visible:function(e){return a||!(null==e||!e.get("cb_r_paid_leave"))||(0,f.Dw)(null==e?void 0:e.get("r_paid_leave"))},validate:y},{type:"checkbox",name:"cb_r_price",label:lng("interested in tuition refunds"),visible:function(e){return!a&&!(null!=e&&e.get("cb_r_price"))&&m("r_price")}},{type:h,name:"r_price",label:lng("tuition"),visible:function(e){return a||!(null==e||!e.get("cb_r_price"))||(0,f.Dw)(null==e?void 0:e.get("r_price"))},validate:y},{type:"checkbox",name:"cb_r_travel",label:lng("interested in travel refunds"),visible:function(e){return!a&&!(null!=e&&e.get("cb_r_travel"))&&m("r_travel")}},{type:h,name:"r_travel",label:lng("travel price"),visible:function(e){return a||!(null==e||!e.get("cb_r_travel"))||(0,f.Dw)(null==e?void 0:e.get("r_travel"))},validate:y},{type:h,name:"r_expenses",label:lng("expenses"),validate:y},{type:h,name:"r_funding",label:lng("total required funding"),validate:y}]};u&&O.fields.push({type:"title",label:lng("approved funding"),visible:c},{type:h,name:"paid_leave",label:lng("paid leave days"),readOnly:!0,visible:function(){return void 0!==i.paid_leave},validate:y},{type:h,name:"price",label:lng("tuition"),readOnly:!0,visible:function(){return void 0!==i.price},validate:y},{type:h,name:"travel",label:lng("travel price"),readOnly:!0,visible:function(){return void 0!==i.travel},validate:y},{type:h,name:"expenses",label:lng("expenses"),readOnly:!0,visible:function(){return void 0!==i.expenses},validate:y},{type:h,name:"funding",label:lng("total funding"),readOnly:!0,visible:function(){return void 0!==i.funding},validate:y}),this._fields=[v,_,O],this._fields.forEach((function(e){return e.fields.forEach((function(e){void 0===e.visible&&(e.visible=function(){return m(e.name)}),void 0===e.required&&(e.required=function(){return g(e.name)}),void 0===e.readOnly&&(e.readOnly=a)}))})),this._prepFields(i),this.ready=!0}},{key:"save",value:function(e){e=(0,f.v7)(e,(function(e,t){return(0,f.Dw)(e)&&!/^cb_/.test(t)}));var t=this.diploma_only?{diploma_file:e.diploma_file}:e;this.saveToUrl(this.saveUrl,t)}}])&&M(t.prototype,n),r&&M(t,r),i}(c.I),H=A.prototype,G="save",J=[I],W=Object.getOwnPropertyDescriptor(A.prototype,"save"),K=A.prototype,$={},Object.keys(W).forEach((function(e){$[e]=W[e]})),$.enumerable=!!$.enumerable,$.configurable=!!$.configurable,("value"in $||$.initializer)&&($.writable=!0),$=J.slice().reverse().reduce((function(e,t){return t(H,G,e)||e}),$),K&&void 0!==$.initializer&&($.value=$.initializer?$.initializer.call(K):void 0,$.initializer=void 0),void 0===$.initializer&&(Object.defineProperty(H,G,$),$=null),A),Q={name:"zgqd7l",styles:".field-error{border-radius:7px;border:1px solid #DEDEDE;border-color:#E64D40;padding:5px;}ul{margin:0;}"},ee=(0,r.observer)((function(e){var t=e.error,n=e.value,r=e.onChange,o=e.label,i=e.menu_info,a=e.readOnly;return(0,b.BX)("div",{css:Q,children:[(0,b.BX)("div",{className:t?"field-error":"",children:[(0,b.tZ)("b",{children:o}),i&&(0,b.tZ)(g.JO,{icon:"menu_info",toolTip:i}),!a&&(0,b.tZ)(g.JO,{icon:"edit",buttonLike:!0,onClick:function(){return(0,h.vm)().openDialog("form",new C({title:o,value:n,onSaveSuccess:function(e){r(e),(0,h.vm)().closeDialog()}}))}})]}),n&&(0,b.tZ)("div",{children:Object.entries(n).filter((function(e){var t;return(null===(t=e[1])||void 0===t?void 0:t.length)>0})).map((function(e){return(0,b.BX)("div",{children:[(0,b.tZ)("span",{children:Blsm.lang.weekDays[e[0]]}),(0,b.tZ)("ul",{children:e[1].map((function(t,n){return n%2==1?null:(0,b.BX)("li",{children:[t," - ",e[1][n+1]]},n)}))})]},e[0])}))})]})})),te=["paid_leave","price","travel","expenses","funding"],ne=n(70917),re=n(85597),oe=n(17203);function ie(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=se(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function ae(e){return function(e){if(Array.isArray(e))return ce(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||se(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||se(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function se(e,t){if(e){if("string"==typeof e)return ce(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ce(e,t):void 0}}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ue=(0,ne.iv)(".title{font-size:18px;font-weight:700;margin-bottom:10px;}.row{position:relative;display:flex;justify-content:space-between;flex-grow:1;.Button{width:100%;}.Button:nth-child(n+2){",P.g.classes.margin_near("10px"),";}}.external-description{margin-bottom:30px;.course-field-label{font-weight:700;}}.register-btn{flex-shrink:3;}._next{flex-shrink:1;}",""),pe=(0,r.observer)((function(e){var t=e.onClose,n=e.group_id,r=e.user_id,d=e.approvalRequest,m=e.request_id,h=e.ect_id,y=e.readOnly,v=e.performApprovalAction,_=le((0,o.useState)("external"),2),w=_[0],O=_[1],k=[],x=(0,o.useRef)(null),S=(0,o.useRef)(null);S.current||(S.current=new Y({group_id:n,user_id:r,approvalRequest:d,request_id:m,ect_id:h,readOnly:y,onSaveSuccess:t}));var j=S.current;j.haveUncompletedRequiredGroups&&(j.disabled=!0);var C,P={external:lng("details"),additional:lng("additional details"),funding:lng("funding")},Z=ae(j.errors.keys()),B=function(e){return Z&&(0,f.oH)(e.fields,(function(e){return(null==e?void 0:e.name)&&Z.includes(e.name)}))},T=ie(j._fields);try{for(T.s();!(C=T.n()).done;){var E=C.value;if("section"===E.type){var I,A=ie(E.fields);try{for(A.s();!(I=A.n()).done;){var D=I.value;if(!1!==D.insert&&"title"!==D.type&&D.visible()){k.push({val:E.name,label:P[E.name]||"?",error:B(E)});break}}}catch(e){A.e(e)}finally{A.f()}}}}catch(e){T.e(e)}finally{T.f()}var R=k.filter((function(e,t){return e.index=t,e.val===w}))[0],N=k.filter((function(e,t){return t===(null==R?void 0:R.index)+1}))[0];null!=d&&d.request_id&&k.push({val:"requestDetails",label:lng("request details")});var z=!j.status&&(0,b.BX)("div",{className:"row",children:[j.confirmButtonLabel&&!(!h&&!n)&&(0,b.tZ)(p.O,{className:"register-btn",primary:!0,onClick:j.callSave,highlight:j.dirty,disabled:j.disabled,children:j.confirmButtonLabel}),N&&(0,b.BX)(p.O,{className:"_next",onClick:function(){return O(N.val)},children:[lng("continue to %s",N.label).caps()," ",(0,b.tZ)(g.JO,{icon:"arrow_go_far"})]})]}),M=!j.status&&j.title;return(0,b.tZ)(i.d,{size:"600px",from:"side",onClose:t,ref:x,scroll:!0,children:(0,b.tZ)(c.q3.Provider,{value:j,children:(0,b.tZ)(l.W2,{head:(0,b.tZ)(l.$0,{title:M,onClose:function(){return x.current.close()}}),stickyHead:!0,children:!j.ready||j.status?(0,b.tZ)(s.$,{}):(0,b.BX)("div",{css:ue,children:[(0,b.tZ)("div",{className:"row",children:(0,b.tZ)("span",{className:"title",children:j.ectName})}),(0,b.BX)("div",{children:[(0,b.tZ)(de,{text:j.ectData.ect_description,label:lng("description").caps()}),(0,b.tZ)(de,{text:j.ectData.ect_extra_info,label:lng("extra info").caps()})]}),k.length>1&&(0,b.tZ)(a.m,{stickyTabs:!0,tabs:k,onSelect:O,activeTab:w}),"requestDetails"!==w&&(0,b.tZ)(c.q3.Provider,{value:j,children:(0,b.tZ)(u.au,{input:j.getFieldByName(w)})}),"requestDetails"==w&&(0,b.tZ)(re.rl,{approvalRequest:d,performAction:v}),(0,b.tZ)("div",{children:z}),(0,b.tZ)(oe._,{})]})})})})})),de=function(e){var t=e.label,n=e.text;return(0,b.BX)("div",{className:"external-description",children:[(0,b.tZ)("span",{className:"course-field-label",children:t}),(0,b.tZ)(B.x,{content:n})]})}},25562:function(e,t,n){"use strict";n.d(t,{Jx:function(){return f},L0:function(){return m},RN:function(){return h},Td:function(){return p}});var r=n(29180),o=n(70917),i=n(16920),a=(n(57882),n(85311)),l=n(40965),s=n(28432),c=n(35944),u=function(e){return(0,o.iv)("position:relative;display:flex;",!e&&"margin-bottom: 23px;"," margin-top:24px;",e&&"margin: auto;"," ",e&&"border-top: 1px solid ".concat(i.g.colors.separator,";")," text-align:center;","")},p=function(e){var t=e.regType,n=e.groupType,r=e.instances,o=e.members,i=e.remainingPlaces,l=e.inCard;return(0,c.BX)("div",{css:u(l),className:"row numbers",children:["Course_template"!==n&&o>0&&(0,c.tZ)(f,{number:o,text:lng("members").caps()}),(0,c.tZ)(a.zh,{}),"Course_template"!==n&&void 0!==i&&(0,c.tZ)(f,{number:i,text:lng("remaining places").caps()}),"Course_template"===n&&"reg_to_instances"===t&&l&&(0,c.tZ)(f,{number:r.length,text:lng("instances").caps()})]})},d=(0,o.iv)("margin:0 5px;.number{font-size:16px;color:",i.g.colors.text_sec,";margin:0 8px;}.description-text{font-size:13px;}",""),f=function(e){var t=e.number,n=e.text,r=e.inLine;return(0,c.BX)("div",{css:d,children:[parseInt(t)>=0?(0,c.tZ)("span",{className:"number",children:t}):(0,c.tZ)("span",{className:"number",children:"∞"}),!r&&(0,c.tZ)("br",{}),(0,c.tZ)("span",{className:"description-text",children:n})]})},m=function(e){var t=e.start,n=e.end,o=e.title,i=e.className;return(0,c.BX)("div",{className:i,children:[t&&n&&(0,c.BX)("div",{children:[o&&(0,c.BX)("span",{children:[o.caps(),": "]}),(0,c.BX)("span",{className:o?"description-text":"",children:[(0,c.tZ)(r.qp,{time:t,showTime:!1})," - ",(0,c.tZ)(r.qp,{time:n,showTime:!1})]})]}),t&&!n&&(0,c.BX)("span",{children:[lng("start date").caps(),": ",(0,c.tZ)(r.qp,{time:t,showTime:!1})]}),!t&&n&&(0,c.BX)("span",{children:[lng("end date").caps(),": ",(0,c.tZ)(r.qp,{time:n,showTime:!1})]})]})},g=function(e){var t=e.fields,n=e.displayTitle;return(0,c.BX)("div",{children:[t.length>0&&n&&(0,c.tZ)("b",{children:lng("custom fields").caps()}),t.length>0&&t.map((function(e,t){return(0,c.BX)("div",{className:"course-field",children:[e.label,": ",e.isHtml?(0,c.tZ)(l.x,{className:"description-text",content:e.value}):(0,c.tZ)("span",{className:"description-text",children:e.value})," "]},t)}))]})},h=function(e){var t=e.courseInfo,n=e.displayTitle,r=t.description,o=t.extra_info,i=t.estimated_cost_for_member,a=t.activityDates,u=t.passing_grade,p=t.CustomFieldsToDisplay,d=t.registerDependencies,f=t.registrationDates,h=t.statusInfo,b=t.priceTag,y=t.creditOnCompletion;return(0,c.BX)("div",{children:[r.isHtml?(0,c.tZ)(l.x,{content:null==r?void 0:r.text}):(0,c.tZ)("div",{children:null==r?void 0:r.text}),o&&(0,c.BX)("div",{className:"course-field",children:[lng("extra information").caps(),(0,c.tZ)(l.x,{className:"description-text",content:o})]}),a&&(0,c.tZ)(m,{title:lng("activity dates"),className:"course-field",start:a.start,end:a.end}),b&&(0,c.tZ)("div",{children:b}),"FUTURE_REGISTRATION"===(null==h?void 0:h.status)&&(0,c.tZ)(m,{title:lng("registration dates"),className:"course-field",start:f.start,end:f.end}),i&&(0,c.BX)("div",{className:"course-field",children:[lng("estimated cost").caps(),": ",(0,c.tZ)("span",{className:"description-text",children:i})]}),u&&(0,c.BX)("div",{className:"course-field",children:[lng("required score").caps(),": ",(0,c.tZ)("span",{className:"description-text",children:u})]}),y>0&&(0,c.BX)("div",{className:"course-field",children:[lng("credit units given on completion").caps(),": ",(0,c.tZ)("span",{className:"description-text",children:y})]}),(0,c.tZ)(s.bP,{ws:t._attr,className:"course-field"}),d&&(0,c.BX)("div",{children:[(0,c.BX)("div",{children:[lng("course dependencies").caps(),":"]}),(0,c.tZ)("ul",{children:d.map((function(e){return(0,c.tZ)("li",{children:e},e)}))})]}),p&&(0,c.tZ)(g,{displayTitle:n,fields:p})]})}},34065:function(e,t,n){"use strict";n.d(t,{m:function(){return s}});var r=n(15560),o=n(23205),i=(n(24210),n(68567)),a=n(68018),l=n(35944),s=(0,r.observer)((function(e){var t=e.onClose,n=e.form,r=e.internalForm;if(!1===n.ready)return(0,l.tZ)(a.F,{});n.rebuild;var s=function(e){!n.dirty&&!n.alertBeforeClose||e?t():(0,i.BB)(n.dirty?lng("there are unsaved changes, are you sure you want to close the dialog?").caps():n.alertBeforeClose,{title:lng("discard changes"),confirmText:lng("close without saving").caps(),onConfirm:t,onCancel:function(){return n.backFromDirty()}})};return n.dialogClose=s,(0,l.tZ)(o.l,{form:n,onClose:s,internalForm:r})}))},87327:function(e,t,n){"use strict";n.d(t,{o:function(){return z},S:function(){return N}});var r=n(16920),o=n(71134),i=n(40441),a=n(76054),l=n(22334),s=n(98e3),c=n(68567),u=n(28534),p=n(27821),d=n(23838),f=n(24210),m=n(66975),g=n(85311),h=n(35944);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k,x,S,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(a,e);var t,n,r,o=_(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,e)).group_id=e.group_id,t.assignment_id=e.assignment_id,t.title=lng("import grades from excel").caps()+": "+e.title,t.onSuccess=e.onSaveSuccess,t.confirmButtonLabel=lng("import"),t.saveUrl="reports/form/import_manual_assignment_excel",t.successMessage=lng("grades imported successfully"),t._fields=[{type:"component",node:(0,h.BX)("div",{children:[(0,h.tZ)("div",{children:lng("template download").caps()}),(0,h.BX)(i.A,{href:(0,s.Q2)("assignment/manual_assignment_excel_template/excel_template=user_name&group="+t.group_id),children:[(0,h.tZ)(m.JO,{icon:"vendor_file"})," ",lng("user name").caps()]}),(0,h.tZ)(g.zh,{}),(0,h.BX)(i.A,{href:(0,s.Q2)("assignment/manual_assignment_excel_template/excel_template=user_identity_num&group="+t.group_id),children:[(0,h.tZ)(m.JO,{icon:"vendor_file"})," ",lng("identity number").caps()]})]})},{type:"file",name:"manual_assignment_excel",label:lng("data upload")},{type:"checkbox",name:"send_manual_message",label:lng("send message to users")}],t._prepFields(),t.ready=!0,t}return t=a,(n=[{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign({group_id:this.group_id,assignment_id:this.assignment_id},e)),(0,d.vm)().closeDialog()}}])&&y(t.prototype,n),r&&y(t,r),a}(f.I);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function D(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var N=function(e){return"1"===e.lesson_extern_file&&!e.extern_iframe||Blsm.isGuiFeatureEnabled("scorm_in_new_window")&&("Lti"===e.lesson_type||"File"===e.lesson_type&&["zip.scorm","zip.tincan"].includes(e.lesson_file_type))},z=(k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(g,e);var t,n,a,f=T(g);function g(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,g),D(I(n=f.call(this,e,t)),"display",void 0),D(I(n),"showNew",void 0),P(I(n),"likesCount",x,I(n)),P(I(n),"likesVote",S,I(n)),D(I(n),"_dateNote",void 0),(0,p.makeObservable)(I(n)),n.display=null==t?void 0:t.display,n.showNew=null==t?void 0:t.showNew,n._attr.likes&&(n.likesCount=parseInt(n._attr.likes.likes),n.likesVote=!!n._attr.likes.user_vote),n}return t=g,(n=[{key:"isForCoach",value:function(){return"2"===this._attr.managerun}},{key:"isToDO",value:function(){var e;return!(null!==(e=this._attr.status)&&void 0!==e&&e.completed)}},{key:"dependencies",value:function(){var e,t,n;return null!==(e=this._attr.dependencies)&&void 0!==e&&e.completed||null===(t=this._attr.dependencies)||void 0===t||!t.output?[]:Object.values(null===(n=this._attr.dependencies)||void 0===n?void 0:n.output)}},{key:"setActiveComponent",value:function(e){var t;null===(t=this.workspace)||void 0===t||t.setActiveComponent(e)}},{key:"toggleLockAssignmentComments",value:function(){this._attr.lock_assignment_comments=!this._attr.lock_assignment_comments,this._attr.lock_assignment_comments?(0,u.qV)(lng("comments are now disabled.")):(0,u.qV)(lng("comments are now enabled."))}},{key:"toggleLike",value:function(){var e;this.likesVote=!this.likesVote,this.likesCount=this.likesVote?this.likesCount+1:Math.max(this.likesCount-1,0);var t={req:"vote",type:"assignment",object_id:this._attr.assignment_id,user_action:"like",group_id:this._attr.group_id||(null===(e=this.master)||void 0===e?void 0:e.ws)};(0,s.SC)("likes",{data:t,method:"POST"})}},{key:"menu",value:function(){var e,t,n,r,a,l,u,p,f,m,g,h=this,b=this._attr,y=b.assignment_type,v=b.lesson_type,_=b.assignment_id_org,w=b.assignment_id,O=b.permissions,k=b.allow_manager_edit,x=b.assignment_owner,S=b.lesson_owners,C=b.survey_anonymous,P=b.personal_dates,Z=b.lesson_id,B=b.feedback_assignment,T=b.can_view_performance,E=(0,o.B5)(this._attr.group_id)||(0,o.B5)(null===(e=this.master)||void 0===e||null===(t=e.ws)||void 0===t?void 0:t.id)||(0,o.B5)(null===(n=this.master)||void 0===n||null===(r=n.data)||void 0===r||null===(a=r.groups)||void 0===a?void 0:a[0])||(0,o.B5)(this._attr.origin_group_id)||null,I="master"===y,A="lesson"===y&&"Checklist"===v,D=_||w,R=O||(null===(l=this.workspace)||void 0===l?void 0:l.permissions)||(null===(u=this.master)||void 0===u||null===(p=u.data)||void 0===p?void 0:p.permissions)||{},N=R[Blsm.ManagerPermissions.VIEW],z=R[Blsm.ManagerPermissions.GENERAL_CONFIG],M=R[Blsm.ManagerPermissions.CREATE_ASSIGNMENTS],F=x==Blsm.user.id||M&&k||Blsm.user.power_user_assignment_permissions,q=S&&S.find((function(e){return e==Blsm.user.id})),X=null===(f=this.master)||void 0===f?void 0:f.id,L=["Survey","Evaluation","Test","Courseware"].includes(v),U=!I&&z&&Blsm.isFeatureEnabled("assignments_comments")&&E,V=this.hasCoach,H=V,G="manual"===y,J="form"===y,W="task"===y,K=C,$=!1;z&&(H||P)&&(H&&P?$={label:lng("member options").caps(),val:"assignment_options",icon:"coach"}:H?$={label:lng("set coach").caps(),val:"assignment_options",icon:"coach"}:P&&($={label:lng("set personal dates").caps(),val:"assignment_options",icon:"coach"}));var Y=[T&&!J&&!G&&{label:lng("assignment log").caps(),href:(0,i.p4)({report:"ReportUserPerformances",params:{assignment:D,user:Blsm.user.id}}),icon:"report"},B&&{label:lng("feedback log").caps(),href:(0,i.p4)({report:"ReportQuestionDistribution",params:{assignment:B,user_mode:1}}),icon:"report"},J&&{label:lng("forms performances report").caps(),href:(0,i.p4)({report:"FormsPerformancesReport",params:{assignment:D,user:Blsm.user.id}}),icon:"report"},V&&{label:lng("assignment coach log").caps(),href:(0,i.p4)({report:"ReportCoachPerformances",params:{assignment:D,user:Blsm.user.id}}),icon:"report"},N&&"Survey"===v&&{label:lng("survey report").caps(),icon:"report",href:(0,i.p4)({report:"SurveyReport",params:{assignment:D,group:E}})},N&&!W&&!G&&"Survey"!==v&&{label:lng("success report").caps(),icon:"report",href:(0,i.p4)({report:"ReportSuccess",params:{assignment:D,group:E}})},!K&&N&&{label:lng("completion report").caps(),icon:"report",href:(0,i.p4)({report:"ReportCompletion",params:{assignment:D,group:E,subs:1}})},!K&&N&&!W&&!G&&{label:lng("league report").caps(),icon:"report",href:(0,i.p4)({report:"Report_League",params:{assignment:D,group:E}})},N&&(L||A)&&{label:lng("questions distribution report"),icon:"report",href:(0,i.p4)({report:"ReportQuestionDistribution",params:{assignment:D,group:E}})}],Q=function(e){(0,s.SC)("assignment/lock_assignment_comments",{data:{lock:e,assignment_id:h._attr.assignment_id,group_id:E,master_id:X},method:"POST"},(function(){return h.toggleLockAssignmentComments()}))};return[F&&{label:lng("edit").caps(),href:(0,i.p4)({edit:"assignment",id:D}),icon:"edit"},q&&{label:lng("edit content").caps(),href:(0,i.p4)({edit:"content",id:Z,type:v}),icon:"edit"},$,(this.workspace&&M||F&&(null===(m=this.master)||void 0===m?void 0:m.ws))&&!G&&{label:lng("detach").caps(),icon:"trash",onClick:function(){return e=X?lng("remove this assignment from the master assignment?").caps():lng("remove this assignment from the workspace?").caps(),void(0,c.BB)(e,{onConfirm:function(){return(0,s.SC)("assignment/remove_assignment",{data:{assignment_id:D,group_id:E,master_id:X},method:"POST"},(function(){var e,t;return null!==(e=h.master)&&void 0!==e&&e.removeSub(D),null===(t=h.workspace)||void 0===t?void 0:t.removeAssignment(h)}))}});var e}},(this.workspace&&M||F&&(null===(g=this.master)||void 0===g?void 0:g.ws))&&G&&{label:lng("delete").caps(),icon:"trash",onClick:function(){(0,c.BB)(lng("are you sure you wish to delete this assignment?").caps(),{onConfirm:function(){return(0,s.SC)("assignment/delete_assignments",{data:{assignment_id:D,group_id:E,master_id:X},method:"POST"},(function(){var e,t;return null!==(e=h.master)&&void 0!==e&&e.removeSub(D),null===(t=h.workspace)||void 0===t?void 0:t.removeAssignment(h)}))}})}},U&&(this.isAssignmentCommentsLock?{label:lng("unlock comments").caps(),val:"lock_assignment_comments",attr:{lock:1},icon:"lock_open",onClick:function(){return Q(0)}}:{label:lng("lock comments").caps(),val:"lock_assignment_comments",attr:{lock:0},icon:"lock",onClick:function(){return Q(1)}})].concat(Y,[F&&G&&{label:lng("import grades from excel").caps(),val:"import_manual_assignment_from_excel",icon:"import",onClick:function(){return(0,d.vm)().openDialog("form",new j({assignment_id:D,group_id:E,title:h.title}))}}])}},{key:"calcStartTime",value:function(){return this._attr.start_date}},{key:"calcEndTime",value:function(){return this._attr.due_date}},{key:"calRelevantForDate",value:function(e){return(0,l.KC)(e,this.end_time)}},{key:"canPlay",value:function(){return"can_play"in this._attr?this._attr.can_play:!(this._attr.completed||this.start_time&&!(0,l.CR)(this.start_time)||this.end_time&&(0,l.CR)(this.end_time))&&void 0}},{key:"running_times",get:function(){return this._attr.running_times||0}},{key:"assignment_access_limit",get:function(){return this._attr.assignment_access_limit}},{key:"assignment_dashboard_id",get:function(){return this._attr.group_id+"_"+this.assignment_id}},{key:"title",get:function(){return this._attr.title||this._attr.name||this._attr.assignment_name}},{key:"type",get:function(){return"assignment"}},{key:"icon",get:function(){return"entity_assignment"}},{key:"iconTooltip",get:function(){return lng("assignment")}},{key:"completed",get:function(){var e;return null===(e=this._attr.status)||void 0===e?void 0:e.completed}},{key:"approval_waiting",get:function(){var e;return(0,o.P$)(null===(e=this._attr.status)||void 0===e?void 0:e.approval_waiting)}},{key:"gradeInfo",get:function(){var e,t,n,r,o;if(null===(e=this._attr.status)||void 0===e||!e.grade)return null;var i=!(null===(t=this._attr.status)||void 0===t||!t.alt_score);return{label:i?lng("grade").caps():lng("score").caps(),toolTip:i?lng("real score:")+" "+(null===(n=this._attr.status)||void 0===n?void 0:n.grade):"",displayGrade:i?null===(r=this._attr.status)||void 0===r?void 0:r.alt_score:null===(o=this._attr.status)||void 0===o?void 0:o.grade}}},{key:"matchRate",get:function(){return this._attr.match_rate}},{key:"accumulation",get:function(){var e;return null===(e=this._attr)||void 0===e?void 0:e.accumulation}},{key:"successful_runs",get:function(){var e;return(null===(e=this._attr.status)||void 0===e?void 0:e.successful_runs)||0}},{key:"as_coach",get:function(){return this._attr.as_coach}},{key:"notice",get:function(){var e;return this._attr.can_play?lng("click to start").caps():this._attr.starts_at?lng("starts at %s",this._attr.starts_at).caps():this._attr.ended_at?lng("ended at %s",this._attr.ended_at).caps():this._attr.access_limit_reached?lng("access limit reached").caps():"manual"===this._attr.assignment_type?lng("manual assignment").caps():null!==(e=this._attr.dependencies)&&void 0!==e&&e.completed?"2"!==this._attr.managerun||this._attr.as_coach?lng("disabled").caps():lng("will be activated by the coach").caps():lng("prerequisites not completed").caps()}},{key:"coachUser",get:function(){return"2"!==this._attr.managerun||this._attr.as_coach?null:this._attr.coach_user}},{key:"status",get:function(){var e,t,n;return null!==(e=this._attr.status)&&void 0!==e&&e.completed?{text:lng("completed|single assignment"),color:r.g.colors.green,tooltip:this.gradeInfo?(null===(t=this.gradeInfo)||void 0===t?void 0:t.label)+": "+(null===(n=this.gradeInfo)||void 0===n?void 0:n.displayGrade):""}:{text:lng("to do"),color:r.g.colors.yellow}}},{key:"link",get:function(){if(this._attr.can_play){var e,t,n;if("master"===this._attr.assignment_type)return{master:this._attr.assignment_id,ws:null===(e=this.workspace)||void 0===e?void 0:e.group_id};var r={launcher:"assignment",id:this._attr.assignment_id};return(0,o.B5)(null===(t=this.workspace)||void 0===t?void 0:t.group_id)&&(r.params={group:null===(n=this.workspace)||void 0===n?void 0:n.group_id}),r.newTab=N(this._attr),r}}},{key:"color",get:function(){return r.g.colors.green}},{key:"isLate",get:function(){var e;return!(!this._attr.due_date||null!==(e=this._attr.status)&&void 0!==e&&e.completed)&&(0,l._3)(this._attr.due_date).diff(new Date,"days")<0}},{key:"cardNote",get:function(){return this.dateNote}},{key:"sortTime",get:function(){return this.end_time}},{key:"date",get:function(){return this.dateNote.toDateTime}},{key:"dateNote",get:function(){if(this._dateNote)return this._dateNote;if(this._attr.due_date&&!this._attr.personal_dates){var e=(0,l._3)(this._attr.due_date),t=e.diff(new Date,"days"),n={icon:"clock",color:t<0?"negative":t<5?"warning":"positive",title:(0,l.k6)(e),toolTip:lng("due date")};return n.toDate=(0,l.k6)(e,{time:!1}),n.toTime=(0,l.k6)(e,{date:!1}),n.toDateTime=(0,l.k6)(e),this.completed||(n.text=t<0?lng("late").caps():t<5?lng("%s days left",t):n.date),this._dateNote=n}return{}}},{key:"subNote",get:function(){return"dashboard"===this.display?(0,o.v2)(this._attr.manager):null}},{key:"type_title",get:function(){return"dashboard"===this.display?"":this._attr.type_title}},{key:"category",get:function(){return"general"===this._attr.category_name?lng("general"):this._attr.category_name}},{key:"image",get:function(){return this._attr.assignment_image}},{key:"subTitle",get:function(){var e=this._attr.group_id||this._attr.origin_group_id,t=this._attr.condition_component?(0,h.BX)(h.HY,{children:[(0,h.tZ)(m.JO,{icon:"tree",color:r.g.colors.dominant_main})," ",this._attr.origin_group_name]}):this._attr.origin_group_name;return(0,o.B5)(e)||"personal"===e?(0,h.tZ)(i.A,{href:{workspace:e},newTab:!0,children:t}):t}},{key:"description",get:function(){return{text:this._attr.lesson_description||this._attr.text,isHtml:!this._attr.lesson_description||this._attr.descriptionIsHtml}}},{key:"users",get:function(){return this._attr.coached_users}},{key:"countUsers",get:function(){return this._attr.count_users}},{key:"commentsInfo",get:function(){var e;return"master"!==this._attr.assignment_type&&{count:parseInt(this._attr.comment_count)||0,connect:{type:"assignment",object_id:this._attr.assignment_id,group_id:null===(e=this.workspace)||void 0===e?void 0:e.group_id}}}},{key:"markColor",get:function(){return this.approval_waiting||parseInt(this.successful_runs)>0&&!this.completed?r.g.colors.chart.progress:this.isLate?r.g.colors.chart.failure:r.g.colors.chart.waiting}},{key:"markNew",get:function(){if(this.showNew){var e=this._attr.modification_time&&(0,l._3)(this._attr.modification_time).unix();return(0,l._3)((0,o.c7)()-this.showNew*o.s2).unix()<e}return!1}},{key:"progress",get:function(){if(!this._attr.statistics)return null;var e=parseInt(this._attr.statistics.users_count||0)-parseInt(this._attr.exemptions||0);return{progress:[parseInt(this._attr.statistics.complete_count||0),e],settings:{color:r.g.colors.set[this._attr.color_num],label:lng("completion").caps(),valueInBar:!0}}}},{key:"statistics",get:function(){var e;return null!==(e=this._attr.statistics)&&void 0!==e&&e.assignment_id?{scores:[{label:lng("highest score").caps(),val:this._attr.statistics.score_max,color:r.g.colors.positive,icon:"arrow_up"},{label:lng("lowest score").caps(),val:this._attr.statistics.score_min,color:r.g.colors.warning,icon:"arrow_down"},{label:lng("average score").caps(),val:this._attr.statistics.score_avg,color:r.g.colors.blue,icon:"poll",sub:{label:lng("standard deviation").caps(),val:this._attr.statistics.score_dev}}],last:{label:lng("failed users").caps(),val:this._attr.statistics.fail_count,color:r.g.colors.negative,icon:"close"}}:null}},{key:"hasCoach",get:function(){var e;return"coach"===this._attr.completion_requirement||"2"===this._attr.managerun||(null===(e=this._attr.assignment_options)||void 0===e?void 0:e.test_coach_review)}},{key:"isAssignmentCommentsLock",get:function(){return this._attr.lock_assignment_comments}},{key:"mayDeleteComments",get:function(){var e,t,n;return(null===(e=this.workspace)||void 0===e?void 0:e.is_owner)||(null===(t=this.workspace)||void 0===t||null===(n=t.isGeneralManager)||void 0===n?void 0:n.call(t))||this.isAssignmentOwner}},{key:"isAssignmentOwner",get:function(){var e,t;return!(null===(e=this._attr)||void 0===e||null===(t=e.lesson_owners)||void 0===t||!t.find((function(e){return e===Blsm.user.id})))}},{key:"mayEditCommetns",get:function(){return"model"!==this._attr.assignment_type&&!this.isAssignmentCommentsLock&&!this._attr.hide_comments}},{key:"maySeeCommentsTab",get:function(){var e;return Blsm.isFeatureEnabled("assignments_comments")&&((null===(e=this.commentsInfo)||void 0===e?void 0:e.count)>0||!this.isAssignmentCommentsLock)}},{key:"mayLike",get:function(){return!!Blsm.isFeatureEnabled("assignments_ratings")&&(0,o.DM)(this.likesCount)}},{key:"is_waiting",get:function(){return this._attr.is_waiting?1:0}}])&&Z(t.prototype,n),a&&Z(t,a),g}(a.M),x=R(k.prototype,"likesCount",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),S=R(k.prototype,"likesVote",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k)},68595:function(e,t,n){"use strict";n.d(t,{n:function(){return P}});var r,o,i=n(22906),a=n(68567),l=n(98e3),s=n(23838),c=n(27821),u=n(85946),p=n(40441),d=n(88116),f=n(35944);function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O,k,x,S,j,C,P=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(m,e);var t,n,r,i=b(m);function m(e,t){var n,r,a,l,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,m),w(v(n=i.call(this,e)),"workspace",void 0),r=v(n),a="selected",l=o,s=v(n),l&&Object.defineProperty(r,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0}),w(v(n),"displayWorkspace",!1),w(v(n),"onClick",void 0),(0,c.makeObservable)(v(n)),n.workspace=null==t?void 0:t.workspace,n.displayWorkspace=null==t?void 0:t.displayWorkspace,n.onClick=null==t?void 0:t.onClick,n}return t=m,(n=[{key:"select",value:function(e){this.selected=!!e}},{key:"calcStartTime",value:function(){return this._attr.start_date||this._attr.start_time}},{key:"calcEndTime",value:function(){return this._attr.due_date||this._attr.end_time}},{key:"remove",value:function(){this.workspace.deleteEvent(this)}},{key:"deleteEvent",value:function(){var e=this;(0,a.BB)(lng("are you sure you want to delete the selected items?"),{title:lng("delete").caps(),onConfirm:function(){return(0,l.SC)("calendarevent/"+e.id,{method:"DELETE"},(function(){return(0,s.vm)().closeDialog(),e.remove()}))}})}},{key:"menu",value:function(){var e,t,n,r,o=this,i=[],a=null===(e=this.workspace)||void 0===e||null===(t=e.mayCreateMeetings)||void 0===t?void 0:t.call(e),l=null===(n=this.workspace)||void 0===n||null===(r=n.mayEditMeetings)||void 0===r?void 0:r.call(n);return a&&i.push({label:lng("duplicate|verb"),icon:"copy",onClick:function(){var e;return null===(e=o.workspace)||void 0===e?void 0:e.duplicateMeetings([o])}}),l&&i.unshift({label:lng("edit"),icon:"edit",onClick:function(){var e;return null===(e=o.workspace)||void 0===e?void 0:e.openEventForm(o)}},{label:lng("delete"),icon:"trash",onClick:function(){return o.deleteEvent()}}),i}},{key:"title",get:function(){return this._attr.title}},{key:"subTitle",get:function(){if(this.displayWorkspace){var e=this.attr("workspace")||{},t=e.title||this.attr("group_name"),n=e.group_id||this.attr("group_id");if(n&&t)return(0,f.tZ)(u.D,{large:!0,children:(0,f.tZ)(p.A,{href:{workspace:n,tab:"schedule"},children:t})})}return null}},{key:"type",get:function(){return"event"}},{key:"id",get:function(){return parseInt(this._attr.event_id)}},{key:"dateNote",get:function(){return(0,d.D6)(this)}},{key:"icon",get:function(){return"entity_event"}},{key:"iconTooltip",get:function(){return lng("event")}}])&&g(t.prototype,n),r&&g(t,r),m}(i.yY),O=r.prototype,k="selected",x=[c.observable],S={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}},C={},Object.keys(S).forEach((function(e){C[e]=S[e]})),C.enumerable=!!C.enumerable,C.configurable=!!C.configurable,("value"in C||C.initializer)&&(C.writable=!0),C=x.slice().reverse().reduce((function(e,t){return t(O,k,e)||e}),C),j&&void 0!==C.initializer&&(C.value=C.initializer?C.initializer.call(j):void 0,C.initializer=void 0),void 0===C.initializer&&(Object.defineProperty(O,k,C),C=null),o=C,r)},64821:function(e,t,n){"use strict";n.d(t,{$:function(){return q},Z:function(){return X}});var r=n(22906),o=n(27821),i=n(15560),a=n(15673),l=n(40676),s=n(64902),c=n(69637),u=n(66005),p=n(23838);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){g(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t){return(b=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return v(this,n)}}function v(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?_(e):t}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var O,k,x,S,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&b(e,t)}(a,e);var t,n,r,i=y(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this),(0,o.makeObservable)(_(t));var n=e.data,r=void 0===n?{}:n;return t.onSaveSuccess=e.onSaveSuccess,t.channel=r.channel,t.buildFields(t.channel),t.title=lng("channel about"),t}return t=a,(n=[{key:"buildFields",value:function(e){this._fields=[{name:"title",type:"text",label:lng("channel name")},{type:"richtext",name:"description",label:lng("description"),toolbarOptions:{font:!0,color:!0,link:!0,list:!0,align:!0}}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("channel/edit_channel_details",Object.assign(m(m({},e),{},{id:this.channel.id})))}}])&&h(t.prototype,n),r&&h(t,r),a}(n(24210).I),C=n(16920),P=n(42755),Z=n(22334),B=n(35944);function T(e){return(T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function E(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==T(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var q=(O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(l,e);var t,n,r,i=D(l);function l(e,t){var n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),M(N(n=i.call(this,e)),"store",void 0),M(N(n),"playlists",[]),M(N(n),"subsData",void 0),E(N(n),"channel_name",k,N(n)),E(N(n),"channel_description",x,N(n)),E(N(n),"creation_time",S,N(n)),(0,o.makeObservable)(N(n));var r=e.playlists;return n.store=t,n.playlists=null==r?void 0:r.map((function(e){return new a.g(e)})),n.channel_name=e.channel_name,n.channel_description=e.channel_about,n.creation_time=e.creation_time,n}return t=l,(n=[{key:"editChannel",value:function(){var e=this;(0,p.vm)().openDialog("form",new j({data:this.store,onSaveSuccess:function(t){e.channel_name=null==t?void 0:t.title,e.id=null==t?void 0:t.channel_id,e.channel_description=null==t?void 0:t.description,e.creation_time||(e.creation_time=(0,Z.GG)(new Date,{time:!1})),(0,p.vm)().closeDialog()}}),{width:"800px"})}},{key:"id",set:function(e){this._attr.channel_id=e},get:function(){return this._attr.channel_id}},{key:"ownerId",get:function(){return this._attr.user_id||this._attr.owner_id}},{key:"playlistsNum",get:function(){return this._attr.playlists_num}},{key:"title",get:function(){return this.channel_name}},{key:"subscribed",get:function(){return this._attr.subscribed}},{key:"ownerName",get:function(){return this._attr.full_name||"".concat(this._attr.user_first_name," ").concat(this._attr.user_last_name)}},{key:"ownerAvatar",get:function(){return this._attr.user_avatar}},{key:"description",get:function(){return this.channel_description}},{key:"following",get:function(){return this._attr.following}},{key:"followers",get:function(){return this._attr.followers}},{key:"followersNum",get:function(){return this._attr.followers_num}}])&&I(t.prototype,n),r&&I(t,r),l}(r.JH),k=F(O.prototype,"channel_name",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x=F(O.prototype,"channel_description",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),S=F(O.prototype,"creation_time",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),O),X=(0,i.observer)((function(e){var t=e.collection,n=e.scrollParent,r=[{title:lng("name").caps(),sortVal:"full_name"},{title:lng("followers").caps(),sortVal:"followers"},{title:lng("channel").caps()}],o=[{name:"user_id",label:"#",type:"text"},{name:"user_name",label:lng("name"),type:"text"}],i=[{val:"",label:lng("default")},{val:"full_name",label:lng("name")},{val:"followers",label:lng("followers")}];return(0,B.tZ)(l.iA,{cols:r,loading:null==t,collection:t,filters:o,sorts:i,scrollParent:n,RowRenderer:L,displayCount:!0})})),L=function(e){var t=e.row,n=t.user_id,r=t.followers;return(0,B.BX)("tr",{css:U,children:[(0,B.tZ)(c.U6,{width:"300px",children:(0,B.BX)("div",{className:"user",children:[(0,B.tZ)(s.qE,{user:t})," ",(0,B.tZ)(u.D,{user:t})]})}),(0,B.tZ)("td",{children:r}),(0,B.tZ)("td",{children:(0,B.tZ)(P.ZT,{icon:"enter",color:"white",size:30,bgColor:C.g.colors.dominant_main,href:{user:n,tab:"channel"}})})]})},U={name:"mmfhuj",styles:"td{.user{display:flex;align-items:center;gap:10px;}&:nth-child(n+2){text-align:center;}}"}},88116:function(e,t,n){"use strict";n.d(t,{D6:function(){return L},aZ:function(){return X}});var r,o,i,a,l,s=n(16920),c=n(76054),u=n(40441),p=n(71134),d=n(22334),f=n(98e3),m=n(27821),g=n(37659),h=n(68567),b=n(53178),y=n(87363),v=n(539),_=n(68595),w=n(38246),O=n(85946),k=n(87327),x=n(70081),S=n(35944);function j(e){return(j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Z(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function B(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function T(e,t){return(T=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function E(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return I(this,n)}}function I(e,t){return!t||"object"!==j(t)&&"function"!=typeof t?A(e):t}function A(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function R(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var z=(r=m.action.bound,o=m.action.bound,i=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&T(e,t)}(i,e);var t,n,r,o=E(i);function i(e,t){var n,r,s,c,u,p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Z(A(p=o.call(this,e,t)),"attending",a,A(p)),Z(A(p),"zoomRecordings",l,A(p)),R(A(p),"displayWorkspace",!1),R(A(p),"onClick",void 0),(0,m.makeObservable)(A(p)),p.attending=null===(n=e.user_attending)||void 0===n?void 0:n.toLowerCase(),p.content=null===(r=e.content)||void 0===r?void 0:r.map((function(e){return new g.m(e)})),p.zoomRecordings=null===(s=p._attr)||void 0===s||null===(c=s.zoom_rec_file_ids)||void 0===c||null===(u=c.split(","))||void 0===u?void 0:u.map((function(e,t){return{id:e,count:1+t}})),p.displayWorkspace=null==t?void 0:t.displayWorkspace,p.onClick=null==t?void 0:t.onClick,p}return t=i,(n=[{key:"canPlay",value:function(){var e=(0,d.CR)(this.end_time),t=(0,d._3)(this.start_time.unix()-300);return!e&&(0,d.CR)(t)}},{key:"deleteZoomRecord",value:function(e){var t=this;(0,h.BB)(lng("are you sure you want to delete this file?").caps(),{title:lng("delete file"),confirmText:lng("delete").caps(),onConfirm:function(){return(0,f.SC)("file/zoom_rec/"+e.id,{method:"DELETE"},(function(){return t.zoomRecordings.remove(e)}))}})}},{key:"mayDeleteZoomRecord",value:function(){return Blsm.user.isPowerManager}},{key:"mayCreateMeetings",value:function(){var e,t,n;return this._attr.group_id&&(null===(e=this._attr)||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t[Blsm.ManagerPermissions.CREATE_MEETINGS])&&parseInt(null===(n=this._attr.group_options)||void 0===n?void 0:n.meetings)>0}},{key:"mayEditMeetings",value:function(){var e,t;return this._attr.group_id&&Blsm.user.isManager&&(null===(e=this._attr)||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t[Blsm.ManagerPermissions.EDIT_MEETINGS])}},{key:"maySetAttendance",value:function(){var e,t;return this._attr.group_id&&Blsm.user.isManager&&(null===(e=this._attr)||void 0===e||null===(t=e.permissions)||void 0===t?void 0:t[Blsm.ManagerPermissions.SET_ATTENDANCE])}},{key:"mayInviteGuest",value:function(){return this.is_manager&&this.isLiveClass()&&Blsm.InitialData.parameters.anonymous_assignments}},{key:"isLiveClass",value:function(){return"prv://watchittoo"===this._attr.assignment_url}},{key:"isZoom",value:function(){return"prv://zoom"===this._attr.assignment_url}},{key:"menu",value:function(){var e,t,n,r,o,i,a,l,s,c,f,m,g=this,b=[],y=this._attr,v=y.assignment_id,_=y.assignment_url,w=(null===(e=this.workspace)||void 0===e?void 0:e.group_id)||this._attr.group_id;if(w&&!this.workspace&&b.push({label:lng("go to the workspace"),icon:"enter",href:{workspace:w,tab:"schedule"}}),null!==(t=this.workspace)&&void 0!==t&&null!==(n=t.mayEditMeetings)&&void 0!==n&&n.call(t)||this.mayEditMeetings()){b.push({label:lng("edit"),icon:"edit",href:(0,u.p4)({edit:"meeting",id:v})}),this.workspace&&b.push({label:lng("delete"),icon:"trash",onClick:function(){return g.workspace.deleteMeeting(g)}});var O=this.generateMeetingUrl(!0);O&&b.push({label:this.isZoom()?lng("join as host").caps():lng("join online meeting").caps(),icon:"popout",href:O})}(this.workspace&&(null!==(r=(o=this.workspace).mayCreateMeetings)&&void 0!==r&&r.call(o)||this.mayCreateMeetings())&&b.push({label:lng("duplicate|verb"),icon:"copy",href:(0,u.p4)({edit:"meeting",params:{ws:w,dup_from:v}})}),(null===(i=this.workspace)||void 0===i?void 0:i.users_count)>0&&"Course_template"!==(null===(a=this.workspace)||void 0===a?void 0:a.group_type)&&(null!==(l=this.workspace)&&void 0!==l&&null!==(s=l.maySetAttendance)&&void 0!==s&&s.call(l)||this.maySetAttendance()))&&(this.workspace&&(null===(c=this.start_time)||void 0===c?void 0:c.isBefore(Date.now()+5*d.Mx))&&b.push({label:lng("set attendance").caps(),icon:"create",onClick:function(){return g.workspace.setAttendance({assignmentId:v,groupId:w})}}),b.push({label:lng("meeting report").caps(),icon:"report",href:(0,u.p4)({report:"ReportGroupMeetings",params:{assignment:v,group:w}})}),Blsm.isFeatureEnabled("qr_mark_attendance")&&null!==(f=this.start_time)&&void 0!==f&&f.isBefore(Date.now()+10*d.Mx)&&null!==(m=this.end_time)&&void 0!==m&&m.isAfter(Date.now()-10*d.Mx)&&b.push({label:lng("mark attendance via qr code"),icon:"qrcode",onClick:function(){return(0,h.qR)((0,S.tZ)(F,{meeting_id:g.id}),{title:g.title})}}));return this.workspace&&(this.workspace.mayInviteGuest(_)||this.mayInviteGuest())&&b.push({label:lng("invite guest"),icon:"export",onClick:function(){return g.workspace.setMeetingUrl((0,p.qL)()+"Launcher?assignment="+v+"&anonymous=1")}}),b}},{key:"setAttending",value:function(e){var t=this;(0,f.SC)("meetings/attending",{data:{meeting:this._attr.assignment_id,decision:e}},(function(){return t.attending=e}))}},{key:"generateMeetingUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this._attr,r=n.assignment_url,o=n.group_id,i=n.assignment_id;return void 0===e&&(e=this.is_manager),q(r,o,i,e,t)}},{key:"title",get:function(){return this._attr.assignment_name||this._attr.title}},{key:"subTitle",get:function(){if(this.displayWorkspace){var e,t,n=(null===(e=this.workspace)||void 0===e?void 0:e.title)||this._attr.group_name,r=(null===(t=this.workspace)||void 0===t?void 0:t.group_id)||this._attr.group_id;if(r&&n)return(0,S.tZ)(O.D,{large:!0,children:(0,S.tZ)(u.A,{href:{workspace:r,tab:"schedule"},children:n})})}return null}},{key:"type",get:function(){return"meeting"}},{key:"id",get:function(){return parseInt(this._attr.assignment_id)}},{key:"icon",get:function(){return"entity_meeting"}},{key:"iconTooltip",get:function(){return lng("meeting")}},{key:"completed",get:function(){var e;return null===(e=this._attr.status)||void 0===e?void 0:e.completed}},{key:"instructorNames",get:function(){return this._attr.instructors.map((function(e){return e.full_name})).join()}},{key:"icalUid",get:function(){return this._attr.ical_uid}},{key:"dateNote",get:function(){return L(this)}},{key:"date",get:function(){return(0,d.k6)(this.start_time,{date:!0,time:!1})}},{key:"notice",get:function(){var e,t=(0,d.CR)(this.end_time),n=this.generateMeetingUrl();return this.canPlay()&&n&&(e=this.isZoom()&&this.is_manager?lng("join as host").caps():lng("join online meeting").caps()),!n||this.canPlay()||t||(e=lng("online meeting link will be available 5 minutes before the meeting").caps()),e}},{key:"onlineUrlCopy",get:function(){var e=this.generateMeetingUrl(!1,Blsm.prm.server_name+"/");return null!=e&&e.url?e:null}},{key:"status",get:function(){var e=this._attr.status,t=(0,d.CR)(this.end_time),n=!t&&(0,d.CR)(this.start_time);return null!=e&&e.completed?{text:lng("completed"),color:s.g.colors.green}:t?{text:lng("finished"),color:s.g.colors.light_blue2}:n?{text:lng("started"),color:s.g.colors.blue}:"yes"===this.attending?{text:lng("going"),color:s.g.colors.light_blue}:"no"===this.attending?{text:lng("not going"),color:s.g.colors.grey}:{text:lng("upcoming"),color:s.g.colors.yellow}}},{key:"link",get:function(){if(this.canPlay()){var e=this.generateMeetingUrl();if(e)return e}return!1}},{key:"secondaryLink",get:function(){return this.canPlay()&&this.is_manager&&this.isZoom()?{link:this.generateMeetingUrl(!1),label:lng("join as participant")}:null}},{key:"linkToolTip",get:function(){return!!this.link&&(this.isZoom()&&this.is_manager?lng("join as host").caps():lng("join online meeting").caps())}},{key:"newTab",get:function(){return!!this.link}},{key:"warnings",get:function(){var e,t,n=[];if(null!==(e=this._attr.warnings)&&void 0!==e&&e.resources_conflicts&&n.push(lng("resources conflicts: ")+this._attr.warnings.resources_conflicts),(null===(t=this._attr.warnings)||void 0===t?void 0:t.blocking_events.length)>0){var r=0,o=this._attr.warnings.blocking_events.map((function(e){return!Blsm.user.isPowerManager&&e.manager_only&&r++,e.event_name}));1===r&&o.push(lng("another event")),r>1&&o.push(lng("%s other events",r)),o.length&&n.push(" ".concat(lng("overlaps with:").caps()," ").concat(o.join(", ")))}return n.join("\n")}},{key:"haveZoomRecordings",get:function(){var e;return!(null===(e=this._attr)||void 0===e||!e.zoom_rec_file_ids)}},{key:"is_manager",get:function(){var e;return(null===(e=this.workspace)||void 0===e?void 0:e.is_manager)||this._attr.is_manager}},{key:"is_member",get:function(){return this._attr.is_member}},{key:"is_instructor",get:function(){var e;return(null===(e=this.instructors)||void 0===e?void 0:e.findIndex((function(e){return(0,p.Tz)(e.user_id)})))>=0}},{key:"instructors",get:function(){return this._attr.instructors}},{key:"resources",get:function(){return this._attr.resources}},{key:"maySeeResources",get:function(){var e,t,n;return((null===(e=this.workspace)||void 0===e||null===(t=e.mayEditMeetings)||void 0===t?void 0:t.call(e))||this._attr.group_id&&Blsm.user.isManager&&this._attr.hasEditPermission)&&(null===(n=this.resources)||void 0===n?void 0:n.length)>0}},{key:"locations",get:function(){var e=[];return this._attr.location&&e.push({label:lng("location").caps(),value:this._attr.location}),this._attr.meeting_gathering_area&&e.push({label:lng("gathering area").caps(),value:this._attr.meeting_gathering_area}),this._attr.meeting_audience&&e.push({label:lng("audience").caps(),value:this._attr.meeting_audience}),e}},{key:"description",get:function(){return{text:this._attr.text,isHtml:!0}}},{key:"descriptionText",get:function(){return(0,p.s9)(this._attr.text)}},{key:"didMeetingStart",get:function(){return(0,d.CR)(this.start_time)}},{key:"maySetSelfAttendance",get:function(){return"meeting"===this.type&&this.setAttending&&(this.is_member&&!this.is_manager&&!this.is_instructor||!this.is_member&&this.is_manager&&this.is_instructor)&&!this.didMeetingStart}},{key:"is_waiting",get:function(){return this.completed||(0,d.CR)(this.end_time)?0:1}}])&&B(t.prototype,n),r&&B(t,r),i}(c.M),a=N(i.prototype,"attending",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=N(i.prototype,"zoomRecordings",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N(i.prototype,"status",[m.computed],Object.getOwnPropertyDescriptor(i.prototype,"status"),i.prototype),N(i.prototype,"deleteZoomRecord",[r],Object.getOwnPropertyDescriptor(i.prototype,"deleteZoomRecord"),i.prototype),N(i.prototype,"mayDeleteZoomRecord",[o],Object.getOwnPropertyDescriptor(i.prototype,"mayDeleteZoomRecord"),i.prototype),i),M={name:"thew2f",styles:"justify-content:center;text-align:center;*{margin:2.5px;}._title{font-weight:600;font-size:1.2rem;}"},F=function(e){var t=e.meeting_id,n=C((0,y.useState)(),2),r=n[0],o=n[1],i=(0,x.iP)().width;(0,y.useEffect)((function(){a();var e=setInterval((function(){return a()}),6e4);return function(){return clearInterval(e)}}),[t]);var a=function(){(0,f.SC)("meetings/mark_attendance_token/meeting="+t,{},o)},l=window.location.protocol+"//"+window.location.host+Blsm.prm.Mainref+"qr_attendance?token="+r,s=i>300?300:.5*i;return r?(0,S.BX)("div",{css:M,children:[(0,S.tZ)("div",{className:"_title",children:lng("scan qr code to mark your attendance").caps()}),(0,S.tZ)(b.s,{value:l,size:s})]}):(0,S.tZ)(v.$,{})},q=function(e,t,n,r){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Blsm.prm.Mainref,i="&ref="+encodeURIComponent(location.href);switch(e){case"prv://chat":return{onClick:function(){return Blsm.chat_with_group(t,n)},clickOnly:!0};case"prv://watchittoo":return"".concat(o,"Launcher?assignment=").concat(n).concat(i,"&is_manager=").concat(r?"1":"0");case"prv://conferencing":return"".concat(o,"conference?gid=").concat(t);case"prv://zoom":return{url:"".concat(o,"redirect.php?target=zoom&meeting=").concat(n,"&manager=").concat(r?"1":"0"),newTab:!0}}if(e)return{url:"".concat(o,"redirect.php?target=online_meeting&meeting=").concat(n),newTab:!0}},X=function(e,t){return e.isEntity?(console.warn("newMeetingOrEvent: double entity",e),e):"event"===e.type?new _.n(e,t):"meeting"===e.type||!e.type&&e.assignment_id?new z(e,t):"group"===e.type?new w.j(e,t):"assignment"===e.type?new k.o(e,t):(console.warn("newMeetingOrEvent: unknown data.type",e.type,e),null)},L=function(e){var t=e.end_time,n=e.start_time,r={icon:"clock",title:(0,d.k6)(n)},o=(0,d.zk)(n),i=(0,d.KC)(n,t),a=!i&&(0,d.f1)(n,t);return o&&!e._attr.whole_day||(r.date=(0,d.k6)(n,{time:!1})),e._attr.whole_day||(r.time=(0,d.k6)(n,{date:!1}),r.toTime=(0,d.k6)(t,{date:!1}),a&&(r.note=lng("of the following day"))),!t||a||i||(r.toDate=(0,d.k6)(t,{time:!1,year:!(0,d.FT)(n,t)})),r}},80919:function(e,t,n){"use strict";n.d(t,{O:function(){return w},V:function(){return _}});var r,o,i,a,l=n(27821),s=n(22906),c=n(98e3),u=n(16920);function p(e){return(p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function d(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==p(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var _=function(e){switch(e){case"opensesame":return"OpenSesame";case"linkedin":return"LinkedIn"}return e.caps()},w=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(p,e);var t,n,r,s=g(p);function p(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),d(b(n=s.call(this,e)),"likesCount",o,b(n)),d(b(n),"likesVote",i,b(n)),d(b(n),"following",a,b(n)),(0,l.makeObservable)(b(n)),n.onlineContentStore=t,n.likesCount=e.likes,n.likesVote=e.user_vote,n.following=!!e.following,n.score=e.score,n}return t=p,(n=[{key:"toggleLike",value:function(){this.likesVote=!this.likesVote,this.likesCount=this.likesVote?this.likesCount+1:Math.max(this.likesCount-1,0),(0,c.SC)("likes",{data:{req:"vote",type:"online_content",object_id:this._attr.oc_id,user_action:"like"},method:"POST"})}},{key:"togglePin",value:function(){var e=this;(0,c.SC)("library/follow_content",{data:{id:this.oc_id,leave:this.following?1:0}},(function(){return e.onlineContentStore?e.onlineContentStore.follow(e):e.following=!e.following}))}},{key:"completed",get:function(){return["passed","complete"].includes(this.status.text)}},{key:"duration",get:function(){var e=this._attr.duration;if(!e)return!1;if(e.includes("w")){var t=e.split("w");return"".concat(t[0]," ").concat(t[0]>1?lng("weeks").caps():lng("week").caps())}if(e<60)return"".concat(e," ").concat(e>1?lng("minutes"):lng("minute"));var n=Math.floor(e/60),r=e-60*n,o="";return n&&(o+="".concat(n," ").concat(n>1?lng("hours"):lng("hour"))),r&&(o+=" ".concat(r," ").concat(r>1?lng("minutes"):lng("minute"))),o}},{key:"gradeInfo",get:function(){return this.score?{label:lng("score").caps(),displayGrade:this.score}:null}},{key:"id",get:function(){return this._attr.provider+"_"+this._attr.provider_cid}},{key:"oc_id",get:function(){return this._attr.oc_id}},{key:"title",get:function(){return this._attr.title}},{key:"type",get:function(){return this._attr.type}},{key:"icon",get:function(){return"content"}},{key:"link",get:function(){return this._attr.aicc_url?{aicc:{oc_id:this.oc_id}}:{url:this._attr.url,newTab:!0}}},{key:"image",get:function(){return this._attr.image_url}},{key:"type_title",get:function(){return this._attr.difficulty_label}},{key:"category",get:function(){return this._attr.category}},{key:"tags",get:function(){return this._attr.skills}},{key:"description",get:function(){return{text:this._attr.description,isHtml:!1}}},{key:"bottomNote",get:function(){return{text:this.provider,color:u.g.colors.dominant_main}}},{key:"status",get:function(){return{text:this._attr.status}}},{key:"provider",get:function(){return _(this._attr.provider)}},{key:"mayLike",get:function(){return!0}}])&&f(t.prototype,n),r&&f(t,r),p}(s.JH),o=v(r.prototype,"likesCount",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=v(r.prototype,"likesVote",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=v(r.prototype,"following",[l.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},15673:function(e,t,n){"use strict";n.d(t,{g:function(){return _}});var r,o,i=n(22906),a=n(27821),l=n(37659),s=n(98e3),c=n(40441),u=n(23838),p=n(41750);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var _=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(d,e);var t,n,r,i=g(d);function d(e){var t,n,r,s,c,u,p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,d),r=i.call(this,e),s=b(r),c="items",u=o,p=b(r),u&&Object.defineProperty(s,c,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(p):void 0}),r.items=null===(t=e.items)||void 0===t?void 0:t.map((function(e){return new l.m(e)})),null===(n=r.items)||void 0===n||n.sort((function(e,t){return parseInt(e._attr.item_order)-parseInt(t._attr.item_order)})),r.playlist_items=Object.assign([],r.items),(0,a.makeObservable)(b(r)),r}return t=d,(n=[{key:"menuOptions",value:function(e){var t=this,n=this.items.find((function(t){return t.assignment_id===e})),r=null==n?void 0:n.lesson_id,o=[{label:lng("add to another playlist"),onClick:function(){return t.onItemMove(e,t._attr.playlist_id)},icon:"list_music"}];return parseInt(null==n?void 0:n._attr.owner_id)===parseInt(Blsm.user.id)&&(o.push({label:lng("edit"),icon:"edit",onClick:function(){return t.onItemEdit(r)}}),o.push({label:lng("remove from list"),icon:"trash",onClick:function(){return t.onItemRemove(e)}})),o}},{key:"onItemRemove",value:function(e){var t=this,n=this.id;return(0,s.SC)("channel/remove_from_playlist/&playlist_id=".concat(n,"&item_id=").concat(e,"&"),{method:"DELETE"},(function(){var n,r;t.items=t.items.filter((function(t){return t.assignment_id!==e})),null===(n=(0,u.vm)().selfUserStore)||void 0===n||null===(r=n.channelStore)||void 0===r||r.invalidate()}))}},{key:"onItemEdit",value:function(e){return(0,c.p4)({edit:"content",id:e},!0)}},{key:"onItemMove",value:function(e){return(0,u.vm)().openDialog("form",new p.L({item:e}))}},{key:"onAddItem",value:function(e){var t=e.item;this.items.push(new l.m(t))}},{key:"updatePlaylist",value:function(e){var t=e.title,n=e.status;0!==n&&1!==n||(this._attr.status=n),t&&(this._attr.playlist_name=t)}},{key:"id",get:function(){return this._attr.playlist_id}},{key:"title",get:function(){return this._attr.playlist_name}},{key:"status",get:function(){return this._attr.status}},{key:"playlistItems",get:function(){return this.items}},{key:"skills",get:function(){var e,t={};return null===(e=this.items)||void 0===e||e.forEach((function(e){var n=e.skills;"string"!=typeof n&&(null==n||n.forEach((function(e){t[e.id]||(t[e.id]=e)})))})),Object.values(t)}}])&&f(t.prototype,n),r&&f(t,r),d}(i.JH),o=v(r.prototype,"items",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v(r.prototype,"title",[a.computed],Object.getOwnPropertyDescriptor(r.prototype,"title"),r.prototype),v(r.prototype,"updatePlaylist",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updatePlaylist"),r.prototype),r)},88918:function(e,t,n){"use strict";n.d(t,{N:function(){return g}});var r=n(60409),o=n(40441),i=n(2645);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function u(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return p(this,n)}}function p(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?d(e):t}function d(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return(f=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(f,e);var t,n,a,p=u(f);function f(e){var t,n,o,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=arguments.length>2?arguments[2]:void 0;(l(this,f),a.anonymous&&("Course_template"===e.group_type?e.template_status="OPEN":e.status="OPEN"),e.status&&(e.statusInfo=(0,i.cW)(e.status)),"Course_template"===e.group_type)&&(e.statusInfo=e.template_status?(0,i.cW)(e.template_status):void 0,"reg_to_template"===e.registration_type?delete e.instances:null===(o=e.instances)||void 0===o||o.forEach((function(t){t.statusInfo="manager_register"!==e.group_access?(0,i.cW)(t.status):(0,i.cW)("ADD_MEMBERS"),t.typeName=(0,r.p)(t.group_type,t.is_course)})));return e.sorting_date=parseInt(e.group_open_date_unix)||Number.MAX_SAFE_INTEGER,a.custom_fields&&(e.custom_fields=a.custom_fields),m(d(n=p.call(this,e,a)),"instances",[]),m(d(n),"tab",void 0),n.tab=s,e.instances&&(n.instances=null===(t=e.instances)||void 0===t?void 0:t.map((function(e){var t;return new f(e,{anonymous:a.anonymous,display:"registration",custom_fields:null===(t=n._attr)||void 0===t?void 0:t.custom_fields})}))),n}return t=f,(n=[{key:"menu",value:function(){var e=this;return this._attr.is_owner?[{label:lng("edit").caps(),onClick:function(){return(0,o.p4)({edit:"workspace",id:e.group_id},!0)}}]:[]}},{key:"group_id",get:function(){return this._attr.group_id}},{key:"ect_id",get:function(){return this._attr.ect_id}},{key:"url_id",get:function(){return this._attr.ect_id?"e"+this._attr.ect_id:this._attr.group_id}},{key:"isExternal",get:function(){return"external"===this._attr.course_status}},{key:"group_name",get:function(){return this._attr.group_name}},{key:"approver_data",get:function(){return this._attr.approver_data}},{key:"description",get:function(){return{text:this._attr.group_description,isHtml:!0}}},{key:"matchRate",get:function(){return this._attr.match_rate}},{key:"extra_info",get:function(){return this._attr.registration_extra_info}},{key:"passing_grade",get:function(){return parseInt(this._attr.passing_grade)>0&&this._attr.passing_grade}},{key:"category",get:function(){return this._attr.classification_name}},{key:"CustomFieldsToDisplay",get:function(){var e,t,n,r=this;return null===(e=Object.values)||void 0===e||null===(t=e.call(Object,this._attr.custom_fields||{}))||void 0===t||null===(n=t.filter)||void 0===n?void 0:n.call(t,(function(e){return r._attr[e.field_column]})).map((function(e){return{isHtml:"TEXT"===e.field_type,label:e.field_name,value:r._attr[e.field_column]}}))}},{key:"activityDates",get:function(){return{start:this._attr.group_open_date,end:this._attr.group_close_date}}},{key:"registrationDates",get:function(){return{start:this._attr.registration_start_date,end:this._attr.registration_end_date}}},{key:"isTemplate",get:function(){var e;return"course_template"===(null===(e=this._attr.group_type)||void 0===e?void 0:e.toLowerCase())}},{key:"typeName",get:function(){return this.type_title}},{key:"type_title",get:function(){return Blsm.isFeatureEnabled("hide_group_types")?void 0:(0,r.p)(this.isTemplate?"course":this._attr.group_type,this._attr.is_course)}},{key:"link",get:function(){return{courseCatalog:!0,tab:this.tab,id:this.url_id||this.group_id}}},{key:"statusInfo",get:function(){return this._attr.statusInfo}},{key:"cardNote",get:function(){var e,t;return{text:null===(e=this._attr.statusInfo)||void 0===e?void 0:e.selfText,color:null===(t=this._attr.statusInfo)||void 0===t?void 0:t.cardColor}}},{key:"registerNumbers",get:function(){return{regType:this._attr.registration_type,groupType:this._attr.group_type,instances:this.instances,members:this._attr.num_of_members,remainingPlaces:!0===this._attr.remaining_places?-1:this._attr.remaining_places}}},{key:"displayCourseFieldsBtn",get:function(){return this.description.length>=70||this.extra_info||null!==this.activityDates.start||null!==this.activityDates.end||this.passing_grade||this.syllabus_file||this.syllabus_text||this.syllabus_url||this.CustomFieldsToDisplay.length>0||this.estimated_cost_for_member||this._attr.dependencies}},{key:"haveInstances",get:function(){var e;return(null===(e=this._attr.instances)||void 0===e?void 0:e.length)>0}},{key:"estimated_cost_for_member",get:function(){return this._attr.estimated_cost_for_member}},{key:"registerDependencies",get:function(){return this._attr.dependencies?Object.values(this._attr.dependencies):null}},{key:"subNote",get:function(){return this._attr.credit_on_completion?"".concat(lng("credits").caps(),": ").concat(this._attr.credit_on_completion):null}},{key:"priceTag",get:function(){var e;return"PRICE"===(null===(e=this._attr.statusInfo)||void 0===e?void 0:e.status)?this._attr.price_tag:""}},{key:"creditOnCompletion",get:function(){return this._attr.credit_on_completion?this._attr.credit_on_completion:0}}])&&s(t.prototype,n),a&&s(t,a),f}(n(38246).j)},37659:function(e,t,n){"use strict";n.d(t,{m:function(){return B}});var r,o,i,a,l=n(16920),s=n(76054),c=n(24061),u=n(98e3),p=n(27821),d=n(23838),f=n(28534),m=n(22334),g=n(87327),h=n(40441),b=n(71134);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function O(e,t,n){return(O="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=C(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var B=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(y,e);var t,n,r,s=x(y);function y(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return _(this,y),P(j(t=s.call(this,e,n)),"deleteContent",void 0),P(j(t),"isEnterprise",Blsm.checkMod(["","ENT"])),P(j(t),"refLink",void 0),v(j(t),"likesCount",o,j(t)),v(j(t),"likesVote",i,j(t)),v(j(t),"bookmarked",a,j(t)),(0,p.makeObservable)(j(t)),t.deleteContent=n.deleteContent,t.refLink=n.refLink,e.likes&&(t.likesCount=parseInt(e.likes),t.likesVote=!!e.user_vote),t.bookmarked=!!t._attr.bookmark_id,t}return t=y,(n=[{key:"menu",value:function(){var e,t,n=this;return(0,c.hk)({content:this._attr,actions:{deleteContent:this.deleteContent?function(){return n.deleteContent(n)}:void 0},mayLockComments:null===(e=this.workspace)||void 0===e||null===(t=e.isGeneralManager)||void 0===t?void 0:t.call(e)})}},{key:"toggleLockAssignmentComments",value:function(){this._attr.lock_assignment_comments=!this._attr.lock_assignment_comments,this._attr.lock_assignment_comments?(0,f.qV)(lng("comments are now disabled.")):(0,f.qV)(lng("comments are now enabled."))}},{key:"toggleLike",value:function(){this.likesVote=!this.likesVote,this.likesCount=this.likesVote?this.likesCount+1:Math.max(this.likesCount-1,0);var e={req:"vote",type:"assignment",object_id:this._attr.assignment_id,user_action:"like"};(0,u.SC)("likes",{data:e,method:"POST"})}},{key:"toggleBookmark",value:function(){this.bookmarked=!this.bookmarked;var e={type:"assignment",id:this._attr.assignment_id,delete:this.bookmarked?"0":"1"};(0,u.SC)("bookmarks",{data:e,method:"POST"})}},{key:"title",get:function(){return this._attr.name||this._attr.assignment_name||this._attr.lesson_name}},{key:"type",get:function(){return"share"}},{key:"icon",get:function(){return"entity_share"}},{key:"iconTooltip",get:function(){return lng("content")}},{key:"completed",get:function(){return this._attr.completed}},{key:"skills",get:function(){return this._attr.skills}},{key:"notice",get:function(){return lng("click to start").caps()}},{key:"matchRate",get:function(){return this._attr.match_rate}},{key:"status",get:function(){return this._attr.completed?{text:lng("viewed"),color:l.g.colors.green}:{}}},{key:"link",get:function(){var e=this,t={launcher:"assignment",id:this._attr.assignment_id};return this.refLink&&(t.ref=this.refLink),"Text"!==this.attr("lesson_type")||this.attr("has_placeholders")||(0,h.N0)()?t.newTab=(0,g.S)(this._attr):t.onClick=function(t){t.preventDefault(),(0,d.vm)().openDialog("Launcher",e),(0,u.SC)("assignment/create_catalog_performance/".concat(e.attr("assignment_id")))},t}},{key:"color",get:function(){return l.g.colors.light_blue}},{key:"image",get:function(){return this._attr.assignment_image}},{key:"type_title",get:function(){return"File"===this._attr.type_title&&""===this._attr.lesson_file_type?"Link":this._attr.type_title}},{key:"category",get:function(){return this._attr.category_name}},{key:"description",get:function(){return{text:this._attr.lesson_description,isHtml:this._attr.descriptionIsHtml}}},{key:"cardNote",get:function(){return this.expired?{text:lng("expired at").caps()+": "+(0,m.GG)(this._attr.due_date,{time:!1}),icon:"clock",color:"negative"}:null}},{key:"expired",get:function(){return this._attr.due_date&&(0,m.CR)((0,m._3)(this._attr.due_date))}},{key:"commentsInfo",get:function(){return{count:parseInt(this._attr.comment_count)||0,connect:{type:"assignment",object_id:this._attr.assignment_id}}}},{key:"isAssignmentCommentsLock",get:function(){return this._attr.lock_assignment_comments}},{key:"maySeeCommentsTab",get:function(){var e,t;return Blsm.isFeatureEnabled("assignments_comments")&&((null===(e=this.commentsInfo)||void 0===e?void 0:e.count)>0||!this.isAssignmentCommentsLock)&&!this.statistics&&(null===(t=this.workspace)||void 0===t?void 0:t.group_id)}},{key:"mayDeleteComments",get:function(){var e,t,n;return(null===(e=this.workspace)||void 0===e?void 0:e.is_owner)||(null===(t=this.workspace)||void 0===t||null===(n=t.isGeneralManager)||void 0===n?void 0:n.call(t))}},{key:"mayToggleBookmark",get:function(){return this.isEnterprise}},{key:"mayLike",get:function(){return!(!O(C(y.prototype),"mayLike",this)||!this.isEnterprise)&&(0,b.DM)(this.likesCount)}},{key:"views",get:function(){return this._attr.view_count}},{key:"maySeeViews",get:function(){return this.isEnterprise}},{key:"is_waiting",get:function(){return this.completed?0:1}},{key:"lesson_id",get:function(){return this._attr.lesson_id}}])&&w(t.prototype,n),r&&w(t,r),y}(s.M),o=Z(r.prototype,"likesCount",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=Z(r.prototype,"likesVote",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=Z(r.prototype,"bookmarked",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},38246:function(e,t,n){"use strict";n.d(t,{j:function(){return y}});var r=n(22906),o=n(60409),i=n(71134),a=n(16920),l=n(40441);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(c,e);var t,n,r,s=f(c);function c(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),b(g(n=s.call(this,e.is_course?u(u({},e),{},{group_type:"Course"}):e)),"display",void 0),b(g(n),"qualificationRequirement",void 0),n.display=null==t?void 0:t.display,n.qualificationRequirement=null==t?void 0:t.qualificationRequirement,n.hide_type=Blsm.isFeatureEnabled("hide_group_types"),n}return t=c,(n=[{key:"onClick",value:function(){(0,l.p4)(this.link,!0)}},{key:"menu",value:function(){return"dashboard"===this.display?[{label:lng("grades report"),href:(0,l.p4)({report:"CourseGradesReport",params:{group:this.group_id}})},{label:lng("status report"),href:(0,l.p4)({report:"ReportGroupStatus",params:{group:this.group_id}})},{label:lng("instructors report"),href:(0,l.p4)({report:"ReportCoursesinstructors",params:{group:this.group_id}})},{label:lng("social report"),href:(0,l.p4)({report:"SocialReport",params:{group:this.group_id}})},{label:lng("meetings report"),href:(0,l.p4)({report:"meetings",params:{group:this.group_id}})},this._attr.is_course&&Blsm.isFeatureEnabled("course_monitoring")&&Blsm.user.isPowerManager&&{label:lng("course monitoring"),href:(0,l.p4)({report:"ReportCourseMonitoring",params:{group:this.group_id}})}]:[]}},{key:"calcStartTime",value:function(){return this._attr.start_time||this._attr.group_open_date}},{key:"calcEndTime",value:function(){return this._attr.end_time||this._attr.group_close_date}},{key:"type",get:function(){return"workspace"}},{key:"group_id",get:function(){return this._attr.group_id}},{key:"image",get:function(){return this._attr.group_image}},{key:"circledImage",get:function(){return this._attr.patient_photo}},{key:"title",get:function(){return this._attr.group_name}},{key:"type_title",get:function(){return Blsm.isFeatureEnabled("hide_group_types")?void 0:(0,o.p)(this._attr.group_type,this._attr.is_course,!1,this.qualificationRequirement,this._attr.optional)}},{key:"description",get:function(){return{text:this._attr.group_description,isHtml:!0}}},{key:"category",get:function(){return this._attr.classification_name||this._attr.patient_name}},{key:"users",get:function(){return this._attr.users}},{key:"countUsers",get:function(){return this._attr.count_users}},{key:"progress",get:function(){return this._attr.progress}},{key:"isManager",get:function(){return this._attr.is_manager}},{key:"subNote",get:function(){return this.qualificationRequirement&&this._attr.credit_on_completion?"".concat(lng("credits").caps(),": ").concat(this._attr.credit_on_completion):(0,i.v2)(this._attr.manager)}},{key:"matchRate",get:function(){return this._attr.match_rate}},{key:"groupAccess",get:function(){return this._attr.group_access}},{key:"link",get:function(){return this.qualificationRequirement&&!this._attr.in_group&&!this._attr.is_manager_of_group&&["register","public"].includes(this._attr.group_access)?{courseCatalog:!0,tab:"self",id:this.group_id}:this._attr.workspace_locked?void 0:{workspace:this.group_id}}},{key:"completed",get:function(){var e;return null===(e=this._attr.status)||void 0===e?void 0:e.completed}},{key:"gradeInfo",get:function(){var e,t;return null!==(e=this._attr.status)&&void 0!==e&&e.score?{label:lng("score").caps(),displayGrade:null===(t=this._attr.status)||void 0===t?void 0:t.score}:null}},{key:"notice",get:function(){var e;return this._attr.workspace_locked&&(e=this._attr.workspace_locked_reason),e}},{key:"statistics",get:function(){return this._attr.statistics?{scores:[{label:lng("opened tasks").caps(),val:this._attr.statistics.tasks_open,color:a.g.colors.positive,icon:"arrow_up"},{label:lng("in progress").caps(),val:this._attr.statistics.tasks_in_progress,color:a.g.colors.warning,icon:"arrow_down"},{label:lng("on hold").caps(),val:this._attr.statistics.tasks_on_hold,color:a.g.colors.dominant_main,icon:"poll"}],last:{label:lng("completed tasks").caps(),val:this._attr.statistics.tasks_closed,color:a.g.colors.negative,icon:"close"}}:null}},{key:"linkToolTip",get:function(){return!!this.link&&lng("go to the workspace").caps()}},{key:"icon",get:function(){switch(this._attr.group_type){case"Course":case"Course_template":return"entity_course";case"Group":return"entity_group";case"Qualification":return"entity_qualification";case"Workplan":return"entity_workplan";case"Ou":return"entity_org_unit"}return this.isExternal?"entity_external":""}},{key:"iconTooltip",get:function(){var e=this.isExternal?"course_external":this._attr.group_type;return(0,o.p)(e,this._attr.is_course)}}])&&p(t.prototype,n),r&&p(t,r),c}(r.yY)},76054:function(e,t,n){"use strict";n.d(t,{M:function(){return v}});var r,o,i,a,l=n(22906),s=n(27821),c=n(71134);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var v=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(u,e);var t,n,r,l=m(u);function u(e,t){var n,r,c,d;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=l.call(this,e),r=h(n),d=void 0,(c="workspace")in r?Object.defineProperty(r,c,{value:d,enumerable:!0,configurable:!0,writable:!0}):r[c]=d,p(h(n),"order",o,h(n)),p(h(n),"selected",i,h(n)),p(h(n),"unitId",a,h(n)),(0,s.makeObservable)(h(n)),n.workspace=null==t?void 0:t.workspace,n.master=null==t?void 0:t.master,n.order=n._attr.assignment_order,n.unitId=n._attr.learning_unit_id,n.hide_type=Blsm.isFeatureEnabled("hide_component_types"),n}return t=u,(n=[{key:"select",value:function(e){this.selected=!!e}},{key:"calcStartTime",value:function(){return this._attr.start_date||this._attr.start_time}},{key:"calcEndTime",value:function(){return this._attr.due_date||this._attr.end_time}},{key:"assignment_id",get:function(){return this._attr.assignment_id}},{key:"linkToolTip",get:function(){return!!this.link&&lng("start|verb").caps()}},{key:"category_id",get:function(){var e;return(null===(e=this._attr)||void 0===e?void 0:e.lesson_category_id)||this._attr.category_id}},{key:"mayLike",get:function(){return!!Blsm.isFeatureEnabled("assignments_ratings")&&(0,c.DM)(this.likesCount)}},{key:"maySeeCommentsTab",get:function(){return Blsm.isFeatureEnabled("assignments_comments")&&!this.statistics}}])&&d(t.prototype,n),r&&d(t,r),u}(l.yY),o=y(r.prototype,"order",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),i=y(r.prototype,"selected",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=y(r.prototype,"unitId",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),r)},24210:function(e,t,n){"use strict";n.d(t,{DW:function(){return Y},HE:function(){return te},I:function(){return ee},ip:function(){return K},q3:function(){return W}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w,O,k,x,S,j,C,P,Z,B=n(27821),T=n(98e3),E=n(71134),I=n(87363),A=n(28534),D=n(94576),R=n(22334),N=["onSaveSuccess","onValueChange"];function z(e){return function(e){if(Array.isArray(e))return J(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||G(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||G(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function q(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function X(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function V(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function H(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=G(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function G(e,t){if(e){if("string"==typeof e)return J(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?J(e,t):void 0}}function J(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var W=(0,I.createContext)(null),K="--delete--",Y=function(e){return!(!e||e===K)},Q=function e(t,n){if(n){var r,o=H(t.filter((function(e){return!!e})));try{for(o.s();!(r=o.n()).done;){var i=r.value;if("section"===i.type&&i.sid===n)return i;if(i.fields){var a=e(i.fields,n);if(a)return a}}}catch(e){o.e(e)}finally{o.f()}}},ee=(r=B.observable.shallow,o=B.observable.shallow,i=B.observable.shallow,a=B.action.bound,l=B.action.bound,s=B.action.bound,c=B.action.bound,u=B.action.bound,p=B.action.bound,d=B.action.bound,m=V((f=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};X(this,e),U(this,"isEnterprise",Blsm.checkMod(["","ENT"])),q(this,"ready",m,this),q(this,"rebuild",g,this),q(this,"error",h,this),q(this,"status",b,this),q(this,"progress",y,this),q(this,"createMode",v,this),q(this,"values",_,this),q(this,"errors",w,this),q(this,"_initialValues",O,this),U(this,"fieldNames",new Set),U(this,"fieldsByName",new Map),q(this,"title",k,this),q(this,"headExtra",x,this),q(this,"_windowTitle",S,this),q(this,"confirmButtonLabel",j,this),q(this,"_activeSection",C,this),U(this,"_fields",[]),U(this,"_fieldToValidate",[]),U(this,"_defaultSaveValues",{}),U(this,"_successButtons",[]),U(this,"onSaveSuccess",void 0),U(this,"successMessage",void 0),U(this,"saveAsJson",!1),U(this,"sendEmpty",!1),U(this,"validateOnChange",!1),U(this,"savePanel",!0),U(this,"onClose",null),U(this,"onValueChange",null),U(this,"params",{}),U(this,"FormComponent",null),q(this,"meta",P,this),U(this,"fieldObjectKeys",new Map),q(this,"extra_component",Z,this),U(this,"backFromDirty",(function(){return null}));var n=t.onSaveSuccess,r=t.onValueChange,o=F(t,N);(0,B.makeObservable)(this),this.onSaveSuccess=n,this.onValueChange=r,this.params=o}var t,n,r;return t=e,(n=[{key:"updateValue",value:function(e,t,n){var r,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(t){if(t.endsWith("[]")&&n){t=t.substr(0,t.length-2);var i=(0,B.get)(this.values,t)||[];i=i.filter((function(e){return e!==n})),e&&i.push(e),e=i}!this.sendEmpty&&""===e&&"checkbox"===(null===(r=this.getFieldByName(t))||void 0===r?void 0:r.type)||null==e||Array.isArray(e)&&!e.length?(0,B.remove)(this.values,t):(0,B.set)(this.values,t,e),o||(this.onValueChange&&this.onValueChange(t,e),this.validateOnChange&&this._validateField(t))}}},{key:"setExtraComponent",value:function(e){this.extra_component=e}},{key:"getValue",value:function(e,t){return e.endsWith("[]")&&t?(e=e.substr(0,e.length-2),((0,B.get)(this.values,e)||[]).includes(t)?t:void 0):this.values.get(e)}},{key:"setValues",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{clear:!1};t.clear&&this.values.clear();var n,r=H(this.fieldsByName.entries());try{for(r.s();!(n=r.n()).done;){var o=M(n.value,2),i=o[0],a=o[1],l=this.getValueByName(i,e);this._prepAndUpdateValue(i,l,a)}}catch(e){r.e(e)}finally{r.f()}}},{key:"pickValues",value:function(e){var t=this;return Object.assign.apply(Object,[{}].concat(z(e.map((function(e){return U({},e,t.values.get(e))})))))}},{key:"setActiveSection",value:function(e){this._activeSection=(null==e?void 0:e.sid)||null}},{key:"setActiveSectionById",value:function(e){this._activeSection=e||null}},{key:"ValidateSaveResponse",value:function(e){return!(e.error_msg||e.error)}},{key:"SaveFail",value:function(e){(0,A.Mj)(e.error_msg||e.error||e||lng("unknown error"))}},{key:"saveToUrl",value:function(e,t){var n=this;this.status="saving",this.progress=0,(0,T.SC)(e,{data:t,method:"POST",json:this.saveAsJson,onProgressUp:(0,B.action)((function(e,t){return n.progress=(0,E.NM)(100*e/t)})),onError:function(){n.progress=null,n.status=null}},(0,B.action)((function(e){n.ValidateSaveResponse(e)?(n.setActiveSection(null),n.progress=null,n.status="success",n._initialValues.replace(n.values,{deep:!1}),n.successMessage&&(0,A.qV)(n.successMessage),n.onSaveSuccess?n.onSaveSuccess(e):n.SaveSuccess(e)):(n.status=null,n.SaveFail(e))})))}},{key:"validate",value:function(){var e=this;return new Promise((function(t){Promise.all(e._fieldToValidate.map((function(t){return e._validateField(null,t)}))).then((function(){t(0===e.errors.size)}))}))}},{key:"_setFieldError",value:function(e,t){"string"==typeof t&&t?(0,B.set)(this.errors,e,t):(0,B.remove)(this.errors,e)}},{key:"_validateField",value:function(e,t){var n=this;if(t=t||this._fieldToValidate.find((function(t){return t.name===e}))){if(e=t.name,t.visible&&!t.visible(this.values,t.name))return this._setFieldError(e);var r=(0,B.get)(this.values,t.name),o=void 0!==r&&(!(0,E.HD)(r)||""!==r.trim()&&r!==K);if(!o&&(!0===t.required||(0,E.g4)(t.required)))return this._setFieldError(e,lng("%s is required",t.label).caps());var i=null;if(o&&(0,E.Kn)(i=(0,E.g4)(t.validate,null,[r])))return this._setFieldError(e,i.error.caps());if(r&&t.remoteValidate&&(!t.mask||!r.includes("_"))){var a=t.remoteValidate,l=a.url,s=a.method,c=void 0===s?"GET":s,u=a.parseResult;return new Promise((function(e){(0,T.SC)(l,{method:c,data:U({},t.name,r)},(function(r){n._setFieldError(t.name,u?u(r):r),e()}))}))}this._setFieldError(e)}}},{key:"allFilled",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return t.reduce((function(t,n){return t&&(0,B.get)(e.values,n)}),!0)}},{key:"callSave",value:function(){var e=this;this.validate().then((function(t){return!0===t&&e.save(e.buildFinalValues())}))}},{key:"save",value:function(e){throw new Error("BaseForm:save abstract function not implemented")}},{key:"SaveSuccess",value:function(){throw new Error("BaseForm:SaveSuccess abstract function not implemented")}},{key:"buildFinalValues",value:function(){var e,t={},n=H(this.values.entries());try{for(n.s();!(e=n.n()).done;){var r=M(e.value,2),o=r[0],i=r[1],a=this.fieldsByName.get(o);if(!a||!(0,E.g4)(a.disable,null,[this.values])){var l=i;if(l instanceof Map){if(this.fieldObjectKeys.get(o)){var s=l;l=new Map;var c,u=H(s.entries());try{for(u.s();!(c=u.n()).done;){var p=M(c.value,2),d=p[0],f=p[1];l.set(d,(0,E.ei)(f,this.fieldObjectKeys.get(o)))}}catch(e){u.e(e)}finally{u.f()}}l=Object.fromEntries(l)}for(var m=this._parseName(o),g=m.length-1;g>=0;g--)0===g?t[m[g]]?$.extend(!0,t[m[g]],l):t[m[g]]=l:l=U({},m[g],l)}}}catch(e){n.e(e)}finally{n.f()}return Object.assign({},this._defaultSaveValues,t)}},{key:"_prepFields",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1?arguments[1]:void 0,r=arguments.length>2?arguments[2]:void 0,o=H((n=n||this._fields).filter((function(e){return!!e})));try{for(o.s();!(e=o.n()).done;){var i=e.value;if((!("insert"in i)||i.insert)&&(!("mod"in i)||Blsm.checkMod(i.mod)))if(i.fields)this._prepFields(t,i.fields,!0);else{var a=i.searchData,l=i.searchDataCacheFunc,s=i.type,c=i.options,u=i.name,p=i.required,d=i.validate,f=i.remoteValidate,m=i.value,g=i.emptyOption,h=i.objectKeys;if(a&&(i.searchData=(0,E.pR)(a,{hashFn:l})),"select"===s&&c&&!(0,E.Wl)(c)&&(i.options=(0,E.wd)(c)),u){var b,y,v,_,w,O;h&&this.fieldObjectKeys.set(u,h),this.fieldNames.add(u),this.fieldsByName.set(u,i),(p||d||f)&&this._fieldToValidate.push(i);var k=this.getValueByName(u,t)||m||("select"!==s||g?void 0:(null===(b=i.options)||void 0===b||null===(y=b[0])||void 0===y?void 0:y.val)||(null===(v=i.options)||void 0===v||null===(_=v[0])||void 0===_||null===(w=_.options)||void 0===w||null===(O=w[0])||void 0===O?void 0:O.val))||(this.sendEmpty?"":void 0);this._prepAndUpdateValue(u,k,i)}}}}catch(e){o.e(e)}finally{o.f()}r||this._initialValues.replace(this.values,{deep:!1})}},{key:"_prepAndUpdateValue",value:function(e,t,n){var r=n.type,o=n.valueIsMap,i=n.checkboxValue;null!=t&&("checkbox"!==r||0!==t&&"0"!==t)&&("tags"===r&&""!==t&&"function"==typeof t.split&&(t=t.split(",").map((function(e){return e.trim()}))),["date","date_time"].includes(r)&&(t=(0,R.GG)(t,{time:"date_time"===r})),o&&(t=new Map(Object.entries(t))),"checkbox"!==r||!0!==t||i||(t=1),this.updateValue(t,e,i,!0))}},{key:"_parseName",value:function(e){var t,n=e.split("["),r=[];for(var o in n){var i=(t=n[o]).indexOf("]");-1!==i&&(t=t.substring(0,i)),r.push(t)}return r}},{key:"getValueByName",value:function(e,t){for(var n=this._parseName(e),r=0;r<n.length&&t;r++)n[r]&&(t=t[n[r]]);return t}},{key:"_customFieldsPrep",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.columns,o=void 0===r?1:r,i=n.visible,a=n.disable,l=n.neverRequired;if(!t.length)return[];var s=function(e){switch(e){case"INT":return"number";case"VARCHAR":return"text";case"TEXT":return"richtext";default:return e.toLowerCase()}},c=t.map((function(n){var r=n.field_column,o=n.field_name,c=n.field_type,u=n.field_data,p=n.table,d=n.must_fill,f=s(c),m=u||{},g=m.dependency_field_id,h=m.values,b=m.autocomplete,y=function(){var n=t.find((function(e){return e.field_id===g}));return e.values.get(null==n?void 0:n.field_column)};return e._defaultSaveValues[r]="",(0,E.v7)({type:f,name:r,label:o,maxLength:"text"===f?255:void 0,disable:a,options:"select"===f?function(){return Object.entries(h).filter((function(e){var t=M(e,2),n=(t[0],t[1]);return!0===n||n.includes(y())})).map((function(e){var t=M(e,1)[0];return{val:t,label:t}}))}:void 0,emptyOption:"select"===f||void 0,required:!l&&d?!g||function(){return!!y}:void 0,suggest:b?{table:p}:void 0,visible:g?y:i},(function(e){return void 0!==e}))}));if(o>=2){var u=function(e,t){return Array(Math.ceil(e.length/t)).fill().map((function(e,n){return n*t})).map((function(n){return e.slice(n,n+t)}))};return u(c,o).map((function(e){return{type:"row_set",fields:e}}))}return c}},{key:"_fieldMask",value:function(e,t){var n=this,r=t[e.name];r&&(e.mask="brazil_cpf"===r?"999.999.999-99":"israel_id"===r?"999999999":r,"brazil_cpf"===r?e.validate=function(){var t=(0,B.get)(n.values,e.name);return!(!t.includes("_")&&!(0,D.pM)(t))||{error:lng("CPF is invalid")}}:"israel_id"===r&&(e.validate=function(){return!(!(0,B.get)(n.values,e.name).includes("_")&&!(0,D.wQ)((0,B.get)(n.values,e.name)))||{error:lng("identity number is invalid").caps()}}))}},{key:"setOnClose",value:function(e){this.onClose=e}},{key:"getFieldByName",value:function(e){return te(this._fields,(function(t){return(null==t?void 0:t.name)===e}))}},{key:"getFieldById",value:function(e){return te(this._fields,(function(t){return(null==t?void 0:t.id)===e}))}},{key:"fields",get:function(){return this._fields.filter((function(e){return!!e}))}},{key:"fieldsColumns",get:function(){return this.fields.reduce((function(e,t){var n=t.column||0;return e[n]||(e[n]=[]),e[n].push(t),e}),[]).filter((function(e){return!!e}))}},{key:"successButtons",get:function(){return this._successButtons.filter((function(e){return!!e}))}},{key:"activeSection",get:function(){var e,t,n=Q(this._fields,this._activeSection);return n||"section"===(null===(e=n=this._fields[0])||void 0===e||null===(t=e.fields)||void 0===t?void 0:t[0].type)&&(n=n.fields[0]),n}},{key:"windowTitle",get:function(){return this._windowTitle||this.title}},{key:"dirty",get:function(){return(0,E.SZ)(this.values.toJSON())!==(0,E.SZ)(this._initialValues.toJSON())||this.customDirty}},{key:"alertBeforeClose",get:function(){return!1}}])&&L(t.prototype,n),r&&L(t,r),e}()).prototype,"ready",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=V(f.prototype,"rebuild",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=V(f.prototype,"error",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=V(f.prototype,"status",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=V(f.prototype,"progress",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=V(f.prototype,"createMode",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_=V(f.prototype,"values",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),w=V(f.prototype,"errors",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),O=V(f.prototype,"_initialValues",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),k=V(f.prototype,"title",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=V(f.prototype,"headExtra",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=V(f.prototype,"_windowTitle",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),j=V(f.prototype,"confirmButtonLabel",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return lng("save").caps()}}),C=V(f.prototype,"_activeSection",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=V(f.prototype,"meta",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Z=V(f.prototype,"extra_component",[B.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),V(f.prototype,"updateValue",[a],Object.getOwnPropertyDescriptor(f.prototype,"updateValue"),f.prototype),V(f.prototype,"setExtraComponent",[l],Object.getOwnPropertyDescriptor(f.prototype,"setExtraComponent"),f.prototype),V(f.prototype,"setValues",[B.action],Object.getOwnPropertyDescriptor(f.prototype,"setValues"),f.prototype),V(f.prototype,"fieldsColumns",[B.computed],Object.getOwnPropertyDescriptor(f.prototype,"fieldsColumns"),f.prototype),V(f.prototype,"setActiveSection",[s],Object.getOwnPropertyDescriptor(f.prototype,"setActiveSection"),f.prototype),V(f.prototype,"setActiveSectionById",[c],Object.getOwnPropertyDescriptor(f.prototype,"setActiveSectionById"),f.prototype),V(f.prototype,"activeSection",[B.computed],Object.getOwnPropertyDescriptor(f.prototype,"activeSection"),f.prototype),V(f.prototype,"windowTitle",[B.computed],Object.getOwnPropertyDescriptor(f.prototype,"windowTitle"),f.prototype),V(f.prototype,"SaveFail",[u],Object.getOwnPropertyDescriptor(f.prototype,"SaveFail"),f.prototype),V(f.prototype,"saveToUrl",[p],Object.getOwnPropertyDescriptor(f.prototype,"saveToUrl"),f.prototype),V(f.prototype,"validate",[B.action],Object.getOwnPropertyDescriptor(f.prototype,"validate"),f.prototype),V(f.prototype,"_setFieldError",[B.action],Object.getOwnPropertyDescriptor(f.prototype,"_setFieldError"),f.prototype),V(f.prototype,"callSave",[d],Object.getOwnPropertyDescriptor(f.prototype,"callSave"),f.prototype),V(f.prototype,"dirty",[B.computed],Object.getOwnPropertyDescriptor(f.prototype,"dirty"),f.prototype),V(f.prototype,"alertBeforeClose",[B.computed],Object.getOwnPropertyDescriptor(f.prototype,"alertBeforeClose"),f.prototype),f),te=function(e,t,n){return(0,E.oH)(e,(function(e){return!("insert"in e&&!e.insert)&&t(e)}),n,(function(e){return Array.isArray(e)||(0,E.Kn)(e)&&e.type}))}},27073:function(e,t,n){"use strict";n.d(t,{Z:function(){return B}});var r,o,i=n(98e3),a=n(24210),l=n(71134),s=n(27821);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return g(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||f(e,t)||d()}function p(e){return g(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||d()}function d(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){if(Array.isArray(e))return e}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var x,S,j,C,P,Z,B=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(n,e);var t=v(n);function n(e){var r,i,a,l,s,c=e.route,u=e.nav;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),k(w(r=t.call(this)),"nav",null),k(w(r),"route",null),k(w(r),"fetchUrl",null),k(w(r),"saveUrl",null),k(w(r),"backToButton",null),k(w(r),"expandAndSearchSections",!0),i=w(r),a="savePanelExtraButtons",l=o,s=w(r),l&&Object.defineProperty(i,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0}),r.nav=u,r.route=c,r}return b(n,[{key:"updateFormRoute",value:function(){return!1}},{key:"defaultUpdateFormRoute",value:function(e,t){var n,r,o=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=p(e),a=i[0],s=i.slice(1);if(o){var c=u(s,2);n=c[0],r=c[1]}else{var d=u(s,1);r=d[0]}if(t===a&&(!o||(0,l.SZ)(this.route[0]||"")===(0,l.SZ)(n||"")))return this.route=s,this._activeSection=r,!0}}],[{key:"matchForm",value:function(){return!1}}]),b(n,[{key:"fetch",value:function(){var e=this;if(!this.fetchUrl||!this._acceptDataFromServer)throw new Error("fetchUrl or _acceptDataFromServer are missing");(0,i.SC)(this.fetchUrl,{},(function(t){e.serverResponse=t,e._acceptDataFromServer(t)}))}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,e)}},{key:"_acceptDataFromServer",value:function(){throw new Error("BaseForm:_acceptDataFromServer abstract function not implemented")}}]),n}(a.I),x=r.prototype,S="savePanelExtraButtons",j=[s.observable],C={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}},Z={},Object.keys(C).forEach((function(e){Z[e]=C[e]})),Z.enumerable=!!Z.enumerable,Z.configurable=!!Z.configurable,("value"in Z||Z.initializer)&&(Z.writable=!0),Z=j.slice().reverse().reduce((function(e,t){return t(x,S,e)||e}),Z),P&&void 0!==Z.initializer&&(Z.value=Z.initializer?Z.initializer.call(P):void 0,Z.initializer=void 0),void 0===Z.initializer&&(Object.defineProperty(x,S,Z),Z=null),o=Z,r)},93522:function(e,t,n){"use strict";n.d(t,{m:function(){return V},z:function(){return L}});var r,o=n(27073),i=n(27821),a=n(23838),l=n(16920),s=n(66975),c=n(15560),u=n(71134),p=n(98e3),d=n(96504),f=n(57697),m=n(40441),g=n(82247),h=n(35944);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return j(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||x(e,t)||k()}function O(e){return j(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||x(e)||k()}function k(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function x(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e){if(Array.isArray(e))return e}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=A(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),e}function B(e,t){return(B=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function T(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=A(e);if(t){var o=A(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return E(this,n)}}function E(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?I(e):t}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e){return(A=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var D,R,N,z,M,F,q="challenge",X={name:"vvfcxc",styles:"display:flex;justify-content:center;margin-top:-50px;margin-bottom:60px;.pentagon{transform:scale(1.8);}"},L=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&B(e,t)}(n,e);var t=T(n);function n(e){var r,o=e.route,a=e.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,{route:o,nav:a}),(0,i.makeObservable)(I(r));var l=w(o,2),s=l[0],c=l[1];return r._activeSection=c,r.params=s,r._id=(0,u.B5)(s)?parseInt(s):0,r.createMode=!r._id,r._id?(r.fetchUrl="gamification/load_badge/".concat(r._id),r.saveUrl="gamification/save_badge/".concat(r._id)):(r.fetchUrl="gamification/load_badge/",r.saveUrl="gamification/save_badge/"),r.successMessage=lng("challenge saved"),r.backToButton={label:lng("back to %s|back to some page",lng("challenges")).caps(),onClick:function(){return(0,m.p4)({list:"challenges"},!0)}},r.fetch(),r}return Z(n,[{key:"updateFormRoute",value:function(e){return this.defaultUpdateFormRoute(e,q)}}],[{key:"matchForm",value:function(e,t){var r=t.nav,o=O(e),i=o[0],a=o.slice(1);if(i===q)return new n({route:a,nav:r})}}]),Z(n,[{key:"setActiveSection",value:function(e){this.nav([q,this.route[0],null==e?void 0:e.sid],{replace:!0})}},{key:"_acceptDataFromServer",value:function(e){var t;if(this.initialValues=e,this.type=e.badge_type||(null===(t=this.params)||void 0===t?void 0:t.type),!this.type)return(0,a.vm)().openDialog("TypeSelector",U(this.params,this.type),{onClose:function(e){return e(),history.back()},noState:!0});if(e.badge_notify_custom&&this.values.set("badge_notify",1),this._windowTitle=this.createMode?lng("new challenge"):lng("edit %s",e.badge_name),this.title=this.createMode?lng("new challenge"):lng("edit challenge"),e.notifications){for(var n=new Map,r=0,o=Object.entries(e.notifications);r<o.length;r++){var i=w(o[r],2),l=i[0],s=i[1];n.set(l,s)}this.initialValues.notifications=n}this.initialValues.color||(this.initialValues.color=(0,u.p)()),this.initialValues.icon||(this.initialValues.icon=G[Math.floor(Math.random()*G.length)]),this.initialValues.badge_access||(this.initialValues.badge_access="self"),this.initialValues.badge_time_frame||(this.initialValues.badge_time_frame=4),this.initialValues.badge_due_date||(this.initialValues.badge_due_date=moment().add(4,"weeks")),this.buildFields(),this._prepFields(this.initialValues),this.ready=!0}},{key:"buildFields",value:function(){var e,t,n=this,r={challenge_due_date:{label:lng("reminder before due date"),message:!0,sms:!0,opr:"-"}},o=function(){return{user_lng:lng("the performer"),role_settings:!1,targetFieldsOptions:["user"],target_preselect:"user",due_date:n.values.get("badge_due_date")}},i=[{val:4,label:lng("%s weeks",4)},{val:3,label:lng("%s weeks",3)},{val:2,label:lng("%s weeks",2)},{val:1,label:lng("1 week")},{val:"",label:lng("no limit")}],a=[{val:"self",label:lng("users join independently").caps(),color:l.g.colors.blossom},{val:"auto",label:lng("automatic").caps(),color:l.g.colors.dominant_main}];this._fields=[{type:"section",sid:"details",title:lng("details"),fields:[{type:"component",node:(0,h.tZ)("div",{style:{fontSize:"1.3em",fontWeight:"600",textAlign:"center"},children:(0,h.tZ)("span",{css:l.g.classes.content_type_style,children:V[this.type].caps()})})},{type:"hidden",name:"badge_type",value:this.type},{type:"text",name:"badge_name",label:lng("name"),required:!0,maxLength:200},{type:"textarea",name:"badge_description",label:lng("description")},{type:"color",name:"color",label:lng("color"),random:!0},{type:"component",name:"icon",Render:H,props:{color:function(){return n.values.get("color")||n.initialValues.color}}}]},{type:"section",sid:"conditions",title:lng("conditions"),fields:[{type:"single_item",name:"badge_conditions[ids]",required:!0,label:"score_assignment"===this.type?lng("select assignment"):"score_workspace"===this.type?lng("select workspace"):lng("select course"),insert:["score_assignment","score_workspace","action_enroll"].includes(this.type),searchData:function(e,t){return"score_workspace"===n.type?(0,p.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,types:["group","qualification"],term:e.term,id:e.ids||""}},t):"score_assignment"===n.type?(0,p.SC)("assignment/search_owned",{data:{type:["lesson","task","master"],managerun:0,term:e.term,id:e.ids,show_all:1}},t):"action_enroll"===n.type?(0,p.SC)("groups/autocomplete",{data:{req:"AutoComplete",show_all:1,course:1,types:["Group","Course_template"],term:e.term,id:e.ids||""}},t):void 0}},{type:"multiple_items",name:"badge_conditions[ids]",label:lng("select content"),insert:["action_view_content"].includes(this.type),searchData:function(e,t){if("action_view_content"===n.type)return(0,p.SC)("assignment/search_owned",{data:{type:["catalog"],managerun:0,term:e.term,id:e.ids,show_all:1}},t)}},{type:"number",name:"badge_conditions[req_score]",label:lng("required score"),insert:["score_assignment","score_workspace"].includes(this.type),required:!0},{type:"number",name:"badge_conditions[amount]",label:lng("amount"),insert:["social_like","social_comment","social_discussion","social_join_challenge","points"].includes(this.type),required:!0},{type:"section",title:lng("reward|noun"),fields:[{type:"number",name:"points",label:lng("points"),min:1,max:100,required:!0,value:1}]}]},{type:"section",sid:"timing",title:lng("timing"),fields:[{type:"select",name:"badge_time_frame",label:lng("time frame"),options:i,onValueChange:function(e){return n.updateValue(""===e?null:moment().add(e,"weeks").format(Blsm.prm.date_moment_format),"badge_due_date")}},{type:"date",name:"badge_due_date",label:lng("current due date")},{type:"checkbox",name:"badge_repeat",label:lng("repeat each time after due date")}]},{type:"section",sid:"customNotifications",title:lng("notifications"),fields:[{type:"component",name:"notifications",Render:g.oS,props:{notificationsTypes:r,options:o}},{type:"component",name:"notifications",Render:g.oQ,props:{notificationsTypes:r,options:o}}]},{type:"section",sid:"access",title:lng("access|noun"),fields:[{type:"switcher",name:"badge_access",label:lng("user access:")+" ",options:a,onValueChange:function(e){return"self"===e&&n.values.set("badge_notify",null).set("badge_notify_custom",null)}},{type:"component",name:"badge_enrollment_rules",Render:d._,props:{object_type:"users",checkRules:(null===(e=this.initialValues.autoenrollment_rules)||void 0===e||null===(t=e.rules)||void 0===t?void 0:t.length)>0,checkRulesData:{object_id:this._id,req_type:"badge_enrollment_rules",domain_id:this.domain_id}}},{type:"checkbox",name:"badge_archived",label:lng("archive|verb")},{type:"checkbox",name:"badge_notify",label:lng("send notification"),visible:function(){return"auto"===n.values.get("badge_access")},onValueChange:function(){return n.values.set("badge_notify_custom",null)}},{type:"single_item",name:"badge_notify_custom",label:lng("send notification"),searchData:function(e,t){return(0,p.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)},visible:function(){return n.values.get("badge_notify")&&"auto"===n.values.get("badge_access")},mod:["","ENT"]}]}],this._successButtons=[this.createMode&&{label:lng("create another").caps(),onClick:function(){return n.nav(null,{reload:!0})}},{label:lng("continue editing").caps(),onClick:function(){return n.createMode?n.nav([q,n._newId]):n.status=null}}]}},{key:"ValidateSaveResponse",value:function(e){return!!C(A(n.prototype),"ValidateSaveResponse",this).call(this,e)&&(0,u.B5)(e.badge_id)}},{key:"SaveSuccess",value:function(e){this._newId=e.badge_id}},{key:"preview",get:function(){var e=X;return{custom:(0,h.tZ)("div",{css:e,children:(0,h.tZ)(f.Pp,{icon:this.values.get("icon"),color:this.values.get("color")})})}}}]),n}(o.Z),D=r.prototype,R="preview",N=[i.computed],z=Object.getOwnPropertyDescriptor(r.prototype,"preview"),M=r.prototype,F={},Object.keys(z).forEach((function(e){F[e]=z[e]})),F.enumerable=!!F.enumerable,F.configurable=!!F.configurable,("value"in F||F.initializer)&&(F.writable=!0),F=N.slice().reverse().reduce((function(e,t){return t(D,R,e)||e}),F),M&&void 0!==F.initializer&&(F.value=F.initializer?F.initializer.call(M):void 0,F.initializer=void 0),void 0===F.initializer&&(Object.defineProperty(D,R,F),F=null),r),U=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[{topic:"score",type:"score_assignment",text:lng("complete the challenge by getting a certain score on an assignment").caps(),check:Blsm.isFeatureEnabled("assignments")},{topic:"score",type:"score_workspace",text:lng("complete the challenge by getting a certain score on a workspace").caps(),check:!0},{topic:"social",type:"social_like",text:lng("complete the challenge by getting likes on contents you uploaded").caps(),check:!0},{topic:"social",type:"social_comment",text:lng("complete the challenge by writing comments in discussions/assignments etc").caps(),check:!0},{topic:"social",type:"social_discussion",text:lng("complete the challenge by starting new discussions").caps(),check:!0},{topic:"social",type:"social_join_challenge",text:lng("complete the challenge by joining more challenges").caps(),check:!0},{topic:"action",type:"action_enroll",text:lng("complete the challenge by self-registering for a specific course in the catalog").caps(),check:!0},{topic:"action",type:"action_view_content",text:lng("complete the challenge by reading the contents").caps(),check:!0},{topic:"points",type:"points",text:lng("complete the challenge by earning points for completing other challenges").caps(),check:!0}];(n=n.filter((function(e){return!!e.check&&(0===t.length||t.includes(e.type))}))).forEach((function(t){t.typeLabel=V[t.type],t.action={edit:"challenge",params:v(v({},e),{},{type:t.type})}}));var r={score:{label:lng("score"),color:l.g.colors.set[1]},action:{label:lng("action"),color:l.g.colors.set[2]},social:{label:lng("social"),color:l.g.colors.set[6]},points:{label:lng("points"),color:l.g.colors.set[10]}};return{types:n,topics:r,title:lng("create challenge")}},V={score_assignment:lng("assignment score"),score_workspace:lng("workspace score"),social_like:lng("get likes"),social_comment:lng("write a comment"),social_discussion:lng("create a discussion"),social_join_challenge:lng("join a challenge"),action_enroll:lng("enroll in a course"),action_view_content:lng("view content"),points:lng("accumulate points")},H=(0,c.observer)((function(e){var t=e.color,n=e.value,r=e.onChange;return(0,h.tZ)("div",{style:{width:"400px",fontSize:"2em"},children:G.map((function(e){return(0,h.tZ)(s.JO,{icon:e,buttonLike:!0,color:e===n?"":t(),onClick:function(){return r(e)}},e)}))})})),G="airplane,ambulance,badge,bananas,beer,bicycle,branch,bulb,bus,cake,car,cherries,chilis,clapper,fire,flag,flower,globe,good-mood,graduation,ice-crystal,juice,leaf,lifting,lightning,line-chart,love,medal,mobile-phone,money-bag,moon,old-phone,open-book,rain,rising-graph,running,shield,ski,strech,sun,swimming,target,taxi,tea-cup,traffic-light,train,tree,trophy,video-camera,wine-glasses,wrench-screw".split(",").map((function(e){return"badge-"+e}))},62945:function(e,t,n){"use strict";n.d(t,{J:function(){return m}});var r=n(24210),o=n(98e3),i=n(71134);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,a=c(u);function u(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),f(p(t=a.call(this,e)),"group_id",void 0),f(p(t),"group_type",void 0),t.group_id=e.data.group_id,t.group_type=e.data.group_type,t.saveAsJson=!0,t.title=lng("add owners").caps(),t.successMessage=lng("owners successfully added"),t._fields=[{type:"multiple_items",name:"users",label:lng("select users"),poster:!0,theme:"bright",required:!0,searchData:function(e,n){var r=e.term;(0,o.SC)("users/search_owners",{data:{group_type:t.group_type,cross_domain:1,term:r,exclude:t.values.get("users")||[]},method:"POST"},n)},searchDataCacheFunc:function(e){return(0,i.SZ)(Object.assign({ids:t.values.get("ids")||[]},e))}}],t._prepFields(),t.ready=!0,t}return t=u,(n=[{key:"save",value:function(e){this.saveToUrl("users/add_owners_to_groups",Object.assign({group_id:this.group_id},e))}}])&&l(t.prototype,n),r&&l(t,r),u}(r.I)},64454:function(e,t,n){"use strict";n.d(t,{C:function(){return k},U:function(){return O}});var r=n(24210),o=n(98e3),i=n(71134),a=n(16920),l=n(66975),s=n(98071),c=n(35944);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t,n){return t&&f(e.prototype,t),n&&f(e,n),e}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){g(n,e);var t=b(n);function n(e){var r,u,f,m,g,h,b,y,_,O,k;d(this,n),w(v(k=t.call(this,e)),"group_id",void 0),w(v(k),"manager_ids",void 0),w(v(k),"edit_mode",void 0);var x=e.data,S=void 0===x?{}:x;k.group_id=S.group_id,k.manager_ids=null!==(r=S.managers)&&void 0!==r&&r.length?null===(u=S.managers)||void 0===u?void 0:u.map((function(e){return e.manager&&e.user_id})).filter((function(e){return e})):S.managers_ids,k.edit_mode=(null===(f=S.managers)||void 0===f?void 0:f.length)&&S.group_id,k.saveAsJson=!0;var j=[{optgroup:!0,label:lng("custom").caps(),options:[{val:"none",label:lng("none").caps()},{val:"all",label:lng("all").caps()}]}],C=new Map((null===(m=S.manager_permission_types)||void 0===m?void 0:m.map((function(e){return[e.id,e]})))||[]);if(S.manager_permission_types){var P=S.manager_permission_types.map((function(e){return{val:e.id,label:e.name}}));j.push({optgroup:!0,label:lng("manager type").caps(),options:P})}k.title=k.edit_mode?lng("edit permissions").caps():lng("add managers").caps(),k._fields=[{type:"multiple_items",name:"groups",label:lng("select workspaces"),theme:"bright",insert:!k.group_id,searchData:function(e,t){var n=e.ids,r=e.term;(0,o.SC)("ajax/GroupsAjax.class.php?req=AutoComplete&catalog=1&",{data:{req:"AutoComplete",catalog:1,types:"change_ou"===S.action?["Ou"]:["Group","Qualification","Workplan"],term:r||"",id:n||""}},t)}},{type:"multiple_items",name:"users",label:k.group_id?lng("select new managers"):lng("selected users"),poster:!0,theme:"bright",readOnly:!k.group_id||k.edit_mode,insert:!k.edit_mode,searchData:function(e,t){var n=e.term,r=e.ids;(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:n,id:r||""}},t)}},{type:"checkbox",name:"main_manager",label:lng("primary manager").caps(),visible:function(){var e,t;return 1===(null===(e=k.values.get("users"))||void 0===e?void 0:e.length)||1===(null===(t=k.manager_ids)||void 0===t?void 0:t.length)}},{type:"select",name:"mpt_id",label:lng("permission type").caps(),options:j,onValueChange:function(e){var t=(0,i.B5)(e)?C.get(e):"all"===e?{perm_assignments:1,perm_meetings:1,perm_content:1,perm_config:1,perm_evaluation:1}:{};k.updateValue(t.perm_assignments||"0","perm_assignments"),k.updateValue(t.perm_meetings||"0","perm_meetings"),k.updateValue(t.perm_content||"0","perm_content"),k.updateValue(t.perm_config||"0","perm_config"),Blsm.isFeatureEnabled("evaluation")&&k.updateValue(t.perm_evaluation||"0","perm_evaluation")},value:S.default_manager_setting},{type:"section",title:lng("permissions"),titleSmall:!0,fields:[{type:"switcher",name:"perm_assignments",value:(null===(g=S.default_permissions)||void 0===g?void 0:g.perm_assignments)||"0",label:lng("assignments"),onValueChange:function(){return k.updateValue("none","mpt_id")},options:[{val:"0",label:lng("none"),color:a.g.colors.text_placeholder},{val:"2",label:lng("set weights"),color:a.g.colors.warning},{val:"1",label:lng("create"),color:a.g.colors.dominant_main}]},{type:"switcher",name:"perm_meetings",value:(null===(h=S.default_permissions)||void 0===h?void 0:h.perm_meetings)||"0",label:lng("meetings"),onValueChange:function(){return k.updateValue("none","mpt_id")},options:[{val:"0",label:lng("none"),color:a.g.colors.text_placeholder},{val:"3",label:lng("set attendance"),color:a.g.colors.warning},{val:"2",label:lng("edit"),color:a.g.colors.positive},{val:"1",label:lng("create"),color:a.g.colors.dominant_main}]},{type:"switcher",name:"perm_content",value:(null===(b=S.default_permissions)||void 0===b?void 0:b.perm_content)||"0",onValueChange:function(){return k.updateValue("none","mpt_id")},label:lng("content"),options:[{val:"0",label:lng("none"),color:a.g.colors.text_placeholder},{val:"1",label:lng("share"),color:a.g.colors.dominant_main}]},{type:"switcher",name:"perm_evaluation",value:(null===(y=S.default_permissions)||void 0===y?void 0:y.perm_evaluation)||"0",onValueChange:function(){return k.updateValue("none","mpt_id")},label:lng("evaluations"),insert:Blsm.isFeatureEnabled("evaluation"),options:[{val:"0",label:lng("none"),color:a.g.colors.text_placeholder},{val:"1",label:lng("view"),color:a.g.colors.dominant_main}]},{type:"row_set",fields:[{type:"switcher",name:"perm_config",value:(null===(_=S.default_permissions)||void 0===_?void 0:_.perm_config)||"0",onValueChange:function(){return k.updateValue("none","mpt_id")},label:lng("general"),options:[{val:"0",label:lng("none"),color:a.g.colors.text_placeholder},{val:"1",label:lng("configure"),color:a.g.colors.dominant_main}]},{type:"component",node:(0,c.tZ)(l.JO,{icon:"menu_info",toolTip:(0,s.uj)()})}]}]}];var Z={users:k.manager_ids};return 1===(null===(O=S.managers)||void 0===O?void 0:O.length)&&(Z=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},S.managers[0])),k._prepFields(Z),k.ready=!0,k}return m(n,[{key:"save",value:function(e){this.edit_mode?this.saveToUrl("users/set_manager_permissions",Object.assign({group_id:this.group_id,users:this.manager_ids},e)):(this.group_id&&(e.groups=Array.isArray(this.group_id)?this.group_id:[this.group_id]),this.saveToUrl("users/add_managers_to_groups",e))}}]),n}(r.I),k=function(e){g(n,e);var t=b(n);function n(e){var r;d(this,n),w(v(r=t.call(this,e)),"group_id",void 0);var i=e.data,a=void 0===i?{}:i;r.group_id=a.group_id,r.title=lng("add role members").caps(),r.saveAsJson=!0,r._fields=[{type:"multiple_items",name:"users",label:lng("select users"),poster:!0,theme:"bright",searchData:function(e,t){var n=e.term,r=e.ids;(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:n,id:r||""}},t)}}];var l={users:r.manager_ids};return r._prepFields(l),r.ready=!0,r}return m(n,[{key:"save",value:function(e){this.group_id&&(e.groups=Array.isArray(this.group_id)?this.group_id:[this.group_id]),this.saveToUrl("users/add_managers_to_groups",e)}}]),n}(r.I)},1010:function(e,t,n){"use strict";n.d(t,{l:function(){return d}});var r=n(24210),o=n(98e3),i=n(71134);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,a=c(u);function u(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),n=a.call(this,e);var r=e.data,l=void 0===r?{}:r;return n.group_id=l.group_id,n.title=n.group_id?lng("add members").caps():"change_ou"===l.action?lng("change users org unit").caps():lng("add selected users to workspace"),n._fields=[{type:"change_ou"===l.action?"single_item":"multiple_items",name:"groups",label:"change_ou"===l.action?lng("select org unit"):lng("select workspaces"),theme:"bright",insert:!n.group_id&&l.action,searchData:function(e,t){var n=e.ids,r=e.term;(0,o.SC)("ajax/GroupsAjax.class.php?req=AutoComplete&catalog=1&",{data:{req:"AutoComplete",catalog:1,types:"change_ou"===l.action?["Ou"]:["Group","Qualification","Workplan"],term:r||"",id:n||""}},t)}},{type:"multiple_items",name:"users",label:l.action?lng("selected users"):lng("select new members"),poster:!0,theme:"bright",readOnly:l.action,searchData:function(e,t){var n=e.ids,r=e.term;(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:r||"",id:n||"",ou:1,job:1}},t)}},{type:"checkbox",name:"send_joining_notification",label:lng('send "joined workspace" notification'),insert:n.group_id},{type:"checkbox",name:"start_sequence",label:lng("start approval sequence"),insert:(0,i.B5)(l.sequence_id)},{type:"checkbox",name:"add_to_sub_qualifications",label:lng("add users to the required qualifications"),insert:"Qualification"===l.group_type},{type:"checkbox",name:"add_users_to_courses",label:lng("add users to courses and template instances"),value:null===(t=l.owner_options)||void 0===t?void 0:t.add_users_to_courses,insert:"Qualification"===l.group_type,helpKey:"@add_member/add_users_to_courses"},{type:"checkbox",name:"ignore_workspace_restrictions",label:lng("ignore workspace restrictions"),insert:l.is_owner}],n._prepFields(l),n.ready=!0,n}return t=u,(n=[{key:"save",value:function(e){this.saveToUrl("users/add_users_to_groups",Object.assign({groups:[this.group_id]},e))}}])&&l(t.prototype,n),r&&l(t,r),u}(r.I)},28904:function(e,t,n){"use strict";n.d(t,{q:function(){return f}});var r=n(24210),o=n(23838),i=n(9431);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(u,e);var t,n,r,a=c(u);function u(e){var t,n,r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),t=a.call(this,e),n=p(t),o=void 0,(r="portalInfo")in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.portalInfo=e.newPortalInfo,t.portalInfo.portal_active=t.portalInfo.portal_active?1:0,t.addPortalCallback=e.addPortalCallback;var l=(null==e?void 0:e.allowAnonymous)||!1;switch(t.portalInfo.portal_type){case i.Bu.APP:t.title=lng("create app page");break;case i.Bu.SUB:t.title=lng("create sub page");break;case i.Bu.DOMAIN:t.title=lng("create portal");break;case i.Bu.GROUP:t.title=lng("create portal for %s",t.portalInfo.portal_title);break;default:t.title=lng("create portal").caps()}return t._fields=[{type:"hidden",name:"portal_type"},{type:"hidden",name:"parent_id"},{type:"hidden",name:"portal_active"},{type:"hidden",name:"group_id"},{type:"text",name:"portal_title",label:lng("name"),required:!0,maxLength:500},{type:"row_set",insert:l,fields:[{type:"checkbox",name:"toggle_anonymous",label:i.rc[i.Bu.ANONYMOUS],onValueChange:function(e){return t.updateValue(e?i.Bu.ANONYMOUS:t.portalInfo.portal_type,"portal_type")},value:t.portalInfo.portal_type===i.Bu.ANONYMOUS}]}],t._prepFields(t.portalInfo),t.ready=!0,t}return t=u,(n=[{key:"save",value:function(e){delete e.toggle_anonymous,this.saveToUrl("portal/portal",Object.assign(e))}},{key:"SaveSuccess",value:function(e){var t;(0,o.vm)().closeDialog(),null!=e&&e.portal_id&&(null===(t=this.addPortalCallback)||void 0===t||t.call(this,e,null==e?void 0:e.portal_id))}}])&&l(t.prototype,n),r&&l(t,r),u}(r.I)},95761:function(e,t,n){"use strict";n.d(t,{ty:function(){return k},xY:function(){return T}});var r=n(24210),o=n(98e3),i=n(27821),a=n(15560),l=n(70917),s=n(87363),c=n(66975),u=n(16920),p=n(23838),d=n(37137),f=(n(57882),n(35944));function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t){return(y=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function v(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=O(e);if(t){var o=O(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _(this,n)}}function _(e,t){return!t||"object"!==m(t)&&"function"!=typeof t?w(e):t}function w(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function O(e){return(O=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&y(e,t)}(l,e);var t,n,r,a=v(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=a.call(this,e),(0,i.makeObservable)(w(t)),t.boarding=e.boarding,t.cancelText=!!t.boarding&&lng("maybe next time"),t.onSave=e.onSave,t.buildFields(e),t}return t=l,(n=[{key:"buildFields",value:function(e){var t=e.user_id;this._fields=[{type:"section",titleSmall:!0,title:lng("what skills you own or interests you?"),sid:"basic",fields:[{type:"multiple_items",name:"skills",label:lng("select skill"),showId:!1,valueIsMap:!0,objectKeys:["id","label","skill_level"],required:!0,searchData:function(e,t){(0,o.SC)("skills/autocomplete_skill",{data:{term:e.term||"",id:e.ids||"",exclude_owned:Blsm.user.id}},t)}}]},{type:"section",sid:"advanced",titleSmall:!0,title:lng("what is your level?"),fields:[{type:"component",name:"skills",Render:S},{type:"hidden",name:"user_id",value:t}]}],this.boarding&&(this._fields.unshift({type:"section",sid:"onBoardingFirst",fields:[{type:"component",node:(0,f.tZ)(j,{})}]}),this._fields.push({type:"section",sid:"onBoardingLast",fields:[{type:"component",node:(0,f.tZ)(C,{})}]})),this._prepFields({skills:this.skills}),this.ready=!0}},{key:"save",value:function(e){this.onSave(e,(function(){return(0,p.vm)().closeDialog()}))}}])&&b(t.prototype,n),r&&b(t,r),l}(r.I),x={name:"1bsvh0g",styles:"width:100%;>div{width:100%;display:flex;justify-content:space-between;margin:20px 0;.name{font-weight:600;display:flex;align-items:center;width:34%;}.skills{display:flex;justify-content:space-evenly;width:65%;}}"},S=(0,a.observer)((function(e){var t=e.value,n=e.onChange,r=t||new Map;return(0,f.tZ)("div",{css:x,children:Array.from(r.values()).map((function(e){return(0,f.tZ)(Z,{skill:e,onChange:function(){return n(r)}},e.id)}))})})),j=function(){return(0,f.BX)("div",{css:P,children:[(0,f.tZ)("div",{className:"onboarding-header",children:(0,f.tZ)("img",{src:"".concat(Blsm.prm.Mainref+Blsm.prm.ViewRef,"images/astronaut.svg"),alt:""})}),(0,f.BX)("div",{className:"bottom",children:[(0,f.tZ)("h1",{children:lng("meet your skills").caps()}),(0,f.tZ)("span",{children:lng("introducing new experience learning like never before").caps()})]})]})},C=function(){return(0,f.BX)("div",{css:P,children:[(0,f.tZ)("div",{className:"onboarding-header",children:(0,f.tZ)("img",{src:"".concat(Blsm.prm.Mainref+Blsm.prm.ViewRef,"images/group.svg"),alt:""})}),(0,f.BX)("div",{className:"bottom",children:[(0,f.BX)("h1",{children:[lng("great job!").caps()," ",lng("you have completed the onboarding process").caps()]}),(0,f.tZ)("span",{children:lng("we highly recommend you to set your weekly goals").caps()})]})]})},P={name:"8xk9cc",styles:">.onboarding-header{img{width:650px;}}.bottom{text-align:center;>h1{font-size:3rem;font-weight:600;}>span{font-size:1.4rem;}}"},Z=(0,a.observer)((function(e){var t=e.skill,n=e.onChange,r=g((0,s.useState)(t.skill_level||0),2),o=r[0],i=r[1],a=[1,2,3].map((function(e){return(0,d.r0)(e)})),l=function(e){i(e),t.skill_level=e,n(t)};return(0,f.BX)("div",{children:[(0,f.tZ)("div",{className:"name",children:t.label}),(0,f.tZ)("div",{className:"skills",children:a.map((function(e){return(0,f.tZ)("div",{children:(0,f.tZ)(T,{skillTag:e,selected:e.val===o,onSelect:l})},e.val)}))})]},t.id)})),B=function(e){return(0,l.iv)("border:1px solid ",u.g.colors.text_sec,";padding:5px 10px;border-radius:15px;&:hover{cursor:pointer;}&.active{border:1px solid ",e,";background:",e,";color:white;}","")},T=function(e){var t=e.skillTag,n=e.selected,r=e.onSelect,o=t.val,i=t.label,a=t.color,l=t.icon;return(0,f.BX)("div",{css:B(a),onClick:function(){return r(o)},className:n?"active":"",children:[(0,f.tZ)(c.JO,{icon:l}),"  ",i]})}},41750:function(e,t,n){"use strict";n.d(t,{L:function(){return j}});var r=n(24210),o=n(27821),i=n(98e3),a=n(15560),l=n(87363),s=n(70917),c=n(66975),u=n(23838),p=n(16920),d=n(71134),f=n(37659),m=n(35944);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||y(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e){return function(e){if(Array.isArray(e))return v(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||y(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(e){if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?v(e,t):void 0}}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function w(e,t){return(w=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function O(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=S(e);if(t){var o=S(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k(this,n)}}function k(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?x(e):t}function x(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S(e){return(S=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&w(e,t)}(l,e);var t,n,r,a=O(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),t=a.call(this,e),(0,o.makeObservable)(x(t)),t.values.set("new",!1),t.item=e.item,t.excludes=[],t.title=lng("add to").caps(),t.list=[],t.confirmButtonLabel=lng("add to playlist"),t.onItemSelect=function(e){var n=t.values.get("ids");if(n){var r=n.find((function(t){return t===e}));return t.values.set("ids",r?n.filter((function(t){return t!==e})):[e].concat(b(n)))}return t.values.set("ids",[e])},t.changeView=function(e){t.values.set("new",!e),t.title=!1===e?lng("add to").caps():lng("create new playlist").caps()},t.fetch(),t}return t=l,(n=[{key:"fetch",value:function(){var e=this;(0,i.SC)("channel/list_playlists",{data:{new:!0,item:this.item}},(function(t){e.list=t,t.forEach((function(t){return e.excludes.push(t.playlist_id)})),e.buildFields()}))}},{key:"buildFields",value:function(){var e=this,t=(0,s.iv)("margin-top:-1rem;width:100%;height:50px;display:flex;justify-content:start;align-items:center;border-left:0;border-right:0;border-top:1px solid ",p.g.colors.separator,";color:",p.g.colors.text_sec,";.Icon{",p.g.classes.margin_far("10px"),";color:",p.g.colors.dominant_main,";font-size:1.3rem;}&:hover{cursor:pointer;}","");this._fields=[{type:"hidden",value:this.item,name:"item_to_add"},{type:"multiple_items",name:"playlist_id",label:lng("search playlists"),theme:"bright",objectKeys:["playlist_id","playlist_name","channel_id"],buttons:[{Render:Z}],searchData:function(t,n){var r=(e.values.get("ids")||[]).concat(e.excludes);(0,i.SC)("channel/autocomplete_playlist",{data:{term:t.term||"",id:t.ids||"",exclude:r,exclude_item:e.item,active:!0}},n)}},{type:"component",name:"ids",Render:C,props:{items:this.list,onSelect:function(t){return e.onItemSelect(t)}}},{type:"component",node:(0,m.BX)("div",{css:t,onClick:function(){return e.changeView(e.values.get("new"))},children:[(0,m.tZ)(c.JO,{icon:"mark_plus"})," ",lng("create new playlist").caps()]}),visible:function(){return!1===e.values.get("new")}},{type:"text",name:"playlist_name",label:lng("new playlist name"),visible:function(){return!0===e.values.get("new")}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("channel/add_to_playlist",e)}},{key:"SaveSuccess",value:function(e){var t,n=e.ids,r=e.item,o=new f.m(r),i=(0,u.vm)().getStore("user",Blsm.user.user_id);null!=i&&null!==(t=i.channelStore)&&void 0!==t&&t._playlists&&n.forEach((function(e){i.channelStore._playlists.find((function(t){return parseInt(t.id)===parseInt(e)})).items.push(o)})),(0,u.vm)().closeDialog()}}])&&_(t.prototype,n),r&&_(t,r),l}(r.I),C=(0,a.observer)((function(e){var t=e.items,n=e.onSelect;return(0,m.BX)("div",{css:P,children:[(0,m.BX)("div",{className:"title",children:[lng("recent playlists").caps(),":"]}),(0,m.tZ)("div",{className:"playlist-items",children:t.map((function(e){return(0,m.tZ)(Z,{checkbox:!0,onSelect:n,item:e},e.playlist_id)}))})]})})),P=(0,s.iv)("padding:10px 0 0;.playlist-items{margin:5px;.playlist-item{text-align:center;display:flex;justify-content:space-between;padding:10px;margin:5px 0;border-radius:10px;border:1px solid transparent;&.selected,&:hover{background-color:",p.g.colors.dominant_main_shade,";color:",p.g.colors.dominant_main,";cursor:pointer;}}}",""),Z=(0,a.observer)((function(e){var t=e.item,n=e.onSelect,r=h((0,l.useState)(!1),2),o=r[0],i=r[1],a=t.playlist_id||t.id;return(0,m.tZ)("div",{className:(0,d.AK)("playlist-item",{selected:o}),onClick:function(){return n(a),i(!o)},children:t.playlist_name})}))},73718:function(e,t,n){"use strict";n.d(t,{Q:function(){return C},_:function(){return S}});var r=n(24210),o=n(343),i=n(75898),a=n(66975),l=n(40965),s=n(22334),c=n(71134),u=n(98e3),p=n(29180),d=n(85946),f=n(35519),m=n(35944);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(b,e);var t,n,r,g=_(b);function b(e){var t,n,r,h,y,v,_,w,k,S,P,Z,B,T;switch(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,b),x(O(T=g.call(this,e)),"action",""),x(O(T),"approval_request",[]),x(O(T),"decisionsFields",[]),x(O(T),"validateOnChange",!0),T.action=e.action,T.approval_request=e.approval_request,T.action){case"approve":T.title=lng("approve request").caps(),T.confirmButtonLabel=(0,m.BX)("span",{children:[(0,m.tZ)(a.JO,{icon:"like"})," ",lng("approve").caps()]}),T.setDecisionFields();break;case"reject":T.title=lng("reject request").caps(),T.confirmButtonLabel=(0,m.BX)("span",{children:[(0,m.tZ)(a.JO,{icon:"dislike"})," ",lng("reject").caps()]});break;case"back":T.title=lng("return request to previous approver").caps(),T.confirmButtonLabel=lng("return to previous").caps();break;case"waiting_list":T.title=lng("waiting list").caps(),T.confirmButtonLabel=lng("add to waiting list").caps();break;case"cancel_decision":T.title=lng("cancel decision").caps(),T.confirmButtonLabel=lng("cancel decision").caps()}var E,I=[];T.approval_request.scoring_criteria&&(null===(E=T.approval_request.scoring_criteria.criterias)||void 0===E||E.map((function(e,t){var n=T.approval_request.scoring_criteria.rows[t]-1,r=0;T.approval_request.scoring_criteria.rows.map((function(e){return r+=e-1})),I.push({type:"range",name:"scoring_criteria[".concat(t,"]"),label:e,max:n,onValueChange:function(){return T.setScore()}})})));var A=T.approval_request.target_data||{},D=T.approval_request.sequence_user_options||{},R=!T.approval_request.sequence_id||!(null==D||!D.allow_file_upload),N="RegExt"===T.approval_request.type,z="Reg"===T.approval_request.type,M=N&&!!D.weekly_hours,F=N&&!!D.decide_supplier,q=N&&!!D.decide_importance,X=N&&!!T.approval_request.decide_funding,L=z&&"reg_to_template"===T.approval_request.registration_type&&!!T.approval_request.can_choose_template_instance,U=N&&!!D.decide_hours,V=N&&!!D.time_commitment,H=null===(t=T.approval_request.instances)||void 0===t?void 0:t.map((function(e){return{key:e.group_id,id:e.group_id,label:e.group_name+(e.group_open_date?" - "+(0,s.GG)(e.group_open_date,{time:!1}):"")}})),G="text",J=function(e){return(0,c.mE)(e,{min:0})},W=N?[{type:G,name:"target_data[paid_leave]",label:lng("paid leave days").caps(),value:null!==(n=A.paid_leave)&&void 0!==n?n:A.r_paid_leave,validate:J},{type:G,name:"target_data[price]",label:lng("tuition").caps(),value:null!==(r=A.price)&&void 0!==r?r:A.r_price,validate:J},{type:G,name:"target_data[travel]",label:lng("travel price").caps(),value:null!==(h=A.travel)&&void 0!==h?h:A.r_travel,validate:J},{type:G,name:"target_data[expenses]",label:lng("expenses").caps(),value:null!==(y=A.expenses)&&void 0!==y?y:A.r_expenses,validate:J},{type:G,name:"target_data[funding]",label:lng("total funding").caps(),value:null!==(v=A.funding)&&void 0!==v?v:A.r_funding,validate:J}]:[],K=(new Date).getFullYear(),$=(0,s._3)("".concat(K,"-01-01")).format(Blsm.prm.date_moment_format),Y=(0,s._3)("".concat(K,"-12-31")).format(Blsm.prm.date_moment_format);return T._fields=[{type:"component",node:(0,m.tZ)((function(){var e="".concat(lng("member limit reached").caps()," ( ").concat(T.approval_request.users_in_group," / ").concat(T.approval_request.max_users,")");return(0,m.tZ)("div",{children:(0,m.tZ)(i.jC,{color:o.g.colors.warning,children:e})})}),{}),visible:function(){return T.approval_request.max_users&&parseInt(T.approval_request.users_in_group)>=parseInt(T.approval_request.max_users)}},{type:"component",node:(0,m.tZ)((function(){var e=T.approval_request.custom_messages.added_to_approve_dialog;return(0,m.BX)(m.HY,{children:[e.title&&(0,m.tZ)(d.D,{large:!0,children:e.title}),e.h1&&(0,m.tZ)(d.D,{children:e.h1}),e.h2&&(0,m.tZ)(d.D,{children:e.h2}),e.message&&(0,m.tZ)(l.x,{content:e.message}),(0,m.tZ)("hr",{})]})}),{}),visible:function(){var e,t,n;return null===(e=T.approval_request)||void 0===e||null===(t=e.custom_messages)||void 0===t||null===(n=t.added_to_approve_dialog)||void 0===n?void 0:n.message}},{type:"component",node:(0,m.tZ)((function(){var e=T.approval_request.target_data||{};return(0,m.BX)("div",{children:[(0,m.BX)("div",{children:[(0,m.BX)("span",{className:"title",children:[lng("name").caps(),": "]}),e.ext_course_name||T.approval_request.group_name]}),T.approval_request.group_description&&(0,m.BX)("div",{children:[(0,m.BX)("span",{className:"title",children:[lng("group description").caps(),": "]})," ",(0,m.tZ)(l.x,{content:T.approval_request.group_description})]}),e.group_open_date&&(0,m.BX)("div",{children:[(0,m.BX)("span",{className:"title",children:[lng("dates").caps(),": "]}),(0,m.tZ)(p.qm,{dateNote:{start:e.group_open_date,end:e.group_close_date}})]}),T.approval_request.description&&(0,m.BX)("div",{children:[(0,m.BX)("span",{className:"title",children:[lng("step description").caps(),": "]})," ",(0,m.tZ)(l.x,{content:T.approval_request.description})]})]})}),{})},{type:"component",node:(0,m.BX)("div",{children:[lng("estimated cost for member").caps()," : ",T.approval_request.estimated_cost_for_member_currency," ",(0,m.tZ)(a.JO,{icon:"report",href:{report:"RegisterCostForOu",params:{range:"dates",from:$,to:Y,group:T.approval_request.origin_group||T.approval_request.group_id}}})]}),insert:T.approval_request.estimated_cost_for_member>0},{type:"textarea",name:"approver_text",label:lng("explanation and additional information").caps(),required:!!D[{approve:"require_info_approval",reject:"require_info_rejection",back:"require_info_back"}[T.action]]},{type:"select",name:"target_data[importance]",label:lng("degree of importance"),insert:q||!!A.importance,value:A.importance,emptyOption:!0,options:(0,c.wd)(C),readOnly:!q},{type:"single_item",name:"target_data[supplier_id]",label:lng("organizing institution"),insert:F||!!A.supplier_id,value:A.supplier_id,readOnly:!F,searchData:function(e,t){var n=e.term,r=e.ids;(0,u.SC)("suppliers/autocomplete",{data:{term:n,id:r,limit:20,type:"RegExt"}},t)}},{type:"component",Render:f.R9,label:"".concat(lng("requested").caps(),": ").concat(A.r_institution),insert:F&&!!A.r_institution},{type:"number",name:"score",label:lng("set score").caps(),insert:!!T.approval_request.can_edit_grade,disable:I.length>0,required:!(I.length>0)},{type:"section",fields:I,insert:T.approval_request.scoring_criteria},{type:"single_item",name:"wanted_instance",label:lng("select course instance"),insert:H&&L,required:!0,value:A.wanted_instance,searchData:function(e,t){var n=e.term,r=e.ids;return t(H.filter((function(e){return n?e.label.includes(n)||e.id==n:!r||r.includes(e.id)})))}},{type:"password",name:"password",label:lng("enter your password to confirm").caps(),insert:!!D.password_required,required:!0},{type:"number",name:"time_commitment",label:lng("set time commitment").caps(),value:null===(_=T.approval_request)||void 0===_||null===(w=_.target_data)||void 0===w?void 0:w.time_commitment,unit:lng("months").caps(),insert:V},{type:"number",name:"target_data[weekly_hours]",label:lng("set weekly hours").caps(),value:null===(k=T.approval_request)||void 0===k||null===(S=k.target_data)||void 0===S?void 0:S.weekly_hours,insert:M},{type:"file",name:"file",label:lng("attach a file"),insert:R},{type:"date",name:"submissionDate",label:lng("edit submission date"),insert:!(null===(P=T.approval_request)||void 0===P||!P.edit_submission_date)},{type:G,name:"target_data[hours]",label:lng("academic hours"),insert:U,value:null!==(Z=A.hours)&&void 0!==Z?Z:A.r_hours,emptyOption:!0,readOnly:!U,validate:J},{type:G,name:"target_data[days_off]",label:lng("days off").caps(),value:null!==(B=A.days_off)&&void 0!==B?B:A.r_days_off,insert:X,validate:J},{type:"section",fields:W,title:lng("funding"),titleSmall:!0,insert:X},{type:"section",fields:T.decisionsFields,insert:T.decisionsFields.length>0},{type:"component",node:(0,m.tZ)(j,{action:T.action,approval_request:T.approval_request})}],T._prepFields(),T.ready=!0,T}return t=b,(n=[{key:"setScore",value:function(){var e=this,t=0,n=0;this.approval_request.scoring_criteria.rows.map((function(r,o){var i=e.values.get("scoring_criteria[".concat(o,"]"));i&&(n+=i),t+=r-1})),this.values.set("score",Math.round(100*n/t))}},{key:"setDecisionFields",value:function(){var e,t,n=null===(e=this.approval_request.sequence_user_options)||void 0===e?void 0:e.decision_options,r=this.approval_request.next_approver.approver_options?lng("please choose below"):this.approval_request.next_approver.approver_name,o=null!==(t=this.approval_request.next_approver)&&void 0!==t&&t.approver_id?"".concat(lng("go to next approver").caps()," - ").concat(r):lng("finish sequence").caps(),i={type:"radio",name:"decision",radioValue:"default",value:"default",label:"".concat(lng("default").caps(),": ").concat(o)},a=[];if(n&&n["default-decision"]&&a.push(i),null!=n&&n.decisions)for(var l=0,s=Object.entries(n.decisions);l<s.length;l++){var c,u,p,d,f=h(s[l],1)[0],g=null!==(c=n.decisions[f])&&void 0!==c&&null!==(u=c.approver)&&void 0!==u&&u.approver_name?"(".concat(null===(p=n.decisions[f])||void 0===p||null===(d=p.approver)||void 0===d?void 0:d.approver_name,")"):"";a.push({type:"radio",name:"decision",radioValue:n.decisions[f].target,label:"".concat(n.decisions[f].label," ").concat(g)})}if(a.length>1)this.decisionsFields=a;else{var b,y,v=1===a.length?a[0]:i;this.decisionsFields.push({type:"component",node:(0,m.tZ)("div",{children:v.label}),name:"decision",value:v.checkboxValue}),this.decisionsFields.push({type:"select",name:"chosen_approver_id",insert:!(null===(b=this.approval_request.next_approver)||void 0===b||!b.approver_options),options:null===(y=this.approval_request.next_approver)||void 0===y?void 0:y.approver_options,value:this.approval_request.next_approver.approver_id,label:lng("you may choose the approver").caps()})}}},{key:"save",value:function(e){this.saveToUrl("approval",Object.assign({action:this.action,request_id:this.approval_request.request_id},e))}}])&&y(t.prototype,n),r&&y(t,r),b}(r.I),j=function(e){var t=e.action,n=e.approval_request,r="";return"Reg"!==n.type&&"RegExt"!==n.type||"back"===t||"cancel_decision"===t||(r=n.auto_approval_date>0?lng("you can change your decision later").caps():lng("your decision here is final").caps()),r&&(0,m.tZ)(i.jC,{color:o.g.colors.warning,children:r})},C=[[1,"1 - "+lng("low")],[2,"2"],[3,"3"],[4,"4"],[5,"5 - "+lng("high")]]},46945:function(e,t,n){"use strict";n.d(t,{T:function(){return b}});var r=n(24210),o=n(98e3),i=n(71134),a=n(15560),l=n(35944);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(f,e);var t,n,r,s=d(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),h(m(t=s.call(this,e)),"bookmarkId",void 0),h(m(t),"activeReport",void 0),h(m(t),"parameters",void 0),t.bookmarkId=e.bookmarkId||t.bookmarkId,t.activeReport=e.activeReport||t.activeReport,t.parameters=e.parameters||t.parameters,t.title=lng("bookmark report").caps(),t.successMessage=lng("bookmark saved"),t.saveUrl=t.bookmarkId?"reports/action/save_bookmark_name":"reports/action/bookmark",t.bookmarkId?(0,o.SC)("reports/action/edit_bookmark_name",{data:{bm_id:t.bookmarkId},method:"POST"},(function(e){var n=JSON.parse(e.widget_options),r="all"!==e.share_mode?h({recommended_dashboard_target:e.share_mode},"target_"+e.share_mode,e.share_to):{};t.initialValues=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({bookmark_id:e.bookmark_id,bookmark_name:e.bookmark_name,bookmark_desc:e.bookmark_description,personal_dashboard:e.widget_order,share_with_all:e.share_with_all,widget_size:n.widget_size,widget_view:n.widget_view},r),t.getMetadata()})):t.getMetadata(),t}return t=f,(n=[{key:"getMetadata",value:function(){var e=this;(0,o.SC)("bookmarks/report_bookmark_metadata",{data:{report_name:this.activeReport,parameters:this.parameters}},(function(t){var n,r,o;null==t||null===(n=t.metadata)||void 0===n||null===(r=n.size)||void 0===r||null===(o=r.forEach)||void 0===o||o.call(r,(function(e){return e.val=e.value})),e.buildFields(null==t?void 0:t.metadata.size,null==t?void 0:t.metadata.view)}))}},{key:"buildFields",value:function(e,t){var n=this,r={all:lng("all").caps(),other_user:lng("other user").caps(),group:lng("workspace manager").caps(),role:lng("role").caps()},s=["all","other_user","group","role"].map((function(e){return{val:e,label:r[e]}}));this._fields=[{type:"hidden",name:"bookmark_url",value:JSON.stringify({report_name:this.activeReport,parameters:this.parameters})},{type:"hidden",name:"bookmark_id",value:this.bookmarkId},{type:"hidden",name:"modification_time",value:(0,i.c7)()},{type:"text",name:"bookmark_name",label:lng("bookmark name"),required:!0},{type:"textarea",name:"bookmark_desc",label:lng("description"),maxlength:550},{type:"component",node:(0,l.tZ)(a.Observer,{children:function(){return lng("description length").caps()+": "+n.values.get("bookmark_desc").trim().length+"/550"}}),visible:function(e){var t;return(null===(t=e.get("bookmark_desc"))||void 0===t?void 0:t.trim().length)>0}},{type:"checkbox",name:"personal_dashboard",label:lng("add to personal dashboard")},{type:"checkbox",name:"share_with_all",label:lng("recommend report"),insert:Blsm.user.isPowerManager},{type:"row_set",visible:function(e){return e.get("share_with_all")},fields:[{type:"select",name:"recommended_dashboard_target",label:lng("mode"),options:s,visible:function(e){return e.get("share_with_all")}},{type:"single_item",name:"target_other_user",label:lng("select user"),visible:function(e){return"other_user"===e.get("recommended_dashboard_target")},required:!0,searchData:function(e,t){(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)},onSelect:function(e){return n.values.set("target_name",e.name)}},{type:"single_item",name:"target_group",label:lng("select workspace"),visible:function(e){return"group"===e.get("recommended_dashboard_target")},required:!0,searchData:function(e,t){(0,o.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,types:["Ou","Group","Qualification"],term:e.term||"",id:e.ids||""}},t)},onSelect:function(e){return n.values.set("target_name",e.name)}},{type:"single_item",name:"target_role",label:lng("select role"),visible:function(e){return"role"===e.get("recommended_dashboard_target")},required:!0,searchData:function(e,t){(0,o.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,types:["Role"],term:e.term||"",id:e.ids||""}},t)},onSelect:function(e){return n.values.set("target_name",e.name)}}]},{type:"select",name:"widget_view",label:lng("view"),options:t,visible:function(){return n.values.get("personal_dashboard")||n.values.get("share_with_all")},insert:!!t},{type:"select",name:"widget_size",label:lng("size"),options:e,visible:function(){return n.values.get("personal_dashboard")||n.values.get("share_with_all")},insert:!!e}],this._prepFields(this.initialValues),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,e)}}])&&u(t.prototype,n),r&&u(t,r),f}(r.I)},44401:function(e,t,n){"use strict";n.d(t,{Z:function(){return S}});var r=n(24210),o=n(15560),i=n(98e3),a=n(66975),l=n(68567),s=n(23838),c=n(27821),u=n(79793),p=n(22334),d=n(35944);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function y(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(n,e);var t=_(n);function n(){var e,r,l=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};h(this,n),x(O(r=t.call(this,l)),"event_id",null),x(O(r),"group_id",null),x(O(r),"calendars",{}),x(O(r),"calendarOptions",{}),x(O(r),"eventInfo",{whole_day:"1"}),x(O(r),"repeatOptions",{none:lng("none").caps(),daily:lng("daily").caps(),weekly:lng("weekly").caps(),monthly:lng("monthly").caps(),yearly:lng("yearly").caps()}),(0,c.makeObservable)(O(r)),r.event_id=(null===(e=l.event)||void 0===e?void 0:e.id)||r.event_id,r.group_id=l.group_id||r.group_id,r.store=l.store,l.selectionInfo&&(r.eventInfo.start_time=l.selectionInfo.startStr,r.eventInfo.end_time=l.selectionInfo.endStr,r.eventInfo.whole_day=l.selectionInfo.allDay?"1":"0");var s=(0,o.observer)((function(e){var t=e.value,n={daily:lng("days"),weekly:lng("weeks"),monthly:lng("months"),yearly:lng("years")};if(t&&"none"!==t)return(0,d.tZ)("div",{children:n[t]})})),p=r.event_id?{id:r.event_id}:{calview:"month",group_id:r.group_id};return(0,i.SC)("calendarevent",{data:p},(function(e){var t,n,o,i,a;r.calendarOptions=[],r.calendars=(null===(t=e.calendars)||void 0===t?void 0:t.mine)||r.calendars,null===(n=(o=r.calendars).map)||void 0===n||n.call(o,(function(e){return r.calendarOptions.push({val:e.id,label:e.name+(e.user_id||e.goup_id?"":"🌏")})})),r.eventInfo=(null==e?void 0:e.event)||r.eventInfo,r.eventInfo.calendar_id=(null===(i=e.event)||void 0===i?void 0:i.calendar_id)||e.calendar_id,r.group_id=(null===(a=r.eventInfo)||void 0===a?void 0:a.group_id)||r.group_id,r._buildFields({RepeatTypeChanged:s})})),r.event_id&&(r.headExtra=(0,d.tZ)(u.b,{children:(0,d.tZ)(a.JO,{icon:"trash",className:"task-button",onClick:function(){return r.deleteEvent(l)}})})),r}return y(n,[{key:"getRelevantDates",value:function(){var e={};return this.values.get("whole_day")?(e.start=this.values.get("start_time_without_hours"),e.end=this.values.get("end_time_without_hours")):(e.start=this.values.get("start_time_with_hours"),e.end=this.values.get("end_time_with_hours")),e}}]),y(n,[{key:"_buildFields",value:function(e){var t,n,r,o,i=this,a=e.RepeatTypeChanged,l=function(e){var t,n,r=e.target,o=e.value;r.includes("_with_hours")?o+=" "+(null===(t=i.values.get(r))||void 0===t?void 0:t.split(" ")[1]):o=null===(n=o)||void 0===n?void 0:n.split(" ")[0],i.values.set(r,o)},s=function(){var e=i.values.get("whole_day"),t=i.getRelevantDates();return e?(0,p._3)(t.end).isAfter((0,p._3)(t.start))||t.start===t.end:(0,p._3)(t.end).isAfter((0,p._3)(t.start))},c=function(e){return i.group_id||Blsm.user.isPowerManager&&null===(t=e.get("calendar_id"),i.calendars.find((function(e){return e.id===t}))||{}).user_id;var t},u=!this.group_id||this.eventInfo.repeat_type&&"none"!==this.eventInfo.repeat_type;this.title=this.event_id?"".concat(lng("edit").caps(),": ").concat(this.eventInfo.event_name):lng("new event").caps(),this._fields=[{type:"text",name:"event_name",label:lng("event name"),required:!0,maxLength:50,placeholder:lng("event name").caps()},{type:"date_time",name:"start_time_with_hours",label:lng("start time"),value:null===(t=this.eventInfo)||void 0===t?void 0:t.start_time,required:!0,visible:function(e){return!e.get("whole_day")},onValueChange:function(e){return l({target:"start_time_without_hours",value:e})},validate:function(){return!!s()||{error:lng("invalid dates")}}},{type:"date_time",name:"end_time_with_hours",label:lng("end time"),value:null===(n=this.eventInfo)||void 0===n?void 0:n.end_time,required:!0,visible:function(e){return!e.get("whole_day")},onValueChange:function(e){return l({target:"end_time_without_hours",value:e})},validate:function(){return!!s()||{error:lng("invalid dates")}}},{type:"date",name:"start_time_without_hours",label:lng("start time"),value:null===(r=this.eventInfo)||void 0===r?void 0:r.start_time,required:!0,visible:function(e){return e.get("whole_day")},onValueChange:function(e){return l({target:"start_time_with_hours",value:e})}},{type:"date",name:"end_time_without_hours",label:lng("end time"),value:null===(o=this.eventInfo)||void 0===o?void 0:o.end_time,required:!0,visible:function(e){return e.get("whole_day")},onValueChange:function(e){return l({target:"end_time_with_hours",value:e})},validate:function(){return!!s()||{error:lng("invalid dates")}}},{type:"checkbox",name:"whole_day",label:lng("whole day").caps()},{type:"select",name:"calendar_id",label:lng("calendar").caps(),required:!0,options:this.calendarOptions,emptyOption:!0,visible:function(){return!i.group_id}},{type:"checkbox",name:"blocking_event",label:lng("blocking event"),visible:c},{type:"checkbox",name:"manager_only",label:lng("visible by power managers only"),visible:function(e){return Blsm.user.isPowerManager&&c(e)}},{type:"select",name:"repeat_type",label:lng("repeat type"),options:this.repeatOptions,insert:u},{type:"indent_set",insert:u,visible:function(e){return"none"!==e.get("repeat_type")},fields:[{type:"row_set",fields:[{type:"number",name:"nth_day",label:lng("repeat every"),min:1,max:30,value:1,validate:function(){return!!function(){var e,t=i.values.get("nth_day"),n=i.values.get("repeat_type");switch(n){case"none":return!0;case"daily":e=86400;break;case"weekly":e=604800;break;case"monthly":e=2419200;break;case"yearly":e=31536e3}if(n){"0"!==t&&t||i.values.set("nth_day",1);var r=parseInt(t)*e,o=i.getRelevantDates();return(0,p._3)(o.end).diff((0,p._3)(o.start))/1e3<=r}return!0}()||{error:lng("repeat duration must be longer than event duration")}}},{type:"component",Render:a,name:"repeat_type"}]},{type:"date",name:"end_repeat",label:lng("ends at date"),validate:function(){return!!function(){if("none"===i.values.get("repeat_type"))return!0;var e=i.getRelevantDates();return(0,p._3)(i.values.get("end_repeat")).isAfter((0,p._3)(e.start))}()||{error:lng("invalid repeat date")}}}]}],this._prepFields(this.eventInfo),this.ready=!0}},{key:"deleteEvent",value:function(e){var t=this;(0,l.BB)(lng("are you sure you want to delete the event?"),{title:lng("delete").caps(),onConfirm:function(){return(0,i.SC)("calendarevent/"+t.event_id,{method:"DELETE"},(function(){if((0,s.vm)().closeDialog(),t.store){var n,r=m(t.store.calendarRef.current.api().getEvents());try{for(r.s();!(n=r.n()).done;){var o=n.value;e.event.id==o.id&&o.remove()}}catch(e){r.e(e)}finally{r.f()}}}))}})}},{key:"SaveSuccess",value:function(e){(0,s.vm)().closeDialog(),this.store&&this.store.calendarRef.current.refresh(),this.onSaveSuccess&&this.onSaveSuccess(e)}},{key:"save",value:function(e){var t=this.getRelevantDates(),n=(0,p.GG)(t.start,{time:!0,obj:!0,utc:!0,offset:!0}),r=(0,p.GG)(t.end,{time:!0,obj:!0,utc:!0,offset:!0});this.saveToUrl("calendarevent/"+this.event_id,Object.assign({group_id:this.group_id,event_id:this.event_id,start_time:n,end_time:r},e))}}]),n}(r.I)},68297:function(e,t,n){"use strict";n.d(t,{M:function(){return k}});var r,o,i=n(24210),a=n(23838),l=n(27821);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b,y,v,_,w,O,k=(r=l.action.bound,o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(i,e);var t,n,r,o=m(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=e.data,r=void 0===n?{}:n;return t.data=r,t.isNew=!r.message,t.title=r.message?lng("edit message"):lng("add a new message"),t.url=r.message?"groups/update_message":"groups/message",t.buildFields(),t}return t=i,(n=[{key:"initialValues",value:function(){return this.isNew?{}:{text:this.data.message.text}}},{key:"buildFields",value:function(){this._fields=[{name:"text",type:"richtext",label:lng("message"),toolbarOptions:{font:!0,color:!0,link:!0,media:!0}},{name:"inherited",type:"checkbox",label:lng("show message in sub workspaces")}],this._prepFields(this.initialValues()),this.ready=!0}},{key:"save",value:function(e){var t;this.saveToUrl(this.url,u(u({},e),{},{group_id:this.data.ws,id:null===(t=this.data.message)||void 0===t?void 0:t.id}))}},{key:"update",value:function(e){var t=(0,a.vm)().getStore("workspace",this.data.ws);this.isNew?t.addGroupMessageLocally(e,this.getValue("text")):t.updateGroupMessageLocally(e,{text:this.getValue("text"),inherited:this.getValue("inherited")})}},{key:"SaveSuccess",value:function(e){var t;this.update((null===(t=this.data.message)||void 0===t?void 0:t.id)||e),(0,a.vm)().closeDialog()}}])&&d(t.prototype,n),r&&d(t,r),i}(i.I),b=o.prototype,y="SaveSuccess",v=[r],_=Object.getOwnPropertyDescriptor(o.prototype,"SaveSuccess"),w=o.prototype,O={},Object.keys(_).forEach((function(e){O[e]=_[e]})),O.enumerable=!!O.enumerable,O.configurable=!!O.configurable,("value"in O||O.initializer)&&(O.writable=!0),O=v.slice().reverse().reduce((function(e,t){return t(b,y,e)||e}),O),w&&void 0!==O.initializer&&(O.value=O.initializer?O.initializer.call(w):void 0,O.initializer=void 0),void 0===O.initializer&&(Object.defineProperty(b,y,O),O=null),o)},40484:function(e,t,n){"use strict";n.d(t,{H:function(){return v}});var r=n(24210),o=n(98e3),i=n(71134),a=n(5474),l=n(28534),s=n(35944);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=b(e);if(t){var o=b(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?h(e):t}function h(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function b(e){return(b=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(p,e);var t,n,r,c=m(p);function p(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,p),y(h(t=c.call(this,e)),"lessonId",null),y(h(t),"permissionType",(function(e){var t=e.onChange,n=e.item,r=[{val:"read",label:lng("read").caps()},{val:"write",label:lng("write")}];return(0,s.tZ)(a.P,{options:r,value:n.permission_name,onChange:function(e){return t({value:e})}})})),t.lessonId=(null==e?void 0:e.lessonId)||t.lessonId,t.title=(0,i.B5)(t.lessonId)?"".concat(lng("edit permissions").caps(),": ").concat(t.params.lessonName):lng("add owners").caps(),t.successMessage=lng("content permissions saved"),t.saveAsJson=!0,(0,o.SC)("content/get_owners",{method:"POST",data:{lesson_id:t.lessonId}},(function(e){var n=[];n.user_permissions=e.owners.users,n.group_permissions=e.owners.groups,t.buildFields(n)})),t}return t=p,(n=[{key:"buildFields",value:function(e){var t=this;this._fields=[{type:"component",node:(0,s.BX)("div",{children:[(0,s.BX)("span",{style:{fontWeight:600},children:[lng("add owners for").caps(),":"]})," ",this.params.lessonId.length>5?lng("%s selected content",this.params.lessonId.length):this.params.lessonName]}),insert:!(0,i.B5)(this.lessonId)},{type:"multiple_items",name:"user_permissions",label:lng("select users"),poster:!0,theme:"bright",value:e.user_permissions,valueIsMap:!0,objectKeys:["id","permission_name"],searchData:function(e,n){var r=e.term,i=e.ids;(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:r,id:i||"",exclude:t.values.get("user_permissions")||[]}},n)},buttons:[{Render:this.permissionType,onChange:function(e,t){var n=t.value;return e.permission_name=n,e}}],searchDataCacheFunc:function(e){return(0,i.SZ)(Object.assign({ids:(t.values.get("ids")||[]).concat(t.inList)},e))}},{type:"multiple_items",name:"group_permissions",label:lng("select workspaces"),poster:!0,theme:"bright",value:e.group_permissions,valueIsMap:!0,objectKeys:["id","permission_name"],mod:["","ENT"],searchData:function(e,n){var r=e.term,i=e.ids;(0,o.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",is_owner:1,term:r,id:i||"",exclude:t.values.get("group_permissions")||[]}},n)},buttons:[{Render:this.permissionType,onChange:function(e,t){var n=t.value;return e.permission_name=n,e}}],searchDataCacheFunc:function(e){return(0,i.SZ)(Object.assign({ids:(t.values.get("ids")||[]).concat(t.inList)},e))}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){var t=Object.values(e.user_permissions||{});if(0!==t.length&&t.some((function(e){return"write"===e.permission_name}))){for(var n=0,r=Object.entries(e.user_permissions);n<r.length;n++){var o=u(r[n],1)[0];e.user_permissions[o].permission_name=e.user_permissions[o].permission_name||"read"}for(var i=0,a=Object.entries(e.group_permissions);i<a.length;i++){var s=u(a[i],1)[0];e.group_permissions[s].permission_name=e.group_permissions[s].permission_name||"read"}this.saveToUrl("content/save_permissions",Object.assign({lesson_id:this.lessonId},e))}else(0,l.nb)(lng("content must have at least one user with write permission").caps())}}])&&d(t.prototype,n),r&&d(t,r),p}(r.I)},82307:function(e,t,n){"use strict";n.d(t,{s:function(){return b}});var r=n(87138),o=n(94576),i=n(85024),a=n(35519);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return(d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=h(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(s,e);var t,n,r,l=m(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),(t=l.call(this,c(c({},e),{},{baseRoute:"content"}))).id=e.id,t}return t=s,(n=[{key:"createAttributes",value:function(e){var t=_.map(a.z9,(function(e){return[e,(0,o.BP)(e).caps(!1)]}));this.folderOptions=(null==e?void 0:e.folders)||[],this.attributes=[{name:"lesson_category_id",label:lng("category"),type:"select",grow:10,options:e.categories_options},{name:"estimated_duration",label:lng("estimated duration"),type:"select",grow:10,options:t},{name:"folder_id",label:lng("folder"),type:"component",grow:10,Render:i.p,props:{folderTree:this.folderOptions}},{name:"lesson_author",label:lng("author"),type:"text",grow:10},{name:"lesson_tags",label:lng("tags"),type:"tags",objectType:"Lesson",grow:10}]}},{key:"save",value:function(e){this.extraUrlData.ws&&(e.group_id=this.extraUrlData.ws),d(h(s.prototype),"save",this).call(this,e)}}])&&p(t.prototype,n),r&&p(t,r),s}(r.U)},25584:function(e,t,n){"use strict";n.d(t,{d:function(){return b}});var r=n(87138),o=n(98e3),i=n(96504),a=n(35519);function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){h(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function p(e,t){return(p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function d(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f(this,n)}}function f(e,t){return!t||"object"!==l(t)&&"function"!=typeof t?m(e):t}function m(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(s,e);var t,n,r,l=d(s);function s(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),h(m(t=l.call(this,c(c({},e),{},{baseRoute:"groups",extraUrlData:{type:e.objName,is_course:e.is_course}}))),"params",void 0),t.params=e,t}return t=s,(n=[{key:"createAttributes",value:function(){var e=[{val:"0",label:lng("visible in home").caps()},{val:"1",label:lng("visible only to managers").caps()},{val:"2",label:lng("not visible").caps()}],t=[{optgroup:!0,label:lng("controlled by managers").caps(),options:[{val:"private",label:lng("private").caps()+" - "+lng("owner only").caps()},{val:"manager_register",label:lng("departmental").caps()+" - "+lng("org' unit managers add their own users").caps()}]},Blsm.isFeatureEnabled("course_registartion")&&{optgroup:!0,label:lng("user registration").caps(),options:[{val:"public",label:lng("public").caps()+" - "+lng("anyone can join").caps()},{val:"register",label:lng("requested").caps()+" - "+lng("requires an approval sequence").caps()}]}],n=[{val:"",label:lng("off").caps()},{val:1,label:lng("user completes the last %s",lng("assignment")+" / "+lng("meeting")).caps()},{val:2,label:lng("user completes the last %s",lng("assignment")).caps()},{val:3,label:lng("user completes the last %s",lng("meeting")).caps()}];this.attributes=[{type:"select",name:"status",label:lng("mode").caps(),insert:this.params.showStatusSelection&&this.typeCheck(["group","course"])&&this.serverResponse.authorize_group_seq,options:[{val:"draft",label:lng("draft").caps()},{val:"approval",label:lng("approval").caps()},{val:"",label:lng("approved").caps()}]},{name:"group_invisible",label:lng("status").caps(),type:"select",insert:this.typeCheck(["qualification","group","course","budget","course_template","workplan","patientcase"]),options:e},{name:"classification_id",label:lng("classification").caps(),type:"select",insert:this.typeCheck(["group","course","course_template","qualification","workplan"]),options:this.serverResponse.data.classifications||[],emptyOption:!0},{name:"group_location",label:lng("location").caps(),type:"text",insert:this.typeCheck(["group","course","course_template"]),suggest:{table:"groups"}},{name:"group_gathering_area",label:lng("gathering area").caps(),type:"text",insert:this.typeCheck(["group","course","course_template"]),suggest:{table:"groups"}},{type:"single_item",name:"workplan_id",label:lng("attach to workplan").caps(),theme:"bright",poster:!0,insert:this.typeCheck(["course"])&&Blsm.isFeatureEnabled("workplan"),searchData:function(e,t){(0,o.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Workplan"],term:e.term,id:e.ids}},t)}},{name:"group_audience",label:lng("audience").caps(),type:"text",insert:this.typeCheck(["group","course","course_template"]),suggest:{table:"groups"}},{name:"estimated_budget",label:lng("estimated budget").caps(),type:"number",insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"])},{name:"estimated_cost_for_member",label:lng("estimated cost for member").caps(),type:"number",insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"])},{name:"compliance",label:lng("mark as compliance").caps(),type:"checkbox",insert:this.typeCheck(["group","course","course_template","qualification"])},{name:"group_access",label:lng("workspace accessibility").caps(),type:"select",insert:this.typeCheck(["group","course","course_template","qualification"]),options:t},{type:"component",label:lng("automatic enrollment").caps(),name:"autoenrollment_rules",insert:this.typeCheck(["group","course","course_template","qualification","role","workplan"]),Render:i._,value:null,props:{object_type:"users",title:lng("automatic enrollment rules")}},{type:"multiple_items",name:"ou_allocations",poster:!0,theme:"bright",valueIsMap:!0,label:lng("restrict allocations for org' units").caps(),objectKeys:["id","allocation","use_sub_groups"],insert:this.typeCheck(["group","course","course_template","qualification"]),searchData:function(e,t){(0,o.SC)("ajax/GroupsAjax.class.php?",{data:{req:"AutoComplete",owned:1,types:["Ou"],term:e.term,id:e.ids}},t)},buttons:[{Render:a.xE,onChange:function(e,t){var n=t.value;return e.allocation=n,e}},{Render:a.Kz,onChange:function(e){return e.use_sub_groups=!e.use_sub_groups,e}}]},{type:"component",label:lng("registration availability conditions").caps(),name:"reg_availability_conditions",insert:this.typeCheck(["group","course","course_template","qualification"]),Render:i._,value:null,props:{object_type:"users",title:lng("registration availability conditions")}},{name:"poster",label:lng("image").caps(),type:"img",insert:!0,value:Blsm.InitialData.random_poster},{name:"hide_in_workspaces",label:lng("hide from users in workspaces").caps(),type:"checkbox",insert:this.typeCheck(["qualification"])},{name:"special_qualification",label:lng("mark these as qualification roles").caps(),type:"checkbox",insert:this.typeCheck(["qualification"])},{name:"hide_score",label:lng("hide score").caps(),type:"checkbox",insert:this.typeCheck(["group","course","course_template","qualification"])},{name:"auto_complete_course",label:lng("publish grades when").caps(),type:"select",insert:this.typeCheck(["group","course","course_template","qualification"]),sub:this.typeCheck(["qualification"])?lng("the grade will be published after completing all the qualifications dependencies").caps():void 0,options:n},{name:"publish_score_when_added",label:lng("publish user score when adding a new user and the user dependencies are completed").caps(),type:"checkbox",insert:this.typeCheck(["qualification"])},{name:"authorization_qualification",label:lng("mark these as authorization qualifications").caps(),type:"checkbox",insert:this.typeCheck(["qualification"])&&Blsm.isFeatureEnabled("authorization_qualification")}].filter((function(e){return!!e.insert}))}},{key:"typeCheck",value:function(e){var t=this.serverResponse.data.is_course?"course":this.params.objName;return e.indexOf(t.toLowerCase())>-1}},{key:"SaveSuccess",value:function(){}}])&&u(t.prototype,n),r&&u(t,r),s}(r.U)},82247:function(e,t,n){"use strict";n.d(t,{Ap:function(){return Z},YP:function(){return A},oQ:function(){return R},oS:function(){return D}});var r=n(24210),o=n(87363),i=n(98e3),a=n(66975),l=n(7392),s=n(71134),c=n(34065),u=n(37999),p=n(94576),d=(n(57882),n(15560)),f=n(22334),m=n(35944);function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||_(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t){return(k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function x(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=C(e);if(t){var o=C(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S(this,n)}}function S(e,t){return!t||"object"!==g(t)&&"function"!=typeof t?j(e):t}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function C(e){return(C=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Z="---TARGET---",B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&k(e,t)}(a,e);var t,n,r,o=x(a);function a(e){var t,n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),P(j(n=o.call(this,e)),"notifications",[]),P(j(n),"options",{}),P(j(n),"onSave",void 0),P(j(n),"systemMessageCache",new Map),n.params=e,n.notifications=e.notifications,n.options=(0,s.g4)(e.options)||{},n.onSave=e.onSave,n.title=lng("create notification").caps(),n.id=null===(t=e.data)||void 0===t?void 0:t.id,n.opr=e.opr,n._buildFields(),n._prepFields(e.data||{}),n.ready=!0,n}return t=a,(n=[{key:"save",value:function(e){var t;null===(t=this.onSave)||void 0===t||t.call(this,e)}},{key:"_buildFields",value:function(){var e=this;this.status=this.id?"":"first step";for(var t=[],n=function(){var n=v(o[r],2),i=n[0],a=n[1];t.push({radioValue:i,name:"notification_name",type:"radio",theme:"outlined",MatButtonStyle:{width:"100%"},label:a.label,insert:a.insert||void 0===a.insert,mod:a.mod,disable:a.disable,helpKey:a.helpKey,visible:function(){return void 0===a.visible||a.visible()},onValueChange:function(t){return e.status=t?"":"first step"}})},r=0,o=Object.entries(this.notifications);r<o.length;r++)n();var a=function(t){return!1!==e.notifications[t.get("notification_name")].time};this._fields=[{type:"section",title:lng("select notification"),visible:function(e){return!e.get("notification_name")},fields:t},{type:"section",title:lng("notification settings"),visible:function(e){return!!e.get("notification_name")},fields:[{type:"component",Render:function(t){var n=t.value;return n.get("notification_name")?(0,m.tZ)("div",{style:{textAlign:"center"},children:(0,m.tZ)(l.l,{onClick:function(){return e.updateValue(null,"notification_name"),e.status="first step"},children:e.notifications[n.get("notification_name")].label.caps()})}):""}},{type:"checkbox",name:"repeat",label:lng("repeat according to span")+".",visible:function(t){return e.notifications[t.get("notification_name")].repeat},disable:function(t){return!e.notifications[t.get("notification_name")].repeat}},{type:"row_set",visible:a,fields:[{type:"number",name:"reminder_span",label:lng("amount"),min:0,value:"0"},{type:"select",name:"reminder_type",label:lng("span"),options:[{val:"days",label:lng("days").caps()},{val:"weeks",label:lng("weeks").caps()},{val:"months",label:lng("months").caps()}]}]},{type:"row_set",visible:function(t){return e.notifications[t.get("notification_name")].dates},fields:[{type:"date",name:"from",label:lng("from date")},{type:"date",name:"to",label:lng("to date"),disable:function(){return e.values.get("to_infinite")}},{type:"checkbox",name:"to_infinite",label:lng("infinite"),onValueChange:function(t){return t&&e.values.set("to","")}}]},{type:"row_set",fields:A(this,this.options.user_lng,{targetFields:this.options.targetFieldsOptions,targetAuthorities:this.options.targetAuthoritiesOptions,coach:this.options.coach,role_settings:this.options.role_settings})},{type:"checkbox",name:"send_to_all",label:lng("send to all managers"),visible:function(e){return["role","group"].includes(e.get("target_preselect"))}},{type:"notification",name:"message",label:lng("select message"),placeholder:lng("default message").caps(),messageType:function(){return(0,s.g4)(e.notifications[e.values.get("notification_name")].messageType,{},["user"===e.values.get("target_preselect")])},messageTypes:function(){var t=I(e.options.user_lng||lng("the member")),n=(0,s.g4)(e.notifications[e.values.get("notification_name")].messageTypes,{},["user"===e.values.get("target_preselect")]);for(var r in n)n[r][1]===Z&&(n[r][1]=function(){return t[e.values.get("target_preselect")]});return n},visible:function(){return e.notifications[e.values.get("notification_name")].message},mod:["","ENT"]},{type:"single_item",name:"message",label:lng("select message"),searchData:function(e,t){(0,i.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)},visible:function(t){var n,r;return!!e.notifications[t.get("notification_name")].message&&!(null===(n=e.notifications[e.values.get("notification_name")])||void 0===n||null===(r=n.validate)||void 0===r||!r.message)},mod:["","ENT"],required:function(){var t,n;return!(null===(t=e.notifications[e.values.get("notification_name")])||void 0===t||null===(n=t.validate)||void 0===n||!n.message)}},{type:"checkbox",name:"sms",label:lng("also send as an SMS message").caps()+(this.options.message?"(".concat(lng("custom message will not be used"),")"):""),visible:function(t){return e.notifications[t.get("notification_name")].sms},insert:Blsm.InitialData.special.sms,helpKey:"@notification/sms"},{type:"checkbox",name:"limit_to_active_courses",label:lng("limit to members of active courses").caps(),visible:function(){var t;return null===(t=e.notifications[e.values.get("notification_name")])||void 0===t?void 0:t.limitToActiveCourses}},{type:"component",node:(0,m.tZ)(E,y({},this)),visible:function(t){var n;return a(t)&&(null===(n=(0,s.g4)(e.params.options))||void 0===n?void 0:n.due_date)}}]}]}}])&&O(t.prototype,n),r&&O(t,r),a}(r.I),T={name:"na6dwk",styles:".next-repeat{font-weight:600;}"},E=(0,d.observer)((function(e){var t,n,r,o,i,a,l,s=e.values,c=e.params,u=e.notifications;return(0,m.BX)("div",{css:T,children:[(0,m.BX)("div",{className:"next-repeat",children:[lng("next notification:").caps()," ",(o=s.get("repeat")&&parseInt(s.get("reminder_span"))>0,i=(0,f._3)(null===(t=c.options)||void 0===t?void 0:t.call(c).due_date),a=u[s.get("notification_name")].opr,l="-"===a&&null!==(n=c.options)&&void 0!==n&&n.call(c).start_date?(0,f._3)(null===(r=c.options)||void 0===r?void 0:r.call(c).start_date):(0,f.WQ)(),(0,f.ER)(s.get("reminder_type"),s.get("reminder_span"),i,a,{repeat:o,stopDate:l,stopAfter:"+"===a})||lng("never").caps())]}),s.get("repeat")&&u[s.get("notification_name")].repeat&&(0,m.BX)("span",{children:[lng("repeat every")," ",s.get("reminder_span")," ",s.get("reminder_type")]})]})})),I=function(e){return{user:e.caps(),authority:lng("authority").caps(),other_user:lng("other user").caps(),group:lng("workspace manager").caps(),role:lng("role").caps()}},A=function(e,t,n){var r=(null==n?void 0:n.targetFields)||["user","authority","other_user","group","role"],o=t||lng("the member"),l=I(o),s=r.map((function(e){return{val:e,label:l[e]}})),c=(0,p.Gu)(o),u=(null==n?void 0:n.targetAuthorities)||["manager","users_indirect_manager","users_managers_manager","user_professional_manager","user_hr_manager","personal_coach"],d={manager:c.manager,users_indirect_manager:c.users_indirect_manager,users_managers_manager:c.users_managers_manager,user_professional_manager:c.user_professional_manager,user_hr_manager:c.user_hr_manager,personal_coach:c.personal_coach},f=u.map((function(e){return{val:e,label:d[e]}}));return Blsm.isFeatureEnabled("authorization_qualification")&&f.push({val:"user_auth_supervisor_id",label:c.user_auth_supervisor_id}),null!=n&&n.coach&&f.push({val:"coach",label:lng("%s's assigned coach",o).caps()}),[{type:"text",name:"target_name",visible:function(){return!1}},{type:"select",name:"target_preselect",label:lng("mode"),options:s},{type:"select",name:"target_authorities",label:lng("select authority"),options:f,visible:function(e){return"authority"===e.get("target_preselect")}},{type:"single_item",name:"target_other_user",label:lng("select user"),required:!0,mod:["","ENT"],visible:function(e){return"other_user"===e.get("target_preselect")},searchData:function(e,t){(0,i.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)},onSelect:function(t){return e.values.set("target_name",t.name)}},{type:"single_item",name:"target_group",label:lng("select workspace"),required:!0,visible:function(e){return"group"===e.get("target_preselect")},searchData:function(e,t){(0,i.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,types:["Ou","Group","Qualification"],term:e.term||"",id:e.ids||""}},t)},onSelect:function(t){return e.values.set("target_name",t.name)}},{type:"single_item",name:"target_role",label:lng("select role"),required:!0,mod:["","ENT"],visible:function(e){return"role"===e.get("target_preselect")},searchData:function(e,t){(0,i.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,types:["Role"],term:e.term||"",id:e.ids||""}},t)},onSelect:function(t){return e.values.set("target_name",t.name)}},{type:"indent_set",mod:["","ENT"],insert:!!n.role_settings,fields:[{type:"checkbox",name:"relative_role",label:lng("relative role"),visible:function(){return"role"===e.values.get("target_preselect")}},{type:"checkbox",name:"manual_approver",label:lng("manual approver for the first step"),visible:function(){return"group"===e.values.get("target_preselect")||"role"===e.values.get("target_preselect")}},{type:"row_set",visible:function(){return"group"===e.values.get("target_preselect")||"role"===e.values.get("target_preselect")},fields:[{type:"checkbox",name:"user_selection",label:lng("allow user selection")},{type:"component",node:(0,m.tZ)(a.JO,{icon:"menu_info",toolTip:lng("when on the first stage, currently only supported in the course catalog")})}]}]}]},D=function(e){var t=e.value,n=e.onChange,r=e.notificationsTypes,i=e.options,a=void 0===i?{}:i,u=v((0,o.useState)(!1),2),p=u[0],d=u[1];return(0,m.BX)("div",{children:[(0,m.tZ)("div",{style:{textAlign:"center",fontSize:"1.2em"},children:(0,m.tZ)(l.l,{onClick:function(){return d(!0)},theme:"contained",bold:!0,children:lng("add a notification").caps()})}),p&&(0,m.tZ)(c.m,{form:new B({notifications:r,options:a,onSave:function(e){var r=new Map(h(t||[]));r.set((0,s.o0)("notification"),e),n(r),d(!1)}}),onClose:function(){return d(!1)},internalForm:!0})]})},R=function(e){var t=e.value,n=e.onChange,r=e.notificationsTypes,i=e.options,a=void 0===i?{}:i,l=v((0,o.useState)(null),2),s=l[0],p=l[1],d={};if(null!=t&&t.size){var f,g=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(t);try{for(g.s();!(f=g.n()).done;){var b=v(f.value,2),w=b[0],O=b[1],k=void 0===r[O.notification_name].visible||r[O.notification_name].visible(),x=void 0===r[O.notification_name].time||r[O.notification_name].time;k&&(d[O.notification_name]||(d[O.notification_name]={list:[],type:O.notification_name}),d[O.notification_name].list.push({key:w,label:(0,m.tZ)(N,y(y(y({},O),a),{},{showTime:x}))}))}}catch(e){g.e(e)}finally{g.f()}}var S=function(e){var r=new Map(h(t||[]));r.delete(e.key),n(r)},j=null!=s&&s.key&&t.has(s.key)?new B({notifications:r,data:y(y({},t.get(s.key)),{},{id:s.key}),options:a,onSave:function(e){var r=new Map(h(t||[]));r.set(s.key,e),n(r),p(!1)}}):null;return(0,m.BX)(m.HY,{children:[s&&(0,m.tZ)(c.m,{form:j,onClose:function(){return p(!1)},internalForm:!0}),Object.values(d).map((function(e){var t,n;return(0,m.BX)("div",{style:{marginBottom:"30px"},children:[(0,m.tZ)("div",{style:{fontSize:"1.1em",fontWeight:"600"},children:null===(t=r[e.type].label)||void 0===t?void 0:t.caps()}),(0,m.tZ)("div",{style:{fontSize:".9em"},children:null===(n=r[e.type].helptip)||void 0===n?void 0:n.caps()}),(0,m.tZ)(u.o,{items:e.list,onRemove:S,onEdit:function(e){return p(e)},separateLines:!0})]},e.type)}))]})},N=function(e){var t,n=e.reminder_span,r=e.reminder_type,o=e.target_preselect,i=e.target_authorities,a=e.send_to_all,l=e.sms,s=e.showTime,c=e.user_lng,u=e.target_name;switch(o){case"user":t=c||lng("the member").caps();break;case"authority":t=(0,p.Gu)(lng("the member"))[i];break;case"other_user":t=u||lng("other user");break;case"group":t=(a?lng("workspace managers"):lng("workspace manager"))+": "+u;break;case"role":t=(a?lng("role users"):lng("role"))+": "+u}return(0,m.BX)("div",{children:[s&&(0,m.BX)(m.HY,{children:[(0,m.BX)("b",{children:[n," ",lng(r)]}),","]})," ",lng("send to")," ",(0,m.tZ)("b",{children:t})," ",l&&" --sms"]})}},18621:function(e,t,n){"use strict";n.d(t,{Z:function(){return O}});var r=n(24210),o=n(98e3),i=n(66975),a=n(27821),l=n(15560),s=n(343),c=n(22334),u=n(28534),p=n(35944);function d(e){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function b(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return y(this,n)}}function y(e,t){return!t||"object"!==d(t)&&"function"!=typeof t?v(e):t}function v(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return(_=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var O=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(f,e);var t,n,r,d=b(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),w(v(t=d.call(this,e)),"group_id",void 0),w(v(t),"user_id",void 0),w(v(t),"getNewParticipationPlanningRow",(function(e){var n=(0,l.observer)((function(e){var t=e.value;return t?(0,p.tZ)(i.JO,{icon:"menu_info",color:s.g.colors.negative,toolTip:t}):""}));return{type:"row_set",name:e,fields:[{type:"date",name:"participation_planning[".concat(e,"][date_from]"),label:lng("from|date"),onBlur:function(){return t.checkDates(e)},maxDate:function(){return moment(t.values.get("participation_planning[".concat(e,"][date_to]")),Blsm.prm.date_moment_format)}},{type:"date",name:"participation_planning[".concat(e,"][date_to]"),label:lng("to|date"),onBlur:function(){return t.checkDates(e)},minDate:function(){return moment(t.values.get("participation_planning[".concat(e,"][date_from]")),Blsm.prm.date_moment_format)}},{type:"component",node:(0,p.tZ)(i.JO,{icon:"trash",buttonLike:!0,onClick:function(){return t.removeParticipationPlanningRow(e)}})},{type:"component",name:"participation_planning_msg[".concat(e,"]"),value:"",Render:n}]}})),w(v(t),"checkDates",(function(e){var n=t.values.get("participation_planning[".concat(e,"][date_from]")),r=t.values.get("participation_planning[".concat(e,"][date_to]"));if(n&&r){var i="";(0,c._3)(n)<=(0,c._3)(r)?(0,o.SC)("groups/check_participation_planning_dates",{data:{date_from:n,date_to:r,user_id:t.userMode?t.user_id:t.values.get("user_id"),exclude_group:t.group_id||t.values.get("group_id")},method:"POST"},(function(n){if(n.length>0){var r=n.map((function(e){return e.group_name})),o=r.filter((function(e,t){return r.indexOf(e)===t}));i=lng("the user is already occupied on these dates").caps()+" (".concat(o.join(),")"),t.values.set("participation_planning_msg[".concat(e,"]"),i)}})):i=lng("the end date %s is before the start date %s",r,n),t.values.set("participation_planning_msg[".concat(e,"]"),i)}})),(0,a.makeObservable)(v(t),{_fields:a.observable}),t.group_id=e.group_id,t.user_id=e.user_id,t.userMode=!!e.userMode,t.title=lng("edit participation planning"),t.successMessage=lng("participation planning saved"),(0,o.SC)("groups/edit_participation_planning",{data:{user_id:t.user_id,group_id:t.group_id}},(function(e){return t._buildFields(e)})),t}return t=f,(n=[{key:"_buildFields",value:function(e){var t=this,n=[];e.participation_planning.forEach((function(e,r){return n.push(t.getNewParticipationPlanningRow(r))})),this._fields=[this.userMode?{type:"single_item",name:"group_id",label:lng("qualification"),poster:!0,theme:"bright",required:!0,disabled:!!this.group_id,searchData:function(e,t){(0,o.SC)("groups/autocomplete",{data:{show_all:1,owned:1,types:"Qualification",term:e.term,id:e.ids||""}},t)}}:{type:"single_item",name:"user_id",label:lng("select user"),poster:!0,theme:"bright",required:!0,disabled:!!this.user_id,searchData:function(e,t){(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term,id:e.ids||""}},t)}},{type:"number",name:"required_days",label:lng("required days")},{type:"component",node:(0,p.BX)(p.HY,{children:[(0,p.tZ)("b",{children:lng("participation planning").caps()})," ",(0,p.tZ)(i.JO,{icon:"new",buttonLike:!0,onClick:function(){return t.addParticipationPlanningRow()}})]})},{type:"section",name:"participation_planning",fields:n}],this._prepFields(e),this.ready=!0}},{key:"addParticipationPlanningRow",value:function(){var e=this;this._fields.map((function(t){"section"===t.type&&"participation_planning"===t.name&&t.fields.push(e.getNewParticipationPlanningRow(Math.random()))}))}},{key:"removeParticipationPlanningRow",value:function(e){var t=this;this._fields.map((function(n){"section"===n.type&&"participation_planning"===n.name&&n.fields.map((function(r){r.name===e&&(n.fields.remove(r),t.values.delete("participation_planning[".concat(e,"][date_from]")),t.values.delete("participation_planning[".concat(e,"][date_to]")),t.values.delete("participation_planning_msg[".concat(e,"]")))}))}))}},{key:"save",value:function(e){var t,n,r=!!e&&Object.values((null==e?void 0:e.participation_planning)||{}).filter((function(e){return!!e}));r&&null!=r&&null!==(t=r[0])&&void 0!==t&&t.date_from&&null!=r&&null!==(n=r[0])&&void 0!==n&&n.date_to?this.saveToUrl("groups/save_participation_planning/group_id=".concat(e.group_id||this.group_id),m(m({},e),{},{user_id:this.userMode?this.user_id:e.user_id})):(0,u.Mj)(lng("please add planned dates"))}}])&&g(t.prototype,n),r&&g(t,r),f}(r.I)},6401:function(e,t,n){"use strict";n.d(t,{y:function(){return f}});var r=n(24210),o=n(27821);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(e,t){return(l=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function s(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return c(this,n)}}function c(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?u(e):t}function u(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&l(e,t)}(c,e);var t,n,r,i=s(c);function c(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),d(u(t=i.call(this,e)),"groupId",null),d(u(t),"poll",{});var n=e.data;t.poll=n.poll,t.groupId=n.groupId,t.title=t.poll.assignment_id?lng("edit poll").caps():lng("new poll").caps();var r=[[3,lng("all results").caps()],[1,lng("nothing").caps()]];t._fields=[{type:"text",name:"question",label:lng("question"),required:!0},{type:"text",name:"choices[0]",label:lng("answer")+" 1",required:!0},{type:"text",name:"choices[1]",label:lng("answer")+" 2",required:!0},{type:"text",name:"choices[2]",label:lng("answer")+" 3"},{type:"text",name:"choices[3]",label:lng("answer")+" 4"},{type:"select",name:"assignment_options[after_test]",label:lng("after submitting answers show"),options:r},{type:"date",name:"due_date",label:lng("due date"),cls:"unlimited-date"},{type:"select",name:"assignment_options[when_expires]",label:lng("after due date show"),options:r}];var a=t.poll,l=a.question,s=a.choices,p=a.due_date,f=a.assignment_options;return t._prepFields({due_date:p,question:l,choices:(0,o.toJS)(s),assignment_options:(0,o.toJS)(f)}),t.ready=!0,t}return t=c,(n=[{key:"save",value:function(e){this.poll.save(Object.assign({group_id:this.groupId},e),this.onSaveSuccess)}}])&&a(t.prototype,n),r&&a(t,r),c}(r.I)},5367:function(e,t,n){"use strict";n.d(t,{S:function(){return v}});var r=n(24210),o=n(66975),i=n(23838),a=n(29523),l=n(98e3),s=n(9431),c=n(35944);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var p=["portalStore"];function d(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function f(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(e,t){return(m=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function g(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=y(e);if(t){var o=y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return h(this,n)}}function h(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?b(e):t}function b(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y(e){return(y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var v=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&m(e,t)}(h,e);var t,n,r,u=g(h);function h(e){var t,n,r,i,f=e.portalStore,m=d(e,p);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,h),t=u.call(this,m),n=b(t),i=null,(r="portals")in n?Object.defineProperty(n,r,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[r]=i,t.title=lng("portal settings"),t.portalStore=f;var g=f.portal_type,y=f.portal_id;return t.saveUrl="portal/portal/".concat(y),t.successMessage=lng("settings saved"),t._fields=[{type:"hidden",name:"portal_id"},{type:"hidden",name:"portal_type"},{type:"hidden",name:"group_id"},{type:"hidden",name:"parent_id"},{type:"component",node:(0,c.BX)(c.HY,{children:[lng("set background image")," ",(0,c.tZ)(o.JO,{icon:"menu_info",toolTip:lng("an abstract photo of size %s or more is recommended as the image may be cropped differently on different devices",(0,a.j4)()+"1280×720"+(0,a.Rh)()).caps()})]})},{type:"img",tabs:["portal","images","gallery"],removeButton:!0,name:"poster"},{type:"text",name:"portal_title",label:lng("name"),required:!0,maxLength:500},{type:"number",name:"portal_order",label:lng("priority"),insert:[s.Bu.DOMAIN,s.Bu.GROUP].includes(g)},{type:"checkbox",name:"sub_groups",label:lng("include sub workspaces").caps(),insert:g===s.Bu.GROUP},{type:"checkbox",name:"portal_active",label:g===s.Bu.ANONYMOUS?lng("activate for anonymous users").caps():lng("activate for users").caps()},{insert:[s.Bu.DOMAIN,s.Bu.APP].includes(g),type:"multiple_items",name:"group_ids",label:lng("available to members of"),placeholder:lng("all"),poster:!0,theme:"bright",searchData:function(e,t){(0,l.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",catalog:1,term:e.term||"",id:e.ids||""}},t)}},{insert:[s.Bu.DOMAIN,s.Bu.APP].includes(g),type:"checkbox",name:"sub_groups",label:lng("include sub workspaces").caps(),visible:function(e){var t;return(null===(t=e.get("group_ids"))||void 0===t?void 0:t.length)>0}},{type:"img",label:"".concat(lng("strip image")," - ").concat(lng("desktop")," ").concat((0,a.j4)(),"(1300×200-1900×300)"),tabs:["portal","images","gallery"],removeButton:!0,name:"style[strip_img_desktop]"},{type:"img",label:"".concat(lng("strip image")," - ").concat(lng("mobile")," ").concat((0,a.j4)(),"(320×200)"),tabs:["portal","images","gallery"],removeButton:!0,name:"style[strip_img_mobile]"},{type:"text",label:"".concat(lng("strip image")," - ").concat(lng("link")),name:"style[strip_img_link]"},{type:"color",clear_button:!0,cls:"input_short",name:"style[widgets_title_color]",label:lng("widget title color")},{type:"color",alpha:!0,clear_button:!0,name:"style[widgets_title_bgc]",label:lng("widget title background color")},{type:"color",clear_button:!0,name:"style[widgets_fgc]",label:lng("widget text color")},{type:"color",alpha:!0,clear_button:!0,name:"style[widgets_bgc]",label:lng("widget background color")}],t._prepFields(f),t.ready=!0,t}return t=h,(n=[{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign(e))}},{key:"SaveSuccess",value:function(e){(0,i.vm)().closeDialog(),null!=e&&e.portal_id&&this.portalStore.updateVals(Object.fromEntries(this.values))}}])&&f(t.prototype,n),r&&f(t,r),h}(r.I)},82267:function(e,t,n){"use strict";n.d(t,{sS:function(){return Ne},A_:function(){return Ie},tG:function(){return Pe},Sj:function(){return Be}});var r,o,i=n(87363),a=n(70917),l=n(71134),s=n(27821),c=n(15560),u=n(33051),p=n(75898),d=(n(57882),n(16920)),f=n(29180),m=n(40441),g=n(73105),h=n(66975),b=n(94238),y=n(12213),v=n(27073),_=n(64902),w=n(48207),O=n(43698),k=n(98e3),x=n(23838),S=n(77376),j=n(95405),C=n(39483),P=n(68567),Z=n(62391),B=n(7392),T=n(42755),E=n(79793),I=n(88989),A=n(32808),D=n(22334),R=n(24210);function N(e){return(N="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==N(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return(L=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var U,V,H,G,J,W,K=(r=s.action.bound,o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(i,e);var t,n,r,o=F(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),(0,s.makeObservable)(X(t)),t.params=e,t.title=lng("add existing task as sub task").caps(),t._build_fields(e),t}return t=i,(n=[{key:"_build_fields",value:function(e){this._fields=[{type:"single_item",name:"task",label:lng("task",{phrase:!0}),required:!0,searchData:function(t,n){var r,o=[e.pid].concat(null===(r=e.exclude)||void 0===r?void 0:r.map((function(e){return e.task_id})));(0,k.SC)("search/tasks",{data:{req:"AutoComplete",term:t.term||"",id:t.ids,no_parents:1,exclude:o,group:e.ws},method:"POST"},n)}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("tasks/set_parent",{task:e.task,parent:this.params.pid})}},{key:"SaveSuccess",value:function(e){(0,x.vm)().closeDialog(),this.params.add(e)}}])&&z(t.prototype,n),r&&z(t,r),i}(R.I),U=o.prototype,V="SaveSuccess",H=[r],G=Object.getOwnPropertyDescriptor(o.prototype,"SaveSuccess"),J=o.prototype,W={},Object.keys(G).forEach((function(e){W[e]=G[e]})),W.enumerable=!!W.enumerable,W.configurable=!!W.configurable,("value"in W||W.initializer)&&(W.writable=!0),W=H.slice().reverse().reduce((function(e,t){return t(U,V,e)||e}),W),J&&void 0!==W.initializer&&(W.value=W.initializer?W.initializer.call(J):void 0,W.initializer=void 0),void 0===W.initializer&&(Object.defineProperty(U,V,W),W=null),o),$=(n(38320),n(35944));var Y,Q,ee,te,ne,re,oe,ie,ae,le=(0,a.iv)(">img{max-width:100%;max-height:100%;}>._ext{font-weight:700;text-align:center;.Icon{font-size:1.5rem;}}>._label{",d.g.classes.ellipsis,";position:absolute;bottom:0;left:0;width:100%;background:rgba(255, 255, 255, .7);padding:2px;font-size:.7em;div{display:block;}._btn{",d.g.classes.ellipsis,";}}",""),se=function(e){var t=e.file,n=e.assignmentId,r=t.file_name,o=t.creation_time,i=t.file_size,a=(0,A.BX)(r);return(0,$.BX)("div",{css:le,className:"FileThumbnail",ref:function(e){return null!=e&&e.dataset?e.dataset.thumbnail=JSON.stringify(t):void 0},children:[Blsm.prm.extensions.img.includes(a)?(0,$.tZ)("img",{src:(0,m.p4)({file:t,assignmentId:n})}):(0,$.BX)("div",{className:"_ext",children:[(0,$.tZ)(h.JO,{icon:(0,A.DW)(a)}),(0,$.tZ)("br",{}),a.toUpperCase()]}),(0,$.tZ)("div",{className:"_label",children:(0,$.BX)(g.u,{html:(0,$.BX)($.HY,{children:[(0,$.tZ)("div",{children:r}),(0,$.tZ)(f.qp,{time:o}),(0,$.tZ)("div",{children:i})]}),children:[r,", ",(0,$.tZ)(f.ij,{time:o}),i?", "+i:""]})})]})},ce=n(28534);function ue(e){return(ue="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pe(e){return function(e){if(Array.isArray(e))return he(e)}(e)||de(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function fe(e,t){return be(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ge(e,t)||me()}function me(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function ge(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e){if(Array.isArray(e))return e}function ye(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _e(e,t){return(_e=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function we(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xe(e);if(t){var o=xe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oe(this,n)}}function Oe(e,t){return!t||"object"!==ue(t)&&"function"!=typeof t?ke(e):t}function ke(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ce="task",Pe=(Y=s.action.bound,Q=s.action.bound,ee=s.action.bound,te=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_e(e,t)}(a,e);var t,n,r,o=we(a);function a(e){var t,n=e.route,r=e.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Se(ke(t=o.call(this,{route:n,nav:r})),"dialog",!0),Se(ke(t),"commentsStore",null),Se(ke(t),"managersCommentsStore",null),ye(ke(t),"showManagersComments",ne,ke(t)),ye(ke(t),"moreFields",re,ke(t)),Se(ke(t),"group_id",null),Se(ke(t),"flags",{}),ye(ke(t),"bookmark",oe,ke(t)),ye(ke(t),"notification",ie,ke(t)),ye(ke(t),"subTasks",ae,ke(t)),Se(ke(t),"notification_change",!1),(0,s.makeObservable)(ke(t));var i=fe(n,2),c=i[0],u=i[1];return t.params=c,(0,l.B5)(null==u?void 0:u.c)&&(t.gotoComment=parseInt(u.c)),t._id=(0,l.B5)(c)?c:0,t._id||(t.createMode=!0,c.ws)?(t.fetchUrl="tasks/edit/".concat((0,l.$t)({id:t._id,ws:c.ws})),t.saveUrl="tasks/save/".concat((0,l.$t)({id:t._id,ws:c.ws})),t.fetch(),t):Oe(t,t.error="workspace missing")}return t=a,r=[{key:"matchForm",value:function(e,t){var n,r=t.nav,o=be(n=e)||de(n)||ge(n)||me(),i=o[0],l=o.slice(1);if(i===Ce)return new a({route:l,nav:r})}}],(n=[{key:"_acceptDataFromServer",value:function(e){var t,n=e.task,r=e.is_group_manager,o=e.group_id,i=e.members_can_set_status;this.bookmark=n.bookmarked,this.subTasks=(null===(t=n.sub_tasks)||void 0===t?void 0:t.map((function(e){return e.task_type_color=(0,l.Mo)(e.task_type_colors,[])[0],e})))||{},Object.assign(this.notification,n.notification),Object.assign(this.subTasks,n.sub_tasks),this.group_id=o,this.flags.is_group_manager=!0===r,this.flags.can_update=n.may_edit||!n.task_id,this.flags.may_edit=n.may_edit,this.flags.can_change_status=this.flags.can_update||i||n.allocated_to==Blsm.user.id,this.flags.can_change_status||(this.confirmButtonLabel=!1),this.loadTaskData(n),this.buildFields(),this._prepFields(n),this.ready=!0}},{key:"loadTaskData",value:function(e){var t=this;if(this._windowTitle=this.title=this.createMode?lng("new task").caps():e.task_title.caps(),this._id){if(this.commentsStore=this.commentsStore||new y.pE({type:"task",object_id:this._id}),this.flags.is_group_manager&&(this.managersCommentsStore=this.managersCommentsStore||new y.pE({type:"task_manager",object_id:this._id})),this.gotoComment){var n=function(e,n){t.gotoComment&&("task_manager"!==e.type&&"task_manager"!==(null==n?void 0:n.type)||(t.showManagersComments=!0),e.scrollTo=!0,t.gotoComment=null)};this.commentsStore.findComment(this.gotoComment,n),this.flags.is_group_manager&&this.managersCommentsStore.findComment(this.gotoComment,n)}this.headExtra=(0,$.tZ)(Fe,{form:this});var r=I.X.get("recent_tasks_"+Blsm.user.id)||[];Array.isArray(r)||(r=[]),(r=r.filter((function(e){return e!=t._id}))).unshift(+this._id),r=r.slice(0,50),I.X.set("recent_tasks_"+Blsm.user.id,r);var o=(0,x.vm)();if(o.hasStore("home")){var i=o.getStore("home").getTasksStore(!0);null==i||i.addToRecentTasks(e)}setTimeout((function(){return t.listenToNotifications()}),1e3)}}},{key:"listenToNotifications",value:function(){var e=this,t=x.Nd.once("FetchNotifications",(function(t){t.forEach((function(t){t.data.task_id===e._id&&"update"===t.data.action&&"conflict"!==e.status&&!1!==e.ready&&(console.warn("outdated task from notifications",t.data),e.confirmButtonLabel=lng("outdated").caps(),e.status="conflict",(0,ce.LB)({msg:lng("this task was changed by someone else and is outdated.")+" "+lng("refresh to update.").caps(),type:"warning",closeOnClick:!0}))}))}));(0,s.autorun)((function(){!1===e.ready&&(null==t||t())}))}},{key:"buildFields",value:function(){var e,t,n,r=this,o=function(e,t){return e.get(t)&&r.moreFields.set(t,!0),r.moreFields.get(t)},a=(0,c.observer)((function(){var e=[{val:"condition_task",label:lng("condition"),attr:{"data-val":"condition_task"}},{val:"parent_task",label:lng("parent"),attr:{"data-val":"parent_task"}},{val:"duplicate_task",label:lng("duplicated task"),attr:{"data-val":"duplicate_task"}}].concat(r.serverResponse.custom_fields.map((function(e){return{val:e.field_column,label:e.field_name,attr:{"data-val":e.field_column}}})));return e=e.filter((function(e){return!r.moreFields.has(e.val)})),r.subTasks.length>0&&(e=e.filter((function(e){return"parent_task"!=e.val}))),e.length?(0,$.tZ)(u.x,{options:e,onSelect:function(e){return r.moreFields.set(e,!0)},inForm:!0,children:(0,$.BX)(B.V,{theme:"contained",disabled:!r.flags.can_update,onClick:function(){return null},className:"addfield",children:[(0,$.tZ)(h.JO,{icon:"mark_plus_light"})," ",lng("add field").caps()]})}):null})),p=(0,s.observable)(this.serverResponse.task.files||[]),f=(0,s.observable)(this.serverResponse.task.mailing_list||[]),g=this.subTasks,y={font:!0,color:!0,link:!0,attach:!0,list:!0,media_link:!0};this._fields=[{type:"text",name:"task_title",label:lng("title"),required:!0,maxLength:Math.max(110,(null===(e=this.serverResponse)||void 0===e||null===(t=e.task)||void 0===t||null===(n=t.task_title)||void 0===n?void 0:n.length)||0),autoDir:!0,disable:!this.flags.can_update},this.typeRow(),{type:"component",Render:Ie,name:"status_id",props:{tasks_status:this.serverResponse.tasks_status,disable:!(this.flags.can_change_status||this.flags.can_update)}},{type:"richtext",name:"task_description",label:lng("description"),disable:!this.flags.can_update,onValueChange:function(e,t){return r.updateValue((null==t?void 0:t.length)>0?t:void 0,"task_description_commands")},toolbarOptions:{font:!0,color:!0,link:!0,attach:!0,list:!0,media_link:!0,upload:"task"}},{type:"section",title:lng("settings"),titleSmall:!0,titleIcon:"settings",titleExtra:(0,$.tZ)(a,{}),fields:[this.assigneeRow(),this.datesRow(),this.checkboxRow(),this.connectRow(o)].concat(this._customFieldsPrep(this.serverResponse.custom_fields,{columns:3,visible:o,disable:!this.flags.can_update}))},{type:"section",column:1,title:lng("attachments"),titleSmall:!0,titleIcon:"attachment",titleExtra:this.flags.can_update&&(0,$.tZ)("label",{children:(0,$.BX)(B.V,{theme:"contained",style:{fontSize:".8em"},onClick:function(){return null},children:[(0,$.tZ)(h.JO,{icon:"mark_plus_light"})," ",lng("add file").caps(),(0,$.tZ)("input",{type:"file",name:"file",multiple:!0,onChange:function(e){return t=e,void Array.prototype.forEach.call(t.target.files,(function(e){r._id?(0,k.SC)("file/"+(0,l.$t)({task_id:r._id}),{method:"POST",data:{file:e}},(function(e){p.push(e)})):(0,k.SC)("ajax/requests.php?req=LoadTempFile",{method:"POST",data:{file:e,key:"file",options:{type:"attachment"}}},(function(e){if((0,l.P$)(e.res)){var t=e.full,n=e.name,o=e.size;p.push({file_name:n,file_id:t,temp:!0,creation_time:(0,l.c7)(),file_size:o});var i=r.values.get("tmp_files")||[];i.push(e),r.updateValue(i,"tmp_files")}}))}));var t},style:{opacity:0,width:0}})]})}),fields:[{type:"component",Render:Ne,props:{files:p}}]},{type:"section",title:lng("mailing list"),insert:!!this._id,titleSmall:!0,titleIcon:"notifications",titleExtra:this.flags.may_edit&&(0,$.tZ)((function(){var e,t=fe((0,i.useState)(!1),2),n=t[0],o=t[1],a=fe((0,i.useState)(f.map((function(e){return parseInt(e.user_id)}))||[]),2),l=a[0],s=a[1];return(0,$.BX)($.HY,{children:[(0,$.BX)(B.V,{theme:"contained",style:{fontSize:".8em"},onClick:function(){return o(!0)},children:[(0,$.tZ)(h.JO,{icon:"group"})," ",lng("add/remove users").caps()]}),n&&(0,$.tZ)(w.T,{title:lng("add/remove users from mailing list").caps(),onClose:function(){return e=l,t=f.map((function(e){return parseInt(e.user_id)})),e.length===t.length&&e.filter((function(e){return t.includes(e)})).length===t.length||(0,k.SC)("mailinglist/sync",{data:{task_id:r._id,list:e}},(function(e){f.replace(e)})),o(!1);var e,t},width:"400px",children:(0,$.tZ)("div",{children:null===(e=r.serverResponse.users)||void 0===e?void 0:e.map((function(e){var t=e.full_name,n=e.user_id;return(0,$.BX)("div",{children:[(0,$.tZ)(O.I,{type:"checkbox",value:l.includes(n),onChange:function(e){return s(e?[].concat(pe(l),[n]):l.filter((function(e){return e!==n})))}}),t]},n)}))})})]})}),{}),fields:[{type:"component",node:(0,$.tZ)(c.Observer,{children:function(){return f.length?(0,$.tZ)(_.I9,{users:f,totalCount:f.length,maxSlots:10}):lng("no one else will know!").caps()}})}]},{type:"section",title:lng("sub tasks"),insert:!!this._id,visible:function(){return!r.values.get("parent_task")},titleSmall:!0,titleIcon:"checkbox_checked",titleExtra:this.flags.can_update&&(0,$.tZ)($.HY,{children:(0,$.BX)("span",{children:[(0,$.BX)(B.V,{theme:"contained",onClick:function(){return(0,x.vm)().openDialog("form",new K({ws:r.group_id,pid:r._id,exclude:r.subTasks,add:function(e){return g.push(e)}}))},children:[(0,$.tZ)(h.JO,{icon:"mark_plus_light"})," ",lng("add sub task").caps()]}),(0,$.BX)(B.V,{theme:"contained",style:{fontSize:window.innerWidth>370?".8em":".6em"},onClick:function(){return r.dirty?Blsm.Alert(lng("please save changes")):(0,m.p4)({edit:"task",params:{ws:r.group_id,pid:r._id}},!0)},children:[(0,$.tZ)(h.JO,{icon:"mark_plus_light"})," ",lng("new sub task").caps()]})]})}),fields:[{type:"component",node:(0,$.tZ)(Xe,{tasks:this.subTasks,manager:this.flags.is_group_manager})}]},{type:"section",column:1,title:lng("comments"),insert:!!this._id,titleSmall:!0,titleIcon:"discussion",titleExtra:this.flags.is_group_manager&&!(0,l.tq)()&&(0,$.tZ)(c.Observer,{children:function(){var e;return(0,$.BX)(B.V,{theme:"contained",style:{fontSize:".8em"},onClick:function(){return r.showManagersComments=!r.showManagersComments},active:r.showManagersComments,children:[(0,$.tZ)(h.JO,{icon:"manager"})," ",lng("manager comments").caps()," (",null===(e=r.managersCommentsStore)||void 0===e?void 0:e.size,")"]})}}),fields:[{type:"component",node:(0,$.tZ)(b.H,{richTextOptions:y,commentsStore:this.commentsStore,connectTo:{type:"task",object_id:this._id},refresh:!0,labels:this.flags.is_group_manager}),visible:function(){return!r.showManagersComments}},{type:"component",node:(0,$.tZ)(b.Y.Provider,{value:{bgColor:d.g.darkMode?"#4a3c27":"#fdf1de"},children:(0,$.tZ)(b.H,{richTextOptions:y,commentsStore:this.managersCommentsStore,connectTo:{type:"task_manager",object_id:this._id},refresh:!0,labels:this.flags.is_group_manager})}),visible:function(){return r.showManagersComments},insert:this.flags.is_group_manager}]},{type:"component",node:(0,$.tZ)(Ve,{form:this}),insert:!!this._id}]}},{key:"connectRow",value:function(e){var t=this;return{type:"row_set",fields:[{type:"single_item",name:"condition_task",disable:!this.flags.can_update,label:lng("condition"),visible:e,searchData:function(e,n){(0,k.SC)("tasks/search",{data:{ws:t.group_id,exclude:t._id,term:e.term,id:e.ids}},n)},buttons:[{Render:this.taskLink}]},{type:"single_item",name:"parent_task",disable:!this.flags.can_update,label:lng("parent"),value:this.params.pid,visible:e,searchData:function(e,n){(0,k.SC)("tasks/search",{data:{ws:t.group_id,parent:1,exclude:t._id,term:e.term,id:e.ids}},n)},buttons:[{insert:!1,Render:this.newSiblingTask,props:{group_id:this.group_id,visible:!!this._id}},{Render:this.taskLink}]},{type:"single_item",name:"duplicate_task",disable:!this.flags.can_update,label:lng("duplicated task"),visible:e,searchData:function(e,n){(0,k.SC)("tasks/search",{data:{exclude:t._id,term:e.term,id:e.ids}},n)},buttons:[{Render:this.taskLink}]}]}}},{key:"checkboxRow",value:function(){return{type:"row_set",insert:this.flags.is_group_manager,skinny:!0,fields:[{type:"checkbox",name:"manager_only",label:lng("manager only"),disable:!this.flags.can_update},{type:"checkbox",name:"task_locked",label:lng("lock for members"),disable:!this.flags.can_update},{type:"checkbox",name:"archive",label:lng("archive|verb"),disable:!this.flags.can_update},{type:"checkbox",name:"skip_notifications",label:lng("notify"),insert:this.flags.is_group_manager,reversed:!0}]}}},{key:"datesRow",value:function(){return{type:"row_set",fields:[{type:"date_time",name:"start_date",label:lng("start date"),disable:!this.flags.can_update},{type:"date_time",name:"due_date",label:lng("due date"),disable:!this.flags.can_update}]}}},{key:"taskLink",value:function(e){var t=this,n=e.item;return(0,$.tZ)(h.JO,{icon:"enter",onClick:function(){return t.dirty?Blsm.Alert(lng("please save changes")):(0,m.p4)({edit:"task",id:n.id},!0)}})}},{key:"newSiblingTask",value:function(e){var t=this,n=e.item,r=e.group_id;return e.visible&&(0,$.tZ)(h.JO,{icon:"new",toolTip:lng("new sibling task"),onClick:function(){return t.dirty?Blsm.Alert(lng("please save changes")):(0,m.p4)({edit:"task",params:{ws:r,pid:n.id}},!0)}})}},{key:"assigneeRow",value:function(){return{type:"row_set",fields:[{type:"select",name:"allocated_to",label:lng("assignee"),disable:!(this.flags.can_change_status||this.flags.can_update),emptyOption:!0,options:[{optgroup:!0,label:lng("managers").caps(),options:this.serverResponse.users.filter((function(e){return e.is_manager})).map((function(e){return{val:e.user_id,label:e.full_name}}))},{optgroup:!0,label:lng("members").caps(),options:this.serverResponse.users.filter((function(e){return!e.is_manager})).map((function(e){return{val:e.user_id,label:e.full_name}}))}],value:this._id?void 0:this.serverResponse.default_assignee,required:!0},{type:"select",name:"priority",label:lng("priority"),insert:this.flags.is_group_manager,options:(0,l.wd)(Blsm.InitialData.parameters.priority),emptyOption:!0},{type:"select",name:"severity",label:lng("severity"),options:(0,l.wd)(Blsm.InitialData.parameters.severity),emptyOption:!0,disable:!this.flags.can_update}]}}},{key:"typeRow",value:function(){return{type:"row_set",fields:[{type:"component",Render:De,grow:3,props:this.serverResponse},{type:"component",Render:Be,name:"task_type_id",props:{tasks_types:this.serverResponse.tasks_types,task_id:this.serverResponse.task.task_id,disable:!this.flags.can_update},grow:1,align:d.g.far,label:lng("task type"),required:!0}]}}},{key:"SaveSuccess",value:function(e){var t=e.task,n=e.id;this.status=null,this._id?(this.nav([Ce,n],{replace:!0,trigger:!1}),this.loadTaskData(t),this.buildFields(),this._prepFields(t),this.rebuild=this.rebuild+1):this.nav([Ce,n]),x.Nd.trigger("TaskUpdate",{id:n,task:t})}},{key:"toggleBookmark",value:function(){var e={type:"task",id:this._id,delete:this.bookmark?"1":"0"};(0,k.SC)("bookmarks",{method:"POST",data:e}),this.bookmark=!this.bookmark}},{key:"deleteTask",value:function(){var e=this;(0,P.BB)(lng("are you sure you want to delete this task?").caps(),{title:lng("delete task"),confirmText:lng("delete"),onConfirm:function(){return(0,k.SC)("tasks/delete",{data:{id:e._id}},(function(){var t;x.Nd.trigger("TaskDelete",{id:e._id}),null===(t=e.onClose)||void 0===t||t.call(e)}))}})}},{key:"saveNotification",value:function(){var e=this;this.notification_change&&(0,k.SC)("tasks/save_notification",{method:"POST",data:{id:this._id,notification:(0,s.toJS)(this.notification)}},(0,s.action)((function(t){e.notification_change=!1,e.notification.notification_id=t.notification_id})))}},{key:"alertBeforeClose",get:function(){var e,t;return!!(null!==(e=this.commentsStore)&&void 0!==e&&e.dirty||null!==(t=this.managersCommentsStore)&&void 0!==t&&t.dirty)&&lng("you have written a comment, do you want to discard it?")}}])&&ve(t.prototype,n),r&&ve(t,r),a}(v.Z),ne=je(te.prototype,"showManagersComments",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),re=je(te.prototype,"moreFields",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),oe=je(te.prototype,"bookmark",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie=je(te.prototype,"notification",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{notification_id:null,notification_text:"",notification_date:""}}}),ae=je(te.prototype,"subTasks",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),je(te.prototype,"alertBeforeClose",[s.override],Object.getOwnPropertyDescriptor(te.prototype,"alertBeforeClose"),te.prototype),je(te.prototype,"_acceptDataFromServer",[s.action],Object.getOwnPropertyDescriptor(te.prototype,"_acceptDataFromServer"),te.prototype),je(te.prototype,"taskLink",[Y],Object.getOwnPropertyDescriptor(te.prototype,"taskLink"),te.prototype),je(te.prototype,"newSiblingTask",[Q],Object.getOwnPropertyDescriptor(te.prototype,"newSiblingTask"),te.prototype),je(te.prototype,"SaveSuccess",[ee],Object.getOwnPropertyDescriptor(te.prototype,"SaveSuccess"),te.prototype),te),Ze=(0,a.iv)("color:",d.g.colors.negative,";font-weight:bold;>.link{font-weight:normal;text-decoration:underline;}",""),Be=(0,c.observer)((function(e){var t,n=e.value,r=e.onChange,o=e.tasks_types,i=e.task_id,a=e.error,l=e.disable,s=!!n&&(null==o?void 0:o.find((function(e){return e.id==n})));s?s.color=null===(t=s)||void 0===t?void 0:t.colors[0]:s={name:lng("select type").caps(),color:"#000"};var c=null==o?void 0:o.filter((function(e){return e.enabled})).map((function(e){return{val:e.id,label:e.name,color:e.colors[0]}})),f=(0,$.BX)(p.jC,{color:a?"white":s.color,accentColor:a?d.g.colors.negative:void 0,children:[(0,$.tZ)("span",{className:"_text",children:s.name})," ",l?"":"▼"]});return(0,$.BX)("div",{children:[i&&(0,$.BX)("div",{style:{marginBottom:"3px",fontSize:"0.8em",textAlign:d.g.far},children:["#",i]}),0===(c||[]).length?(0,$.BX)("div",{css:Ze,children:[lng("no task types").caps(),(0,$.tZ)("br",{}),Blsm.user.isPowerManager&&(0,$.tZ)("div",{className:"link",children:(0,$.tZ)(m.A,{href:{list:"task_types"},children:lng("create one now").caps()})})]}):l?f:(0,$.tZ)(u.x,{options:c,onSelect:r,inForm:!0,children:f})]})})),Te=function(e,t){return"\n\t> ._status > div:nth-of-type(-n+".concat(e,"){\n\t\tcolor: white;\n\t}\n\t> ._status > div:nth-of-type(-n+").concat(e-1,"){\n\t\t._status_label {\n\t\t\topacity: .7;\n\t\t\tfont-weight: lighter;\n\t\t}\n\t}\n\t> ._bg{\n\t\tbackground-color: ").concat(t,";\n\t\twidth: ").concat(25*e,"%;\n\t}\n")},Ee=(0,a.iv)("position:relative;background-color:",d.g.darkMode?d.g.colors.bg_main:"#E2E2E2",";border-radius:4px;&.disable{pointer-events:none;}>._status{position:relative;display:flex;>div{width:25%;padding:7px;&:nth-of-type(1){border-top-",d.g.near,"-radius:4px;border-bottom-",d.g.near,"-radius:4px;}&.active{border-top-",d.g.far,"-radius:4px;border-bottom-",d.g.far,"-radius:4px;}>._btn{width:100%;div._status_label{display:flex;>div:nth-of-type(1){flex-grow:1;",d.g.classes.ellipsis,";}}}&:hover{background-color:rgba(255, 255, 255, .1);}}}._bg{position:absolute;border-radius:4px;width:100%;height:100%;transition:all .4s;}&.open{",Te(1,(0,S.Pp)("open")),";}&.in_progress{",Te(2,(0,S.Pp)("in_progress")),";}&.closed{",Te(3,(0,S.Pp)("closed")),";}&.on_hold{",Te(4,(0,S.Pp)("on_hold")),";}",""),Ie=(0,c.observer)((function(e){var t,n=e.value,r=e.onChange,o=e.tasks_status,i=e.disable,a={open:[],in_progress:[],closed:[],on_hold:[]},s=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=ge(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(o||[]);try{for(s.s();!(t=s.n()).done;){var c=t.value;a[c.task_resolution||c.resolve].push(c)}}catch(e){s.e(e)}finally{s.f()}var p=o.find((function(e){return e.status_id==n}))||{status_name:null,task_resolution:"open"},d=p.status_name,f=p.task_resolution,m=function(e){var t=new CustomEvent("StatusBarChange",{detail:{status_id:e}});return document.body.dispatchEvent(t),r(e)};return(0,$.BX)("div",{css:Ee,className:(0,l.AK)(f,{disable:i}),"data-task_resolution":f,children:[(0,$.tZ)("div",{className:"_bg"}),(0,$.tZ)("div",{className:"_status",children:["open","in_progress","closed","on_hold"].map((function(e){var t=a[e].filter((function(e){return e.enabled})).map((function(e){return{val:e.status_id,label:e.status_name,attr:{"data-status_id":e.status_id}}}));return(0,$.tZ)(u.x,{className:(0,l.AK)({active:e===f}),options:t,onSelect:m,inForm:!0,children:(0,$.BX)("div",{className:"_status_label",children:[(0,$.tZ)("div",{children:f===e?(0,S.HR)(d,f).caps(!1):(0,S.Ey)(e).caps(!1)}),t.length>0&&(0,$.tZ)("div",{children:"▼"})]})},e)}))})]})})),Ae={name:"16mxzjp",styles:"font-size:.9em;>div *{display:inline-block;}a{text-decoration:underline;}[data-duplicates] a{display:inline;}"},De=(0,c.observer)((function(e){var t=e.task,n=e.group_id,r=e.group_name,o=t.creator_id,a=t.creator_name,l=t.creation_time,s=t.modified_by,c=t.modifier_name,u=t.modified_time,p=t.parent_task,d=t.parent_title,g=t.duplicates;return(0,$.BX)("div",{css:Ae,children:[n&&r&&(0,$.BX)("div",{"data-group_id":n,children:[lng("workspace").caps(),": ",(0,$.tZ)(m.A,{href:{workspace:n,tab:"tasks"},children:r})]}),p&&(0,$.BX)("div",{"data-parent_id":p,children:[lng("parent").caps(),": ",(0,$.tZ)(m.A,{href:{edit:"task",id:p},children:d})]}),o&&(0,$.BX)("div",{"data-creator_id":o,"data-creation_time":l,children:[lng("created by").caps()," ",(0,$.tZ)(m.A,{href:{user:o},newTab:!0,children:a}),", ",(0,$.tZ)(f.ij,{time:l})]}),s&&(0,$.BX)("div",{"data-modified_by":s,"data-modified_time":u,children:[lng("modified by").caps()," ",(0,$.tZ)(m.A,{href:{user:s},newTab:!0,children:c}),", ",(0,$.tZ)(f.ij,{time:u})]}),(null==g?void 0:g.length)>0&&(0,$.BX)("div",{"data-duplicates":g.map((function(e){return e.task_id})).join(","),children:[lng("duplicates").caps(),": ",g.map((function(e,t){return(0,$.BX)(i.Fragment,{children:[(0,$.tZ)(m.A,{href:{edit:"task",id:e.task_id},newTab:!0,children:e.task_title}),t<g.length-1&&", "]},t)}))]})]})})),Re=(0,a.iv)("display:flex;>*+*{",d.g.classes.margin_near("10px"),";}",""),Ne=(0,c.observer)((function(e){var t=e.files,n=e.assignmentId;return(0,$.tZ)("div",{css:Re,children:null==t?void 0:t.map((function(e){return(0,$.tZ)(Me,{file:e,remove:function(e){return t.remove(e)},assignmentId:n},e.file_id)}))})})),ze=(0,a.iv)("position:relative;width:120px;background-color:",d.g.colors.bg_1,";height:100px;border-radius:5px;overflow:hidden;",d.g.classes.shadow_strong,";display:flex;justify-content:center;align-items:center;.right-top{position:absolute;display:block;right:5px;top:5px;}",""),Me=(0,c.observer)((function(e){var t=e.file,n=e.remove,r=e.assignmentId,o=t.file_name,i=t.file_id,a=t.temp,s=[{val:"download",label:lng("download")},{val:"delete",label:lng("delete")}],c=(0,A.BX)(o);return(0,$.BX)(m.A,{href:{file:t,assignmentId:r},"data-preview":c,newTab:!0,css:ze,children:[(0,$.tZ)(u.x,{className:"menu",options:s,onSelect:function(e){switch(e){case"delete":(0,P.BB)(lng("are you sure you want to delete this file?"),{onConfirm:function(){!0===a?n(t):(0,k.SC)("file/"+(r>0?"activity=".concat(r,"/").concat(i):(0,l.$t)({file_id:i})),{method:"DELETE"},(function(){return n(t)}))}});break;case"download":(0,m.p4)({file:{file_id:i}},!0,!0)}},children:(0,$.tZ)(h.JO,{className:"right-top",icon:"menu"})}),(0,$.tZ)(se,{file:t,assignmentId:r})]})})),Fe=(0,c.observer)((function(e){var t,n,r,o=e.form,i=[{input:{type:"date_time",value:(0,D.GG)(null===(t=o.notification)||void 0===t?void 0:t.notification_date)||"",name:"notification_date"},label:lng("date")},{input:{type:"textarea",value:(null===(n=o.notification)||void 0===n?void 0:n.notification_text)||"",name:"notification_text"},label:lng("text")}],a=function(e){e.notification_date&&!(0,Z.R)(e.notification_date)||(o.notification=e?Object.assign((0,s.toJS)(o.notification),e):{},o.notification_change=!0)};return(0,$.BX)(E.b,{children:[(0,$.tZ)(h.JO,{icon:"arrow_out_square",className:"task-button",toolTip:lng("open in new tab"),onClick:function(){return(0,m.p4)({edit:"task",id:o._id},!0,!0)}}),o._id&&o.flags.can_update&&(0,$.tZ)(h.JO,{icon:"trash",className:"task-button",onClick:function(){return o.deleteTask()}}),(0,$.tZ)(h.JO,{icon:"bookmark",className:(0,l.AK)("task-button",{_filled:o.bookmark}),onClick:function(){return o.toggleBookmark()}}),(0,$.tZ)(u.x,{title:lng("task notification"),options:i,inputChange:a,onClear:function(){return a(!1)},onClose:function(){return o.saveNotification()},inForm:!0,children:(0,$.tZ)(h.JO,{icon:"notifications",className:(0,l.AK)("task-button",{_filled:null===(r=o.notification)||void 0===r?void 0:r.notification_id})})})]})})),qe=(0,a.iv)("table{width:100%;td{padding:10px;}}._task-title{color:",d.g.colors.text_main,";font-weight:600;}._task-id{font-size:.7em;}tr td ._goto{font-size:.9em;}",""),Xe=(0,c.observer)((function(e){var t=e.tasks,n=e.manager;return(0,$.tZ)("div",{css:qe,children:(0,$.tZ)("table",{children:(0,$.tZ)("tbody",{children:(null==t?void 0:t.length)>0&&t.map((function(e){return(0,$.tZ)(Le,{task:e,manager:n},e.task_id)}))})})})})),Le=function(e){var t=e.task,n=e.manager;return(0,$.BX)("tr",{children:[(0,$.tZ)("td",{children:(0,$.tZ)(g.u,{text:(0,S.HR)(t.status_name,t.task_resolution).caps(!1),children:(0,$.tZ)(h.gT,{color:(0,S.Pp)(t.task_resolution),size:"1.2em"})})}),(0,$.BX)("td",{children:[(0,$.tZ)(C.m,{children:(0,$.tZ)("div",{className:"_task-title",children:t.task_title})}),(0,$.BX)("div",{className:"_task-id",children:["#",t.task_id]})]}),(0,$.tZ)("td",{children:t.task_type&&(0,$.tZ)(p.jC,{color:t.task_type_color,children:t.task_type})}),(0,$.tZ)("td",{children:t.allocated_to&&(0,$.tZ)(j.SV,{children:(0,$.tZ)(_.qE,{user:{user_id:t.allocated_to,full_name:t.assignee_name,user_avatar:t.assignee_avatar}})})}),n&&(0,$.tZ)("td",{children:(0,S.aS)(t.priority)}),(0,$.tZ)("td",{children:(0,$.tZ)(m.A,{href:{edit:"task",id:t.task_id},children:(0,$.tZ)(T.ZT,{icon:"go_arrow",bgColor:d.g.colors.light_blue,className:"_goto",size:29})})})]})},Ue=(0,a.iv)("position:absolute;bottom:5px;",d.g.far,":5px;display:flex;flex-direction:column;.nav-icon .Icon{font-size:10px;}.nav-icon+.nav-icon{margin-top:1px;}",""),Ve=(0,c.observer)((function(e){var t=e.form,n=function(e){var t=e.currentTarget.closest(".container-children"),n=t.getElementsByClassName("splitter-1");return n.length?n[0]:t};return(0,$.BX)("div",{css:Ue,children:[t.flags.is_group_manager&&(0,$.tZ)(g.u,{text:lng("toggle manager comments").caps(),className:"nav-icon",children:(0,$.tZ)(T.ZT,{icon:"manager",onClick:function(){t.showManagersComments=!t.showManagersComments},size:20,bgColor:t.showManagersComments?d.g.colors.dominant_orange:void 0})}),(0,$.tZ)(g.u,{text:lng("scroll to the top").caps(),className:"nav-icon",children:(0,$.tZ)(T.ZT,{icon:"arrow_up",onClick:function(e){n(e).scrollTo({top:0,behavior:"smooth"})},size:20})}),(0,$.tZ)(g.u,{text:lng("scroll to the bottom").caps(),className:"nav-icon",children:(0,$.tZ)(T.ZT,{icon:"arrow_down",onClick:function(e){var t=n(e);t.scrollTo({top:t.scrollHeight,behavior:"smooth"})},size:20})})]})}))},35519:function(e,t,n){"use strict";n.d(t,{Kz:function(){return O},Pl:function(){return k},R9:function(){return _},V_:function(){return S},hy:function(){return y},qx:function(){return C},xE:function(){return w},yP:function(){return P},z9:function(){return v}});var r=n(87363),o=n(45459),i=n(70917),a=n(16920),l=n(73105),s=n(43698),c=n(40493),u=n(71134),p=n(98e3),d=n(66975),f=n(68567),m=(n(57882),n(15560)),g=n(35944);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y="2",v=[0,1,5,10,15,20,30,40,45,60,75,90,120,150,180],_=function(e){var t=e.input,n=t.bg,r=t.helpKey,a=t.skinny,l=t.label,s=t.wrap,c=t.bold,u=t.direction,p=(0,i.iv)("padding:11px 13px;",s?"":"white-space: nowrap;"," ",a&&"padding-top: 5px; padding-bottom: 5px;"," ",n&&"background-color: ".concat(n,"; color: white; border-radius: 8px;")," ",r&&".help-sign {\n\t\t\tmargin: 0 13px\n\t\t}"," ",c&&"font-weight: 600;"," ",u&&"direction: ".concat(u,";"),";","");return(0,g.BX)("div",{css:p,children:[r&&(0,g.tZ)(o.I,{helpKey:r}),l]})},w=function(e){var t=e.onChange,n=e.item,r=(0,i.iv)("input{width:40px;border:0;background-color:transparent;border-bottom:2px solid ",a.g.colors.separator,";}","");return(0,g.tZ)("div",{css:r,children:(0,g.tZ)(l.u,{text:lng("allocation amount").caps(),children:(0,g.tZ)(s.I,{type:"number",onChange:function(e){return t({value:e})},value:n.allocation,style:{textAlign:"right"},min:"0",step:"1"})})})},O=function(e){var t=e.onChange,n=e.item;return(0,g.tZ)("div",{children:(0,g.tZ)(l.u,{text:lng("include sub units").caps(),children:(0,g.tZ)(c.T,{value:!!n.use_sub_groups,size:18,onChange:t,options:[{val:!1,color:a.g.colors.dominant_main,icon:"mark_x_light"},{val:!0,color:a.g.colors.dominant_main,icon:"mark_v_light"}]})})})},k=function(e){var t=e.onChange,n=e.item,r=(0,i.iv)("input{width:40px;border:0;background-color:transparent;border-bottom:2px solid ",a.g.colors.separator,";}","");return(0,g.tZ)("div",{css:r,children:(0,g.tZ)(l.u,{text:lng("order").caps(),children:(0,g.tZ)(s.I,{type:"number",onChange:function(e){return t({value:e})},value:n.order,style:{textAlign:"right"}})})})},x={name:"1kgxk17",styles:".input{text-align:right;}.resource_amount{min-width:2ch;display:inline-block;margin:0 2px;text-align:center;&.infinite{font-size:120%;line-height:1;vertical-align:middle;}}.warning{margin:0 5px;}"},S=function(e){var t=e.onChange,n=e.item,o=e.period,i=e.assignmentId,l=e.groupId,c=n.note,m=n.resource_name,b=n.resource_amount,y=n.resource_category,v=n.resource_id,_=(0,u.DM)(n.amount_in_use)?n.amount_in_use:1,w=null===b,O=h((0,r.useState)(""),2),k=O[0],S=O[1],j=parseInt(y)===Blsm.prm.INSTRUCTOR_CATEGORY,C="",P=function(){var e=o();e&&(0,p.SC)("meetings/check_time",{data:{start:e[0],end:e[1],id:i,group:l,resource_id:v,amount_in_use:_,onlyConflicts:!0}},(function(e){var t=e.resources_conflicts?"".concat(lng("conflict"),": ").concat(e.resources_conflicts):"";S(t)}))};return k||P(),!w&&_>b&&(C="".concat(lng("resource amount is").caps()," ").concat(b)),(0,g.BX)("div",{css:x,children:[(k||C)&&(0,g.tZ)(d.JO,{className:"warning",icon:"sign_notification",color:a.g.colors.negative,toolTip:[k,C].filter((function(e){return e})).join("\n")}),!j&&(0,g.BX)("span",{children:[(0,g.tZ)(s.I,{inline:!0,minimalist:!0,skinny:!0,wrapped:!0,className:"input",type:"number",min:"1",max:Math.max(99,2*b||0),value:_,onChange:function(e){return t({amount_in_use:e}),P()}}),"/",(0,g.tZ)("span",{className:(0,u.AK)("resource_amount",{infinite:w}),children:w?"∞":b})]}),!j&&(0,g.tZ)(d.JO,{icon:"chat",color:c&&a.g.colors.blossom,toolTip:c||lng("add note"),buttonLike:!0,onClick:function(){(0,f.cS)("",{title:"".concat(lng("note for").caps()," ").concat(m),confirmText:lng("confirm"),inputType:"textarea",limit:150,startValue:c,onConfirm:function(e){return t({note:e})}})}})]})},j=(0,i.iv)("input{width:40px;border:0;background-color:transparent;border-bottom:2px solid ",a.g.colors.separator,";}",""),C=function(e){var t=e.item,n=e.onChange,r=e.values,o=[["start_and_repeat",lng("every time")],["finish",lng("first time")],["repeat",lng("refresh")]];return"none"!==r.get("repeat_type")?(0,g.tZ)("div",{css:j,children:(0,g.tZ)(s.I,{type:"select",value:t.dependency_type,label:lng("repeat type"),onChange:function(e){return n({value:e})},options:(0,u.wd)(o)})}):null},P=(0,m.observer)((function(e){var t=e.item,n=e.onChange,r=e.disable;return(0,g.tZ)("div",{css:j,children:(0,g.tZ)(s.I,{type:"checkbox",onChange:function(e){return n({value:e})},disabled:r(),value:t.optional,label:lng("optional"),style:{textAlign:"right"}})})}))},94576:function(e,t,n){"use strict";n.d(t,{BP:function(){return m},Gu:function(){return c},h1:function(){return g},i1:function(){return f},i6:function(){return u},pM:function(){return p},wQ:function(){return d}});var r=n(71134);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,l=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return l=e.done,e},e:function(e){s=!0,a=e},f:function(){try{l||null==n.return||n.return()}finally{if(s)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=function(e,t,n){return l(l(l({user:(e||lng("user")).caps(),manager:lng("%s's direct manager",e).caps(),users_indirect_manager:lng("%s's indirect manager",e).caps(),users_managers_manager:lng("%s's manager's manager",e).caps(),user_professional_manager:lng("%s's professional manager",e).caps(),user_hr_manager:lng("%s's human resources coordinator",e).caps(),personal_coach:lng("%s's personal coach",e).caps()},Blsm.isFeatureEnabled("authorization_qualification")&&{user_auth_supervisor_id:lng("%s's job authorization supervisor",e).caps()}),n&&{coach:lng("%s's assigned coach",e).caps()}),(void 0===t||t)&&{other:lng("users, roles, workspaces").caps(!1)})},u=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.folders=t.folders||[],t.indent_char=t.indent_char||" ",t.all&&t.folders.unshift(["all",lng("all").caps()]);var n=function e(n,i){var a,l=o(n);try{for(l.s();!(a=l.n()).done;){var s=a.value;s.id&&(t.include_non_numeric||(0,r.kE)(s.id)&&"repo"!==s.icon)&&(s.count&&null!=t&&t.display_count&&(s.label+=" (".concat(s.count,")")),t.folders.push([s.id,i+s.label])),s.sons&&s.sons.length&&e(s.sons,i+t.indent_char)}}catch(e){l.e(e)}finally{l.f()}};return n(e,""),t.folders},p=function(e){if(11!==(e=e.replace(/[^\d]+/g,"")).length)return!1;var t;for(t=1;t<e.length&&e[0]===e[t];t++);if(t===e.length)return!1;var n=function(t){for(var n=0,r=0;r<t;r++)n+=parseInt(e.charAt(r))*(t+1-r);var o=11-n%11;return 10!==o&&11!==o||(o=0),o===parseInt(e.charAt(t))};return n(9)&&n(10)},d=function(e){for(var t=0,n=e.length,r=0;r<n;r++){var o=parseInt(e[n-r-1]);r%2==1&&(o*=2),t+=o>9?o-9:o}return t%10==0},f=function(e){return/^(user_identity_num|employee_id)$/.test(e)?40:/^user_(name|first_name|last_name|business_phone|home_phone|mobile_phone|fax_number|city|state|postal_code|country)$/.test(e)?50:/^user_(email|company|job_title|address)/.test(e)?100:void 0},m=function(e){if(!(e*=1))return"";if(e<0)return lng("other");var t=Math.floor(e/60);return e-=60*t,e=Math.round(e),t?1===t?e?lng("1 hour %s minutes",e):lng("1 hour"):e?lng("%s hours %s minutes",t,e):lng("%s hours",t):1===e?lng("1 minute"):lng("%s minutes",e)},g=function(e){return null!=e&&e.level_value?e.level_name||lng("level %s",e.level_value).caps():""}},87138:function(e,t,n){"use strict";n.d(t,{U:function(){return y}});var r=n(24210),o=n(98e3),i=n(35944);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e){return function(e){if(Array.isArray(e))return u(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(l,e);var t,n,r,a=f(l);function l(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),b(g(t=a.call(this,e)),"names",void 0),b(g(t),"ids",void 0),b(g(t),"objName",void 0),b(g(t),"baseRoute",void 0),b(g(t),"extraUrlData",{}),b(g(t),"serverResponse",void 0),b(g(t),"handleFieldSelect",(function(e){c(t.values.keys()).forEach((function(n){n.startsWith("cb_")&&(e.includes(n)?t.values.set(n,!0):t.values.set(n,!1))}))})),t.names=e.names||t.names,t.ids=e.ids||t.ids,t.baseRoute=e.baseRoute||t.baseRoute,t.objName=e.objName||t.baseRoute,t.extraUrlData=e.extraUrlData||t.extraUrlData,t.sendEmpty=!0,t.fetchUrl="".concat(t.baseRoute,"/edit/multi=1&ids=")+t.ids.join(),t.title=lng("edit multiple items").caps()+" (".concat(t.ids.length,")"),t.saveUrl="".concat(t.baseRoute,"/save_multi/multi=1&ids=")+t.ids.join(),(0,o.SC)("".concat(t.baseRoute,"/edit"),{data:s({multi:1,ids:t.ids.join(",")},t.extraUrlData)},(function(e){t.serverResponse=e,t.createAttributes(e),t.createCustomFields(e),t.buildFields()})),t}return t=l,(n=[{key:"createAttributes",value:function(){throw new Error("MultiRowSetterForm:createAttributes abstract function not implemented")}},{key:"createCustomFields",value:function(){this.custom_fields=this._customFieldsPrep(this.serverResponse.custom_fields)}},{key:"buildFields",value:function(){var e=this,t=[{optgroup:!0,label:lng("fields"),options:this.attributes.filter((function(e){return e.name})).map((function(e){return{val:"cb_"+e.name,label:e.label}}))},{optgroup:!0,label:lng("custom fields"),options:this.custom_fields.filter((function(e){return e.name})).map((function(e){return{val:"cb_"+e.name,label:e.label}}))}];this._fields=[].concat(c(this._fields),[{type:"component",node:(0,i.tZ)("b",{text:this.names.join(),children:lng("updating %s items|number",this.ids.length).caps()})},{type:"select_multi",name:"fields_select",theme:"bright",options:t,label:lng("select fields to update"),value:this.params.fieldsSelectInitialValue,onValueChange:function(t){return e.handleFieldSelect(t)}}],c([].concat(c(this.attributes),c(this.custom_fields)).map((function(t){return{type:"row_set",visible:function(n){return t.name?e.values.get("cb_"+t.name):t.visible(n)},fields:[{type:"hidden",name:"cb_"+t.name},s(s({},t),{},{required:function(){return!!e.getValue("cb_"+t.name)&&t.required},placeholder:t.required?lng("cannot be empty").caps():lng("leave empty to clear").caps()})]}})))),this._prepFields(),this.ready=!0,this.params.fieldsSelectInitialValue&&this.handleFieldSelect(this.params.fieldsSelectInitialValue)}},{key:"save",value:function(e){var t=e.fields_select.reduce((function(e,t){return Object.assign(e,b({},t.split("cb_")[1],!0))}),{});for(var n in delete e.fields_select,e)n.startsWith("cb_")&&(n.startsWith("cb_")&&e[n]&&!e[n.split("cb_")[1]]&&delete e[n.split("cb_")[1]],e[n]=e[n]?1:0);this.saveToUrl(this.saveUrl,s(s({},e),{},{field_cb:t,ids:this.ids.join(", ")},this.extraUrlData))}}])&&p(t.prototype,n),r&&p(t,r),l}(r.I)},69829:function(e,t,n){"use strict";n.d(t,{g:function(){return d},l:function(){return m}});var r=n(24210),o=n(60793);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=c(n);function n(e){var r,i=e.onValueChange,l=e.advanced,s=e.type;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,{onValueChange:i}),"mycontent"!==s&&r._fields.push({type:"select",name:"sort",label:lng("sort by").caps(),options:f(s)}),"content"===s||"mycontent"==s){var c=null==l?void 0:l.categories;c&&r._fields.push({type:"select",name:"cat",label:lng("category").caps(),options:c,emptyOption:!0}),"content"==s&&r._fields.push({type:"checkbox",name:"archive",label:lng("search in archive").caps()},{type:"checkbox",name:"official",label:lng("show official").caps()})}var u=null==l?void 0:l.tag_categories;u&&u.map((function(e){var t=e.tags.map((function(e){return{type:"checkbox",name:"tags[".concat(e.tag_id,"]"),label:e.tag_name,checkboxValue:e.tag_id}}));r._fields.push({type:"indent_set",toggle:!0,toggleTitle:e.tag_category_name,fields:t})}));var p=null==l?void 0:l.types;if(p){for(var d=[],g=0,h=Object.entries(p);g<h.length;g++){var b=a(h[g],2),y=b[0],v=b[1];if("text"===y){for(var _=[],w=0,O=Object.entries(l.text_sub_types);w<O.length;w++){var k=a(O[w],2),x=k[0],S=k[1];_.push({type:"checkbox",name:"textsub[".concat(x,"]"),checkboxValue:x,label:S})}var j=[{type:"checkbox",name:"content_types[text]",checkboxValue:y,label:v},{type:"indent_set",fields:_}];d.push.apply(d,j)}else d.push({type:"checkbox",name:"content_types[".concat(y,"]"),checkboxValue:y,label:v})}r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("content type").caps(),fields:d})}var C=m.map((function(e){return{type:"checkbox",name:"duration[".concat(e[0],"]"),checkboxValue:e[0],label:e[1]}}));return r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("estimated duration").caps(),fields:C}),"mycontent"!=s&&r._fields.push({type:"select",name:"period",emptyOption:!0,label:lng("last modified").caps(),options:o.l}),r._prepFields(),r}return n}(r.I),f=function(e){var t=[{val:"relevance",label:lng("relevance").caps()},{val:"date",label:lng("date").caps()}];return"catalogs"===e&&t.push({val:"views",label:lng("popularity").caps()}),t},m=[["0_30",lng("under %s min",30)],["30_60",lng("%s min to 1 hour",30)],["60_120",lng("1 hour to %s hours",2)],["120_",lng("over %s hours",2)]]},60793:function(e,t,n){"use strict";n.d(t,{h:function(){return d},l:function(){return f}});var r=n(24210),o=n(98e3);function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function a(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=p(e);if(t){var o=p(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==i(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function p(e){return(p=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var d=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(n,e);var t=c(n);function n(e){var r,i=e.onValueChange,l=e.advanced;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,{onValueChange:i});var s=[{val:"0",label:lng("show regular")},{val:"1",label:lng("show archive")}];r._fields=[{type:"select",name:"archive",emptyOption:lng("show all"),label:lng("archived").caps(),options:s}];var c=null==l?void 0:l.types_data;if(c){for(var u=[],p=0,d=Object.entries(c);p<d.length;p++){var m=a(d[p],2),g=m[0],h=m[1];u.push({type:"checkbox",name:"tasktypes[".concat(g,"]"),label:lng(h.name),checkboxValue:g,color:h.colors.bg,skinny:!0})}r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("task type").caps(),fields:u})}var b=null==l?void 0:l.resolution;if(b){for(var y=[],v=0,_=Object.entries(b);v<_.length;v++){var w=a(_[v],2),O=w[0],k=w[1];y.push({type:"checkbox",name:"resolution[".concat(O,"]"),label:lng(k.label),checkboxValue:O,color:k.color,skinny:!0})}r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("resolution").caps(),fields:y})}var x=null==l?void 0:l.severities;if(x){for(var S=[],j=0,C=Object.entries(x);j<C.length;j++){var P=a(C[j],2),Z=P[0],B=P[1];S.push({type:"checkbox",name:"severities[".concat(Z,"]"),label:lng(B),checkboxValue:Z,skinny:!0})}r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("severity").caps(),fields:S})}var T=null==l?void 0:l.priorities;if(T){for(var E=[],I=0,A=Object.entries(T);I<A.length;I++){var D=a(A[I],2),R=D[0],N=D[1];E.push({type:"checkbox",name:"priorities[".concat(R,"]"),label:lng(N),checkboxValue:R,skinny:!0})}r._fields.push({type:"indent_set",toggle:!0,toggleTitle:lng("priority").caps(),fields:E})}return r._fields.push({type:"multiple_items",name:"involved",label:lng("user involved"),searchData:function(e,t){(0,o.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)}}),r._fields.push({type:"select",name:"period",emptyOption:!0,label:lng("last modified").caps(),options:f}),r._prepFields(),r}return n}(r.I),f=[{val:"all",label:lng("any time")},{val:"week",label:lng("past week")},{val:"month",label:lng("past month")},{val:"year",label:lng("past year").caps()}]},85024:function(e,t,n){"use strict";n.d(t,{p:function(){return B}});var r=n(87363),o=n(68567),i=n(98e3),a=n(23838),l=n(24210),s=n(27821),c=n(94576);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return y(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return y(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function y(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v=function e(t,n){var r,o=b(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value;if(a.id===n)return a;if(null!==(i=a.sons)&&void 0!==i&&i.length){var l=e(a.sons,n);if(l)return l}}}catch(e){o.e(e)}finally{o.f()}},_=function(e,t){return v(e,t)},w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t,n){t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(g(t=o.call(this,e)),"folderId",void 0),t.successMessage=lng("folder saved");var n=e.folderTree,r=e.value,a=e.mode,l=_(n,r),u="edit"===a?null==l?void 0:l.parent:null==l?void 0:l.id,p="edit"===a?null==l?void 0:l.label:"",d="edit"===a?r:null;t.folderId=d,t.title=d?lng("edit folder").caps():lng("new folder").caps();var f={folder_name:p,folder_parent_id:u};return t._fields=[{type:"text",name:"folder_name",label:lng("folder name"),required:!0},{type:"select",name:"folder_parent_id",label:lng("folder").caps(),options:(0,c.i6)((0,s.toJS)(n),{all:!0})}],t._prepFields(f),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("catalog/update_folder",Object.assign({folder_id:this.folderId},e))}}])&&p(t.prototype,n),r&&p(t,r),i}(l.I),O=n(71134),k=n(66975),x=n(23205),S=n(33346),j=(n(57882),n(15560)),C=n(35944);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var B=(0,j.observer)((function(e){var t=e.value,n=e.onChange,l=e.folderTree,u=P((0,r.useState)(!1),2),p=u[0],d=u[1],f={type:"row_set",fields:[{type:"select",options:(0,O.wd)((0,c.i6)((0,s.toJS)(l),{all:!0})),emptyOption:!0,value:t,name:"folder_id",label:lng("folder").caps(),onValueChange:function(e){n(e)},grow:10},{type:"component",node:(0,C.tZ)(k.JO,{icon:"edit",toolTip:lng("update").caps(),buttonLike:!0,onClick:function(){return d("edit")}}),visible:function(){return(0,O.B5)(t)}},{type:"component",node:(0,C.tZ)(k.JO,{icon:"new",toolTip:lng("new folder").caps(),buttonLike:!0,onClick:function(){return d("new")}})},{type:"component",node:(0,C.tZ)(k.JO,{icon:"trash",toolTip:lng("delete folder").caps(),buttonLike:!0,onClick:function(){(0,o.BB)(lng("are you sure you want to delete this folder?").caps(),{title:lng("delete folder").caps(),onConfirm:function(){(0,i.SC)("catalog/delete_folder",{data:{folder_id:t},method:"DELETE"},(function(e){return(null==e?void 0:e.folder_tree)&&a.Nd.trigger("FolderTree",e.folder_tree)}))}})}}),visible:function(){return(0,O.B5)(t)}}]};return(0,C.BX)("div",{children:[p&&(0,C.tZ)(T,{onClose:function(){return d(!1)},folderTree:l,value:t,mode:p,onChange:n}),(0,C.tZ)(S.au,{input:f})]})})),T=(0,j.observer)((function(e){var t=e.onClose,n=e.folderTree,o=e.value,i=e.mode,l=e.onChange,s=(0,r.useRef)(new w({folderTree:n,value:o,mode:i,onSaveSuccess:function(e){e.folder_tree&&a.Nd.trigger("FolderTree",e.folder_tree),t(),l(e.folder_id.toString())}})).current;return(0,C.tZ)(x.l,{form:s,onClose:t,internalForm:!0})}))},7510:function(e,t,n){"use strict";n.d(t,{EU:function(){return de},p_:function(){return pe}});var r=n(15560),o=n(71134),i=n(27073),a=n(66975),l=n(16920),s=n(96504),c=n(27821),u=n(82247),p=n(68567),d=n(40441),f=n(98e3),m=n(23838),g=n(60409),h=n(94576),b=n(22334),y=n(87363),v=n(71137),_=n(48207),w=n(37938),O=n(35944);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,r.observer)((function(e){var t=e.workspace_id,n=(0,y.useContext)(m.l9).getStore("workspace",t),r=(0,y.useRef)(null),o=k((0,y.useState)(null),2),i=o[0],a=o[1],l=(0,O.tZ)(_.$0,{icon:"user",title:lng("role members").caps(),onClose:function(){var e;return null===(e=r.current)||void 0===e?void 0:e.close()}});return n.show_members_drawer&&(0,O.tZ)(v.d,{scroll:!0,ref:r,refDrawerBody:a,onClose:function(){return n.hideMembersDrawer()},children:n.managers&&(0,O.tZ)(_.W2,{head:l,stickyHead:!0,children:(0,O.tZ)(w.J,{collection:n.managers,scrollParent:i,reload:function(){return n.fetchManagers()},workspace:n,roleWorkspace:!0})})})})),j=n(24210),C=n(7392);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=D(e);if(t){var o=D(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var R,N,z,M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,n,r,o=I(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).onSave=e.onSave,t.title=lng("import from a workspace").caps();var n=[];if(null!=e&&e.workspaces_to_import)for(var r=0,a=Object.entries(e.workspaces_to_import);r<a.length;r++){var l=Z(a[r],2),s=l[0],c=l[1];n.push({optgroup:!0,label:s,options:c.map((function(e){return{val:e[0],label:e[1]}}))})}return t._fields=[{type:"select",name:"import_id",label:lng("import data from an existing workspace"),options:n,required:!0,emptyOption:!0},{type:"checkbox",name:"assignments",label:lng("import assignments"),value:1},{type:"indent_set",fields:[{type:"checkbox",name:"duplicate_assignments",label:lng("duplicate assignments"),value:window.Branch.checkboxOn(),disable:function(e){return!e.get("assignments")}}]},{type:"checkbox",name:"catalog",label:lng("import shared content"),value:1},{type:"checkbox",name:"meetings",label:lng("import meetings"),value:1},{type:"indent_set",fields:[{type:"checkbox",name:"duplicate_resources",label:lng("import resources"),disable:function(e){return!e.get("meetings")}}]},Blsm.isFeatureEnabled("learning_units")?{type:"checkbox",name:"units",label:lng("import learning units"),value:1}:null,Blsm.isFeatureEnabled("blog")?{type:"checkbox",name:"blog",label:lng("import blog"),value:1}:null,{type:"checkbox",name:"managers",label:lng("import managers")},{type:"checkbox",name:"poster",label:lng("import poster")},{type:"component",node:(0,O.tZ)(C.l,{onClick:function(){return t.save({})},theme:"outlined",children:lng("don't import").caps()})}],t._prepFields(e.data||{}),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.onSave(e)}}])&&T(t.prototype,n),r&&T(t,r),i}(j.I),F=n(35519),q=n(95761),X=n(73105),L=n(37137),U=n(45459),V=n(28534);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){se(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function W(e,t){return ee(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Y(e,t)||$()}function K(e){return ee(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Y(e)||$()}function $(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Y(e,t){if(e){if("string"==typeof e)return Q(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Q(e,t):void 0}}function Q(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ee(e){if(Array.isArray(e))return e}function te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ne(e,t,n){return t&&te(e.prototype,t),n&&te(e,n),e}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function se(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ce(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var ue="workspace",pe=(R=c.action.bound,N=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(n,e);var t=oe(n);function n(e){var r,i,a,l,s,u=e.route,p=e.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),se(ae(r=t.call(this,{route:u,nav:p})),"_id",null),se(ae(r),"_newId",null),se(ae(r),"domain_id",null),se(ae(r),"params",{}),se(ae(r),"is_course",!1),se(ae(r),"isRole",!1),se(ae(r),"activityDaysDiff",void 0),se(ae(r),"lastOpenMoment",void 0),i=ae(r),a="refreshRichText",l=z,s=ae(r),l&&Object.defineProperty(i,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0}),se(ae(r),"formStatus",void 0),se(ae(r),"workspace_approval_sequence",void 0),(0,c.makeObservable)(ae(r));var f=W(u,2),m=f[0],g=f[1];if(r._activeSection=g,r.params=(0,o.B5)(m)?{}:m,r.saveAsJson=!0,r.validateOnChange=!0,r.expandAndSearchSections=!0,r._id=(0,o.B5)(m)?parseInt(m):0,!r._id&&(r.createMode=!0,!m.type))return ie(r,r.error="type missing");var h={};return r._id||(h.type=m.type,h.patient=m.patient),r.saveUrl="groups/".concat(r._id,"/").concat((0,o.$t)(h)),h.edit=1,(0,o.B5)(r.params.template)&&(h.template=r.params.template),r.fetchUrl="groups/".concat(r._id,"/").concat((0,o.$t)(h)),r._id&&(r.backToButton={label:lng("go to the workspace").caps(),onClick:function(){return(0,d.p4)({workspace:r._id},!0)},icon:"enter"}),r.workspace_approval_sequence=Blsm.InitialData.general_options.authorize_group_seq,r.fetch(),r}return ne(n,[{key:"updateFormRoute",value:function(e){return this.defaultUpdateFormRoute(e,ue)}}],[{key:"matchForm",value:function(e,t){var r=t.nav,o=K(e),i=o[0],a=o.slice(1);if(i===ue)return new n({route:a,nav:r})}}]),ne(n,[{key:"_acceptDataFromServer",value:function(e){var t,n,r,o,i,a,l=this,s=this.params.type||this.serverResponse.data.group_type;if(this.workspace_approval_sequence)if(this._id)switch(e.data.status){case"draft":this.formStatus=lng("draft");break;case"approval":this.formStatus=lng("pending");break;default:this.formStatus=lng("approved"),this.values.set("isApproved",!0)}else this.formStatus=lng("draft");"role"===s.toLowerCase()&&this._id?(this.isRole=!0,this.backToButton={label:lng("back to %s|back to some page",lng("roles")).caps(),onClick:function(){return(0,d.p4)({list:"roles"},!0)}},this.setExtraComponent((0,O.tZ)(S,{workspace_id:this._id})),this.savePanelExtraButtons.set("role_members",{label:lng("role members").caps()+" ("+e.data.managers_count+")",onClick:function(){return(0,m.vm)().getStore("workspace",l._id).showMembersDrawer()}})):(e.data.workspaces_to_import&&this.savePanelExtraButtons.set("",{label:lng("import").caps(),onClick:function(){return l.loadImportDialog()}}),"course_template"===s.toLowerCase()&&this._id&&this.savePanelExtraButtons.set("show_instances",{label:lng("instances").caps(),onClick:function(){return(0,d.p4)({list:"courses",params:"origin_group=".concat(l._id)},!0)}})),this.is_course=e.data.is_course;var c=(0,g.p)(s.caps(),this.is_course)||lng("workspace");this.title=this.createMode?lng("new %s",c):lng("edit %s",c),this._windowTitle=this.createMode?lng("new %s",c):lng("edit %s",this.serverResponse.data.group_name),this.domain_id=e.data.domain_id,this.initialValues=this.setupCalculatedFields(e.data),this.initialValues.required_seniority=null===(t=this.initialValues)||void 0===t||null===(n=t.required_seniority)||void 0===n?void 0:n.split(":"),this.initialValues.resource_bundles=(null===(r=this.initialValues)||void 0===r||null===(o=r.resource_bundles)||void 0===o?void 0:o.length)>0?this.initialValues.resource_bundles.split(","):[],this.initialValues.late_finish_message_cb=null!==(i=this.initialValues)&&void 0!==i&&null!==(a=i.owner_options)&&void 0!==a&&a.late_finish_message?1:0,this.buildFields(),this._prepFields(this.initialValues),this.ready=!0,window.formFields=this.fieldNames,(this.params.template||this.params.import)&&this.loadImportDialog(this.params.template||this.params.import)}},{key:"setupCalculatedFields",value:function(e){var t,n,r,i,a,l;if(this.params.parent_id&&(e.parent_id=this.params.parent_id),this.params.template&&(e.origin_group=this.params.template),"course"===this.params.type&&null!==(t=this.params)&&void 0!==t&&t.start&&null!==(n=this.params)&&void 0!==n&&n.end&&(e.group_open_date=this.params.start,e.group_close_date=this.params.end),e.group_reg_dates=!!e.registration_end_date,e.notifications){for(var s=new Map,c=0,u=Object.entries(e.notifications);c<u.length;c++){var p=W(u[c],2),d=p[0],f=p[1];s.set(d,f)}e.notifications=s}if(e.activity_dates=e.group_open_date||e.group_close_date||e.inherit_dates_from_meetings,e.repeat_ends=e.repeat_end_date?"1":"0",e.add_syllabus=!!(e.syllabus_file||e.syllabus_text||e.syllabus_url),e.view_pre_days_always=null===e.view_pre_days,e.view_post_days_always=null===e.view_post_days,e.reminder_due_date_cb=e.reminder_due_date>0,e.no_attendance_reminder_enabled=e.no_attendance_reminder,e.unpublished_grades_cb=e.unpublished_grades,e.required_period=null==e||null===(r=e.required_period)||void 0===r||null===(i=r.split)||void 0===i?void 0:i.call(r,":"),e.limit_reminder_cb=(0,o.DM)(null==e?void 0:e.limit_reminder),e.group_open_date||e.group_close_date||e.inherit_dates_from_meetings||(null===(a=this.params)||void 0===a?void 0:a.start)||(null===(l=this.params)||void 0===l?void 0:l.end)){var m=e.group_open_date,g=(0,b._3)(m),h=e.group_close_date,y=(0,b._3)(h);m&&h&&void 0===this.activityDaysDiff&&(this.activityDaysDiff=y.diff(g,"days")),m&&void 0===this.lastOpenMoment&&(this.lastOpenMoment=g)}return e}},{key:"loadImportDialog",value:function(e){var t=this,n=this.getValue("import_data"),r=this.serverResponse.data.workspaces_to_import,i=new M({onSave:function(e){if(e.import_id&&e.poster){for(var i,a=0,l=Object.entries(r);a<l.length;a++){if(i=W(l[a],2)[1].find((function(t){return t[0]===e.import_id})))break}i[2]?t.updateValue(i[2],"poster"):(0,V.LB)({msg:lng("cannot find workspace poster")})}!t._id&&(0,o.B5)(e.import_id)&&(null==n?void 0:n.import_id)!==e.import_id?(0,p.BB)(lng("do you want to load this workspace info?"),{onConfirm:function(){t.refreshRichText=!1,(0,f.SC)("groups/import_info",{data:{import_id:e.import_id}},(function(n){(0,m.vm)().closeDialog(),t.setValues(t.setupCalculatedFields(n),{clear:!0}),t.updateValue(e,"import_data"),"Course_template"===n.group_type&&(t.updateValue(e.import_id,"origin_group"),t.updateValue(1,"add_user_manager")),t.refreshRichText=!0}))},text:lng("load info")}):(t.updateValue(e,"import_data"),(0,m.vm)().closeDialog())},workspaces_to_import:r,data:e?J(J({},n),{},{import_id:e}):n});(0,m.vm)().openDialog("form",i)}},{key:"buildFields",value:function(){var e=this;"Subset"===this.initialValues.group_type?this.serverResponse.is_owner?this._fields=[this.generalSection(),this.displaySection()]:this._fields=[this.displaySection()]:this.createMode||this.serverResponse.is_owner?this._fields=[this.generalSection(),this.enrollmentSection(),this.notificationSection(),this.completionSection(),this.skillsSection(),this.authorizationSection(),this.advancedSection(),this.customFieldsSection(),this.displaySection()]:this.serverResponse.is_config_manager&&(this._fields=[this.displaySection()]);var t=this.isRole||this.createMode&&this.typeCheck(["role"]);this._successButtons=[this.createMode&&{label:lng("create another").caps(),onClick:function(){return e.nav(null,{reload:!0})}},{label:lng("continue editing").caps(),onClick:function(){return e.createMode?e.nav([ue,e._newId]):e.status=null}},t?{label:lng("go to %s",lng("roles")).caps(),onClick:function(){return(0,d.p4)({list:"roles"},!0)},primary:!0}:{label:lng("go to the workspace").caps(),onClick:function(){return(0,d.p4)({workspace:e._id||e._newId},!0)},primary:!0}]}},{key:"setActiveSection",value:function(e){this.nav([ue,this.route[0],null==e?void 0:e.sid],{replace:!0})}},{key:"SaveSuccess",value:function(e){(this._newId=e.id,this.isRole)||(0,m.vm)().invalidateStore("workspace",e.id)}},{key:"typeCheck",value:function(e){var t=this.params.type||(this.serverResponse.data.is_course?"course":this.serverResponse.data.group_type);return e.indexOf(t.toLowerCase())>-1}},{key:"generalSection",value:function(){return{type:"section",title:lng("general"),fields:[this.basicSection(),this.informationSection(),this.timingSection(),this.definitionsSection(),this.rolePermissionsSection(),this.fundSection()]}}},{key:"enrollmentSection",value:function(){return{type:"section",title:lng("enrollment"),insert:this.typeCheck(["group","course","course_template","qualification","role","workplan"]),fields:[this.generalEnrollmentSection(),this.rulesEnrollmentSection(),this.enrollmentConditionsSection(),this.memberLimitsSection()]}}},{key:"notificationSection",value:function(){return{type:"section",title:lng("notifications"),insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[this.basicNotificationsSection(),this.customNotificationsSection()]}}},{key:"completionSection",value:function(){return{type:"section",title:lng("completion"),sectionWidth:"800px",insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[this.generalCompletionSection(),this.completionConditionsSection(),this.requiredQualificationsSection(),this.requiredCoursesSection()]}}},{key:"authorizationSection",value:function(){var e=this;return{type:"section",title:lng("authorization"),sid:"authorization",insert:this.typeCheck(["qualification"]),visible:function(){return e.values.get("authorization_qualification")},fields:[{type:"select",name:"group_options[authorization_duration_type]",label:lng("authorization duration"),options:[["",lng("none").caps()],["monthly",lng("monthly").caps()],["yearly",lng("yearly").caps()]]},{visible:function(e){return!!e.get("group_options[authorization_duration_type]")},type:"row_set",fields:[{type:"component",Render:F.R9,label:lng("authorize qualification for|duration").caps()},{type:"number",name:"group_options[authorization_duration_span]",min:1,required:function(){return!!e.values.get("group_options[authorization_duration_type]")},label:lng("duration")},{type:"component",Render:F.R9,label:lng("months"),visible:function(e){return"monthly"===e.get("group_options[authorization_duration_type]")}},{type:"component",Render:F.R9,label:lng("years"),visible:function(e){return"yearly"===e.get("group_options[authorization_duration_type]")}}]},{type:"row_set",fields:[{type:"select",name:"group_options[auth_sequence]",label:lng("approval sequence for authorization").caps(),options:this.serverResponse.data.approval_sequences,emptyOption:!0,disable:function(e){return!e.get("autoenrollment_rules")},grow:99},{type:"component",node:(0,O.tZ)(U.I,{helpText:"".concat(lng("depends on")," ").concat(lng("automatic enrollment rules"))})}]},{type:"row_set",fields:[{type:"select",name:"group_options[auth_sequence_exceptional]",label:lng("approval sequence for exceptional authorization").caps(),options:this.serverResponse.data.approval_sequences,emptyOption:!0,disable:function(e){return!e.get("reg_availability_conditions")},grow:99},{type:"component",node:(0,O.tZ)(U.I,{helpText:"".concat(lng("depends on")," ").concat(lng("entrance conditions"))})}]}]}}},{key:"advancedSection",value:function(){return{type:"section",title:lng("advanced"),insert:this.typeCheck(["group","course","course_template","qualification","workplan","ou"]),mod:this.typeCheck(["qualification","course"])?["","ENT"]:null,fields:[this.additionalSection()]}}},{key:"displaySection",value:function(){return{type:"section",sid:"display",title:lng("display"),insert:this.typeCheck(["group","course","course_template","qualification","workplan","campus","ou","patientcase","subset"]),fields:[this.innerDisplaySection(),this.welcomeMessageSection()]}}},{key:"innerDisplaySection",value:function(){var e=this,t=this.typeCheck(["campus"]),n=[];(Blsm.isFeatureEnabled("assignments")||Blsm.isFeatureEnabled("meetings")||Blsm.isFeatureEnabled("catalog"))&&!t&&n.push({val:"components",label:lng("components",{phrase:!0}).caps()}),Blsm.isFeatureEnabled("meetings")&&!t&&n.push({val:"schedule",label:lng("schedule",{phrase:!0}).caps()}),Blsm.isFeatureEnabled("group_tasks")&&!t&&n.push({val:"tasks",label:lng("tasks",{phrase:!0}).caps()}),!Blsm.isFeatureEnabled("catalog")&&!Blsm.isFeatureEnabled("discussions")||t||n.push({val:"social",label:lng("social",{phrase:!0}).caps()}),this.serverResponse.data.welcome_message&&n.push({val:"welcome",label:lng("welcome",{phrase:!0}).caps()});var r=[{val:"0",label:lng("off").caps(),color:l.g.colors.text_placeholder},{val:"2",label:lng("managers only").caps(),color:l.g.colors.warning},{val:"1",label:lng("on").caps(),color:l.g.colors.dominant_main}],o=[{val:"0",label:lng("off").caps(),color:l.g.colors.text_placeholder},{val:"1",label:lng("on").caps(),color:l.g.colors.dominant_main}],i=function(){return!(e.getValue("group_options[managers_primary]")||e.getValue("group_options[managers_managers]")||e.getValue("group_options[managers_viewers]")||e.getValue("group_options[managers_inherited]")||e.getValue("group_options[show_members]"))},a=function(){i()&&e.updateValue("0","group_options[users]")};return{type:"section",sid:"inner_display",title:lng("display"),insert:this.typeCheck(["group","course","course_template","qualification","workplan","campus","ou","patientcase","subset"]),fields:[{type:"select",name:"group_options[default_tab]",label:lng("default tab"),options:n,mod:["","ENT"],helpKey:"@group/display/default_tab"},{type:"checkbox",name:"apply_to_sub",label:lng("apply to sub workspaces"),mod:["","ENT"],insert:this.typeCheck(["group","course","qualification","ou"]),helpKey:"@group/display/default_tab/apply_to_sub_workspaces"},{type:"checkbox",name:"group_options[hide_all_learning_unit]",reversed:!0,label:lng('show "%s" learning unit',lng("all"))},{type:"set",insert:Blsm.isFeatureEnabled("assignments")&&!t,fields:[{type:"switcher",name:"group_options[assignments]",label:lng("assignments"),options:r}]},{type:"set",insert:Blsm.isFeatureEnabled("meetings")&&!t,fields:[{type:"switcher",name:"group_options[meetings]",label:lng("schedule",{phrase:!0}),options:r},{type:"indent_set",fields:[{type:"checkbox",name:"enable_food",label:lng("includes lunch"),insert:Blsm.isFeatureEnabled("food")},{type:"checkbox",name:"group_options[show_unattended_message]",mod:["","ENT"],label:lng('show "absent members message" button')}]}]},{type:"set",insert:Blsm.isFeatureEnabled("catalog")&&!t,fields:[{type:"switcher",name:"group_options[catalog]",label:lng("content"),options:r},{type:"indent_set",fields:[{type:"checkbox",name:"group_options[show_official_only]",label:lng("show only official content"),mod:["catalog","ENT"]},{type:"checkbox",name:"group_options[blog]",label:lng("blog",{phrase:!0})}]}]},{type:"set",insert:Blsm.isFeatureEnabled("time_table"),fields:[{type:"switcher",name:"group_options[time_table]",label:lng("time table"),options:r}]},{type:"set",fields:[{type:"switcher",name:"group_options[users]",label:lng("users"),options:r,onValueChange:function(t){return i()&&t>0&&e.updateValue(!0,"group_options[show_members]")}},{type:"indent_set",fields:[{type:"checkbox",name:"group_options[show_members]",label:lng("members"),onValueChange:a},{type:"checkbox",name:"group_options[managers_primary]",label:lng("primary manager"),onValueChange:a},{type:"checkbox",name:"group_options[managers_managers]",label:lng("managers with permissions"),onValueChange:a,mod:["","ENT"]},{type:"checkbox",name:"group_options[managers_viewers]",label:lng("view only managers"),onValueChange:a,mod:["","ENT"]},{type:"checkbox",name:"group_options[managers_inherited]",label:lng("inherited managers"),onValueChange:a,mod:["","ENT"]}]}]},{type:"set",mod:["discussions","ENT"],insert:Blsm.isFeatureEnabled("discussions"),fields:[{type:"switcher",name:"group_options[discussions]",label:lng("discussions",{phrase:!0}),options:r},{type:"indent_set",fields:[{type:"checkbox",name:"group_options[new_discussions]",label:lng("allow new discussions")},{type:"checkbox",name:"group_options[lock_all_discussions]",label:lng("lock all discussions")}]}]},{type:"set",insert:Blsm.isFeatureEnabled("group_tasks")&&!t,fields:[{type:"switcher",name:"group_options[group_tasks]",label:lng("tasks",{phrase:!0}),options:r}]},{type:"set",insert:!t,fields:[{type:"switcher",name:"group_options[ou_report]",label:lng("reports"),options:o}]},{type:"set",mod:["","ENT"],insert:!t,fields:[{type:"switcher",name:"group_options[polls]",label:lng("polls"),options:o}]},{name:"group_options[notice_board]",type:"switcher",label:lng("message board"),options:r,mod:["","ENT"]},{name:"group_options[qualification_path_default]",type:"switcher",label:lng("qualification path default view"),insert:this.typeCheck(["qualification"]),options:[{val:"cards",icon:"view_tiles",label:lng("card view")},{val:"chart",icon:"tree",label:lng("flow chart")},{val:"conditions",icon:"hierarchy",label:lng("conditions tree")}]}]}}},{key:"basicSection",value:function(){var e=this,t=[{val:"0",label:lng("visible in home").caps(),helpKey:"@group/general/basic/visibility/visible_in_home"},{val:"1",label:lng("visible only to managers").caps(),helpKey:"@group/general/basic/visibility/visible_only_to_managers"},{val:"2",label:lng("not visible").caps(),helpKey:"@group/general/basic/visibility/not_visible"}],n=(0,r.observer)((function(e){var t=e.value;return(0,O.tZ)(a.gT,{color:[l.g.colors.positive,l.g.colors.warning,l.g.colors.negative][t],size:"2.8em"})}));return{type:"section",sid:"basic",title:lng("basic"),fields:[{type:"img",name:"poster",value:Blsm.InitialData.random_poster},{type:"text",name:"group_name",label:lng("name"),required:!0,autoDir:!0},{type:"hidden",name:"import_data"},{type:"richtext",name:"group_description",helpKey:"@group/general/basic/description",label:lng("description"),theme:"fixed",visible:function(){return e.refreshRichText}},{type:"select",name:"status",label:lng("mode"),mod:["","ENT"],insert:this.typeCheck(["group","course"])&&this.workspace_approval_sequence&&(["draft","approval"].includes(this.serverResponse.data.status)||!this._id),options:[{val:"draft",label:lng("draft").caps()},{val:"approval",label:lng("approval").caps()}]},{type:"row_set",insert:this.typeCheck(["qualification","group","course","budget","course_template","workplan","patientcase"]),mod:["","ENT"],fields:[{type:"select",name:"group_invisible",label:lng("visibility"),options:t,grow:"1",helpKey:"@group/general/basic/visibility"},{type:"component",name:"group_invisible",Render:n,grow:"0"}]},{type:"select",name:"group_theme_id",label:lng("theme"),options:this.serverResponse.data.themes,mod:["","ENT"],insert:this.typeCheck(["ou"]),extra:lng("this theme will apply to all users in this org' unit and it's sub org' units.").caps()},{type:"select",name:"classification_id",label:lng("classification"),options:this.serverResponse.data.classifications||[],emptyOption:!0,insert:this.typeCheck(["group","course","course_template","qualification","workplan"]),helpKey:"@group/general/basic/classification"},{type:"tags",name:"tags",label:lng("tags"),objectType:"Group",mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification","workplan"]),helpKey:"@group/general/basic/tags"},{type:"checkbox",name:"add_user_manager",label:lng("add myself as manager"),value:!0,mod:["","ENT"],insert:!this._id&&!this.typeCheck(["resourcebundle","role","ou"])},{type:"single_item",name:"parent_id",label:lng("select parent"),theme:"bright",poster:!0,mod:["","ENT"],insert:this.typeCheck(["ou"]),helpKey:"@ou/general/basic/parent",searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Ou"],term:e.term,id:e.ids}},t)}}]}}},{key:"welcomeMessageSection",value:function(){return{type:"section",sid:"welcome",mod:["","ENT"],title:lng("welcome message"),fields:[{type:"component",node:(0,O.tZ)("div",{style:{textAlign:"center",color:l.g.colors.text_sec},children:lng("this will appear in the %s tab",lng("welcome",{phrase:!0})).caps()})},{type:"richtext",name:"welcome_message",style:{lineHeight:"1.8em"},toolbarOptions:{font:!0,color:!0,link:!0,media:!0,media_link:!0,list:!0,align:!0}},{type:"checkbox",name:"show_welcome_on_first_visit",label:lng("show on first visit"),disable:function(e){return!e.get("welcome_message")}}]}}},{key:"informationSection",value:function(){var e=this,t=this.typeCheck(["group","course","course_template"])?["Group","Workplan"]:this.typeCheck(["qualification"])?["Qualification"]:["Ou"];return{type:"section",sid:"info",title:lng("information"),insert:this.typeCheck(["group","course","course_template","qualification"]),mod:this.typeCheck(["group"])?["","ENT"]:null,fields:[{type:"single_item",name:"origin_group",label:lng("instance of template"),mod:["","ENT"],insert:this.typeCheck(["course"]),helpKey:"@course/general/information/template",searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Course_template"],term:e.term||"",id:e.ids||""}},t)},onSelect:function(t){e._id||e.loadImportDialog(t.id)}},{type:"single_item",name:"parent_id",label:lng("select parent"),theme:"bright",poster:!0,mod:["","ENT"],insert:this.typeCheck(["group","course","qualification","course_template"]),helpKey:"@group/general/information/select_parent",searchData:function(e,n){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:t,term:e.term,id:e.ids}},n)}},{type:"single_item",name:"workplan_id",label:lng("attach to workplan"),theme:"bright",poster:!0,mod:["","ENT"],insert:this.typeCheck(["course"])&&Blsm.isFeatureEnabled("workplan"),searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Workplan"],term:e.term,id:e.ids}},t)}},{type:"text",suggest:{table:"groups"},name:"group_audience",autoDir:!0,label:lng("audience"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template"])},{type:"text",suggest:{table:"groups"},name:"group_location",autoDir:!0,label:lng("location"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template"]),helpKey:"@group/general/information/location"},{type:"text",suggest:{table:"groups"},name:"group_gathering_area",autoDir:!0,label:lng("gathering area"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template"])},{type:"checkbox",label:lng("add syllabus"),name:"add_syllabus",mod:["","ENT"],insert:this.typeCheck(["group","course","course_template"]),helpKey:"@group/general/information/add_syllabus"},{type:"set",mod:["","ENT"],visible:function(e){return!!e.get("add_syllabus")},fields:[{type:"file",name:"syllabus_file",label:lng("syllabus file"),disable:function(e){return!(!e.get("syllabus_text")&&!e.get("syllabus_url"))},maxSize:Blsm.InitialData.parameters.max_file_size.default},{type:"text",name:"syllabus_url",label:lng("syllabus link"),disable:function(e){return!(!(0,j.DW)(e.get("syllabus_file"))&&!e.get("syllabus_text"))}},{type:"textarea",name:"syllabus_text",label:lng("syllabus text"),disable:function(e){return!(!(0,j.DW)(e.get("syllabus_file"))&&!e.get("syllabus_url"))}}]},{type:"text",name:"slack_webhook",label:"Slack webhook",mod:["slack","ENT"],insert:Blsm.isFeatureEnabled("slack"),onValueChange:function(t){t.startsWith("https://hooks.slack.com/services/")&&e.values.set("slack_webhook",t.split("https://hooks.slack.com/services/")[1])}}]}}},{key:"timingSection",value:function(){var e=this,t=function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],n=!0;if(e.values.get("group_close_date")&&e.values.get("group_open_date")){if(!(n=(0,b._3)(e.values.get("group_close_date")).isAfter((0,b._3)(e.values.get("group_open_date"))))&&t)return{error:lng("open date cannot be later than close date.")};var r=(0,b._3)(e.values.get("group_close_date")).diff((0,b._3)(e.values.get("group_open_date")).endOf("day"),"months",!0);if(e.typeCheck(["course"])&&Blsm.isFeatureEnabled("courses_limit_dates_range")&&r>18&&(n=!1,t))return{error:window.Branch.lng("close date cannot be more than 18 months after open date")}}return n||e.updateValue(0,"move_meetings"),n},n=function(){var t=e.values.get("group_open_date"),n=(0,b._3)(t),r=e.values.get("group_close_date");if(t){var o;if(e.activityDaysDiff>=0&&0!==(null===(o=e.lastOpenMoment)||void 0===o?void 0:o.diff(n,"days"))&&r){var i=r.split(" ")[1],a=n.clone().add(e.activityDaysDiff,"days"),l=(0,b.k6)(a,{time:!1});e.updateValue(l+" "+i,"group_close_date"),e._id&&!e.values.get("move_meetings")&&e.isEnterprise&&(0,p.BB)(lng("do you want to move all events, meetings and assignments dates accordingly?"),{onConfirm:function(){return e.values.set("move_meetings",1)}})}e.lastOpenMoment=n}if(t&&r){var s=(0,b._3)(e.values.get("group_close_date"));e.activityDaysDiff=Math.max(0,s.diff(n,"days"))}};return{type:"section",sid:"timing",title:lng("timing"),insert:this.typeCheck(["group","course","course_template","qualification","workplan"]),fields:[{type:"checkbox",name:"activity_dates",label:lng("activity dates"),helpKey:"@group/general/timing/activity_dates",disable:function(e){return void 0!==e.get("repeat_type")&&"none"!==e.get("repeat_type")},onValueChange:function(){return e.displayInCatalogCheck()}},{type:"indent_set",visible:function(e){return!!e.get("activity_dates")},fields:[{type:"row_set",disable:function(e){return!!e.get("inherit_dates_from_meetings")},fields:[{type:"date_time",name:"group_open_date",label:lng("open date"),defaultTime:["00","00"],onBlur:function(){return n()}},{type:"date_time",name:"group_close_date",label:lng("close date"),defaultTime:["23","59"],onBlur:function(){return n()},validate:function(){return t()}}]},{type:"checkbox",name:"move_meetings",label:lng("move meetings"),disable:function(){return!t(!1)},mod:["","ENT"]},{type:"checkbox",name:"inherit_dates_from_meetings",label:lng("derive from meetings"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification"]),helpKey:"@group/general/timing/activity_dates/derive_from_meetings",onValueChange:function(t){t&&e._id?(0,f.SC)("groups/derive_from_meetings",{data:{group_id:e._id}},(function(t){e.updateValue(t.start,"group_open_date"),e.updateValue(t.end,"group_close_date")})):(e.updateValue("","group_open_date"),e.updateValue("","group_close_date"))}},{type:"set",insert:this.typeCheck(["group","course","course_template","qualification"]),mod:["","ENT"],fields:[{type:"row_set",fields:[{type:"component",Render:F.R9,label:lng("available to members").caps()+":"}]},{type:"row_set",fields:[{type:"number",name:"view_pre_days",placeholder:"0",disable:function(e){return!!e.get("view_pre_days_always")},min:0,helpKey:"@group/general/timing/activity_dates/available_days_before_open"},{type:"checkbox",name:"view_pre_days_always",label:lng("infinite")},{type:"component",Render:F.R9,label:lng("days before open date"),grow:2}]},{type:"row_set",fields:[{type:"number",name:"view_post_days",placeholder:"0",disable:function(e){return!!e.get("view_post_days_always")},min:0,helpKey:"@group/general/timing/activity_dates/available_days_before_close"},{type:"checkbox",name:"view_post_days_always",label:lng("infinite")},{type:"component",Render:F.R9,label:lng("days after close date"),grow:2}]}]},{type:"row_set",visible:function(e){return!!e.get("group_close_date")||!!e.get("inherit_dates_from_meetings")},mod:["","ENT"],fields:[{type:"checkbox",name:"cancel_grade_at_close",label:lng("publish grades"),reversed:!0,helpKey:"@group/general/timing/publish_grades_on_close_date"},{type:"number",name:"days_after_close_to_publish_grades",disable:function(e){return!!e.get("cancel_grade_at_close")},min:0},{type:"component",Render:F.R9,label:lng("days after close date")}]}]},fe({type:"number",name:"member_expire",label:lng("expire period (in days) for members"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification"]),helpKey:"@group/general/timing/expired_period_for_members"}),{type:"indent_set",visible:function(e){return!!e.get("member_expire")},mod:["","ENT"],fields:[{type:"checkbox",label:lng("apply to current members"),name:"retroactive_member_expire",helpKey:"@group/general/timing/apply_to_current_members"}]},{type:"row_set",mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification"]),helpKey:"@group/general/timing/required_period_for_members",fields:[{type:"component",Render:F.R9,label:lng("required period for members").caps()+":"},{type:"number",name:"required_period[0]",min:0,label:lng("years")},{type:"number",name:"required_period[1]",min:0,label:lng("months")},{type:"number",name:"required_period[2]",min:0,label:lng("days")}]},{type:"row_set",fields:[{type:"select",name:"repeat_type",label:lng("repeats"),insert:Blsm.isFeatureEnabled("repetition")&&this.typeCheck(["qualification"]),options:[["none",lng("does not repeat").caps()],["daily",lng("daily").caps()],["weekly",lng("weekly").caps()],["monthly",lng("monthly").caps()],["yearly",lng("yearly").caps()],["doy",lng("day of year").caps()],["from_required_qualifications",lng("according to required qualifications").caps()],["manual","API"]],onValueChange:function(t){return t&&e.updateValue("","activity_dates")}},{type:"component",Render:F.R9,label:lng("this qualification is cyclic").caps(),bg:l.g.colors.dominant_orange,visible:function(e){return"none"!==e.get("repeat_type")},insert:Blsm.isFeatureEnabled("repetition")&&this.typeCheck(["qualification"])}]},{type:"set",insert:Blsm.isFeatureEnabled("repetition")&&this.typeCheck(["qualification"]),visible:function(e){return!["none","manual"].includes(e.get("repeat_type"))},fields:[{visible:function(e){return me.includes(e.get("repeat_type"))},type:"row_set",helpKey:"@qualification/general/timing/repeat_type",fields:[{type:"component",Render:F.R9,label:lng("repeat every").caps()},{type:"number",name:"repeat_span",min:1,max:30},{type:"component",Render:F.R9,label:lng("days"),visible:function(e){return"daily"===e.get("repeat_type")}},{type:"component",Render:F.R9,label:lng("weeks"),visible:function(e){return"weekly"===e.get("repeat_type")}},{type:"component",Render:F.R9,label:lng("months"),visible:function(e){return"monthly"===e.get("repeat_type")}},{type:"component",Render:F.R9,label:lng("years"),visible:function(e){return"yearly"===e.get("repeat_type")}}]},{mod:["repetition","ENT"],visible:function(e){return"doy"===e.get("repeat_type")},type:"row_set",helpKey:"@qualification/general/timing/repeat_doy_month",fields:[{type:"select",name:"repeat_doy_month",options:(0,o.w6)(12).map((function(e){return[e+1,moment().month(e).format("MMMM")]})),onValueChange:function(t){return e.fieldsByName.get("repeat_doy_day").max=moment("1970-".concat(t.toString().padStart(2,"0"))).daysInMonth()}},{type:"number",name:"repeat_doy_day",min:1,max:31}]},{mod:["repetition","ENT"],visible:function(){return me.includes(e.values.get("repeat_type"))},type:"select",name:"repeat_mode",options:[["first_success",lng("after first successful performance")],["from_last",lng("from the last successful performance")],["each_success",lng("for each successful performance")]]},{mod:["repetition","ENT"],visible:function(){return["doy"].concat(me).includes(e.values.get("repeat_type"))},type:"row_set",fields:[{type:"component",Render:F.R9,label:lng("reopen %s days before expiration date").caps().split("%s")[0]},{type:"number",name:"repeat_period",min:0},{type:"component",Render:F.R9,label:lng("reopen %s days before expiration date").caps().split("%s")[1]}]},{mod:["repetition","ENT"],visible:function(){return me.includes(e.values.get("repeat_type"))},type:"row_set",fields:[{type:"component",Render:F.R9,label:lng("ends").caps()+":"},{type:"radio",name:"repeat_ends",radioValue:"0",label:lng("never")},{type:"radio",name:"repeat_ends",radioValue:"1",label:lng("on")},{type:"date_time",name:"repeat_end_date",disable:function(e){return"0"===e.get("repeat_ends")},grow:2}]}]}]}}},{key:"definitionsSection",value:function(){return{type:"section",sid:"definitions",title:lng("definitions"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[{type:"checkbox",name:"compliance",label:lng("mark this workspace as compliance"),insert:Blsm.isFeatureEnabled("qualifications")&&this.typeCheck(["group","course","course_template","qualification"]),helpKey:"@group/general/definitions/make_workspace_compliance"},{type:"checkbox",name:"competency_relevant",label:lng("relevant to competency"),insert:this.typeCheck(["group","course","course_template","qualification"])&&Blsm.isFeatureEnabled("competency"),helpKey:"@group/general/definitions/relevant_to_competency"},{type:"checkbox",name:"special_qualification",label:lng("mark this as qualification role"),insert:this.typeCheck(["qualification"]),helpKey:"@qualification/general/definitions/mark_qualification_role"},{type:"checkbox",name:"certification",label:lng("mark this as certification"),insert:this.typeCheck(["qualification"]),helpKey:"@qualification/general/definitions/mark_certification"},{type:"checkbox",name:"authorization_qualification",label:lng("mark this as authorization"),insert:this.typeCheck(["qualification"])&&Blsm.isFeatureEnabled("authorization_qualification")},{type:"checkbox",name:"profession",label:lng("mark this as a profession"),insert:this.typeCheck(["qualification"])&&Blsm.isFeatureEnabled("professions"),helpKey:"@qualification/general/definitions/mark_profession"},{type:"select",name:"level_value",options:(this.serverResponse.data.levels||[]).map((function(e){return[e.level_value,(0,h.h1)(e)]})),emptyOption:!0,label:lng("professional level"),insert:this.typeCheck(["qualification"])&&Blsm.isFeatureEnabled("professions"),helpKey:"@qualification/general/definitions/professional_level"}]}}},{key:"rolePermissionsSection",value:function(){return{type:"section",sid:"rolePermissions",title:lng("role permissions"),insert:this.typeCheck(["role"]),fields:[{type:"checkbox",name:"role_permissions[catalog_manager]",label:lng("knowledge manager")},{type:"checkbox",name:"role_permissions[portal_manager]",label:lng("portal manager"),mod:["","ENT"]},{type:"checkbox",name:"role_permissions[resources]",label:lng("resource manager"),mod:["","ENT"]},{type:"checkbox",name:"role_permissions[group_admin]",label:lng("group admin")},{type:"indent_set",mod:["","ENT"],fields:[{type:"checkbox",name:"role_permissions[group_admin]",label:lng("can only create template instances"),checkboxValue:"2"}]},{type:"checkbox",name:"role_permissions[ous_admin]",label:lng("org' unit admin"),mod:["","ENT"]},{type:"checkbox",name:"role_permissions[qualifications]",label:lng("qualification admin"),mod:["","ENT"]},{type:"checkbox",name:"role_permissions[users_admin]",label:lng("user admin")},{type:"indent_set",mod:["","ENT"],fields:[{type:"checkbox",name:"role_permissions[users_admin]",label:lng("relative to the org' unit of the user"),checkboxValue:"2"}]},{type:"checkbox",name:"role_permissions[blogs]",label:lng("blogger"),mod:["","ENT"]},{type:"checkbox",name:"role_permissions[case_manager]",label:lng("case manager"),mod:["","ENT"]}]}}},{key:"fundSection",value:function(){var e=this;return{type:"section",sid:"fund",title:lng("fund"),mod:["course_funding","ENT"],insert:this.typeCheck(["role"])&&Blsm.isFeatureEnabled("course_funding"),fields:[{type:"checkbox",name:"is_fund",label:lng("fund"),onValueChange:function(t){t||e.updateValue("","funding_pct")}},{type:"indent_set",visible:function(){return!!e.values.get("is_fund")},fields:[{type:"number",name:"funding_pct",label:lng("funding percent"),min:1,max:100,required:function(){return!!e.values.get("is_fund")}}]}]}}},{key:"generalEnrollmentSection",value:function(){var e=this,t=[{val:"private",label:lng("private").caps()+" - "+lng("owner only").caps()}];!this.isEnterprise&&this.typeCheck(["course","course_template","qualification","group"])||t.push({val:"manager_register",label:lng("departmental").caps()+" - "+lng("org' unit managers add their own users").caps()});var n=[{optgroup:!0,label:lng("controlled by managers").caps(),options:t}];if(Blsm.isFeatureEnabled("course_registartion")&&(Blsm.checkMod(["course_registartion","ENT"])||!this.typeCheck(["group"]))){var r=[{val:"register",label:lng("requested").caps()+" - "+lng("requires an approval sequence").caps()},{val:"public",label:lng("public").caps()+" - "+lng("anyone can join").caps()}];n.push({optgroup:!0,label:lng("user registration").caps(),options:r})}return{type:"section",sid:"enrollment",title:lng("general"),insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[{type:"select",name:"group_access",label:lng("workspace accessibility"),options:n,onValueChange:function(){return e.displayInCatalogCheck()}},{type:"checkbox",name:"group_options[display_in_catalog]",label:lng("display in the catalog"),mod:["course_registartion","ENT"],insert:Blsm.isFeatureEnabled("course_registartion")&&this.typeCheck(["course","course_template","qualification"]),disable:function(e){return!e.get("activity_dates")},visible:function(e){return["private","manager_register"].includes(e.get("group_access"))},helpKey:"@group/enrollment/general/display_in_catalog"},{type:"checkbox",name:"group_reg_dates",label:lng("registration dates"),disable:function(e){return"private"===e.get("group_access")},mod:["","ENT"],helpKey:"@group/enrollment/general/registration_dates"},{type:"indent_set",visible:function(e){return!!e.get("group_reg_dates")&&"private"!==e.get("group_access")},fields:[{type:"row_set",fields:[{type:"date_time",name:"registration_start_date",label:lng("registration open"),mod:["","ENT"],defaultTime:["00","00"],maxDate:function(){return moment(e.values.get("registration_end_date"),Blsm.prm.date_moment_format)}},{type:"date_time",name:"registration_end_date",label:lng("registration close"),mod:["","ENT"],defaultTime:["23","59"],minDate:function(){return moment(e.values.get("registration_start_date"),Blsm.prm.date_moment_format)}}]}]},{type:"row_set",helpKey:"@group/enrollment/general/approval_sequence",mod:this.typeCheck(["group"])?["","ENT"]:null,fields:[{type:"select",name:"sequence_id",label:lng("approval sequence").caps(),options:this.serverResponse.data.approval_sequences,emptyOption:!0,disable:function(t){return"public"===t.get("group_access")||!e.isEnterprise&&"register"!==t.get("group_access")},required:function(){return"register"===e.values.get("group_access")}},{type:"date_time",name:"sequence_start_date",label:"".concat(lng("starts at")," (").concat(lng("optional"),")"),mod:["","ENT"]}]},{type:"checkbox",name:"allow_multiple_instances",label:lng("after completing an instance the user can register to another one"),mod:["","ENT"],insert:this.typeCheck(["course_template"])},{type:"indent_set",visible:function(e){return!!e.get("allow_multiple_instances")},fields:[{type:"checkbox",name:"multiple_only_when_failed",label:lng("only when failed"),mod:["","ENT"]}]},{type:"textarea",name:"registration_extra_info",label:lng("extra information for the course catalog"),mod:["","ENT"],helpKey:"@group/enrollment/general/extra_information"},{type:"select",name:"registration_type",label:lng("registration type"),insert:this.typeCheck(["course_template"]),options:[{val:"reg_to_instances",label:lng("instance selection by the user").caps()},{val:"reg_to_template",label:lng("register to template").caps()}]},{type:"checkbox",name:"show_to_anonymous",label:lng("show in anonymous catalog"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template"]),helpKey:"@group/enrollment/general/show_in_annonymous_catalog"}]}}},{key:"displayInCatalogCheck",value:function(){var e=this.values.get("group_access"),t=this.values.get("activity_dates");["private","manager_register"].includes(e)&&t||this.updateValue(0,"group_options[display_in_catalog]")}},{key:"rulesEnrollmentSection",value:function(){var e,t,n;return{type:"section",sid:"autoEnrollment",title:lng("automatic enrollment rules"),sectionWidth:"800px",insert:this.typeCheck(["group","course","course_template","qualification","role","workplan"]),mod:this.typeCheck(["role"])?["","ENT"]:null,fields:[{type:"component",name:"autoenrollment_rules",Render:s._,value:this.serverResponse.data.autoenrollment_rules,visible:function(e){return!e.get("clear_rules_and_keep_users")},props:{object_type:"users",checkRules:(null===(e=this.initialValues.autoenrollment_rules)||void 0===e||null===(t=e.rules)||void 0===t?void 0:t.length)>0,checkRulesData:{object_id:this._id,req_type:"check_auto_enrollment",domain_id:this.domain_id},collisionCheck:!0}},{type:"indent_set",mod:["","ENT"],fields:[{type:"checkbox",name:"clear_rules_and_keep_users",label:lng("delete the rules and preserve current members"),helpKey:"@group/enrollment/autoenrollment/clear_rules_and_preserve_current_users"},{type:"checkbox",name:"only_add",label:lng("only add users"),value:null===(n=this.initialValues.autoenrollment_rules)||void 0===n?void 0:n.only_add,helpKey:"@group/enrollment/autoenrollment/only_add_users"}]}]}}},{key:"enrollmentConditionsSection",value:function(){var e,t;return{type:"section",sid:"enrollmentConditions",title:lng("entrance conditions"),sectionWidth:"800px",mod:this.typeCheck(["group"])?["","ENT"]:null,insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[{type:"component",Render:F.R9,skinny:!0,mod:["","ENT"],label:lng("registration availability conditions").caps(),helpKey:"@group/enrollment/conditions/reg_availability_conditions"},{mod:["","ENT"],type:"component",name:"reg_availability_conditions",Render:s._,value:this.serverResponse.data.reg_availability_conditions,props:{object_type:"users",checkRules:(null===(e=this.initialValues.reg_availability_conditions)||void 0===e||null===(t=e.rules)||void 0===t?void 0:t.length)>0,checkRulesData:{object_id:this._id,req_type:"check_reg_availability",domain_id:this.domain_id}}},{type:"row_set",insert:this.typeCheck(["qualification"]),fields:[{type:"component",Render:F.R9,label:lng("required seniority").caps()+":"},{type:"number",name:"required_seniority[0]",min:0,label:lng("years")},{type:"number",name:"required_seniority[1]",min:0,label:lng("months")},{type:"number",name:"required_seniority[2]",min:0,label:lng("days")}]},{type:"set",visible:function(e){return"manager_register"===e.get("group_access")},fields:[{type:"component",Render:F.R9,label:lng("handling registration conditions exceptions").caps()},{type:"indent_set",mod:["","ENT"],fields:[{type:"component",Render:F.R9,label:lng("sequence for approving users that don't meet conditions").caps()+":",skinny:!0},{type:"select",name:"exceptions_approval_sequence",options:this.serverResponse.data.approval_sequences,emptyOption:!0}]}]},{type:"checkbox",name:"complete_sub_qualifications",label:lng("complete required qualifications to enter"),insert:this.typeCheck(["qualification"])},{type:"multiple_items",name:"reg_condition_courses",label:lng("prerequisite courses & qualifications"),poster:!0,theme:"bright",maxItems:this.isEnterprise?0:1,searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php?",{data:{req:"AutoComplete",owned:1,types:["Group","Course_template","Qualification"],term:e.term,id:e.ids}},t)}}]}}},{key:"memberLimitsSection",value:function(){return{type:"section",sid:"memberLimits",title:lng("member limits"),insert:this.typeCheck(["group","course","course_template","qualification"]),mod:this.typeCheck(["qualification"])?["","ENT"]:null,fields:[{type:"row_set",helpKey:"@group/enrollment/member_limits/setter",fields:[{type:"number",name:"min_users",label:lng("minimum")},{type:"number",name:"max_users",label:lng("maximum")}]},{type:"checkbox",name:"limit_reminder_cb",label:lng("minimum limit alert"),mod:["","ENT"]},{type:"indent_set",mod:["","ENT"],visible:function(e){return!!e.get("limit_reminder_cb")},fields:[{type:"row_set",fields:[{type:"component",Render:F.R9,label:lng("send minimum limit alert").caps()},{type:"number",name:"limit_reminder",max:30},{type:"component",Render:F.R9,label:lng("days before start")}]}]},fe({type:"number",name:"expected_participants",label:lng("expected number of participants"),mod:["","ENT"]}),{type:"checkbox",name:"cancel_leave_on_public",label:lng("prevent members from leaving"),mod:["","ENT"],visible:function(e){return"public"===e.get("group_access")}},{type:"checkbox",name:"waiting_list_active",label:lng("enable waiting list")},{type:"indent_set",mod:["","ENT"],fields:[{type:"checkbox",name:"waiting_list_active",checkboxValue:"2",label:lng("auto reject all users in the waiting list on the opening date")}]},this.orgUnitAllocationSection()]}}},{key:"orgUnitAllocationSection",value:function(){return{type:"section",sid:"ouAllocation",title:lng("org' unit allocations"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification"]),fields:[{type:"multiple_items",name:"ou_allocations",poster:!0,theme:"bright",valueIsMap:!0,label:lng("restrict allocations for org' units"),objectKeys:["id","allocation","use_sub_groups"],helpKey:"@group/enrollment/member_limits/restrict_allocations/amount",searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php?",{data:{req:"AutoComplete",owned:1,types:["Ou"],term:e.term,id:e.ids}},t)},buttons:[{Render:F.xE,onChange:function(e,t){var n=t.value;return e.allocation=n,e}},{Render:F.Kz,onChange:function(e){return e.use_sub_groups=!e.use_sub_groups,e}}]}]}}},{key:"basicNotificationsSection",value:function(){var e=this,t=lng("send members a reminder about meetings %s days before").split("%s"),n=lng("send manager a reminder about meetings with no attendance every %s days after it ended").split("%s"),r=lng("send manager a reminder about unpublished grades every %s days after the course closed").split("%s");return{type:"section",sid:"basicNotifications",title:lng("basic notifications"),fields:[{type:"set",insert:this.typeCheck(["qualification"]),visible:function(e){return!!e.get("group_close_date")},fields:[{type:"checkbox",name:"late_finish_message_cb",label:lng("immediate message for users that complete after the closing date"),onValueChange:function(t){return!t&&e.values.set("owner_options[late_finish_message]",t)},mod:["","ENT"]},{type:"indent_set",visible:function(e){return e.get("late_finish_message_cb")},fields:[{type:"single_item",name:"owner_options[late_finish_message]",label:lng("select message"),mod:["","ENT"],insert:this.typeCheck(["qualification"]),searchData:function(e,t){(0,f.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)}}]}]},{type:"checkbox",name:"auto_send_schedule",label:lng("send members the schedule and the assignment list when they join or are added"),mod:["","ENT"],insert:this.typeCheck(["course","group","qualification","course_template"]),helpKey:"@group/notifications/basic/send_schedule_and_assignment"},{type:"set",fields:[{type:"checkbox",name:"auto_send_invites",checkboxValue:"1",checkedWithGreaterValue:!0,label:lng("send members the invites for the schedule when they join or are added (an email per meeting)"),insert:this.typeCheck(["course","group","qualification","course_template"]),helpKey:"@group/notifications/basic/send_invites"},{type:"indent_set",fields:[{type:"checkbox",name:"auto_send_invites",checkboxValue:"2",label:lng("include members added by automatic enrollment rules")}]}]},{type:"set",insert:this.typeCheck(["course","group","qualification","course_template"]),fields:[{type:"checkbox",name:"auto_send_message",label:lng("send members a message when they join or are added"),helpKey:"@group/notifications/basic/send_message_when_joined"},{type:"indent_set",mod:["","ENT"],visible:function(e){return e.get("auto_send_message")},fields:[{type:"checkbox",name:"owner_options[auto_send_message_sms]",label:lng("send an SMS if possible"),helpKey:"@notification/sms"},{type:"single_item",name:"auto_message_id",label:lng("select custom message (leave empty for default message)"),helpKey:"@group/notifications/basic/select_message",searchData:function(e,t){(0,f.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)},mod:["","ENT"]}]}]},{type:"checkbox",name:"auto_send_message_direct_manager",label:lng("send members direct manager group schedule when members join or are added"),mod:["","ENT"],insert:this.typeCheck(["course","group","qualification","course_template"]),helpKey:"@group/notifications/basic/send_schedule_to_members_direct_manager"},{type:"set",mod:["","ENT"],insert:this.typeCheck(["course","group","course_template"]),fields:[{type:"checkbox",name:"reminder_due_date_cb",label:t[0]},{type:"indent_set",fields:[{type:"row_set",inline:!0,fields:[{type:"number",name:"reminder_due_date",min:0,max:14,disable:function(e){return!e.get("reminder_due_date_cb")}},{type:"component",Render:F.R9,skinny:!0,label:t[1]}]}]}]},{type:"set",mod:["","ENT"],insert:this.typeCheck(["course","group","course_template"]),fields:[{type:"checkbox",name:"no_attendance_reminder_enabled",label:n[0]},{type:"indent_set",fields:[{type:"row_set",inline:!0,fields:[{type:"number",name:"no_attendance_reminder",min:1,max:7,disable:function(e){return!e.get("no_attendance_reminder_enabled")},helpKey:"@group/notifications/basic/no_attendance_reminder"},{type:"component",Render:F.R9,skinny:!0,label:n[1]}]}]}]},{type:"set",mod:["","ENT"],insert:this.typeCheck(["course","group","course_template"]),fields:[{type:"checkbox",name:"unpublished_grades_cb",label:r[0]},{type:"indent_set",fields:[{type:"row_set",inline:!0,fields:[{type:"number",name:"unpublished_grades",min:0,max:14,disable:function(e){return!e.get("unpublished_grades_cb")}},{type:"component",Render:F.R9,skinny:!0,label:r[1]}]}]}]}]}}},{key:"customNotificationsSection",value:function(){var e=this,t={late_group_completion:{label:lng("reminder for late completion"),message:!0,validate:{message:"required"},mod:["","ENT"],insert:this.typeCheck(["qualification"]),disable:function(){return!e.values.get("group_close_date")}},before_group_start:{label:lng("reminder before workspace starting date"),helpKey:"@group/notifications/custom/add/reminder_before_starting",sms:!0,disable:function(){return!e.values.get("group_open_date")},mod:this.typeCheck(["qualification"])?["","ENT"]:null},after_close_date_reminder:{label:lng("reminder after workspace closing date"),helpKey:"@group/notifications/custom/add/reminder_after_closing",message:!0,sms:!0,messageType:function(e){return e?"after_close_date_reminder":"after_close_date_reminder_other"},disable:function(){return!e.values.get("group_close_date")},mod:this.typeCheck(["qualification","course","course_template"])?["","ENT"]:null},required_period_reminder:{label:lng("reminder for the required period"),helpKey:"@group/notifications/custom/add/reminder_for_required_period",message:!0,sms:!0,messageType:function(e){return e?"required_period":"required_period_other"},mod:["","ENT"],disable:function(){var t,n,r;return!(null!==(t=e.values.get("required_period"))&&void 0!==t&&t[0]||null!==(n=e.values.get("required_period"))&&void 0!==n&&n[1]||null!==(r=e.values.get("required_period"))&&void 0!==r&&r[2])}},after_required_period_reminder:{label:lng("reminder after the required period"),helpKey:"@group/notifications/custom/add/reminder_after_required_period",message:!0,sms:!0,repeat:!0,messageType:function(e){return e?"after_required_period":"after_required_period_other"},mod:["","ENT"],disable:function(){var t,n,r;return!(null!==(t=e.values.get("required_period"))&&void 0!==t&&t[0]||null!==(n=e.values.get("required_period"))&&void 0!==n&&n[1]||null!==(r=e.values.get("required_period"))&&void 0!==r&&r[2])}},expire_qualification_reminder:{label:lng("reminder for qualification that is about to expire"),message:!0,sms:!0,insert:this.typeCheck(["qualification"]),messageType:"expire_qualification_reminder",disable:function(){return"none"===e.values.get("repeat_type")}},expire_qualification_after_reminder:{label:lng("reminder for a qualification that expired"),message:!0,sms:!0,insert:this.typeCheck(["qualification"]),messageType:"expire_qualification_after_reminder",mod:this.typeCheck(["qualification"])?["","ENT"]:null,disable:function(){return"none"===e.values.get("repeat_type")},repeat:!0},meeting_absence_reminder:{label:lng("notify about members absent from meetings"),helpKey:"@group/notifications/custom/add/notify_about_absence",sms:!0,time:!1,mod:this.typeCheck(["qualification","course","course_template"])?["","ENT"]:null},waiting_list_notification:{label:lng("notify about users added to waiting list"),sms:!0,time:!1,mod:this.typeCheck(["qualification"])?["","ENT"]:null,insert:this.typeCheck(["course","group","qualification","course_template"]),disable:function(){return!e.values.get("waiting_list_active")}},members_added_notification:{label:lng("notify when users are added to workspace"),sms:!0,message:!0,time:!1,messageType:function(e){return e?"member_join_group":"member_join_group_other"},name:"member_join_group",mod:this.typeCheck(["qualification"])?["","ENT"]:null,insert:this.typeCheck(["course","group","qualification","course_template"])},member_left_notification:{label:lng("notify when a user leaves the workspace"),sms:!0,message:!0,time:!1,messageType:"member_left",mod:["","ENT"],insert:this.typeCheck(["course","group","qualification","course_template"])},member_remove_notification:{label:lng("notify when users are removed from the workspace"),helpKey:"@group/notifications/custom/add/member_remove_notification",sms:!0,message:!0,time:!1,messageType:"members_removed",mod:["","ENT"],insert:this.typeCheck(["course","group","qualification","course_template"])}},n=function(){return{targetFieldsOptions:!e.isEnterprise&&["user","authority"],targetAuthoritiesOptions:!e.isEnterprise&&["manager"]}};return{type:"section",sid:"customNotifications",title:lng("custom notifications"),mod:this.typeCheck(["qualification","course"])?null:["","ENT"],fields:[{type:"component",name:"notifications",Render:u.oS,props:{notificationsTypes:t,options:n}},{type:"component",name:"notifications",Render:u.oQ,props:{notificationsTypes:t,options:n}}]}}},{key:"generalCompletionSection",value:function(){var e=[{val:"",label:lng("off").caps()},{val:1,label:lng("user completed all of the %s",lng("assignments")+"/"+lng("meetings")).caps()}];return this.isEnterprise&&e.push({val:2,label:lng("user completed all of the %s",lng("assignments")).caps()},{val:3,label:lng("user attended all meetings").caps()}),{type:"section",sid:"generalCompletion",title:lng("general"),fields:[{type:"checkbox",name:"hide_score",label:lng("hide score"),mod:["","ENT"]},{type:"checkbox",name:"no_message_on_publish",label:lng("send message to users when publishing grades automatically"),mod:["","ENT"],reversed:!0},{type:"select",name:"auto_complete_course",label:lng("publish grades when").caps(),options:e,sub:this.typeCheck(["qualification"])?lng("the grade will be published after completing all the qualifications dependencies").caps():void 0},fe({type:"number",name:"credit_on_completion",label:lng("credit units given on completion"),min:0,mod:["","ENT"]}),{type:"select",name:"course_certificate",label:lng("select a diploma to allow users to download after completion"),options:this.serverResponse.data.diplomas,emptyOption:!0},{type:"checkbox",name:"publish_score_when_added",label:lng("publish user score when adding a new user and the user dependencies are completed"),mod:["","ENT"],insert:this.typeCheck(["qualification"])},{type:"checkbox",name:"optional_completion",label:lng("set as optional qualification (completion not necessary for parent qualification completion)"),mod:["","ENT"],insert:this.typeCheck(["qualification"])},{type:"set",fields:[{type:"component",Render:F.R9,label:lng("managers can publish grades for").caps()},{type:"radioset",name:"publish_score_only_when_completed",options:[{val:"",label:lng("everyone").caps()},{val:"1",label:lng("members who completed all completion conditions").caps()}]}]}]}}},{key:"completionConditionsSection",value:function(){return{type:"section",sid:"completionConditions",title:lng("completion conditions"),fields:[{type:"range",name:"passing_grade",label:lng("passing score"),value:"0"},{type:"range",name:"required_assignments_completion",label:lng("required assignments completion"),value:"0",sign:"%"},{type:"range",name:"required_meetings_attendance",label:lng("required meetings attendance"),value:"0",sign:"%"},fe({type:"number",name:"teacher_score_weight",label:lng("manager evaluation weight"),mod:["","ENT"]}),fe({type:"number",name:"credit_required",label:lng("credit units required"),mod:["","ENT"],insert:this.typeCheck(["qualification"])})]}}},{key:"skillsSection",value:function(){return{type:"section",sid:"skillsSection",sectionWidth:"800px",title:lng("skills"),insert:Blsm.isFeatureEnabled("skills_occupations"),fields:[{type:"multiple_items",name:"skills",label:lng("skills"),showId:!1,valueIsMap:!0,theme:"bright",objectKeys:["sk_id","skill_level"],buttons:[{Render:de}],searchData:function(e,t){(0,f.SC)("skills/autocomplete_skill",{data:{term:e.term||"",id:e.ids||""}},t)}}]}}},{key:"requiredQualificationsSection",value:function(){var e=this;return{type:"section",sid:"requiredQualifications",insert:this.typeCheck(["qualification"]),title:lng("required qualifications"),fields:[{type:"set",fields:[{type:"component",Render:F.R9,wrap:!0,label:lng("choose other qualifications that are required to complete this qualification").caps()},{type:"multiple_items",name:"required_qualifications",label:lng("select required qualifications"),poster:!0,theme:"bright",valueIsMap:!0,objectKeys:["id","order"],maxItems:this.isEnterprise?0:1,searchData:function(t,n){var r={req:"AutoComplete",exclude:null==e?void 0:e._id,owned:1,types:["Qualification"],term:t.term||"",id:t.ids||""};(0,f.SC)("ajax/GroupsAjax.class.php",{data:r},n)},buttons:this.isEnterprise?[{Render:F.Pl,onChange:function(e,t){var n=t.value;return e.order=n,e}}]:[]},{type:"checkbox",name:"display_condition_components",label:lng("display required qualification components"),mod:["","ENT"]}]}]}}},{key:"requiredCoursesSection",value:function(){var e=this,t=[{Render:F.qx,props:{values:this.values},onChange:function(e,t){var n=t.value;return e.dependency_type=n,e}}];return this.isEnterprise&&t.push({Render:F.yP,props:{disable:function(){return e.values.get("minimum_required_courses")>0}},onChange:function(e,t){var n=t.value;return e.optional=n,e}}),{type:"section",sid:"requiredCourses",insert:this.typeCheck(["qualification"]),title:lng("required courses"),fields:[{type:"set",fields:[{type:"component",Render:F.R9,wrap:!0,label:lng("choose courses or course templates for the users to complete in order to complete this qualification").caps()},{type:"multiple_items",name:"required_courses",label:lng("select courses and course templates"),showId:!1,poster:!0,theme:"bright",valueIsMap:!0,objectKeys:["id","optional","dependency_type"],maxItems:this.isEnterprise?0:2,searchData:function(e,t){var n={req:"AutoComplete",owned:1,types:["Group","Course_template"],term:e.term||"",id:e.ids||""};(0,f.SC)("ajax/GroupsAjax.class.php",{data:n},t)},buttons:t},{type:"row_set",mod:["","ENT"],fields:[{type:"component",Render:F.R9,label:lng("minimum required courses").caps()+":"},{type:"number",name:"minimum_required_courses",disable:function(e){var t;return Array.from((null===(t=e.get("required_courses"))||void 0===t?void 0:t.values())||[]).some((function(e){return!!parseInt(e.optional)}))}}]},{type:"checkbox",name:"owner_options[add_users_to_courses]",label:lng("new members will be added to the courses listed above"),mod:["","ENT"],helpKey:"@add_member/add_users_to_courses"}]},{type:"checkbox",name:"owner_options[add_users_to_repeat_courses]",label:lng("add users to repeated courses from the list above when needed"),helpKey:"@qualification/completions/required/add_from_the_list",mod:["repetition","ENT"],insert:Blsm.isFeatureEnabled("repetition"),visible:function(e){return"none"!==e.get("repeat_type")}}]}}},{key:"customFieldsSection",value:function(){var e=this._customFieldsPrep(this.serverResponse.data.custom_fields);return{type:"section",sid:"customFields",insert:e.length>0,title:lng("custom fields"),fields:e}}},{key:"mailingListSection",value:function(){return{type:"section",sid:"mailingList",mod:["","ENT"],insert:this.typeCheck(["group","course","qualification","workplan"]),title:lng("mailing list"),fields:[{type:"multiple_items",name:"mailing_list_groups",label:lng("workspaces"),poster:!0,theme:"bright",helpKey:"@group/advanced/mailing/workspaces",searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Group"],term:e.term||"",id:e.ids||""}},t)}},{type:"multiple_items",name:"mailing_list_users",label:lng("users"),poster:!0,theme:"bright",helpKey:"@group/advanced/mailing/users",searchData:function(e,t){(0,f.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)}}]}}},{key:"additionalSection",value:function(){var e=this;return{type:"section",sid:"additional",title:lng("additional"),fields:[{type:"checkbox",name:"hide_in_workspaces",label:lng("hide from members"),mod:["","ENT"],insert:this.typeCheck(["qualification"]),helpKey:"@qualification/advanced/additional/hide_in_workspaces"},{type:"checkbox",name:"group_public",label:lng("share ownership"),mod:["","ENT"],insert:this.typeCheck(["group","course","course_template","qualification","workplan"])},{type:"checkbox",name:"manager_cross_report_permission",label:lng("manager cross report permission"),mod:["","ENT"],insert:this.typeCheck(["group"])&&Blsm.user.isPowerManager,helpKey:"@group/advanced/additional/manager_cross_report_permission"},{type:"checkbox",name:"owner_options[watchittoo]",label:lng("group liveclass room"),insert:this.typeCheck(["group","course","workplan"])&&Blsm.InitialData.special.watchittoo},{type:"checkbox",name:"template_guard",label:lng("guard template (limit instance manager permissions)"),mod:["","ENT"],insert:this.typeCheck(["course_template"])},fe({type:"number",name:"estimated_budget",label:lng("estimated budget"),mod:["resources","ENT"],insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"])}),{type:"row_set",mod:["resources","ENT"],insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"]),fields:[{type:"component",Render:F.R9,label:lng("estimated cost for member").caps()+":"},{type:"number",name:"estimated_cost_for_member"},{type:"component",node:(0,O.tZ)(C.l,{theme:"contained",onClick:function(){var t=e.values.get("estimated_budget");if(!t||t<1)return Blsm.Warning(lng("missing estimated budget"));var n=e.values.get("min_users");if(!n||n<1)return Blsm.Warning(lng("missing minimum users"));e.updateValue(Math.round(t/n),"estimated_cost_for_member")},children:lng("calculate").caps()}),grow:0}]},{type:"multiple_items",name:"resource_bundles",label:lng("restrict resources to resource bundles"),mod:["resources","ENT"],insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"]),searchData:function(e,t){(0,f.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",show_all:1,owned:1,member:1,member_active:1,types:"ResourceBundle",term:e.term||"",id:e.ids||""}},t)}},{type:"indent_set",mod:["resources","ENT"],insert:Blsm.isFeatureEnabled("resources")&&this.typeCheck(["group","course","course_template"]),fields:[{type:"checkbox",name:"clear_incompatible",label:lng("clear incompatible resources")}]},{type:"select",name:"default_assignee",label:lng("default assignee"),options:this.serverResponse.data.default_assignee_options,emptyOption:!0,mod:["","ENT"],insert:this.typeCheck(["workplan"])},{type:"checkbox",name:"members_can_set_status",label:lng("members can set status and assignee"),mod:["","ENT"],insert:this.typeCheck(["workplan"])},{type:"multiple_items",name:"designations",mod:["designation","ENT"],insert:this.typeCheck(["qualification"])&&Blsm.isFeatureEnabled("designation"),label:lng("start typing %s code or description",lng("designation",{phrase:!0})).caps(),theme:"bright",searchData:function(e,t){(0,f.SC)("designation/autocomplete/",{method:"POST",data:{term:e.term,id:e.ids,limit:e.ids?"no":""}},t)}},{type:"text",name:"external_id",readOnly:!Blsm.user.isPowerManager,label:lng("external id"),insert:Blsm.user.isPowerManager||!!this.serverResponse.data.external_id}]}}},{key:"preview",get:function(){return{title:this.values.get("group_name"),poster:l.g.func.imgUrl(this.values.get("poster")),status:this.formStatus,isApproved:!this.serverResponse.data.status&&!!this._id}}}]),n}(i.Z),z=ce(N.prototype,"refreshRichText",[c.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ce(N.prototype,"preview",[c.computed],Object.getOwnPropertyDescriptor(N.prototype,"preview"),N.prototype),ce(N.prototype,"SaveSuccess",[R],Object.getOwnPropertyDescriptor(N.prototype,"SaveSuccess"),N.prototype),N),de=function(e){var t=e.onChange,n=e.item,r=W((0,y.useState)(n.skill_level||1),2),o=r[0],i=r[1],a=[1,2,3].map((function(e){return(0,L.r0)(e)}));return(0,O.tZ)(X.u,{text:lng("select skill level"),children:(0,O.tZ)("div",{style:{display:"flex"},children:a.map((function(e,r){return(0,O.tZ)(q.xY,{skillTag:e,selected:parseInt(e.val)===parseInt(o),onSelect:function(e){return function(e,n){e.skill_level=n,i(n),null==t||t(e)}(n,e)}},r)}))})})},fe=function(e){var t=e.type,n=e.name,r=e.label,i=e.insert,a=e.visible,l=e.helpKey,s=e.mod;return{type:"row_set",insert:!(0,o.DM)(i)||i,mod:s,visible:a,helpKey:l,fields:[{type:"component",Render:F.R9,label:r.caps()+":"},{type:t,name:n}]}},me=["daily","weekly","monthly","yearly"]},77693:function(e,t,n){"use strict";n.d(t,{m:function(){return E},M:function(){return N}});var r=n(16920),o=n(15560),i=n(87363),a=n(23838),l=n(67033),s=n(95405),c=n(64902),u=n(35944);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var m={name:"1x0fep6",styles:">._title{white-space:nowrap;color:white;font-size:1.4rem;font-weight:lighter;margin-bottom:0.7em;cursor:pointer;&:hover{text-decoration:underline;}}._circle,._circle_more{box-sizing:content-box;border:2px solid white;}._circle_more{background-color:rgba(255, 255, 255, 0.3);color:white;}"},g=function(e){return(0,u.tZ)(s.SV,{children:(0,u.tZ)(h,d({},e))})},h=(0,o.observer)((function(e){var t,n=e.users,r=e.className,o=(0,i.useContext)(a.l9).getStore("home").getOverviewStore();return!!Blsm.isFeatureEnabled("coached_assignments")&&(0,u.BX)("div",{css:m,className:r,children:[parseInt(null==o||null===(t=o.coach_completion)||void 0===t?void 0:t.total)>0&&(0,u.tZ)("div",{className:"_title",onClick:function(){return o.nav(["coaching"])},children:lng("my trainees").caps()}),n.length>0&&(0,u.tZ)(c.I9,{className:"_trainees-list",users:n,maxSlots:4,onClick:function(e){return o.nav(["coaching",null==e?void 0:e.user_id])}})]})})),b=n(31991),y=n(95033),v=n(60619),_=n(99234),w=n(7190),O=n(82883),k=n(85311),x=n(97059),S=n(71134),j=n(70917),C=n(7392),P=n(40441),Z=n(66975),B=n(73105),T=n(86344),E=(0,o.observer)((function(){var e,t=(0,i.useContext)(a.l9).getStore("home").getOverviewStore(),n=t.assignment_completion,o=t.qualification_completion,c=t.course_completion,p=t.trainees,d=t.showOnlyAssignments,f=t.todoAssignments,m=t.listAssignments,h=t.workspaces,v=t.groupsCompactView,j=[],C=(!Blsm.prm.workspaces_only_for_managers||Blsm.user.isManager)&&(null==h?void 0:h.length)>0,T=(null==n?void 0:n.total)>0,E=(null==n?void 0:n.completed)>0&&(null==n?void 0:n.total)===(null==n?void 0:n.completed);return(null==n?void 0:n.total)>0&&j.push({val:(0,S.e9)(n.completed,n.total,{add_sign:!1}),color:r.g.colors.entity.assignment,icon:"menu_overview",label:lng("assignments completion")+": ".concat((0,S.e9)(n.completed,n.total,{verbose:!0}))}),(null==c?void 0:c.total)>0&&j.push({val:(0,S.e9)(c.completed,c.total,{add_sign:!1}),color:r.g.colors.entity.course,icon:"mng_courses",label:lng("courses completion")+": ".concat((0,S.e9)(c.completed,c.total,{verbose:!0}))}),(null==o?void 0:o.total)>0&&j.push({val:(0,S.e9)(o.completed,o.total,{add_sign:!1}),color:r.g.colors.entity.qualification,icon:"mng_qualifications",label:lng("qualifications completion")+": ".concat((0,S.e9)(o.completed,o.total,{verbose:!0}))}),(0,u.BX)(l.U,{children:[(0,u.BX)(O.EL,{children:[(0,u.tZ)(w.K,{}),(0,u.BX)("div",{children:[(0,u.BX)("div",{className:"_home_banner",children:[j.length>0&&(0,u.tZ)("div",{className:"_rings",children:(0,u.tZ)(x._P,{values:j})}),(0,u.BX)("div",{className:"_titles",children:[(0,u.BX)("div",{className:"h1",children:[lng("hello %s",Blsm.user.user_first_name).toUpperCase(),","]}),(0,u.tZ)("div",{className:"h2",children:lng("let's get started!").caps()})]})]}),(0,u.tZ)(k.zh,{}),(0,u.tZ)(g,{className:"_mytrainees",users:p}),T&&(0,u.tZ)(B.u,{className:"_home_tasks_display",text:t.showOnlyAssignments?lng("see assignment cards"):lng("see current and past assignments list"),children:(0,u.tZ)(Z.TG,{icon:t.showOnlyAssignments?"view_tiles":"menu_overview",className:"_go_button",onClick:function(){return t.showOnlyAssignments=!t.showOnlyAssignments}})})]})]}),(0,u.BX)("div",{className:"_main_op",children:[d?(0,u.BX)(u.HY,{children:[(0,u.tZ)(_.PQ,{title:lng("assignments"),mainTitle:!0,className:"_assignments_title"}),(0,u.tZ)("div",{className:"_main_narrow",children:(0,u.tZ)(s.SV,{children:(0,u.tZ)(l.U,{children:(0,u.tZ)(y.Mz,{showCompleted:t.showCompleted,setShowCompleted:function(){return t.setShowCompleted(!t.showCompleted)},assignments:m,initCompactView:!0,filtersAbove:!0,filtersTheme:"bright"})})})})]}):T?(0,u.BX)(l.U,{children:[(0,u.tZ)(_.PQ,{title:lng("assignments"),mainTitle:!0,className:"_assignments_title"}),f.length>0?(0,u.tZ)(b.T,{inOpenPage:!0,floatingControls:!0,showListButton:function(){return t.showOnlyAssignments=!t.showOnlyAssignments},children:f.map((function(e){return(0,u.tZ)(y.Al,{assignment:e},e.assignment_id)}))}):(0,u.tZ)("div",{className:"_main_narrow",style:{marginBottom:"30px"},children:p.length>0?(0,u.tZ)(D,{}):(0,u.tZ)(N,{title:lng("you did it!"),subTitle:(0,u.BX)(u.HY,{children:[(0,u.tZ)("div",{children:lng("you finished all your assignments!").caps()}),E&&(0,u.tZ)("div",{children:(0,u.tZ)(P.A,{href:{home:"overview/alist=1/show_completed=1"},style:{textDecoration:"underline"},children:lng("see your completed assignments").caps()})})]}),icon:"cheers"})})]}):(0,u.tZ)("div",{style:{marginTop:"120px"}}),!Blsm.isGuiFeatureEnabled("hide_calendar_desktop")&&C&&!d&&(0,u.tZ)("div",{className:"_main_narrow",children:(0,u.tZ)(l.U,{children:(0,u.tZ)(s.SV,{children:(0,u.tZ)(I,{minimizeOnEmpty:!0,overviewStore:t})})})}),C&&!d&&(0,u.tZ)("div",{style:{backgroundColor:r.g.colors.bg_main,paddingTop:"10px"},children:(0,u.tZ)("div",{className:"_main_narrow",children:(0,u.BX)(l.U,{children:[(0,u.tZ)(_.PQ,{title:lng("workspaces"),mainTitle:!0}),(0,u.tZ)(s.SV,{children:(0,u.tZ)(_.uO,{workspaces:h,compactView:v,onViewSelect:function(e){return t.groupsCompactView=e},recent:"recent_groups_"+Blsm.user.id,setShowOld:t.setShowOld,displayCount:!0})})]})})}),!T&&!C&&(0,u.tZ)("div",{className:"_main_narrow",children:(0,u.tZ)(N,{title:lng("there is nothing here"),subTitle:lng("you don't have any assignments or workspaces, let's bring life to this page!"),icon:"digging",button:null!==(e=Blsm.InitialData.main_menu)&&void 0!==e&&e.coursecatalog?{click:function(){return(0,P.p4)("#cregistration",!0)},label:lng("go to %s",lng("course catalog"))}:null})})]})]})})),I=(0,o.observer)((function(e){var t=e.overviewStore,n=e.minimizeOnEmpty,r=t.activeCalendarDate,o=t.monthEvents;return(0,u.tZ)(s.SV,{children:(0,u.tZ)(v.V,{minimizeOnEmpty:n,className:"_marginBottom",activeDate:r,onDateSelect:function(e){return t.activeCalendarDate=e},onMonthChange:function(e){return t.activeCalendarMonth=e},events:o,onStripClick:function(e){return t.setActiveComponent(e)}})})})),A=(0,j.iv)("height:100%;width:100%;position:relative;background-color:",r.g.colors.bg_cont,";border-radius:20px;padding:20px;text-align:center;>.info{display:flex;justify-content:space-evenly;margin-top:20px;padding:15px;>div{margin:10px;border-radius:20px;padding:20px;font-size:1.3em;color:white;&.personal{border:1px solid ",r.g.theme.color_1,";background-color:",(0,T.mR)(r.g.theme.color_1,.1),";color:",r.g.theme.color_1,";}&.coaching{border:1px solid ",r.g.colors.dominant_main,";background-color:",(0,T.mR)(r.g.colors.dominant_main,.1),";color:",r.g.colors.dominant_main,";}.Icon{display:flex;flex-direction:row;font-size:1.8em;text-align:center;justify-content:space-evenly;}.message{padding:10px 0;font-size:1.2em;}}}",""),D=(0,o.observer)((function(){return(0,u.tZ)("div",{css:A,children:(0,u.BX)("div",{className:"info",children:[(0,u.BX)("div",{className:"personal",children:[(0,u.tZ)("div",{className:"status",children:(0,u.tZ)(Z.JO,{icon:"cheers"})}),(0,u.tZ)("div",{className:"message",children:lng("you finished all your personal assignments").caps()}),(0,u.tZ)("div",{children:(0,u.tZ)(P.A,{href:{home:"overview/alist=1/show_completed=1"},style:{textDecoration:"underline"},children:lng("see your completed assignments").caps()})})]}),(0,u.BX)("div",{className:"coaching",children:[(0,u.tZ)("div",{className:"status",children:(0,u.tZ)(Z.JO,{icon:"menu_overview"})}),(0,u.tZ)("div",{className:"message",children:lng("you still have coaching assignments remaining").caps()}),(0,u.tZ)("div",{children:(0,u.tZ)(P.A,{href:{home:"overview/coaching"},style:{textDecoration:"underline"},children:lng("go to %s",lng("coaching assignments")).caps()})})]})]})})})),R=(0,j.iv)("height:100%;width:100%;position:relative;background-color:",r.g.colors.bg_cont,";border-radius:20px;padding:15px;*{margin:auto;text-align:center;}>.idol{font-size:60px;}>.title{font-size:2.3em;}>.paragraph{font-size:1.3em;}>.button-container{margin:18px auto;}",""),N=(0,o.observer)((function(e){var t=e.title,n=e.subTitle,o=e.button,i=void 0===o?null:o,a=e.icon;return(0,u.BX)("div",{css:R,className:"EmptyMessage",children:[(0,u.tZ)("div",{className:"idol",children:(0,u.tZ)(Z.JO,{icon:a,color:r.g.theme.color_1})}),(0,u.tZ)("div",{className:"title",children:t.caps()}),n&&(0,u.tZ)("div",{className:"paragraph",children:"string"==typeof n?n.caps():n}),i&&(0,u.tZ)("div",{className:"button-container",children:(0,u.tZ)(C.l,{theme:"contained",onClick:i.click,children:i.label.caps()})})]})}))},7190:function(e,t,n){"use strict";n.d(t,{K:function(){return z},U:function(){return R}});var r=n(15560),o=n(87363),i=n(23838),a=n(71134),l=n(26291),s=n(70917),c=n(16920),u=n(27787),p=n(43698),d=n(67033),f=n(31991),m=n(85446),g=n(95405),h=n(95033),b=n(82883),y=n(85311),v=n(97059),_=n(73105),w=n(66975),O=n(65405),k=n(35944);var x={name:"iaf3p8",styles:"bottom:-35px"},S=(0,r.observer)((function(){var e,t=(0,o.useContext)(i.l9).getStore("home").getOverviewStore(),n=t.coachingAssignments;t.coachingUserId&&(n=n.filter((function(e){return e.attr("coached_users").some((function(e){return e.user_id===t.coachingUserId}))})));var r=[];if((null===(e=t.coach_completion)||void 0===e?void 0:e.total)>0){var l=t.coach_completion;r.push({val:(0,a.e9)(l.completed,l.total,{add_sign:!1}),color:c.g.colors.entity.coach,icon:"manager",label:lng("coach completion")+": ".concat((0,a.e9)(l.completed,l.total,{verbose:!0}))})}var u=function(e){return t.coachingUserId=t.coachingUserId===e?"":e},S=(0,k.BX)("div",{children:[lng("user").caps()+": ",(0,k.tZ)(p.I,{type:"select",value:t.coachingUserId||"",options:[{val:"",label:""}].concat(t.trainees.map((function(e){return{val:e.user_id,label:(0,a.v2)(e)}}))),onChange:function(e){return u(e)}}),(0,k.tZ)(O.X,{label:lng("show completed assignments"),color:"green",value:t.showCompleted,onChange:function(){return t.setShowCompleted(!t.showCompleted)}})]});return(0,k.BX)(d.U,{children:[(0,k.BX)(b.EL,{children:[(0,k.tZ)(z,{}),(0,k.BX)("div",{children:[(0,k.BX)("div",{className:"_home_banner",children:[r.length>0&&(0,k.tZ)("div",{className:"_rings",children:(0,k.tZ)(v._P,{values:r})}),(0,k.BX)("div",{className:"_titles",children:[(0,k.BX)("div",{className:"h1",children:[lng("my trainees").caps(),","]}),(0,k.tZ)("div",{className:"h2",children:lng("you have %s coaching assignments",t.coachingAssignments.length).caps()})]})]}),(0,k.tZ)(y.zh,{}),(0,k.tZ)(_.u,{className:"_home_tasks_display",text:lng("back to %s|back to some page",lng("overview",{phrase:!0})).caps(),css:x,children:(0,k.tZ)(w.TG,{icon:"home",className:"_home_tasks_display",css:(0,s.iv)({bottom:(0,a.tq)()?"-35px":"35px"},"",""),onClick:function(){return t.nav([])}})})]})]}),(0,k.BX)("div",{className:"_main_op",children:[t.trainees.length>0&&(0,k.tZ)(f.T,{inOpenPage:!0,floatingControls:!0,children:t.trainees.map((function(e){return(0,k.tZ)(m.k,{user:e,active:t.coachingUserId===e.user_id,onButtonClick:function(){return u(e.user_id)}},e.user_id)}))}),(0,k.tZ)("div",{className:"_main_narrow",children:(0,k.tZ)(g.SV,{children:(0,k.tZ)(h.Mz,{assignments:n,assignee:t.coachingUserId,inContainer:!0,title:lng("assignments").caps(),filtersAbove:!0,mayChangeView:!0,className:"_marginBottom",barExtraComponent:S})})})]})]})})),j=n(77693),C=n(75247),P=(0,r.observer)((function(){var e=(0,o.useContext)(i.l9).getStore("home").getOverviewStore();return(0,a.Ju)(lng("home")),e.ready?(0,k.tZ)(k.HY,{children:e.coachingMode?(0,k.tZ)(S,{}):(0,k.tZ)(j.m,{})}):(0,k.tZ)(C.h,{})})),Z=n(40441),B=n(48207),T=n(23016),E=(0,r.observer)((function(){var e=(0,o.useContext)(i.l9).getStore("home").getDiscussionsStore(),t=(0,o.useRef)(0);return(0,o.useEffect)((function(){return e.ready&&(t.current=setInterval((function(){return e.fetch()}),3e4)),function(){return clearInterval(t.current)}}),[e.ready]),e.ready?(0,k.BX)(d.U,{children:[(0,k.BX)(b.EL,{children:[(0,k.tZ)(z,{}),(0,k.tZ)("div",{children:(0,k.BX)("div",{className:"_titles",children:[(0,k.BX)("div",{className:"h1",children:[lng("hello %s",Blsm.user.user_first_name).toUpperCase(),","]}),(0,k.tZ)("div",{className:"h2",children:lng("let's get started!").caps()})]})})]}),(0,k.tZ)("div",{className:"_main_op",children:(0,k.tZ)(B.W2,{fitWidth:!0,noBottomPadding:!0,children:(0,k.tZ)(T.O,{filteredItems:e.filteredDiscussions,items:e.discussions,filterNsort:e.filterSort,showWorkspace:!0})})})]}):(0,k.tZ)(C.h,{})})),I=n(76364),A=n(40493),D=(0,s.iv)("._head_content>div{display:flex;flex-wrap:wrap;align-items:center;margin-top:15px;height:100%;._home_banner{display:flex;flex-direction:row;width:auto;align-items:center;justify-content:space-around;}._rings{flex-shrink:0;width:210px;height:210px;>.Rings{transform-origin:top ",c.g.isRTL?"right":"left",";}}._titles{color:white;margin:0 10px;",c.g.classes.margin_near("30px")," .h1{font-weight:700;font-size:2.5rem;}.h2{font-size:2rem;}}._mytrainees{",c.g.classes.margin_far("10px"),";._trainees-list{display:flex;}}._home_tasks_display{",c.g.classes.margin_far("12px"),";position:absolute;bottom:30px;",c.g.far,":0;}",c.g.mQuery.max(850),"{._home_tasks_display{bottom:0;}._rings{width:180px;height:180px;font-size:35px;>.Rings{transform:scale(",180/220,");}}._titles{.h1{font-size:1.45rem;}.h2{font-size:1.2rem;}}}",c.g.mQuery.max(600),"{._mytrainees{width:100%;}._rings{width:120px;height:120px;font-size:25px;margin:0 10px;>.Rings{transform:scale(",120/220,");}}}}._main_op{position:relative;margin-top:-84px;._main_narrow{",c.g.classes.content_width,";._marginBottom{margin-bottom:",c.g.consts.CONT_MARGIN,"px;}}}._assignments_title{color:",c.g.colors.dominant_white,";",c.g.classes.content_width,";}",""),R=(0,r.observer)((function(){var e=(0,o.useContext)(i.l9).getStore("home");(0,a.Ju)(lng("home"));return(0,k.BX)(l.T,{css:D,bottomPadding:!0,contBG:!0,children:[function(){switch(e.mode){case"overview":return(0,k.tZ)(P,{});case"tasks":return(0,k.tZ)(u.k,{});case"discussions":return(0,k.tZ)(E,{})}return(0,k.tZ)("div",{children:"mode doesn't exists"})}(),(0,k.tZ)(I.$,{})]})})),N=(0,s.iv)("margin:22px auto 0;",c.g.mQuery.mobile,"{margin:11px auto 0;}",""),z=(0,r.observer)((function(){var e=(0,o.useContext)(i.l9).getStore("home"),t=e.show_nav&&[{val:"overview",label:lng("overview",{phrase:!0})},e.show_tasks&&{val:"tasks",label:lng("my tasks",{phrase:!0})},e.show_discussions&&{val:"discussions",label:lng("discussions",{phrase:!0})}].filter((function(e){return e}));return(0,k.BX)("div",{css:N,children:[t&&(0,k.tZ)(A.T,{value:e.mode,size:30,onChange:function(e){var t=void 0;["overview","discussions"].includes(e)?t={home:e}:"tasks"===e&&(t={home:"tasks",tab:"my"}),t&&(0,Z.p4)(t,!0)},options:t,inlineLabels:!0}),(0,k.tZ)("div",{style:{height:"25px"}})]})}))},27787:function(e,t,n){"use strict";n.d(t,{k:function(){return Ve},l:function(){return We}});var r=n(87363),o=n(70917),i=n(23838),a=n(15560),l=n(31092),s=n(95405),c=n(48207),u=n(77376),p=n(16920),d=n(40441),f=n(66975),m=n(39483),g=n(71134),h=n(8411),b=n(68567),y=n(5474),v=n(539),_=n(27821),w=n(33051),O=n(34065),k=n(24210);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var B=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(i,e);var t,n,r,o=C(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).options=e.options||{},t.onSave=e.onSave,t.title=lng("create note").caps(),t._fields=[{type:"richtext",name:"note_content",label:lng("content"),style:{minHeight:"100px"}}],t._prepFields(e.data||{}),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){var t;null===(t=this.onSave)||void 0===t||t.call(this,e)}}])&&S(t.prototype,n),r&&S(t,r),i}(k.I),T=n(75898),E=n(73105),I=n(40493),A=n(98e3),D=n(35944);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t){return(z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function M(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return F(this,n)}}function F(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var X=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&z(e,t)}(i,e);var t,n,r,o=M(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).options=e.options||{},t.onSave=e.onSave,t.title=lng("edit board").caps(),t._buildFields(),t._prepFields(e.data||{}),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){var t;null===(t=this.onSave)||void 0===t||t.call(this,e)}},{key:"_buildFields",value:function(){this._fields=[{type:"text",name:"board_name",label:lng("name"),required:!0},{type:"multiple_items",name:"board_users",label:lng("users"),poster:!0,theme:"bright",searchData:function(e,t){(0,A.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)},valueIsMap:!0,objectKeys:["id","write_permission"],buttons:[{Render:function(e){var t=e.onChange,n=e.item;return(0,D.tZ)("div",{children:(0,D.tZ)(E.u,{text:lng("full control").caps(),children:(0,D.tZ)(I.T,{value:!!n.write_permission,size:18,onChange:t,options:[{val:!1,color:p.g.colors.dominant_main,icon:"mark_x_light"},{val:!0,color:p.g.colors.dominant_main,icon:"mark_v_light"}]})})})},onChange:function(e){return e.write_permission=e.write_permission?0:1,e}}]}]}}])&&N(t.prototype,n),r&&N(t,r),i}(k.I);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,o=H(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).options=e.options||{},t.onSave=e.onSave,t.title=lng("create column").caps(),t._buildFields(),t._prepFields(e.data||{}),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){var t;null===(t=this.onSave)||void 0===t||t.call(this,e)}},{key:"_buildFields",value:function(){this._fields=[{type:"text",name:"column_name",label:lng("name")},{type:"color",name:"column_color",label:lng("background color"),placeholder:"#FFFFFF"}]}}])&&U(t.prototype,n),r&&U(t,r),i}(k.I),K=n(43698),$=n(55832),Y=n(40965),Q=n(7392),ee=n(85311),te=n(86344);function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oe(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=(0,r.lazy)((function(){return Promise.all([n.e(866),n.e(218)]).then(n.bind(n,15948)).then((function(e){return{default:e.DragDropContext}}))})),se=(0,r.lazy)((function(){return Promise.all([n.e(866),n.e(218)]).then(n.bind(n,15948)).then((function(e){return{default:e.Draggable}}))})),ce=(0,r.lazy)((function(){return Promise.all([n.e(866),n.e(218)]).then(n.bind(n,15948)).then((function(e){return{default:e.Droppable}}))})),ue=(0,a.observer)((function(){var e=(0,r.useContext)(i.l9).getStore("board");return e.ready?(0,D.BX)("div",{css:e.fullSize?p.g.classes.fullSizeContainer:void 0,className:(0,g.AK)({"full-size":e.fullSize}),children:[(0,D.tZ)(xe,{}),(0,D.tZ)(de,{})]}):(0,D.tZ)(v.$,{})})),pe=(0,o.iv)(".columns-list{padding:20px 0;display:flex;overflow-x:auto;&.dragOver{background-color:",p.g.colors.highlight,";}}",""),de=(0,a.observer)((function(){var e=(0,r.useRef)(0),t=(0,r.useContext)(i.l9).getStore("board");if((0,r.useEffect)((function(){return t.current_board&&(e.current=setInterval((function(){return t.refresh()}),5e3)),function(){return clearInterval(e.current)}}),[t.current_board]),!t.current_board)return(0,D.tZ)("div",{});return(0,D.tZ)(r.Suspense,{fallback:(0,D.tZ)(v.$,{}),children:(0,D.tZ)(le,{onDragEnd:function(e){var n=e.destination,r=e.source,o=e.type,i=e.draggableId;n&&(n.droppableId===r.droppableId&&n.index===r.index||("search"===r.droppableId?t.board.addTaskFromSearch(i,n.droppableId,n.index):"NOTE"===o?t.board.swapNotes(r.droppableId,r.index,n.droppableId,n.index):t.board.swapColumns(r.index,n.index)))},children:(0,D.tZ)("div",{css:pe,children:(0,D.tZ)(r.Suspense,{fallback:(0,D.tZ)(v.$,{}),children:(0,D.tZ)(ce,{droppableId:"board",type:"COLUMN",direction:"horizontal",children:function(e,t){return(0,D.tZ)(fe,{provided:e,snapshot:t})}})})})})})})),fe=(0,a.observer)((function(e){var t,n=e.provided,o=e.snapshot,a=(0,r.useContext)(i.l9).getStore("board");return(0,D.BX)("div",ie(ie({},n.droppableProps),{},{ref:n.innerRef,className:(0,g.AK)("columns-list",{dragOver:o.isDraggingOver}),children:[a.showSearch&&(0,D.tZ)(Se,{}),null===(t=a.board)||void 0===t?void 0:t.columns.map((function(e,t){return(0,D.tZ)(ge,{column:e,index:t},e.column_id)})),n.placeholder]}))})),me=(0,o.iv)("margin:0 5px;border:1px solid ",p.g.colors.separator,";border-radius:8px;padding:5px 2px;min-width:335px;max-width:335px;background-color:",p.g.colors.bg_1,";",p.g.classes.shadow_light,";.column-name{font-size:1.1em;font-weight:600;text-align:center;}.column-top{display:flex;justify-content:space-between;display:flex;gap:10px;margin:0 5px;}.note-list{min-height:calc(100% - 30px);border-radius:8px;padding:0 2px;}.inner-notes-scroll{min-height:600px;max-height:600px;overflow:auto;.full-size &{max-height:calc(100vh - 200px);}}.dragOver{background-color:rgba(255, 255, 255, 0.6);}&.dragging{background-color:",p.g.colors.dominant_main_shade,";}.search-box{display:flex;position:relative;.search-term{border:1px solid ",p.g.colors.dominant_main,";color:",p.g.colors.dominant_main,";padding:10px 8px;border-radius:8px;flex-grow:1;}.search-filter{padding:10px 0 0 6px;}.search-reload{position:absolute;top:10px;left:240px;cursor:pointer;}}",""),ge=(0,a.observer)((function(e){var t=e.column,n=e.index;return(0,D.tZ)(se,{draggableId:"col_"+t.column_id,type:"COLUMN",index:n,children:function(e,n){return(0,D.tZ)(he,{provided:e,snapshot:n,column:t})}})})),he=(0,a.observer)((function(e){var t=e.column,n=e.provided,o=e.snapshot,i=ne((0,r.useState)(!1),2),a=i[0],l=i[1],s=ne((0,r.useState)(!1),2),c=s[0],u=s[1],p=[{val:"edit",label:lng("edit column")},{val:"delete",label:lng("delete column")},{val:"empty",label:lng("empty column")}],d=ie({},n.draggableProps.style);return t.column_color&&(d.backgroundColor=t.column_color,d.color=(0,te.ou)(t.column_color)),(0,D.BX)("div",ie(ie({css:me},n.draggableProps),{},{ref:n.innerRef,style:d,className:(0,g.AK)({dragging:o.isDragging}),children:[(0,D.BX)("div",{className:"column-top",children:[t.canWrite?(0,D.tZ)(f.JO,ie(ie({icon:"move",className:"_drag"},n.dragHandleProps),{},{smallButtonLike:!0})):(0,D.tZ)("span",{}),(0,D.BX)("div",{className:"column-name",children:[t.column_name," ",t.notes.length>0?"(".concat(t.notes.length,")"):""]}),t.canWrite&&(0,D.BX)("div",{className:"_menu",children:[(0,D.tZ)(E.u,{text:lng("add note"),children:(0,D.tZ)(f.JO,{icon:"discussion",onClick:function(){return l(!0)},smallButtonLike:!0})}),(0,D.tZ)(w.x,{options:p,onSelect:function(e){switch(e){case"edit":u(!0);break;case"delete":(0,b.BB)(lng("are you sure you want to delete this column?").caps(),{text:lng("delete").caps(),onConfirm:function(){return t.delete()},confirmText:lng("delete")});break;case"empty":(0,b.BB)(lng("are you sure you want to empty this column?").caps(),{text:lng("empty").caps(),onConfirm:function(){return t.empty()},confirmText:lng("empty")})}},children:(0,D.tZ)(f.JO,{icon:"menu",smallButtonLike:!0})})]})]}),(0,D.tZ)(ce,{droppableId:t.column_id+"",type:"NOTE",children:function(e,n){return(0,D.tZ)(be,{provided:e,column:t,snapshot:n})}}),a&&(0,D.tZ)(Ee,{onSave:function(e){t.addNote(e),l(!1)},onClose:function(){return l(!1)}}),c&&(0,D.tZ)(Be,{onSave:function(e){return t.save(e),u(!1)},data:t.data(),onClose:function(){return u(!1)}})]}))})),be=(0,a.observer)((function(e){var t=e.column,n=e.provided,o=e.snapshot,a=(0,r.useContext)(i.l9).getStore("board"),l=a.searchInBoard.toLowerCase(),s=a.searchInBoard?t.notes.filter((function(e){var t=e.data,n=t.note_content,r=t.task_title;return(null==n?void 0:n.toLowerCase().includes(l))||(null==r?void 0:r.toLowerCase().includes(l))})):t.notes;return(0,D.tZ)("div",ie(ie({},n.droppableProps),{},{ref:n.innerRef,className:(0,g.AK)("note-list",{dragOver:o.isDraggingOver}),children:(0,D.BX)("div",{className:"inner-notes-scroll",children:[s.map((function(e,n){return(0,D.tZ)(ve,{note:e,index:n,columnId:t.column_id,notesLength:t.notes.length},e.data.note_id)})),n.placeholder]})}))})),ye={name:"u628aj",styles:"._drag{cursor:grab;}"},ve=(0,a.observer)((function(e){var t=e.note,n=e.index,r=e.columnId,o=e.notesLength;return(0,D.tZ)(se,{draggableId:t.data.loading?null:t.data.note_id+"",index:n,type:"NOTE",children:function(e,i){return(0,D.tZ)(_e,{provided:e,snapshot:i,note:t,columnId:r,noteIndex:n,notesLength:o})}})})),_e=(0,a.observer)((function(e){var t=e.provided,n=e.snapshot,a=e.note,l=e.columnId,s=e.noteIndex,c=e.notesLength,d=ne((0,r.useState)(!1),2),m=d[0],h=d[1],b=(0,r.useContext)(i.l9).getStore("board"),y=a.canWrite?(0,D.BX)(ee.c_,{children:[a.data.task_id&&(0,D.BX)(D.HY,{children:[(0,D.tZ)(f.JO,{icon:"discussion",toolTip:lng("edit note"),css:(0,o.iv)({fontSize:".8em",color:a.data.note_content?p.g.colors.dominant_orange:void 0},"",""),onClick:function(e){return h(!0),e.preventDefault(),e.stopPropagation()}})," "]}),s!==c-1&&(0,D.BX)(D.HY,{children:[(0,D.tZ)(f.JO,{css:(0,o.iv)({fontSize:".8em",color:p.g.colors.blue},"",""),icon:"arrow_down_double",toolTip:lng("move to bottom"),onClick:function(e){return b.board.swapNotes(l,s,l,c-1),e.preventDefault(),e.stopPropagation()}})," "]}),0!==s&&(0,D.BX)(D.HY,{children:[(0,D.tZ)(f.JO,{css:(0,o.iv)({fontSize:".8em",color:p.g.colors.blue},"",""),icon:"arrow_up_double",toolTip:lng("move to top"),onClick:function(e){return b.board.swapNotes(l,s,l,0),e.preventDefault(),e.stopPropagation()}})," "]}),(0,D.tZ)(f.JO,ie(ie({icon:"move",className:"_drag"},t.dragHandleProps),{},{toolTip:lng("drag to move")}))]}):(0,D.tZ)("span",{});return(0,D.BX)("div",ie(ie({css:ye},t.draggableProps),{},{ref:t.innerRef,style:t.draggableProps.style,className:(0,g.AK)({dragging:n.isDragging,selected:a.isChecked}),children:[a.loading?(0,D.BX)("div",{style:{minHeight:"125px"},children:[lng("loading").caps(),"..."]}):a.data.task_id?(0,D.tZ)(u.sD,{task:a.data,topRightIcon:y,onCheck:function(e){return a.toggleCheck(),e.stopPropagation(),e.preventDefault()},checked:a.isChecked}):(0,D.tZ)(Oe,{note:a,topRightIcon:y,onCheck:function(e){return a.toggleCheck(),e.stopPropagation(),e.preventDefault()},checked:a.isChecked}),m&&(0,D.tZ)(Ee,{onSave:function(e){a.save(e),h(!1)},data:a.data,onClose:function(){return h(!1)}})]}))})),we=(0,o.iv)("padding:7px;margin-top:10px;border-radius:8px;background-color:",p.g.colors.bg_main,";",p.g.classes.shadow_light,";position:relative;min-width:",p.g.consts.CARD_WIDTH,"px;width:",p.g.consts.CARD_WIDTH,"px;.note-link{display:flex;flex-direction:column;justify-content:space-between;min-height:125px;}&:hover{",p.g.classes.shadow_strong,";background-color:",p.g.colors.dominant_main_shade,";}.meta-row{display:flex;justify-content:space-between;font-size:.9em;>span{max-width:35%;max-height:35px;font-size:0.9em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}}._content{color:",p.g.colors.text_main,";margin-bottom:7px;",p.g.classes.editor_directions,";img{max-height:100px;max-width:200px;}}.selected &{background-color:",p.g.colors.dominant_main_shade,";}.dragging &{background-color:",p.g.colors.dominant_main_shade,";}",""),Oe=(0,a.observer)((function(e){var t=e.note,n=e.topRightIcon,o=e.onCheck,i=e.checked,a=ne((0,r.useState)(!1),2),l=a[0],s=a[1];return(0,D.BX)("div",{css:we,children:[(0,D.BX)(d.A,{className:"note-link",onClick:function(e){("A"!==e.target.nodeName||e.target.classList.contains("note-link"))&&s(!0)},children:[(0,D.BX)("div",{className:"meta-row",children:[(0,D.tZ)("span",{children:(0,D.tZ)(f.gT,{color:p.g.colors.text_main,size:".7em"})}),(0,D.tZ)("span",{children:(0,D.tZ)(T.jC,{color:"purple",children:lng("note").caps()})}),n||(0,D.tZ)("span",{})]}),(0,D.tZ)(Y.x,{className:"_content",content:t.data.note_content}),(0,D.tZ)("div",{className:"meta-row",children:(0,D.BX)("span",{children:[o&&(0,D.tZ)(f.JO,{icon:"checkbox"+(i?"_checked":""),color:p.g.colors.green,onClick:o})," #",t.data.note_id]})})]}),l&&(0,D.tZ)(Ee,{onSave:function(e){t.save(e),s(!1)},data:t.data,onClose:function(){return s(!1)}})]})})),ke=(0,o.iv)("display:flex;align-items:center;.board-select{padding:.4em 1em;border:1px solid ",p.g.colors.separator,";border-radius:8px;margin:0 5px;}.board-search{padding:2px 5px;border:1px solid ",p.g.colors.separator,";border-radius:8px;margin:0 5px;}",""),xe=(0,a.observer)((function(){var e=(0,r.useContext)(i.l9).getStore("board"),t=ne((0,r.useState)(!1),2),n=t[0],o=t[1],a=ne((0,r.useState)(!1),2),l=a[0],s=a[1],c=ne((0,r.useState)(!1),2),u=c[0],p=c[1],d={title:lng("create new board").caps(),onConfirm:function(t){e.saveNewBoard(t),o(!1)},onCancel:function(){return o(!1)},placeholder:lng("board name").caps(),confirmText:lng("create").caps()},m=[{val:"add",label:lng("add column")},{val:"edit",label:lng("edit board")},{val:"delete",label:lng("delete board")}],h=u?{board_name:e.board.board_name,board_users:e.board.board_users}:{};return(0,D.BX)("div",{css:ke,children:[e.canWrite&&(0,D.tZ)(Q.l,{type:"contained",onClick:function(){return e.toggleSearchTasks()},children:lng("search tasks").caps()}),"  ",e.boards_list.size>0&&(0,D.tZ)(y.P,{className:"board-select",value:e.current_board,onChange:function(t){return e.changeBoard(t)},options:(0,g.wd)((0,_.toJS)(e.boards_list))}),(0,D.tZ)(K.I,{type:"text",className:"board-search",value:e.searchInBoard,onChange:function(t){return e.searchInBoard=t},placeholder:lng("search in board").caps()}),n&&(0,D.tZ)(b.NL,ie({},d)),l&&(0,D.tZ)(Be,{onSave:function(t){return e.board.addColumn(t),s(!1)},onClose:function(){return s(!1)}}),u&&(0,D.tZ)(Te,{onSave:function(t){p(!1),e.board.save(t)},data:h,onClose:function(){return p(!1)}}),(0,D.tZ)(ee.zh,{}),(0,D.tZ)(Q.l,{type:"outlined",onClick:function(){return o(!0)},children:lng("new board").caps()}),(0,D.tZ)(f.JO,{icon:"full_screen",toolTip:lng("view bigger"),buttonLike:!0,onClick:function(){return e.fullSize=!e.fullSize}}),e.canWrite&&(0,D.BX)(D.HY,{children:[(0,D.tZ)(f.JO,{icon:"trash",onClick:function(){if(!e.board.selectedNoteIds().length)return(0,b.qR)(lng("please select at least one item").caps());(0,b.BB)(lng("are you sure you want to delete the selected items?").caps(),{text:lng("delete items"),onConfirm:function(){return e.board.deleteSelected()}})},buttonLike:!0})," ",(0,D.tZ)(w.x,{className:"_menu",options:m,onSelect:function(t){switch(t){case"add":s(!0);break;case"edit":p(!0);break;case"delete":(0,b.BB)(lng("are you sure you want to delete this board?").caps(),{text:lng("delete").caps(),onConfirm:function(){return e.board.delete()},confirmText:lng("delete")})}},children:(0,D.tZ)(f.JO,{icon:"menu",buttonLike:!0})})]})]})})),Se=(0,a.observer)((function(){var e=(0,r.useRef)(0),t=(0,r.useContext)(i.l9).getStore("board"),n=["open","in_progress","closed","on_hold"].map((function(e){return{val:e,label:(0,u.HR)(null,e).caps()}})),o=(0,g.wd)([[1,lng("low").caps()],[5,lng("medium").caps()],[7,lng("high").caps()],[9,lng("urgent").caps()]]),a=[{name:"task_id",label:"#",type:"text"},{name:"task_title",label:lng("title"),type:"text"},{name:"assignee",label:lng("assignee"),type:"text"},{name:"task_type",label:lng("type"),type:"select_multi",options:(0,g.wd)(t.tasks_types)},{name:"priority",label:lng("priority"),type:"select_multi",options:o},{name:"status_id",label:lng("status"),type:"select_multi",options:(0,g.wd)(t.tasks_status)},{name:"task_resolution",label:lng("resolution"),type:"select_multi",options:n}];return(0,r.useEffect)((function(){return t.searchTasks.search(),e.current=setInterval((function(){return t.searchTasks.search()}),6e4),function(){return clearInterval(e.current)}}),[]),(0,D.BX)("div",{css:me,children:[(0,D.BX)("div",{className:"column-name",children:[lng("search tasks").caps()," ",t.searchTasks.tasks.length>0?"(".concat(t.searchTasks.tasks.length,")"):""]}),(0,D.BX)("div",{className:"search-box",children:[(0,D.tZ)(K.I,{className:"search-term",type:"text",placeholder:lng("search").caps(),value:t.searchTasks.term,onChange:function(e){return t.searchTasks.updateTerm(e)}}),(0,D.tZ)(f.JO,{icon:"reload",className:"search-reload",onClick:function(){return t.searchTasks.search()},smallButtonLike:!0}),(0,D.tZ)("div",{className:"search-filter",children:(0,D.tZ)($.wn,{filters:a,filtersVals:t.searchTasks.filters,className:"_filter",onFilter:function(e){return t.searchTasks.setFilters(e)},iconProps:{smallButtonLike:!0}})}),(0,D.tZ)("div",{className:"search-filter",children:(0,D.tZ)(f.JO,{icon:"arrow_".concat(p.g.far,"_double"),toolTip:lng("add matching to 1st column"),smallButtonLike:!0,onClick:function(){return t.searchTasks.addMatchingToFirstCol()}})})]}),(0,D.tZ)(ce,{droppableId:"search",type:"NOTE",children:function(e){return(0,D.tZ)(Ce,{provided:e})}})]})})),je={name:"14k7iqj",styles:".loading{margin-top:15px;}.list{max-height:600px;overflow:auto;.full-size &{max-height:calc(100vh - 240px);}}.nothing{text-align:center;font-size:1.1em;padding:50px 0;}"},Ce=(0,a.observer)((function(e){var t=e.provided,n=(0,r.useContext)(i.l9).getStore("board"),o=n.searchTasks.tasks;return(0,D.tZ)("div",ie(ie({},t.droppableProps),{},{ref:t.innerRef,css:je,children:n.searchTasks.searching?(0,D.tZ)("div",{className:"loading",children:(0,D.tZ)(v.$,{})}):(0,D.tZ)("div",{className:"list",children:0===o.length?(0,D.tZ)("div",{className:"nothing",children:lng("no tasks found").caps()}):o.map((function(e,t){return(0,D.tZ)(Pe,{task:e,index:t},e.data.task_id)}))})}))})),Pe=(0,a.observer)((function(e){var t=e.task,n=e.index;return(0,D.tZ)(se,{draggableId:t.data.task_id+"",index:n,type:"NOTE",children:function(e,n){return(0,D.tZ)(Ze,{provided:e,snapshot:n,task:t})}})})),Ze=(0,a.observer)((function(e){var t=e.provided,n=e.snapshot,r=e.task;return(0,D.tZ)("div",ie(ie({css:ye},t.draggableProps),{},{ref:t.innerRef,style:t.draggableProps.style,className:(0,g.AK)({dragging:n.isDragging}),children:(0,D.tZ)(u.sD,{task:r.data,topRightIcon:r.canWrite?(0,D.tZ)(f.JO,ie({icon:"move",className:"_drag"},t.dragHandleProps)):(0,D.tZ)("span",{})})}))})),Be=function(e){var t=e.onSave,n=e.onClose,r=e.data,o=void 0===r?{}:r;return(0,D.tZ)(O.m,{form:new W({onSave:t,data:o}),onClose:n})},Te=function(e){var t=e.onSave,n=e.onClose,r=e.data,o=void 0===r?{}:r;return(0,D.tZ)(O.m,{form:new X({onSave:t,data:o}),onClose:n})},Ee=function(e){var t=e.onSave,n=e.onClose,r=e.data,o=void 0===r?{}:r;return(0,D.tZ)(O.m,{form:new B({onSave:t,data:o}),onClose:n})},Ie=n(70081),Ae=n(7190),De=n(67033),Re=n(75247),Ne=n(82883),ze=n(27018),Me=n(97059),Fe=n(28534);function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){Le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ue=(0,o.iv)("display:flex;flex-direction:column;justify-content:center;width:220px;height:220px;",p.g.mQuery.mobileNarrow,"{height:140px;}",""),Ve=(0,a.observer)((function(){var e=(0,r.useContext)(i.l9).getStore("home").getTasksStore(),t=(0,r.useRef)(0);(0,g.Ju)(lng("tasks",{phrase:!0}));var n=(0,Ie.iP)();if((0,r.useEffect)((function(){return e.ready&&(t.current=setInterval((function(){return e.refresh()}),3e4)),function(){return clearInterval(t.current)}}),[e.ready]),!e.ready)return(0,D.tZ)(Re.h,{});var o={tabs:(0,D.tZ)(l.m,{tabs:e.tabsWithCounters,activeTab:e.tab,inContainerHead:!0,onSelect:function(t){return e.tab=t}}),actions:[{icon:"new",action:We,toolTip:lng("new task")}]};return(0,D.BX)(De.U,{children:[(0,D.BX)(Ne.EL,{children:[(0,D.tZ)(Ae.K,{}),(0,D.BX)("div",{children:[e.resolution_numbers&&(0,D.BX)("div",{css:Ue,children:[(0,D.tZ)(Me.N4,{label:lng("open tasks"),number:e.resolution_numbers.open||"0",icon:"sand_clock",color:p.g.colors.yellow}),(0,D.tZ)(Me.N4,{label:lng("in progress"),number:e.resolution_numbers.in_progress||"0",icon:"badge-rising-graph",color:p.g.colors.light_blue})]}),(0,D.BX)("div",{className:"_titles",children:[(0,D.BX)("div",{className:"h1",children:[lng("hello %s",Blsm.user.user_first_name).toUpperCase(),","]}),(0,D.tZ)("div",{className:"h2",children:lng("let's get started!").caps()})]})]})]}),(0,D.BX)("div",{className:"_main_op",children:[n.width>600&&(0,D.tZ)(s.SV,{children:(0,D.tZ)(Je,{})}),(0,D.tZ)(c.W2,{fitWidth:!0,noBottomPadding:!0,head:(0,D.tZ)(h.$Q,Xe({},o)),children:(0,D.tZ)(s.SV,{children:(0,D.tZ)(He,{})})})]})]})})),He=(0,a.observer)((function(){var e=(0,r.useContext)(i.l9).getStore("home").getTasksStore();switch(e.tab){case"new":return(0,D.tZ)(ze.B,{listKey:"new_tasks",filteredTasks:e.filteredNewTasks,tasks:e.new_tasks,viewMode:!0,filterNsort:e.filterNsort.new,markAsSeen:!0},"new_tasks");case"updated":return(0,D.tZ)(ze.B,{listKey:"updated_tasks",filteredTasks:e.filteredUpdatedTasks,tasks:e.updated_tasks,viewMode:!0,filterNsort:e.filterNsort.updated,markAsSeen:!0},"updated_tasks");case"my":return(0,D.tZ)(ze.B,{listKey:"my_tasks",filteredTasks:e.filteredMyTasks,tasks:e.my_tasks,priorityOn:!0,viewMode:!0,filterNsort:e.filterNsort.my},"my_tasks");case"bookmarks":return(0,D.tZ)(ze.B,{listKey:"bookmark_tasks",filteredTasks:e.filteredBookmarksTasks,tasks:e.bookmark_tasks,priorityOn:!0,viewMode:!0,filterNsort:e.filterNsort.bookmarks},"bookmark_tasks");case"board":return(0,D.tZ)(ue,{})}return null})),Ge=(0,o.iv)("color:",p.g.colors.text_main,";margin-bottom:20px;._title{",p.g.classes.widget_title,";flex-grow:1;}._recent_carousel{overflow:hidden;._recent_carousel_inner{display:flex;overflow-x:auto;scroll-snap-type:x mandatory;scroll-behavior:smooth;._recent{border:1px solid ",p.g.colors.separator,";border-radius:10px;display:inline-block;scroll-snap-align:start;flex-shrink:0;height:80px;margin:0 5px 10px;padding:5px;width:250px;cursor:pointer;&:hover{background-color:",p.g.colors.bg_1,";}._taskTitle{font-weight:600;",p.g.classes.ellipsis_lines(2),";}}}}._nothing{text-align:center;width:100%;font-size:2em;color:silver;font-style:italic;}",""),Je=function(){var e,t,n=(0,r.useContext)(i.l9).getStore("home").getTasksStore();return(0,D.BX)(c.W2,{css:Ge,fitWidth:!0,children:[(0,D.tZ)("div",{className:"_title",children:lng("recently entered").caps()}),(0,D.tZ)("div",{className:"_recent_carousel",children:(0,D.BX)("div",{className:"_recent_carousel_inner",children:[null===(e=n.recent_tasks)||void 0===e?void 0:e.map((function(e){return(0,D.BX)("div",{className:"_recent",onClick:function(){return(0,d.p4)({edit:"task",id:e.task_id},!0)},children:[(0,D.tZ)("div",{className:"_taskTitle",children:(0,D.tZ)(m.m,{keepAlign:!0,children:e.task_title})}),e.task_resolution&&(0,D.tZ)(D.HY,{children:(0,D.BX)("div",{style:{color:p.g.colors.text_sec},children:[" ",(0,D.tZ)(f.gT,{color:(0,u.Pp)(e.task_resolution),size:".7em"})," ",(0,u.HR)(e.status_name,e.task_resolution).caps(!1)," ",(0,D.BX)("i",{children:["(",e.assignee_name,")"]})]})})]},e.task_id)})),!(null!==(t=n.recent_tasks)&&void 0!==t&&t.length)&&(0,D.tZ)("div",{className:"_nothing",children:lng("nothing to show")})]})})]})},We=function(){var e=function(e){!1===e?(0,Fe.nb)(lng("no workplans available")):(0,g.B5)(e)?(0,d.p4)({edit:"task",params:{ws:e}},!0):(0,b.cS)("",{title:lng("new task"),confirmText:lng("create"),startValue:e,inputType:"single_item",inputRequired:!0,inputOptions:{label:lng("select workspace").caps(),searchData:function(e,t){return(0,A.SC)("groups/autocomplete",{data:{managed_perm:"manage",member:1,tasks_enabled:1,types:"Workplan",term:e.term||""}},t)}},onConfirm:function(e){return(0,d.p4)({edit:"task",params:{ws:e}},!0)}})};void 0!==Blsm.InitialData.default_workplan||Blsm.user.isAdmin?e(Blsm.InitialData.default_workplan):(0,A.SC)("groups/autocomplete",{data:{managed_perm:"manage",member:1,tasks_enabled:1,types:"Workplan",term:"   ",limit:2}},(function(t){1===t.length?Blsm.InitialData.default_workplan=t[0].id:t.length>1?Blsm.InitialData.default_workplan=null:Blsm.InitialData.default_workplan=!1,e(Blsm.InitialData.default_workplan)}))}},25738:function(e,t,n){"use strict";n.d(t,{dH:function(){return L},lA:function(){return K},bw:function(){return J},xF:function(){return W},Z:function(){return U},Qy:function(){return V}});var r=n(24210),o=n(66975),i=n(98e3),a=n(27821),l=n(40441),s=n(73105),c=n(7392),u=n(28534),p=n(68567),d=n(60409),f=n(87363),m=n(43698),g=n(71134),h=n(35944);function b(e){return function(e){if(Array.isArray(e))return k(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||O(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?y(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var x,S,j,C,P={name:"k6h3y7",styles:"display:flex;flex-direction:column;gap:5px"},Z=function(e){var t=e.mappableFields,n=e.sourceFields,r=e.value,i=e.onChange,a=(0,f.useState)((function(){return Object.entries(r||{}).map((function(e){var t=w(e,2),n=t[0];return[t[1],n]}))})),l=w(a,2),s=l[0],c=l[1],u=function(e){c(e),i(e.reduce((function(e,t){var n=w(t,2),r=n[0],o=n[1];return o&&r?v(v({},e),{},_({},o,r)):e}),{}))};return(0,h.BX)("div",{css:P,children:[s.map((function(e,r){return(0,h.tZ)(T,{pair:e,onChange:function(e){return u([].concat(b(s.slice(0,r)),[e],b(s.slice(r+1))))},onRemove:function(){return u([].concat(b(s.slice(0,r)),b(s.slice(r+1))))},mappableFields:t,sourceFields:n},r)})),(0,h.tZ)("div",{children:(0,h.tZ)(o.JO,{icon:"sign_plus",smallButtonLike:!0,onClick:function(){return u([].concat(b(s),[["",""]]))}})})]})},B={name:"12ly41g",styles:"display:flex;align-items:center;>._field_wrapper{flex:1 1 0;}"},T=function(e){var t=e.pair,n=e.onChange,r=e.onRemove,i=e.mappableFields,a=e.sourceFields,l=w(t,2),s=l[0],c=l[1];return(0,h.BX)("div",{css:B,children:[(0,h.tZ)(m.I,{type:"text",wrapped:!0,value:s,onChange:function(e){return n([e,c])},suggest:a?{getData:function(e,t){return t(a.filter((function(t){return t.includes(e)&&t!==e})).map((function(e){return{value:e,label:e}})))}}:void 0,placeholder:lng("remote field").caps()})," => ",(0,h.tZ)(m.I,{type:"select",wrapped:!0,value:c,onChange:function(e){return n([s,e])},options:(0,g.wd)(i.map((function(e){return[e,e]}))),emptyOption:lng("select...")}),(0,h.tZ)("div",{children:(0,h.tZ)(o.JO,{icon:"trash",onClick:r,smallButtonLike:!0})})]})};function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=F(e);if(t){var o=F(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?M(e):t}function M(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var L=(x=a.action.bound,S=a.action.bound,j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}(f,e);var t,n,r,d=N(f);function f(){var e;A(this,f);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return q(M(e=d.call.apply(d,[this].concat(n))),"objType",void 0),q(M(e),"data",{}),q(M(e),"isAdmin",!1),q(M(e),"tutorial",void 0),q(M(e),"group_id",void 0),q(M(e),"importFromTemplate",!0),I(M(e),"result",C,M(e)),q(M(e),"previewButtonLabel",lng("preview").caps()),e.confirmButtonLabel=lng("commit").caps(),(0,a.makeObservable)(M(e)),e}return t=f,(n=[{key:"fetch",value:function(){var e=this;(0,i.SC)("import/".concat(this.objType,"/form"),{},(function(t){e.data=t,e.isAdmin=e.data.domains,e._buildFields()}))}},{key:"templateFields",value:function(e){var t=this;return[{type:"component",node:(0,h.tZ)("div",{children:(0,h.tZ)(l.A,{theme:"highlight",onClick:function(){return(0,l.p4)(t.templateLink(e).csrf(),!0,!0)},children:lng("template download").caps()})})},{type:"component",node:(0,h.BX)("div",{children:[(0,h.tZ)(o.JO,{icon:"menu_info"})," ",lng("you may upload an Excel file or a CSV encoded as UTF-8").caps()," "]})}]}},{key:"moreInfoFields",value:function(){return null}},{key:"_buildFields",value:function(){var e=this,t=[{type:"file",name:"sheet_file",label:lng("upload")}],n=this._fields;this.tutorial&&(this.titleExtra=(0,h.tZ)(s.u,{text:lng("online tutorial").caps(),children:(0,h.tZ)(o.JO,{icon:"badge-bulb",href:"https://www.blossom-kc.com/support/tutorials?tc="+this.tutorial,newTab:!0,className:"tutorial"})}));var r=[{type:"indent_set",toggleTitle:lng("template download").caps(),toggle:!0,insert:this.importFromTemplate,fields:this.templateFields(this.values)},{type:"indent_set",toggleTitle:lng("more information").caps(),toggle:!0,insert:this.moreInfoFields(this.values),fields:this.moreInfoFields(this.values)},{type:"indent_set",toggleTitle:lng("data file").caps(),toggle:!0,insert:this.importFromTemplate,fields:t},{type:"indent_set",toggleTitle:lng("settings").caps(),toggle:!0,fields:n}];!this.importFromTemplate&&this.srcFields&&(r=this.srcFields.concat(r)),this.isAdmin&&(t.push({type:"text",name:"sheet_path",label:lng("or specify file location"),helpKey:"@import/sftp"}),n.unshift({type:"select",name:"domain",label:lng("import domain"),options:this.data.domains})),this.data.mappable_fields&&r.push({type:"indent_set",toggleTitle:lng("field mapping").caps(),toggle:!0,fields:[{type:"component",name:"extended_map",Render:Z,props:{mappableFields:this.data.mappable_fields,sourceFields:this.data.source_fields}}]}),this.isAdmin&&r.push({type:"indent_set",toggleTitle:lng("scheduling").caps(),toggle:!0,fields:[{type:"checkbox",name:"auto_run",label:lng("run import every night"),grow:5,disable:function(e){return!(e.get("sheet_path")||e.get("user"))}},{type:"multiple_items",name:"auto_run_notify",label:"".concat(lng("notify users")," (").concat(lng("errors only"),")").caps(),visible:function(e){return!!e.get("auto_run")},searchData:function(t,n){var r=t.ids,o=t.term;(0,i.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:o,id:r,cross_domain:1,exclude:e.values.get("auto_run_user_log")||[]}},n)}},{type:"component",node:(0,h.tZ)(c.l,{theme:"outlined",onClick:function(){return e.saveSchedule()},children:lng("save scheduling settings").caps()})}]}),n.push({type:"checkbox",name:"display_errors_only",label:lng("display only errors")}),this._fields=r,this._prepFields(this.data),this.ready=!0}},{key:"saveSchedule",value:function(){(0,i.SC)("import/".concat(this.objType,"/schedule"),{method:"POST",data:this.buildFinalValues()},(function(e){e.message&&(0,u.qV)(e.message)}))}},{key:"preview",value:function(){this.values.delete("commit"),this.callSave()}},{key:"commit",value:function(){var e=this;this.validate().then((function(t){!0===t&&(e.values.set("commit",1),e.callSave())}))}},{key:"save",value:function(e){this.saveToUrl("import/".concat(this.objType,"/import"),Object.assign({group_id:this.group_id},e))}},{key:"findServerMessage",value:function(e){return e.split("</table>")[1]+"</br> ".concat(lng("see table for more details").caps())}},{key:"SaveSuccess",value:function(e){if(this.values.get("commit")){var t=this.findServerMessage(e);(0,p.qR)((0,h.tZ)("div",{dangerouslySetInnerHTML:{__html:t}}),{title:lng("done")})}this.values.set("commit",0),this.result=e}},{key:"templateLink",value:function(){return Blsm.prm.Mainref+"api?import/".concat(this.objType,"/sample/")}}])&&D(t.prototype,n),r&&D(t,r),f}(r.I),C=X(j.prototype,"result",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),X(j.prototype,"preview",[x],Object.getOwnPropertyDescriptor(j.prototype,"preview"),j.prototype),X(j.prototype,"commit",[S],Object.getOwnPropertyDescriptor(j.prototype,"commit"),j.prototype),j),U={type:"select",name:"userCol",label:lng("user column",lng("user")).caps(),options:[{val:"user_name",label:(0,d.X)("user_name")},{val:"user_external_id",label:(0,d.X)("external_id")}]},V={type:"select",name:"userCol",label:lng("user column",lng("user")).caps(),options:[{val:"user_name",label:(0,d.X)("user_name")},{val:"username",label:(0,d.X)("user_name")+" #2"},{val:"user_external_id",label:(0,d.X)("external_id")},{val:"external_id",label:(0,d.X)("external_id")+" #2"}]},H={name:"1r5gb7q",styles:"display:inline-block"},G=function(e){var t=e.label,n=e.values;return(0,h.BX)("div",{children:[(0,h.tZ)("span",{css:H,children:t})," ",Array.isArray(n)?n.map((function(e,t){return(0,h.BX)("span",{children:[(0,h.tZ)("b",{children:e}),t+1<n.length?", ":""]},t)})):n]})},J=function(e,t){return{type:"component",node:(0,h.tZ)(G,{label:e,values:t})}},W=function(e,t){return{type:"set",fields:[{type:"component",node:(0,h.tZ)(G,{label:e+":"})},{type:"indent_set",fields:t.map((function(e){var t=e.val,n=e.label;return{type:"component",node:(0,h.BX)("div",{children:[(0,h.tZ)("b",{children:t}),(0,h.tZ)("br",{}),null==n?void 0:n.caps()]})}}))}]}},K=function(e){return"data:text/csv;charset=utf-8,".concat(e.join("\n"))}},40423:function(e,t,n){"use strict";n.d(t,{l:function(){return E},r:function(){return I}});var r,o,i,a=n(25738),l=n(40676),s=n(15560),c=n(29180),u=n(27821),p=(n(57882),n(68567)),d=n(9934),f=n(40441),m=n(23838),g=n(69637),h=n(35944);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){return k(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||w(e,t)||_()}function v(e){return k(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||_()}function _(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function w(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e){if(Array.isArray(e))return e}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t&&x(e.prototype,t),n&&x(e,n),e}function j(e,t){return(j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function C(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P(this,n)}}function P(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?Z(e):t}function Z(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var E=(r=u.action.bound,o=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&j(e,t)}(n,e);var t=C(n);function n(e){var r,o,a,l,s;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,e),o=Z(r),a="events",l=i,s=Z(r),l&&Object.defineProperty(o,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(s):void 0}),(0,u.makeObservable)(Z(r)),r.title=lng("import calendar").caps(),r.objType="ical",r.confirmButtonLabel=lng("save").caps(),r._fields=[{type:"file",name:"ics_file",label:lng("upload the data file containing the events information"),required:!0},{type:"text",name:"calendar_name",label:lng("calendar name"),required:!0},{type:"checkbox",name:"is_blocking",label:lng("set events as blocking events")}],r._prepFields(),r.ready=!0,r}return S(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=v(e),i=o[0],a=o.slice(1);if("ical"===i)return new n({route:a,nav:r})}}]),S(n,[{key:"save",value:function(e){var t;if(e.commit)if((null===(t=this.events)||void 0===t?void 0:t.length)>0){var n=this.events.filter((function(e){return e._checked}));n.length>0?(n.map((function(t,n){return e["cb[".concat(n,"]")]=JSON.stringify(t)})),this.saveToUrl("calendar/import_ical_save",e)):(0,p.qR)(lng("please select at least one event"))}else(0,p.qR)(lng("please upload ICS or ICAL file with events")),this.values.set("commit",0);else this.saveToUrl("calendar/import_ical_data",e)}},{key:"SaveSuccess",value:function(e){if(this.values.set("commit",0),e.events){for(var t=[],n=0,r=Object.entries(e.events);n<r.length;n++){var o=y(r[n],2),i=o[0],a=o[1];a.key=i,t.push(new d.o(a))}this.events=t}else(0,m.vm)().invalidateStore("calendar"),(0,f.p4)("#calendar",!0)}}]),n}(a.dH),i=T(o.prototype,"events",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),T(o.prototype,"SaveSuccess",[r],Object.getOwnPropertyDescriptor(o.prototype,"SaveSuccess"),o.prototype),o),I=(0,s.observer)((function(e){var t=e.events,n=e.scrollParent,r=[{title:lng("name")},{title:lng("start date")},{title:lng("end date")},{checkAll:!0}];return(0,h.tZ)("div",{children:(0,h.tZ)(l.iA,{cols:r,collection:t,rowIdCol:"key",loading:null===t,RowRenderer:A,compact:!0,scrollParent:n,noWindow:!0})})})),A=(0,s.observer)((function(e){var t=e.row,n=t.name,r=t.start,o=t.end;return(0,h.BX)("tr",{children:[(0,h.tZ)(g.U6,{children:n}),(0,h.tZ)("td",{children:(0,h.tZ)(c.qp,{time:r})}),(0,h.tZ)("td",{children:(0,h.tZ)(c.qp,{time:o})}),(0,h.tZ)(g.Fo,{o:t})]})}))},43389:function(e,t,n){"use strict";n.d(t,{b:function(){return w},q:function(){return _}});var r=n(70917),o=n(15560),i=n(87363),a=n(23838),l=n(26291),s=n(40676),c=n(75151),u=n(71134),p=n(75247),d=n(82883),f=n(84268),m=n(16920),g=n(71137),h=n(35944);function b(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?b(Object(n),!0).forEach((function(t){v(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var _=(0,o.observer)((function(){var e,t=(0,i.useContext)(a.l9).getStore("list");if(!1===t.ready)return(0,h.tZ)(p.h,{});if(t.error)return(0,h.tZ)(l.T,{children:t.error});var n=t.listObj;(0,u.Ju)(n.title);var o=n.pagination.totalItems;return(0,h.BX)(l.T,{bottomPadding:!0,children:[(0,h.tZ)(r.xB,{styles:(0,r.iv)("body{overflow-x:auto;",m.g.mQuery.notMobile,"{width:calc(100vw - 10px);}}","")}),(0,h.tZ)(d.v7,{headline:null===(e=n.title)||void 0===e?void 0:e.caps(),count:o,simple:!n.tabs.length,tabs:n.tabs.length>0?{tabs:n.tabs,activeTab:n.activeTab}:void 0}),(0,h.tZ)(f.Q,{children:(0,h.tZ)(w,{list:n,sticky:!0})}),n.drawerOpen&&(0,h.tZ)(g.d,{from:"side",onClose:function(){return n.onDrawerClose()},children:n.drawerContent})]})})),w=(0,o.observer)((function(e){var t=e.list,n=e.sticky,r=t.cols,o=t.shownItems,a=t.filters,l=t.sorts,u=t.filterNsort,p=t.actions,d=t.barExtra,f=t.RowRenderer,g=t.rowIdCol,b=t.status,v=t.pagination,_=t.mobileSupport;return(0,i.useEffect)((function(){return document.body.classList.add("horz_scroll"),function(){return document.body.classList.remove("horz_scroll")}}),[]),(0,h.BX)(h.HY,{children:[(0,h.tZ)(s.iA,{cols:r,collection:o,filters:a,sorts:l,filterNsort:u,filterDelay:1e3,actions:p,barExtraComponent:d,RowRenderer:f,rowIdCol:g,sticky:n?m.g.consts.TABLE_HEAD_HEIGHT:null,loading:"fetch"===b,noWindow:!0,compact:!0,mobileSupport:_,rowProps:t}),(0,h.tZ)(c.t,y(y({},v),{},{onChange:function(e){return v.curPage=e}}))]})}))},85597:function(e,t,n){"use strict";n.d(t,{KX:function(){return Y},_9:function(){return se},mL:function(){return le},r4:function(){return Q},rl:function(){return ae}});var r,o,i,a=n(70917),l=n(74216),s=n(15560),c=n(40676),u=n(87363),p=n(98e3),d=n(68567),f=n(27821),m=n(40441),g=n(16920),h=n(66975),b=n(29180),y=n(75898),v=n(23838),_=n(73718),w=n(73105),O=n(5474),k=n(62366),x=n(40965),S=n(80504),j=n(71134),C=n(71137),P=n(48207),Z=n(85446),B=n(7392),T=n(35944);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){W(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t){return F(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||z(e,t)||N()}function R(e){return F(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||z(e)||N()}function N(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function z(e,t){if(e){if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?M(e,t):void 0}}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e){if(Array.isArray(e))return e}function q(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=J(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function U(e,t){return(U=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=J(e);if(t){var o=J(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return H(this,n)}}function H(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?G(e):t}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function J(e){return(J=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var $="approvals",Y={Activity:lng("activity"),Reg:lng("course registration"),RegExt:lng("external events"),AuthorizeGroup:lng("groups authorization"),AuthorizeContent:lng("content authorization"),Recruitment:lng("recruitments"),AuthorizeUser:lng("user authorization"),GroupReceipt:lng("expenses"),Resource:lng("resources"),Form:lng("forms"),Confirmation:lng("authorization confirmation")},Q=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&U(e,t)}(l,e);var t,n,r,a=V(l);function l(e){var t,n,r,s,c=e.route,u=e.nav;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),W(G(s=a.call(this,{route:c,nav:u,basePath:$})),"priorities",{}),W(G(s),"mobileSupport",!0),q(G(s),"activeAction",o,G(s)),q(G(s),"activeRequest_id",i,G(s)),W(G(s),"suppliers",void 0),(0,f.makeObservable)(G(s)),s.title=lng("approvals").caps(),s.RowRenderer=ee,s.rowIdCol="request_id",s.fetchUrl="approval/list",s._export=!0,s._actions=[{icon:"menu_overview",className:"mobile_off",action:function(){return(0,m.p4)({report:"Report_Approvals_Status_".concat(s.activeTab)},!0)},toolTip:lng("approval status report").caps()},{icon:"mark_v_strong",action:function(){(0,d.BB)(lng("are you sure you want to commit all priorities?"),{onConfirm:function(){(0,p.SC)("approval/commit_priorities",{method:"POST"},(function(){return s.fetch()}))}})},toolTip:lng("commit priorities").caps()}],s.activeAction=(null==c||null===(t=c[0])||void 0===t?void 0:t.act)||s.activeAction,s.activeRequest_id=(null==c||null===(n=c[0])||void 0===n||null===(r=n.filters)||void 0===r?void 0:r.request_id)||s.activeRequest_id,s.colsToFiltersAndSorts(),s.tabs=le(),s.ready=!0,s.fetch(),s}return t=l,r=[{key:"match",value:function(e,t){var n=t.nav,r=R(e),o=r[0],i=r.slice(1);if(o===$)return new l({route:i,nav:n,status:i[0].status})}}],(n=[{key:"buildCols",value:function(){this.optionalCols={targetName:!["AuthorizeUser"].includes(this.activeTab),orgUnit:!["Resource","GroupReceipt","Form"].includes(this.activeTab),amount_in_use:["Resource"].includes(this.activeTab),amount:["Resource","GroupReceipt"].includes(this.activeTab),workspace:["Resource"].includes(this.activeTab),meeting:["Resource"].includes(this.activeTab),period:["Resource","Reg","RegExt"].includes(this.activeTab),description:!0},this._cols=[this.optionalCols.targetName&&{title:lng("target name"),sortVal:"target_name",input:"text"},{title:lng("name"),sortVal:"full_name",input:"text"},this.optionalCols.orgUnit&&{title:lng("org' unit"),sortVal:"org_unit_name",input:"text"},this.optionalCols.amount_in_use&&{title:lng("amount in use")},this.optionalCols.amount&&{title:lng("amount|money")},this.optionalCols.workspace&&{title:lng("workspace")},this.optionalCols.meeting&&{title:lng("meeting")},this.optionalCols.period&&{title:lng("time"),sortVal:"start_date"},this.optionalCols.description&&{title:lng("description"),sortVal:"description",input:"text"},{title:lng("next approver"),sortVal:"approver_name",input:"text"}].filter((function(e){return!1!==e}))}},{key:"_acceptDataFromServer",value:function(e){var t;null===(t=e.items)||void 0===t||t.forEach((function(e){e.partners&&(e.partners=Object.values(e.partners)||[]),e.buttons.approve||e.buttons.reject||(e.disabled=!0)})),this.suppliers=e.suppliers,L(J(l.prototype),"_acceptDataFromServer",this).call(this,e),this.priorities=e.priorities}},{key:"dynamic_actions",value:function(){var e=this,t=this.checkedItems.map((function(t){return t[e.rowIdCol]}));return[{icon:"like",color:g.g.colors.positive,toolTip:lng("approve"),action:t.length?function(){return(0,d.BB)(lng("are you sure you want to approve the selected requests?").caps(),{onConfirm:function(){return(0,p.SC)("approval/approve_multiple",{data:{ids:t},method:"POST"},(function(){return e.fetch()}))}})}:void 0},{icon:"dislike",color:g.g.colors.negative,toolTip:lng("reject"),action:t.length?function(){return(0,d.BB)(lng("are you sure you want to reject the selected requests?").caps(),{onConfirm:function(){return(0,p.SC)("approval/reject_multiple",{data:{ids:t},method:"POST"},(function(){return e.fetch()}))}})}:void 0}]}},{key:"_updateFromUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;this.activeTab=this.hidden_filters.type=e.type||"Reg",this.buildCols(),L(J(l.prototype),"_updateFromUrl",this).call(this,e,t)}},{key:"_filterNsortUrlPrep",value:function(){var e=L(J(l.prototype),"_filterNsortUrlPrep",this).call(this);return this.hidden_filters.type&&(e.type=this.hidden_filters.type),e}}])&&X(t.prototype,n),r&&X(t,r),l}(l.D),o=K(r.prototype,"activeAction",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),i=K(r.prototype,"activeRequest_id",[f.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K(r.prototype,"_updateFromUrl",[f.override],Object.getOwnPropertyDescriptor(r.prototype,"_updateFromUrl"),r.prototype),r),ee=(0,s.observer)((function(e){var t=e.row,n=e.rowProps,r=e.rows,o=t.target_name,i=t.user_id,a=t.full_name,l=t.org_unit_name,s=t.org_unit_id,f=t.description,x=t.amount_in_use,C=t.amount,P=t.next_approver,B=t.group_id,E=t.start_date,I=t.due_date,A=t.open_past_requests,R=t.request_id,N=t.approved_past_requests,z=t.buttons,M=t.external_courses,F=t.target_data,q=t.type,X=t.assignment_id,L=t.partners,U=t.run_on,V=t.group_available,H=n.rowAction,G=n.activeTab,J=n.priorities,K=n.activeAction,$=n.activeRequest_id,Y=n.optionalCols,Q=n.suppliers,ee=D((0,u.useState)(K&&$==R),2),ne=ee[0],re=ee[1],ie=D((0,u.useState)(null),2),ae=ie[0],le=ie[1],se=D((0,u.useState)(null),2),ce=se[0],ue=se[1],pe=D((0,u.useState)(null),2),de=pe[0],fe=pe[1],me=function(e){ne&&re(!1),"approve"===e&&"reached_max"===z.approve?(0,d.qR)(lng("workspace members limit reached").caps()):"approve"===e&&"no_allocations_for_your_ou"===z.approve?(0,d.qR)(lng("no allocations for your org' unit").caps()):(0,v.vm)().openDialog("form",new _._({pushState:!0,approval_request:t,suppliers:Q,action:e,onSaveSuccess:function(){return(0,v.vm)().closeDialog(),n.fetch()}}))};z.history&&M.map((function(e,t){return e.key=t}));ne&&me(K);var ge=[Y.targetName&&(V?{_:(0,T.tZ)(m.A,{href:{workspace:B},children:o})}:o),{type:"main",_:(0,T.BX)(T.HY,{children:[(0,T.tZ)(w.y,{content:(0,T.tZ)(Z.O,{userId:i}),children:a}),(0,T.BX)("span",{className:"mobile_off",children:[!!U&&(0,T.BX)(T.HY,{children:[" ",(0,T.tZ)(y.jC,{title:lng("run on"),color:g.g.colors.yellow,children:U})]}),(null==L?void 0:L.length)>0&&(0,T.BX)(T.HY,{children:[" ",(0,T.tZ)(y.jC,{color:g.g.colors.dominant_main,children:lng("with partners")})]}),!!A>0&&(0,T.BX)(T.HY,{children:[" ",(0,T.BX)(y.jC,{color:g.g.colors.dominant_main,title:lng("%s other open requests",A),children:[" ",A]})]}),!!N>0&&(0,T.BX)(T.HY,{children:[" ",(0,T.tZ)(y.jC,{color:g.g.colors.positive,title:lng("%s requests approved in the past",N),children:N})]})]})]})},Y.orgUnit&&s&&{_:(0,T.BX)(T.HY,{children:[l," ",(0,T.tZ)(h.JO,{icon:"enter",href:{workspace:s},newTab:!0})]})},Y.amount_in_use&&x,Y.amount&&(0,j.vC)(C),Y.workspace&&{_:(0,T.BX)(T.HY,{children:[t.target_group_name," ",(0,T.tZ)(h.JO,{icon:"enter",href:{workspace:t.target_group_id,tab:"schedule"},newTab:!0})]})},Y.meeting&&t.assignment_name,Y.period&&{_:(0,T.tZ)(b.qm,{dateNote:{start:E,end:I}})},Y.description&&{type:"description",text:f},{_:(0,T.tZ)(T.HY,{children:null!=P&&P.approver_id?(0,T.tZ)(w.y,{content:(0,T.tZ)(Z.O,{userId:P.approver_id}),children:P.approver_name}):lng("end of sequence").caps()})},{type:"icons",_:(0,T.BX)(T.HY,{children:[(0,T.tZ)(h.JO,{icon:"details",buttonLike:!0,toolTip:lng("details"),onClick:function(){"RegExt"===G?le(!0):"Form"===q?(0,m.p4)({launcher:"assignment",id:X,params:{request_id:R}},!0):"GroupReceipt"===q?ue(!0):fe(!0)}}),z.approve&&(0,T.tZ)(h.JO,{icon:"like",buttonLike:!0,toolTip:lng("approve"),color:!["reached_max","no_allocations_for_your_ou"].includes(z.approve)&&g.g.colors.positive,onClick:function(){return me("approve")}}),z.reject&&(0,T.tZ)(h.JO,{icon:"dislike",buttonLike:!0,toolTip:lng("reject"),color:g.g.colors.negative,onClick:function(){return me("reject")}}),z.back&&(0,T.tZ)(h.JO,{icon:"reply",buttonLike:!0,toolTip:lng("go back"),color:g.g.colors.warning,onClick:function(){return me("back")}}),z.history&&(0,T.tZ)(h.JO,{icon:"clock",buttonLike:!0,toolTip:lng("previously approved"),onClick:function(){return(0,d.qR)((0,T.tZ)(te,{external_courses:M,target_data:F}),{type:"Alert",title:lng("external events").caps(),width:"80vw"})}}),z.waiting_list&&(0,T.tZ)(h.JO,{icon:"waiting_list",buttonLike:!0,toolTip:lng("add to waiting list"),color:g.g.colors.no_progress,onClick:function(){return me("waiting_list")}}),z.priority&&(0,T.tZ)((function(){var e=D((0,u.useState)(t.priority),2),n=e[0],r=e[1],o=[{val:"0",label:lng("reject")}];if(J[B])for(var i=1;i<=J[B];i++)o.push({val:i.toString(),label:i.toString()});return(0,T.tZ)("span",{children:(0,T.tZ)(O.P,{emptyOption:"-".concat(lng("priority")),options:o,value:n||"",onChange:function(e){r(e),(0,p.SC)("approval/prioritize_requests",{data:{requests_priorities:W({},R,e)},method:"POST"})}})})}),{}),z.cancel&&(0,T.tZ)(h.JO,{icon:"mark_x",buttonLike:!0,toolTip:lng("cancel"),color:g.g.colors.negative,onClick:function(){return me("cancel_decision")}}),ae&&(0,T.tZ)(k.G,{approvalRequest:t,readOnly:!0,onClose:function(){return le(!1)},performApprovalAction:me}),ce&&(0,T.tZ)(S.d,{approvalRequest:t,performApprovalAction:me,external:t.excourse_details,receipts:r.filter((function(e){return e.group_id===t.group_id&&e.type==t.type})).map((function(e){return Object.assign({highlight:e.receipt_id===t.receipt_id},e)})),readOnly:!0,onClose:function(){return ue(!1)}}),de&&(0,T.tZ)(oe,{approvalRequest:t,performAction:me,onClose:function(){return fe(!1)}})]})},{type:"checkbox",o:t}].filter((function(e){return!1!==e}));return(0,T.tZ)(c.lF,{tds:ge,onClick:function(){return null==H?void 0:H(t)}})})),te=function(e){var t=e.external_courses,n=e.target_data,r=e.forceMobileView;n.approved_funding=n.approved_funding||{};var o=[{title:lng("name").caps()},{title:lng("start date").caps()},{title:lng("end date").caps()},{title:lng("academic hours").caps()},{title:lng("days off").caps()},{title:lng("paid leave days").caps()},{title:lng("tuition").caps()},{title:lng("total required funding").caps()},{title:lng("diploma").caps()}],i=(0,s.observer)((function(e){var t=e.row,n=t.group_name,r=t.group_open_date,o=t.group_close_date,i=t.diploma_file,a=t.target_data||{},l=[{type:"main",_:n},{_:r&&(0,T.tZ)(b.qp,{time:r})},{_:o&&(0,T.tZ)(b.qp,{time:o})},se("hours",a),se("days_off",a),se("paid_leave",a),se("price",a),se("funding",a),{_:i&&(0,T.tZ)(h.JO,{icon:"diploma",toolTip:lng("download diploma").caps(),href:(0,m.p4)(Blsm.prm.Mainref+"GetFile?file_id="+i.file_id)})}];return(0,T.tZ)(c.lF,{tds:l})}));return(0,T.BX)("div",{className:"request-details-table",children:[(0,T.tZ)("span",{className:"sub-title",children:lng("previously approved").caps()}),(0,T.tZ)(c.iA,{cols:o,collection:t,RowRenderer:i,rowIdCol:"key",compact:!0,noWindow:!0,mobileSupport:!0,forceMobileView:r})]})},ne=function(e){var t=e.request_id,n=[{title:lng("step")},{title:lng("name").caps()},{title:lng("date").caps()},{title:lng("data").caps()}],r=(0,s.observer)((function(e){var t=e.row,n=t.step,r=t.full_name,o=t.time,i=t.text,a=t.user_id,l=t.files,s=(null==l?void 0:l.length)>0,u=[n,{_:(0,T.tZ)(w.y,{content:(0,T.tZ)(Z.O,{userId:a}),children:r})},{_:(0,T.tZ)(b.qp,{time:o})},{_:(0,T.BX)("div",{children:[(0,T.tZ)(w.u,{html:i,children:(0,T.tZ)("div",{css:g.g.classes.ellipsis_lines(3),children:(0,T.tZ)(x.x,{content:i})})}),s&&(0,T.BX)("div",{children:[lng("attachments").caps(),(0,T.tZ)("br",{}),l.map((function(e){return(0,T.BX)("div",{children:[(0,T.BX)(m.A,{theme:"highlight",href:(0,m.p4)(Blsm.prm.Mainref+"GetFile?file_id="+e.file_id),children:[e.file_name," (",(0,T.tZ)(b.qp,{time:e.creation_time}),")"]}),(0,T.tZ)("br",{})]},e.file_id)}))]})]})}];return(0,T.tZ)(c.lF,{tds:u})})),o=D((0,u.useState)(null),2),i=o[0],a=o[1];return(0,u.useEffect)((function(){var e=(0,p.SC)("approval/previous_approvers_data",{data:{request_id:t}},(function(e){for(var t=0,n=Object.entries(e.steps);t<n.length;t++){var r=D(n[t],2),o=r[0],i=r[1];i.key=o,i.files=e.files[i.step]}a(Object.values(e.steps))}));return function(){return e&&e.abortFetch()}}),[t]),(0,T.BX)("div",{className:"request-details-table",children:[(0,T.tZ)("span",{className:"sub-title",children:lng("request process").caps()}),(0,T.tZ)(c.iA,{cols:n,collection:i,loading:null===i,RowRenderer:r,rowIdCol:"key",mobileSupport:!0,noWindow:!0,whiteSpace:"normal"})]})},re=function(e){var t=e.partners,n=[{title:lng("name")},{title:lng("status").caps()}],r=(0,s.observer)((function(e){var t=e.row,n=t.full_name,r=t.user_id,o=t.status,i=[{_:(0,T.tZ)(w.y,{content:(0,T.tZ)(Z.O,{userId:r}),children:n})},{_:(0,T.tZ)(T.HY,{children:o?"accepted"===o?(0,T.tZ)("span",{css:(0,a.iv)({color:g.g.colors.positive},""),children:lng("accepted").caps()}):(0,T.tZ)("span",{css:(0,a.iv)({color:g.g.colors.negative},""),children:lng("declined").caps()}):lng("waiting").caps()})}];return(0,T.tZ)(c.lF,{tds:i})}));return(0,T.BX)("div",{className:"request-details-table",children:[(0,T.tZ)("span",{className:"sub-title",children:lng("partners").caps()}),(0,T.tZ)(c.iA,{cols:n,collection:t,RowRenderer:r,rowIdCol:"user_id",compact:!0,noWindow:!0,mobileSupport:!0})]})},oe=(0,s.observer)((function(e){var t=e.onClose,n=e.approvalRequest,r=e.performAction,o=(0,u.useRef)(null);return(0,T.tZ)(C.d,{from:"side",onClose:t,ref:o,scroll:!0,children:(0,T.tZ)(P.W2,{head:(0,T.tZ)(P.$0,{title:n.target_name,onClose:function(){return o.current.close()}}),stickyHead:!0,children:(0,T.tZ)(ae,{approvalRequest:n,performAction:r})})})})),ie={name:"1vlxafw",styles:".request-details-table,.requser-actions{margin-top:20px;>.buttons{display:flex;gap:8px;}}.sub-title{font-size:14px;font-weight:600;margin-bottom:15px;}.note{margin:15px 5px;}"},ae=(0,s.observer)((function(e){var t=e.approvalRequest,n=e.performAction,r=t.request_id,o=t.buttons,i=t.partners,a=t.run_on,l=t.open_past_requests,s=t.approved_past_requests,c=n&&o&&Object.keys(o).filter((function(e){return"priority"!==e})).length>0;return(0,T.BX)("div",{css:ie,children:[!!a>0&&(0,T.BX)(y.jC,{className:"note",color:g.g.colors.yellow,children:[lng("run on"),": ",a]}),!!l>0&&(0,T.tZ)(y.jC,{className:"note",color:g.g.colors.dominant_main,children:lng("%s other open requests",l)}),!!s>0&&(0,T.tZ)(y.jC,{className:"note",color:g.g.colors.positive,children:lng("%s requests approved in the past",s)}),(0,T.tZ)(ne,{request_id:r}),(null==o?void 0:o.history)&&(0,T.tZ)(te,A(A({},t),{},{forceMobileView:!0})),(null==i?void 0:i.length)>0&&(0,T.tZ)(re,{partners:i}),c&&(0,T.BX)("div",{className:"requser-actions",children:[(0,T.tZ)("div",{className:"sub-title",children:lng("actions").caps()}),(0,T.BX)("div",{className:"buttons",children:[o.approve&&(0,T.BX)(B.l,{theme:"outlined",onClick:function(){return n("approve")},children:[(0,T.tZ)(h.JO,{icon:"like",color:"reached_max"!==o.approve&&g.g.colors.positive})," ",lng("approve").caps()]}),o.reject&&(0,T.BX)(B.l,{theme:"outlined",onClick:function(){return n("reject")},children:[(0,T.tZ)(h.JO,{icon:"dislike",color:g.g.colors.negative})," ",lng("reject").caps()]}),o.back&&(0,T.BX)(B.l,{theme:"outlined",onClick:function(){return n("back")},children:[(0,T.tZ)(h.JO,{icon:"reply",color:g.g.colors.warning})," ",lng("go back").caps()]}),o.waiting_list&&(0,T.BX)(B.l,{theme:"outlined",onClick:function(){return n("waiting_list")},children:[(0,T.tZ)(h.JO,{icon:"waiting_list",color:g.g.colors.no_progress})," ",lng("add to waiting list").caps()]}),o.cancel&&(0,T.BX)(B.l,{theme:"outlined",onClick:function(){return n("cancel_decision")},children:[(0,T.tZ)(h.JO,{icon:"mark_x",color:g.g.colors.negative})," ",lng("cancel").caps()]})]})]})]})})),le=function(){return["Reg",Blsm.isFeatureEnabled("course_registartion_external")&&"RegExt","Activity",Blsm.checkMod(["","ENT"])&&"AuthorizeGroup",(null===(e=Blsm.InitialData.special)||void 0===e?void 0:e.authorize_content_seq)&&"AuthorizeContent",(null===(t=Blsm.InitialData.special)||void 0===t?void 0:t.user_registration_seq)&&"AuthorizeUser",Blsm.isFeatureEnabled("resources")&&Blsm.checkMod(["resources","ENT"])&&"Resource",Blsm.isFeatureEnabled("questionnaire_forms")&&Blsm.checkMod(["questionnaire_forms","ENT"])&&"Form",Blsm.isFeatureEnabled("course_registartion_external")&&Blsm.checkMod(["course_registartion_external","ENT"])&&"GroupReceipt",Blsm.isFeatureEnabled("authorization_qualification")&&"Confirmation"].filter((function(e){return e})).map((function(e){return{href:{list:"approvals/type=".concat(e)},label:Y[e],val:e}}));var e,t},se=function(e,t){return{_:(0,T.BX)(T.HY,{children:[(0,j.DM)(t[e])&&(0,T.tZ)(w.u,{text:lng("approved"),children:t[e]}),(0,j.DM)(t["r_"+e])&&(0,T.BX)(w.u,{text:lng("requested"),children:[(0,j.DM)(t[e])&&(0,T.tZ)(T.HY,{children:" "}),"(",t["r_"+e],")"]})]})}}},74216:function(e,t,n){"use strict";n.d(t,{D:function(){return L}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w,O,k,x=n(27821),S=n(98e3),j=n(9934),C=n(68567),P=n(86303),Z=n(71134),B=n(55832),T=n(35944);function E(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||N(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function A(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?I(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function D(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function R(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||N(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function N(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var L=(r=x.observable.shallow,o=x.action.bound,i=x.action.bound,l=X((a=function(){function e(t){var n=this,r=t.basePath,o=t.route,i=void 0===o?[]:o,a=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),D(this,"ready",l,this),D(this,"error",s,this),D(this,"status",c,this),D(this,"items",u,this),D(this,"filterNsort",p,this),D(this,"page",d,this),D(this,"pagination",f,this),q(this,"_urlPageSize",void 0),D(this,"title",m,this),q(this,"RowRenderer",null),D(this,"_filters",g,this),q(this,"_sorts",[]),D(this,"_cols",h,this),q(this,"_checkAllCol",!0),q(this,"_actionsCol",!0),D(this,"extraFields",b,this),q(this,"_extraFieldsData",[]),q(this,"customFields",{}),q(this,"rowIdCol",""),D(this,"_actions",y,this),q(this,"hidden_filters",{}),q(this,"nav",null),q(this,"basePath",""),q(this,"fetchUrl",null),q(this,"delUrl",null),D(this,"linkNew",v,this),D(this,"linkNewTooltip",_,this),q(this,"_export",!1),q(this,"_internalNav",!1),q(this,"_innerFilterSort",!1),q(this,"_curFetch",null),q(this,"tabs",[]),D(this,"activeTab",w,this),q(this,"mobileSupport",!1),D(this,"drawerOpen",O,this),D(this,"drawerContent",k,this),q(this,"isEnterprise",Blsm.checkMod(["","ENT"])),q(this,"onDelete",(function(){return n.fetch()})),(0,x.makeObservable)(this),this.nav=a,this.basePath=r;var S=R(i,1)[0];this._updateFromUrl(S,!0);var j=function(){n._internalNav||n._innerFilterSort||n.nav([n.basePath,n._filterNsortUrlPrep()],{replace:!0})};(0,x.observe)(this.filterNsort,(function(){return n.pagination.curPage=0,j()})),(0,x.observe)(this.pagination,"curPage",j),(0,x.observe)(this.extraFields,j)}return F(e,[{key:"updateListRoute",value:function(e){var t=R(e,2),n=t[0],r=t[1];return this.basePath===n&&(this._updateFromUrl(r),!0)}}],[{key:"match",value:function(){return!1}}]),F(e,[{key:"fetch",value:function(){var e=this;if(!this.fetchUrl)throw new Error("fetchUrl or _acceptDataFromServer are missing");this.status="fetch",this._curFetch&&this._curFetch.abortFetch(),this._curFetch=(0,S.SC)(this.fetchUrl,{data:Object.assign({},this.hidden_filters,this._filterNsortUrlPrep()),onComplete:function(){return e._curFetch=null,e.status=""}},(function(t){return e._acceptDataFromServer(t)}))}},{key:"onDrawerClose",value:function(){this.drawerOpen=!1}},{key:"_acceptDataFromServer",value:function(e){var t;this.items.replace(null===(t=e.items)||void 0===t?void 0:t.map((function(e){return new j.o(e)}))),this.pagination.pageSize=e.page_size,this.pagination.totalItems=parseInt(e.count),e.custom_fields&&(this.customFields=Object.fromEntries(e.custom_fields.map((function(e){return[e.field_column,e]}))))}},{key:"_updateFromUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0,n={filter:e.filters||{},sort:{by:e.sort||"",desc:"1"===e.reverse}};this._internalNav=!0,(0,x.set)(this.filterNsort,n),this.pagination.curPage=parseInt(e.page)||0,(0,x.set)(this.extraFields,e.extra_fields||[]),this._urlPageSize=e.page_size,this._internalNav=!1,!t&&this.fetch()}},{key:"_filterNsortUrlPrep",value:function(){return(0,Z.v7)({filters:(0,x.toJS)(this.filterNsort.filter),sort:this.filterNsort.sort.by,extra_fields:(0,x.toJS)(this.extraFields),reverse:this.filterNsort.sort.desc?1:void 0,page:this.pagination.curPage||void 0,page_size:this._urlPageSize})}},{key:"colsToFiltersAndSorts",value:function(){var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=N(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this._cols);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=n.sortVal,o=n.title,i=n.input,a=n.options,l=n.emptyOption,s=n.outOfMenu;r&&this._sorts.push({val:r,label:o}),r&&i&&this._filters.push({name:r,label:o,type:i,options:a,emptyOption:l,outOfMenu:s})}}catch(e){t.e(e)}finally{t.f()}this._sorts.length&&this._sorts.unshift({val:"",label:lng("default")})}},{key:"prepExtraFields",value:function(e){var t=this;this._extraFieldsData=(0,Z.v7)(e,(function(e,n){return!t._cols.some((function(e){return e.sortVal===n}))})),this.barExtra=(0,T.tZ)(P._,{options:(0,Z.wd)(this._extraFieldsData),value:this.extraFields,maxLabelLength:20,emptyLabel:lng("select extra fields").caps()+"...",onChange:function(e){t.extraFields.replace(e),t.sorts.map((function(e){return e.val})).includes(t.filterNsort.sort.by)||(t.filterNsort.sort={by:"",desc:!1})}})}},{key:"dynamic_actions",value:function(){return[]}},{key:"cols",get:function(){var e=this;return this._cols.concat(this.extraFields.map((function(t){return{title:e._extraFieldsData[t],sortVal:t}})),this._actionsCol?[{title:lng("actions")}]:[],this._checkAllCol?[{checkAll:!0}]:[]).filter((function(e){return e}))}},{key:"sorts",get:function(){var e=this;return this._sorts.concat(this.extraFields.map((function(t){return{val:t,label:e._extraFieldsData[t]}})))}},{key:"filters",get:function(){var e=this;return this._filters.concat(this.extraFields.map((function(t){var n,r=[{val:"",label:""},{val:"1",label:lng("yes")},{val:"0",label:lng("no")}],o={name:t,label:e._extraFieldsData[t],type:"text"},i=null===(n=e.customFields)||void 0===n?void 0:n[t];switch(t){case"user_gender":return A(A({},o),{},{type:"select",options:[{val:"",label:lng("").caps()},{val:"male",label:lng("male").caps()},{val:"female",label:lng("female").caps()}]});case"group_open_date":case"group_close_date":case"registration_start_date":case"registration_end_date":case"consent_eula_updated":case"user_birthdate":case"user_expiration":case"employment_date":return A(A({},o),{},{type:"date"});case"inherit_dates_from_meetings":return A(A({},o),{},{type:"select",options:r});default:if(i)switch(o.label=i.field_name,o.type=i.form_type,o.type){case"select":o.options=[{val:"",label:""}].concat(E(Object.keys(i.field_data.values).map((function(e){return{val:e,label:e}}))));break;case"checkbox":o.type="select",o.options=r}return o}}))).filter((function(e){return e}))}},{key:"checkedItems",get:function(){return this.items.filter((function(e){return e._checked}))}},{key:"actions",get:function(){var e=this,t=[];if(this._export){var n=[{label:lng("export to excel"),val:"xlsx"},{label:lng("export to excel (2003)"),val:"xls"},{label:lng("export to %s","PDF"),val:"pdf"},{label:lng("export to %s","CSV"),val:"csv"}];Array.isArray(this._export)&&(n=n.filter((function(t){return e._export.includes(t.val)}))),t.push({icon:"download",menu:n,onSelect:function(t){return window.open((0,S.Q2)(e.fetchUrl,Object.assign({},e.hidden_filters,e._filterNsortUrlPrep(),{page_size:0,export:t})))}})}if(null!==this.linkNew&&t.push({icon:"new",action:this.linkNew,toolTip:this.linkNewTooltip||lng("create new").caps()}),this.rowIdCol&&this.delUrl){var r=this.checkedItems.map((function(t){return t[e.rowIdCol]}));t.push({icon:"trash",toolTip:lng("delete the selected items").caps(),action:r.length?function(){return(0,C.BB)(lng("are you sure you want to delete the selected items?").caps(),{text:lng("delete").caps(),onConfirm:(0,Z.Wl)(e.delUrl)?function(){return e.delUrl(r)}:function(){return(0,S.SC)(e.delUrl,{data:{ids:r},method:"DELETE"},e.onDelete)}})}:void 0})}return t.concat((0,x.toJS)(this._actions),this.dynamic_actions())}},{key:"shownItems",get:function(){return this._innerFilterSort?(0,B.WB)(this.items,this.filterNsort.filter,this.filterNsort.sort):this.items}}]),e}()).prototype,"ready",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),s=X(a.prototype,"error",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),c=X(a.prototype,"status",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=X(a.prototype,"items",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=X(a.prototype,"filterNsort",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,B.Cy)()}}),d=X(a.prototype,"page",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=X(a.prototype,"pagination",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{curPage:void 0,pageSize:void 0,totalItems:void 0,maySeeAll:!1}}}),m=X(a.prototype,"title",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=X(a.prototype,"_filters",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=X(a.prototype,"_cols",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=X(a.prototype,"extraFields",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=X(a.prototype,"_actions",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=X(a.prototype,"linkNew",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=X(a.prototype,"linkNewTooltip",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),w=X(a.prototype,"activeTab",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),O=X(a.prototype,"drawerOpen",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=X(a.prototype,"drawerContent",[x.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X(a.prototype,"updateListRoute",[x.action],Object.getOwnPropertyDescriptor(a.prototype,"updateListRoute"),a.prototype),X(a.prototype,"fetch",[o],Object.getOwnPropertyDescriptor(a.prototype,"fetch"),a.prototype),X(a.prototype,"cols",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"cols"),a.prototype),X(a.prototype,"sorts",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"sorts"),a.prototype),X(a.prototype,"filters",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"filters"),a.prototype),X(a.prototype,"onDrawerClose",[i],Object.getOwnPropertyDescriptor(a.prototype,"onDrawerClose"),a.prototype),X(a.prototype,"checkedItems",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"checkedItems"),a.prototype),X(a.prototype,"_acceptDataFromServer",[x.action],Object.getOwnPropertyDescriptor(a.prototype,"_acceptDataFromServer"),a.prototype),X(a.prototype,"_updateFromUrl",[x.action],Object.getOwnPropertyDescriptor(a.prototype,"_updateFromUrl"),a.prototype),X(a.prototype,"actions",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"actions"),a.prototype),X(a.prototype,"shownItems",[x.computed],Object.getOwnPropertyDescriptor(a.prototype,"shownItems"),a.prototype),a)},24061:function(e,t,n){"use strict";n.d(t,{Jv:function(){return Ue},Ss:function(){return ot},Kr:function(){return qe},hk:function(){return et},Hc:function(){return Xe}});var r=n(87363),o=n(27821),i=n(15560),a=n(74216),l=n(40676),s=n(40441),c=n(98e3),u=n(33051),p=n(66975),d=n(29180),f=n(68567),m=(n(57882),n(23838)),g=n(40484),h=n(24210);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return w(this,n)}}function w(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?O(e):t}function O(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(i,e);var t,n,r,o=_(i);function i(e){var t,n,r,a,l,s,u,p;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),l=o.call(this,e),s=O(l),p=void 0,(u="lessonId")in s?Object.defineProperty(s,u,{value:p,enumerable:!0,configurable:!0,writable:!0}):s[u]=p,l.lessonId=(null==e?void 0:e.content.lesson_id)||l.lessonId;var d=[];d.questnrName=(null==e||null===(t=e.content)||void 0===t?void 0:t.lesson_name)||(null==e||null===(n=e.content)||void 0===n?void 0:n.name),d.questnrType=null==e||null===(r=e.content)||void 0===r?void 0:r.lesson_type,d.questnrDesc=null==e||null===(a=e.content)||void 0===a?void 0:a.lesson_description,l.title=lng("duplicate questionnaire").caps(),l.confirmButtonLabel=lng("duplicate|verb").caps();var f=[["Test",lng("test")],["Survey",lng("survey")],["Evaluation",lng("evaluation")]];return l._fields=[{type:"single_item",name:"existingQuestnr",label:lng("select existing questionnaire"),searchData:function(e,t){var n=e.term,r=e.ids;(0,c.SC)("ajax/QuestionnaireAjax.class.php",{data:{req:"get_questionnaires_list",term:n,id:r,limit:10,current_id:l.lessonId}},t)}},{type:"text",name:"questnrName",label:lng("questionnaire name").caps(),visible:function(e){return!e.get("existingQuestnr")}},{type:"select",name:"questnrType",label:lng("questionnaire type").caps(),options:f,visible:function(e){return!e.get("existingQuestnr")}},{type:"richtext",name:"questnrDesc",label:lng("questionnaire description").caps(),visible:function(e){return!e.get("existingQuestnr")}},{type:"radioset",name:"questions_options",value:"link",options:[{val:"link",label:lng("link the questions to the new questionnaire").caps()},{val:"copy",label:lng("copy the questions to the new questionnaire").caps()},{val:"outline",label:lng("do not link the questions (questionnaire outline only)").caps()}]}],l._prepFields(d),l.ready=!0,l}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("content/duplicate_questionnaire",Object.assign({duplicate_questionnaire:this.lessonId},e))}}])&&y(t.prototype,n),r&&y(t,r),i}(h.I),S=n(9934),j=n(85024);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=I(e);if(t){var o=I(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?E(e):t}function E(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I(e){return(I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var D=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t,n,r,o=B(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),A(E(t=o.call(this,e)),"lessonInfo",void 0),A(E(t),"folderOptions",void 0),t.folderOptions=(null==e?void 0:e.folderOptions)||t.folderOptions,t.lessonInfo=null==e?void 0:e.lessonInfo,t.title=lng("move to private folder").caps(),t.confirmButtonLabel=lng("move").caps(),t._fields=[{type:"component",name:"folder_id",Render:j.p,props:{folderTree:t.folderOptions}}],t._prepFields(t.lessonInfo),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("catalog/attach_lesson",Object.assign({lesson_id:this.lessonInfo.lesson_id},e))}}])&&P(t.prototype,n),r&&P(t,r),i}(h.I),R=n(7392),N=n(71134),z=n(69829),M=n(60793),F=n(82307),q=n(28534),X=n(70917),L=n(16920),U=n(70081),V=n(90603),H=n(73105),G=n(69637),J=n(38152),W=n(41750),K=n(7510);function $(e){return($="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Q(e,t){return(Q=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ee(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return te(this,n)}}function te(e,t){return!t||"object"!==$(t)&&"function"!=typeof t?ne(e):t}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return(re=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Q(e,t)}(i,e);var t,n,r,o=ee(i);function i(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=ne(t),a=null,(r="lessonId")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.lessonId=(null==e?void 0:e.lessonId)||t.lessonId,t.title=lng("edit skills").caps()+": "+e.lessonName,t.successMessage=lng("content skills saved"),(0,c.SC)("skills/get_lesson_skills",{data:{lesson_id:t.lessonId}},(function(e){var n=[];null==e||e.forEach((function(e){return e.label=e.name?e.name:e.label})),n.skills=e,t.buildFields(n)})),t}return t=i,(n=[{key:"buildFields",value:function(e){this._fields=[{type:"multiple_items",name:"skills",label:lng("skills"),showId:!1,value:e.skills,valueIsMap:!0,theme:"bright",objectKeys:["sk_id","name","skill_level"],buttons:[{Render:K.EU}],searchData:function(e,t){(0,c.SC)("skills/autocomplete_skill",{data:{term:e.term||"",id:e.ids||""}},t)}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("content/edit_content_skills",Object.assign({lesson_id:this.lessonId},e))}}])&&Y(t.prototype,n),r&&Y(t,r),i}(h.I);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var fe,me,ge,he,be,ye,ve=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(i,e);var t,n,r,o=se(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),de(ue(t=o.call(this,e)),"ids",null),de(ue(t),"initialSkills",void 0),t.ids=e.ids,t.title=lng("edit skills").caps()+" (".concat(e.ids.length,")"),t.successMessage=lng("content skills saved"),(0,c.SC)("skills/get_lessons_skills",{data:{lesson_id:t.ids}},(function(e){var n=[];null==e||e.forEach((function(e){return e.label=e.name?e.name:e.label})),t.initialSkills=e.map((function(e){return{sk_id:e.sk_id,skill_level:e.skill_level}})),n.skills=e,t.buildFields(n)})),t}return t=i,(n=[{key:"buildFields",value:function(e){this._fields=[{type:"multiple_items",name:"skills",label:lng("skills"),showId:!1,value:e.skills,valueIsMap:!0,theme:"bright",objectKeys:["sk_id","name","skill_level"],buttons:[{Render:K.EU}],searchData:function(e,t){(0,c.SC)("skills/autocomplete_skill",{data:{term:e.term||"",id:e.ids||""}},t)}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.initialSkills.forEach((function(t){Object.values(e.skills).find((function(e){return e.sk_id===t.sk_id}))||(t.skill_level="-deleted-",e.skills[t.sk_id]=t)})),this.saveToUrl("content/edit_multi_content_skills",Object.assign({ids:this.ids,skills:e.skills}))}}])&&ae(t.prototype,n),r&&ae(t,r),i}(h.I),_e=n(35944);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ke(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oe(Object(n),!0).forEach((function(t){ze(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function xe(e,t){return Ze(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Ce(e,t)||je()}function Se(e){return Ze(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Ce(e)||je()}function je(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ce(e,t){if(e){if("string"==typeof e)return Pe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Pe(e,t):void 0}}function Pe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ze(e){if(Array.isArray(e))return e}function Be(e,t,n){return(Be="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ne(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ee(e,t,n){return t&&Te(e.prototype,t),n&&Te(e,n),e}function Ie(e,t){return(Ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ne(e);if(t){var o=Ne(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return De(this,n)}}function De(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?Re(e):t}function Re(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e){return(Ne=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ze(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Me(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Fe="content",qe=(fe=o.action.bound,me=o.action.bound,ge=o.action.bound,he=o.action.bound,be=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ie(e,t)}(n,e);var t=Ae(n);function n(e){var r,i,a,l,c,u=e.route,p=e.nav;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,{route:u,nav:p,basePath:Fe}),i=Re(r),a="folderTree",l=ye,c=Re(r),l&&Object.defineProperty(i,a,{enumerable:l.enumerable,configurable:l.configurable,writable:l.writable,value:l.initializer?l.initializer.call(c):void 0}),ze(Re(r),"assignmentId",void 0),(0,o.makeObservable)(Re(r)),m.Nd.on("FolderTree",(function(e){return r.folderTree.replace(e)})),r.title=lng("my content"),r.RowRenderer=Ue,r.fetchUrl="catalog/my",r.delUrl="content/delete_contents",r._actionsCol=!1,r._cols=Xe(),r.colsToFiltersAndSorts(),r.pagination.maySeeAll=!0,r.rowIdCol="lesson_id",r._export=r.isEnterprise,r._actions=[{icon:"new",menu:[Blsm.canAccessModule("Content")&&Blsm.isFeatureEnabled("content")&&{label:lng("file content"),icon:"vendor_file",onClick:function(){return(0,s.p4)({edit:"content",params:{type:"file"}},!0)}},Blsm.canAccessModule("Content")&&Blsm.isFeatureEnabled("text_based_content")&&{label:lng("text content"),icon:"vendor_text",onClick:function(){return(0,s.p4)({edit:"content",params:{type:"text"}},!0)}},Blsm.canAccessModule("Content")&&Blsm.isFeatureEnabled("external_content")&&{label:lng("lti content"),icon:"vendor_external",onClick:function(){return(0,s.p4)({edit:"content",params:{type:"lti"}},!0)}},Blsm.canAccessModule("Questionnaires")&&{label:lng("questionnaire"),icon:"vendor_test",onClick:function(){return(0,s.p4)({edit:"content",type:"Questionnaire",params:"wiz"},!0)}},Blsm.isFeatureEnabled("checklist")&&{label:lng("checklist"),icon:"vendor_checklist",onClick:function(){return(0,s.p4)({edit:"content",type:"Checklist"},!0)}},Blsm.canAccessModule("Content")&&Blsm.InitialData.special.kaltura&&{label:lng("advanced video"),icon:"vendor_video",onClick:function(){return(0,s.p4)({edit:"content",params:{type:"kaltura"}},!0)}},Blsm.isFeatureEnabled("integration_t2k")&&{label:lng("open Create"),onClick:function(){return(0,s.p4)(Blsm.prm.Mainref+"redirect.php?target=t2k_cgs",!0)}}]}],r.fetch(),r}return Ee(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=Se(e),i=o[0],a=o.slice(1);if(i===Fe)return new n({route:a,nav:r})}}]),Ee(n,[{key:"_acceptDataFromServer",value:function(e){var t=this;e.items=e.my,this.folderTree=(null==e?void 0:e.folders_tree)||this.folderTree,this.categoriesOptions=(null==e?void 0:e.categories_options)||this.categoriesOptions,Blsm.isFeatureEnabled("content")&&(this.barExtra=(0,_e.tZ)(ot,{text:lng("drag files here to create multiple file content").caps(),onDrop:function(n){return(0,m.vm)().openDialog("form",new V.y({files:n,folderOptions:t.folderTree,categoriesOptions:null==e?void 0:e.categories_options,onSaveSuccess:function(){return t.fetch()}}))}})),this.buildFilters({tagCategories:e.tag_categories,commonTags:e.most_common_tags}),Be(Ne(n.prototype),"_acceptDataFromServer",this).call(this,e)}},{key:"_updateFromUrl",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=arguments.length>1?arguments[1]:void 0;this.hidden_filters.forms="trash"===(null===(e=t.filters)||void 0===e?void 0:e.folder)?"any":"",Be(Ne(n.prototype),"_updateFromUrl",this).call(this,t,r)}},{key:"tree_to_folder_list",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t.folders=t.folders||[],t.indent_char=t.indent_char||" ",t.all&&t.folders.unshift(["",lng("all").caps()]);var n=function e(n,r){for(var o in n)n[o].id&&(t.include_non_numeric||(0,N.kE)(n[o].id)&&"repo"!==n[o].icon)&&(n[o].count&&null!=t&&t.display_count&&(n[o].label+=" (".concat(n[o].count,")")),t.folders.push([n[o].id,r+n[o].label])),n[o].sons&&n[o].sons.length&&e(n[o].sons,r+t.indent_char)};return n(e,""),t.folders}},{key:"buildFilters",value:function(e){var t=this,n=e.tagCategories,r=e.commonTags;this._filters=[{label:"#",name:"lesson_id",type:"text"},{label:lng("name"),name:"name",type:"text",outOfMenu:!0},{label:lng("description"),name:"lesson_description",type:"text"},{label:lng("private folder").caps(),name:"folder",type:"select",options:(0,N.wd)(this.tree_to_folder_list((0,o.toJS)(this.folderTree),{display_count:!0,include_non_numeric:!0}))},{label:lng("category").caps(),name:"category",type:"select",emptyOption:lng("all").caps(),options:(0,N.wd)(this.categoriesOptions)},{label:lng("content type").caps(),name:"content_types",type:"select_multi",options:(0,N.wd)([["File",lng("file")],["Survey",lng("survey")],["Test",lng("test")],["Evaluation",lng("evaluation")],["Lti","lti"],["Text",lng("text")]])},{label:lng("estimated duration").caps(),name:"duration",type:"select_multi",options:(0,N.wd)(z.l)},{label:lng("last modified").caps(),name:"period",type:"select",options:(0,N.wd)(M.l)}],r&&this._filters.push({label:lng("relevant tags").caps(),name:"tags",type:"select_multi",options:(0,N.wd)(r.map((function(e){return[e[1].tag_id,e[1].tag_name+" (".concat(e[1].times,")")]})))}),n&&n.forEach((function(e){return t._filters.push({type:"select_multi",name:"tags",label:e.tag_category_name,options:(0,N.wd)(e.tags.map((function(e){return[e.tag_id,e.tag_name]})))})})),this.ready=!0}},{key:"dynamic_actions",value:function(){var e=this,t=this.checkedItems.map((function(t){return t[e.rowIdCol]})),n=this.checkedItems.map((function(e){return e.name})),r=this.checkedItems.every((function(e){return!0===e.can_edit})),o=[];return this.isEnterprise&&o.push({icon:"edit",toolTip:lng("edit multiple content"),action:t.length?function(){return(0,m.vm)().openDialog("form",new F.s({names:n,ids:t,folderOptions:e.folderTree,onSaveSuccess:function(){return(0,m.vm)().closeDialog(),e.fetch()}}))}:void 0},{icon:"lock",toolTip:lng("edit permissions of selected contents"),action:t.length?function(){return(0,m.vm)().openDialog("form",new g.H({lessonId:t,lessonName:n.join(", "),onSaveSuccess:function(){return(0,m.vm)().closeDialog(),e.fetch()}}))}:void 0},Blsm.isFeatureEnabled("skills_occupations")&&{icon:"skill",toolTip:lng("edit multiple contents skills"),action:t.length&&r?function(){return(0,m.vm)().openDialog("form",new ve({ids:t,onSaveSuccess:function(){return(0,m.vm)().closeDialog(),e.fetch()}}))}:void 0}),Blsm.isFeatureEnabled("catalog")&&Blsm.checkMod(["catalog","ENT"])&&(Blsm.isFeatureEnabled("share_to_user")||Blsm.user.isManager)&&o.push({icon:"share",toolTip:lng("share multiple contents"),action:t.length?function(){return(0,s.p4)({edit:"share",id:1===t.length&&t[0],params:t.length>1&&{ids:t.join(",")}},!0)}:void 0}),o}},{key:"restoreContent",value:function(e){var t=this;(0,f.qR)((0,_e.BX)("div",{children:[(0,_e.tZ)("div",{children:lng("would you like to also restore the assignments associated with this content?").caps()}),(0,_e.BX)("div",{children:[(0,_e.tZ)(R.l,{onClick:function(){return n(e,2)},children:lng("yes").caps()}),(0,_e.tZ)(R.l,{onClick:function(){return n(e,1)},children:lng("no").caps()})]})]}),{closeText:lng("cancel"),title:lng("restore content").caps()});var n=function(e,n){(0,c.SC)("content/restore_content",{method:"POST",data:{lesson_id:e,restore_assignments:2===n}},(function(){return t.fetch()}))}}},{key:"deleteContent",value:function(e){this.items.remove(e)}},{key:"addToList",value:function(e){e.domain_id=Blsm.user.domain_id,e.can_edit=!0,this.items.unshift(new S.o(e))}},{key:"moveToFolder",value:function(e){var t=new D({lessonInfo:e,folderOptions:this.folderTree,onSaveSuccess:function(){e.folder_id=t.values.get("folder_id"),(0,m.vm)().closeDialog(),(0,q.qV)(lng("moved folder"))}});(0,m.vm)().openDialog("form",t)}}]),n}(a.D),ye=Me(be.prototype,"folderTree",[o.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Me(be.prototype,"_updateFromUrl",[o.override],Object.getOwnPropertyDescriptor(be.prototype,"_updateFromUrl"),be.prototype),Me(be.prototype,"restoreContent",[fe],Object.getOwnPropertyDescriptor(be.prototype,"restoreContent"),be.prototype),Me(be.prototype,"deleteContent",[me],Object.getOwnPropertyDescriptor(be.prototype,"deleteContent"),be.prototype),Me(be.prototype,"addToList",[ge],Object.getOwnPropertyDescriptor(be.prototype,"addToList"),be.prototype),Me(be.prototype,"moveToFolder",[he],Object.getOwnPropertyDescriptor(be.prototype,"moveToFolder"),be.prototype),be),Xe=function(){return[{title:"#",sortVal:"lesson_id"},{title:lng("type"),sortVal:"lesson_type"},{title:lng("name"),sortVal:"name",input:"text"},{title:lng("description"),sortVal:"lesson_description",input:"text"},{title:lng("category")},{title:lng("modified")},Blsm.isFeatureEnabled("skills_occupations")&&{title:lng("skills")},{title:lng("actions")}]},Le={name:"1eoy87d",styles:"display:flex;justify-content:space-between"},Ue=(0,i.observer)((function(e){var t=e.row,n=e.rowProps,r=t.lesson_id,o=t.author,i=t.type_title,a=t.name,c=t.descriptionIsHtml,f=t.lesson_description,g=t.category_name,h=t.modification_time,b=t.can_edit,y=t.lesson_public,v=t.lesson_type,_=t.domain_id,w=t.domain_name,O=t.category_id,k=t.skills,x=t.match_rate,S=t.lesson_owners,j=(b||(null==S?void 0:S.includes(String(Blsm.user.id))))&&Blsm.isFeatureEnabled("skills_occupations"),C=3==y||Blsm.user.isManager&&2==y,P=function(){b||C?(0,s.p4)({edit:"content",id:r,type:v},!0):(0,s.p4)({launcher:"lesson",id:r},!0,!0)},Z=["#"+r,{_:(0,_e.tZ)("span",{css:L.g.classes.content_type_style,children:i})},{type:"main",_:"".concat(a," ").concat(parseInt(_)!==Blsm.user.domain_id?"("+lng("from %s|domain",w)+")":"")},{type:"description",text:f,isHtml:(0,N.P$)(c)},{_:(0,_e.tZ)(J.W,{category:g,category_id:O})},{_:(0,_e.BX)(_e.HY,{children:[(0,_e.tZ)(d.qp,{time:h,showTime:!1})," ",((null==o?void 0:o.first_name)||(null==o?void 0:o.last_name))&&" ".concat(lng("by|person")," ").concat((0,N.v2)(o))]})},Blsm.isFeatureEnabled("skills_occupations")&&{_:(0,_e.BX)("div",{css:Le,children:[(0,_e.tZ)("div",{children:k}),x&&(0,_e.BX)(H.u,{css:Ve,text:lng("skill match percent").caps(),children:[x,"%"]})]})},{type:"icons",_:(0,_e.BX)(_e.HY,{children:[(0,_e.tZ)(u.x,{options:et({content:t,actions:n,isList:!0}),children:(0,_e.tZ)(p.JO,{icon:"menu",buttonLike:!0})}),(0,_e.tZ)(p.JO,{icon:"play",buttonLike:!0,onClick:function(){return(0,s.p4)({launcher:"lesson",id:r},!0,!0)}}),j&&(0,_e.tZ)(p.JO,{icon:"skill",buttonLike:!0,toolTip:lng("edit skills").caps(),onClick:function(){return(0,m.vm)().openDialog("form",new oe({lessonId:r,lessonName:a,onSaveSuccess:function(){return(0,m.vm)().closeDialog()}}))}})]})},!!n._checkAllCol&&{type:"checkbox",o:t}];return(0,_e.tZ)(l.lF,{tds:Z,onClick:function(){return null==P?void 0:P()}})})),Ve=(0,X.iv)("border-radius:20px;font-size:.9rem;padding:5px;background-color:",L.g.colors.warning,";color:white;",""),He=function(e){var t=e.lessonId,n=xe((0,r.useState)(null),2),o=n[0],i=n[1];return(0,r.useEffect)((function(){var e=(0,c.SC)("content/versions",{method:"POST",data:{lesson_id:t}},(function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=xe(r[n],1)[0];t.push(e[o])}i(t)}));return function(){return e&&e.abortFetch()}}),[t]),(0,_e.tZ)("div",{children:null!==o&&0===o.length?lng("no versions for this content").caps():(0,_e.tZ)(l.iA,{cols:Ge,collection:o,loading:null===o,RowRenderer:Je,rowIdCol:"lesson_id",compact:!0,noWindow:!0})})},Ge=[{title:"#"},{title:lng("name").caps()},{title:lng("created").caps()},{title:lng("modified").caps()},{title:lng("version").caps()}],Je=(0,i.observer)((function(e){var t=e.row,n=t.lesson_id,r=t.lesson_name,o=t.lesson_type,i=t.creation_time,a=t.modification_time,l=t.previous;return(0,_e.BX)("tr",{children:[(0,_e.tZ)("td",{children:n}),(0,_e.tZ)(G.U6,{children:(0,_e.tZ)("div",{onClick:function(){(0,s.p4)({edit:"content",id:n,type:o},!0),(0,f.wN)()},children:r})}),(0,_e.tZ)("td",{children:(0,_e.tZ)(d.qp,{time:i})}),(0,_e.tZ)("td",{children:(0,_e.tZ)(d.qp,{time:a})}),(0,_e.tZ)("td",{children:l?lng("previous").caps():lng("new").caps()})]})})),We=function(e){var t=e.lessonId,n=xe((0,r.useState)(null),2),o=n[0],i=n[1];return(0,r.useEffect)((function(){var e=(0,c.SC)("content/associated_assignments/"+t,{},(function(e){for(var t=[],n=0,r=Object.entries(e);n<r.length;n++){var o=xe(r[n],1)[0];t.push(e[o])}i(t)}));return function(){return e&&e.abortFetch()}}),[t]),(0,_e.tZ)("div",{children:null!==o&&0===o.length?lng("no assignments associated with this content").caps():(0,_e.tZ)(l.iA,{cols:Ke,collection:o,loading:null===o,RowRenderer:Qe,rowIdCol:"assignment_id",compact:!0,noWindow:!0})})},Ke=[{title:lng("assignment name").caps()},{title:lng("assignment owner").caps()},{title:lng("creation date").caps()},{title:lng("last modified").caps()}],$e={name:"1wbll7q",styles:"text-decoration:underline"},Ye={name:"1wbll7q",styles:"text-decoration:underline"},Qe=(0,i.observer)((function(e){var t=e.row,n=t.assignment_id,r=t.assignment_name,o=t.lesson_name,i=t.assignment_owner,a=t.creation_time,l=t.modification_time,c=r||o;return(0,_e.BX)("tr",{children:[(0,_e.tZ)("td",{children:i==Blsm.user.id||Blsm.user.power_user_assignment_permissions?(0,_e.tZ)("div",{css:$e,onClick:function(){(0,s.p4)({edit:"assignment",id:n},!0),(0,f.wN)()},children:c}):c}),(0,_e.tZ)("td",{children:(0,_e.tZ)("div",{css:Ye,onClick:function(){(0,s.p4)({user:i},!0),(0,f.wN)()},children:(0,N.v2)(t)})}),(0,_e.tZ)("td",{children:(0,_e.tZ)(d.qp,{showTime:!1,time:a})}),(0,_e.tZ)("td",{children:(0,_e.tZ)(d.qp,{showTime:!1,time:l})})]})})),et=function(e){var t,n=e.content,r=e.actions,o=e.isList,i=e.mayLockComments,a=r.fetch,l=r.assignmentId,u=r.restoreContent,p=r.deleteContent,d=r.moveToFolder,h=r.folderTree,b=r.addToList,y=n.domain_id,v=n.lesson_id,_=n.lesson_type,w=n.name,O=n.lesson_deleted,k=n.owner,x=n.lesson_public,S=n.share_in_group,j=n.show_download,C=n.show_assignments,P=n.my_content_in_group,Z=n.blog_in_group,B=n.blog_in_profile,T=n.assignment_id,E=n.group_id,I=n.anonymous_fetch_allowed,A=n.can_edit||(null===(t=n.lesson_owners)||void 0===t?void 0:t.includes(String(Blsm.user.id))),D=Blsm.isFeatureEnabled("catalog")&&(n.show_share||!n.reshare_disabled&&(Blsm.user.isManager||Blsm.isFeatureEnabled("share_to_user"))),R=3==x||Blsm.user.isManager&&2==x,z=A&&!S,M="Form"===_,F=-1!==["Test","Survey","Courseware","Evaluation"].indexOf(_),X=null==k?void 0:k.attributes.is_manager,L=!(P||Z||B),U=Blsm.isFeatureEnabled("file_versions")&&L&&!F&&!M,V=D||S&&X,H=Blsm.InitialData.repo_download_terms&&Blsm.InitialData.repo_download_terms[y],G=Blsm.InitialData.repo_download_block&&Blsm.InitialData.repo_download_block[y],J=!("master"===n.assignment_type)&&E&&i&&Blsm.isFeatureEnabled("assignments_comments"),K=Blsm.checkMod(["","ENT"]),$=Blsm.hasPermission(Blsm.ManagerPermissions.CONTENT_SHARE)&&T&&I&&K,Y=function(e){(0,c.SC)("assignment/lock_assignment_comments",{data:{lock:e,assignment_id:n.assignment_id,group_id:E},method:"POST"},(function(){return Q()}))},Q=function(){n.lock_assignment_comments=!n.lock_assignment_comments,n.lock_assignment_comments?(0,q.qV)(lng("comments are now disabled.")):(0,q.qV)(lng("comments are now enabled."))};return[O&&u&&{label:lng("restore content"),icon:"recycle",onClick:function(){return u(v)}},(A||R)&&{label:lng("edit content").caps(),icon:"edit",onClick:function(){return(0,s.p4)({edit:"content",id:v,type:_},!0)}},A&&z&&p&&{label:lng("delete content").caps(),icon:"trash",onClick:function(){(0,f.BB)((0,_e.BX)("div",{children:[lng("are you sure you want to delete this content?").caps(),(0,N.kE)(n.associated_assignments_count)&&(0,_e.BX)("div",{children:[lng("number of assignments associated with this content").caps(),": ",n.associated_assignments_count]})]}),{title:lng("delete content").caps(),onConfirm:function(){return(0,c.SC)("content/"+n.lesson_id,{method:"DELETE"},(function(){return p(n)}))}})}},Blsm.isFeatureEnabled("channels")&&T&&{label:lng("add to playlist").caps(),icon:"list_music",onClick:function(){return(0,m.vm)().openDialog("form",new W.L({item:T}))}},A&&U&&K&&{label:lng("show versions").caps(),icon:"sign_ok",onClick:function(){return(0,f.qR)((0,_e.tZ)("div",{children:(0,_e.tZ)(He,{lessonId:v})},v),{title:lng("other versions of this content").caps(),width:"40vw"})}},A&&L&&K&&{label:lng("edit permissions").caps(),icon:"lock",onClick:function(){return(0,m.vm)().openDialog("form",new g.H({lessonId:v,lessonName:w,onSaveSuccess:function(){return(0,m.vm)().closeDialog(),null==a?void 0:a()}}))}},A&&F&&o&&{label:lng("duplicate content").caps(),icon:"copy",onClick:function(){return tt(n,b)}},K&&(A||parseInt(y)!==parseInt(Blsm.user.domain_id))&&-1!==["Text"].indexOf(_)&&o&&{label:lng("duplicate content").caps(),icon:"copy",onClick:function(){return nt(n,b)}},(null==h?void 0:h.length)>0&&!l&&d&&K&&{label:lng("move to folder").caps(),icon:"open",onClick:function(){return d(n)}},V&&!M&&{label:lng("share").caps(),icon:"share",onClick:function(){return(0,s.p4)({edit:"share",id:n.lesson_id},!0)}},V&&$&&{label:lng("share to email").caps(),icon:"by_mail",onClick:function(){return(0,s.p4)({edit:"share_by_mail",id:n.lesson_id},!0)}},j&&(!G||H)&&{label:lng("download"),icon:"download",onClick:function(){T?(0,s.p4)(Blsm.prm.Mainref+"Launcher?dl=1&assignment="+T,!0):parseInt(y)!==parseInt(Blsm.user.domain_id)&&H?G?(0,f.qR)(H,{title:lng("repository download terms")}):(0,f.BB)(H,{title:lng("repository download terms"),confirmText:lng("accept"),cancelText:lng("decline"),onConfirm:function(){return(0,s.p4)(Blsm.prm.Mainref+"GetFile?lesson_id="+v)}}):(0,s.p4)(Blsm.prm.Mainref+"GetFile?lesson_id="+v,!0)}},C&&Blsm.user.isManager&&!M&&K&&{label:lng("create assignment").caps(),icon:"menu_overview",onClick:function(){return(0,s.p4)({edit:"assignment",params:{content:v}},!0)}},C&&Blsm.user.isManager&&!M&&K&&{label:lng("show assignments").caps(),icon:"preview",onClick:function(){return(0,f.qR)((0,_e.tZ)(We,{lessonId:v}),{title:lng("assignments associated with this content").caps(),width:"40vw"})}},A&&T&&{label:lng("completion report").caps(),icon:"report",href:(0,s.p4)({report:"ReportCompletion",params:{shared:1,assignment:T,group:E,subs:1}})},A&&T&&F&&{label:lng("question distribution report").caps(),icon:"report",href:(0,s.p4)({report:"ReportQuestionDistribution",params:{shared:1,assignment:T,group:E,subs:1}})},A&&T&&"Survey"===_&&{label:lng("survey report").caps(),icon:"report",href:(0,s.p4)({report:"SurveyReport",params:{shared:1,assignment:T,group:E,subs:1}})},!A&&T&&{label:lng("assignment log").caps(),icon:"report",href:(0,s.p4)({report:"ReportUserPerformances",params:{user:Blsm.user.id,assignment:T,group:E,subs:1}})},J&&(null!==n.lock_assignment_comments||!0===n.lock_comments?{label:lng("unlock comments").caps(),val:"lock_assignment_comments",attr:{lock:1},icon:"lock_open",onClick:function(){return Y(0)}}:{label:lng("lock comments").caps(),val:"lock_assignment_comments",attr:{lock:0},icon:"lock",onClick:function(){return Y(1)}})]},tt=function(e,t){var n=new x({content:e,onSaveSuccess:function(r){if(r.id&&((0,q.qV)(lng("questionnaire duplicated")),t)){for(var o=[],i=0,a=Object.entries(e);i<a.length;i++){var l=xe(a[i],2),s=l[0],c=l[1];o[s]=c}o.lesson_id=r.id,o.lesson_name=n.values.get("questnrName"),o.name=n.values.get("questnrName"),o.lesson_type=n.values.get("questnrType"),o.lesson_description=n.values.get("questnrDesc"),t(o)}(0,m.vm)().closeDialog()}});(0,m.vm)().openDialog("form",n)},nt=function(e,t){(0,f.BB)(lng("are you sure you want to duplicate this content?").caps(),{confirmText:lng("yes").caps(),cancelText:lng("no").caps(),onConfirm:function(){(0,c.SC)("content/duplicate/"+e.lesson_id,{method:"POST"},(function(n){if(n.content_id&&((0,q.qV)(lng("click here to edit"),lng("duplicated"),{onClick:function(){return(0,s.p4)({edit:"content",id:n.content_id},!0)}}),t)){for(var r=[],o=0,i=Object.entries(e);o<i.length;o++){var a=xe(i[o],2),l=a[0],c=a[1];r[l]=c}r.lesson_id=n.content_id,t(r)}}))}})},rt=(0,X.iv)("border:1px dashed ",L.g.colors.text_main,";background-color:rgba(255, 255, 255, 0.5);border-radius:7px;padding:0 0.3em;margin:0 .5em;color:",L.g.colors.text_main,";cursor:default;.dropzone{position:fixed;",L.g.classes.near(L.g.consts.SIDE_BAR_WIDTH+10+"px")," top:",L.g.consts.TOP_BAR_HEIGHT+10,"px;width:calc(100vw - ",L.g.consts.SIDE_BAR_WIDTH+30,"px);height:calc(100vh - ",L.g.consts.TOP_BAR_HEIGHT+20,"px);}",""),ot=function(e){var t=e.onDrop,n=e.text,r=e.toolTip,o=(0,U.aZ)((function(e){return t(e)})).dndEvents;return(0,U.iP)().width<=1024?null:(0,_e.tZ)("div",{css:rt,children:(0,_e.BX)(H.u,{text:r,children:[(0,_e.tZ)(p.JO,{icon:"upload"})," ",n||lng("drag & drop content files").caps(),(0,_e.tZ)("div",ke(ke({css:L.g.classes.dropzone,className:"dropzone"},o),{},{children:lng("drop files here").caps()}))]})})}},96901:function(e,t,n){"use strict";n.d(t,{u:function(){return W},K:function(){return J}});var r=n(74216),o=n(15560),i=n(27821),a=n(33051),l=n(23838);function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==s(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y,v,_=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(e){var t,n,r,a,l,s,u,p,d,f;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),b(g(f=o.call(this,e)),"info",{}),b(g(f),"object",void 0),b(g(f),"fieldOptions",void 0),b(g(f),"dependencyOptions",void 0),b(g(f),"allFields",void 0),f.info=e.info||f.info,f.object=e.object,f.fieldOptions=e.fieldOptions,f.dependencyOptions=null===(t=e.dependencyOptions)||void 0===t?void 0:t.filter((function(t){var n;return t.val!=(null===(n=e.info)||void 0===n?void 0:n.field_id)})),f.allFields=e.allFields,f.title=f.info?lng("edit custom field").caps():lng("add new custom field").caps();var m=/lessons|groups|users/.test(f.object);return f.info.autocomplete=null===(n=f.info)||void 0===n||null===(r=n.field_data)||void 0===r?void 0:r.autocomplete,f.info.dependency_field_id=null===(a=f.info)||void 0===a||null===(l=a.field_data)||void 0===l?void 0:l.dependency_field_id,f.info.values=null!==(s=f.info)&&void 0!==s&&null!==(u=s.field_data)&&void 0!==u&&u.values?Object.entries(null===(p=f.info)||void 0===p||null===(d=p.field_data)||void 0===d?void 0:d.values).map((function(e){var t=c(e,2),n=t[0],r=t[1];return n+(!0===r?"":"|"+r.join("|"))})).join(","):"",f._fields=[{type:"text",name:"field_name",label:lng("field name").caps(),maxLength:100,required:!0},{type:"select",name:"field_type",label:lng("field type"),options:f.fieldOptions},{type:"text",name:"values",label:lng("field values"),visible:function(){return"SELECT"===f.values.get("field_type")},required:function(){return"SELECT"===f.values.get("field_type")}},{type:"select",name:"dependency_field_id",label:lng("depends on"),options:f.dependencyOptions},{type:"text",name:"field_key",label:lng("field key"),maxLength:50,validate:function(e){return w(e,f.allFields.filter((function(e){return e.field_id!=f.info.field_id})))}},{type:"text",name:"field_column",label:lng("field id"),readOnly:!0},{type:"checkbox",name:"autocomplete",label:lng("autocomplete"),visible:function(){return"VARCHAR"===f.values.get("field_type")}},{type:"checkbox",name:"must_fill",label:lng("mandatory"),insert:m}],f._prepFields(f.info),f.ready=!0,f}return t=i,(n=[{key:"save",value:function(e){var t,n;this.saveToUrl("domains/save_custom_fields",Object.assign({object:this.object,field_id:(null===(t=this.info)||void 0===t?void 0:t.field_id)||"",type_changed:e.field_type!==(null===(n=this.info)||void 0===n?void 0:n.field_type)?1:void 0},e))}}])&&p(t.prototype,n),r&&p(t,r),i}(n(24210).I),w=function(e,t){if(!e.match(/^[a-zA-Z0-9_]*$/))return{error:lng("please use alphanumeric characters")};if(e.match(/^(group_|user_|field_)/)||["fullname","full_name","external_id","lms_name","link","since","ip_address","lock_duration","added_message","password","date","job_name","text","description","notes","amount","assignment_name","lesson_name","resource_name","target_name","classification_name","syllabus_text","template_name","parent_name","welcome_text","report_link","report_url"].includes(e))return{error:lng("%s cannot contain reserved words such as %s",lng("field key"),"group_,user_,field_,full_name,description,…")};if(!e.match(/^[A-Za-z]/))return{error:lng("must start with a letter")};if(t){var n=Object.fromEntries(t.filter((function(e){return e.field_key})).map((function(e){return[e.field_key,e]})))[e];if(n)return{error:lng("this %s is already in use by %s",lng("field key"),"".concat(n.field_name," (").concat(n.field_column,")"))}}return!0},O=n(68567),k=(n(57882),n(69637)),x=n(40676),S=n(66975),j=n(98e3),C=n(35944);function P(e){return(P="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Z(e){return A(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||E(e)||T()}function B(e,t){return A(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||E(e,t)||T()}function T(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function E(e,t){if(e){if("string"==typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?I(e,t):void 0}}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function A(e){if(Array.isArray(e))return e}function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){V(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function z(e,t,n){return t&&N(e.prototype,t),n&&N(e,n),e}function M(e,t){return(M=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function F(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=U(e);if(t){var o=U(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return q(this,n)}}function q(e,t){return!t||"object"!==P(t)&&"function"!=typeof t?X(e):t}function X(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e,t,n){return(L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=U(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function U(e){return(U=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var G="customfields",J=function(e){return Object.fromEntries([["users",lng("users")],e&&["groups",lng("groups/courses")],e&&["ous",lng("org' units")],e&&["lessons",lng("content")],e&&Blsm.isFeatureEnabled("qualifications")&&["qualifications",lng("qualifications")],e&&Blsm.isFeatureEnabled("workplan")&&["workplan",lng("workplan")],e&&Blsm.isFeatureEnabled("resources")&&["resources",lng("resources")],e&&Blsm.isFeatureEnabled("resources")&&["resourcebundle",lng("resource bundle")],e&&Blsm.isFeatureEnabled("group_tasks")&&["tasks",lng("tasks",{phrase:!0})],e&&Blsm.isFeatureEnabled("course_registartion_external")&&["external_course_type",lng("external event types")]].filter((function(e){return e})))},W=(y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&M(e,t)}(n,e);var t=F(n);function n(e){var r,s,c,u,p,d=e.route,f=e.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),r=t.call(this,{route:d,nav:f,basePath:G}),s=X(r),c="object",u=v,p=X(r),u&&Object.defineProperty(s,c,{enumerable:u.enumerable,configurable:u.configurable,writable:u.writable,value:u.initializer?u.initializer.call(p):void 0}),V(X(r),"dependencyOptions",[]),V(X(r),"fieldTypes",{INT:lng("number").caps(),VARCHAR:lng("text").caps(),TEXT:lng("rich text").caps(),DATE:lng("date").caps(),CHECKBOX:lng("checkbox").caps(),SELECT:lng("drop down list").caps()}),V(X(r),"onDelete",(function(e){(null==e?void 0:e.field_appearances)>0&&(0,O.qR)((0,C.tZ)(Y,R(R({},e),{},{message:lng("cannot remove this field because it is used in rules in the following places:")})),{title:lng("cannot remove custom field"),width:"600px"}),r.fetch()})),(0,i.makeObservable)(X(r)),r.object=d[0],r._innerFilterSort=!0,r.title=lng("custom fields"),r.RowRenderer=K,r._actionsCol=!1,r.rowIdCol="field_id",r.fetchUrl="domains/list_custom_fields",r.delUrl=function(e){(0,j.SC)("domains/delete_custom_fields",{data:{ids:e,object:r.object},method:"DELETE"},r.onDelete)},r.linkNew=function(){return(0,l.vm)().openDialog("form",new _({object:r.object,fieldOptions:r.fieldTypes,dependencyOptions:r.dependencyOptions,allFields:r.items,onSaveSuccess:function(){return(0,l.vm)().closeDialog(),r.fetch()}}))},r.rowAction=function(e){return(0,l.vm)().openDialog("form",new _({object:r.object,fieldOptions:r.fieldTypes,dependencyOptions:r.dependencyOptions,allFields:r.items,info:e,onSaveSuccess:function(e){(null==e?void 0:e.field_appearances)>0?(0,O.qR)((0,C.tZ)(Y,R(R({},e),{},{message:lng("cannot update this field because it is used in rules in the following places:")})),{title:lng("cannot update custom field"),width:"600px",onCancel:function(){return(0,l.vm)().closeDialog()}}):(r.fetch(),(0,l.vm)().closeDialog())}}))},r._cols=[{title:lng("field id"),sortVal:"field_column",input:"text"},{title:lng("key"),sortVal:"field_key",input:"text"},{title:lng("field name"),sortVal:"field_name",input:"text"},{title:lng("type"),sortVal:"field_type"},{title:lng("depends on")}];var m=(0,o.observer)((function(){for(var e=[],t=function(){var t=B(o[n],2),r=t[0],a=t[1];e.push({label:a,onClick:function(){return i(r)}})},n=0,o=Object.entries(J(r.isEnterprise));n<o.length;n++)t();var i=function(e){r.object=e,r.fetchUrl="domains/list_custom_fields/&object=".concat(r.object),r.delUrl=function(e){(0,j.SC)("domains/delete_custom_fields",{data:{ids:e,object:r.object},method:"DELETE"},r.onDelete)},r.nav([G,e],{replace:!0})};return(0,C.tZ)(a.x,{dropDownLike:!0,options:e,children:J(r.isEnterprise)[r.object].caps()})}));return r.barExtra=(0,C.tZ)(m,{}),r.colsToFiltersAndSorts(),r.ready=!0,r.fetch(),r}return z(n,[{key:"_updateFromUrl",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1?arguments[1]:void 0;this.object=this.hidden_filters.object=t,this.fetchUrl="domains/list_custom_fields/&object=".concat(this.object),this.delUrl=function(t){(0,j.SC)("domains/delete_custom_fields",{data:{ids:t,object:e.object},method:"DELETE"},e.onDelete)},L(U(n.prototype),"_updateFromUrl",this).call(this,t,r)}}]),z(n,[{key:"_acceptDataFromServer",value:function(e){var t=this;this.title="".concat(lng("custom fields").caps()," - ").concat(J(this.isEnterprise)[this.object].caps()),this.dependencyOptions=[{val:"",label:lng("nothing").caps()}],e.items.map((function(e){["SELECT","CHECKBOX"].indexOf(e.field_type)>=0&&t.dependencyOptions.push({val:e.field_id,label:e.field_name})})),L(U(n.prototype),"_acceptDataFromServer",this).call(this,e)}}],[{key:"match",value:function(e,t){var r=t.nav,o=Z(e),i=o[0],a=o.slice(1);if(i===G)return new n({route:a,nav:r,object:a[0].object})}}]),n}(r.D),v=H(y.prototype,"object",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),H(y.prototype,"_updateFromUrl",[i.override],Object.getOwnPropertyDescriptor(y.prototype,"_updateFromUrl"),y.prototype),y),K=(0,o.observer)((function(e){var t=e.row,n=e.rowProps,r=t.field_key,o=t.field_column,i=t.field_name,a=t.field_type,l=t.depends_on,s=t.field_data,c=n.rowAction,u=n.fieldTypes;return(0,C.BX)("tr",{onClick:function(){return null==c?void 0:c(t)},children:[(0,C.tZ)("td",{children:o}),(0,C.tZ)("td",{children:r||""}),(0,C.tZ)(k.U6,{children:i}),(0,C.BX)("td",{children:[u[a]||lng("unknown").caps(),"SELECT"===a&&(null==s?void 0:s.values)&&(0,C.BX)("div",{children:["(",Object.keys(null==s?void 0:s.values).join(","),")"]})]}),(0,C.tZ)("td",{children:l}),(0,C.tZ)(k.Fo,{o:t})]})})),$={name:"ny9url",styles:".title{font-weight:600;&.instruction{margin-bottom:10px;}&.type{margin-top:15px;}}"},Y=function(e){var t=e.groups,n=e.external_course_types,r=e.questionnaire_pages,o=e.message;return(0,C.BX)("div",{css:$,children:[(0,C.tZ)("div",{className:"title instruction",children:o.caps()}),t.length>0&&(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{className:"title type",children:[lng("workspaces").caps(),":"]}),(0,C.tZ)(Q,{collection:t,href:{edit:"workspace"}})]}),n.length>0&&(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{className:"title type",children:[lng("external events").caps(),":"]}),(0,C.tZ)(Q,{collection:n,href:{edit:"external_course_type"}})]}),r.length>0&&(0,C.BX)(C.HY,{children:[(0,C.BX)("div",{className:"title type",children:[lng("questionnaires").caps(),":"]}),(0,C.tZ)(Q,{collection:r,href:{edit:!0,type:"Questionnaire"}})]})]})},Q=function(e){var t=e.collection,n=e.href,r=[{title:"#"},{title:lng("name")},{title:lng("section")},{}];return(0,C.tZ)(x.iA,{cols:r,filters:[],collection:t,rowIdCol:"id",RowRenderer:ee,rowProps:{href:n},compact:!0,noWindow:!0})},ee=function(e){var t=e.row,n=e.rowProps.href;return(0,C.BX)("tr",{children:[(0,C.BX)("td",{children:["#",t.id]}),(0,C.tZ)(k.U6,{children:t.name}),t.section_title&&(0,C.tZ)("td",{children:t.section_title}),(0,C.tZ)(k.jA,{children:(0,C.tZ)(S.JO,{icon:"link",smallButtonLike:!0,href:R(R({},n),{},{id:t.id,section:t.section})})})]})}},98071:function(e,t,n){"use strict";n.d(t,{AQ:function(){return G},uj:function(){return J}});var r=n(74216),o=n(15560),i=n(87363);function a(e){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function s(e,t){return(s=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function c(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=d(e);if(t){var o=d(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u(this,n)}}function u(e,t){return!t||"object"!==a(t)&&"function"!=typeof t?p(e):t}function p(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d(e){return(d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var f,m,g=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&s(e,t)}(i,e);var t,n,r,o=c(i);function i(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=p(t),a=void 0,(r="permissionTypeInfo")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.permissionTypeInfo=e.permissionType||t.permissionTypeInfo,t.saveUrl=t.permissionTypeInfo?"users/save_permission_types":"users/new_permission_type",t.title=t.permissionTypeInfo?lng("edit permission type")+": "+t.permissionTypeInfo.name:lng("new permission type"),t._fields=[{type:"text",name:"name",label:lng("permission type name"),required:!0,maxLength:191}],t._prepFields(t.permissionTypeInfo),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign({},this.permissionTypeInfo||{},e))}}])&&l(t.prototype,n),r&&l(t,r),i}(n(24210).I),h=n(23838),b=n(5474),y=n(98e3),v=n(65405),_=n(27821),w=n(28534),O=n(69637),k=(n(66975),n(35944));function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return B(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||P(e,t)||C()}function j(e){return B(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||P(e)||C()}function C(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function P(e,t){if(e){if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Z(e,t):void 0}}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e){if(Array.isArray(e))return e}function T(e,t,n){return(T="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=z(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t&&E(e.prototype,t),n&&E(e,n),e}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F,q,X,L,U,V,H="manager_permission_types",G=(f=_.action.bound,m=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(n,e);var t=D(n);function n(e){var r,o=e.route,i=e.nav;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),M(N(r=t.call(this,{route:o,nav:i,basePath:H})),"defaultManagerSettingOptions",[{val:"",label:lng("none").caps()},{val:"all",label:lng("all").caps()}]),M(N(r),"defaultManagerSetting",void 0),(0,_.makeObservable)(N(r)),r.title=lng("manager permission types"),r._actionsCol=!1,r.fetchUrl="users/list_permission_types",r.delUrl="users/delete_permission_types",r.rowIdCol="id",r.RowRenderer=W,r._cols=[{title:lng("name"),val:"name",input:"text"},{title:lng("create assignments")},{title:lng("set assignment weights")},{title:lng("create meetings")},{title:lng("edit meetings")},{title:lng("set meeting attendance")},{title:lng("share content")},Blsm.isFeatureEnabled("evaluation")&&r.isEnterprise&&{title:lng("view evaluations")},{title:lng("general"),tooltip:J()}],r.colsToFiltersAndSorts(),r.linkNew=function(){return(0,h.vm)().openDialog("form",new g({onSaveSuccess:function(){return(0,h.vm)().closeDialog(),r.fetch()}}))},r.linkNewTooltip=lng("add new permission type"),r.rowAction=function(e){return(0,h.vm)().openDialog("form",new g({permissionType:e,onSaveSuccess:function(){return(0,h.vm)().closeDialog(),r.fetch()}}))},r.fetch(),r}return I(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=j(e),i=o[0],a=o.slice(1);if(i===H)return new n({route:a,nav:r})}}]),I(n,[{key:"_acceptDataFromServer",value:function(e){var t=this;null==e||e.items.forEach((function(e){t.defaultManagerSettingOptions.push({val:e.id,label:e.name})})),(0,y.SC)("domains/get_domain_field/field=default_manager_setting/",{},(function(e){t.defaultManagerSetting=e,t._buildCols()})),T(z(n.prototype),"_acceptDataFromServer",this).call(this,e)}},{key:"_buildCols",value:function(){var e=this;this.barExtra=(0,k.tZ)((function(){var t=S((0,i.useState)(e.defaultManagerSetting),2),n=t[0],r=t[1];return(0,k.BX)(k.HY,{children:[(0,k.BX)("label",{style:{padding:"5px"},children:[lng("default manager setting").caps(),": "]}),(0,k.tZ)(b.P,{options:e.defaultManagerSettingOptions,value:n,onChange:function(e){r(e),(0,y.SC)("domains/save_domain_field/single_value=1",{data:{default_manager_setting:e},method:"POST"},(function(){return(0,w.qV)(lng("setting saved successfully"))}))}})]})}),{}),this.ready=!0}},{key:"savePermission",value:function(e){var t=e.permissionType,n=e.value,r=e.name;t[[r]]=n.toString(),(0,y.SC)("users/save_manager_permission_type",{data:{id:t.id,value:n,name:r},method:"POST"})}}]),n}(r.D),F=m.prototype,q="savePermission",X=[f],L=Object.getOwnPropertyDescriptor(m.prototype,"savePermission"),U=m.prototype,V={},Object.keys(L).forEach((function(e){V[e]=L[e]})),V.enumerable=!!V.enumerable,V.configurable=!!V.configurable,("value"in V||V.initializer)&&(V.writable=!0),V=X.slice().reverse().reduce((function(e,t){return t(F,q,e)||e}),V),U&&void 0!==V.initializer&&(V.value=V.initializer?V.initializer.call(U):void 0,V.initializer=void 0),void 0===V.initializer&&(Object.defineProperty(F,q,V),V=null),m),J=function(){var e=[];return e.push(lng("settings")),Blsm.isFeatureEnabled("portal")&&e.push(lng("portal")),Blsm.isFeatureEnabled("group_subset")&&e.push(lng("subsets")),Blsm.isFeatureEnabled("discussions")&&e.push(lng("discussions")),Blsm.isFeatureEnabled("assignments_comments")&&e.push(lng("comments")),Blsm.isFeatureEnabled("rescue_assignment")&&e.push(lng("rescue assignments")),e.push(lng("set assignment order")),e.push(lng("passing score")),e.push(lng("set score")),e.push(lng("publish grades")),e.push(lng("upload diploma")),lng("manage: %s",e.reduce((function(e,t){return e+"\n• "+t.caps()}),"")).caps()},W=(0,o.observer)((function(e){var t=e.row,n=e.rowProps,r=n.rowAction,o=n.savePermission,i=n.isEnterprise,a=t.name,l=t.perm_assignments,s=t.perm_meetings,c=t.perm_content,u=t.perm_evaluation,p=t.perm_config;return(0,k.BX)("tr",{children:[(0,k.tZ)(O.U6,{children:(0,k.tZ)("div",{onClick:function(){return null==r?void 0:r(t)},children:a})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{checkboxValue:"1",value:l,onChange:function(e){return o({permissionType:t,value:e||"2",name:"perm_assignments"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{checkboxValue:"2",value:"1"===l?"2":l,onChange:function(e){return o({permissionType:t,value:e||"",name:"perm_assignments"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{checkboxValue:"1",value:s,onChange:function(e){return o({permissionType:t,value:e||"2",name:"perm_meetings"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{checkboxValue:"2",value:"1"===s?"2":s,onChange:function(e){return o({permissionType:t,value:e||"3",name:"perm_meetings"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{checkboxValue:"3",value:s&&"3",onChange:function(e){return o({permissionType:t,value:e||"",name:"perm_meetings"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{value:c,onChange:function(e){return o({permissionType:t,value:e,name:"perm_content"})}})}),Blsm.isFeatureEnabled("evaluation")&&i&&(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{value:u,onChange:function(e){return o({permissionType:t,value:e,name:"perm_evaluation"})}})}),(0,k.tZ)("td",{children:(0,k.tZ)(v.X,{value:p,onChange:function(e){return o({permissionType:t,value:e,name:"perm_config"})}})}),(0,k.tZ)(O.Fo,{o:t})]})}))},50643:function(e,t,n){"use strict";n.d(t,{W:function(){return w}});var r=n(70917),o=n(16920),i=n(15560),a=n(66975),l=n(64902),s=n(71134),c=n(29180),u=n(87363),p=n(65405),d=n(76691),f=n(22698),m=n(86344),g=n(35944);function h(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=function(e){var t=e.is_read,n=e.active,i=e.translucent;return(0,r.iv)("color:",o.g.colors.text_main,";background-color:",(0,m.pp)(n?o.g.colors.highlight:t?o.g.colors.bg_cont:o.g.colors.dominant_main_shade,i?.6:null),";min-height:100px;display:flex;border-radius:15px;padding:10px 12px;cursor:pointer;>._side{display:flex;flex-direction:column;align-items:center;",o.g.classes.margin_far("10px"),";._avatar{border:1px solid ",n?o.g.colors.dominant_white:"transparent",";}.thumbnail{font-size:34px;line-height:0;}._icons{display:flex;flex-grow:1;margin-top:15px;font-size:1.1em;}}>._main{flex-grow:1;>._meta{display:flex;align-items:center;>._user_name{flex-grow:1;color:",o.g.colors.text_sec,";}>._date{font-size:.9em;}}>._subject{font-weight:",t?"normal":700,";font-size:1.1em;margin:5px 0 10px;",o.g.classes.ellipsis_lines(3),";word-break:break-word;}>._body{",o.g.classes.ellipsis_lines(1),";word-break:break-word;color:",o.g.colors.text_sec,";}}._check{",(0,s.Fq)()?"":"visibility: hidden;",";}&:hover{background-color:",o.g.colors.dominant_main,";&,._meta ._user_name,._body{color:",o.g.colors.dominant_white,";}}&:hover,&.checked{._check{visibility:visible;}}","")},y={name:"gwdjul",styles:"position:relative;width:42px;height:42px;font-size:30px;display:flex;flex-direction:column;align-items:center"},v={name:"53gs8q",styles:"position:relative;width:42px;height:42px"},_={name:"1ogvqp6",styles:"position:relative;width:42px;height:42px;font-size:42px"},w=(0,i.observer)((function(e){var t,n,i=e.msg,m=e.active,w=e.is_read,O=e.onClick,k=e.showAvatar,x=void 0===k||k,S=e.translucent,j=void 0!==S&&S,C=(0,u.useContext)(d.Zm),P=i.attached_files,Z=i.message,B=i.subject,T=i.time,E=i.participants,I=i.recipients,A=i.future,D=E||I||{},R=null,N="";if(null!=A&&A.sending_time)R=(0,g.tZ)(a.JO,{icon:"clock",className:"thumbnail",title:lng("future message"),color:o.g.colors.purple}),N=lng("future message").caps();else if(D.group)R=(0,g.tZ)("div",{css:y,children:(0,g.tZ)(a.JO,{icon:"group"})}),N=D.group;else if((null===(t=D.users)||void 0===t?void 0:t.length)>1){var z,M,F=D.users[0],q=D.users[1];R=(0,g.BX)("div",{css:v,children:[(0,g.tZ)(l.qE,{user:q,size:"32px",className:"_avatar",css:(0,r.iv)((z={position:"absolute"},h(z,o.g.near,9),h(z,"top",3),z),"","")}),(0,g.tZ)(l.qE,{user:F,size:"32px",className:"_avatar",css:(0,r.iv)((M={position:"absolute"},h(M,o.g.near,0),h(M,"top",0),M),"","")})]}),N=lng("%s and %s others|person",(0,s.v2)(F),D.users.length-1).caps()}else if(1===(null===(n=D.users)||void 0===n?void 0:n.length)){var X=D.users[0];R=(0,g.tZ)(l.qE,{user:X,size:"42px",className:"_avatar"}),N=(0,s.v2)(X)}else D.system?(R=(0,g.tZ)(a.JO,{icon:"menu_info",className:"thumbnail",color:o.g.colors.purple}),N=lng("system").caps()):R=(0,g.tZ)("div",{css:_,children:(0,g.tZ)(a.JO,{icon:"empty"})});return(0,g.BX)(f.LZ,{css:b({is_read:w,active:m,translucent:j}),onClick:O,className:(0,s.AK)({checked:null==C?void 0:C.checkedItems.includes(i.message_id)}),children:[x&&R&&(0,g.BX)("div",{className:"_side",children:[R,(0,g.tZ)("div",{className:"_icons",children:(null==P?void 0:P.length)>0&&(0,g.tZ)(a.JO,{icon:"attachment"})})]}),(0,g.BX)("div",{className:"_main",children:[(0,g.BX)("div",{className:"_meta",children:[(0,g.tZ)("div",{className:"_user_name",children:N}),(0,g.tZ)(c.qp,{time:(null==A?void 0:A.sending_time)||T,className:"_date"}),C&&(0,g.tZ)(p.X,{className:"_check",onChange:function(e){return e?C.checkedItems.push(i.message_id):C.checkedItems=C.checkedItems.filter((function(e){return e!=i.message_id}))},value:C.checkedItems.includes(i.message_id)})]}),(0,g.tZ)("div",{className:"_subject",children:B}),(0,g.tZ)("div",{className:"_body",children:(0,s.s9)(Z)})]})]})}))},81019:function(e,t,n){"use strict";n.d(t,{Z:function(){return M},t:function(){return A}});var r=n(70917),o=n(15560),i=n(87363),a=n(16920),l=n(64902),s=n(29180),c=n(95405),u=n(71134),p=n(539),d=n(66975),f=n(76691),m=n(7392),g=n(33346),h=n(24210),b=n(98e3),y=n(68567),v=n(28534),_=n(40965),w=n(73105),O=n(35944);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Z(e);if(t){var o=Z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?P(e):t}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Z(e){return(Z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function B(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var E=(0,r.iv)("padding:0 20px 10px;display:flex;flex-direction:column;color:",a.g.colors.text_main,";>._head{padding:20px 0;display:flex;border-bottom:1px solid ",a.g.colors.separator,";>._subject{flex-grow:1;font-weight:700;font-size:1.8em;}}.buttonbar{margin-top:1em;margin-bottom:40px;display:flex;justify-content:stretch;gap:10px;>div{display:flex;gap:10px;}>.totheright{flex-grow:1;flex-direction:row-reverse;}>.totheleft{flex-grow:2;}}",""),I={name:"iqoq9n",styles:"margin-top:20px"},A=(0,o.observer)((function(e){var t,n=e.msg,r=(0,i.useContext)(f.Zm),o=n.ready,a=n.message_id,l=n.subject,s=n.replies,b=n.from,_=n.replyForm,w=n.filterNsort;if(!o)return(0,O.tZ)(p.$,{css:I});var k="preset"===r.activeBoxKey,x="deleted"===r.activeBoxKey,S={};b>0&&(S[b]=n.from_user),null===(t=n.recipients)||void 0===t||t.users.forEach((function(e){return S[e.user_id]=e})),s.forEach((function(e){var t;return null===(t=e.recipients)||void 0===t?void 0:t.users.forEach((function(e){return S[e.user_id]=e}))})),s.forEach((function(e){return e.from>0&&(S[e.from]=e.from_user)})),delete S[Blsm.user.id];var j=!x&&(0,u.B5)(b)&&!(0,u.Tz)(b),C=!x&&(0,u.Dw)(S),P=!x&&(0,u.B5)(b)&&!k&&(Blsm.user.isPowerManager||Blsm.user.perm.isGroupViewer||!Blsm.isFeatureEnabled("isolate_users")),Z=!x;return(0,O.BX)("div",{css:E,children:[(0,O.BX)("div",{className:"_head",children:[(0,O.tZ)("div",{className:"_subject",children:l}),(0,O.tZ)("div",{children:(0,O.tZ)(d.JO,{icon:"close",buttonLike:!0,onClick:function(){return r.activeMsg=null}})})]}),(0,O.tZ)(c.SV,{children:(0,O.tZ)(z,{reply:n,main:!0})},a),s.filter((function(e){return D(e,w.filter.users)})).map((function(e){return(0,O.tZ)(c.SV,{children:(0,O.tZ)(z,{reply:e,msg:n})},e.message_id)})),(0,O.tZ)(h.q3.Provider,{value:_,children:_?(0,O.BX)("div",{className:"replying_bar",children:[(0,O.tZ)(g.au,{input:_.getFieldByName("message_to_user")}),(0,O.tZ)(g.au,{input:_.getFieldById("message")}),(0,O.BX)("div",{className:"buttonbar",children:[(0,O.tZ)(m.l,{theme:"contained",onClick:function(){return _.callSave()},disabled:!(!_.status&&_.getValue("message")&&_.getValue("message_to_user")),children:"saving"===_.status?lng("please wait...").caps():lng("send").caps()}),(0,O.tZ)(m.l,{theme:"outlined",onClick:function(){return n.hideReplyForm()},children:lng("cancel").caps()})]})]}):null}),!_&&(0,O.BX)("div",{className:"buttonbar",children:[(0,O.BX)("div",{className:"totheleft",children:[j&&(0,O.BX)(m.l,{theme:"contained",onClick:function(){return n.showReplyForm([b])},children:[(0,O.tZ)(d.JO,{icon:"reply"})," ",lng("reply").caps()]}),C&&(0,O.BX)(m.l,{theme:"contained",onClick:function(){return n.showReplyForm(Object.keys(S))},children:[(0,O.tZ)(d.JO,{icon:"reply_all"})," ",lng("reply all").caps()]}),P&&(0,O.BX)(m.l,{theme:"contained",onClick:function(){return n.showReplyForm([])},children:[(0,O.tZ)(d.JO,{icon:"forward"})," ",lng("forward").caps()]}),k&&(0,O.BX)(m.l,{theme:"contained",onClick:function(){return r.draft(n.subject,n.message)},children:[(0,O.tZ)(d.JO,{icon:"forward"})," ",lng("send to").caps()]})]}),(0,O.tZ)("div",{className:"totheright",children:Z&&(0,O.BX)(m.l,{theme:"outlined",onClick:function(){(0,y.BB)(lng("are you sure you want to delete this message?"),{onConfirm:function(){r.deleteActiveMsg((function(){return(0,v.qV)(lng("message deleted"))}))}})},children:[(0,O.tZ)(d.JO,{icon:"trash"})," ",lng("delete").caps()]})})]})]})})),D=function(e,t){var n;return(0,u.xb)(t)||t.includes(e.from)||(null===(n=e.recipients.users)||void 0===n?void 0:n.some((function(e){return t.includes(e.user_id)})))},R=(0,r.iv)("border-top:1px solid ",a.g.colors.separator,";border-width:1px 0;>div{padding:10px 20px;",a.g.mQuery.mobile,"{padding:10px 0;}}.report-table{th,tfoot td{padding:5px 10px;background-color:",a.g.colors.bg_2,";text-align:start;}>tbody>tr:hover>td{background-color:",a.g.colors.bg_1,";}td{padding:5px 10px;}}>._meta{display:flex;gap:10px;align-items:center;>._avatar{",a.g.classes.margin_far(".8em"),";}._user_name{font-weight:700;font-size:1.1rem;}._date,._to{font-size:.9em;color:",a.g.colors.text_sec,";}._actions{display:flex;flex-direction:row-reverse;}}&.main{padding-top:1.5em;}.buttonbar{margin-top:1em;margin-bottom:40px;display:flex;flex-direction:row;gap:10px;}._body{a{text-decoration:underline;}}._files{display:flex;flex-wrap:wrap;>*{margin:5px;}}",""),N=(0,r.iv)("padding:10px;.title{font-weight:600;font-size:1.1em;padding-bottom:5px;}.report-table{margin:auto;th,tfoot td{background-color:",a.g.colors.bg_2,";text-align:start;}>tbody>tr:hover>td{background-color:",a.g.colors.bg_1,";}td{padding:5px 10px;}}",""),z=(0,o.observer)((function(e){var t,n,r=e.reply,o=e.msg,i=e.main,c=r.from,p=r.from_user,f=r.message,m=r.datestamp,g=r.recipients,h=r.attached_files,b=r.meta,y=[];g&&(g.group&&y.push(g.group),(null===(t=g.users)||void 0===t?void 0:t.length)>0&&y.push.apply(y,B(g.users.map(u.v2))),(null===(n=g.groups)||void 0===n?void 0:n.length)>0&&y.push.apply(y,B(g.groups.map((function(e){return e.group_name})))));var v=h.filter((function(e){return!f.includes(e.id)}));return(0,O.BX)("div",{css:R,className:(0,u.AK)({main:i}),children:[(0,O.BX)("div",{className:"_meta",children:[(0,u.B5)(c)&&(0,O.tZ)("div",{className:"_avatar",children:(0,O.tZ)(l.qE,{user:p,size:i?"50px":"40px",balloon:!1})}),(0,O.BX)("div",{className:"_from_to",children:[(0,O.tZ)("div",{className:"_user_name",children:(0,u.B5)(c)?"".concat((0,u.v2)(p)):lng("system message").caps()}),y.length>0&&(0,O.BX)("div",{className:"_to",children:[lng("to|person").caps(),": ",y.join(", ")]})]}),(0,O.tZ)("div",{css:a.g.classes.flex_grow}),(0,O.tZ)("div",{className:"_actions",children:o&&(0,u.B5)(c)&&!(0,u.Tz)(c)&&(0,O.tZ)(d.JO,{icon:"reply",buttonLike:!0,onClick:function(){return o.showReplyForm([c])},title:lng("reply").caps()})}),(0,O.tZ)(s.qp,{time:m,className:"_date"}),b&&(0,O.tZ)(w.y,{content:(0,O.BX)("div",{css:N,children:[(0,O.tZ)("div",{className:"title",children:lng("metadata").caps()}),(0,O.tZ)("div",{dangerouslySetInnerHTML:{__html:b}})]}),children:(0,O.tZ)(d.JO,{icon:"placeholder"})})]}),(0,O.tZ)(_.x,{className:"_body",content:f,nl2br:!1,fixTrailingSpaces:!1}),(0,O.tZ)("div",{className:"_files",css:a.g.classes.wysiwyg,children:v.map((function(e){return(0,O.tZ)("a",{className:"attached-file",href:Blsm.prm.Mainref+"GetFile?file_id="+e.id,rel:"noreferrer",target:"_blank",children:e.filename},e)}))})]})})),M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(i,e);var t,n,r,o=j(i);function i(e,t){var n,r,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this),r=P(n),l=void 0,(a="msgStore")in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,n.msg=e,n.msgStore=t,n._fields=[{type:"multiple_items",name:"message_to_user",label:lng("select user"),outer_label:lng("send to"),separateLines:!1,inline:!0,theme:"bright",visible:function(){return Blsm.user.isPowerManager||Blsm.user.perm.isGroupViewer||!Blsm.isFeatureEnabled("isolate_users")},searchData:function(e,t){(0,b.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||""}},t)}},{type:"richtext",name:"message",label:lng("message"),id:"message",toolbarOptions:{font:!0,color:!0,link:!0,attach:!0,media_link:!0,list:!0,align:!0},onValueChange:function(e,t){return n.values.set("message_commands",t)}}],n}return t=i,(n=[{key:"SaveSuccess",value:function(e){this.status="",(0,u.B5)(e.message_id)&&this.msgStore.invalidateActiveMsg()}},{key:"save",value:function(e){this.status="saving";var t=this.msg.message_id||this.msgStore._activeMsgId;this.saveToUrl("messages/reply",Object.assign({},e,{message_id:t}))}}])&&x(t.prototype,n),r&&x(t,r),i}(h.I)},50541:function(e,t,n){"use strict";n.d(t,{U:function(){return x},x:function(){return k}});var r=n(70917),o=n(16920),i=n(15560),a=n(87363),l=n(66975),s=n(76691),c=n(539),u=n(50643),p=n(75151),d=n(95405),f=n(43698),m=n(7392),g=n(55758),h=n(23838),b=n(33051),y=n(68567),v=n(28534),_=n(65405),w=n(35944),O=(0,r.iv)("display:flex;flex-direction:column;>._top{padding-bottom:9px;margin-bottom:9px;border-bottom:1px solid ",o.g.colors.separator,";>._options{margin-bottom:18px;display:flex;align-items:center;font-weight:600;}._actions{padding-inline-start:5px;margin-bottom:10px;.search_input{background-color:",o.g.darkMode?o.g.colors.bg_input:"#F6F6F6",";padding:0 10px;display:flex;align-items:center;border-radius:8px;height:41px;margin:5px 0;>.Icon-search{margin:0 5px;transition:font-size .1s;}>input{flex-grow:1;background-color:transparent;height:100%;border:0;color:",o.g.colors.text_main,";width:250px;&::placeholder{color:",o.g.colors.text_placeholder,";}}}._note{margin-bottom:10px;}._multiactions{min-height:47px;display:flex;flex-direction:row;align-items:center;justify-content:space-evenly;gap:10px;>*{display:inline-block;flex-grow:1;height:fit-content;}}._new_button{display:block;padding:12px 0;border-radius:10px;}}}",""),k=(0,r.iv)("._list{flex-grow:1;overflow-y:auto;>.separator{margin:6px 15px 5px;border-top:1px solid ",o.g.colors.separator,";}}",""),x=(0,i.observer)((function(){var e=(0,a.useContext)(h.l9),t=(0,a.useContext)(s.Zm),n=t.activeBoxKey,r=t.activeBox,i=t.listBoxes,x=t.activeMsgId,S=t.checkedItems,j=r.curPage,C=r.pageSize,P=r.totalItems,Z=r.searchTerm;function B(o){var i,a=r.messages.filter((function(e){return S.includes(e.message_id)&&!e.is_read})).length;switch(o){case"select_all":return void(t.checkedItems.length===r.messages.length?t.checkedItems=[]:t.checkedItems=r.messages.map((function(e){return e.message_id})));case"delete":return void(0,y.BB)(lng("are you sure you want to delete the selected items?"),{onConfirm:function(){i=function(){["sys","in"].includes(n)&&(r.unreadCount-=a,e.inbox_unread_count-=a),r.removeMessagesById(S),(0,v.qV)(lng("%s messages deleted",S.length))},t.multiAction({action:o,onSuccess:i})}});case"archive":i=function(){["sys","in"].includes(n)&&(r.unreadCount-=a,e.inbox_unread_count-=a),"archive"===o&&t.boxes.archive.appendMessages(r.messages.filter((function(e){return S.includes(e.message_id)}))),r.removeMessagesById(S)};break;case"unarchive":case"undelete":i=function(){t.boxes.in.unreadCount+=a,e.inbox_unread_count+=a,t.boxes.in.appendMessages(r.messages.filter((function(e){return S.includes(e.message_id)}))),r.removeMessagesById(S),r.unreadCount-=a};break;case"read":case"unread":i=function(){r.setIsRead(S,"read"===o)}}t.multiAction({action:o,onSuccess:i})}var T="sys"!==n&&"deleted"!==n&&0===S.length&&(Blsm.user.perm.isGroupViewer||!Blsm.isFeatureEnabled("isolate_users"));return(0,w.BX)(g.h,{css:[O,k,"",""],children:[(0,w.BX)("div",{className:"_top",children:[(0,w.tZ)("div",{className:"_options",children:(0,w.BX)("div",{css:o.g.classes.flex_grow,children:[(0,w.tZ)(f.I,{type:"select",options:i,value:n,onChange:function(e){return t.activeBox=e},wrapped:!0}),(0,w.tZ)(_.X,{value:r.toggleUserMsgs,label:lng("show only user messages").caps(),onChange:function(e){return r.toggleUserMsgs=e}})]})}),(0,w.BX)("div",{className:"_actions",children:[(0,w.BX)("div",{className:"search_input",children:[(0,w.tZ)(l.JO,{icon:"search"}),(0,w.tZ)("input",{type:"text",placeholder:lng("search messages").caps(),value:Z,onChange:function(e){return r.searchTerm=e.target.value},onKeyUp:function(e){"Escape"===e.key&&(r.searchTerm=""),"Enter"===e.key&&r.getMessages()}})]}),T&&(0,w.BX)(m.l,{theme:"contained",bold:!0,className:"_new_button",onClick:function(){return t.activeMsg="new"},disabled:"new"===x,children:[(0,w.tZ)(l.JO,{icon:"create"})," ",lng("write message").caps()]}),S.length>0&&(0,w.BX)("div",{className:"_multiactions",children:["deleted"!==n&&(0,w.BX)(m.l,{theme:"outlined",onClick:function(){return B("delete")},children:[(0,w.tZ)(l.JO,{icon:"trash"})," ",lng("delete").caps()]}),["in","sys"].includes(n)&&(0,w.tZ)(b.x,{className:"width100",options:[{label:lng("read|noun"),val:"read"},{label:lng("unread|noun"),val:"unread"},"in"===n&&{label:lng("archived"),val:"archive"}],onSelect:function(e){return B(e)},children:(0,w.tZ)(m.l,{theme:"contained",children:lng("mark as...").caps()})}),"archive"===n&&(0,w.tZ)(m.l,{theme:"contained",onClick:function(){return B("unarchive")},children:lng("unarchive").caps()}),"deleted"===n&&(0,w.tZ)(m.l,{theme:"contained",onClick:function(){return B("undelete")},children:lng("restore").caps()}),(0,w.tZ)("div",{style:{flexGrow:0},children:(0,w.tZ)(l.JO,{buttonLike:!0,icon:"checkbox_checked",title:lng("select all"),onClick:function(){return B("select_all")}})})]})]}),(0,w.tZ)(p.t,{pageSize:C,totalItems:P,curPage:j,onChange:function(e){return r.curPage=e},compact:!0,spread:!0})]}),r.loading?(0,w.tZ)(c.$,{}):(0,w.tZ)("div",{className:"_list",children:r.messages?r.messages.map((function(e,n){return(0,w.BX)(a.Fragment,{children:[n>0&&(0,w.tZ)("div",{className:"separator"}),(0,w.tZ)(d.SV,{children:(0,w.tZ)(u.W,{msg:e,active:e.message_id===x,is_read:e.is_read,onClick:function(){t.activeMsg=e.message_id,e.is_read=!0}})})]},e.message_id)})):(0,w.tZ)(c.$,{})})]})}))},1711:function(e,t,n){"use strict";n.d(t,{i:function(){return u}});var r,o,i,a=n(27821);function l(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var u=new(o=c((r=function(){function e(){var t,n,r,s;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),l(this,"_mode",o,this),l(this,"_fSize",i,this),n=this,r="modes",s={saturate:[lng("saturated colors"),"saturate(400%);"],sepia:[lng("sepia colors"),"sepia(30%)"],invert:[lng("inverted colors"),"invert(150%)"],grayscale:[lng("color blind mode"),"grayscale(100%)"],dark:[lng("dark mode"),void 0]},r in n?Object.defineProperty(n,r,{value:s,enumerable:!0,configurable:!0,writable:!0}):n[r]=s,(0,a.makeObservable)(this),null!==(t=document.documentElement)&&void 0!==t&&t.style&&(document.documentElement.style.fontSize=Math.round(14*this._fSize)+"px")}var t,n,r;return t=e,(n=[{key:"fontSize",get:function(){return this._fSize},set:function(e){var t;Blsm.cookies.set("fSize",e,{expires:365,path:Blsm.prm.relative_path}),null!==(t=document.documentElement)&&void 0!==t&&t.style&&(document.documentElement.style.fontSize=Math.round(14*e)+"px"),this._fSize=e}},{key:"mode",get:function(){return this._mode||""},set:function(e){e===this.mode&&(e=""),e?Blsm.cookies.set("aMode",e,{expires:365,path:Blsm.prm.relative_path}):Blsm.cookies.remove("aMode",{path:Blsm.prm.relative_path}),"dark"===e||"dark"===this._mode?location.reload():this._mode=e}},{key:"modeFilter",get:function(){var e;return this.mode&&(null===(e=this.modes[this.mode])||void 0===e?void 0:e[1])}}])&&s(t.prototype,n),r&&s(t,r),e}()).prototype,"_mode",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Blsm.cookies.get("aMode")}}),i=c(r.prototype,"_fSize",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return Blsm.cookies.get("fSize")||"1"}}),r)},86344:function(e,t,n){"use strict";function r(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{BB:function(){return l},HO:function(){return d},gj:function(){return u},mR:function(){return i},ou:function(){return a},pp:function(){return f},wq:function(){return p}});var i=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(e)?(3===(t=e.substring(1).split("")).length&&(t=[t[0],t[0],t[1],t[1],t[2],t[2]]),t="0x"+t.join(""),"rgba(".concat([t>>16&255,t>>8&255,255&t].join(","),", ").concat(n,")")):(console.error("hexToRgbA: "+e+" is a bad hex."),"rgab(0, 0, 0, 1)")},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#000",n=s(e,!1);if(!n)return t;var r=(299*n[0]+587*n[1]+114*n[2])/1e3;return r>=128?"#000":"#fff"},l=function(e){return/^(#[\da-f]{3,4}|#[\da-f]{6}||#[\da-f]{8}|rgb\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*\)|rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*,\s*(1|1.0|0|0?\.\d+)\s*\))$/i.test(e)},s=function(e){var t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[0,0,0,1];return e?"transparent"===(e=e.toLowerCase())?[0,0,0,0]:"white"===e?[255,255,255,1]:"black"===e?[0,0,0,1]:"#"===e[0]?(e.length<7&&(e="#"+e[1]+e[1]+e[2]+e[2]+e[3]+e[3]+(e.length>4?e[4]+e[4]:"")),[parseInt(e.substr(1,2),16),parseInt(e.substr(3,2),16),parseInt(e.substr(5,2),16),e.length>7?parseInt(e.substr(7,2),16)/255:1]):0===e.indexOf("rgb")&&(null===(t=e.match(/[.\d]+/g))||void 0===t?void 0:t.length)>=3?(3===(null===(n=e.match(/[.\d]+/g))||void 0===n?void 0:n.length)&&(e+=",1"),e.match(/[.\d]+/g).map((function(e){return+e}))):r:r},c=[["#ffb300",lng("orange")],["#aabd04",lng("olive")],["#2bba30",lng("green")],["#2fca86",lng("sea green")],["#00b8a5",lng("light sea green")],["#00bcd4",lng("turquoise")],["#e87e0d",lng("dark orange")],["#f44336",lng("red")],["#e91e63",lng("deep pink")],["#9c27b0",lng("violet")],["#3f51b5",lng("royal blue")],["#2196f3",lng("sky blue")]],u=function(e){return c[(e-1)%c.length][0]},p=function(e){return c.map((function(t,n){return{val:e?n+1:"[&quot;"+t[0]+"&quot;,&quot;#ffffff&quot;]",label:t[1],bgColor:t[0],color:"#ffffff"}}))},d=function(e,t){var n=r(s(e),4),o=n[0],i=n[1],a=n[2],l=n[3],c=t<0,u=c?0:255*t,p=c?1+t:1-t;return"rgba(".concat(Math.round(o*p+u),",").concat(Math.round(i*p+u),",").concat(Math.round(a*p+u),",").concat(l,")")},f=function(e,t){if(("string"==typeof t||"number"==typeof t)&&t>=0&&t<=1){var n=r(s(e),3),o=n[0],i=n[1],a=n[2];return"rgba(".concat(o,",").concat(i,",").concat(a,",").concat(t,")")}return e}},16920:function(e,t,n){"use strict";n.d(t,{g:function(){return E}});var r=n(70917),o=n(71134),i=n(1711),a=n(86344);function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var c={text_main:"#171625",text_sec:"#717171",bg_main:"#FFFFFF",bg_page_containers:"#F5F4F5",bg_cont:"#FFFFFF",bg_input:"#FFFFFF",background_dark:"#F1F1F5",bg_1:"#E5E5E5",bg_2:"#F0F0F0",bg_2_text:"#4E4E4E",disabled_background:"#C0C0C0",separator:"#E5E5E5",separator_light:"#F1F1F5",text_black:"#171625",text_light_disabled:"#C9C9CE",link_blue:"#347EF7",link_blue_hover:"#3b5998",dominant_main:"#347EF7",dominant_main_shade:"#f0f5ff",mention_bg:"#c3ef90",dominant_orange:"#ff9800",dominant_white:"#FFF",half_black:"rgba(17,17,51,0.55)",half_white:"rgba(255,255,255,0.6)",disabled_text:"#AAA",disabled_input:"#eaeaea",disabled_input_cb:"#888",text_placeholder:"#909090",border:"#D8D8D8",border_dark:"#EAEAF0",blue:"#347EF7",blue_shade:"#f0f5ff",white_shade:"#EBEBEB",light_blue:"#1194F6",light_blue2:"#B3D0FF",dark_blue:"#0D1B60",yellow:"#FFC441",grey:"#7F7F86",purple:"#714AB2",green:"#3CD598",negative:"#E64D40",negative_bg:"#B34B41",warning:"#E69E40",positive:"#3aa74a",positive_bg:"#297434",blossom:"#20AE61",highlight:"#F7DFAB",bright_green:"#85BF07",pink:"#E91E63",set:["#F44336","#E91E63","#9C27B0","#673AB7","#3D51B5","#2196F3","#03A9FA","#00BCD4","#009688","#5AB963","#8BC34A","#CDDC39","#FFEB3B","#FFC107","#FF9800","#FF5722"],chart:{success:"#3aa74a",failure:"#E64D40",waiting:"#FFC441",progress:"#1194F6",neutral:"#F1F1F1",inactive:"#7F7F86",bg:"#D2D4D8"},task:{authorized:"#F7B617",late:"#F9412D",incomplete:"#AAAAAA",expired:"#ab0000",completed:"#3BBC31",in_progress:"#488CF2"},reports:{green:"#3aa74a",red:"#E64D40",blue:"#1194F6",yellow:"#FFC441"}};c.entity={discussion:"#FF9900",blog:"#89C53F",assignment:c.green,share:c.light_blue,meeting:c.purple,event:c.text_black,coach:c.yellow,course:c.light_blue,course_template:c.dark_blue,workspace:c.light_blue,qualification:c.purple};var u="dark"===i.i.mode;u&&(c.text_main="white",c.text_sec="#D9D9D9",c.bg_main="#2D333B",c.bg_page_containers="#2D333B",c.bg_cont="#303544",c.bg_input="#3E455A",c.background_dark="#6676A5",c.dominant_main_shade="#243F54",c.bg_1="#405389",c.bg_2="#304172",c.bg_2_text="#D9D9D9",c.disabled_background="#656A6A",c.separator="#787878",c.highlight="#533980",c.link_blue_hover="#8db8ff",c.entity.event="#D9D9D9");var p={max:function(e){return"@media (max-width: ".concat(e,"px)")},mobile:"@media (max-width: ".concat(1023,"px)"),mobileNarrow:"@media (max-width: ".concat(574,"px)"),notMobile:"@media (min-width: ".concat(1024,"px)"),ie:"@media all and (-ms-high-contrast: none), (-ms-high-contrast: active)"},d=document.documentElement.classList.contains("RTL");d&&document.getElementById("bchat_full")&&(d=!1,$("HTML").removeClass("RTL"));var f=d?"rtl":"ltr",m=d?"right":"left",g=d?"left":"right",h={TABLE_HEAD_HEIGHT:70,SIDE_BAR_WIDTH:70,TOP_BAR_HEIGHT:70,CONTAINER_MIN_WIDTH:350,PAGE_CONTENT_MAX_WIDTH:1380,CARD_WIDTH:315,CARD_HEIGHT:345,CARDS_SPACING:26,CONT_BORDER_RADIUS:20,WIDGET_BASE_WIDTH:280,WIDGET_BASE_HEIGHT:350,WIDGET_BORDER_RADIUS:10,WIDGET_SMALL_WIDTH:345,WIDGET_PADDING_SIDE:16,WIDGET_PADDING_TOP:20,LIST_MARGIN:12,LIST_MARGIN_CONDENSED:12,ITEM_IMG_SIZE:37,BUTTON_BORDER_RADIUS:10,FIELD_BORDER_RADIUS:7,SKINNY_BORDER_RADIUS:4,IMG_BORDER_RADIUS:4,CONT_MARGIN:40,PAGE_SIZE:100,ICON_MARGIN:"0.6em",MIN_FORM_HEIGHT_MOBILE:600,imgdata_half_white:"linear-gradient(".concat(c.half_white,", ").concat(c.half_white,")"),imgdata_half_black:"linear-gradient(".concat(c.half_black,", ").concat(c.half_black,")"),DEFAULT_STICKY_START_HEIGHT:42};h.WIDGET_DOUBLE_WIDTH=2*h.WIDGET_BASE_WIDTH+h.WIDGET_PADDING_SIDE;var b=(0,r.iv)("color:",c.link_blue,";text-decoration:underline;cursor:pointer;&a:hover{cursor:pointer;color:",c.link_blue_hover,';text-decoration:none;}&a[href^="#"]{font-weight:600;}&.attached-file,&.attached-error{background-color:',c.bg_1,";padding:3px 5px;border:1px solid ",c.separator,';border-radius:5px;text-decoration:none;display:inline-block;}&.attached-file:before{font-family:"Font Awesome 5 Pro";content:"\f0c6  ";}',""),y={direction:(0,r.iv)("direction:",f,";",""),float:(0,r.iv)("float:",d?"right":"left",";",""),opposite_float:(0,r.iv)("float:",d?"left":"right",";",""),opposite_text_align:(0,r.iv)("text-align:",d?"left":"right",";",""),side:d?"right":"left",opposite_side:d?"left":"right",circled_text:{name:"1t9h3hr",styles:"display:inline-block;min-width:1em;min-height:1em;line-height:1em;padding:0.2em 0.4em;text-align:center;border-radius:50%"},ellipsis:{name:"sqm42b",styles:"text-overflow:ellipsis;white-space:nowrap;overflow:hidden"},near:function(e){return(0,r.iv)(m,":",e,";","")},far:function(e){return(0,r.iv)(g,":",e,";","")},margin_near:function(e){return(0,r.iv)("margin-",m,":",e,";","")},margin_far:function(e){return(0,r.iv)("margin-",g,":",e,";","")},padding_near:function(e){return(0,r.iv)("padding-",m,":",e,";","")},padding_far:function(e){return(0,r.iv)("padding-",g,":",e,";","")},shadow_none:{name:"1t90u8d",styles:"box-shadow:none"},shadow_light:(0,r.iv)("box-shadow:0 0 3px rgba(",u?"255, 255, 255, .7":"0, 0, 0, .1",");",""),shadow_strong:(0,r.iv)("box-shadow:0 2px 4px rgba(",u?"255, 255, 255, .3":"0, 0, 0, .1",");",""),border_near:function(e){return(0,r.iv)("border-",m,":",e,";","")},border_far:function(e){return(0,r.iv)("border-",g,":",e,";","")},font_reset:{name:"1ec65v1",styles:"font-weight:normal;font-size:1rem"},flex_grow:{name:"1ff36h2",styles:"flex-grow:1"},full_width:{name:"wqxcwz",styles:"margin-left:auto;margin-right:auto;width:calc(100% - 40px)"},flex_space_evenly:{name:"1jq9lex",styles:"justify-content:space-between;&:before,&:after{content:'';}"},ellipsis_lines:function(e){return(0,r.iv)("display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:",e,";overflow:hidden;word-break:break-word;","")},editor_directions:{name:"ohez9p",styles:".dir-ltr{direction:ltr;}.dir-rtl{direction:rtl;}"},widget_title:(0,r.iv)("color:",c.text_main,";font-weight:bold;font-size:1.4rem;",""),flex_center:{name:"1vcob1d",styles:"display:flex;justify-content:center;align-items:center"},drop_button:(0,r.iv)("border-style:dashed;border-color:",c.border,";color:",c.text_sec,";cursor:pointer;",""),link:b,content_type_style:(0,r.iv)("color:",c.dominant_white,";font-weight:600;background-color:",c.yellow,";padding:1px 7px;border-radius:3px;",""),ws_type_style:(0,r.iv)("color:",c.dominant_white,";font-weight:600;background-color:#FA337C;padding:1px 7px;border-radius:3px;&._required_course{background-color:",c.dominant_orange,";}",""),dropzone:(0,r.iv)("display:none;border:3px dashed ",c.border,";body.body_drag &{color:",c.text_main,";background:rgba(255, 255, 255, .7);justify-content:center;z-index:1;display:flex;align-items:center;font-size:40px;}",""),iframeVideoSize:{name:"2m2gv7",styles:"position:relative;height:0;width:100%;padding-top:56.25%;>iframe,>.MediaPlayer{position:absolute!important;top:0;left:0;width:100%;height:100%;}"},fullSizeContainer:(0,r.iv)("position:fixed;background:white;padding:10px 5px;top:",h.TOP_BAR_HEIGHT,"px;left:",h.SIDE_BAR_WIDTH,"px;right:0;bottom:0;",""),descriptionShowMore:(0,r.iv)("margin-top:2px;font-size:.9em;height:4em;overflow:hidden;position:relative;color:",c.text_sec,';flex-grow:1;&:after{content:"";position:absolute;background-image:linear-gradient(to bottom, transparent, ',c.bg_cont,");height:2em;bottom:0;left:0;right:0;}","")};y.wysiwyg=(0,r.iv)("a,span.attached-error{",b,";}li[dir=rtl]{text-align:right;}li[dir=ltr]{text-align:left;}img{max-width:100%;height:auto;&.emojione{height:1.5em;vertical-align:text-bottom;}}iframe{border:0;}.video_cont{",y.iframeVideoSize,";}",""),y.content_width=(0,r.iv)("max-width:",h.PAGE_CONTENT_MAX_WIDTH,"px;min-width:",h.CONTAINER_MIN_WIDTH,"px;",y.full_width,";",""),y.alert_count=(0,r.iv)("display:inline-block;background-color:#E64D40;color:white;font-weight:bold;",y.circled_text,";",""),y.page_position=(0,r.iv)("margin-top:",h.TOP_BAR_HEIGHT,"px;",y.margin_near(h.SIDE_BAR_WIDTH+"px"),";",p.mobile,"{",y.margin_near(0),";}",""),y.list=(0,r.iv)(">*+*{margin-top:",h.LIST_MARGIN,"px;}",""),y.list_condensed=(0,r.iv)(">*+*{margin-top:",h.LIST_MARGIN_CONDENSED,"px;}","");var v,_,w,O,k,x,S,j,C,P,Z,B,T,E={colors:c,classes:y,styles:{progressBG:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return void 0!==e?{backgroundImage:"linear-gradient(90deg, silver, silver ".concat(e,"%, white ").concat(e,"%, white)")}:t}},mQuery:p,z:{report_headers:4,widget_bar:50,management_menu:1e3,top_bar:1001,side_bar:1002,dialog_overlay:1500,table_header:1999,context_menu:2e3,file_viewer:2500,notice:3e3,inactivity_alert:3500},consts:h,near:m,far:g,isRTL:d,func:{color:function(e){return c[e]||e},id2color:function(e){return(0,o.B5)(e)?c.set[(e-1)%c.set.length]:c.grey},imgUrl:function(e,t){if(!e)return"";var n=l(e.split(":"),2),r=n[0],o=n[1];if(!o)return e;var i="";switch(r){case"http":case"https":return e;case"img":i="GetFile?type=img&dom="+(t||Blsm.user.domain_id)+"&name="+o;break;case"media":i="GetFile?type=media&dom="+(t||Blsm.user.domain_id)+"&id="+o;break;case"file":i="GetFile?file_id="+o;break;case"gal":i="images/gallery/"+o;break;default:return!1}return Blsm.prm.Mainref+i}},theme:(_=(null===(v=Blsm.prm)||void 0===v?void 0:v.theme)||{},w=_.files,O=void 0===w?{}:w,k=_.theme_home,x=void 0===k?"":k,S=_.color_palette,j=void 0===S?{}:S,C=_.path,P=Blsm.prm||{},Z=P.Mainref,B=P.ViewRef,T={logo_small:O.f_v4_logo_small?"".concat(C).concat(O.f_v4_logo_small):Z+"images/v4/blossom_logo_small.png",logo_full:O.f_v4_logo_full?"".concat(C).concat(O.f_v4_logo_full):Z+"images/v4/blossom_logo_dark.png",login_bg:O.f_login_bg_back?"".concat(C).concat(O.f_login_bg_back):Z+B+"images/login_bg_purple.jpg",login_logo:O.f_v4_logo_full?"".concat(C).concat(O.f_v4_logo_full):Z+"images/logo/logo_horz.svg",homePage:x&&!x.includes("://")?"http://"+x:x,mm_bg:j.mm_bg||c.bg_main,mm_fg:j.mm_fg||c.text_sec,mm_fg_active:j.mm_fg_active||c.blossom,color_1:j.color_1||c.purple,ln_bg:j.ln_bg||c.blossom,ln_fg:j.ln_fg||"#fff"},!u&&j.color_2&&(c.dominant_main=j.color_2,c.dominant_main_shade=(0,a.HO)(c.dominant_main,.95)),T),darkMode:u}},70081:function(e,t,n){"use strict";n.d(t,{IV:function(){return v},OR:function(){return d},Ry:function(){return b},Xf:function(){return p},aZ:function(){return w},iP:function(){return u},qD:function(){return m},t$:function(){return f},tm:function(){return O}});var r=n(87363),o=n(27821);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){return(l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s="object"===("undefined"==typeof window?"undefined":l(window)),c=function(){return{width:s?window.innerWidth:void 0,height:s?window.innerHeight:void 0}},u=function(){var e=i((0,r.useState)(c),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){if(!s)return!1;var e=function(){return n(c())};return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),t},p=function(e,t,n){var o=(0,r.useRef)(null);return(0,r.useEffect)((function(){return function(){return clearTimeout(o.current)}}),[]),{events:{onMouseEnter:(0,r.useCallback)((function(){clearTimeout(o.current),o.current=setTimeout(t,e)}),[t,e]),onMouseLeave:(0,r.useCallback)((function(){clearTimeout(o.current),n()}),[n])},cancelEvent:function(){return clearTimeout(o.current)}}},d=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:window,o=(0,r.useRef)();(0,r.useEffect)((function(){o.current=t}),[t]),(0,r.useEffect)((function(){var t=function(e){return o.current(e)};return n.addEventListener(e,t),function(){return n.removeEventListener(e,t)}}),[e,n])},f=function(e,t){(0,r.useEffect)((function(){if(t){var n=function(n){var r;return e.current&&!e.current.contains(n.target)&&!e.current.contains(null===(r=$(n.target).closest(".BodyPortal")[0])||void 0===r?void 0:r.__parentEl)&&t(n)};return document.addEventListener("mousedown",n),document.addEventListener("touchstart",n),function(){document.removeEventListener("mousedown",n),document.removeEventListener("touchstart",n)}}}),[e,t])},m=function(e){var t=i((0,r.useState)({}),2),n=t[0],o=t[1],a=i((0,r.useState)({by:""}),2),l=a[0],s=a[1],c=function(t){var n=e?e.sort:l,r=n.by,o=n.desc,i=t===r?{by:r,desc:!o}:{by:t,desc:!1};e?e.sort=i:s(i)};return e?{filtersVals:e.filter,setFilterVals:function(t){return e.filter=t},sort:e.sort,setSort:c}:{filtersVals:n,setFilterVals:function(e){return o(e)},sort:l,setSort:c}},g=(0,o.observable)([]);(0,o.observe)(g,(function(){document.body.style.overflow=g.length?"hidden":""}));var h=0,b=function(){(0,r.useEffect)((function(){var e=++h;return g.push(e),function(){g.remove(e)}}),[])},y=function(){var e;return(null===(e=history.state)||void 0===e?void 0:e.cobStack)||""},v=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=(0,r.useRef)(!1),i=(0,r.useRef)(t+Math.random().toString()).current;(0,r.useEffect)((function(){if(!n)return history.pushState({cobStack:y()+","+i},""),function(){y().includes(i)&&(o.current=!0,history.back())}}),[]),d("popstate",(function(){n||!e||y().includes(i)||e(o.current?void 0:function(){return history.pushState({cobStack:y()+","+i},"")}),o.current=!1}))},_=document.body;window.addEventListener("dragover",(function(e){return e.preventDefault(),_.classList.add("body_drag"),e.dataTransfer.dropEffect="none"})),window.addEventListener("dragleave",(function(e){return e.preventDefault(),!e.clientX&&!e.clientY&&_.classList.remove("body_drag")})),window.addEventListener("drop",(function(e){return e.preventDefault(),_.classList.remove("body_drag")}));var w=function(e){return{dndEvents:{onDragOver:function(e){return e.preventDefault(),e.stopPropagation(),e.dataTransfer.dropEffect="move"},onDrop:function(t){return t.preventDefault(),e(t.dataTransfer.files)}}}},O=function(){var e=(0,r.useRef)(!0);return(0,r.useEffect)((function(){return function(){e.current=!1}}),[]),e}},60409:function(e,t,n){"use strict";n.d(t,{X:function(){return o},p:function(){return r}});var r=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4];switch(null==e?void 0:e.toLowerCase()){case"group":return 1==t?n?lng("courses"):lng("course"):n?lng("groups"):lng("group");case"course":return r?o?lng("optional course"):lng("required course"):n?lng("courses"):lng("course");case"role":return n?lng("roles"):lng("role");case"ou":return n?lng("org units"):lng("org' unit");case"course_template":return n?lng("course templates"):lng("course template");case"course_external":return n?lng("external events"):lng("external event");case"qualification":return n?lng("qualifications"):lng("qualification");case"subset":return n?lng("subsets"):lng("subset");case"job":return n?lng("jobs"):lng("job");case"recruitment":return n?lng("recruitments"):lng("recruitment");case"workplan":return n?lng("workplans"):lng("workplan");case"campus":return n?lng("campuses"):lng("campus");case"patientcase":return n?lng("patient cases"):lng("patient case");case"resourcebundle":return n?lng("resource bundles"):lng("resource bundle");case"subprofession":return n?lng("sub professions"):lng("sub profession")}return""},o=function(e){switch(e){case"user_avatar":return lng("avatar");case"full_name":return lng("name");case"user_name":return lng("login name",{phrase:!0});case"user_first_name":return lng("first name");case"user_last_name":return lng("last name");case"user_birthdate":return lng("birthdate");case"user_email":return lng("email");case"org_unit_name":return lng("org' unit");case"user_identity_num":return lng("identity number",{phrase:!0});case"employee_id":return lng("employee id",{phrase:!0});case"user_company":return lng("company");case"user_department":return lng("department");case"user_job_title":return lng("job title");case"user_business_phone":return lng("business phone");case"user_home_phone":return lng("home phone");case"user_mobile_phone":return lng("mobile phone");case"user_fax_number":return lng("fax");case"user_address":return lng("address");case"user_city":return lng("city");case"user_state":return lng("state");case"user_postal_code":return lng("postal code");case"user_country":return lng("country");case"user_gender":return lng("gender");case"employment_date":return lng("employment date");case"user_nt":return lng("user NT");case"status_id":case"status_name":return lng("status");case"classification_id":return lng("classification");case"user_joined":return lng("creation date");case"user_lastvisit":return lng("last visit");case"user_type":return lng("type");case"user_enabled":return lng("enabled");case"user_locked":return lng("locked");case"user_expiration":return lng("expiration date");case"user_pretend":return lng("pretend");case"external_id":return lng("external id");case"user_ip":return lng("IP address");case"user_extra_time":return lng("extra time");case"user_language":return lng("language");case"user_date_format":return lng("date format");case"user_timezone":return lng("time zone");case"user_password":return lng("current password");case"user_newpassword":return lng("new password");case"user_newpassword2":return lng("confirm password");case"user_temp_password":return lng("set as temporary password");case"notification_settings[discussion]":return lng("notify about discussions");case"notification_settings[message]":return lng("notify about private message");case"notification_settings[comment]":return lng("notify about comments");case"notification_settings[push]":return lng("enable push notifications");case"user_no_notifications":return lng("notify by email");case"mail_notification_span":return lng("send email every");case"cv_file":case"cv_file_html":return lng("CV file");case"domain_name":return lng("domain");case"user_ou":return lng("org' unit");case"user_about":return lng("about")}return e}},32808:function(e,t,n){"use strict";n.d(t,{BX:function(){return r},DW:function(){return a},Or:function(){return i},r5:function(){return o}});var r=function(e){return e.indexOf(".")>=0?e.slice(e.lastIndexOf(".")+1).toLowerCase():""},o=function(e,t){var n=t&&Object.entries(Blsm.prm.mimetypes).find((function(e){return new RegExp(e[1]).test(t)}));if(n)return n[0];var o=r(e);return(n=o&&Object.entries(Blsm.prm.extensions).find((function(e){return e[1].indexOf(o)>=0})))?n[0]:void 0},i=function(e){return"img"===o(e)},a=function(e,t){if(!e)return"icon-vendor_file";t&&(e=r(e)),e=e.toLowerCase();var n={image:Blsm.prm.extensions.img,audio:Blsm.prm.extensions.aud,text:/txt$/,ppt:Blsm.prm.extensions.slides,video:Blsm.prm.extensions.vid.concat(["newrow_rec"]),activity:/task$|activity/,doc:/(docx?|rtf)$/,excel:/xlsx?$/,html:/html?$/,file:/(manual|file)$/,tincan:/tincan$/,scorm:/scorm/,general:/(certification|lesson)$/,assignment:0,blog:0,dictionary:0,courseware:0,evaluation:0,external:0,faq:0,final:0,form:0,glossary:0,master:0,meeting:0,pdf:0,survey:0,swf:0,test:0,checklist:0,wiki:0};for(var o in n){var i=n[o];if(o===e||i&&(_.isArray(i)?i.includes(e):i.test(e)))return"vendor_"+o}return console.warn("unknown extension for icon: "+e),"vendor_file"}},68018:function(e,t,n){"use strict";n.d(t,{F:function(){return u},k:function(){return p}});var r=n(70917),o=n(48207),i=n(15560),a=n(539),l=n(23838),s=n(35944),c=(0,r.iv)("display:flex;align-items:center;justify-content:center;",o.gx,";",""),u=function(){return(0,s.tZ)("div",{css:c,children:(0,s.tZ)(a.$,{color:"#FFF"})})},p=(0,i.observer)((function(){return(0,l.vm)().showGlobalLoader?(0,s.tZ)(u,{}):null}))},29523:function(e,t,n){"use strict";n.d(t,{Rh:function(){return l},j4:function(){return a},rt:function(){return i}});var r=n(98e3),o=n(16920),i=function(e){Blsm.cookies.set("language",e,{path:Blsm.prm.relative_path,expires:30}),(0,r.SC)("ajax/requests.php",{data:{req:"ChangeLanguage",lng:e}},(function(){return location.reload(!0)}))},a=function(){return o.g.isRTL?"‎":""},l=function(){return o.g.isRTL?"‏":""}},88989:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{X:function(){return i}});var i={set:function(e,t){try{if(void 0===t)return window.localStorage.removeItem(e);window.localStorage.setItem(e,JSON.stringify(t))}catch(e){console.error("Storage error: "+e.message,"store cleared!"),window.localStorage.clear()}},remove:function(e){return i.set(e)},get:function(e){var t=window.localStorage.getItem(e);try{return JSON.parse(t)}catch(e){return t}},push:function(e,t,n,o){var i=this.get(e)||[];if(i.push(t),o&&t.key){var a=new Map(i.map((function(e){return[e.key,e]})));i=r(a.values())}n&&i.length>n&&(i=i.slice(i.length-n)),this.set(e,i)},getKeys:function(){for(var e=[],t=0;t<window.localStorage.length;t++)e.push(window.localStorage.key(t));return e}}},57882:function(e,t,n){"use strict";var r=n(27821),o=n(71134),i=function(e,t,n){console.error("propType validation failed","expected",e,"actual",t,n);var r=n.propValue,o=n.location,i=n.propFullName,a=n.key,l=n.componentName;return new Error("Invalid prop `".concat(o&&i?i:a,"` passed to `").concat(l,"`. expected: ").concat(e,". actual: ").concat(JSON.stringify(r[a])))},a={numericValue:function(e,t,n,r,o){if(e[t]&&e[t]!=parseFloat(e[t]))return i("numeric string",e[t],{key:t,componentName:n,location:r,propFullName:o,propValue:e})},cssSize:function(e,t,n,r,o){if(e[t]&&!/^(\d+|\d*\.\d+)(px|%|vw|vh|rem|em)$/.test(e[t])&&!/^(calc|min|max|minmax)\(.+\)/.test(e[t]))return i("css size string",e[t],{key:t,componentName:n,location:r,propFullName:o,propValue:e})},cssColor:function(e,t,n,r,o){if(e[t]&&!/^#[\da-f]{3,4}|#([\da-f]{6,8})|(rgb|hsl)a?\(([.\d]+%?[,\s]*){3,4}\)$/i.test(e[t]))return i("css color string",e[t],{key:t,componentName:n,location:r,propFullName:o,propValue:e})},values:function(e){return function(t,n,r,o,a){if(t[n]&&!e.includes(t[n]))return i(e.join(", "),t[n],{key:n,componentName:r,location:o,propFullName:a,propValue:t})}},arrayLike:function(e,t,n,r,a){if(e[t]&&!(0,o.zG)(e[t]))return i("collection",e[t],{key:t,componentName:n,location:r,propFullName:a,propValue:e})},date:function(e,t,n,r,o){if(e[t]&&!moment.isMoment(e[t]))return i("moment object",e[t],{key:t,componentName:n,location:r,propFullName:o,propValue:e})},observableObject:function(e,t,n,o,a){if(e[t]&&!(0,r.isObservableObject)(e[t]))return i("observable object",e[t],{key:t,componentName:n,location:o,propFullName:a,propValue:e})},valLabelPairs:function(e,t,n,r,o){var a=e[t];if(void 0!==a){if(!Array.isArray(a))return i("array (valLabelPairs)",e[t],{key:t,componentName:n,location:r,propFullName:o,propValue:e});var l=function(e){return void 0!==e.val&&void 0!==e.label&&"string"==typeof e.label},s={};for(var c in a){var u=a[c];if(u){var p=u.options,d=u.optgroup;if(!p&&d)return i("optgroup ".concat(d," has no options at ").concat(c),u,{row:u,i:c,key:t,componentName:n,location:r,propFullName:o});if(p&&!d&&!u.val)return i("options without optgroup at ".concat(c),u,{row:u,i:c,key:t,componentName:n,location:r,propFullName:o});if(!u.onClick&&!u.val&&!d){if(!l(u))return i("not object of shape {val,label} at ".concat(c),u,{row:u,i:c,key:t,componentName:n,location:r,propFullName:o});if(s[u.val])return i("duplicated val at ".concat(c),u.val,{row:u,i:c,key:t,componentName:n,location:r,propFullName:o});s[u.val]=1}}}}}},l=function(e){a[e].isRequired=function(t,n,r,o,i){return null===t[n]||void 0===t[n]?new Error("The prop `".concat(o&&i?i:n,"` is marked as required in `").concat(r,"`, but its value is `").concat(JSON.stringify(t[n]),"`")):a[e].apply(this,arguments)}};for(var s in a)l(s)},71134:function(e,t,n){"use strict";n.d(t,{$e:function(){return pe},$t:function(){return R},AK:function(){return _},B5:function(){return k},DK:function(){return xe},DM:function(){return ce},Ds:function(){return se},Du:function(){return S},Dw:function(){return V},F5:function(){return Y},Fq:function(){return le},HD:function(){return ve},Ju:function(){return Q},KX:function(){return ae},Kn:function(){return J},Lv:function(){return D},Mo:function(){return Te},NM:function(){return x},Nw:function(){return y},OM:function(){return we},Oz:function(){return fe},P$:function(){return ie},PG:function(){return Ne},R4:function(){return me},Rh:function(){return Fe},Rn:function(){return _e},SZ:function(){return w},Tj:function(){return ue},Tz:function(){return re},Um:function(){return Ce},VD:function(){return Me},Wh:function(){return A},Wl:function(){return z},X0:function(){return ke},Y3:function(){return Re},aQ:function(){return B},bQ:function(){return he},c7:function(){return G},cT:function(){return Pe},dV:function(){return C},e9:function(){return be},ei:function(){return L},en:function(){return Be},ey:function(){return Z},f_:function(){return oe},g4:function(){return M},jj:function(){return O},kE:function(){return ye},lo:function(){return ze},mE:function(){return K},nu:function(){return N},o0:function(){return F},oH:function(){return te},p:function(){return Ae},pH:function(){return Ie},pR:function(){return Ze},qL:function(){return ge},rj:function(){return ne},s$:function(){return W},s2:function(){return j},s9:function(){return U},sR:function(){return De},tq:function(){return de},v2:function(){return h},v7:function(){return H},vC:function(){return Oe},w1:function(){return Se},w6:function(){return T},wd:function(){return X},wq:function(){return je},x1:function(){return Ee},xb:function(){return ee},yV:function(){return P},zG:function(){return b},zO:function(){return q}});var r=n(87363),o=n(22334),i=n(27821),a=n(35944);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){c(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=f(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||f(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||f(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(e,t){if(e){if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?m(e,t):void 0}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g(e){return(g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var h=function(e){return e?e.full_name||(e.user_first_name||e.first_name||"")+" "+(e.user_last_name||e.last_name||""):""},b=function(e){return Array.isArray(e)||(0,i.isObservableArray)(e)},y=function(e){return e instanceof Map||(0,i.isObservableMap)(e)},v={}.hasOwnProperty,_=function e(){for(var t=[],n=0;n<arguments.length;n++){var r=arguments[n];if(r){var o=g(r);if("string"===o||"number"===o)t.push(r);else if(Array.isArray(r)&&r.length){var i=e.apply(null,r);i&&t.push(i)}else if("object"===o)for(var a in r)v.call(r,a)&&r[a]&&t.push(a)}}return t.join(" ")||void 0},w=function e(t,n){if(null===t||"object"!==g(t))return t;t instanceof Map&&(t=Object.fromEntries(t));var r=Object.keys(t).sort().map((function(n){return n+":"+e(t[n],!0)})).join(",");return n?"{"+r+"}":r},O=function(e){return d(new Set(e))},k=function(e){return"object"!==g(e)&&parseInt(e)==e&&e>0&&e},x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return Math.round(e*Math.pow(10,t))/Math.pow(10,t)},S=function(e){return e?(e.focus(),e.selectionStart&&(e.selectionStart=e.value.length),e.selectionEnd&&(e.selectionEnd=e.value.length),e):e},j=86400,C=3600,P=864e5,Z=function(e,t){var n=Object.assign({date:!0,time:!0,year:!0,relative:!1},t);return(0,o.GG)(e,n)},B=function(e,t,n){return x(t>0?e/t*100:0,n||0)},T=function(e){return d(Array(e).keys())},E={"&":"%26","/":"%2F","=":"%3D"," ":"%20","%":"%25","+":"%2b"},I=function(e){return"string"==typeof e?e.replace(/([&=/ %+])/g,(function(e,t){return E[t]})):e},A=function e(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return t?Object.entries(t).filter((function(e){return void 0!==e[1]&&null!==e[1]})).map((function(t){var i=p(t,2),a=i[0],l=i[1];a=r?r+"["+a+"]":a,o&&b(l)&&(l=l.join("_"));var s=n?I:encodeURIComponent;return null!==l&&"object"===g(l)?e(l,n,a):"".concat(s(a),"=").concat(s(l))})).join("&"):""},D=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:location.search.substring(1);return $.deparam(e)},R=function(e){if(!e)return"";if(ve(e))return e;if(!window.URLSearchParams)return A(e);for(var t=new URLSearchParams,n=0,r=Object.entries(e);n<r.length;n++){var o=p(r[n],2),i=o[0],a=o[1];a&&t.append(i,a)}return t.toString()},N=function(e){try{e=decodeURIComponent(e)}catch(e){}return e},z=function(e){return"function"==typeof e},M=function(e,t,n){return z(e)?e.apply(t||null,n||[]):e},F=function(e){return(e||"")+Date.now().toString()},q=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=t,r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",o=0;o<e;o++)n+=r.charAt(Math.floor(Math.random()*r.length));return n},X=function e(t){var n=[];if(void 0===t)return[];if(t instanceof Map){var r,o=u(t);try{for(o.s();!(r=o.n()).done;){var i=p(r.value,2),a=i[0],l=i[1];n.push({val:a,label:l})}}catch(e){o.e(e)}finally{o.f()}}else if(Array.isArray(t)){var s,c=u(t.entries());try{for(c.s();!(s=c.n()).done;){var d=p(s.value,2),f=d[0],m=d[1];n.push(Array.isArray(m)?{val:m[0],label:m[1]}:"object"===g(m)?m:{val:f,label:m})}}catch(e){c.e(e)}finally{c.f()}}else for(var h=0,b=Object.entries(t);h<b.length;h++){var y=p(b[h],2),v=y[0],_=y[1],w=(null==_?void 0:_.label)||_;n.push("object"===g(w)?{label:v,optgroup:!0,options:e(_)}:{val:v,label:w})}return n};function L(e,t){var n={};return t.forEach((function(t){t in e&&(n[t]=e[t])})),n}function U(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"…";if(!e)return"";var r=$("<div></div>").append(e.replace(/<\/div>/g,"</div> ")).find("br").replaceWith(" ").end().text().trim();return t&&r.length>t?r.truncate(t,n):r}var V=function(e){return!(null==e||""===e||Array.isArray(e)&&0===e.length||J(e)&&0===Object.keys(e).length)},H=function(e,t){return t=t||V,Object.entries(e).reduce((function(e,n){var r=p(n,2),o=r[0],i=r[1];return t(i,o)?s(s({},e),{},c({},o,i)):e}),{})},G=function(){return parseInt(Date.now()/1e3)},J=function(e){return $.isPlainObject(e)},W=function(e,t){if(t&&!e)return!0;return/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(e).toLowerCase())},K=function(e,t){var n=t.min,r=t.max,o=t.integer;if(""===e||!ce(e))return!0;if(!(o?/^\d*$/:/^\d+\.?\d*$/).test(e))return{error:o?lng("please type a whole number").caps():lng("please type a number").caps()};var i=o?parseInt(e):parseFloat(e);return ce(n)&&ce(r)&&(i<n||i>r)?{error:lng("number should be between %s and %s",n,r).caps()}:ce(n)&&i<n?{error:lng("number should be %s or higher",n).caps()}:!(ce(r)&&i>r)||{error:lng("number should be %s or lower",r).caps()}},Y=function e(t,n){if("#text"===t.nodeName)return t.textContent;for(var r=[],o=0;o<t.childNodes.length;o++){var i,a=t.childNodes[o],l=!1,s=u(n.filterClass);try{for(s.s();!(i=s.n()).done;){var c,p=i.value;null!==(c=a.className)&&void 0!==c&&c.split(" ").includes(p)&&(l=!0)}}catch(e){s.e(e)}finally{s.f()}if(!l){var d=e(a,n);d&&r.push(d)}}return r.join("")},Q=function(e){document.title=Blsm.prm.branding+(e?" - "+e.caps(!1):"")},ee=function(e){return!e||b(e)&&0===e.length||y(e)&&0===e.size||((t=e)instanceof Set||(0,i.isObservableSet)(t))&&0===e.size||function(e){return J(e)||(0,i.isObservableObject)(e)}(e)&&0===Object.keys((0,i.isObservableObject)(e)?(0,i.toJS)(e):e).length;var t},te=function e(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;if(!0===n(t))return t;var a=Array.isArray(t)||J(t)?Object.values(t):(0,i.isObservableArray)(t)||(0,i.isObservableObject)(t)?(0,i.values)(t):void 0;if(a){var l,s=u(a);try{for(s.s();!(l=s.n()).done;){var c=l.value;if(!ce(o)||!1!==o(c)){var p=e(c,n,r,o);if(void 0!==p)return!r||Array.isArray(c)||(0,i.isObservableArray)(c)||r.unshift(c),p}}}catch(e){s.e(e)}finally{s.f()}}},ne=function(e){if("string"!=typeof e)return e;var t=e.split("\n").reduce((function(e,t){return e.length&&e.push((0,a.tZ)("br",{})),e.push(t),e}),[]);return r.createElement.apply(void 0,[r.Fragment,null].concat(d(t)))},re=function(e){return parseInt(e)===Blsm.user.id},oe=function(e){return e.forEach((function(e,t){return e._key=t+"_"+Math.random()}))},ie=function(e){return"1"===e||1===e},ae=function(e,t){for(var n=[],r=0,o=e.length;r<o;r+=t)n.push(e.slice(r,r+t));return n},le=function(){return/android|iPad|iPhone/i.test(navigator.userAgent)},se=function(e,t){var n;return function(){var r=this,o=arguments;clearTimeout(n),n=setTimeout((function(){e.apply(r,o)}),t)}},ce=function(e){return null!=e},ue=function(e){return Object.fromEntries(Object.entries(e).map((function(e){return[e[0].replace(/(-)([a-z])/g,(function(e){return e[1].toUpperCase()})),e[1]]})))},pe=function(e){return Object.entries(H(e)).reduce((function(e,t){var n=p(t,2),r=n[0],o=n[1];return"".concat(e).concat(r,":").concat(o,";")}),"")},de=function(){return window.innerWidth<=1023},fe=function(){return window.innerWidth<=574},me=function(){return-1<navigator.userAgent.indexOf(" BlsmAppReact")},ge=function(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+Blsm.prm.Mainref},he=function(e){if(0==e)return"0B";var t=Math.floor(Math.log(e)/Math.log(1024));return _e(e/Math.pow(1024,t))+["B","KB","MB","GB","TB","PB"][t]},be=function(e,t,n){n=Object.assign({add_sign:!0,verbose:!1,percent:!0,precision:0},n),isNaN(parseFloat(e))&&(e=0);var r=0==t?0:100*e/t;return r=_e(r,n.precision,!!n.add_sign&&"%"),n.verbose&&(r=e+"/"+t+(n.percent?" ("+r+")":"")),r},ye=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},ve=function(e){return"string"==typeof e},_e=function(e,t,n){if(!ye(e))return"-";var r=Math.pow(10,void 0===t?2:t),o=Math.round(e*r)/r;return n&&(o+=n),"."===Blsm.lang.dec_point?o:o.toString().replace(".",Blsm.lang.dec_point)},we=function(){return Blsm.InitialData.default_currency||{symbol:"",rate:1}},Oe=function(e){return"".concat(we().symbol).concat(_e(we().rate*e,2))},ke=function(e){return/^field_\d+$/.test(e)},xe=function(e){return"field_".concat(e)},Se=function(){return window.navigator.userAgent.includes("Trident")},je=function(e){var t=document.createElement("div");return e&&(t.id=e),document.body.appendChild(t),t},Ce=function(e){return window.addEventListener("DOMContentLoaded",e)},Pe=function(e,t){return e.filter((function(e,n,r){return r.findIndex((function(n){return e[t]===n[t]}))===n}))},Ze=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.typingDelay,r=void 0===n?300:n,o=t.hashFn,i={},a=null;return function(t,n){var l=o?o(t):w(t);if(i[l])return n(i[l]);clearTimeout(a),a=setTimeout((function(){Object.keys(i).length>100&&(i={}),e(t,(function(e){return n(i[l]=e)}))}),"string"==typeof t||"term"in t?r:0)}},Be=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";e.includes("://")||(e=t+"//"+e);var n=document.createElement("a");return n.href=e,n},Te=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&JSON.parse(e)||t},Ee=function(e,t){return 0===e.localeCompare(t,void 0,{sensitivity:"accent"})};Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(Element.prototype.matches.call(t,e))return t;t=t.parentElement||t.parentNode}while(null!==t&&1===t.nodeType);return null});var Ie=function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);var r,o,i,a=t.width,l=t.height,s={x:[],y:[]},c=n.getImageData(0,0,a,l);for(o=0;o<l;o++)for(r=0;r<a;r++)i=4*(o*a+r),c.data[i+3]>0&&(s.x.push(r),s.y.push(o));s.x.sort((function(e,t){return e-t})),s.y.sort((function(e,t){return e-t}));var u=s.x.length-1;a=s.x[u]-s.x[0],l=s.y[u]-s.y[0];var p=n.getImageData(s.x[0],s.y[0],a,l);return t.width=a,t.height=l,n.putImageData(p,0,0),t.toDataURL()},Ae=function(){return"#"+Math.random().toString(16).slice(-6)},De=function(e){var t=Be(e),n=t.hostname,r=t.protocol,o=t.pathname,i=t.search;if("http:"===r||"https:"===r){n=n.replace(/^www\./,""),o=o.startsWith("/")?o.substring(1):o;var a=D(i.substring(1));if("youtube.com"===n&&a.v)return"https://www.youtube.com/embed/"+a.v+(a.t?"?start="+a.t:"");if("youtube-nocookie.com"===n&&a.v)return"https://www.youtube-nocookie.com/embed/"+a.v+(a.t?"?start="+a.t:"");if("youtu.be"===n&&o.length>1)return"https://www.youtube-nocookie.com/embed/"+o+(a.t?"?start="+a.t:"");if("vimeo.com"===n&&o.length>1){var l=p(o.split("/"),2),s=l[0],c=l[1];return"https://player.vimeo.com/video/".concat(s).concat(c?"?h=".concat(c):"")}if("ted.com"===n&&o.match("^talks/.+"))return"https://embed.ted.com/talks/lang/".concat(a.language||"en","/").concat(o.split("/")[1])}return!1},Re=function(e){return setTimeout(e,0)},Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:",";return""===e?t:ve(e)?e.split(n):b(e)?e:t},ze=function(e){return e>=1e3?Math.floor(e/1e3)+"K":e},Me=function(){return location.hash.trim().replace(/^#/,"")},Fe=document.body.requestFullscreen?"requestFullscreen":!!document.body.webkitRequestFullscreen&&"webkitRequestFullscreen"},79990:function(e,t,n){"use strict";n.d(t,{An:function(){return X},Kv:function(){return q},RO:function(){return F},a9:function(){return R},gm:function(){return D},sG:function(){return M},wf:function(){return z}});var r=n(70917),o=n(87363),i=n(71134),a=n(40236),l=n(23838),s=n(539),c=n(15560),u=n(24210),p=n(9431),d=n(68567),f=n(95405),m=n(41823),g=n(16920),h=n(66975),b=n(40441),y=n(21810),v=n(87183),_=n(86344),w=n(35944);function O(e){return(O="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var k=["onClick","href","text","widgetStore"],x=["message","icon","children","widgetStore"],S=["delayed_data","allow_hidden_no_data","allow_limit","allow_title","allow_double_box","allow_self_style","allow_self_style_only_title","allow_bgimage","allow_fgc","has_show_more","using_strips","widgetStore"];function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=B(e);if(t){var o=B(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==O(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function B(e){return(B=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var D=(0,c.observer)((function(e){var t,n,o=e.onClick,a=e.href,l=e.text,s=void 0===l?lng("show more"):l,c=e.widgetStore,u=A(e,k);if(null!==(t=c.options)&&void 0!==t&&t.hide_show_more)return null;var p=(0,i.tq)()?5:10;if(null!==(n=c.data)&&void 0!==n&&n.limit_reached){var d=parseInt((null==c?void 0:c.force_limit)||(null==c?void 0:c.options.limit));d&&(d<13||!o&&!a)&&(d+=p,o=function(){c.force_limit=d,c.refreshFromServer()},a=null,s=lng("more")+"...")}if(!o&&!a)return null;var f=(0,r.iv)("color:",g.g.colors.link_blue,";text-align:center;display:block;margin:0 2px 12px;:hover{text-decoration:underline;}","");return(0,w.BX)(w.HY,{children:[(0,w.tZ)(y.Hr,{}),(0,w.tZ)(b.A,E(E({theme:"highlight",href:a,onClick:o},u),{},{css:f,children:s.caps()}))]})})),R=(0,c.observer)((function(e){var t,n=e.children,i=e.widgetStore,c=e.editForm,u=e.preferencesForm,m=i.loading,h=i.style,b=void 0===h?{}:h,y=i.titleLink,O=i.titleNewTab,k=void 0===O||O,x=i.widget_active,S=i.mayEdit,j=i.toggleActivation,C=i.newMenuOptions,P=i.widget_type,Z=i.title;if(null!==(t=i.options)&&void 0!==t&&t.default_title){var B=P&&v.Z[P];null!=B&&B.widgetDefaultTitle&&(Z=B.widgetDefaultTitle.caps()),i.defaultTitle&&(Z=i.defaultTitle.caps())}var T,E,I,A,D,R,N,z,M,F,q,X,L,U,V,H,G,J,W,K,$=(0,o.useContext)(p._G),Y=(0,o.useContext)(p.rN),Q=[S&&c&&{label:lng("edit"),icon:"edit",onClick:function(){return(0,l.vm)().openDialog("form",new c({widgetStore:i,onSaveSuccess:function(e){(0,l.vm)().closeDialog(),i.updateData(e)}}))}},u&&{label:lng("preferences"),icon:"settings",onClick:function(){return(0,l.vm)().openDialog("form",new u({widgetStore:i,onSaveSuccess:function(){(0,l.vm)().closeDialog()}}))}},S&&$.mayHideWidgets&&{label:x?lng("hide"):lng("show"),icon:"preview",onClick:j},S&&{label:lng("delete"),icon:"trash",onClick:function(){return(0,d.BB)(lng("are you sure you want to delete this widget?"),{onConfirm:function(){return $.deleteWidget(i)}})}},S&&{label:lng("refresh"),icon:"reload",onClick:function(){return i.refreshFromServer()}},S&&$.mayMoveToAnotherPortal&&Blsm.user.isPowerManager&&i.portal_id&&{label:lng("move to another portal").caps(),icon:"AssignOutsource",onClick:function(){return Y.moveWidget($,i)}}];return(0,w.tZ)(a.$L,{title:Z,link:y,newTab:k,size:i.isDouble?2:1,newMenuOptions:C,menuOptions:Q||void 0,css:(T=b,E=Object.assign($.parent_style,$.style),I=!x,A=$.domain_id,D=E.widgets_title_color,R=E.widgets_title_bgc,N=E.widgets_fgc,z=E.widgets_bgc,M=T.bgimage,F=T.bgoverlay,q=T.bgpos,X=T.borderless,L=T.title_color,U=void 0===L?D:L,V=T.title_bgc,H=void 0===V?R:V,G=T.fgc,J=void 0===G?N:G,W=T.bgc,K=void 0===W?z:W,(0,r.iv)(I&&"outline: rgb(92, 101, 108) dotted 3px;",";",J&&"color:".concat(J,";")," ",K&&"background-color:".concat(K,";")," ",K&&X&&"border-color:".concat(K,";")," ",!K&&X&&"background-color:transparent;border-color:transparent;"," ",M&&"background-image:url('".concat(g.g.func.imgUrl(M,A),"');background-size:cover;")," ",M&&"background-image:".concat(F?"".concat(/#000/.test((0,_.ou)(J||g.g.colors.text_main))?g.g.consts.imgdata_half_black:g.g.consts.imgdata_half_white,","):"","url('").concat(g.g.func.imgUrl(M,A),"');background-size:cover;background-position: center center;")," background-position:",q||"top center",";.widget-title[class]{",U&&"color: ".concat(U,";")," ",H&&"background-color: ".concat(H,";"),";}.widget-body[class]{",J&&"color:".concat(J,";"),";}","")),widgetId:i.widget_id,children:(0,w.tZ)(f.SV,{children:m?(0,w.tZ)(s.$,{}):n})})})),N={name:"1dvdlnn",styles:"display:flex;height:90%;justify-content:center;align-items:center;flex-direction:column;._icon{display:block;font-size:3em;}"},z=function(e){var t=e.message,n=e.icon,r=e.children,o=e.widgetStore,a=A(e,x);if(o.style.hidden_no_data&&!o.mayEdit)return null;var l=t;return!(0,i.DM)(t)&&(0,i.DM)(o.data)&&(0,i.xb)(o.data)&&(l=lng("no items")),(0,w.tZ)(R,E(E({widgetStore:o},a),{},{children:(0,w.BX)("div",{css:N,children:[n&&(0,w.tZ)(h.JO,{className:"_icon",icon:n}),l&&(0,w.tZ)("div",{children:l.caps()}),o.style.hidden_no_data&&(0,w.BX)("div",{style:{fontStyle:"italic",color:g.g.colors.grey},children:["(",lng("hide when empty"),")"]}),r]})}))},M=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(a,e);var t,n,r,o=P(a);function a(e){var t,n=e.delayed_data,r=void 0!==n&&n,l=e.allow_hidden_no_data,s=void 0!==l&&l,c=e.allow_limit,u=void 0!==c&&c,p=e.allow_title,d=void 0===p||p,f=e.allow_double_box,m=void 0===f||f,g=e.allow_self_style,h=void 0===g||g,b=e.allow_self_style_only_title,y=void 0!==b&&b,_=e.allow_bgimage,w=void 0===_||_,O=e.allow_fgc,k=void 0===O||O,x=e.has_show_more,j=void 0!==x&&x,C=e.using_strips,P=void 0!==C&&C,Z=e.widgetStore,B=A(e,S);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=o.call(this,B)).sendEmpty=!0,t.widgetStore=Z;var T=(0,i.wd)([["",lng("default").caps()],["#171625",lng("black").caps()],["#FFFFFF",lng("white").caps()],["#717171",lng("light gray").caps()]]),E=function(){return[5,10,20,30,50,100].map((function(e){return{val:e,label:lng("%s items",e)}}))},I=Z.widget_type,D=I&&v.Z[I],R=!(!D.widgetDefaultTitle&&!("defaultTitle"in D.store.prototype)),N=[];return(y||h)&&N.push({type:"select",name:"style[title_color]",label:lng("title color"),options:T,insert:d},{type:"color",alpha:!0,clear_button:!0,cls:"input_short",name:"style[title_bgc]",label:lng("title background"),insert:d}),h&&N.push({type:"select",name:"style[fgc]",label:lng("text color"),options:T,insert:k&&!P},{type:"color",alpha:!0,clear_button:!0,cls:"input_short",name:"style[bgc]",label:lng("background color")},{type:"checkbox",name:"style[translucent]",label:lng("translucent items"),insert:P},{type:"img",label:lng("background image"),title:lng("replace image"),tabs:["portal","images","gallery"],name:"style[bgimage]",removeButton:!0,insert:w},{type:"select",name:"style[bgpos]",label:lng("image position"),options:[["center top","🡻"],["right top","🡿"],["right center","🡸"],["right bottom","🡼"],["center bottom","🡹"],["left bottom","🡽"],["left center","🡺"],["left top","🡾"],["center center","▣"]],insert:w,visible:function(){return t.values.get("style[bgimage]")}},{type:"checkbox",name:"style[bgoverlay]",label:lng("background overlay"),insert:w&&!P,visible:function(){return t.values.get("style[bgimage]")}}),t._fields=[{type:"section",title:lng("display"),titleSmall:!0,fields:[{type:"text",name:"title",label:lng("title"),insert:d,disable:function(){return!!t.values.get("options[default_title]")},maxLength:200},{type:"checkbox",name:"options[default_title]",label:lng("default title"),insert:d&&R},{type:"checkbox",name:"style[hidden_no_data]",label:lng("hide when empty"),insert:s&&!r},{type:"checkbox",name:"style[double]",label:lng("double width"),insert:m},{type:"checkbox",name:"style[borderless]",label:lng("borderless")},{type:"select",name:"options[limit]",label:lng("show up to"),options:function(){return E},insert:u},{type:"checkbox",name:"options[hide_show_more]",label:lng("show more"),reversed:!0,insert:j}]},N.length>0&&{type:"section",title:lng("theme"),titleSmall:!0,fields:N}],Z.options||(Z.options={}),u&&!Z.options.limit&&(Z.options.limit=30),t}return t=a,(n=[{key:"prepareValuesForSave",value:function(e){return e}},{key:"save",value:function(e){var t=this.widgetStore,n=t.widget_id,r=t.group_id;(e=Object.assign((0,i.ei)(this.widgetStore,["widget_id","widget_type","widget_order","portal_id","widget_active"]),e)).style&&(e.style=(0,i.v7)(e.style)),e.options&&(e.options=(0,i.v7)(e.options)),e=this.prepareValuesForSave(e),this.saveToUrl("portal/widget/".concat(n||"").concat(r?"&gid=".concat(r,"&"):""),e)}}])&&j(t.prototype,n),r&&j(t,r),a}(u.I),F=function(e){var t=e.widget,n=t.widget_type,r=t.data;return console.warn("missing widget:",t),(0,w.tZ)(R,{widgetStore:t,editForm:void 0,children:r&&(r.length||Object.keys(r).length)?(0,w.tZ)(m.G,{jsonObj:r}):n})},q=function(e){var t,n=e.widget,o=e.condensed,i=e.columns;return(0,r.iv)(i>0?"\n\t\tdisplay: block; \n\t\tcolumn-count: ".concat(i,";\n\t\trow-gap: ").concat((o?g.g.consts.LIST_MARGIN_CONDENSED:g.g.consts.LIST_MARGIN)-4,"px;\n\t\tcolumn-gap: ").concat(o?g.g.consts.WIDGET_PADDING_SIDE/2:g.g.consts.WIDGET_PADDING_SIDE,"px;\n\t"):"\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t\talign-items: flex-start;\n\t"," ",null!=n&&null!==(t=n.style)&&void 0!==t&&t.borderless?"":"padding: ".concat(g.g.consts.LIST_MARGIN_CONDENSED-2,"px ").concat(g.g.consts.WIDGET_PADDING_SIDE,"px"),";>*{flex-basis:100%;align-self:baseline;break-inside:avoid;padding:2px 0;}",i>0?"> * + *":"> *","{margin-top:",(o?g.g.consts.LIST_MARGIN_CONDENSED:g.g.consts.LIST_MARGIN)-4,"px;}","")},X=function(e){var t=e.widget,n=e.condensed;return(0,r.iv)("display:flex;flex-wrap:wrap;justify-content:space-between;align-items:normal;row-gap:",n?g.g.consts.LIST_MARGIN_CONDENSED:g.g.consts.LIST_MARGIN,"px;column-gap:",n?g.g.consts.WIDGET_PADDING_SIDE/2:g.g.consts.WIDGET_PADDING_SIDE,"px;>*{flex-grow:1;flex-basis:",null!=t&&t.isDouble?20:30,"%;}",null!=t&&t.style.borderless?"":"padding: 0 ".concat(g.g.consts.WIDGET_PADDING_SIDE,"px;"),">*{margin-top:",n?g.g.consts.LIST_MARGIN_CONDENSED:g.g.consts.LIST_MARGIN,"px;}","")}},87183:function(e,t,n){"use strict";n.d(t,{Y:function(){return Ss},Z:function(){return xs}});var r=n(15560),o=n(79990),i=n(71134),a=n(16920),l=n(70917),s=n(64902),c=n(35944);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return(f=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function m(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return g(this,n)}}function g(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var b,y=lng("birthdays"),v=lng("display users' upcoming birthdays"),_=y,w={name:"t5e8y3",styles:"margin-inline-end:10px"},O=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,u=t.style;if((0,i.xb)(n))return(0,c.tZ)(o.wf,{message:lng("no upcoming birthdays"),widgetStore:t,editForm:k});var p=n.length>(r.avatar?5:8),d=(0,l.iv)(u.borderless?"":"margin: ".concat(a.g.consts.WIDGET_PADDING_TOP,"px ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px 0 ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px;"),">div{display:flex;flex-direction:row;justify-content:space-between;>div{display:inline-flex;align-items:center;}}","");return(0,c.tZ)(o.a9,{widgetStore:t,editForm:k,children:(0,c.tZ)("div",{css:[d,p?a.g.classes.list_condensed:a.g.classes.list,"",""],children:n.map((function(e){return(0,c.BX)("div",{children:[(0,c.BX)("div",{children:[r.avatar&&(0,c.tZ)(s.qE,{user:e,balloon:!1,size:"42px",css:w}),(0,i.v2)(e)]}),(0,c.tZ)("div",{children:e.birthdate})]},e.user_id)}))})})})),k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&f(e,t)}(n,e);var t=m(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_double_box:!1,allow_hidden_no_data:!0,allow_fgc:!0},e))).title=y,(r=o._fields).unshift.apply(r,[{type:"select",name:"options[days_ahead]",label:lng("show"),options:[{val:30,label:lng("next 30 days")},{val:7,label:lng("next 7 days")}]},{type:"checkbox",name:"options[days_ago]",label:lng("also include 2 days ago")},{type:"checkbox",name:"options[avatar]",label:lng("avatar")}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),x={widget:O,form:k,widgetName:y,widgetDesc:v,widgetDefaultTitle:_,isAvailable:function(e){return"anonymous"!==e}},S=n(40441),j=n(27821),C=n(92517),P=n(98e3);function Z(e){return(Z="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function B(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function E(e,t){return(E=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function I(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A(this,n)}}function A(e,t){return!t||"object"!==Z(t)&&"function"!=typeof t?D(e):t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return(R=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var N,z,M,F,q,X,L=(b=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&E(e,t)}(i,e);var t,n,r,o=I(i);function i(){var e;B(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=o.call.apply(o,[this].concat(n)),(0,j.makeObservable)(D(e)),e}return t=i,(n=[{key:"updateData",value:function(e){var t=this;Object.assign(this,e),this.loading=!0,this.widget_id&&(0,P.SC)("portal/widget/".concat(this.widget_id,"&delayed=1"),{},(0,j.action)((function(e){e.data.xml?t.data=te(e.data.xml,t):t.data=e.data,t.loading=!1})))}}])&&T(t.prototype,n),r&&T(t,r),i}(C.r),N=b.prototype,z="updateData",M=[j.override],F=Object.getOwnPropertyDescriptor(b.prototype,"updateData"),q=b.prototype,X={},Object.keys(F).forEach((function(e){X[e]=F[e]})),X.enumerable=!!X.enumerable,X.configurable=!!X.configurable,("value"in X||X.initializer)&&(X.writable=!0),X=M.slice().reverse().reduce((function(e,t){return t(N,z,e)||e}),X),q&&void 0!==X.initializer&&(X.value=X.initializer?X.initializer.call(q):void 0,X.initializer=void 0),void 0===X.initializer&&(Object.defineProperty(N,z,X),X=null),b),U=n(22334);function V(e){return(V="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function H(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$(e);if(t){var o=$(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==V(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Y=lng("rss"),Q=lng("display updates from websites that support RSS"),ee=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options;if(n.error_msg)return(0,c.tZ)(o.wf,{icon:"no_entry",message:lng("error parsing RSS"),widgetStore:t,editForm:ne,children:(0,c.tZ)("pre",{children:n.error_msg})});if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{icon:"hierarchy",widgetStore:t,editForm:ne});var s=(0,l.iv)("._item{margin:",a.g.consts.LIST_MARGIN,"px ",a.g.consts.WIDGET_PADDING_SIDE,"px;display:flex;flex-direction:row;justify-items:baseline;._text{display:inline-block;}._image{display:inline-block;min-width:",t.isDouble?120:60,"px;width:",t.isDouble?120:60,"px;max-height:",t.isDouble?120:60,"px;object-fit:contain;object-position:top;vertical-align:top;margin-inline-end:10px;border-radius:",a.g.consts.IMG_BORDER_RADIUS,"px;align-self:baseline;margin-top:5px;}._date{display:inline;font-size:.8em;color:",a.g.colors.text_sec,";margin-inline-start:10px;}}","");return(0,c.BX)(o.a9,{widgetStore:t,editForm:ne,children:[(0,c.tZ)("div",{css:s,children:n.items.map((function(e,t){return(0,c.BX)("div",{className:"_item",children:[r.show_image&&(e.img?(0,c.tZ)("img",{className:"_image",src:e.img}):(0,c.tZ)("span",{className:"_image"})),(0,c.BX)("div",{className:"_text",children:[e.href?(0,c.tZ)(S.A,{theme:"hover",href:e.href,newTab:!0,children:e.title}):(0,c.tZ)("span",{children:e.title}),(0,c.tZ)("div",{className:"_date",children:e.date})]})]},t)}))}),(0,c.tZ)(o.gm,{widgetStore:t})]})})),te=function(e,t){var n=t.options,r=function(e,t,n){var r=null==e?void 0:e.querySelector(t);if(r)return(n?r.getAttribute(n):"")||r.textContent},o=function(e){var t=e.querySelector('image,thumbnail[url],content[medium*="image"],content[type*="image"]');if(t){var n,o=/^(https?:|\/\/)/i;return o.test(n=t.getAttribute("url"))||o.test(n=r(t,"url"))||o.test(n=t.textContent)||(n=null),n}};try{var a=(new DOMParser).parseFromString(e,"text/xml"),l=Array.from(a.querySelectorAll("item,feed>entry")).map((function(e){var t={title:(0,i.s9)(r(e,"title")),href:r(e,"link","href"),pubDate:r(e,"pubDate,updated"),img:n.show_image&&o(e)};if(n.show_date&&t.pubDate){var a,l,s=(0,U._3)(new Date(t.pubDate));null!==(a=s)&&void 0!==a&&a.isValid()||(s=(0,U._3)(t.pubDate)),null!==(l=s)&&void 0!==l&&l.isValid()?t.date=(0,i.ey)(s,{time:n.show_time,relative:!0}):console.warn("RSS entry invalid date:",t.pubDate,t)}return(0,i.v7)(t)})).filter((function(e){return!(0,i.xb)(e)})).slice(0,n.limit);if(a.querySelector('feed>link[rel="self"][href^="https://www.reddit.com/"]')&&l.length>1&&l[0].pubDate&&l[1].pubDate){var s=(0,U._3)(l[0].pubDate),c=(0,U._3)(l[1].pubDate);s.isValid()&&c.isValid()&&c.diff(s)>5184e6&&l.shift()}return{items:l}}catch(t){return console.warn("rss error: ",t,e),{error_msg:t.toString()}}},ne=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(n,e);var t=W(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?H(Object(n),!0).forEach((function(t){G(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_limit:!0,delayed_data:!0,has_show_more:!0,allow_fgc:!0},e))).title=Y,(r=o._fields).unshift.apply(r,[{type:"text",name:"options[url]",label:lng("url")},{type:"checkbox",name:"options[show_date]",label:lng("show date")},{type:"checkbox",name:"options[show_time]",label:lng("show time"),visible:function(){return o.values.get("show_date")}},{type:"checkbox",name:"options[show_image]",label:lng("show images")}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),re={widget:ee,form:ne,widgetName:Y,widgetDesc:Q,store:L},oe=n(11766);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function le(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,t){return(se=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ce(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ue(this,n)}}function ue(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var de=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&se(e,t)}(i,e);var t,n,r,o=ce(i);function i(){return ae(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"defaultTitle",get:function(){var e=this.options.type;return oe.Ux[e]}},{key:"titleLink",get:function(){return{report:this.options.type,params:{group:this.group_id}}}}])&&le(t.prototype,n),r&&le(t,r),i}(C.r);function fe(e){return(fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ge(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function he(e,t){return(he=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function be(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ve(e);if(t){var o=ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ye(this,n)}}function ye(e,t){return!t||"object"!==fe(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ve(e){return(ve=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _e=lng("workspace report"),we=lng("display workspace status, meeting or completion report"),Oe=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options.type;return n?(0,c.tZ)(o.a9,{widgetStore:t,editForm:ke,children:(0,c.tZ)(oe.Ql,{report:r,data:n,group_id:n.group_id,wrapWidget:!1})}):(0,c.tZ)(o.wf,{message:lng("nothing to show"),widgetStore:t,editForm:ke})})),ke=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&he(e,t)}(n,e);var t=be(n);function n(e){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?me(Object(n),!0).forEach((function(t){ge(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_self_style:!1,allow_double_box:!1},e))).widgetStore.widget_id||(o.widgetStore.options.default_title=!0);var i=["ReportGroupStatus","ReportGroupMeetings","ReportCompletion"];switch(o.widgetStore.group_type){case"Qualification":i.push("ReportQualifications");break;case"Ou":i.push("AssignmentCompletionReport","ReportOuQualificationStatus","OuStatusInCourses","MembersVisitReport","OuCoursesPlanExecute");break;case"Workplan":i.push("TasksStatusReport")}var a=i.map((function(e){return{val:e,label:oe.Ux[e]}}));return o.title=_e,(r=o._fields).unshift.apply(r,[{type:"select",name:"options[type]",label:lng("select report"),options:a}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),xe={widget:Oe,form:ke,widgetName:_e,widgetDesc:we,isAvailable:function(e){return"group"===e},store:de};function Se(e){return(Se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t){return(Pe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ze(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Te(e);if(t){var o=Te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Be(this,n)}}function Be(e,t){return!t||"object"!==Se(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pe(e,t)}(i,e);var t,n,r,o=Ze(i);function i(){return je(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"titleLink",get:function(){return this.options.hideLink?null:this.options.url}}])&&Ce(t.prototype,n),r&&Ce(t,r),i}(C.r);function Ie(e){return(Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ae(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function De(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ne(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Me(e);if(t){var o=Me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ze(this,n)}}function ze(e,t){return!t||"object"!==Ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Me(e){return(Me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Fe=lng("iframe"),qe=lng("display an external site in a frame"),Xe=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options;if(!/^(https?:)?\/\/[^"]+$/.test(n.url))return(0,c.tZ)(o.wf,{message:lng("unrecognized url"),widgetStore:t,editForm:Le});var a=parseFloat(r.zoom||"1"),l=1/a*100+"%",s={width:l,height:l,backgroundColor:"transparent",border:0,verticalAlign:"bottom"};return(0,i.tq)()&&(s.minHeight="calc(100vh - 140px)"),1!==a&&(s.transform="scale(".concat(a,")"),s.transformOrigin="top left"),(0,c.tZ)(o.a9,{widgetStore:t,editForm:Le,children:(0,c.tZ)("iframe",{src:n.url,allowtransparency:"true",allowFullScreen:!0,sandbox:"allow-scripts allow-popups allow-forms allow-same-origin",allow:"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture",frameBorder:"0",style:s})})})),Le=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}(n,e);var t=Ne(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ae(Object(n),!0).forEach((function(t){De(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ae(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_self_style:!1,allow_self_style_only_title:!0},e))).title=Fe,(r=o._fields).unshift.apply(r,[{type:"text",name:"options[url]",label:lng("url"),placeholder:"https://...",required:!0},{type:"number",name:"options[zoom]",label:lng("zoom"),min:.1,max:5,step:.1,integer:!1,value:1},{type:"checkbox",name:"options[hideLink]",label:lng("show open in new tab button"),reversed:!0}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),Ue={widget:Xe,form:Le,widgetName:Fe,widgetDesc:qe,store:Ee},Ve=n(39483),He=n(40965);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function We(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function $e(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Qe(e);if(t){var o=Qe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ye(this,n)}}function Ye(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Qe(e){return(Qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var et=lng("text"),tt=lng("display custom text"),nt=(0,r.observer)((function(e){var t=e.widget,n=t.options,r=t.style,i=(0,l.iv)(r.borderless?"":"padding: ".concat(a.g.consts.WIDGET_PADDING_TOP,"px ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px 0;")," img:not(.emojione){max-width:100%;max-height:80vh;}a{color:",a.g.colors.link_blue,";}a:hover{color:",a.g.colors.link_blue_hover,";}ul{padding-inline-start:2em;max-width:calc(100% - 2.5em);}","");return(0,c.tZ)(o.a9,{widgetStore:t,editForm:rt,children:(0,c.tZ)(Ve.m,{children:(0,c.tZ)(He.x,{css:i,content:n.user_content})})})})),rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(n,e);var t=$e(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(n),!0).forEach((function(t){We(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_fgc:!0},e))).title=et,(r=o._fields).unshift.apply(r,[{type:"richtext",name:"options[user_content]",toolbarOptions:{font:!0,color:!0,link:!0,media:!0,list:!0}}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),ot={widget:nt,form:rt,widgetName:et,widgetDesc:tt,isAvailable:function(e){return"app"!==e}};function it(e){return(it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function at(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function st(e,t){return(st=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ct(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ut(this,n)}}function ut(e,t){return!t||"object"!==it(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function pt(e){return(pt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var dt=lng("weather"),ft=lng("display weather forecast"),mt=dt,gt=(0,l.iv)("width:100%;height:100%;",a.g.mQuery.mobile,"{min-height:283px;}@media (max-width: 955px){min-height:317px;}@media (max-width: 485px){min-height:340px;}vertical-align:bottom;",""),ht=(0,r.observer)((function(e){var t=e.widget,n=t.options.deg_format,r={double:t.isDouble,deg_format:n,lng:Blsm.lang.current.toLowerCase().replace("_","-")},a="".concat(Blsm.prm.Mainref,"portal_weather_iframe.php?").concat((0,i.Wh)(r));return(0,c.tZ)(o.a9,{widgetStore:t,editForm:bt,children:(0,c.tZ)("iframe",{src:a,css:gt,frameBorder:"0"})})})),bt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&st(e,t)}(n,e);var t=ct(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?at(Object(n),!0).forEach((function(t){lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):at(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_self_style:!1},e))).title=dt,(r=o._fields).unshift.apply(r,[{type:"select",name:"options[deg_format]",label:lng("units"),options:(0,i.wd)([["c","°C"],["f","°F"]])}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),yt={widget:ht,form:bt,widgetName:dt,widgetDesc:ft,widgetDefaultTitle:mt,isAvailable:function(e){return"app"!==e}},vt=n(95033),_t=n(87327);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||xt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=xt(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function xt(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function jt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Zt(e,t){return(Zt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Bt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Et(e);if(t){var o=Et(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Tt(this,n)}}function Tt(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Et(e){return(Et=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var It=lng("assignments"),At=lng("display user's waiting assignments"),Dt=It,Rt=(0,r.observer)((function(e){var t,n=e.widget,r=n.data,a=n.options,l=n.style,s=n.refLink;if("select"===a.mode&&n.mayEdit)return(0,c.BX)(o.wf,{widgetStore:n,editForm:Nt,message:"",children:[(0,c.tZ)("br",{}),(0,c.tZ)("p",{children:"Invalid widget configuration: Selecting specific assignments is no longer supported. Please use tags to filter the desired assignments."}),(0,c.BX)("p",{children:["Selected assignments: ",null===(t=a.assignment_id)||void 0===t?void 0:t.split(",").map((function(e){return(0,c.BX)("span",{children:[(0,c.BX)(S.A,{theme:"hover",href:{edit:"assignment",id:e},children:["#",e]})," "]},e)}))]})]});if((0,i.xb)(r.items))return(0,c.tZ)(o.wf,{widgetStore:n,editForm:Nt});var u=r.items.map((function(e){return new _t.o(e,{showNew:a.newer})})),p=u.length>5;return(0,c.BX)(o.a9,{widgetStore:n,editForm:Nt,children:[(0,c.tZ)("div",{css:(0,o.Kv)({widget:n,condensed:p}),children:u.map((function(e){return(0,c.tZ)(vt.zq,{assignment:e,inContainer:!0,condensed:p,translucent:l.translucent,short:!n.isDouble,refLink:s},e.assignment_id)}))}),(0,c.tZ)(o.gm,{href:{home:"overview",params:{alist:1}},text:lng("go to %s",lng("overview",{phrase:!0})),widgetStore:n})]})})),Nt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Zt(e,t)}(i,e);var t,n,r,o=Bt(i);function i(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i);var r=(n=o.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?jt(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).widgetStore,a=r.group_id,l=r.options,s=void 0===l?{}:l;n.title=It;var c=[],u=[{val:"my",label:lng("all waiting assignments").caps()},{val:"coach",label:lng("coaching").caps()}];a&&u.push({val:"group",label:lng("workspace").caps()}),c.push.apply(c,[{type:"select",name:"options[mode]",label:lng("show"),options:u}]),s.types&&!s.types[0]&&((s.types.file||s.types.text)&&(s.types.content=1),s.types.coaching&&(s.types.activityCoach=s.types.checklistCoach=s.types.surveyCoach=1),s.types=Object.keys(s.types),n.updateValue(s.types,"options[types]"));var p=(0,vt.aA)({ws:a}),d=p.types,f=p.topics;for(var m in f)f[m].types=[];var g,h=kt(d);try{for(h.s();!(g=h.n()).done;){var b=g.value;f[b.topic].types.push({val:b.type,label:b.typeLabel,color:f[b.topic].color})}}catch(e){h.e(e)}finally{h.f()}return Object.entries(f).forEach((function(e){var t=Ot(e,2),r=t[0],o=t[1],i=o.label,a=o.types;return c.push({type:"select_multi",name:"pseudo:".concat(r),theme:"tags",label:i,options:a,value:s.types,visible:function(){return"my"===n.values.get("options[mode]")},onValueChange:function(e){var t,r=n.values.get("options[types]")||[],o=kt(a);try{for(o.s();!(t=o.n()).done;){var i=t.value;e.includes(i.val)?r.includes(i.val)||r.push(i.val):r.includes(i.val)&&r.splice(r.indexOf(i.val),1)}}catch(e){o.e(e)}finally{o.f()}n.updateValue(r,"options[types]")}})})),c.push.apply(c,[{type:"hidden",name:"options[types]"},{type:"tags",name:"tags",label:lng("filter by tags"),objectType:"Lesson,Assignment"},{type:"number",min:0,max:99,name:"options[newer]",label:lng("mark as new when newer than %s days").split("%s")[0],unit:lng("mark as new when newer than %s days").split("%s")[1]}]),(t=n._fields).unshift.apply(t,c),n._prepFields(n.widgetStore),n.ready=!0,n}return t=i,(n=[{key:"prepareValuesForSave",value:function(e){for(var t in e)/pseudo:/.test(t)&&delete e[t];return e}}])&&Pt(t.prototype,n),r&&Pt(t,r),i}(o.sG),zt={widget:Rt,form:Nt,widgetName:It,widgetDesc:At,widgetDefaultTitle:Dt,isAvailable:function(e){return"anonymous"!==e}},Mt=n(85597),Ft=n(95875);function qt(e){return(qt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return(Ut=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gt(e);if(t){var o=Gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ht(this,n)}}function Ht(e,t){return!t||"object"!==qt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gt(e){return(Gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jt=lng("approvals"),Wt=lng("display user's waiting approvals"),Kt=Jt,$t=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.style;return(0,i.xb)(n)?(0,c.tZ)(o.wf,{message:lng("nothing to approve"),widgetStore:t,editForm:Yt}):(0,c.tZ)(o.a9,{widgetStore:t,editForm:Yt,children:(0,c.tZ)("div",{css:(0,o.Kv)({widget:t}),children:Object.entries(n).map((function(e){return(0,c.tZ)(Ft.o,{title:Mt.KX[e[0]],href:(0,S.p4)({list:"approvals",params:"type=".concat(e[0])}),newTab:!1,subTitle:lng("%s requests are waiting",e[1]).caps(),markColor:a.g.colors.report_blue,condensed:!0,translucent:r.translucent},e[0])}))})})})),Yt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ut(e,t)}(n,e);var t=Vt(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xt(Object(n),!0).forEach((function(t){Lt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_double_box:!1,allow_hidden_no_data:!0,using_strips:!0},e))).title=Jt,r._prepFields(r.widgetStore),r.ready=!0,r}return n}(o.sG),Qt={widget:$t,form:Yt,widgetName:Jt,widgetDesc:Wt,widgetDefaultTitle:Kt,isAvailable:function(e){return"app"!==e&&"anonymous"!==e}},en=n(29180);function tn(e){return(tn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function on(e,t){return(on=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function an(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sn(e);if(t){var o=sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ln(this,n)}}function ln(e,t){return!t||"object"!==tn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function sn(e){return(sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var cn=lng("blog",{phrase:!0}),un=lng("share blogs of users or workspaces"),pn=cn,dn=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,l=t.style,s=r.mode,u="g"===s,p="u"===s,d={workspace:u&&r.group_id,user:p&&r.user_id,tab:p?"blog":"social"};if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:fn});var f=n.items.length>4;return(0,c.BX)(o.a9,{widgetStore:t,editForm:fn,children:[(0,c.tZ)("div",{css:(0,o.Kv)({widget:t,condensed:f}),children:n.items.map((function(e){return(0,c.tZ)(Ft.o,{href:(0,S.p4)(d),title:e.lesson_name,img:a.g.func.imgUrl(e.poster),condensed:f,translucent:l.translucent,tags:[(0,i.v2)(e.author),t.isDouble?void 0:(0,i.ey)(e.creation_time,{time:!1})].filter((function(e){return e})),children:t.isDouble&&(0,c.tZ)(en.qp,{time:e.creation_time,showTime:!1})},e.lesson_id)}))}),(0,c.tZ)(o.gm,{href:d,text:lng("go to %s",u?lng("workspace"):lng("user profile")),widgetStore:t})]})})),fn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&on(e,t)}(n,e);var t=an(n);function n(e){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){rn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).title=cn;var a=(0,i.wd)([{val:"u",label:lng("user blog").caps()},{val:"g",label:lng("group blog").caps()}]);return(r=o._fields).unshift.apply(r,[{type:"select",name:"options[mode]",options:a},{type:"single_item",name:"options[user_id]",label:lng("select user").caps(),poster:!0,theme:"bright",visible:function(){return"u"===o.values.get("options[mode]")},searchData:function(e,t){(0,P.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term,id:e.ids||""}},t)}},{type:"single_item",name:"options[group_id]",label:lng("select workspace").caps(),poster:!0,theme:"bright",visible:function(){return"g"===o.values.get("options[mode]")},searchData:function(e,t){(0,P.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",catalog:1,term:e.term,id:e.ids||""}},t)}}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),mn={widget:dn,form:fn,widgetName:cn,widgetDesc:un,widgetDefaultTitle:pn,isAvailable:function(){return!Blsm.user.id||Blsm.isFeatureEnabled("blog")}},gn=n(87363),hn=n(95405),bn=n(50643),yn=n(50541);function vn(e){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function wn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function On(e,t){return(On=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function kn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Sn(e);if(t){var o=Sn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xn(this,n)}}function xn(e,t){return!t||"object"!==vn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Sn(e){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var jn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&On(e,t)}(i,e);var t,n,r,o=kn(i);function i(){return _n(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"defaultTitle",get:function(){return lng("inbox").caps()}}])&&wn(t.prototype,n),r&&wn(t,r),i}(C.r);function Cn(e){return(Cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bn(e,t){return(Bn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Tn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=In(e);if(t){var o=In(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return En(this,n)}}function En(e,t){return!t||"object"!==Cn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function In(e){return(In=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var An=lng("messages"),Dn=lng("display user's messages"),Rn=(0,r.observer)((function(e){var t,n=e.widget,r=n.data,s=n.options,u=n.style;if((0,i.xb)(r.items))return t="in"!==s.box||s.unread?s.unread?lng("no new messages"):lng("no messages"):lng("your inbox is empty"),(0,c.tZ)(o.wf,{icon:"mailbox",message:t,widgetStore:n,editForm:Nn});var p=(0,l.iv)(u.borderless?"":"margin: ".concat(a.g.consts.WIDGET_PADDING_TOP,"px ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px 0 ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px;"),";","");return(0,c.BX)(o.a9,{widgetStore:n,editForm:Nn,children:[(0,c.tZ)("div",{css:[yn.x,p,"",""],children:(0,c.tZ)("div",{className:"_list",children:r.items.map((function(e){return Object.assign(e,{message:e.message_message,subject:e.message_subject,is_read:(0,i.P$)(e.is_read)})})).map((function(e){return(0,c.BX)(gn.Fragment,{children:[(0,c.tZ)(hn.SV,{children:(0,c.tZ)(bn.W,{showAvatar:n.isDouble,msg:e,active:!1,is_read:e.is_read,translucent:u.translucent,onClick:function(){return(0,S.p4)({message:e.message_id},!0)}})}),(0,c.tZ)("div",{className:"separator"})]},e.message_id)}))})}),(0,c.tZ)(o.gm,{href:{messages:!0},text:lng("go to %s",n.defaultTitle),widgetStore:n})]})})),Nn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Bn(e,t)}(n,e);var t=Tn(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){Zn(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).title=An,(r=o._fields).unshift.apply(r,[{type:"hidden",name:"options[box]"},{type:"checkbox",name:"options[unread]",label:lng("unread|noun")},{type:"checkbox",name:"options[user_messages]",label:lng("show only user messages"),onValueChange:function(e){return o.updateValue(e?"in":null,"options[box]")}}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),zn={widget:Rn,form:Nn,widgetName:An,widgetDesc:Dn,isAvailable:function(e){return"app"!==e&&"anonymous"!==e},store:jn},Mn=n(66975),Fn=n(37659);function qn(e){return(qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Xn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Un(e,t){return(Un=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Vn(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gn(e);if(t){var o=Gn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hn(this,n)}}function Hn(e,t){return!t||"object"!==qn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Gn(e){return(Gn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Jn=lng("shared content"),Wn=lng("display contents that were shared with the user"),Kn=Jn,$n={name:"lytxz0",styles:"margin-inline-end:2px"},Yn=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,s=t.style,u=t.refLink;if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:Qn});var p=n.items.length>4,d=r.newer&&(0,U._3)(Date.now()-r.newer*i.yV);return(0,c.BX)(o.a9,{widgetStore:t,editForm:Qn,children:[(0,c.tZ)("div",{css:(0,o.Kv)({widget:t,condensed:p}),children:n.items.map((function(e,t){var n,o,p;return(0,c.BX)(Ft.o,{title:e.name||e.assignment_name||e.lesson_name,toolTip:e.descriptionIsHtml?(0,i.s9)(e.lesson_description):e.lesson_description,markColor:e.completed?a.g.colors.positive:a.g.colors.yellow,translucent:s.translucent,href:new Fn.m(e,{refLink:u}).link,newTab:(0,i.P$)(r.open_new_window),icon:d&&e.modification_time&&(0,U._3)(e.modification_time).isAfter(d)?"asterisk":void 0,iconColor:a.g.colors.dominant_orange,iconTooltip:lng("new|mark new content"),tags:[!!r.show_category&&e.category_name,!!r.show_date&&(0,i.ey)(e.modification_time,{time:!1,relative:!0})].filter((function(e){return!1!==e})),children:[(null===(n=e.likes)||void 0===n?void 0:n.likes)>0&&(0,c.tZ)(Mn.JO,{icon:"like",badge:null===(o=e.likes)||void 0===o?void 0:o.likes,css:(0,l.iv)({marginInlineEnd:a.g.consts.ICON_MARGIN},"","")}),(null===(p=e.comments)||void 0===p?void 0:p.length)>0&&(0,c.tZ)(Mn.JO,{icon:"discussion",badge:e.comments.length,css:$n})]},t)}))}),(0,c.tZ)(o.gm,{href:{catalog:!0},text:lng("go to %s",lng("knowledge center",{phrase:!0})),widgetStore:t})]})})),Qn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Un(e,t)}(n,e);var t=Vn(n);function n(e){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var a=(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xn(Object(n),!0).forEach((function(t){Ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).widgetStore,l=a.group_id,s=a.editValues,c=(0,i.wd)({official:lng("official content").caps(),bookmarks:lng("bookmarked content").caps(),trending:lng("trending content").caps(),views:lng("popular content").caps()}),u=(s.categories||[]).map((function(e){return{val:e.id,label:e.label}}));return u.sort((function(e,t){return e.label.localeCompare(t.label)})),o.title=Jn,(r=o._fields).unshift.apply(r,[{type:"select",name:"options[show]",emptyOption:lng("all").caps(),label:lng("show"),options:c},{type:"select_multi",name:"options[categories]",options:u,label:lng("select categories")},{type:"tags",name:"tags",label:lng("include tags"),objectType:"Lesson"},{type:"select",name:"options[all_groups]",options:(0,i.wd)([{val:"",label:lng("content from this workspace").caps()},{val:"1",label:lng("all workspaces").caps()}]),insert:!!l},{type:"checkbox",label:lng("open in a new window"),name:"options[open_new_window]"},{type:"checkbox",label:lng("show and sort by date"),name:"options[show_date]"},{type:"checkbox",label:lng("show category"),name:"options[show_category]"},{type:"number",min:0,max:99,name:"options[newer]",label:lng("mark as new when newer than %s days").split("%s")[0],unit:lng("mark as new when newer than %s days").split("%s")[1]}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),er={widget:Yn,form:Qn,widgetName:Jn,widgetDesc:Wn,widgetDefaultTitle:Kn,isAvailable:function(e){return"anonymous"!==e&&Blsm.isFeatureEnabled("catalog")}},tr=n(77376),nr=n(75898),rr=n(73105);function or(e){return(or="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lr(e,t){return(lr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function sr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ur(e);if(t){var o=ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return cr(this,n)}}function cr(e,t){return!t||"object"!==or(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ur(e){return(ur=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function pr(e){return function(e){if(Array.isArray(e))return dr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return dr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dr(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function dr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var fr=lng("tasks",{phrase:!0}),mr=lng("display user's tasks"),gr=fr,hr=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options;if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:yr});var l=r.newer&&(0,U._3)(Date.now()-r.newer*i.yV),s=n.items.length>3;return(0,c.BX)(o.a9,{widgetStore:t,editForm:yr,children:[(0,c.tZ)("div",{css:(0,o.Kv)({widget:t,condensed:s}),children:n.items.map((function(e,n){return(0,c.tZ)(Ft.o,{href:(0,S.p4)({edit:"task",id:e.task_id}),title:e.task_title,subTitle:(0,c.tZ)(S.A,{href:{workspace:e.group_id,tab:"tasks"},newTab:!0,children:r.my?e.group_name:"".concat(e.group_name," (").concat(e.assignee_name,")")}),toolTip:br(e),markColor:(0,tr.Pp)(e.task_resolution),icon:l&&e.creation_time&&(0,U._3)(e.creation_time).isAfter(l)?"asterisk":void 0,iconColor:a.g.colors.dominant_orange,iconTooltip:lng("new|mark new content"),tags:[(0,tr.aS)(e.priority),(0,tr.HR)(e.status_name,e.task_resolution),t.isDouble&&(0,tr.i4)(e.severity),t.isDouble&&"creation_time"===r.sort&&(0,c.tZ)(rr.u,{text:lng("creation date"),children:(0,i.ey)(e.creation_time,{time:!1})}),t.isDouble&&"modified_time"===r.sort&&(0,c.tZ)(rr.u,{text:lng("modification date"),children:(0,i.ey)(e.modified_time,{time:!1})}),t.isDouble&&e.due_date&&"".concat(lng("due date").caps()," ").concat((0,i.ey)(e.due_date,{time:!1}))].concat(pr((r.custom_fields||[]).map((function(t){return e[(0,i.DK)(t)]})))).filter((function(e){return e})),children:e.task_type&&(t.isDouble?(0,c.tZ)(nr.jC,{color:e.task_type_color,children:e.task_type}):(0,c.tZ)(rr.u,{text:e.task_type,children:(0,c.tZ)(Mn.gT,{color:e.task_type_color})}))},n)}))}),r.my?(0,c.tZ)(o.gm,{href:{home:"tasks",tab:"my"},text:lng("go to %s",lng("my tasks",{phrase:!0})),widgetStore:t}):(0,c.tZ)(o.gm,{href:{report:"TasksStatusReport",params:{group:r.group_id,status:r.status,task_type:r.task_type}},text:lng("task status report"),widgetStore:t})]})})),br=function(e){var t=[];return t.push("T#"+e.task_id),e.due_date&&t.push("".concat(lng("due date").caps()," ").concat((0,i.ey)(e.due_date,{time:!1}))),t.push((0,tr.HR)(e.status_name,e.task_resolution)),t.join("\n")},yr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&lr(e,t)}(n,e);var t=sr(n);function n(e){var r,o,i,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var s=(l=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){ar(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).widgetStore,c=s.editValues,u=s.options,p=void 0===u?{}:u;(!l.widgetStore.widget_id||"my"===p.mode)&&(p.my=!0),"string"==typeof p.group_id&&(p.group_id=p.group_id.split(","));var d=null===(r=c.task_status)||void 0===r?void 0:r.map((function(e){return{val:e.id,label:e.name}})),f=null===(o=c.task_types)||void 0===o?void 0:o.map((function(e){return{val:e.id,label:e.name}})),m=null===(i=c.task_custom)||void 0===i?void 0:i.map((function(e){return{val:e.id,label:e.name}}));return l.title=fr,(a=l._fields).unshift.apply(a,[{type:"checkbox",name:"options[my]",label:lng("my tasks",{phrase:!0})},{type:"multiple_items",name:"options[group_id]",label:lng("workspace filter"),poster:!0,theme:"bright",searchData:function(e,t){(0,P.SC)("search/groups",{data:{tasks_enabled:1,term:e.term||" ",id:e.ids||""}},t)}},(null==d?void 0:d.length)&&{type:"select_multi",name:"options[status]",options:d,label:lng("task statuses"),emptyLabel:lng("all").caps()},(null==f?void 0:f.length)&&{type:"select_multi",name:"options[task_type]",options:f,label:lng("task types"),emptyLabel:lng("all").caps()},{type:"select",name:"options[priority]",options:vr(Blsm.InitialData.parameters.priority),label:lng("priority filter")},{type:"select",name:"options[severity]",options:vr(Blsm.InitialData.parameters.severity),label:lng("severity filter")},{type:"checkbox",label:lng("show archive"),name:"options[archive]"},{type:"select",name:"options[sort]",options:[{val:"modified_time",label:lng("modification date").caps()},{val:"creation_time",label:lng("creation date").caps()},{val:"priority",label:lng("priority").caps()},{val:"severity",label:lng("severity").caps()}],label:lng("sort by")},(null==m?void 0:m.length)&&{type:"select_multi",name:"options[custom_fields]",options:m,label:lng("custom fields")},{type:"number",min:0,max:99,name:"options[newer]",label:lng("mark as new when newer than %s days").split("%s")[0],unit:lng("mark as new when newer than %s days").split("%s")[1]}]),l._prepFields(l.widgetStore),l.ready=!0,l}return n}(o.sG),vr=function(e){var t=Object.entries(e),n=t.length-1;return(0,i.wd)([["",lng("all")]].concat(pr(t.map((function(e,t){return[""+(e[0]-1),t===n?e[1]:lng("%s and above",e[1]).caps()]})))))},_r={widget:hr,form:yr,widgetName:fr,widgetDesc:mr,widgetDefaultTitle:gr,isAvailable:function(e){return"app"!==e&&"anonymous"!==e&&Blsm.isFeatureEnabled("group_tasks")}},wr=n(3755),Or=n(60409);function kr(e){return(kr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Sr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jr(e,t){return(jr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Cr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Zr(e);if(t){var o=Zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pr(this,n)}}function Pr(e,t){return!t||"object"!==kr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Zr(e){return(Zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Br=lng("your profile"),Tr=lng("display user's profile details and status"),Er=Br,Ir=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,u=t.style,p=n.charts.length,d=t.isDouble?"300px":"200px",f=Ar.filter((function(e){return n.info&&n.info[e]})),m=4;(0,i.tq)()?m=1:(r.name&&m--,f.length>6&&(!t.isDouble||p)&&m--,!t.isDouble&&p&&m--);var g=[0,42,60,84,100][m]+"px",h=(0,l.iv)("display:flex;flex-direction:",t.isDouble?"row":"column",";min-height:100%;._user{flex-grow:1;padding:",a.g.consts.WIDGET_PADDING_TOP,"px ",a.g.consts.WIDGET_PADDING_SIDE,"px 0;display:flex;flex-direction:",t.isDouble&&!p?"row":"column",";align-items:center;justify-content:space-around;._avatarname{display:flex;flex-direction:column;align-items:center;margin-bottom:",r.name?0:1,"em;._name{margin:",f.length>4?1:2,"em;font-weight:600;}}._info{display:flex;flex-direction:column;>*{margin-bottom:",f.length>4?5:10,"px;}.info_val{font-weight:600;}}}._charts{flex-grow:",t.isDouble?2:1,";padding:0 ",a.g.consts.WIDGET_PADDING_SIDE,"px;display:flex;flex-direction:column;align-items:center;justify-content:start;margin-top:",r.avatar||r.name||r.info?"0px":"20px",";>*{margin-bottom:",t.isDouble?a.g.consts.LIST_MARGIN:a.g.consts.LIST_MARGIN_CONDENSED,"px;}}","");return(0,c.tZ)(o.a9,{widgetStore:t,editForm:Dr,children:(0,c.BX)("div",{css:h,children:[(r.avatar||r.name||r.info)&&(0,c.BX)("div",{className:"_user",children:[(r.avatar||r.name)&&(0,c.BX)("div",{className:"_avatarname",children:[r.avatar&&(0,c.tZ)(s.qE,{onClick:function(){return(0,S.p4)({user:!0},!0)},size:g,rounded:!0,shadowed:!0,balloon:!1}),r.name&&(0,c.tZ)(S.A,{className:"_name",href:{user:!0},children:(0,i.v2)(Blsm.user)})]}),r.info&&f.length>0&&(0,c.tZ)("div",{className:"_info",children:f.map((function(e){return(0,c.BX)("div",{children:[(0,c.BX)("span",{className:"info_label",children:[(0,Or.X)(e).caps(),": "]}),(0,c.tZ)("span",{className:"info_val",children:n.info[e]})]},e)}))})]}),p>0&&(0,c.tZ)("div",{className:"_charts",children:n.charts.map((function(e,t){return(0,c.tZ)(S.A,{href:e.url,className:"chart_".concat(e.key),children:(0,c.tZ)(wr.k,{textColor:u.fgc,width:d,numerator:e.value,denominator:e.total||e.totalForBar,label:e.label,showDenominator:!!e.total,showPercent:!!e.total,colorByVal:!0,valueInBar:!0})},t)}))})]})})})),Ar=["user_company","user_department","user_business_phone","user_home_phone","user_mobile_phone","user_address","user_city","user_state","user_postal_code","user_country"],Dr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&jr(e,t)}(n,e);var t=Cr(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xr(Object(n),!0).forEach((function(t){Sr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0},e))).title=Br,(r=o._fields).unshift.apply(r,[{type:"hidden",name:"options[flag]"},{type:"checkbox",name:"options[avatar]",label:lng("avatar")},{type:"checkbox",name:"options[name]",label:lng("name")},{type:"checkbox",name:"options[achievements]",label:lng("achievements"),insert:Blsm.isFeatureEnabled("assignments")},{type:"checkbox",name:"options[attendance]",label:lng("attendance"),insert:Blsm.isFeatureEnabled("meetings")},{type:"checkbox",name:"options[qualifications]",label:lng("qualifications"),insert:Blsm.isFeatureEnabled("qualifications")},{type:"checkbox",name:"options[courses]",label:lng("courses")},{type:"checkbox",name:"options[compliance]",label:lng("compliance"),insert:Blsm.isFeatureEnabled("compliance_module")},{type:"checkbox",name:"options[approved_courses]",label:lng("approved courses")},{type:"checkbox",name:"options[info]",label:lng("the following fields")},{type:"indent_set",fields:[{type:"component",node:(0,c.tZ)("ul",{children:Ar.map((function(e){return(0,c.tZ)("li",{children:(0,Or.X)(e).caps()},e)}))})}]}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),Rr={widget:Ir,form:Dr,widgetName:Br,widgetDesc:Tr,widgetDefaultTitle:Er,isAvailable:function(e){return"anonymous"!==e}},Nr=n(43698);function zr(e){return(zr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Mr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Fr(e,t){return(Fr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function qr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Lr(e);if(t){var o=Lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Xr(this,n)}}function Xr(e,t){return!t||"object"!==zr(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Lr(e){return(Lr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ur(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Hr(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Gr=lng("phonebook"),Jr=lng("search for users phone number"),Wr=Gr,Kr={name:"bjn8wh",styles:"position:relative"},$r=(0,r.observer)((function(e){var t,n=e.widget,r=n.options,s=n.style,u=Vr((0,gn.useState)(""),2),p=u[0],d=u[1],f=Vr((0,gn.useState)(!1),2),m=f[0],g=f[1],h=(0,l.iv)("display:flex;min-height:200px;justify-content:center;align-items:center;._icon{font-size:7em;color:",a.g.colors.half_black,";height:fit-content;}",""),b=(0,l.iv)("margin-top:10px;display:flex;flex-direction:column;>*{flex-basis:100%;display:flex;flex-direction:column;margin:10px ",10,"px;align-items:baseline;._name{font-weight:bold;}}",""),y=(0,l.iv)(s.borderless?"":"padding: ".concat(a.g.consts.WIDGET_PADDING_TOP,"px ").concat(a.g.consts.WIDGET_PADDING_SIDE,"px;"),";","");return(0,c.tZ)(o.a9,{widgetStore:n,editForm:no,children:(0,c.BX)("div",{css:y,children:[(0,c.BX)("div",{css:Kr,children:[(0,c.tZ)(Nr.I,{css:(0,l.iv)({color:a.g.colors.text_main},"",""),type:"text",value:p,wrapped:!0,placeholder:lng("find by name"),onChange:function(e){d(e),clearTimeout(n.searchTO),n.searchTO=setTimeout((function(){e&&e.trim().length>=2?(0,P.SC)("users/phonebook/",{data:{term:e.trim()}},(function(e){return g(to(e))})):g(!1)}),500)}}),(0,c.tZ)(Mn.JO,{icon:"search",css:(0,l.iv)((t={},Ur(t,a.g.far,10),Ur(t,"top","calc(50% - 12px);"),Ur(t,"position","absolute"),Ur(t,"pointerEvents","none"),Ur(t,"color",a.g.colors.disabled_text),Ur(t,"fontSize",18),t),"","")})]}),!(0,i.P$)(r.hide_icon)&&!m&&(0,c.tZ)("div",{css:h,children:(0,c.tZ)(Mn.JO,{className:"_icon",icon:"phone"})}),m&&(0,c.BX)("div",{css:b,children:[0===m.length&&(0,c.tZ)("div",{css:h,children:(0,c.BX)("div",{children:["🤷 ",lng("no results found").caps()]})}),m.map((function(e){return(0,c.tZ)(eo,{user:e},e.user_id)}))]})]})})})),Yr={name:"fewz6c",styles:"._user{width:100%;display:flex;flex-direction:row;align-items:center;justify-content:space-between;._user-details{display:flex;flex-direction:row;overflow-y:hidden;._info{font-weight:500;}}}._details{margin:10px auto;display:flex;flex-direction:row;flex-wrap:wrap;._detail{margin:10px auto;display:flex;flex-direction:revert;justify-content:space-between;width:100%;column-gap:5px;}}"},Qr={name:"t5e8y3",styles:"margin-inline-end:10px"},eo=function(e){var t=e.user,n=t.user_id,r=t.user_company,o=t.user_department,a=t.user_job_title,l=t.details,u=Vr((0,gn.useState)(!1),2),p=u[0],d=u[1];return(0,c.BX)("div",{css:Yr,children:[(0,c.BX)("div",{className:"_user",children:[(0,c.BX)("div",{className:"_user-details",children:[(0,c.tZ)(s.qE,{user:t,balloon:!1,size:"42px",css:Qr}),(0,c.BX)(S.A,{theme:"hover",href:{user:n},className:"_name",children:[(0,i.v2)(t),(r||a||o)&&(0,c.BX)("div",{className:"_info",children:[r&&(0,c.BX)("span",{children:[r," "]}),o&&(0,c.BX)("span",{children:[o," "]}),a&&(0,c.tZ)("span",{children:a})]})]})]}),(null==l?void 0:l.length)>0&&(0,c.tZ)(Mn.JO,{buttonLike:!0,icon:p?"arrow_up":"arrow_down",onClick:function(){return d(!p)}})]}),l&&p&&(0,c.tZ)("div",{className:"_details",children:l.map((function(e){return(0,c.BX)("div",{className:"_detail",children:[(0,c.BX)("span",{children:[e.label,":"]}),(0,c.tZ)("span",{children:"phone"===e.type&&(0,i.Fq)()&&/^[\d-]+\d$/.test(e.value)?(0,c.tZ)(S.A,{theme:"highlight",href:"tel:".concat(e.value),children:e.value}):"email"===e.type?(0,c.tZ)(S.A,{theme:"highlight",href:"mailto:".concat(e.value),children:e.value}):e.value})]},e.label)}))})]})},to=function(e){var t=["user_avatar","full_name","user_id","user_name","user_company","user_department","user_job_title"];return e.map((function(e){Object.keys(e).forEach((function(n){e[n]&&t.indexOf(n)<0&&(0,Or.X)(n)&&(void 0===e.details&&(e.details=[]),e.details.push({type:/phone/.test(n)?"phone":"user_email"===n?"email":"",label:(0,Or.X)(n).caps(),value:e[n]}))}))})),e},no=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Fr(e,t)}(n,e);var t=qr(n);function n(e){var r,o,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(l=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mr(Object(n),!0).forEach((function(t){Ur(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_double_box:!0,allow_fgc:!0},e))).title=Gr,l.widgetStore.show_icon=!(0,i.P$)(null===(r=l.widgetStore)||void 0===r||null===(o=r.options)||void 0===o?void 0:o.hide_icon),(a=l._fields).unshift.apply(a,[{type:"hidden",name:"options[hide_icon]"},{type:"checkbox",name:"show_icon",label:lng("icon"),onValueChange:function(e){return l.values.set("options[hide_icon]",e?0:1)}}]),l._prepFields(l.widgetStore),l.ready=!0,l}return n}(o.sG),ro={widget:$r,form:no,widgetName:Gr,widgetDesc:Jr,widgetDefaultTitle:Wr,isAvailable:function(e){return"anonymous"!==e}},oo=n(99234),io=n(38246);function ao(e){return(ao="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function lo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function so(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function co(e,t){return(co=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=fo(e);if(t){var o=fo(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return po(this,n)}}function po(e,t){return!t||"object"!==ao(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function fo(e){return(fo=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mo=lng("published scores"),go=lng("display user's published scores of workspaces"),ho=mo,bo={name:"n8hpes",styles:"._score{margin:10px;text-align:center;>div{font-weight:700;font-size:1.2em;}}"},yo=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.style;if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{message:lng("you do not have any published scores yet"),widgetStore:t,editForm:vo});var a=bo,l=n.items.length>4;return(0,c.BX)(o.a9,{widgetStore:t,editForm:vo,children:[(0,c.tZ)("div",{css:[a,(0,o.Kv)({widget:t,condensed:l}),"",""],children:n.items.map((function(e){return(0,c.tZ)(oo.tP,{entity:new io.j(e),showImg:t.isDouble,condensed:l,translucent:r.translucent,inContainer:!0,newTab:!0,tags:[(0,i.ey)(e.performance_date,{time:!1,relative:!0})],children:(0,c.BX)("div",{className:"_score",children:[(0,c.tZ)("span",{children:lng("score")}),(0,c.tZ)("div",{children:e.performance_score})]})},e.group_id)}))}),(0,c.tZ)(o.gm,{widgetStore:t})]})})),vo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&co(e,t)}(n,e);var t=uo(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?lo(Object(n),!0).forEach((function(t){so(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!1,using_strips:!0},e))).title=mo,r._prepFields(r.widgetStore),r.ready=!0,r}return n}(o.sG),_o={widget:yo,form:vo,widgetName:mo,widgetDesc:go,widgetDefaultTitle:ho,isAvailable:function(e){return"app"!==e&&"anonymous"!==e}},wo=n(88989),Oo=n(21810);function ko(e){return(ko="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xo(e,t){return(xo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function So(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Co(e);if(t){var o=Co(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return jo(this,n)}}function jo(e,t){return!t||"object"!==ko(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Co(e){return(Co=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Po(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Po(Object(n),!0).forEach((function(t){Bo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Po(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var To=lng("workspaces"),Eo=lng("display workspaces that the user is a member of"),Io=To,Ao=(0,r.observer)((function(e){var t,n=e.widget,r=n.data,l=n.options,s=n.style;if((0,i.xb)(r.items))return(0,c.tZ)(o.wf,{widgetStore:n,editForm:Ro});r.limit_reached=r.items.length>n.options.limit;var u=r.items.slice(0,n.options.limit),p=(wo.X.get("recent_groups_"+Blsm.user.id)||[]).map((function(e){return+e})),d=u.filter((function(e){return p.includes(+e.group_id)})),f=u.filter((function(e){return!p.includes(+e.group_id)})),m=r.items.length>4,g=f.length>0&&d.length>0;Do(l);var h={href:{home:"overview",tab:""},text:lng("go to %s",lng("desktop",{phrase:!0}))};return 1===(null===(t=l.relation)||void 0===t?void 0:t.length)&&"manager"===l.relation[0]&&(h={href:{user:!0,tab:"management"},text:lng("go to %s",lng("management"))}),(0,c.BX)(o.a9,{widgetStore:n,editForm:Ro,children:[(0,c.BX)("div",{css:(0,o.Kv)({widget:n,condensed:m}),children:[g&&(0,c.BX)("div",{style:{fontSize:".75em",color:a.g.colors.text_placeholder},children:[lng("recently accessed").caps(),":"]}),d.map((function(e){return(0,c.tZ)(oo.tP,{entity:new io.j(e),showImg:n.isDouble,condensed:m,translucent:s.translucent,children:e.group_open_date&&(0,c.tZ)(en.qp,{time:e.group_open_date,showTime:!1})},e.group_id)})),g&&(0,c.tZ)(Oo.Hr,{style:{marginBottom:0}}),f.map((function(e){return(0,c.tZ)(oo.tP,{entity:new io.j(e),showImg:n.isDouble,condensed:m,translucent:s.translucent,children:e.group_open_date&&(0,c.tZ)(en.qp,{time:e.group_open_date,showTime:!1})},e.group_id)}))]}),(0,c.tZ)(o.gm,Zo(Zo({},h),{},{widgetStore:n}))]})}));function Do(e){var t,n,r;(0,i.Kn)(null==e?void 0:e.classifications)&&(e.classifications=null===(t=e.classifications)||void 0===t?void 0:t.split(",")),(0,i.Kn)(null==e?void 0:e.types)&&(e.types=Object.entries(e.types).map((function(e){return e[0]}))),(0,i.Kn)(null==e?void 0:e.relation)&&(e.relation=Object.entries(e.relation).map((function(e){return e[0]}))),null!==(n=e.types)&&void 0!==n&&n.length||(e.types=["group","course"]),null!==(r=e.relation)&&void 0!==r&&r.length||(e.relation=["member"])}var Ro=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&xo(e,t)}(n,e);var t=So(n);function n(e){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=(o=t.call(this,Zo({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).widgetStore,a=i.options,l=i.editValues;o.title=To;var s=(l.classifications||[]).map((function(e){return{val:e.id,label:e.name}}));Do(a);var c=["group",Blsm.isFeatureEnabled("group_subset")&&"Subset","course","Qualification",Blsm.isFeatureEnabled("workplan")&&"Workplan","Ou"].filter((function(e){return e})).map((function(e){return{val:e,label:(0,Or.p)(e,null,!0).caps()}})),u=[{val:"member",label:lng("member of workspaces")},{val:"manager",label:lng("managed workspaces")},{val:"owner",label:lng("owned workspaces")}];return(r=o._fields).unshift.apply(r,[{type:"title",label:lng("filters")},{type:"select_multi",label:lng("types").caps(),name:"options[types]",options:c},{type:"select_multi",label:lng("relation").caps(),name:"options[relation]",options:u},s.length&&{type:"select_multi",label:lng("classifications").caps(),name:"options[classifications]",options:s},{type:"tags",name:"tags",label:lng("tags"),objectType:"Group"}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),No={widget:Ao,form:Ro,widgetName:To,widgetDesc:Eo,widgetDefaultTitle:Io,isAvailable:function(e){return"app"!==e&&"anonymous"!==e}},zo=n(80504),Mo=n(7392);function Fo(e){return(Fo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function qo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ho(e);if(t){var o=Ho(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vo(this,n)}}function Vo(e,t){return!t||"object"!==Fo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Go(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Jo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Jo(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wo=lng("approved external events"),Ko=lng("display the user's approved external events"),$o=Wo,Yo=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.style,s=Go((0,gn.useState)(null),2),u=s[0],p=s[1];if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:Qo});n.limit_reached=n.items.length>t.options.limit;var d=n.items.slice(0,t.options.limit);d.sort((function(e,t){return(+e.group_open_date||0)<(+t.group_open_date||0)?1:-1}));var f=n.items.length>4;return(0,c.BX)(o.a9,{widgetStore:t,editForm:Qo,children:[(0,c.tZ)("div",{css:[(0,o.Kv)({widget:t,condensed:f}),function(e){var t=e.widget;return(0,l.iv)("._dates{flex-basis:100%;}",t.isDouble?"":"._titles { max-width: calc(100% - 20px - 32px); }",";","")}({widget:t}),"",""],children:d.map((function(e){return(0,c.BX)(oo.tP,{entity:new io.j(e),condensed:f,translucent:r.translucent,href:null,children:[e.group_open_date&&(0,c.tZ)("div",{className:"_dates",children:(0,c.tZ)(en.qm,{className:"_dates",dateNote:{start:e.group_open_date,end:e.group_close_date},showTime:"auto"})}),e.ect_receipt_sequence&&!t.isDouble&&(0,c.tZ)(Mn.JO,{icon:"receipt",toolTip:lng("expenses").caps(),onClick:function(){return p(e.group_id)},buttonLike:!0,color:a.g.colors.link_blue}),e.ect_receipt_sequence&&t.isDouble&&(0,c.tZ)("div",{children:(0,c.tZ)(Mo.l,{icon:"receipt",onClick:function(){return p(e.group_id)},theme:"contained",children:lng("expenses").caps()})}),u===e.group_id&&(0,c.tZ)(zo.d,{external:e,receipts:e.receipts,onClose:function(){return p(!1)}})]},e.group_id)}))}),(0,c.tZ)(o.gm,{href:{user:!0,tab:"requests"},text:lng("go to %s",lng("my requests status")),widgetStore:t})]})})),Qo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(n,e);var t=Uo(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qo(Object(n),!0).forEach((function(t){Xo(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).title=Wo,(r=o._fields).unshift.apply(r,[{type:"title",label:lng("filters")},{type:"checkbox",name:"options[filter_expenses]",label:lng("expenses")}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),ei={widget:Yo,form:Qo,widgetName:Wo,widgetDesc:Ko,widgetDefaultTitle:$o,isAvailable:function(e){return Blsm.isFeatureEnabled("course_registartion_external")&&"app"!==e&&"anonymous"!==e}},ti=n(68567),ni=n(2645);function ri(e){return(ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ii(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ai(e,t){return(ai=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function li(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ci(e);if(t){var o=ci(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return si(this,n)}}function si(e,t){return!t||"object"!==ri(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ci(e){return(ci=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ui=lng("course catalog"),pi=lng("available courses for registration from the catalog"),di=ui,fi={name:"c6nazo",styles:"._inner_content{flex-wrap:wrap;}.statusContainer{display:flex;flex-direction:column;align-items:center;flex-basis:100%;}"},mi={name:"4nshc5",styles:"._inner_content[class]{flex-wrap:initial;}.statusContainer{display:flex;flex-direction:column;align-items:end;.statusNote{width:fit-content;}}"},gi=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.style;if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:hi});n.items.forEach((function(e){return e.statusInfo=(0,ni.cW)(e.status)}));var a=n.items.length>4,l=mi,s=fi;return(0,c.BX)(o.a9,{widgetStore:t,editForm:hi,children:[(0,c.tZ)("div",{css:(0,o.Kv)({widget:t,condensed:a}),children:n.items.map((function(e){return(0,c.tZ)(oo.tP,{css:t.isDouble?l:s,entity:new io.j(e),tags:[],showImg:t.isDouble,condensed:a,translucent:r.translucent,href:Blsm.user.id?(e.statusInfo.selfStatus,n=e.group_id,{courseCatalog:!0,tab:"self",id:n}):void 0,onClick:Blsm.user.id?void 0:function(){return(0,ti.qR)(lng("please sign in to see the content"),{title:lng("sign in is required")})},children:(0,c.BX)("div",{className:"statusContainer",children:[(0,c.tZ)(nr.jC,{color:e.statusInfo.cardColor,className:"statusNote ".concat(e.statusInfo.selfButtonClass),children:e.statusInfo.selfText}),e.group_open_date&&(0,c.tZ)(en.qp,{time:e.group_open_date,showTime:!1})]})},e.group_id);var n}))}),(0,c.tZ)(o.gm,{href:{courseCatalog:!0,tab:"self"},text:lng("go to %s",lng("course catalog")),widgetStore:t})]})})),hi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ai(e,t)}(n,e);var t=li(n);function n(e){var r,o;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var i=((o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?oi(Object(n),!0).forEach((function(t){ii(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_limit:!0,has_show_more:!0,using_strips:!0},e))).widgetStore.editValues.classifications||[]).map((function(e){return{val:e.id,label:e.name}}));return o.title=ui,(r=o._fields).unshift.apply(r,[{type:"select_multi",name:"options[classifications]",label:lng("filter by classifications").caps(),options:i},{type:"tags",name:"tags",label:lng("filter by tags"),objectType:"Group"},{type:"select",name:"options[open_within]",label:lng("courses that starts within"),options:{0:lng("all"),10:lng("%s days",10),30:lng("%s days",30),60:lng("%s days",60),120:lng("%s days",120),ongoing:lng("currently open").caps()}}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),bi={widget:gi,form:hi,widgetName:ui,widgetDesc:pi,widgetDefaultTitle:di,isAvailable:function(e){return"app"!==e}};function yi(e){return(yi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function vi(e,t){return(vi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _i(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Oi(e);if(t){var o=Oi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return wi(this,n)}}function wi(e,t){return!t||"object"!==yi(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Oi(e){return(Oi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ki(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ki(Object(n),!0).forEach((function(t){Si(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ki(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Si(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ji,Ci=lng("image"),Pi=lng("display an image"),Zi=Ci,Bi=(0,r.observer)((function(e){var t=e.widget,n=t.options,r=t.domain_id,s=n.fit,u=n.position,p=n.image,d=n.link,f=(0,l.iv)("width:100%;height:100%;overflow:hidden;._img{object-fit:",s,";object-position:",u,";width:100%;height:100%;}",""),m=(0,i.tq)()?{height:a.g.consts.WIDGET_BASE_HEIGHT}:{},g=(0,c.tZ)("img",xi({className:"_img",src:a.g.func.imgUrl(p,r)},m));return(0,c.tZ)(o.a9,{widgetStore:t,editForm:Ti,children:(0,c.tZ)("div",{css:f,children:d?(0,c.tZ)(S.A,{href:d,children:g}):g})})})),Ti=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&vi(e,t)}(n,e);var t=_i(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,xi({allow_double_box:!0,allow_bgimage:!1,allow_fgc:!1},e))).title=Ci,(r=o._fields).unshift.apply(r,[{type:"img",name:"options[image]",tabs:["portal","images","gallery"]},{type:"select",name:"options[fit]",label:lng("contain image"),options:[{val:"contain",label:lng("contain").caps()},{val:"cover",label:lng("cover").caps()},{val:"fill",label:lng("stretch").caps()}]},{type:"select",name:"options[position]",label:lng("alignment"),visible:function(){return"fill"!==o.values.get("options[fit]")},options:[{val:"top",label:lng("top").caps()},{val:"center",label:lng("center").caps()},{val:"bottom",label:lng("bottom").caps()},{val:"left",label:lng("left").caps()},{val:"right",label:lng("right").caps()}]},{type:"text",name:"options[link]",label:lng("link")}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),Ei={widget:Bi,form:Ti,widgetName:Ci,widgetDesc:Pi,widgetDefaultTitle:Zi},Ii=n(79160),Ai=n(49415),Di=n(92464);function Ri(e){return(Ri="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ni(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function zi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mi(e,t){return(Mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Li(e);if(t){var o=Li(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qi(this,n)}}function qi(e,t){return!t||"object"!==Ri(t)&&"function"!=typeof t?Xi(e):t}function Xi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Li(e){return(Li=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ui=(function(e,t,n,r,o){var i={};Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Mi(e,t)}(i,e);var t,n,r,o=Fi(i);function i(){var e;Ni(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e=o.call.apply(o,[this].concat(n)),(0,j.makeObservable)(Xi(e)),e}return t=i,(n=[{key:"updateData",value:function(e){var t;e.object_id=null===(t=e.object_id)||void 0===t?void 0:t.split(","),Object.assign(this,e),this.loading=!1}}])&&zi(t.prototype,n),r&&zi(t,r),i}(C.r)).prototype,"updateData",[j.override],Object.getOwnPropertyDescriptor(ji.prototype,"updateData"),ji.prototype),ji),Vi=n(66418);function Hi(e){return(Hi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Gi(e){return function(e){if(Array.isArray(e))return oa(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ra(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ji(e,t){return(Ji=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Yi(e);if(t){var o=Yi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ki(this,n)}}function Ki(e,t){return!t||"object"!==Hi(t)&&"function"!=typeof t?$i(e):t}function $i(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Yi(e){return(Yi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Qi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ea(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Qi(Object(n),!0).forEach((function(t){ta(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Qi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ta(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function na(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ra(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ra(e,t){if(e){if("string"==typeof e)return oa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?oa(e,t):void 0}}function oa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ia=lng("photo album"),aa=lng("create and share a photo albums"),la=ia,sa=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,a=n.filter((function(e){return e.photos.length})),l=a.length,s=na((0,gn.useState)(null),2),u=s[0],p=s[1];if(0===l)return(0,c.tZ)(o.wf,{message:lng("nothing to show"),icon:"media",widgetStore:t,editForm:ca});var d=1===l?a[0].photos.map((function(e){return ea({img:e.url,overlayText:e.file_name,photos:a[0].photos},e)})):a.map((function(e){return ea({img:e.photos[0].url,overlayText:e.album_name},e)}));return(0,c.BX)(o.a9,{widgetStore:t,editForm:ca,children:[(0,c.tZ)(Di.VK,{layout:(0,i.Oz)()?"mobile":t.isDouble?"wide":"narrow",maxPhotos:1===l?+r.max_photos:void 0,height:(0,i.tq)()?"min(120vw, calc(100vh - 200px))":void 0,children:d.map((function(e,t){return(0,c.tZ)(Di.XI,ea(ea({size:["100%","100%"]},e),{},{onClick:function(){var t;p({type:"img",likes:(t=e).photos.map((function(e){return e.likes})),url:t.url||t.photos[0].url,images:t.photos.map((function(e){return e.url})),labels:t.photos.map((function(e){return e.file_name})),object_ids:t.photos.map((function(e){return e.file_id}))})}}),t)}))}),u&&(0,c.tZ)(Vi.$,{onClose:function(){return p(null)},file:u,socialFlag:Blsm.isFeatureEnabled("assignments_comments")})]})})),ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ji(e,t)}(n,e);var t=Wi(n);function n(e){var o,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),ta($i(a=t.call(this,ea({allow_hidden_no_data:!0},e))),"newAlbumName",(function(e){e&&(0,P.SC)("album/album",{data:{album_name:e,album_id:null},method:"POST"},(function(e){if(e){var t=Gi(a.values.get("object_id")||[]);t.push(e),a.updateValue(t,"object_id"),a.updateValue("","new_album_name")}}))})),a.widgetStore.created=a.widgetStore.created||Date.now(),a.title=ia;var l=(0,r.observer)((function(e){var t=e.item,n=na((0,gn.useState)(!1),2),r=n[0],o=n[1];return(0,c.BX)("div",{children:[(0,c.tZ)(Mn.JO,{icon:"photos",toolTip:lng("manage album photos"),onClick:t.id?function(){return o(!0)}:null}),r&&(0,c.tZ)(Ii.b,{mediaStore:new Ai.H({albumId:t.id,albumName:t.label}),onClose:function(){return o(!1)}})]})}));return(o=a._fields).unshift.apply(o,[{type:"multiple_items",maxItems:Di.kj,name:"object_id",label:lng("select photo albums"),theme:"bright",searchData:function(e,t){var n=e.term,r=e.ids;(0,P.SC)("album/autocomplete",{data:{object_id:a.values.get("object_id"),term:n,id:r||""}},t)},buttons:[{Render:l}]},{type:"select",name:"options[max_photos]",label:lng("photos to display"),options:(0,i.w6)(Di.kj).map((function(e){return{val:e+1,label:""+(e+1)}})),emptyOption:!0,visible:function(){var e;return 1===(null===(e=a.values.get("object_id"))||void 0===e?void 0:e.length)}},{type:"row_set",fields:[{type:"text",label:lng("new photo album name"),name:"new_album_name"},{type:"component",node:(0,c.tZ)(Mo.l,{onClick:function(){return a.newAlbumName(a.values.get("new_album_name"))},children:lng("create album")})}],visible:function(){var e;return((null===(e=a.values.get("object_id"))||void 0===e?void 0:e.length)||0)<Di.kj}},{type:"component",node:(0,c.tZ)(S.A,{theme:"highlight",href:{list:"album"},target:"_blank",children:lng("edit all photo albums").caps()})}]),a._prepFields(a.widgetStore),a.ready=!0,a}return n}(o.sG),ua={widget:sa,form:ca,widgetName:ia,widgetDesc:aa,widgetDefaultTitle:la,store:Ui},pa=n(9431),da=n(24210),fa=n(33550),ma=n(23838);function ga(e){return(ga="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ha(e){return function(e){if(Array.isArray(e))return ba(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ba(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ba(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ba(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ya(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function va(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _a(e,t){return(_a=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=xa(e);if(t){var o=xa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Oa(this,n)}}function Oa(e,t){return!t||"object"!==ga(t)&&"function"!=typeof t?ka(e):t}function ka(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xa(e){return(xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sa(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ja=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_a(e,t)}(i,e);var t,n,r,o=wa(i);function i(){var e;ya(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Sa(ka(e=o.call.apply(o,[this].concat(n))),"newMenuOptions",e.mayEdit?[{label:lng("text/link"),onClick:function(){return e.itemList_UpdateItem({itemType:"basic"})}},{label:lng("shared content"),onClick:function(){return e.itemList_UpdateItem({itemType:"content"})}},{label:lng("assignment"),onClick:function(){return e.itemList_UpdateItem({itemType:"assignment"})}},e.portal_id&&{label:lng("sub page").caps(),onClick:function(){return e.itemList_UpdateItem({itemType:"portal"})}},{label:lng("user"),onClick:function(){return e.itemList_UpdateItem({itemType:"user"})}}]:void 0),Sa(ka(e),"onSortItemList",(function(t){var n=t.new_order;(0,P.SC)("content/item_list_order",{data:{id:e.object_id,new_order:n.join(",")},method:"POST"})})),e}return t=i,(n=[{key:"itemList_removeItem",value:function(e){var t=this;(0,ti.BB)(lng("are you sure you want to delete this item?").caps(),{onConfirm:function(){t.data.items=t.data.items.filter((function(t){return t!==e})),(0,P.SC)("content/item_list_item/".concat(e.item_id,"&lesson_id=").concat(t.object_id,"&"),{method:"DELETE"})}})}},{key:"itemList_UpdateItem",value:function(e){var t=this,n=e.itemType,r=e.itemInfo,o=function(e){var t=e.itemForm,o=e.res,i=e.item,a=i||o;return a.item_type=n||r.item_type,a.object_id=t.values.get("object_id"),a.item_data=(null==i?void 0:i.item_data)||{title:"",text:"",url:"",newTab:"",poster:"",title_style:{color:""},text_style:{color:""},style:{"background-color":""}},a.item_data.title=t.values.get("item_data[title]"),a.item_data.text=t.values.get("item_data[text]"),a.item_data.url=t.values.get("item_data[url]"),a.item_data.can_message=t.values.get("item_data[can_message]"),a.item_data.can_chat=t.values.get("item_data[can_chat]"),a.item_data.current_window=t.values.get("item_data[current_window]"),a.item_data.hide_completed=t.values.get("item_data[hide_completed]"),a.item_data.poster=t.values.get("item_data[poster]"),a.item_data.title_style={color:t.values.get("item_data[title_style][color]")},a.item_data.text_style={color:t.values.get("item_data[text_style][color]")},a.item_data.style={"background-color":t.values.get("item_data[style][background-color]")},"basic"!==(null==r?void 0:r.item_type)&&(a.object_data=o.object_data),a},i=new nl({itemType:n,itemInfo:r,widgetStore:this,onSaveSuccess:function(e){if(r){var n=[];t.data.items.map((function(t){t.item_id===r.item_id&&(t=o({itemForm:i,res:e,item:t})),n.push(t)})),t.data.items=n}else{var a=ha(t.data.items);a.push(o({itemForm:i,res:e})),t.data.items=a}(0,ma.vm)().closeDialog()}});(0,ma.vm)().openDialog("form",i)}}])&&va(t.prototype,n),r&&va(t,r),i}(C.r);function Ca(e){return(Ca="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var Pa=["buttonView"];function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ba(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ta(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ea(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ea(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ea(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ia(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Aa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Da(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ra(e,t)}function Ra(e,t){return(Ra=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Na(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Fa(e);if(t){var o=Fa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return za(this,n)}}function za(e,t){return!t||"object"!==Ca(t)&&"function"!=typeof t?Ma(e):t}function Ma(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fa(e){return(Fa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function qa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qa(Object(n),!0).forEach((function(t){La(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function La(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ua,Va,Ha,Ga,Ja,Wa=lng("list"),Ka=lng("display links to content, assignment, sub-portal, custom url or a user"),$a={name:"1boyrcs",styles:"margin-top:8px;line-height:normal;display:flex;>div{margin:2px;min-width:unset;}"},Ya=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,l=t.style,s=t.refLink,u="buttons"===r.layout;if((0,i.xb)(n.items))return(0,c.tZ)(o.wf,{widgetStore:t,editForm:Qa});var p=function(e){var t,n=e.object_id,r=e.object_data,o=e.item_type,i=s;switch(o){case"basic":return null===(t=e.item_data)||void 0===t?void 0:t.url;case"blog":return(0,S.p4)({blog:n,ref:i});case"content":return new Fn.m(e.object_data,{refLink:s}).link;case"assignment":return(0,S.p4)({launcher:"assignment",id:n,ref:i});case"user":return(0,S.p4)({user:n});case"portal":return r.parent_id?(0,S.p4)({portal:r.parent_id,sub_id:r.portal_id,app:r.parent_type===pa.Bu.APP}):(0,S.p4)({portal:r.portal_id,app:r.parent_type===pa.Bu.APP});default:console.warn("unknown list item type",e)}},d=$a,f=function(e){var t=e.item_type,n=e.item_data,r=e.object_data;return"user"===t?(0,c.BX)("div",{css:d,children:[(null==n?void 0:n.can_message)&&(0,c.tZ)(Mo.l,{theme:"contained",onClick:function(){return(0,S.p4)({message:"new",params:{to:null==r?void 0:r.user_id}},!0)},children:lng("send message").caps()}),(null==n?void 0:n.can_chat)&&window.bchat&&(0,c.tZ)(Mo.l,{theme:"outlined",onClick:function(){return window.bchat.openChat(null==r?void 0:r.user_id)},children:(0,c.tZ)(Mn.JO,{icon:"chat"})})]}):null},m=n.items.map((function(e){return(0,c.tZ)(tl,Xa({buttonView:u,translucent:l.translucent},function(e){var n,r,o,l=e.object_data||{},s=e.item_data||{},d=s.title||l.assignment_name||l.lesson_name||l.portal_title,m=u?void 0:(0,c.tZ)("div",{style:{color:null===(n=s.text_style)||void 0===n?void 0:n.color},children:s.text||(null!=l&&l.descriptionIsHtml?(0,i.s9)(null==l?void 0:l.lesson_description,70):null==l?void 0:l.lesson_description)});return"user"===e.item_type&&d&&(m=(0,c.BX)("div",{style:{display:"flex",flexDirection:"column",color:null===(r=s.text_style)||void 0===r?void 0:r.color},children:[(0,c.tZ)("div",{style:{fontWeight:600},children:l.full_name}),(0,c.tZ)("div",{children:m})]})),{href:p(e),newTab:!(0,i.P$)(s.current_window),title:d||l.full_name||"",titleColor:null===(o=s.title_style)||void 0===o?void 0:o.color,subTitle:m,condensed:!0,img:a.g.func.imgUrl(s.poster||l.poster),css:s.style&&(0,i.Tj)(s.style),className:"_item",menuOptions:t.mayEdit?[{label:lng("edit"),icon:"edit",onClick:function(){return t.itemList_UpdateItem({itemInfo:e})}},{label:lng("delete"),icon:"trash",onClick:function(){return t.itemList_removeItem(e)}}]:void 0,avatar:"user"!==e.item_type||s.poster||l.poster?null:l,avatarBalloon:!1,additionalBottom:f(e)}}(e)),e.item_id)}));return(0,c.tZ)(o.a9,{widgetStore:t,editForm:Qa,children:(0,c.tZ)("div",{css:u?(0,o.An)({widget:t}):(0,o.Kv)({widget:t,condensed:!t.isDouble,columns:null==r?void 0:r.columns}),children:t.mayEdit?(0,c.tZ)(fa.b,{onSort:t.onSortItemList,children:m}):m})})})),Qa=function(e){Da(n,e);var t=Na(n);function n(e){var r,o;return Aa(this,n),(o=t.call(this,Xa({allow_fgc:!1,allow_hidden_no_data:!0},e))).title=Wa,(r=o._fields).unshift.apply(r,[{type:"hidden",name:"object_id"},{type:"select",name:"options[layout]",label:lng("layout"),options:[{val:"",label:lng("list")},{val:"buttons",label:lng("icons")}]},{type:"select",name:"options[columns]",label:lng("columns"),options:[{val:"",label:"1"},{val:2,label:"2"},{val:3,label:"3"}],visible:function(e){return"buttons"!==e.get("options[layout]")}}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),el={widget:Ya,form:Qa,widgetName:Wa,widgetDesc:Ka,store:ja},tl=function(e){var t,n=e.buttonView,r=Ia(e,Pa),o=Ta((0,gn.useState)(!1),2),s=o[0],u=o[1],p=(0,l.iv)("._actions{color:",a.g.colors.text_main,";position:absolute;top:0;",a.g.far,":0;}&:not(.hoverDelayed) ._actions{display:none;}","");return(0,c.tZ)("div",{css:p,className:(0,i.AK)({hoverDelayed:s}),onMouseEnter:function(){u(!0),clearTimeout(t)},onMouseLeave:function(){t=setTimeout((function(){return u(!1)}),200)},children:n?(0,c.tZ)(Ft.S,Xa({},r)):(0,c.tZ)(Ft.o,Xa({},r))})},nl=function(e){Da(a,e);var t,n,r,o=Na(a);function a(e){var t,n,r,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w=Za({},e);Aa(this,a),La(Ma(_=o.call(this,Xa({using_strips:!0},w))),"itemInfo",null),La(Ma(_),"isNew",void 0),La(Ma(_),"itemType",void 0),_.itemInfo=w.itemInfo||_.itemInfo,_.itemType=w.itemType||_.itemInfo.item_type,_.isNew=void 0===(null===(t=_.itemInfo)||void 0===t?void 0:t.item_id),_.widget=w.widgetStore;var O=_.widget,k=O.portal,x=O.object_id,S=O.options,j=(null===(n=_.itemInfo)||void 0===n||null===(r=n.object_data)||void 0===r?void 0:r.assignment_name)||(null===(l=_.itemInfo)||void 0===l||null===(s=l.object_data)||void 0===s?void 0:s.lesson_name)||(null===(c=_.itemInfo)||void 0===c||null===(u=c.object_data)||void 0===u?void 0:u.portal_title);return _.setTitleAndSearchUrl(),_.saveUrl="content/item_list_item/&lesson_id="+x,_.successMessage=lng("preferences saved"),_._fields=[{type:"hidden",name:"item_type",value:_.itemType},{type:"hidden",name:"lesson_id",value:x},{type:"hidden",name:"item_id"},{type:"hidden",name:"order_id"},{type:"single_item",name:"object_id",label:null!==(p=_.itemInfo)&&void 0!==p&&p.item_id?lng("link to").caps():_.title,insert:["content","assignment","portal","user"].indexOf(_.itemType)>=0,required:!0,theme:"bright",disabled:void 0!==(null===(d=_.itemInfo)||void 0===d?void 0:d.object_data)&&!(null===(f=_.itemInfo)||void 0===f||!f.item_id),searchData:function(e,t){(0,P.SC)(_.searchUrl,{data:_.searchData(e,k)},t)}},{insert:"basic"===_.itemType||"user"===_.itemType||!_.isNew,type:"text",name:"item_data[title]",label:lng("title"),placeholder:j},{insert:"basic"===_.itemType||"user"===_.itemType||!_.isNew,type:"textarea",name:"item_data[text]",label:lng("description"),visible:function(){return"buttons"!==(null==S?void 0:S.layout)},placeholder:null!==(m=_.itemInfo)&&void 0!==m&&null!==(g=m.object_data)&&void 0!==g&&g.descriptionIsHtml?(0,i.s9)(null===(h=_.itemInfo)||void 0===h||null===(b=h.object_data)||void 0===b?void 0:b.lesson_description,70):null===(y=_.itemInfo)||void 0===y||null===(v=y.object_data)||void 0===v?void 0:v.lesson_description},{insert:"basic"===_.itemType,type:"text",name:"item_data[url]",label:lng("link"),placeholder:"https://..."},{insert:"assignment"===_.itemType,type:"checkbox",name:"item_data[hide_completed]",label:lng("hide after completion")},{insert:"user"===_.itemType&&window.bchat,type:"checkbox",name:"item_data[can_chat]",label:lng("show private chat button")},{insert:"user"===_.itemType,type:"checkbox",name:"item_data[can_message]",label:lng("show message button")},{type:"checkbox",name:"item_data[current_window]",reversed:!0,label:lng("open in a new window")},{type:"img",name:"item_data[poster]",label:lng("image"),title:lng("replace image"),tabs:["images","gallery"],removeButton:!0,insert:"basic"===_.itemType||"user"===_.itemType||!_.isNew},{type:"section",insert:"basic"===_.itemType||"user"===_.itemType||!_.isNew,title:lng("layout"),titleSmall:!0,fields:[{type:"color",name:"item_data[title_style][color]",label:lng("title color"),clear_button:!0},{type:"color",name:"item_data[text_style][color]",label:lng("text color"),clear_button:!0},{type:"color",name:"item_data[style][background-color]",label:lng("background color"),clear_button:!0}]}],_._prepFields(_.itemInfo),_.ready=!0,_}return t=a,(n=[{key:"setTitleAndSearchUrl",value:function(){switch(this.itemInfo&&(this.title=lng("edit item")),this.searchData=function(e){return{term:e.term||" ",id:e.ids}},this.itemType){case"content":this.title=this.title||lng("select content"),this.searchUrl="search/content",this.searchData=function(e){return{term:e.term||" ",id:e.ids,idLabelPairs:1}};break;case"assignment":this.title=this.title||lng("select assignment"),this.searchUrl="search/assignments";break;case"portal":this.title=this.title||lng("select sub page"),this.searchUrl="search/portal",this.searchData=function(e,t){return{term:e.term||" ",id:e.ids,active:1,parent:(null==t?void 0:t.parent_id)||(null==t?void 0:t.portal_id),exclude:null==t?void 0:t.portal_id}};break;case"user":this.title=this.title||lng("select user"),this.searchUrl="search/users";break;default:this.title=this.title||lng("new item")}}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,e)}}])&&Ba(t.prototype,n),r&&Ba(t,r),a}(da.I),rl=n(60619),ol=n(88116);function il(e){return(il="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function al(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ll(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?al(Object(n),!0).forEach((function(t){hl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):al(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function sl(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function cl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pl(e,t){return(pl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gl(e);if(t){var o=gl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return fl(this,n)}}function fl(e,t){return!t||"object"!==il(t)&&"function"!=typeof t?ml(e):t}function ml(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gl(e){return(gl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function hl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bl(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var yl=(Ua=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pl(e,t)}(i,e);var t,n,r,o=dl(i);function i(){var e;cl(this,i);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return sl(ml(e=o.call.apply(o,[this].concat(n))),"events",Va,ml(e)),sl(ml(e),"activeCalendarDate",Ha,ml(e)),sl(ml(e),"activeCalendarMonth",Ga,ml(e)),sl(ml(e),"defaultPreferences",Ja,ml(e)),(0,j.makeObservable)(ml(e)),e}return t=i,(n=[{key:"_fetchMonthEvents",value:function(e){var t=this,n=wo.X.get("widget_calendar")||(null==this?void 0:this.defaultPreferences);(0,P.SC)("calendar/get_events",{data:ll(ll({},n),{},{public:1,group_member:1,mine:1,start:e.clone().startOf("month").unix(),end:e.clone().endOf("month").unix()})},(function(n){var r=e.format("YYYY-MM");t.events.set(r,n.map((function(e){return(0,ol.aZ)(e,{displayWorkspace:!0,onClick:function(e){return t.setActiveComponent(e)}})})))}))}},{key:"setActiveComponent",value:function(e){var t=this;(0,ma.vm)().showSideDrawer(e,{tab:"",close:function(){return t.setActiveComponent(null)}})}},{key:"monthEvents",get:function(){if(!this.activeCalendarMonth)return!1;var e=this.activeCalendarMonth.format("YYYY-MM");return this.events.has(e)||(this.events.set(e,!1),this._fetchMonthEvents(this.activeCalendarMonth)),this.events.get(e)}}])&&ul(t.prototype,n),r&&ul(t,r),i}(C.r),Va=bl(Ua.prototype,"events",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ha=bl(Ua.prototype,"activeCalendarDate",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,U.WQ)().startOf("day")}}),Ga=bl(Ua.prototype,"activeCalendarMonth",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ja=bl(Ua.prototype,"defaultPreferences",[j.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{meetings:!0,workspace_events:!0,assignments:!0,courses:!0,group_manager:!0,managed_users_groups:!0,group_owner:!0,instructor:!0}}}),bl(Ua.prototype,"monthEvents",[j.computed],Object.getOwnPropertyDescriptor(Ua.prototype,"monthEvents"),Ua.prototype),Ua),vl=n(28534);function _l(e){return(_l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function xl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jl(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Cl(e,t)}function Cl(e,t){return(Cl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Pl(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Bl(e);if(t){var o=Bl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zl(this,n)}}function Zl(e,t){return!t||"object"!==_l(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Bl(e){return(Bl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Tl=lng("calendar"),El=lng("display user's calender"),Il=(0,r.observer)((function(e){var t,n=e.widget,r=n.style,s=!(null===(t=n.options)||void 0===t||!t.start_agenda),u=!!s||((0,i.tq)()?innerWidth<650:!n.isDouble),p=(0,l.iv)("background-color:transparent;border-radius:0;",(0,i.tq)()||n.isDouble?"":"max-width: calc(72px * 7)",";margin:auto;.headers[class]{&,& ._title,& .el_icon,& th{background-color:",r.bgc,";color:",r.fgc,";}}",n.isDouble&&!(0,i.tq)()&&"._events { overflow: auto; max-height: ".concat(a.g.consts.WIDGET_BASE_HEIGHT-a.g.consts.WIDGET_PADDING_TOP,"px;}")," ._list{color:",a.g.colors.text_main,";}._table{color:",r.fgc,";}","");return(0,c.tZ)(o.a9,{widgetStore:n,editForm:Al,preferencesForm:Dl,children:(0,c.tZ)(rl.V,{css:p,activeDate:n.activeCalendarDate,onDateSelect:function(e){return n.activeCalendarDate=e},onMonthChange:function(e){return n.activeCalendarMonth=e},small:u,theme:"widget",events:n.monthEvents,monthNavigation:n.isDouble&&!s,defaultDayView:s})})})),Al=function(e){jl(n,e);var t=Pl(n);function n(e){var r,o;return Sl(this,n),(o=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?kl(Object(n),!0).forEach((function(t){xl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):kl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_title:!1},e))).title=Tl,(r=o._fields).unshift.apply(r,[{type:"select",name:"options[start_agenda]",label:lng("layout"),options:[{val:"",label:lng("calendar").caps()},{val:1,label:lng("daily agenda").caps()}]}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),Dl=function(e){jl(i,e);var t,n,r,o=Pl(i);function i(e){var t,n,r=wl({},e);Sl(this,i),(n=o.call(this,r)).widgetStore=r.widgetStore;var a=r.widgetStore.data;return n.title=lng("preferences"),n.successMessage=lng("preferences saved"),n._fields=[{type:"checkbox",name:"meetings",label:lng("schedule",{phrase:!0})},{type:"indent_set",fields:[{type:"checkbox",value:!0,disable:function(){return!0},disabled:!0,name:"fake",label:lng("meetings")},{type:"checkbox",name:"workspace_events",label:lng("events")}]},{type:"checkbox",name:"assignments",label:lng("assignments")},{type:"checkbox",name:"courses",label:lng("courses")},Blsm.user.perm.isGroupViewer&&{type:"checkbox",name:"group_manager",label:lng("managed workspaces")},Blsm.user.perm.isOuManager&&{type:"checkbox",name:"managed_users_groups",label:lng("managed user courses")},a.is_owner&&{type:"checkbox",name:"group_owner",label:lng("owned workspaces")},a.is_instructor&&{type:"checkbox",name:"instructor",label:lng("instructed meetings")}],n._prepFields(wo.X.get("widget_calendar")||(null===(t=n.widgetStore)||void 0===t?void 0:t.defaultPreferences)),n.ready=!0,n}return t=i,(n=[{key:"save",value:function(e){wo.X.set("widget_calendar",e),this.widgetStore.defaultPreferences=e,this.widgetStore.events.clear(),this.setActiveSection(null),this.progress=null,this.status="success",this.successMessage&&(0,vl.qV)(this.successMessage),this.onSaveSuccess?this.onSaveSuccess(this.widgetStore):this.SaveSuccess(this.widgetStore)}}])&&Ol(t.prototype,n),r&&Ol(t,r),i}(da.I),Rl={widget:Il,form:Al,widgetName:Tl,widgetDesc:El,store:yl,isAvailable:function(e){return"app"!==e&&"anonymous"!==e}},Nl=n(70656);n(57882);function zl(e){return(zl="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ml(e){return function(e){if(Array.isArray(e))return Jl(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Gl(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ql(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Xl(e,t){return(Xl=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Vl(e);if(t){var o=Vl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ul(this,n)}}function Ul(e,t){return!t||"object"!==zl(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Vl(e){return(Vl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Hl(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Gl(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gl(e,t){if(e){if("string"==typeof e)return Jl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Jl(e,t):void 0}}function Jl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Wl=lng("qualification levels"),Kl=lng("display user's qualification paths"),$l=Wl,Yl=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,s=t.style,u=(null==r?void 0:r.display)||"hierarchy",p=(0,l.iv)(s.borderless?"":"padding: 0 ".concat(a.g.consts.WIDGET_PADDING_SIDE,"px;"),";","");return(0,i.xb)(n)?(0,c.tZ)(o.wf,{widgetStore:t,editForm:os}):(0,c.tZ)(o.a9,{widgetStore:t,editForm:os,children:(0,c.BX)("div",{className:u,css:p,children:["dependencies"===u&&(0,c.tZ)(Ql,{items:n}),"hierarchy"===u&&(0,c.tZ)(ts,{items:n})]})})})),Ql=function(e){var t=e.items,n=(0,l.iv)("._title{margin-bottom:10px;color:",a.g.colors.text_main,";font-weight:bold;}._items{margin-bottom:",a.g.consts.LIST_MARGIN_CONDENSED,"px;>*{margin-inline-start:",10,"px;margin-top:",a.g.consts.LIST_MARGIN_CONDENSED,"px;font-size:.9em;}}","");return(0,c.tZ)("div",{css:[n,a.g.classes.list,"",""],children:t.map((function(e,t){var n;return(0,c.BX)("div",{children:[(0,c.tZ)("span",{className:"_title",children:e.qual_top_name}),(0,c.tZ)("div",{className:"_items",children:null===(n=e.qual_list)||void 0===n?void 0:n.map((function(e,t){return(0,c.tZ)(es,{data:e},t)}))})]},t)}))})},es=function(e){var t=e.data,n=t.c_completed||t.has_perm,r=!n&&!t.user_id,o=r?"lock":n?"sign_ok":"empty",i=(0,l.iv)("","");return(0,c.BX)("div",{css:i,children:[(0,c.tZ)(Mn.JO,{icon:o,css:(0,l.iv)({marginInlineEnd:a.g.consts.ICON_MARGIN},"","")}),r?(0,c.tZ)("div",{children:t.group_name}):(0,c.tZ)(S.A,{theme:"hover",href:{workspace:t.group_id},children:t.group_name})]})},ts=function e(t){return t.items.map((function(t,n){return Array.isArray(t)?(0,c.tZ)(e,{items:t},n):(0,c.tZ)(rs,{qualificationLevel:t},n)}))},ns={name:"je8g23",styles:"pointer-events:none"},rs=function(e){var t=e.qualificationLevel,n=t.depth,r=t.group_id,o=t.group_name,s=t.is_manager,u=t.is_member,p=t.is_owner,d=t.parent,f=t.sons,m=!(null!=f&&f.length),g=null===d,h=Hl((0,gn.useState)(g),2),b=h[0],y=h[1],v=u||s||p,_=s||p?"manager":g||u?null:"lock",w=(0,c.tZ)(Mn.JO,{icon:"empty",buttonLike:!0,css:ns}),O=(0,l.iv)("user-select:none;margin-inline-start:",10*n,"px;.isTopLevel{._title{color:",a.g.colors.text_main,";font-weight:bold;}._items>*{font-size:.9em;}}._items{margin-bottom:",a.g.consts.LIST_MARGIN_CONDENSED,"px;>*{margin-inline-start:",10,"px;}}","");return(0,c.BX)("div",{css:O,className:(0,i.AK)({isTopLevel:g}),children:[(0,c.BX)("div",{className:"_title",children:[m?w:(0,c.tZ)(Mn.JO,{icon:b?"arrow_down":"arrow_far",buttonLike:!0,onClick:function(){return y(!b)}}),_&&(0,c.tZ)(Mn.JO,{icon:_,css:(0,l.iv)({marginInlineEnd:a.g.consts.ICON_MARGIN},"","")}),v?(0,c.tZ)(S.A,{theme:"hover",href:{workspace:r},children:o}):(0,c.tZ)("span",{children:o})]}),b&&!m&&(0,c.tZ)("div",{className:"_items",children:(0,c.tZ)(ts,{items:f})})]})},os=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xl(e,t)}(n,e);var t=Ll(n);function n(e){var r,o,a,l,s,c;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(c=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fl(Object(n),!0).forEach((function(t){ql(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_double_box:!0,allow_hidden_no_data:!0,allow_fgc:!0},e))).title=Wl;var u=(c.widgetStore.editValues.classifications||[]).map((function(e){return{val:e.id,label:e.name}})),p=u.map((function(e){return e.val}));return(0,i.B5)(null===(r=c.widgetStore.options)||void 0===r?void 0:r.classifications)&&(c.widgetStore.options.classifications=[null===(o=c.widgetStore.options)||void 0===o?void 0:o.classifications]),null!==(a=c.widgetStore.options)&&void 0!==a&&a.classifications&&(c.widgetStore.options.classifications=Ml(new Set(null===(l=c.widgetStore.options)||void 0===l?void 0:l.classifications.filter((function(e){return p.includes(e)}))))),(s=c._fields).unshift.apply(s,[{type:"select",name:"options[display]",label:lng("layout"),options:[{val:"hierarchy",label:lng("hierarchy").caps()},{val:"dependencies",label:lng("dependencies").caps()}]},{type:"select",name:"options[mode]",options:[{val:"qualification_role",label:lng("qualification role").caps()},{val:"classifications",label:lng("classifications").caps()}]},{type:"select_multi",label:lng("select classifications").caps(),name:"options[classifications]",options:u,visible:function(){return"classifications"===c.values.get("options[mode]")}}]),c._prepFields(c.widgetStore),c.ready=!0,c}return n}(o.sG),is={widget:Yl,form:os,widgetName:Wl,widgetDesc:Kl,widgetDefaultTitle:$l,isAvailable:function(e){return"app"!==e&&"anonymous"!==e&&Blsm.isFeatureEnabled("qualifications")}};function as(e){return(as="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ls(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ss(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function cs(e,t){return(cs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function us(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ds(e);if(t){var o=ds(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ps(this,n)}}function ps(e,t){return!t||"object"!==as(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ds(e){return(ds=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fs=lng("report list"),ms=lng("display saved, shared or recommended reports"),gs=fs,hs=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.style;if(!Blsm.canAccessModule("Reports"))return null;if((0,i.xb)(n))return(0,c.tZ)(o.wf,{message:lng("nothing to show"),widgetStore:t,editForm:bs});var a={recommended:[lng("recommended"),"bookmark"],shared:[lng("shared"),"share"],personal:[lng("personal"),"user"]},l=n.map((function(e){return e.href=ys(e),e.href?e:null})),s=l.length>5;return(0,c.tZ)(o.a9,{widgetStore:t,editForm:bs,children:(0,c.BX)("div",{css:(0,o.Kv)({widget:t,condensed:s}),children:[l.filter((function(e){return e})).map((function(e,t){return(0,c.tZ)(Ft.o,{title:e.bookmark_name,icon:a[e.type][1],iconTooltip:a[e.type][0],href:(0,S.p4)(e.href),newTab:!0,condensed:s,translucent:r.translucent},t)})),(0,c.tZ)(o.gm,{href:(0,S.p4)({reports:!0}),text:lng("more")+"...",widgetStore:t})]})})})),bs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cs(e,t)}(n,e);var t=us(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ls(Object(n),!0).forEach((function(t){ss(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ls(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({allow_hidden_no_data:!0,allow_fgc:!1,using_strips:!0},e))).title=fs,r._prepFields(r.widgetStore),r.ready=!0,r}return n}(o.sG),ys=function(e){try{if((e.shared||"shared"===e.type)&&e.bookmark_id)return{report:"bookmark",params:{bm_id:e.bookmark_id}};var t=e.bookmark_url;return{report:t.report_name,params:t.parameters,bookmarkId:e.bookmark_id}}catch(t){return console.warn("report list bad item: ",e,t),null}},vs={widget:hs,form:bs,widgetName:fs,widgetDesc:ms,widgetDefaultTitle:gs,isAvailable:function(e){return"app"!==e&&"anonymous"!==e&&Blsm.canAccessModule("Reports")}};function _s(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ws(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ws(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ws(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Os={album:ua,approvals:Qt,assignments:zt,birthdays:x,blog:mn,calendar:Rl,courses:bi,group_report:xe,groups:No,exevents:ei,iframe:Ue,image:Ei,item_list:el,messages:zn,news:Nl.ZP,phonebook:ro,qualification_levels:is,report_list:vs,rss:re,scores:_o,shared_content:er,tasks:_r,text:ot,weather:yt,your_profile:Rr};for(var ks in Os)Os[ks].store||(Os[ks].store=C.r),Os[ks].widgetDesc||(Os[ks].widgetDesc="");var xs=Os,Ss=function(e){var t={external:{label:lng("external sources"),color:a.g.colors.set[1],widgets:["iframe","rss","weather"]},photos:{label:lng("photos"),color:a.g.colors.set[2],widgets:["album","image"]},system:{label:lng("system"),color:a.g.colors.set[6],widgets:["approvals","assignments","calendar","scores","shared_content","tasks","report_list"]},text_links:{label:lng("text & links"),color:a.g.colors.set[8],widgets:["item_list","news","text"]},users:{label:lng("users"),color:a.g.colors.set[10],widgets:["birthdays","phonebook","your_profile"]},social:{label:lng("social"),color:a.g.colors.set[13],widgets:["blog","messages"]},workspaces:{label:lng("workspaces"),color:a.g.colors.set[15],widgets:["courses","groups","qualification_levels","group_report","exevents"]}},n=function(e){for(var n=0,r=Object.entries(t);n<r.length;n++){var o=_s(r[n],2),i=o[0];if(o[1].widgets.includes(e))return i}return"system"},r=[];return Object.entries(Os).map((function(t){var o=_s(t,2),i=o[0],a=o[1];e.mayAddWidgetToPortal(Object.assign(a,{widget_type:i}))&&r.push({type:i,topic:n(i),typeLabel:a.widgetName,text:a.widgetDesc})})),r.sort((function(e,t){return e.topic.localeCompare(t.topic)})),{types:r,topics:t,title:lng("add widget"),onSelect:function(t){var n=e.createEmptyWidget(t);(0,ma.vm)().openDialog("form",new Os[t].form({widgetStore:n,onSaveSuccess:function(t){(0,ma.vm)().closeDialog(),n.updateData(t),e.addWidget(n)}}))}}}},70656:function(e,t,n){"use strict";n.d(t,{ZP:function(){return X},tp:function(){return q}});var r=n(15560),o=n(79990),i=n(71134),a=n(40441),l=n(95875),s=n(16920),c=n(29180);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=h(e);if(t){var o=h(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?g(e):t}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(n,e);var t=f(n);function n(){var e;p(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return b(g(e=t.call.apply(t,[this].concat(o))),"newMenuOptions",e.mayEdit?[{label:lng("edit news list"),onClick:function(){return(0,a.p4)({list:"news_items",params:"t=widget&id=".concat(e.widget_id)},!0)}},Blsm.hasPermission("portal_manager")&&{label:lng("edit the global news list"),onClick:function(){return(0,a.p4)({list:"news_items",params:"t=domain&id=".concat(e.domain_id)},!0)}}]:void 0),e}return n}(n(92517).r),v=n(70917),_=n(68567),w=n(66975),O=n(40965),k=n(35944);function x(e){return(x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function S(e,t){return(S=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function j(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return C(this,n)}}function C(e,t){return!t||"object"!==x(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function P(e){return(P=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function E(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=lng("news"),D=lng("post internal updates and news items"),R={name:"zlj7mt",styles:"border:none;padding:3px"},N=(0,r.observer)((function(e){var t=e.widget,n=t.data,r=t.options,a=t.style;if((0,i.xb)(n.items))return(0,k.tZ)(o.wf,{widgetStore:t,editForm:F});var u=n.items.map((function(e){var n,o=E({},e);o.tags=[];var a=parseInt(o.created);if(r.newer){var l=(0,i.c7)()-r.newer*i.s2;o.markNew=l<a}if(r.show_date){var s=a<(0,i.c7)()-31*i.s2;o.show_date=(0,i.P$)(r.show_date),o.show_time=(0,i.P$)(r.show_time)&&!s,t.isDouble?(o.bigTime=!0,o.highlightFirstTag=!1):(o.tags[0]=(0,i.ey)(o.created,{time:o.show_time,date:o.show_date,hideMidnight:!0,relative:!0}),o.highlightFirstTag=!0)}return r.show_tags&&!(0,i.xb)(e.tags)&&(n=o.tags).push.apply(n,Z(e.tags)),o})),p=u.length>5;return(0,k.BX)(o.a9,{widgetStore:t,editForm:F,children:[(0,k.tZ)("div",{css:(0,o.Kv)({widget:t,condensed:p}),children:u.map((function(e){return(0,k.tZ)(l.o,{css:R,title:e.title,onClick:function(){return q({item:e,widget:t})},newTab:"auto",subTitle:(0,k.tZ)(O.x,{content:e.content}),icon:e.markNew?"asterisk":void 0,iconColor:s.g.colors.dominant_orange,iconTooltip:lng("new|mark new content"),tags:e.tags,highlightFirstTag:e.highlightFirstTag,condensed:p,translucent:a.translucent,children:e.bigTime&&(0,k.tZ)(c.qp,{time:e.created,showDate:e.show_date,showTime:e.show_time,hideMidnight:!0,relative:!0})},e.news_id)}))}),(0,k.tZ)(o.gm,{widgetStore:t})]})})),z=(0,v.iv)("display:flex;flex-direction:column;*{padding:5px;}.title{font-size:1.5em;font-weight:600;color:",s.g.colors.text_main,";}.date{font-size:.9em;color:",s.g.colors.text_sec,";}.content{word-wrap:break-word;&._is_rtl{direction:rtl;text-align:right;}}",""),M=(0,r.observer)((function(e){var t=e.title,n=e.created,r=e.content,o=e.url,i=e.showDate;return(0,k.BX)("div",{css:z,children:[(0,k.tZ)("div",{className:"title",children:t}),i&&(0,k.tZ)("div",{className:"date",children:(0,k.tZ)(c.qp,{time:n,showDate:!0,hideMidnight:!0,relative:!0})}),(0,k.tZ)(O.x,{content:r}),o&&(0,k.BX)(a.A,{theme:"highlight",href:o,children:[(0,k.tZ)(w.JO,{icon:"link"}),o]})]})})),F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&S(e,t)}(n,e);var t=j(n);function n(e){var r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(o=t.call(this,E({allow_limit:!0,allow_hidden_no_data:!0,has_show_more:!0,using_strips:!0},e))).title=A,(r=o._fields).unshift.apply(r,[{type:"hidden",name:"object_id"},{type:"checkbox",name:"options[list_domain]",label:lng("show news items from the global list"),insert:Blsm.hasPermission("portal_manager")},{type:"indent_set",visible:function(e){return e.get("options[list_domain]")},insert:Blsm.hasPermission("portal_manager"),fields:[{type:"tags",name:"tags",label:lng("filter by tags"),objectType:"News"}]},{type:"number",min:0,max:99,name:"options[newer]",label:lng("mark as new when newer than %s days").split("%s")[0],unit:lng("mark as new when newer than %s days").split("%s")[1]},{type:"checkbox",name:"options[show_date]",label:lng("show date")},{type:"checkbox",name:"options[show_time]",label:lng("show time"),visible:function(){return(0,i.P$)(o.values.get("options[show_date]"))}},{type:"checkbox",name:"options[show_tags]",label:lng("show tags")},{type:"number",min:0,max:99,name:"options[days]",label:lng("include last %s days").split("%s")[0],unit:lng("include last %s days").split("%s")[1]}]),o._prepFields(o.widgetStore),o.ready=!0,o}return n}(o.sG),q=function(e){var t=e.item,n=e.widget;(0,_.qR)((0,k.tZ)(M,E({},t)),{title:(null==n?void 0:n.title)||t.widget_title})},X={widget:N,form:F,widgetName:A,widgetDesc:D,store:y}},41226:function(e,t,n){"use strict";n.d(t,{om:function(){return v},rZ:function(){return k},yy:function(){return O}});var r=n(70917),o=n(16920),i=n(73105),a=n(66975),l=n(15560),s=n(70081),c=n(8411),u=n(539),p=n(99234),d=n(7392),f=n(71134),m=n(35944);function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){b(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y={name:"1stddr4",styles:"width:calc(100% + 30px);.row{display:flex;justify-content:space-between;height:42px;}.bottom{height:15px;}"},v=function(e){var t=e.scores,n=e.last;return(0,m.BX)("div",{css:y,children:[(0,m.tZ)("div",{className:"row",children:null==t?void 0:t.map((function(e,t){return(0,m.tZ)(w,h(h({},e),{},{fixedLength:2}),t)}))}),(0,m.tZ)("div",{className:"bottom",children:(null==n?void 0:n.val)>0&&(0,m.tZ)(w,h(h({},n),{},{oneRow:!0}),"last")})]})},_=function(e,t){return(0,r.iv)("padding:2px;color:",t&&e,";text-align:center;.info{color:",e,";font-size:14px;}.label{font-size:.9em;",o.g.classes.margin_near("3px"),";.twoRows{color:",o.g.colors.text_light_disabled,";",o.g.classes.margin_near("0"),";}}.sub{padding:2px;font-size:10px;}","")},w=function(e){var t=e.val,n=e.label,r=e.color,o=e.icon,l=e.sub,s=e.oneRow,c=e.fixedLength,u=function(e){return(0,f.kE)(e)?(Math.round(100*e)/100).toFixed(c):"---"};return(0,m.BX)("div",{css:_(r,s),children:[(0,m.tZ)(i.u,{text:n,children:(0,m.BX)("span",{className:s?"":"info",children:[(0,m.tZ)(a.JO,{icon:o,color:r})," ",u(t)]})}),(null==l?void 0:l.val)>0&&(0,m.tZ)("span",{className:"sub",children:(0,m.BX)(i.u,{text:l.label,children:["(",u(l.val),")"]})}),!s&&(0,m.tZ)("br",{}),(0,m.tZ)("span",{className:(0,f.AK)("label",{twoRows:!s}),children:n})]})},O=(0,l.observer)((function(e){var t=e.dashboardsStore,n=t.activeDashboard,r=t.dashboardData,o=t.moreAvailable,i=t.loadingMore,a=t.getMore,l=(0,s.qD)(t.assignmentsFilters),f=l.filtersVals,g=l.setFilterVals,h=l.sort,b=l.setSort,y=[{name:"assignment_name",label:lng("name"),type:"text",outOfMenu:!0,wrapped:!0},{name:"lesson_description",label:lng("description"),type:"text"}],v=[{val:"",label:lng("default")},{val:"assignment_name",label:lng("name")},{val:"due_date",label:lng("date")}];return(0,m.BX)(m.HY,{children:[(0,m.tZ)(c.CX,{filters:y,filtersVals:f,onFilter:g,sorts:v,sort:h,onSort:b,collection:"loading"===r?[]:r}),"loading"===r?(0,m.tZ)(u.$,{}):(0,m.BX)("div",{children:[(0,m.tZ)(p.TY,{workspaces:r,page:"dashboard",activeTab:n}),o&&(i?(0,m.tZ)(u.$,{}):(0,m.tZ)(d.l,{onClick:a,style:{display:"block"},children:lng("more").caps()+"..."}))]})]})})),k=(0,l.observer)((function(e){var t=e.dashboardsStore,n=t.activeDashboard,r=t.dashboardData,o=(0,s.qD)(t.groupsFilters),i=o.filtersVals,a=o.setFilterVals,l=o.sort,d=o.setSort,f=[{name:"group_name",label:lng("name"),type:"text",outOfMenu:!0,wrapped:!0},{name:"classification_name",label:lng("classification"),type:"text"}],g=[{val:"",label:lng("default")},{val:"group_name",label:lng("name")},{val:"classification_name",label:lng("classification")},{val:"group_type",label:lng("type")}];return(0,m.BX)(m.HY,{children:[(0,m.tZ)(c.CX,{filters:f,filtersVals:i,onFilter:a,sorts:g,sort:l,onSort:d,collection:"loading"===r?[]:r}),"loading"===r?(0,m.tZ)(u.$,{}):(0,m.tZ)("div",{children:(0,m.tZ)(p.TY,{workspaces:r,page:"dashboard",activeTab:n})})]})}))},33079:function(e,t,n){"use strict";n.d(t,{N:function(){return o},q:function(){return i}});var r=n(40441),o=function(e){var t=e.user_id,n=e.is_manager,o=e.auth_permission,i=e.ou_auth_permission,a={user:t},l=t==Blsm.user.id,s=l||n,c=Blsm.checkMod(["","ENT"]);return[s&&{label:lng("course status report").caps(),href:(0,r.p4)({report:"ReportCourseCompletion",params:a})},s&&{label:lng("status report").caps(),href:(0,r.p4)({report:"ReportUserStatus",params:a})},s&&{label:lng("performances log").caps(),href:(0,r.p4)({report:"ReportUserPerformancesLog",params:a})},s&&c&&{label:lng("qualification courses status").caps(),href:(0,r.p4)({report:"ReportUserQualificationStatus",params:a})},s&&{label:lng("usage report").caps(),href:(0,r.p4)({report:"UsageReport",params:a})},s&&{label:lng("meetings report").caps(),href:(0,r.p4)({report:"User_meetingsReport",params:a})},s&&{label:lng("basic qualification report").caps(),href:(0,r.p4)({report:"BasicQualificationReport",params:{user:t,self:l?1:""}})},s&&c&&{label:lng("compliance report").caps(),href:(0,r.p4)({report:"ComplianceReport",params:a})},l&&{label:lng("member course grades report").caps(),href:(0,r.p4)({report:"CourseGradesReport",params:{user_mode:1}})},o&&{label:lng("user's job authorizations").caps(),href:(0,r.p4)({report:"QualificationAuthorizations",params:a})},i&&{label:lng("job authorizations status"),href:(0,r.p4)({report:"OuAuthorizations",params:{user:l?void 0:t}})}].filter((function(e){return e}))},i=function(e,t,n){return["Survey"===t&&{title:lng("survey report").caps(),href:(0,r.p4)({report:"SurveyReport",params:{assignment:e}})},"regular"===n&&["File","Test","Courseware"].includes(t)&&{title:lng("success report").caps(),href:(0,r.p4)({report:"ReportSuccess",params:{assignment:e}})},{title:lng("completion report").caps(),href:(0,r.p4)({report:"ReportCompletion",params:{assignment:e}})},"regular"===n&&["Test","Survey","Courseware","Evaluation","Form","Checklist"].includes(t)&&{title:lng("question distribution report").caps(),href:(0,r.p4)({report:"ReportQuestionDistribution",params:{assignment:e}})},"regular"===n&&{title:lng("league report").caps(),href:(0,r.p4)({report:"Report_League",params:{assignment:e}})}]}},33661:function(e,t,n){"use strict";n.d(t,{W:function(){return g},w:function(){return m}});var r=n(98e3),o=n(42755),i=n(35944),a=["multiple","name","type","mine","rules","inner_filters","idColumn"],l=["term","ids"];function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){u(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var m={group:"groups",assignment:"assignments",user:"users",creator:"users",ou:"groups",qualification:"groups",resourcebundle:"groups",classification:"classification",question:"question",external_course_type:"external_course_type",food_provider:"food_provider",content:"content",resource:"resource"},g=function(e,t,n){var s=e.multiple,u=e.name,d=e.type,g=e.mine,h=e.rules,b=e.inner_filters,y=e.idColumn,v=f(e,a);switch(d){case"group":v.sons=s?1:0;break;case"assignment":v.related=s?1:0;break;case"ou":v.group_type="Ou",v.sons=s?1:0;break;case"qualification":v.group_type="Qualification",v.conditions=1;break;case"resourcebundle":v.group_type="ResourceBundle"}var _=[{label:lng("select my primary org' units").caps(),val:"mypou"},{label:lng("select my direct org' units").caps(),val:"myou"},{label:lng("select all my org' units").caps(),val:"mysubou"}];return{data:e,type:s?"multiple_items":"single_item",name:d,addAll:s,addMine:g,mineMenu:_,innerFilters:b,rules:h,filterType:"items",label:u,idColumn:y,searchData:function(e,n){var o=e.term,i=e.ids,a=f(e,l);if("question"===d&&t){var s=t.filter((function(e){return!(null!=i&&i.includes(e.id))}));o&&s&&(s=t.filter((function(e){return e.value.toLowerCase().search(o.toLowerCase())>0}))),n(s)}else Object.keys(v).forEach((function(e){!0===v[e]&&(v[e]=1)})),delete v.explanation,delete v.help,(0,r.SC)("reports/filter/"+m[d],{method:"post",json:!0,data:c(c(c({},v),a),{},{term:o,id:i})},n)},buttons:[{Render:function(e){var t,r,a=e.item,l=e.name,s=function(e){var t=new Set(n.values.get(l)||[]),r=e.some((function(e){return t.has(e)}));e.forEach((function(e){return r?t.delete(e):t.add(e)})),n.updateValue(p(t.values()),l)};return(null===(t=a.conditions)||void 0===t?void 0:t.length)>0?(0,i.tZ)(o.ZT,{toolTip:lng("add/remove conditions"),onClick:function(){return s(a.conditions)},size:27,icon:"tree"}):(null===(r=a.sons)||void 0===r?void 0:r.length)>0?(0,i.tZ)(o.ZT,{toolTip:lng("add/remove children"),onClick:function(){return s(a.sons)},size:27,icon:"hierarchy"}):""},props:{name:d}}]}}},40554:function(e,t,n){"use strict";n.d(t,{m:function(){return de},i:function(){return pe}});var r=n(87363),o=n.n(r),i=n(27821),a=n(98e3),l=n(71134),s=n(40441),c=n(23838),u=n(44401),p=n(68567),d=n(24210);function f(e){return(f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(i,e);var t,n,r,o=h(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),_(y(t=o.call(this,e)),"calendarId",null),_(y(t),"calendarInfo",{}),t.calendarId=null==e?void 0:e.calendarId,t.title=lng("calendar"),t.calendarId?(0,a.SC)("calendar/".concat(t.calendarId),{},(function(e){t.calendarInfo=e,t.calendarInfo.user_id=e.user_id||"on",t._buildFields()})):t._buildFields(),t}return t=i,(n=[{key:"_buildFields",value:function(){this._fields=[{type:"text",name:"name",label:lng("calendar name"),required:!0},{type:"color",name:"color",label:lng("color")}],Blsm.user.isPowerManager&&this._fields.push({type:"select",name:"user_id",options:[{val:Blsm.user.id,label:lng("personal").caps()},{val:"on",label:lng("public").caps()}]}),this._prepFields(this.calendarInfo),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("calendar/".concat(this.calendarId),e)}}])&&m(t.prototype,n),r&&m(t,r),i}(d.I),O=n(28534),k=n(22334),x=n(86344),S=n(7392),j=n(35944);function C(e){return(C="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Z(e,t){return(Z=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function B(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return T(this,n)}}function T(e,t){return!t||"object"!==C(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var I,A,D,R,N,z,M,F,q,X,L,U,V,H,G,J,W,K,$,Y,Q,ee,te,ne,re={name:"1d3w5wq",styles:"width:100%"},oe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Z(e,t)}(i,e);var t,n,r,o=B(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).title=lng("select type"),t.calStor=e.data.calStor,t.buildDialog(e.data.selectionInfo),t}return t=i,(n=[{key:"buildDialog",value:function(e){var t=this;this._fields=[{type:"component",node:(0,j.tZ)(S.l,{component:s.A,css:re,theme:"outlined",href:{edit:"workspace",params:{type:"course",start:e.startStr,end:e.endStr},section:"timing"},children:lng("course").caps()})},{type:"component",node:(0,j.tZ)(S.l,{theme:"outlined",css:re,onClick:function(){e.allDay&&(e.startStr+=" 09:00",e.endStr=e.end.toISOString().substring(0,10)+" 10:00"),t.calStor.openCalendarEventForm(e)},children:lng("event").caps()})}],this._prepFields(),this.ready=!0}}])&&P(t.prototype,n),r&&P(t,r),i}(d.I);function ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return ae(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ae(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ae(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function le(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ce(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var pe=(0,r.createContext)(null),de=(I=i.action.bound,A=i.action.bound,D=i.action.bound,R=i.action.bound,N=i.action.bound,z=i.action.bound,M=i.action.bound,F=i.action.bound,q=i.action.bound,X=i.action.bound,L=i.action.bound,U=i.action.bound,H=ue((V=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),le(this,"ready",H,this),ce(this,"calendarRef",o().createRef()),ce(this,"agenda",{}),ce(this,"otherCalendars",[]),le(this,"mineCalendars",G,this),le(this,"title",J,this),le(this,"viewType",W,this),ce(this,"viewTypes",{month:"dayGridMonth",week:"timeGridWeek",day:"timeGridDay"}),le(this,"start",K,this),le(this,"todayDisabled",$,this),le(this,"activeCalendars",Y,this),le(this,"refresh",Q,this),le(this,"resources",ee,this),le(this,"resourceBundle",te,this),le(this,"preferences",ne,this),ce(this,"allMyCalendars",1),ce(this,"allOtherCalendars",1),ce(this,"_internalNav",!0),(0,i.makeObservable)(this),this.nav=r,this.ready=!1,(0,a.SC)("calendar",{},(function(e){n.agenda=e.calendars.agenda,n.otherCalendars=e.calendars.other,n.otherCalendars.forEach((function(e){return(0,i.set)(n.activeCalendars,e.id,!n.excludeWhenReady.includes(e.id))})),n.mineCalendars.replace(e.calendars.mine),n.mineCalendars.forEach((function(e){return(0,i.set)(n.activeCalendars,e.id,!n.excludeWhenReady.includes(e.id))})),(0,i.autorun)((function(){var e;n.nav([Object.keys((0,l.v7)(n.activeCalendars,(function(e){return!e}))),n.resources,n.resourceBundle,n.preferences,n.start,n.viewType],{replace:!0}),n._internalNav||"month"===n.viewType&&(n.start=n.handleStartDate(n.start)),null===(e=n.calendarRef.current)||void 0===e||e.refresh()})),n.ready=!0}))}var t,n,r;return t=e,(n=[{key:"handleStartDate",value:function(e){var t=(0,k._3)(e);return t.date()>15?t.add(1,"month").startOf("month"):t.startOf("month"),t.format().substring(0,10)}},{key:"updateRoute",value:function(e){var t=ie(e,6),n=t[0],r=t[1],o=t[2],i=t[3],a=t[4],s=t[5];if(this._internalNav=!0,this.ready){n=(0,l.PG)(n);for(var c=0,u=Object.keys(this.activeCalendars);c<u.length;c++){var p=u[c];this.activeCalendars[p]=!n.includes(p)}}else this.excludeWhenReady=n||[];r=(0,l.PG)(r);for(var d=0,f=Object.keys(this.resources);d<f.length;d++){var m=f[d];this.resources[m]=r[m]}o=(0,l.PG)(o);for(var g=0,h=Object.keys(this.resourceBundle);g<h.length;g++){var b=h[g];this.resourceBundle[b]=o[b]}if(i)for(var y=0,v=Object.keys(this.preferences);y<v.length;y++){var _=v[y];this.preferences[_]=i[_]}this.start=a,this.viewType=s,this.ready||(this._internalNav=!1)}},{key:"updateFromFC",value:function(e){this.title=e.title,this.viewType=e.viewType,this.todayDisabled=e.todayDisabled,this.start=this.handleStartDate(e.dateInfo.start)}},{key:"checkCalendars",value:function(e,t){for(var n={},r=0,o=Object.entries(this.activeCalendars);r<o.length;r++){var a=ie(o[r],1)[0];((0,l.B5)(a)&&"allMyCalendars"==t||!(0,l.B5)(a)&&"allOtherCalendars"==t)&&(n[a]=e)}(0,i.set)(this.activeCalendars,n),this[t]=!!e}},{key:"getEvents",value:function(e,t){for(var n={start:e.start.getTime()/1e3,end:e.end.getTime()/1e3+l.s2},r=0,o=Object.entries(this.preferences);r<o.length;r++){var i=ie(o[r],2),c=i[0],u=i[1];n[c]=u}Object.assign(n,{group_resource_visibility:"all",resources:this.resources,resource_bundles:this.resourceBundle});for(var p=[],d=0,f=Object.entries(this.activeCalendars);d<f.length;d++){var m=ie(f[d],2),g=m[0];m[1]&&((0,l.B5)(g)||["events","blocking_events"].includes(g)?p.push(g):n[g]=1)}n.cal=p.toString(),(0,a.SC)("calendar/get_events/&",{data:n},(function(e){var n=e.map((function(e){var t,n,r,o,i,a=e.id,c=e.allDay,u=e.whole_day,p=e.title,d=e.url,f=e.backgroundColor,m=e.textColor,g=e.className,h=e.color,b=e.start_time,y=e.end_time,v=e.hasEditPermission,_=e.type,w=e.canAccessGroup,O=e.group_id,S=e.repeat_type;if("event"!==_||void 0!==a||e.data||(a=e.event_id),i=a,!b||!y)return!1;switch(t=b,n=y,c&&(n=(0,k._3)(n).add(1,"days").toISOString()),f=f?(0,l.kE)(f)?(0,x.gj)(f):f:(0,l.kE)(h)?(0,x.gj)(h):h,m=(0,x.ou)(f),o=r=!(0,l.tq)()&&!!v,_){case"meeting":d=v&&!(0,l.tq)()?(0,s.p4)({edit:"meeting",id:a}):w?(0,s.p4)({workspace:O,tab:"schedule"}):!!/managed_users_groups/.test(g)&&(0,s.p4)({report:"UserCourseParticipation",params:{group:O}});break;case"event":d=!1,!v&&w&&(d=(0,s.p4)({workspace:O,tab:"schedule"})),u&&(c=!0);break;case"group":d=(0,s.p4)({workspace:a})}var j={id:a,allDay:c,title:p,backgroundColor:f,textColor:m,className:g,start:t,end:n,startEditable:r,durationEditable:o,groupId:i,extendedProps:{type:_,repeat_type:S}};return d&&(j.url=d),j}));t(n.filter((function(e){return!!e})))}))}},{key:"eventClick",value:function(e){"event"===e.event.extendedProps.type&&e.event.durationEditable&&(0,c.vm)().openDialog("form",new u.Z({event:e.event,store:this}))}},{key:"eventMouseEnter",value:function(e){e.el.title=e.event._def.title}},{key:"updateEventDates",value:function(e,t){var n;n=t?e.endDelta:e.delta;var r=Math.floor(n.milliseconds/6e4);(0,a.SC)("calendar/update_event_dates",{method:"POST",data:{event_id:e.event.id,dayDelta:n.days,minuteDelta:r,end_only:t}},(function(t){t.message||1===t.error?((0,O.Mj)(t.message||lng("An error occurred")),e.revert()):1==t&&(0,O.qV)(lng("event moved successfully")+": "+e.event.title)}))}},{key:"updateMeetingDates",value:function(e,t){(0,p.BB)(lng("send an email invitation with an update about the meeting time?").caps(),{confirmText:lng("yes").caps(),cancelText:lng("no").caps(),onConfirm:function(){return n(e,!0,t)},onCancel:function(){return n(e,!1,t)}});var n=function(e,t,n){var r;r=n?e.endDelta:e.delta;var o=Math.floor(r.milliseconds/6e4);(0,a.SC)("calendar/update_meeting_dates",{method:"POST",data:{assignment_id:e.event.id,dayDelta:r.days,minuteDelta:o,end_only:n,sendMailToUsers:t,sendMailToResources:t}},(function(t){t.message||1===t.error?((0,O.Mj)(t.message||lng("An error occurred")),e.revert()):(0,O.qV)(lng("meeting moved successfully")+": "+e.event.title)}))}}},{key:"eventDrop",value:function(e){"event"!==e.event.extendedProps.type||e.delta.milliseconds?"meeting"===e.event.extendedProps.type?this.updateMeetingDates(e):e.revert():e.relatedEvents.length>0?((0,O.nb)(lng("cannot move a repeating event")),e.revert()):e.event.allDay?this.updateEventDates(e):((0,O.nb)(lng("can only move whole day events")),e.revert())}},{key:"eventResize",value:function(e){"event"===e.event.extendedProps.type&&this.updateEventDates(e,!0),"meeting"===e.event.extendedProps.type&&this.updateMeetingDates(e,!0)}},{key:"datesSelect",value:function(e,t){Blsm.user.perm.group_admin?(0,c.vm)().openDialog("form",new oe({data:{selectionInfo:e,calendarRef:t,calStor:this}})):this.openCalendarEventForm(e)}},{key:"mayAddEvent",value:function(){return this.mineCalendars.length>0}},{key:"openCalendarEventForm",value:function(e){this.mayAddEvent()?(0,c.vm)().openDialog("form",new u.Z({selectionInfo:e,store:this})):(0,O.nb)(lng("please add at least one personal calendar before creating an event"))}},{key:"addCalendar",value:function(){var e=this,t=new w({onSaveSuccess:function(t){for(var n={},r=0,o=Object.entries(t);r<o.length;r++){var a=ie(o[r],2),l=a[0],s=a[1];n[l]=s}n.created=null,e.mineCalendars.push(n),(0,i.set)(e.activeCalendars,n.id,!e.excludeWhenReady.includes(n.id)),(0,c.vm)().closeDialog()}});(0,c.vm)().openDialog("form",t)}},{key:"updateCalendar",value:function(e){var t=e.calendar,n=new w({calendarId:t.id,onSaveSuccess:function(e){for(var n=0,r=Object.entries(e);n<r.length;n++){var o=ie(r[n],2),i=o[0],a=o[1];t[i]=a}(0,c.vm)().closeDialog()}});(0,c.vm)().openDialog("form",n)}},{key:"deleteCalendar",value:function(e){var t=this,n=e.calendar;(0,p.BB)(lng("are you sure you want to delete this calendar?".caps()),{title:lng("delete").caps(),onConfirm:function(){return(0,a.SC)("calendar/"+n.id,{method:"DELETE"},(function(){t.mineCalendars.remove(n),t.activeCalendars[n.id]=!1,(0,c.vm)().closeDialog()}))}})}}])&&se(t.prototype,n),r&&se(t,r),e}()).prototype,"ready",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),G=ue(V.prototype,"mineCalendars",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J=ue(V.prototype,"title",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),W=ue(V.prototype,"viewType",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"month"}}),K=ue(V.prototype,"start",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),$=ue(V.prototype,"todayDisabled",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y=ue(V.prototype,"activeCalendars",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Q=ue(V.prototype,"refresh",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ee=ue(V.prototype,"resources",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),te=ue(V.prototype,"resourceBundle",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ne=ue(V.prototype,"preferences",[i.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{meetings:1,workspace_events:1,assignments:1,courses:0,blocking_events:""}}}),ue(V.prototype,"updateRoute",[I],Object.getOwnPropertyDescriptor(V.prototype,"updateRoute"),V.prototype),ue(V.prototype,"updateFromFC",[A],Object.getOwnPropertyDescriptor(V.prototype,"updateFromFC"),V.prototype),ue(V.prototype,"checkCalendars",[i.action],Object.getOwnPropertyDescriptor(V.prototype,"checkCalendars"),V.prototype),ue(V.prototype,"getEvents",[D],Object.getOwnPropertyDescriptor(V.prototype,"getEvents"),V.prototype),ue(V.prototype,"eventClick",[R],Object.getOwnPropertyDescriptor(V.prototype,"eventClick"),V.prototype),ue(V.prototype,"eventMouseEnter",[N],Object.getOwnPropertyDescriptor(V.prototype,"eventMouseEnter"),V.prototype),ue(V.prototype,"eventDrop",[z],Object.getOwnPropertyDescriptor(V.prototype,"eventDrop"),V.prototype),ue(V.prototype,"eventResize",[M],Object.getOwnPropertyDescriptor(V.prototype,"eventResize"),V.prototype),ue(V.prototype,"datesSelect",[F],Object.getOwnPropertyDescriptor(V.prototype,"datesSelect"),V.prototype),ue(V.prototype,"openCalendarEventForm",[q],Object.getOwnPropertyDescriptor(V.prototype,"openCalendarEventForm"),V.prototype),ue(V.prototype,"addCalendar",[X],Object.getOwnPropertyDescriptor(V.prototype,"addCalendar"),V.prototype),ue(V.prototype,"updateCalendar",[L],Object.getOwnPropertyDescriptor(V.prototype,"updateCalendar"),V.prototype),ue(V.prototype,"deleteCalendar",[U],Object.getOwnPropertyDescriptor(V.prototype,"deleteCalendar"),V.prototype),V)},76259:function(e,t,n){"use strict";n.d(t,{Z:function(){return Y},s:function(){return $}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w,O,k,x,S=n(27821),j=n(87363),C=n(98e3),P=n(37659),Z=n(10101),B=n(24210),T=n(71134),E=n(66975),I=n(23838),A=n(40441),D=n(35944);function R(e){return(R="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function N(e,t){return(N=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=q(e);if(t){var o=q(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return M(this,n)}}function M(e,t){return!t||"object"!==R(t)&&"function"!=typeof t?F(e):t}function F(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||U(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return V(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function G(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function J(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function W(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function K(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var $=(0,j.createContext)(null),Y=(r=S.observable.shallow,o=S.observable.shallow,i=S.observable.shallow,a=S.action.bound,l=S.action.bound,s=S.action.bound,c=S.action.bound,u=S.action.bound,p=S.action.bound,d=S.action.bound,m=K((f=function(){function e(t){var n=t.nav;G(this,e),H(this,"ready",m,this),H(this,"activeOu",g,this),H(this,"loading",h,this),H(this,"content",b,this),H(this,"contentCount",y,this),H(this,"tags",v,this),H(this,"skills",_,this),W(this,"tag_categories",[]),W(this,"filtersForm",null),H(this,"pageSize",w,this),W(this,"_initialFilters",void 0),H(this,"_curPage",O,this),W(this,"_categoriesTree",[]),(0,S.makeObservable)(this),this.nav=n,this._fetch=(0,T.Ds)(this._fetch,500)}var t,n,r;return t=e,(n=[{key:"updateNav",value:function(){var e;this.nav([null===(e=this.filtersForm)||void 0===e?void 0:e.buildFinalValues(),this.curPage],{replace:!0})}},{key:"_fetch",value:function(){var e,t=this;this.loading=!0,null===(e=this._curFetch)||void 0===e||e.abortFetch();var n=this.ready?this.filtersForm.buildFinalValues():this._initialFilters||{};n.page=this.curPage,this._curFetch=(0,C.SC)("catalog/shared",{data:n},(0,S.action)((function(e){var n=e.shared,r=e.catalog_tree,o=e.most_common_tags,i=e.skills,a=e.tag_categories,l=e.page_size,s=e.count,c=e.bookmarks_count;t.bookmarksCount=c,t.ready||(t.filtersForm=new Q({initialValues:t._initialFilters,categoriesTree:t._categoriesTree=r,onValueChange:function(){void 0===t._curPage?t.updateNav():t.curPage=void 0}}),t.tag_categories=a,t._categoriesTagIds=a.reduce((function(e,t){var n=t.tags;return[].concat(L(e),L(n.map((function(e){return e.tag_id}))))}),[])),t.pageSize=l,t.contentCount=s,t.content.replace(n.map((function(e){return new P.m(e,{deleteContent:t.deleteContent})}))),t.tags.replace(o.map((function(e){return e[1]}))),t.skills=i;var u=t.filtersForm.getValue("tags");if(null!=u&&u.length){var p=[].concat(L(o.map((function(e){return e[0].toString()}))),L(t._categoriesTagIds));t.filtersForm.updateValue(u.filter((function(e){return p.includes(e)})),"tags",void 0,!0)}t.loading=!1,t.ready=!0})))}},{key:"deleteContent",value:function(e){this.content=this.content.filter((function(t){return t!==e}))}},{key:"updateRoute",value:function(e){var t=X(e,2),n=t[0],r=t[1];"shared"!==n&&"bookmarks"!==n&&"trending"!==n||(r=r||{},"bookmarks"===n&&(r.bookmarked=1),n=r,r=void 0),this.loading=!0,this.filtersForm?this.filtersForm.setValues(n,{clear:!0}):this._initialFilters=n,this._curPage=r,this._fetch()}},{key:"toggleSkillSelection",value:function(e){var t=this.selectedSkills;t[t.has(e)?"delete":"add"](e),this.filtersForm.updateValue(L(t),"skills")}},{key:"clearSkillsSelection",value:function(){var e=this.selectedSkills;e.clear(),this.filtersForm.updateValue(L(e),"skills")}},{key:"toggleTagSelection",value:function(e){var t=this.selectedTags;t[t.has(e)?"delete":"add"](e),this.filtersForm.updateValue(L(t),"tags")}},{key:"clearTagSelection",value:function(){var e=this.selectedTags;e.clear(),this.filtersForm.updateValue(L(e),"tags")}},{key:"setCategoryId",value:function(e){this.filtersForm.updateValue(e,"cat")}},{key:"haveMyContentPermission",value:function(){return Blsm.canAccessModule("Content|Questionnaires")||Blsm.hasPermission("blogs")}},{key:"mayDragFiles",value:function(){return this.haveMyContentPermission()}},{key:"onFileDrop",value:function(e){(0,I.vm)().formPassData=e,(0,A.p4)({edit:"share",params:{multipleFromFiles:!0}},!0)}},{key:"selectedSkills",get:function(){return new Set(this.filtersForm.getValue("skills"))}},{key:"selectedTags",get:function(){return new Set(this.filtersForm.getValue("tags"))}},{key:"curPage",get:function(){return this._curPage>0?this._curPage:void 0},set:function(e){this._curPage=e,this.updateNav()}},{key:"subCategories",get:function(){var e=this.filtersForm.getValue("cat");if(e){var t=(0,T.oH)(this._categoriesTree,(function(t){return(null==t?void 0:t.id)===""+e}));return null==t?void 0:t.sons}return this._categoriesTree.filter((function(e){return e.id}))}},{key:"categoryBreadCrumbs",get:function(){var e=[],t=this.filtersForm.getValue("cat");if(t){var n={id:"",label:lng("all categories")};return(0,T.oH)(this._categoriesTree,(function(e){return(null==e?void 0:e.id)===""+t}),e)?[n].concat(e):[n]}return e}}])&&J(t.prototype,n),r&&J(t,r),e}()).prototype,"ready",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=K(f.prototype,"activeOu",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=K(f.prototype,"loading",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),b=K(f.prototype,"content",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=K(f.prototype,"contentCount",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=K(f.prototype,"tags",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_=K(f.prototype,"skills",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),w=K(f.prototype,"pageSize",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),O=K(f.prototype,"_curPage",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),K(f.prototype,"updateNav",[a],Object.getOwnPropertyDescriptor(f.prototype,"updateNav"),f.prototype),K(f.prototype,"deleteContent",[l],Object.getOwnPropertyDescriptor(f.prototype,"deleteContent"),f.prototype),K(f.prototype,"updateRoute",[S.action],Object.getOwnPropertyDescriptor(f.prototype,"updateRoute"),f.prototype),K(f.prototype,"toggleSkillSelection",[s],Object.getOwnPropertyDescriptor(f.prototype,"toggleSkillSelection"),f.prototype),K(f.prototype,"clearSkillsSelection",[c],Object.getOwnPropertyDescriptor(f.prototype,"clearSkillsSelection"),f.prototype),K(f.prototype,"selectedSkills",[S.computed],Object.getOwnPropertyDescriptor(f.prototype,"selectedSkills"),f.prototype),K(f.prototype,"selectedTags",[S.computed],Object.getOwnPropertyDescriptor(f.prototype,"selectedTags"),f.prototype),K(f.prototype,"toggleTagSelection",[u],Object.getOwnPropertyDescriptor(f.prototype,"toggleTagSelection"),f.prototype),K(f.prototype,"clearTagSelection",[p],Object.getOwnPropertyDescriptor(f.prototype,"clearTagSelection"),f.prototype),K(f.prototype,"subCategories",[S.computed],Object.getOwnPropertyDescriptor(f.prototype,"subCategories"),f.prototype),K(f.prototype,"categoryBreadCrumbs",[S.computed],Object.getOwnPropertyDescriptor(f.prototype,"categoryBreadCrumbs"),f.prototype),K(f.prototype,"mayDragFiles",[d],Object.getOwnPropertyDescriptor(f.prototype,"mayDragFiles"),f.prototype),f),Q=(k=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&N(e,t)}(n,e);var t=z(n);function n(e){var r,o=e.initialValues,i=e.categoriesTree,a=e.onValueChange;return G(this,n),H(F(r=t.call(this,{onValueChange:a})),"expanded",x,F(r)),(0,S.makeObservable)(F(r)),(0,Z.v0)(i),r._fields=[{type:"hidden",name:"tags"},{type:"hidden",name:"skills"},{type:"hidden",name:"page_size"},{type:"row_set",fields:[{type:"search",name:"term",placeholder:lng("search").caps()},{type:"component",grow:0,node:(0,D.tZ)(E.JO,{icon:"filter",className:"mobile_only",buttonLike:!0,onClick:function(){return r.expanded=!r.expanded}})}]},{type:"select",name:"sort",label:lng("sort by"),options:(0,T.wd)([["original-order",lng("default")],["name",lng("name")],["lesson_description",lng("description")],["category_name",lng("category")],["views",lng("popularity")]])},{type:"row_set",fields:[{type:"tree_node",name:"cat",label:lng("category"),tree:i,nameField:"label"},{type:"component",grow:0,node:(0,D.tZ)(E.JO,{icon:"edit",buttonLike:!0,onClick:function(){return(0,A.p4)({categoryTree:!0},!0)}}),insert:Blsm.user.isPowerManager}]},{type:"select_multi",name:"content_types",label:lng("content type"),onValueChange:function(e){return!e.includes("Text")&&r.updateValue(null,"textsub")},options:(0,T.wd)([["File",lng("file")],["Survey",lng("survey")],["Test",lng("test")],["Evaluation",lng("evaluation")],["Lti","lti"],["Text",lng("text")],["Kaltura",lng("video (advanced)")]])},{type:"select_multi",name:"textsub",label:lng("text type"),visible:function(e){var t;return null===(t=e.get("content_types"))||void 0===t?void 0:t.includes("Text")},options:(0,T.wd)([["text",lng("general"),!0],["wiki",lng("wiki"),!0],["glossary",lng("glossary"),!0],["faq",lng("faq"),!0],["dictionary",lng("dictionary"),!0]])},{type:"select_multi",name:"duration",label:lng("estimated duration"),options:(0,T.wd)([["0_30",lng("under 30 min")],["30_60",lng("30 min to 1 hour")],["60_120",lng("1 hour to 2 hours")],["120_",lng("over 2 hours")]])},{type:"select",name:"period",label:lng("modification time"),options:(0,T.wd)([["",lng("any time")],["week",lng("past week")],["month",lng("past month")],["year",lng("past year")]])},{type:"checkbox",name:"bookmarked",label:lng("bookmarked"),mod:["","ENT"]},{type:"multiple_items",name:"group_id",label:lng("workspace"),searchData:function(e,t){(0,C.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",member:1,term:e.term,id:e.ids}},t)}}],r._prepFields(o),r}return n}(B.I),x=K(k.prototype,"expanded",[S.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k)},12213:function(e,t,n){"use strict";n.d(t,{pE:function(){return T},t0:function(){return B}});var r,o,i,a,l,s,c,u,p=n(27821),d=n(87363),f=n(98e3),m=n(23838),g=n(71134),h=["id","type","time","connect_to","sub_comments"];function b(e){return function(e){if(Array.isArray(e))return w(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||_(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function y(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function _(e,t){if(e){if("string"==typeof e)return w(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?w(e,t):void 0}}function w(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return t&&j(e.prototype,t),n&&j(e,n),e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var B=(0,d.createContext)(null),T=(o=Z((r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n.endPoint,c=void 0===r?"comments":r;S(this,e),P(this,"connectTo",null),x(this,"ready",o,this),x(this,"_comments",i,this),x(this,"title",a,this),x(this,"_storedComments",l,this),P(this,"mentions",[]),P(this,"last_update",0),P(this,"noReplies",!1),P(this,"endPoint",""),x(this,"inner_context",s,this),P(this,"refreshError",!1),(0,p.makeObservable)(this),this.connectTo=t,this.noReplies=["patients_communication","launcher_private"].includes(t.type),this.endPoint=c,this.fetch()}return C(e,[{key:"fetch",value:function(){var e=this,t=k(k({},this.connectTo),{},{group_id:0,mentions:!0});(0,f.SC)(this.endPoint,{data:t},(0,p.action)((function(t){if(t.comments){var n,r=v(t.comments);try{for(r.s();!(n=r.n()).done;){var o=n.value;e._comments.set(o.id,new E(o))}}catch(e){r.e(e)}finally{r.f()}}e.mentions=(0,g.wd)(t.mentions),e.title=t.title,e.ready=!0,e.last_update=t.timestamp})))}},{key:"sendComment",value:function(e,t){var n=this,r=e.text,o=e.file,i=e.commands,a=e.connectTo;if(!r)return t&&t(!1);var l=k({text:r,file:o,inner_context:this.inner_context,commands:(0,p.toJS)(i)},a);(0,f.SC)(this.endPoint,{data:l,method:"POST",onError:t?function(){return t(!1)}:void 0},(function(e){if(e){var r,o;if(a.comment_id)"comment"===a.type?null===(o=n._comments.get(a.object_id))||void 0===o||o._subComments.set(a.comment_id,new E(e)):n._comments.set(a.comment_id,new E(e));else"comment"===a.type?null===(r=n._comments.get(a.object_id))||void 0===r||r._subComments.set(e.id,new E(e)):n._comments.set(e.id,new E(e));m.Nd.trigger("commentsUpdateCount",{connectTo:n.connectTo,length:n._comments.size,action:"add"})}n.storedComment(a,!0),null==t||t(!0)}))}},{key:"deleteComment",value:function(e){var t=this,n={comment_id:e.comment_id};(0,f.SC)(this.endPoint+"/delete",{data:n},(function(){var n;"comment"===e.type?null===(n=t._comments.get(e.object_id))||void 0===n||n._subComments.delete(e.comment_id):t._comments.delete(e.comment_id),m.Nd.trigger("commentsUpdateCount",{connectTo:t.connectTo,length:t._comments.size,action:"subtract"})}))}},{key:"setCommentLabel",value:function(e){var t=this,n={comment_id:e.comment_id,label:e.label};(0,f.SC)(this.endPoint+"/label",{data:n,method:"POST"},(function(n){var r;"comment"===e.type?null===(r=t._comments.get(e.object_id))||void 0===r||r._subComments.set(e.comment_id,new E(n)):t._comments.set(e.comment_id,new E(n))}))}},{key:"storedComment",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=(0,g.SZ)(e);return this._storedComments.has(n)&&!t||this._storedComments.set(n,{text:"",file:{},commands:[]}),this._storedComments.get(n)}},{key:"refresh",value:function(){var e=this;if(!this.refreshError){var t=k(k({},this.connectTo),{},{group_id:0,t:this.last_update});(0,f.SC)(this.endPoint,{data:t,onError:function(t){var n;if("error"===(null===(n=t.responseJSON)||void 0===n?void 0:n.res)){e.refreshError=!0;var r=t.responseJSON.error_msg||lng("an error occurred");Blsm.Error(lng("comments")+": "+r)}}},(0,p.action)((function(t){if(e.last_update=t.timestamp,t.comments){var n,r=v(t.comments);try{for(r.s();!(n=r.n()).done;){var o=n.value;e._comments.set(o.id,new E(o))}}catch(e){r.e(e)}finally{r.f()}}})))}}},{key:"findComment",value:function(e,t){var n=this;(0,p.autorun)((function(){n.ready&&(n._comments.has(e)?t(n._comments.get(e)):n._comments.forEach((function(n){n._subComments.has(e)&&t(n._subComments.get(e),n)})))}))}},{key:"size",get:function(){return this.comments.length}},{key:"comments",get:function(){var e=this,t=Array.from(this._comments.values());return this.inner_context?t.filter((function(t){return t.data.inner_context==e.inner_context})):t}},{key:"dirty",get:function(){var e,t=v(this._storedComments.values());try{for(t.s();!(e=t.n()).done;){if(""!==e.value.text)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}}]),e}()).prototype,"ready",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=Z(r.prototype,"_comments",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),a=Z(r.prototype,"title",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),l=Z(r.prototype,"_storedComments",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),s=Z(r.prototype,"inner_context",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Z(r.prototype,"size",[p.computed],Object.getOwnPropertyDescriptor(r.prototype,"size"),r.prototype),Z(r.prototype,"comments",[p.computed],Object.getOwnPropertyDescriptor(r.prototype,"comments"),r.prototype),Z(r.prototype,"dirty",[p.computed],Object.getOwnPropertyDescriptor(r.prototype,"dirty"),r.prototype),r),E=(u=Z((c=function(){function e(t){var n=t.id,r=t.type,o=t.time,i=t.connect_to,a=t.sub_comments,l=y(t,h);if(S(this,e),P(this,"id",null),P(this,"connectTo",null),P(this,"type",null),P(this,"time",null),x(this,"_subComments",u,this),P(this,"data",{}),(0,p.makeObservable)(this),this.id=n,this.type=r,this.time=o,this.connectTo=i,null!=a&&a.length){var s,c=v(a);try{for(c.s();!(s=c.n()).done;){var d=s.value;this._subComments.set(d.id,new e(k({parent:this},d)))}}catch(e){c.e(e)}finally{c.f()}}l.user&&0===l.user.user_id&&null===l.user.user_first_name&&Object.assign(l.user,{user_first_name:lng("deleted user").caps(),user_last_name:""}),this.data=l}return C(e,[{key:"chainMembers",value:function(e){var t=new Map;this.data.user&&t.set(parseInt(this.data.user.user_id),{id:this.data.user.user_id,name:(0,g.v2)(this.data.user)}),this._subComments.forEach((function(e){var n={id:e.data.user.user_id,name:(0,g.v2)(e.data.user)};t.set(parseInt(n.id),n)}));var n=b(t.values());return e?n.filter((function(e){return!(0,g.Tz)(e.id)})):n}},{key:"subComments",get:function(){return Array.from(this._subComments.values())}}]),e}()).prototype,"_subComments",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Z(c.prototype,"subComments",[p.computed],Object.getOwnPropertyDescriptor(c.prototype,"subComments"),c.prototype),c)},2645:function(e,t,n){"use strict";n.d(t,{cW:function(){return U},iS:function(){return L},wV:function(){return q}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w,O=n(27821),k=n(87363),x=n(98e3),S=n(55832),j=n(9934),C=n(16920),P=n(88918),Z=n(62391),B=n(22334),T=n(71134);function E(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var q=(0,k.createContext)(null),X=function(e){var t=e._attr;return{start:t.group_open_date,end:t.group_close_date,groupId:t.group_id,id:t.group_id,title:t.group_name,backgroundColor:U(t.status).cardColor,allDay:!0}},L=(r=O.observable.shallow,o=O.observable.shallow,i=O.action.bound,a=O.action.bound,l=O.action.bound,c=F((s=function(){function e(t){var n=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"ready",c,this),N(this,"_activeTab",u,this),N(this,"urlId",p,this),M(this,"_tabs",[]),M(this,"options",{}),N(this,"userWorkspaces",d,this),N(this,"managerWorkspaces",f,this),M(this,"anonymous",!Blsm.user.id&&Blsm.prm.anonymous_courses_catalog),N(this,"selfFilters",m,this),N(this,"managerFilters",g,this),N(this,"existingMembers",h,this),N(this,"waitingRequests",b,this),N(this,"newMembers",y,this),N(this,"view",v,this),N(this,"term",_,this),N(this,"handleSelectNewMember",w,this),(0,O.makeObservable)(this),this.nav=n,this.view=Blsm.GuiFeatureValue("registration_page_default_view")||"tiles",Blsm.InitialData.main_menu.coursecatalog&&this._tabs.push("self"),Blsm.InitialData.main_menu.manager_coursecatalog&&this._tabs.push("manager"),this.fetch()}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=A(e,2),n=t[0],r=t[1];if(this._activeTab=n,null==r||!r.term)return this.setActive(r);this.term=null==r?void 0:r.term,this.selfFilters.filter.group_name=this.term}},{key:"setActive",value:function(e){e!==this.urlId&&(this.waitingRequests.clear(),this.existingMembers.clear(),this.newMembers.clear(),this.urlId=e,this.nav([this.activeTab,e],{replace:!0}))}},{key:"extractSchedule",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=[],r=[];return e.forEach((function(e){e.isExternal&&r.push(e),e.isTemplate?e.instances.forEach((function(e){e.activityDates.start&&e.activityDates.end?n.push(e):r.push(e)})):e.activityDates.start&&e.activityDates.end?n.push(e):r.push(e)})),t?r:n}},{key:"fetch",value:function(){var e=this;this.ready=!1,(0,x.SC)("registration/catalog",{},(0,O.action)((function(t){var n,r,o,i={anonymous:e.anonymous,display:"registration",custom_fields:null==t||null===(n=t.options)||void 0===n?void 0:n.custom_fields};e.userWorkspaces=(null===(r=t.courses)||void 0===r?void 0:r.map((function(e){return new P.N(e,i,"self")})))||[],e._tabs.includes("manager")&&(e.managerWorkspace=(null===(o=t.manager_courses)||void 0===o?void 0:o.map((function(e){return new P.N(e,i,"manager")})))||[]),"self"===e.activeTab&&e._tabs.includes("manager")&&0===e.userWorkspaces.length&&(e.activeTab="manager"),e.selfFilters=Blsm.isGuiFeatureEnabled("registration_page_show_pending")?(0,S.Cy)({group_name:e.term}):(0,S.Cy)({group_name:e.term,status:U(null,"selfText",["IS_MEMBER_CLOSED","IS_MEMBER_OPEN","IN_WAITING_LIST","REQUEST_PENDING"])}),e.options=t.options,e.ready=!0})))}},{key:"tabsInfo",value:function(e){switch(e){case"self":if(this.userWorkspaces.length)return{val:e,label:lng("self registration",{phrase:!0}),badge:this.userWorkspaces.length};break;case"manager":if(this.managerWorkspace.length)return{val:e,label:lng("manager registration"),badge:this.managerWorkspace.length}}return{}}},{key:"asEvents",value:function(e,t){t(this.extractSchedule(this.workspaces).map(X)||[])}},{key:"fetchMembers",value:function(e){var t=this;(0,x.SC)("registration/departmental_workspace_dialog_data/"+e,{},(function(e){var n,r;t.existingMembers.replace((null==e||null===(n=e.existing_members)||void 0===n?void 0:n.map((function(e){return new j.o(e)})))||[]),t.waitingRequests.replace((null==e||null===(r=e.waiting_requests)||void 0===r?void 0:r.map((function(e){return new j.o(e)})))||[])}))}},{key:"addNewMembers",value:function(){var e=this,t=[],n=[];this.newMembers.map((function(e){""===e.result&&(e.canJoin&&t.push(e.user_id),e.exceptionJoin&&n.push(e.user_id))})),(t||n)&&(0,x.SC)("registration/departmental_add_members",{data:{workspace:this.groupInfo.group_id,members:t,exceptions:n}},(function(t){return e.newMembers.map((function(n){return n.result=e.buildResult(t.results[n.user_id]||"",n)}))}))}},{key:"buildResult",value:function(e,t){var n={color:"",label:""};return e.request&&(n={color:C.g.colors.positive,label:lng("request sent").caps()}),e.added&&(n={color:C.g.colors.positive,label:lng("added as member").caps()},this.existingMembers.unshift(Object.assign({isNew:!0,org_unit_name:t.group_name},t))),e.error&&(n={color:C.g.colors.negative,label:e.error}),e.warning&&(n={color:C.g.colors.negative,label:e.warning}),n}},{key:"activeTab",get:function(){return this._tabs.includes(this._activeTab)?this._activeTab:this._tabs[0]},set:function(e){this.nav([e],{replace:!0})}},{key:"groupInfo",get:function(){if(!this.urlId)return null;var e,t=null,n=I(this.workspaces);try{for(n.s();!(e=n.n()).done;){var r=e.value;if(this.urlId===r.url_id){t=r;break}var o,i=I(r.instances);try{for(i.s();!(o=i.n()).done;){var a=o.value;if(this.urlId===a.url_id){t=a;break}}}catch(e){i.e(e)}finally{i.f()}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"workspaces",get:function(){return"self"===this.activeTab?this.userWorkspaces:"manager"===this.activeTab?this.managerWorkspace:[]}},{key:"filters",get:function(){return"self"===this.activeTab?this.selfFilters:"manager"===this.activeTab?this.managerFilters:(0,S.Cy)()}},{key:"dateSorted",get:function(){return(0,S.WB)(this.extractSchedule(this.userWorkspaces),this.filters.filter,this.filters.sort,{filters:this.customFuncFilters})}},{key:"noDate",get:function(){return(0,S.WB)(this.extractSchedule(this.userWorkspaces,!0),this.filters.filter,{},{filters:this.customFuncFilters})}},{key:"classifications",get:function(){var e=new Set;return this.workspaces.forEach((function(t){return e.add(t._attr.classification_name||null)})),E(e).sort().map((function(e){return{val:e,label:e||lng("no classification").caps()}}))}},{key:"statuses",get:function(){var e=new Set;return this.workspaces.forEach((function(t){var n,r;null!==(n=t.statusInfo)&&void 0!==n&&n.selfText&&e.add(null===(r=t.statusInfo)||void 0===r?void 0:r.selfText)})),E(e).sort().map((function(e){return{val:e,label:e}}))}},{key:"tags",get:function(){var e=new Set;return this.workspaces.forEach((function(t){var n;return null===(n=t._attr.tags)||void 0===n?void 0:n.forEach((function(t){return e.add(t)}))})),E(e).sort().map((function(e){return{val:e,label:e||lng("no tags").caps()}}))}},{key:"tabs",get:function(){var e=this;return this._tabs.map((function(t){return e.tabsInfo(t)}))}},{key:"customFuncFilters",get:function(){var e=function(e,t,n){if(!(0,Z.R)(e))return t;var r=(0,B._3)(e).unix()+("group_close_date_unix"===n?T.s2:0);if(t.attr(n)&&t.attr(n)>=r)return t;if(t.isTemplate&&t.instances.length>0)for(var o=0;o<t.instances.length;o++)if(t.instances[o].attr(n)>=r)return t};return[{name:"group_open_date",func:function(t,n){return e(t,n,"group_open_date_unix")}},{name:"group_close_date",func:function(t,n){return e(t,n,"group_close_date_unix")}},{name:"status",func:function(e,t){var n;return e.includes(null===(n=t.statusInfo)||void 0===n?void 0:n.selfText)?t:null}}]}},{key:"sections",get:function(){var e=(0,S.WB)(this.workspaces,this.filters.filter,{},{filters:this.customFuncFilters}),t={member:{title:lng("member").caps(),courses:[]},registered:{title:lng("registered").caps(),courses:[]},pending:{title:lng("pending").caps(),courses:[]},available:{title:lng("available registrations").caps(),subTitle:lng("available registration"),courses:[],classifications:{}},external:{title:lng("external events").caps(),courses:[]},manager:{title:lng("manager registration").caps(),subTitle:lng("manager registration"),courses:[],classifications:{}}};null==e||e.map((function(e){if(e.isExternal)t.external.courses.push(e);else{var n,r,o,i="manager_register"===e.attr("group_access")?"manager":["open","closed"].includes(null===(n=e.statusInfo)||void 0===n?void 0:n.selfStatus)?"available":"";if(["member","registered"].includes(null===(r=e.statusInfo)||void 0===r?void 0:r.selfStatus)&&t.registered.courses.push(e),["pending"].includes(null===(o=e.statusInfo)||void 0===o?void 0:o.selfStatus)&&t.pending.courses.push(e),i){t[i].courses.push(e);var a=e.attr("classification_name")||"others";t[i].classifications[a]||(t[i].classifications[a]=[]),t[i].classifications[a].push(e)}}}));for(var n=0,r=Object.values(t);n<r.length;n++){var o=r[n];if(o.classifications){for(var i=0,a=Object.entries(o.classifications);i<a.length;i++){var l=A(a[i],2),s=l[0],c=l[1];1===c.length&&"others"!==s&&(o.classifications.others||(o.classifications.others=[]),o.classifications.others.push(c[0]),delete o.classifications[s])}1===Object.keys(o.classifications).length&&delete o.classifications}}return t}}])&&z(t.prototype,n),r&&z(t,r),e}()).prototype,"ready",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=F(s.prototype,"_activeTab",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=F(s.prototype,"urlId",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=F(s.prototype,"userWorkspaces",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=F(s.prototype,"managerWorkspaces",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),m=F(s.prototype,"selfFilters",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,S.Cy)()}}),g=F(s.prototype,"managerFilters",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,S.Cy)()}}),h=F(s.prototype,"existingMembers",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=F(s.prototype,"waitingRequests",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),y=F(s.prototype,"newMembers",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),v=F(s.prototype,"view",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"tiles"}}),_=F(s.prototype,"term",[O.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),F(s.prototype,"updateRoute",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRoute"),s.prototype),F(s.prototype,"groupInfo",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"groupInfo"),s.prototype),F(s.prototype,"workspaces",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"workspaces"),s.prototype),F(s.prototype,"filters",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"filters"),s.prototype),F(s.prototype,"dateSorted",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"dateSorted"),s.prototype),F(s.prototype,"noDate",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"noDate"),s.prototype),F(s.prototype,"classifications",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"classifications"),s.prototype),F(s.prototype,"statuses",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"statuses"),s.prototype),F(s.prototype,"tags",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"tags"),s.prototype),F(s.prototype,"tabs",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"tabs"),s.prototype),F(s.prototype,"sections",[O.computed],Object.getOwnPropertyDescriptor(s.prototype,"sections"),s.prototype),F(s.prototype,"asEvents",[i],Object.getOwnPropertyDescriptor(s.prototype,"asEvents"),s.prototype),F(s.prototype,"fetchMembers",[O.action],Object.getOwnPropertyDescriptor(s.prototype,"fetchMembers"),s.prototype),w=F(s.prototype,"handleSelectNewMember",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t){var n;e.newMembers.find((function(e){return e.user_id===t.user_id}))||(t.statusInfo=U(t.status),t.canJoin=t.statusInfo.check,t.exceptionJoin=(null===(n=e.groupInfo)||void 0===n?void 0:n.exceptions_approval_sequence)&&"NOT_MATCHING_AVAILABILITY_CONDITIONS"===t.status,t.result="",t.canJoin?e.newMembers.unshift(t):e.newMembers.push(t))}}}),F(s.prototype,"addNewMembers",[l],Object.getOwnPropertyDescriptor(s.prototype,"addNewMembers"),s.prototype),s),U=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r={ADD_MEMBERS:{check:!1,selfStatus:"manageMembers",selfText:lng("manage members").caps(),selfButtonText:lng("manage members"),departmental:lng("manage members").caps(),action:"manageMembers"},IS_MEMBER_CLOSED:{check:!1,selfStatus:"registered",selfText:lng("registered").caps(),cardColor:"#2BBA30",selfButtonText:lng("already a member"),departmental:lng("already a member").caps(),action:null},MEMBER:{check:!1,selfStatus:"member",selfText:lng("member").caps(),cardColor:"#2BBA30",selfButtonText:lng("member"),departmental:lng("already a member").caps()},IS_MEMBER_OPEN:{check:!1,selfStatus:"registered",selfText:lng("joined").caps(),selfButtonClass:"_cancel",cardColor:"#2BBA30",selfButtonText:lng("leave"),departmental:lng("already a member").caps(),action:"leave"},IN_WAITING_LIST:{check:!1,selfStatus:"pending",selfText:lng("pending").caps(),selfButtonClass:"_cancel",cardColor:"#3F51B5",selfButtonText:lng("leave waiting list"),departmental:lng("already in waiting list").caps(),action:"leave_waiting_list"},REQUEST_PENDING:{check:!1,selfStatus:"pending",selfText:lng("pending request").caps(),selfButtonClass:"_cancel",cardColor:"#3F51B5",selfButtonText:lng("cancel request"),departmental:lng("request pending").caps(),action:"cancel_request"},IN_OTHER_INSTANCE:{check:!1,selfStatus:"closed",selfText:lng("closed").caps(),cardColor:"#F44336",selfButtonText:lng("member of other instance"),departmental:lng("member of other instance").caps(),action:null},CLASSIFICATION_LIMIT_REACHED:{check:!1,selfStatus:"closed",selfText:Blsm.prm.CLASSIFICATION_LIMIT_TEXT_HP?lng("course limit reached").caps():lng("not available").caps(),cardColor:"#F44336",selfButtonText:Blsm.prm.CLASSIFICATION_LIMIT_TEXT_HP?lng("course limit reached"):lng("not available"),departmental:lng("classification limit reached").caps(),action:null},HAS_DEPENDENCIES:{check:!1,selfStatus:"closed",selfText:lng("closed").caps(),cardColor:"#F44336",selfButtonText:lng("has uncompleted dependencies"),departmental:lng("has uncompleted dependencies").caps(),action:null},NOT_MATCHING_AVAILABILITY_CONDITIONS:{check:!1,selfStatus:"closed",selfText:lng("not available").caps(),cardColor:"#F44336",selfButtonText:lng("not part of target audience"),departmental:lng("not part of target audience").caps(),action:null},FUTURE_REGISTRATION:{check:!1,selfStatus:"closed",selfText:lng("registration will open later").caps(),cardColor:"#FFC107",selfButtonText:lng("registration will open later"),departmental:lng("registration will open later").caps(),action:null},LIMIT_REACHED:{check:!1,selfStatus:"closed",selfText:lng("closed").caps(),cardColor:"#F44336",selfButtonText:lng("course is full"),departmental:lng("course is full").caps(),action:null},OU_LIMIT_REACHED:{check:!1,selfStatus:"closed",selfText:lng("closed").caps(),cardColor:"#F44336",selfButtonText:lng("org' unit allocation is full"),departmental:lng("org' unit allocation is full").caps(),action:null},NO_OU_ALLOCATION:{check:!1,selfStatus:"closed",selfText:lng("closed").caps(),cardColor:"#F44336",selfButtonText:lng("org' unit has no allocation"),departmental:lng("org' unit has no allocation").caps(),action:null},WAITING_LIST_OPEN:{check:!0,selfStatus:"open",selfText:lng("open").caps(),cardColor:"#2196F3",selfButtonText:lng("join waiting list",{phrase:!0}),departmental:lng("can join waiting list",{phrase:!0}).caps(),action:"join_waiting_list"},REGISTER:{check:!0,selfStatus:"open",selfText:lng("open").caps(),cardColor:"#2196F3",selfButtonText:lng("register"),departmental:lng("can register").caps(),action:"register"},OPEN:{check:!0,selfStatus:"open",selfText:lng("open").caps(),cardColor:"#2196F3",selfButtonText:lng("join|verb",{phrase:!0}),departmental:lng("can join").caps(),action:"join"},PRICE:{check:!0,selfStatus:"open",selfText:lng("buy").caps(),cardColor:"#2196F3",selfButtonText:lng("buy"),departmental:lng("can buy").caps(),action:"buy"}};if(n.length&&n.forEach((function(e){return delete r[e]})),!e)return"status"===t?Object.keys(r):Object.values(r).map((function(e){return e[t]}));var o=r[e];return o.status=e,t?o[t]:o}},35997:function(e,t,n){"use strict";n.d(t,{EK:function(){return L},fd:function(){return q},i3:function(){return X}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v=n(27821),_=n(87363),w=n(98e3),O=n(10101),k=n(55832),x=n(71134),S=n(40441),j=n(68567),C=n(23838),P=n(33079),Z=n(28534),B=n(46945),T=n(38246),E=n(87327);function I(e){return function(e){if(Array.isArray(e))return R(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||D(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function D(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function F(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var q=(0,_.createContext)(null),X=function(e){switch(e){case"personal":return lng("bookmarks");case"recommended":return lng("recommended");case"ou":return lng("org' unit");case"assignments":return lng("assignments");case"groups":return lng("workspaces")}return e},L=(r=v.observable.shallow,o=v.action.bound,i=v.action.bound,a=v.action.bound,l=v.action.bound,c=F((s=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),N(this,"ready",c,this),N(this,"_activeDashboard",u,this),N(this,"activeOu",p,this),N(this,"assignmentsFilters",d,this),N(this,"groupsFilters",f,this),N(this,"totalCount",m,this),N(this,"loadingMore",g,this),N(this,"nexPage",h,this),M(this,"dashboards",[]),M(this,"ous",null),N(this,"_data",b,this),N(this,"removeBookmarkFromTab",y,this),(0,v.makeObservable)(this),this.nav=r,(0,w.SC)("dashboard//sidebar=1",{},(0,v.action)((function(e){var t,r,o=e.bookmarks;o&&(Blsm.isFeatureEnabled("personal_dashboard")&&(null!==(t=o.recommended)&&void 0!==t&&t.filter((function(e){return parseInt(e.share_with_all)>0})).length&&n.dashboards.push("recommended"),null!==(r=o.personal)&&void 0!==r&&r.filter((function(e){return parseInt(e.widget_order)>0})).length&&n.dashboards.push("personal")));Blsm.isFeatureEnabled("dashboard_assignments_workspaces")&&(n.dashboards.push("assignments"),n.dashboards.push("groups")),Blsm.isFeatureEnabled("personal_dashboard")&&Blsm.user.perm.isOuViewer&&n.dashboards.push("ou"),n.ready=!0})))}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=A(e,1)[0];this._activeDashboard=t}},{key:"fetchOus",value:function(e){var t=this;(0,w.SC)("dashboard/ou/",{},(function(n){var r=n.ous.reduce((function(e,t){return[].concat(I(e),I((0,O.Jf)(t.map((function(e){var t=A(e,2)[1];return{id:t.group_id,name:t.group_name,parent:t.parent}})))))}),[]);r.length>0?(t.ous=r,t.activeOu=t.ous[0].id):t._data.set(e,!1)}))}},{key:"sortBookmark",value:function(e){var t,n=e.new_order,r=e.moved_id,o=this.activeDashboard,i=null===(t=this._data.get(o))||void 0===t?void 0:t.slice();if(i){var a=i.findIndex((function(e){return e.bookmark_id===r})),l=n.findIndex((function(e){return e===r}));a!==l&&(i.splice(l,0,i.splice(a,1)[0]),this._data.set(o,i),(0,w.SC)("bookmarks/widget_order",{method:"POST",data:{tab:o,new_order:n.join(",")}}))}}},{key:"getMenuOptions",value:function(e){var t=this,n=[];switch(this.activeDashboard){case"assignments":n=(0,P.q)(e.assignment_id_org,e.assignment_type,"regular").filter((function(e){return e})).map((function(e){return{label:e.title,href:e.href}}));break;case"groups":n=[{label:lng("grades report"),href:(0,S.p4)({report:"CourseGradesReport",params:{group:e.group_id}})},{label:lng("status report"),href:(0,S.p4)({report:"ReportGroupStatus",params:{group:e.group_id}})},{label:lng("instructors report"),href:(0,S.p4)({report:"ReportCoursesinstructors",params:{group:e.group_id}})},{label:lng("social report"),href:(0,S.p4)({report:"SocialReport",params:{group:e.group_id}})},{label:lng("meetings report"),href:(0,S.p4)({report:"meetings",params:{group:e.group_id}})},e.is_course&&Blsm.isFeatureEnabled("course_monitoring")&&Blsm.user.isPowerManager&&{label:lng("course monitoring"),href:(0,S.p4)({report:"ReportCourseMonitoring",params:{group:e.group_id}})}];break;case"personal":case"recommended":this.mayEdit(e.bookmark_id)&&(n=[{label:lng("edit"),onClick:function(){return t.editBookmark(e)}},{label:lng("delete"),onClick:function(){return t.deleteBookmark(e.bookmark_id)}}])}return n}},{key:"mayEdit",value:function(e){var t,n;return Blsm.user.isPowerManager||(null===(t=this._data.get("personal"))||void 0===t||null===(n=t.some)||void 0===n?void 0:n.call(t,(function(t){return t.bookmark_id===e})))}},{key:"editBookmark",value:function(e){var t=this,n=e.bookmark_url,r=new B.T({bookmarkId:e.bookmark_id,activeReport:e.dashboard_data.report_name,parameters:n.parameters,onSaveSuccess:function(n){(0,C.vm)().closeDialog(),(0,C.vm)().invalidateStore("reports");var o=null==n?void 0:n.bookmarkInfo;o.menuOptions=t.getMenuOptions(o);var i=r.values.get("personal_dashboard"),a=r.values.get("share_with_all");["personal","recommended"].forEach((function(n){var r,l,s=null===(r=t._data.get(n))||void 0===r?void 0:r.filter((function(t){return t.bookmark_id===e.bookmark_id}));if((null==s?void 0:s.length)>0)null===(l=t._data.get(n))||void 0===l||l.map((function(r){r.bookmark_id==o.bookmark_id&&("personal"===n&&(i?t._data.set(n,t._data.get(n).map((function(e){return e.bookmark_id===o.bookmark_id?o:e}))):t.removeBookmarkFromTab(n,e.bookmark_id)),"recommended"===n&&(a?t._data.set(n,t._data.get(n).map((function(e){return e.bookmark_id===o.bookmark_id?o:e}))):t.removeBookmarkFromTab(n,e.bookmark_id)))}));else if(i&&"personal"==n||a&&"recommended"===n){var c=t._data.get(n)||[];c.push(o),t._data.set(n,c)}}))}});(0,C.vm)().openDialog("form",r)}},{key:"deleteBookmark",value:function(e){var t=this;(0,j.BB)(lng("are you sure you want to delete this bookmark?"),{onConfirm:function(){(0,C.vm)().invalidateStore("reports"),Blsm.user.isPowerManager?["personal","recommended"].forEach((function(n){return t.removeBookmarkFromTab(n,e)})):t.removeBookmarkFromTab("personal",e),(0,w.SC)("reports/action/delete_bookmark",{data:{bm_id:e},method:"POST"},(function(){(0,Z.qV)(lng("bookmarks deleted successfully"))}))}})}},{key:"activeDashboardKey",value:function(){return"assignments"===this.activeDashboard?"assignment_dashboard_id":"group_id"}},{key:"getMore",value:function(){var e=this;this.loadingMore=!0,this.nexPage++,(0,w.SC)("dashboard/"+this.activeDashboard,{data:{page:this.nexPage}},(function(t){var n,r;if((null===(n=t[e.activeDashboard])||void 0===n?void 0:n.length)>0){var o=e._data.get(e.activeDashboard).slice();t[e.activeDashboard].forEach((function(t){var n;null!==(n=e._data.get(e.activeDashboard))&&void 0!==n&&n.some((function(n){return n[e.activeDashboardKey()]===t[e.activeDashboardKey()]}))||null==o||o.push("groups"===e.activeDashboard?new T.j(t,{display:"dashboard"}):new E.o(t,{display:"dashboard"}))})),e._data.set(e.activeDashboard,o)}else e.totalCount=(null===(r=e._data.get(e.activeDashboard))||void 0===r?void 0:r.length)-1;e.loadingMore=!1}))}},{key:"activeDashboard",get:function(){return this.dashboards.includes(this._activeDashboard)?this._activeDashboard:this.dashboards[0]},set:function(e){this.nav([e],{replace:!0})}},{key:"dashboardData",get:function(){var e=this,t=this.activeDashboard,n=t;if("ou"===t)n+="_".concat(this.activeOu),this._data.has(n)||(this._data.set(n,"loading"),this.activeOu?(0,w.SC)("groups/reports_data/group_id="+this.activeOu,{},(0,v.action)((function(t){return t.reports&&e._data.set(n,t.reports)}))):this.fetchOus(n));else{var r,o=this[n+"Filters"],i=0===Object.keys((null==o?void 0:o.filter)||[]).length&&""===(null==o||null===(r=o.sort)||void 0===r?void 0:r.by);if("assignments"!==n&&"groups"!==n||i||(n+=(0,x.SZ)((0,v.toJS)(this[n+"Filters"]))),!this._data.has(n)){var a,l,s,c,u;this._data.set(n,"loading");var p={filters:null===(a=this[t+"Filters"])||void 0===a?void 0:a.filter,sort:null===(l=this[t+"Filters"])||void 0===l||null===(s=l.sort)||void 0===s?void 0:s.by,reverse:null===(c=this[t+"Filters"])||void 0===c||null===(u=c.sort)||void 0===u?void 0:u.desc,dashboard:!0};t&&(0,w.SC)("dashboard/".concat(t),{data:p},(0,v.action)((function(r){var o="recommended"===n?"share_with_all":"widget_order",i=r[t]||r.bookmarks[t];i&&["recommended","personal"].includes(t)?(i.map((function(t){return t.menuOptions=e.getMenuOptions(t)})),e._data.set(n,i.filter((function(e){return parseInt(e[o])>0})).sort((function(e,t){return e[o]-t[o]})))):(e.totalCount=r[t+"_count"],(i=i.map((function(e){return"groups"===t?new T.j(e,{display:"dashboard"}):new E.o(e,{display:"dashboard"})})))&&e._data.set(n,i))})))}}return this._data.get(n)}},{key:"editable",get:function(){var e=this.activeDashboard;return"personal"===e||"recommended"===e&&Blsm.user.isPowerManager}},{key:"moreAvailable",get:function(){var e,t;return this.activeDashboard&&(null===(e=this.dashboardData)||void 0===e?void 0:e.length)>0&&this.totalCount>(null===(t=this.dashboardData)||void 0===t?void 0:t.length)}}])&&z(t.prototype,n),r&&z(t,r),e}()).prototype,"ready",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),u=F(s.prototype,"_activeDashboard",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),p=F(s.prototype,"activeOu",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=F(s.prototype,"assignmentsFilters",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,k.Cy)()}}),f=F(s.prototype,"groupsFilters",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,k.Cy)()}}),m=F(s.prototype,"totalCount",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g=F(s.prototype,"loadingMore",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),h=F(s.prototype,"nexPage",[v.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),b=F(s.prototype,"_data",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),F(s.prototype,"updateRoute",[v.action],Object.getOwnPropertyDescriptor(s.prototype,"updateRoute"),s.prototype),F(s.prototype,"dashboardData",[v.computed],Object.getOwnPropertyDescriptor(s.prototype,"dashboardData"),s.prototype),F(s.prototype,"sortBookmark",[o],Object.getOwnPropertyDescriptor(s.prototype,"sortBookmark"),s.prototype),F(s.prototype,"editable",[v.computed],Object.getOwnPropertyDescriptor(s.prototype,"editable"),s.prototype),F(s.prototype,"editBookmark",[i],Object.getOwnPropertyDescriptor(s.prototype,"editBookmark"),s.prototype),y=F(s.prototype,"removeBookmarkFromTab",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(t,n){var r;e._data.set(t,null===(r=e._data.get(t))||void 0===r?void 0:r.filter((function(e){return e.bookmark_id!==n})))}}}),F(s.prototype,"getMore",[l],Object.getOwnPropertyDescriptor(s.prototype,"getMore"),s.prototype),s)},62115:function(e,t,n){"use strict";n.d(t,{$:function(){return b},C:function(){return h}});var r,o,i,a=n(27821),l=n(98e3),s=n(55832),c=n(22334);function u(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function f(e,t,n){return t&&d(e.prototype,t),n&&d(e,n),e}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function g(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var h=(o=g((r=function(){function e(t){var n=t.nav;p(this,e),m(this,"nav",void 0),u(this,"ready",o,this),u(this,"filterSortObj",i,this),(0,a.makeObservable)(this),this.nav=n,this.fetch()}return f(e,[{key:"updateRoute",value:function(){}},{key:"fetch",value:function(){var e=this;(0,l.SC)("overview/discussions",{method:"GET"},(0,a.action)((function(t){var n;e.discussions=null===(n=t.discussions)||void 0===n?void 0:n.map((function(e){return new b(e)})),e.ready=!0})))}},{key:"filteredDiscussions",get:function(){return(0,s.WB)(this.discussions,this.filterSortObj.filter,this.filterSortObj.sort)}}]),e}()).prototype,"ready",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=g(r.prototype,"filterSortObj",[a.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,s.Cy)()}}),g(r.prototype,"updateRoute",[a.action],Object.getOwnPropertyDescriptor(r.prototype,"updateRoute"),r.prototype),g(r.prototype,"filteredDiscussions",[a.computed],Object.getOwnPropertyDescriptor(r.prototype,"filteredDiscussions"),r.prototype),r),b=function(){function e(t){p(this,e),m(this,"data",void 0),this.data=t}return f(e,[{key:"type",get:function(){return"discussion"}},{key:"id",get:function(){return"d_"+this.data.discussion_id}},{key:"discussion_id",get:function(){return this.data.discussion_id}},{key:"title",get:function(){return this.data.title}},{key:"user",get:function(){return this.data.user}},{key:"comments_count",get:function(){return this.data.comments_count}},{key:"date",get:function(){return(0,c._3)(this.data.last_modified)}},{key:"group_name",get:function(){return this.data.patient_name?this.data.group_name+" - "+this.data.patient_name:this.data.group_name}}]),e}()},71612:function(e,t,n){"use strict";n.d(t,{U:function(){return ee},W:function(){return Q}});var r,o,i,a,l,s,c,u,p=n(27821),d=n(87363),f=n(76259),m=n(2645),g=n(98e3),h=n(80919),b=n(55832),y=n(71134);function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||w(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function x(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function j(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var C,P,Z,B,T,E,I,A,D,R,N,z=(r=p.action.bound,i=j((o=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),k(this,"ready",i,this),k(this,"content",a,this),k(this,"followed_content",l,this),k(this,"filterNsort",s,this),k(this,"currentContent",c,this),S(this,"filtersArr",null),S(this,"first_fetch",!0),S(this,"_internalNav",!0),k(this,"sideMenu",u,this),S(this,"providers",[]),S(this,"categories",[]),(0,p.makeObservable)(this),this.nav=r;var o=(0,y.Ds)((function(){return n.nav([n._filtersToObject()],{replace:!0})}),500);(0,p.observe)(this.filterNsort,(function(){return!n._internalNav&&o()}))}var t,n,r;return t=e,(n=[{key:"toggleSideMenu",value:function(e){this.currentContent=e,this.sideMenu=!this.sideMenu}},{key:"follow",value:function(e){e.following||this.followed_content.find((function(t){return t.oc_id==e.oc_id}))||(this.followed_content=[e].concat(_(this.followed_content))),e.following=!e.following}},{key:"_filtersToObject",value:function(){return(0,y.v7)((0,p.toJS)(this.filterNsort.filter))}},{key:"updateNav",value:function(){this.nav([this._filtersToObject()],{replace:!0})}},{key:"updateRoute",value:function(e){var t=v(e,1)[0];this.loading=!0,this._internalNav=!0,this.filterNsort.filter=t||{},this._internalNav=!1,this._fetch()}},{key:"_fetch",value:function(){var e,t=this;this.loading=!0,null===(e=this._curFetch)||void 0===e||e.abortFetch();var n=this.filterNsort?this._filtersToObject():{};n.first_fetch=Number(this.first_fetch),this._curFetch=(0,g.SC)("content/online_content",{data:n},(0,p.action)((function(e){var n,r;t.first_fetch=!1,t.content=(null===(n=e.content)||void 0===n?void 0:n.map((function(e){return new h.O(e,t)})))||[],e.providers&&(t.providers=e.providers.map((function(e){return{val:e,label:(0,h.V)(e)}}))),e.categories&&(t.categories=e.categories.map((function(e){return{val:e,label:e}}))),e.following&&(t.followed_content=(null===(r=e.following)||void 0===r?void 0:r.map((function(e){return new h.O(e,t)})))||[]);var o=[{label:"",val:""},{label:lng("less than hour"),val:"0-60"},{label:lng("1 to 6 hours"),val:"60-360"},{label:lng("6 to 24 hours"),val:"360-1440"},{label:lng("24 hours to 1 week"),val:"1440-1w"},{label:lng("1 to 2 weeks"),val:"1w-2w"},{label:lng("2 to 4 weeks"),val:"2w-4w"},{label:lng("more than 4 weeks"),val:"4w-1000w"}];t.filtersArr=[{type:"search",name:"term",placeholder:lng("search").caps(),outOfMenu:!0,wrapped:!0},{type:"select_multi",name:"category",label:lng("category"),outOfMenu:!0,wrapped:!0,options:t.categories},{type:"select_multi",name:"provider",label:lng("provider"),outOfMenu:!0,wrapped:!0,options:t.providers},{type:"select",name:"duration",label:lng("duration"),outOfMenu:!0,wrapped:!0,options:o}],t.loading=!1,t.ready=!0})))}}])&&x(t.prototype,n),r&&x(t,r),e}()).prototype,"ready",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),a=j(o.prototype,"content",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=j(o.prototype,"followed_content",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),s=j(o.prototype,"filterNsort",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,b.Cy)()}}),c=j(o.prototype,"currentContent",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=j(o.prototype,"sideMenu",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j(o.prototype,"updateNav",[r],Object.getOwnPropertyDescriptor(o.prototype,"updateNav"),o.prototype),j(o.prototype,"updateRoute",[p.action],Object.getOwnPropertyDescriptor(o.prototype,"updateRoute"),o.prototype),o),M=n(88918),F=n(37659),q=n(64821);function X(e){return function(e){if(Array.isArray(e))return V(e)}(e)||H(e)||U(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e){return function(e){if(Array.isArray(e))return e}(e)||H(e)||U(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function U(e,t){if(e){if("string"==typeof e)return V(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?V(e,t):void 0}}function V(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function H(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function G(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t&&W(e.prototype,t),n&&W(e,n),e}function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Q=(0,d.createContext)(null),ee=(C=p.action.bound,Z=Y((P=function(){function e(t){var n,r,o=t.nav;J(this,e),G(this,"ready",Z,this),$(this,"tabs",[{val:"main",label:lng("recommended"),icon:"for_u"}]),G(this,"_activeTab",B,this),$(this,"_stores",{cregistration:null,catalog:null,ocontent:null,main:null,channels:null}),$(this,"_typeToStoreClass",{cregistration:m.iS,catalog:f.Z,ocontent:z,main:te,channels:ne}),(0,p.makeObservable)(this),(null!==(n=Blsm.InitialData.main_menu)&&void 0!==n&&n.coursecatalog||null!==(r=Blsm.InitialData.main_menu)&&void 0!==r&&r.manager_coursecatalog)&&this.tabs.push({val:"cregistration",label:lng("courses"),icon:"menu_workspaces"}),Blsm.isFeatureEnabled("catalog")&&this.tabs.push({val:"catalog",label:lng("content"),icon:"content"}),Blsm.isFeatureEnabled("online_content")&&this.tabs.push({val:"ocontent",label:lng("online content"),icon:"online_content"}),Blsm.isFeatureEnabled("channels")&&this.tabs.push({val:"channels",label:lng("channels"),icon:"channel"}),this.nav=o}return K(e,[{key:"updateNav",value:function(){this.nav([this.activeTab],{replace:!0})}},{key:"updateRoute",value:function(e){var t,n=L(e),r=n[0],o=n.slice(1);this._activeTab=r,null===(t=this.tabStore(r))||void 0===t||t.updateRoute(o)}},{key:"tabStore",value:function(e){var t=this;return e in this._stores&&!this._stores[e]&&(this._stores[e]=new this._typeToStoreClass[e]({nav:function(n,r){return t.nav([e].concat(X(n)),r)}})),this._stores[e]}},{key:"activeTab",get:function(){return this.tabs.map((function(e){return e.val})).includes(this._activeTab)?this._activeTab:this.tabs[0].val},set:function(e){this._activeTab=e,this.updateNav()}}]),e}()).prototype,"ready",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=Y(P.prototype,"_activeTab",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Y(P.prototype,"updateNav",[C],Object.getOwnPropertyDescriptor(P.prototype,"updateNav"),P.prototype),Y(P.prototype,"updateRoute",[p.action],Object.getOwnPropertyDescriptor(P.prototype,"updateRoute"),P.prototype),Y(P.prototype,"activeTab",[p.computed],Object.getOwnPropertyDescriptor(P.prototype,"activeTab"),P.prototype),P),te=(E=Y((T=function(){function e(t){var n=t.nav;J(this,e),G(this,"ready",E,this),G(this,"sideMenu",I,this),(0,p.makeObservable)(this),this.nav=n,this.ready=!1,this.fetch()}return K(e,[{key:"toggleSideMenu",value:function(e){this.currentContent=e,this.sideMenu=!this.sideMenu}},{key:"updateRoute",value:function(){}},{key:"fetch",value:function(){var e=this;(0,g.SC)("library/page",{},(function(t){var n,r,o,i,a,l,s;e.popular=null===(n=t.popular)||void 0===n?void 0:n.map((function(e){return e.assignment_id?new F.m(e):e.group_id?new M.N(e):void 0})),e.recent=null===(r=t.recent)||void 0===r?void 0:r.map((function(e){return e.assignment_id?new F.m(e):e.group_id?new M.N(e):void 0})),e.skills=null===(o=t.skills)||void 0===o?void 0:o.map((function(e){return e.assignment_id?new F.m(e):e.group_id?new M.N(e):e.oc_id?new h.O(e):void 0})),e.unfinished=null===(i=t.unfinished)||void 0===i?void 0:i.map((function(e){return e.assignment_id?new F.m(e):e.group_id?new M.N(e):void 0})),e.bookmarked=null===(a=t.bookmarked)||void 0===a?void 0:a.map((function(e){return e.assignment_id?new F.m(e):e.group_id?new M.N(e):void 0})),e.followedOc=null===(l=t.followed_oc)||void 0===l?void 0:l.map((function(e){return new h.O(e)})),e.channels=null===(s=t.channels)||void 0===s?void 0:s.map((function(e){return new q.$(e)})),e.ready=!0}))}}]),e}()).prototype,"ready",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=Y(T.prototype,"sideMenu",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Y(T.prototype,"updateRoute",[p.action],Object.getOwnPropertyDescriptor(T.prototype,"updateRoute"),T.prototype),T),ne=(D=Y((A=function(){function e(t){var n=t.nav;J(this,e),G(this,"ready",D,this),G(this,"_channels",R,this),G(this,"filterNsort",N,this),$(this,"filtersArr",null),$(this,"sortsArr",null),(0,p.makeObservable)(this),this.nav=n,this.fetch()}return K(e,[{key:"updateRoute",value:function(){}},{key:"fetch",value:function(){var e=this;(0,g.SC)("channel/list_channels",{},(function(t){e._channels=t.map((function(e){return new q.$(e)})),e.filtersArr=[{name:"channel_name",label:lng("channel name").caps(),type:"search",outOfMenu:!0,wrapped:!0},{name:"full_name",label:lng("user name").caps(),type:"search",outOfMenu:!0,wrapped:!0}],e.sortsArr=[{val:"",label:lng("default")},{val:"channel_name",label:lng("channel name").caps()},{val:"followers",label:lng("followers").caps()},{val:"playlists",label:lng("playlists").caps()}],e.ready=!0}))}},{key:"channels",get:function(){return(0,b.WB)(this._channels,this.filterNsort.filter,this.filterNsort.sort)}}]),e}()).prototype,"ready",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),R=Y(A.prototype,"_channels",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),N=Y(A.prototype,"filterNsort",[p.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,b.Cy)()}}),Y(A.prototype,"updateRoute",[p.action],Object.getOwnPropertyDescriptor(A.prototype,"updateRoute"),A.prototype),Y(A.prototype,"channels",[p.computed],Object.getOwnPropertyDescriptor(A.prototype,"channels"),A.prototype),A)},76691:function(e,t,n){"use strict";n.d(t,{Ou:function(){return H},Zm:function(){return L},v0:function(){return U}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_,w,O,k,x,S,j,C,P=n(27821),Z=n(98e3),B=n(87363),T=n(55832),E=n(81019);function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||D(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=D(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function D(e,t){if(e){if("string"==typeof e)return R(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?R(e,t):void 0}}function R(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function N(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function F(e,t,n){return t&&M(e.prototype,t),n&&M(e,n),e}function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function X(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var L=(0,B.createContext)(null),U=(o=X((r=function(){function e(t){var n=t.id,r=t.onSuccess,l=t.msgStore;z(this,e),N(this,"ready",o,this),N(this,"replyForm",i,this),N(this,"filterNsort",a,this),q(this,"msgStore",void 0),q(this,"id",null),(0,P.makeObservable)(this),this.id=n,this.msgStore=l,this.fetch({id:n,onSuccess:r})}return F(e,[{key:"fetch",value:function(e){var t=this,n=e.id,r=e.onSuccess;"string"==typeof n&&(this.id=n,(0,Z.SC)("messages/get/".concat(this.id),{},(0,P.action)((function(e){(0,P.extendObservable)(t,e),t.ready=!0,null==r||r()}))))}},{key:"hideReplyForm",value:function(){this.filterNsort.filter.users=null,this.replyForm=null}},{key:"showReplyForm",value:function(e){this.replyForm=new E.Z(this,this.msgStore),this.replyForm.updateValue(e,"message_to_user",!1),this.filterNsort.filter.users=e}}]),e}()).prototype,"ready",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=X(r.prototype,"replyForm",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=X(r.prototype,"filterNsort",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,T.Cy)()}}),X(r.prototype,"hideReplyForm",[P.action],Object.getOwnPropertyDescriptor(r.prototype,"hideReplyForm"),r.prototype),X(r.prototype,"showReplyForm",[P.action],Object.getOwnPropertyDescriptor(r.prototype,"showReplyForm"),r.prototype),r),V=(l=P.action.bound,c=X((s=function(){function e(t){z(this,e),q(this,"box",""),N(this,"messages",c,this),N(this,"unreadCount",u,this),N(this,"storedPage",p,this),N(this,"curPage",d,this),N(this,"totalItems",f,this),N(this,"pageSize",m,this),N(this,"toggleUserMsgs",g,this),N(this,"searchTerm",h,this),N(this,"storedSearchTerm",b,this),N(this,"loading",y,this),(0,P.makeObservable)(this),this.box=t}return F(e,[{key:"listen",value:function(){var e=this;(0,P.autorun)((function(){e.storedPage===e.curPage&&0===e.toggleUserMsgs||e.getMessages(),e.storedSearchTerm!==e.searchTerm&&(clearTimeout(e.__delayTimeout),e.__delayTimeout=setTimeout((function(){e.curPage>0?e.curPage=0:e.getMessages()}),300))}))}},{key:"getMessages",value:function(){var e=this;this.loading=!0,(0,Z.SC)("messages/box/".concat(this.box),{data:{page:this.curPage,get_total:!0,user_messages:this.toggleUserMsgs,term:this.searchTerm}},(0,P.action)((function(t){e.unreadCount=t.unread_count,e.storedPage=e.curPage,e.storedSearchTerm=e.searchTerm,e.messages.replace(t.items),e.totalItems=parseInt(t.count)||0,e.pageSize=parseInt(t.page_size),e.loading=!1})))}},{key:"invalidate",value:function(){this.storedPage=null}},{key:"removeMessageById",value:function(e){this.messages.splice(this.messages.findIndex((function(t){return t.message_id==e})),1)}},{key:"removeMessagesById",value:function(e){this.messages.replace(this.messages.filter((function(t){return!e.includes(t.message_id)})))}},{key:"appendMessages",value:function(e){var t,n=A(e);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.messages.unshift(r)}}catch(e){n.e(e)}finally{n.f()}}},{key:"setIsRead",value:function(e,t){var n,r=A(this.messages);try{for(r.s();!(n=r.n()).done;){var o=n.value;e.includes(o.message_id)&&(o.is_read=t)}}catch(e){r.e(e)}finally{r.f()}}}]),e}()).prototype,"messages",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),u=X(s.prototype,"unreadCount",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),p=X(s.prototype,"storedPage",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=X(s.prototype,"curPage",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),f=X(s.prototype,"totalItems",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=X(s.prototype,"pageSize",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=X(s.prototype,"toggleUserMsgs",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),h=X(s.prototype,"searchTerm",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),b=X(s.prototype,"storedSearchTerm",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=X(s.prototype,"loading",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),X(s.prototype,"listen",[P.action],Object.getOwnPropertyDescriptor(s.prototype,"listen"),s.prototype),X(s.prototype,"getMessages",[l],Object.getOwnPropertyDescriptor(s.prototype,"getMessages"),s.prototype),X(s.prototype,"removeMessageById",[P.action],Object.getOwnPropertyDescriptor(s.prototype,"removeMessageById"),s.prototype),X(s.prototype,"removeMessagesById",[P.action],Object.getOwnPropertyDescriptor(s.prototype,"removeMessagesById"),s.prototype),X(s.prototype,"appendMessages",[P.action],Object.getOwnPropertyDescriptor(s.prototype,"appendMessages"),s.prototype),X(s.prototype,"setIsRead",[P.action],Object.getOwnPropertyDescriptor(s.prototype,"setIsRead"),s.prototype),s),H=(v=P.observable.shallow,_=P.observable.shallow,O=X((w=function(){function e(t){var n=t.nav,r=t.mainStore;z(this,e),N(this,"ready",O,this),q(this,"boxes",{}),N(this,"_activeBoxKey",k,this),N(this,"_activeMsgId",x,this),N(this,"_queryParams",S,this),N(this,"_msgs",j,this),q(this,"draftSubject",null),q(this,"draftBody",null),q(this,"contexts",[]),q(this,"permission_types",[]),N(this,"checkedItems",C,this),q(this,"mainStore",void 0),(0,P.makeObservable)(this),this.mainStore=r,this.nav=n,this.fetch()}return F(e,[{key:"fetch",value:function(){var e=this;(0,Z.SC)("messages/init",{},(0,P.action)((function(t){var n;for(var r in t.boxes)e.boxes[r]=new V(r);e.activeBox.listen(),e.contexts=t.contexts,e.permission_types=t.permission_types,e.boxes.in.unreadCount=t.unread_count,e.mainStore.inbox_unread_count=parseInt(e.boxes.in.unreadCount)+parseInt(null===(n=e.boxes.sys)||void 0===n?void 0:n.unreadCount),e.ready=!0})))}},{key:"draft",value:function(e,t){this.draftSubject=e,this.draftBody=t,this.nav([this.activeBoxKey,"new"])}},{key:"updateRoute",value:function(e){var t,n=I(e,3),r=n[0],o=n[1],i=n[2];this._activeBoxKey=r,this._activeMsgId=o,this._queryParams=i||{},null===(t=this.boxes[r])||void 0===t||t.listen()}},{key:"deleteActiveMsg",value:function(e){var t=this;(0,Z.SC)("messages/delete",{data:{message_id:this.activeMsg.message_id},method:"POST"},(function(){null==e||e(t.activeMsg),t.activeBox.removeMessageById(t._activeMsgId),t.invalidateActiveMsg(),t.activeMsg=null}))}},{key:"multiAction",value:function(e){var t=this,n=e.action,r=e.onSuccess;(0,Z.SC)("messages/".concat(n),{data:{message_id:this.checkedItems},method:"POST"},(function(){t.checkedItems.includes(t._activeMsgId)&&(t.activeMsg=null),null==r||r(),t.checkedItems=[]}))}},{key:"invalidateActiveMsg",value:function(){this._msgs.delete(this._activeMsgId)}},{key:"listBoxes",get:function(){var e=this;return[{val:"in",label:lng("inbox")},{val:"out",label:lng("outbox")},{val:"archive",label:lng("archive|noun")},{val:"preset",label:lng("drafts")},{val:"deleted",label:lng("trash")}].map((function(t){var n,r=null===(n=e.boxes[t.val])||void 0===n?void 0:n.unreadCount;return r>0&&(t.label+=" (".concat(r,")")),t}))}},{key:"activeBox",get:function(){return this.boxes[this.activeBoxKey]},set:function(e){e!==this.activeBoxKey&&(this.checkedItems=[],this.nav([e]))}},{key:"activeMsg",get:function(){var e=this;if(!this.activeMsgId)return null;if("new"===this.activeMsgId)return this.activeMsgId;if(this._msgs.has(this.activeMsgId))return this._msgs.get(this.activeMsgId);var t,n=this.ready&&this.activeBox.messages.find((function(t){return t.message_id==e.activeMsgId}));return n&&["sys","in"].includes(this.activeBoxKey)&&!n.is_read&&(t=function(){e.activeBox.unreadCount--,e.mainStore.inbox_unread_count--}),this._msgs.set(this.activeMsgId,new U({id:this.activeMsgId,onSuccess:t,msgStore:this})),this._msgs.get(this.activeMsgId)},set:function(e){this.draftSubject=null,this.draftBody=null,this.nav([this.activeBoxKey,e])}},{key:"activeBoxKey",get:function(){return this._activeBoxKey||"in"}},{key:"activeMsgId",get:function(){return this._activeMsgId}},{key:"queryParams",get:function(){return this._queryParams}}]),e}()).prototype,"ready",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),k=X(w.prototype,"_activeBoxKey",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"in"}}),x=X(w.prototype,"_activeMsgId",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=X(w.prototype,"_queryParams",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),j=X(w.prototype,"_msgs",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),C=X(w.prototype,"checkedItems",[P.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X(w.prototype,"listBoxes",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"listBoxes"),w.prototype),X(w.prototype,"activeBox",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"activeBox"),w.prototype),X(w.prototype,"activeMsg",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"activeMsg"),w.prototype),X(w.prototype,"draft",[P.action],Object.getOwnPropertyDescriptor(w.prototype,"draft"),w.prototype),X(w.prototype,"activeBoxKey",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"activeBoxKey"),w.prototype),X(w.prototype,"activeMsgId",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"activeMsgId"),w.prototype),X(w.prototype,"queryParams",[P.computed],Object.getOwnPropertyDescriptor(w.prototype,"queryParams"),w.prototype),X(w.prototype,"updateRoute",[P.action],Object.getOwnPropertyDescriptor(w.prototype,"updateRoute"),w.prototype),w)},49415:function(e,t,n){"use strict";n.d(t,{H:function(){return O}});var r,o=n(98e3),i=n(83380),a=n(27821),l=n(71134),s=n(32808);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function p(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){_(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return(g=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function h(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=v(e);if(t){var o=v(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return b(this,n)}}function b(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?y(e):t}function y(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v(e){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var O=(w((r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&g(e,t)}(u,e);var t,n,r,c=h(u);function u(e){var t,n=e.albumId,r=e.albumName;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),_(y(t=c.call(this,{})),"albumName",""),_(y(t),"albumId",null),(0,a.makeObservable)(y(t)),t.albumName=r,t.albumId=n,n&&(0,o.SC)("album/media/".concat(t.albumId),{},t._load),t}return t=u,(n=[{key:"_load",value:function(e){(0,a.extendObservable)(this.tabs,_({},this.albumName,e.images)),this.activeTab=this.albumName,this.ready=!0}},{key:"deleteItem",value:function(e){this.tabs[this.albumName].remove(e),(0,o.SC)("album/photo/id=".concat(e.file_id,"&album_id=").concat(this.albumId,"&"),{method:"DELETE"})}},{key:"uploadItems",value:function(e){var t,n=this,r=d(e);try{var i=function(){var e=t.value;if(!n.extensions.includes((0,s.BX)(e.name)))return"continue";var r=(0,a.observable)({name:e.name,mf_id:"tmp_"+Math.floor(999999*Math.random()),imgtag:"",progress:0});n.tabs[n.activeTab].unshift(r),(0,o.SC)("album/photo/".concat(n.albumId,"&").concat((0,l.$t)({tab:n.activeTab,folder:n.activeFolder})),{data:{file:e},onProgressUp:function(e,t){return r.progress=(0,l.NM)(100*e/t)},onError:function(){return n.tabs[n.activeTab].remove(r)}},(0,a.action)((function(e){var t=e.inserts[0];Object.assign(r,t),r.mf_id=t.file_id,r.progress=void 0})))};for(r.s();!(t=r.n()).done;)i()}catch(e){r.e(e)}finally{r.f()}}},{key:"renameFile",value:function(e){var t=this,n=e.file_id,r=e.path,a=e.name;(0,o.SC)("album/rename_file",{method:"POST",data:{file_id:n,path:r}},(function(){return t.tabs[t.activeTab]=t.tabs[t.activeTab].map((function(e){return p(p({},e),{},{name:n===e.file_id?(r.split("/").length>1?r.split("/").slice(0,-1).join("/")+"/":"")+a+"."+(0,i.N)(e.name):e.name})}))}))}}])&&m(t.prototype,n),r&&m(t,r),u}(i.Er)).prototype,"_load",[a.override],Object.getOwnPropertyDescriptor(r.prototype,"_load"),r.prototype),w(r.prototype,"deleteItem",[a.override],Object.getOwnPropertyDescriptor(r.prototype,"deleteItem"),r.prototype),w(r.prototype,"uploadItems",[a.override],Object.getOwnPropertyDescriptor(r.prototype,"uploadItems"),r.prototype),w(r.prototype,"renameFile",[a.override],Object.getOwnPropertyDescriptor(r.prototype,"renameFile"),r.prototype),r)},9934:function(e,t,n){"use strict";n.d(t,{o:function(){return o}});var r=n(27821),o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];(0,r.extendObservable)(this,Object.assign({_checked:t},e))}},83380:function(e,t,n){"use strict";n.d(t,{Er:function(){return M},N:function(){return z},aF:function(){return q},bw:function(){return R}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b,y,v,_=n(27821),w=n(98e3),O=n(87363),k=n(71134),x=n(32808),S=n(28534);function j(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||B(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||B(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){if(e){if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?T(e,t):void 0}}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function E(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var R=(0,O.createContext)(null);function N(e){return null==e?void 0:e.replace(/[^/]+$/,"")}var z=function(e){return e.split(".")[e.split(".").length-1]},M=(r=_.action.bound,o=_.action.bound,i=_.action.bound,a=_.action.bound,l=_.action.bound,s=_.action.bound,c=_.action.bound,u=_.action.bound,p=_.action.bound,f=D((d=function(){function e(t){var n=t.tabs,r=t.activeItemUrl,o=t.my;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),E(this,"ready",f,this),A(this,"_tabKeys",[]),E(this,"tabs",m,this),E(this,"activeTab",g,this),E(this,"activeItem",h,this),E(this,"activeFolder",b,this),A(this,"_activeItemUrl",null),E(this,"search",y,this),E(this,"byMe",v,this),A(this,"allTabs",{portal:lng("portal"),questionnaire:lng("questionnaires"),images:lng("images"),my_images:lng("my images"),videos:lng("videos"),my_videos:lng("my videos"),gallery:lng("gallery")}),(0,_.makeObservable)(this),this._activeItemUrl=r,X(),n&&(n=Object.keys(this.allTabs).filter((function(e){return n.includes(e)||o&&n.includes(e.replace("my_",""))})),Blsm.user.perm.mediaManagerGlobal||(n=n.filter((function(e){return e.startsWith("my_")||"gallery"===e}))),this._tabKeys=n,this.fetch(n))}var t,n,r;return t=e,(n=[{key:"fetch",value:function(e){this.ready=!1,(0,w.SC)("media",{data:{tabs:e.join(",")}},this._load)}},{key:"deleteItem",value:function(e){var t=Z(this._findMediaItem(e.imgtag),2),n=t[0],r=t[1];n&&(this.tabs[r].remove(n),(0,w.SC)("media/delete",{method:"POST",data:{mf_id:n.mf_id}}))}},{key:"uploadItems",value:function(e){var t,n=this,r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=B(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(e);try{var o=function(){var e=t.value;if(!n.extensions.includes((0,x.BX)(e.name)))return(0,S.Mj)(lng("unsupported file type")),"continue";var r=(0,_.observable)({name:e.name,mf_id:"tmp_"+Math.floor(999999*Math.random()),imgtag:"",progress:0});n.tabs[n.activeTab].unshift(r),(0,w.SC)("media/file&"+(0,k.$t)({tab:n.activeTab,folder:n.activeFolder}),{data:{file:e},onProgressUp:function(e,t){return r.progress=(0,k.NM)(100*e/t)},onError:function(){return n.tabs[n.activeTab].remove(r)}},(0,_.action)((function(e){r.imgtag=e.imgtag,r.name=e.name,r.mf_id=e.mf_id,r.progress=void 0})))};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}X(!0)}},{key:"createNewFolder",value:function(e){this.activeFolder+=e+"/",F.temp_folders.push({folder:e,context:this.activeTab})}},{key:"renameFile",value:function(e){var t=this,n=e.mf_id,r=e.path,o=e.name;(0,w.SC)("media/rename",{method:"POST",data:{mf_id:n,path:r}},(function(){return t.tabs[t.activeTab]=t.tabs[t.activeTab].map((function(e){return P(P({},e),{},{name:n===e.mf_id?(r.split("/").length>1?r.split("/").slice(0,-1).join("/")+"/":"")+o+"."+z(e.name):e.name})}))}))}},{key:"renameFolder",value:function(e){var t=this,n=e.path,r=e.name,o=e.temp,i=e.tab;o?F.temp_folders=F.temp_folders.map((function(e){return e===n.slice(0,-1)?r:e})):(0,w.SC)("media/rename_folder",{method:"POST",data:{path:n,name:r,tab:i}},(function(){return X(!0),t.fetch(t._tabKeys)}))}},{key:"moveFile",value:function(e){var t=this,n=e.folder,r=e.file;if(this.activeFolder){var o=this.tabs[this.activeTab]||[];1===(null==o?void 0:o.filter((function(e){return e.name&&N(e.name)===t.activeFolder}))).length&&F.temp_folders.push({folder:this.activeFolder.slice(0,-1),context:this.activeTab})}(0,w.SC)("media/move_file",{method:"POST",data:P({folder:n},r)},(function(){return t.fetch(t._tabKeys)}))}},{key:"createFromColor",value:function(e){var t=this;this.activeTab=this._tabKeys[0],(0,w.SC)("media/generate_color",{method:"POST",data:{tab:this.activeTab,folder:this.activeFolder,background:e}},(0,_.action)((function(e){var n=(0,_.observable)({imgtag:e.imgtag,name:e.name,mf_id:e.mf_id});t.tabs[t.activeTab].unshift(n)})))}},{key:"_load",value:function(e){var t=this;if(this.tabs={},this._tabKeys.forEach((function(n){return n in e&&(0,_.extendObservable)(t.tabs,A({},n,e[n]))})),this._activeItemUrl){var n=this._findMediaItem(this._activeItemUrl);if(n){var r=Z(n,2),o=r[0],i=r[1];this.activeItem=o,this.activeTab||(this.activeTab=i)}}this.activeTab&&this.activeItem?"gallery"!==this.activeTab&&(this.activeFolder=N(this.activeItem.name)||this.activeFolder):this.activeTab=Object.keys(this.tabs)[0],this.ready=!0}},{key:"_findMediaItem",value:function(e){for(var t=null,n=0,r=Object.entries(this.tabs);n<r.length;n++){var o=Z(r[n],2),i=o[0],a=o[1];if("gallery"===i){for(var l=0,s=Object.values(a);l<s.length;l++)if(t=s[l].find((function(t){return t.imgtag===e})))return[t,i]}else if(t=a.find((function(t){return t.imgtag===e})))return[t,i]}}},{key:"extensions",get:function(){return Blsm.prm.extensions[/vid/.test(this.activeTab)?"vid":"img"]}},{key:"itemsInFolder",get:function(){var e=this,t=this.activeFolder,n=t.length,r=this.tabs[this.activeTab]||[],o=null==r?void 0:r.filter((function(e){return e.name&&N(e.name)===t})),i=j(new Set(r.map((function(e){return!!e.name&&e.name.substr(0,n)===t&&function(e){var t=e.indexOf("/");if(t>0)return e.substr(0,t+1)}(e.name.substr(n))})).filter((function(e){return e}))));o.sort(),i.sort();var a=[];t?i.unshift("../"):(a=F.temp_folders.filter((function(t){return t.context===e.activeTab})).map((function(e){return e.folder+"/"})),a=j(new Set(a)).filter((function(e){return!i.includes(e)})));var l=[].concat(j(a.map((function(e){return{folder:!0,name:e,temp:!0}}))),j(i.map((function(e){return{folder:!0,name:e}}))),j(o));return this.byMe&&(l=l.filter((function(e){return(0,k.Tz)(e.user_id)||e.folder&&"../"===e.name}))),this.search&&(l=l.filter((function(t){return(0,k.nu)(t.name).toLowerCase().includes(e.search.toLowerCase())}))),l}}])&&I(t.prototype,n),r&&I(t,r),e}()).prototype,"ready",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=D(d.prototype,"tabs",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),g=D(d.prototype,"activeTab",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),h=D(d.prototype,"activeItem",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=D(d.prototype,"activeFolder",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),y=D(d.prototype,"search",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),v=D(d.prototype,"byMe",[_.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),D(d.prototype,"fetch",[r],Object.getOwnPropertyDescriptor(d.prototype,"fetch"),d.prototype),D(d.prototype,"extensions",[_.computed],Object.getOwnPropertyDescriptor(d.prototype,"extensions"),d.prototype),D(d.prototype,"deleteItem",[o],Object.getOwnPropertyDescriptor(d.prototype,"deleteItem"),d.prototype),D(d.prototype,"uploadItems",[i],Object.getOwnPropertyDescriptor(d.prototype,"uploadItems"),d.prototype),D(d.prototype,"createNewFolder",[a],Object.getOwnPropertyDescriptor(d.prototype,"createNewFolder"),d.prototype),D(d.prototype,"renameFile",[l],Object.getOwnPropertyDescriptor(d.prototype,"renameFile"),d.prototype),D(d.prototype,"renameFolder",[s],Object.getOwnPropertyDescriptor(d.prototype,"renameFolder"),d.prototype),D(d.prototype,"moveFile",[c],Object.getOwnPropertyDescriptor(d.prototype,"moveFile"),d.prototype),D(d.prototype,"createFromColor",[u],Object.getOwnPropertyDescriptor(d.prototype,"createFromColor"),d.prototype),D(d.prototype,"itemsInFolder",[_.computed],Object.getOwnPropertyDescriptor(d.prototype,"itemsInFolder"),d.prototype),D(d.prototype,"_load",[p],Object.getOwnPropertyDescriptor(d.prototype,"_load"),d.prototype),d),F=(0,_.observable)({loaded:!1,folders:[],temp_folders:[]}),q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return j(new Set([].concat(j(F.temp_folders),j(F.folders)).filter((function(t){return 0===e.length||t.context===e})).map((function(e){return e.folder}))))},X=(0,_.action)((function(e){F.loaded&&!e||(F.loaded=!0,(0,w.SC)("media/folders_list",{},(function(e){var t=[];Object.values(e||{}).forEach((function(e){return t.push(e)})),F.folders=t})))}))},98e3:function(e,t,n){"use strict";n.d(t,{Q2:function(){return u},SC:function(){return p},fN:function(){return h},hn:function(){return m}});var r=n(71134),o=["method","data","onProgressUp","onProgressDown","json","onError","onComplete","selfErrorHandling"];function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function c(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var u=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=["test","ajax/","Launcher","integrations/","setup"];return o.some((function(t){return e.startsWith(t)}))||(e=(e.startsWith("chat")?"chat/chat_api?/":"api?/")+(e.endsWith("&")?e.slice(0,-1):e.endsWith("/")?e:e+"/"),n&&(e=e.csrf())),t&&(e+="&"+(0,r.Wh)(t)),Blsm.prm.Mainref+e},p=function(e,t,n){var s=t||{},p=s.method,m=void 0===p?"GET":p,g=s.data,h=s.onProgressUp,b=s.onProgressDown,y=s.json,v=s.onError,_=s.onComplete,w=s.selfErrorHandling,O=c(s,o);if(e=u(e,null,!1),(["DELETE","PATCH","PUT"].includes(m)||y)&&(0,r.Kn)(g))if(y){for(var k={},x=0,S=Object.entries(g);x<S.length;x++){var j=l(S[x],2),C=j[0],P=j[1];P instanceof File&&(k[C]=P)}g=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){a(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({json:JSON.stringify(g)},k)}else O.contentType="application/json",g=JSON.stringify(g);var Z=Object.assign({},O,{success:n,data:g,method:m,error:function(t,n,r){null==v||v(t),!w&&f(t,n,r,e)},complete:function(e){var t;if(null==_||_(e.responseJSON),!w&&200==e.status&&null!==(t=e.responseJSON)&&void 0!==t&&t.res&&"1"!=e.responseJSON.res){var n=e.responseJSON.res||lng("an error occurred");Blsm.Error(n)}}});if(e.includes("api?")){Z.headers={origin_hash:encodeURIComponent(window.location.hash).substring(0,5e3)};var B=Blsm.csrf_get();B&&(Z.headers["X-CSRF-TOKEN"]=B)}g&&void 0!==(0,r.oH)(g,(function(e){return e instanceof File}))&&Object.assign(Z,{method:"POST",processData:!1,contentType:!1,data:d(g)}),(h||b)&&(Z.xhr=function(){var e=new window.XMLHttpRequest;return h&&e.upload.addEventListener("progress",(function(e){return e.lengthComputable&&h(e.loaded,e.total)}),!1),b&&e.addEventListener("progress",(function(e){return e.lengthComputable&&b(e.loaded,e.total)}),!1),e});var T=$.ajax(e,Z);return{abortFetch:function(){return T.abort()}}},d=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new FormData,o=arguments.length>2?arguments[2]:void 0;return(0,r.Kn)(t)||Array.isArray(t)?Object.keys(t).forEach((function(r){return e(t[r],n,o?"".concat(o,"[").concat(r,"]"):r)})):n.append(o,t),n},f=function(e,t,n,r){var o,i,a;if("abort"!==n&&console&&console.error("Error (ajax): ",{jqXHR:e,textStatus:t,errorThrown:n,url:r}),![0,502,503,504].includes(e.status)&&!["/api?/notifications/","/api?/comments/","arrowchat","ipapi.co/"].some((function(e){return r.includes(e)})))if(e.responseJSON&&e.responseJSON.redirect)location.replace(e.responseJSON.redirect);else{var l=(null===(o=e.responseJSON)||void 0===o?void 0:o.error_msg)||e.responseText||lng("an error occurred"),s=null===(i=e.responseJSON)||void 0===i?void 0:i.error_code;Blsm.prm.LOCALHOST&&null!==(a=e.responseJSON)&&void 0!==a&&a.unexpected_output&&(l+="\n"+e.responseJSON.unexpected_output),s?Blsm.Error(l,lng("the server returned an error")):Blsm.Error(l,lng("the server returned an error")+" :(",{htmlMsg:!0})}},m=function(e,t,n){var r=$("<form></form>",{name:"RedirectPostForm",method:"post",action:e||void 0,target:n?"_blank":void 0}),o=function e(t,n,r){if($.isPlainObject(r)||$.isArray(r))for(var o in r)e(t,n+"["+o+"]",r[o]);else r instanceof File?(console.error("redirectPost do not support file sending!"),t.append($("<input type='file'>").attr("name",n).val(r))):t.append($("<input type='hidden'>").attr("name",n).val(r))};for(var i in t)o(r,i,t[i]);$("body").append(r),r.submit()},g=new Map,h=function(e,t,n){var r=t||{},o=r.method,i=void 0===o?"GET":o,a=r.data,l=JSON.stringify({url:e,method:i,data:a});if(g.has(l))return n(g.get(l));p(e,t,(function(e){g.set(l,e),n(e)}))}},9431:function(e,t,n){"use strict";n.d(t,{Bu:function(){return ce},AX:function(){return fe},_G:function(){return se},fm:function(){return de},rN:function(){return le},rc:function(){return ue},Eo:function(){return pe}});var r=n(27821),o=n(87363),i=n(98e3),a=n(71134),l=n(68567),s=n(87183),c=n(28534);function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function f(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=g(e);if(t){var o=g(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return m(this,n)}}function m(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function g(e){return(g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var h,b,y,v,_,w,O,k,x,S,j,C,P,Z,B,T,E,I,A,D,R,N,z,M,F,q,X,L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(i,e);var t,n,r,o=f(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=e.options,r=e.data;return t.title=lng("move widget")+((0,a.Dw)(n.widgetTitle)?" - ".concat(n.widgetTitle):""),t._fields=[{type:"hidden",name:"widget_id"},{type:"select",name:"portal_id",label:lng("select portal").caps(),options:n.portalOptions,required:!0},{type:"checkbox",name:"duplicate",label:lng("duplicate").caps()}],t._prepFields(r),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("portal/move_widget",e)}}])&&p(t.prototype,n),r&&p(t,r),i}(n(24210).I),U=n(23838),V=n(70656),H=["subs"],G=["widgets","subs"];function J(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function W(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?J(Object(n),!0).forEach((function(t){ae(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function K(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function $(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Q(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Y(e){return function(e){if(Array.isArray(e))return ee(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Q(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Q(e,t){if(e){if("string"==typeof e)return ee(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ee(e,t):void 0}}function ee(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function te(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e,t,n){return t&&re(e.prototype,t),n&&re(e,n),e}function ie(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var le=(0,o.createContext)(null),se=(0,o.createContext)(null),ce={DOMAIN:"domain",GROUP:"group",SUB:"sub",ANONYMOUS:"anonymous",APP:"app"},ue=(ae(h={},ce.APP,lng("app").caps()),ae(h,ce.SUB,lng("sub page").caps()),ae(h,ce.DOMAIN,lng("general").caps()),ae(h,ce.GROUP,lng("workspace").caps()),ae(h,ce.ANONYMOUS,lng("portal for unregistered users").caps()),h),pe=(ae(b={},ce.APP,lng("enterprise app").caps()),ae(b,ce.DOMAIN,lng("general portals").caps()),ae(b,ce.GROUP,lng("workspace portals").caps()),ae(b,ce.ANONYMOUS,lng("portals for unregistered users").caps()),b),de=(y=r.action.bound,v=r.action.bound,_=r.action.bound,w=r.action.bound,k=ie((O=function(){function e(t){var n=this,o=t.nav;ne(this,e),te(this,"ready",k,this),te(this,"portals",x,this),te(this,"_activePortalId",S,this),ae(this,"subPortalId",null),te(this,"editMode",j,this),ae(this,"editValues",{}),(0,r.makeObservable)(this),this.nav=o,(0,i.SC)("portal/portal",{data:{related_only:!0}},(0,r.action)((function(e){n.editValues=(0,a.ei)(e,["categories","classifications","tags","task_status","task_types","task_custom"]),n.portals=e.portals.map((function(e){return new fe({portalData:e,editValues:n.editValues,urlParams:n.urlParams})})),n.setSubPortalId(n.subPortalId),(0,r.autorun)((function(){if(!n.activePortalStore&&n.activePortalId){var e=(0,r.toJS)(n.portals).map((function(e){return e.portal_id}));!e.includes(n.activePortalId)&&Blsm.hasPermission("portal_manager")&&(n.editMode=!0,n.getPortals({portal_id:n.activePortalId,exclude:e.join()}))}})),n.ready=!0}))),Blsm.portalStore=this}return oe(e,[{key:"getPortals",value:function(e){var t=this,n=e.portal_id,o=e.exclude;(0,i.SC)("portal/portal",{data:{portal_id:n,exclude:o}},(0,r.action)((function(e){t.portals=e.portals.map((function(e){return new fe({portalData:e,editValues:t.editValues,urlParams:t.urlParams})})),t.setSubPortalId(t.subPortalId)})))}},{key:"setSubPortalId",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this.subPortalId=e,this.activePortalStore&&this.activePortalStore.subPortalId!=e&&(this.activePortalStore.subPortalId=e||null,t&&this.updateNav())}},{key:"updateNav",value:function(){this.nav([this.activePortalId].concat(Y(this.subPortalId?[this.subPortalId]:[]),[this.urlParams]),{replace:!0})}},{key:"updateRoute",value:function(e){var t=$(e,3),n=t[0],r=t[1],o=t[2];if((0,a.B5)(r)||(o=r,r=null),n&&!(0,a.B5)(n))throw new Error(lng("invalid URL"));this.urlParams=o,this._activePortalId=n,this.setSubPortalId(r)}},{key:"deletePortal",value:function(e,t){var n=this;(0,l.BB)(lng("are you sure you want to delete this portal?"),{onConfirm:function(){e.parent_id?n.activePortalStore.subs.remove(e):n.portals.remove(e),(0,i.SC)("portal/portal/"+e.portal_id,{method:"DELETE"}),t?t():n.activePortalId=null}})}},{key:"addPortalCallback",value:function(e,t){var n=e.parent_id,r=t.toString(),o=new fe({portalData:Object.assign(e,{portal_id:r}),editValues:this.editValues,urlParams:this.urlParams});n?(this.activePortalStore.subs.push(o),this.setSubPortalId(r)):(this.portals.push(o),this.activePortalId=r)}},{key:"moveSubPortal",value:function(e){var t=e.portal_id,n=e.parent_id;this.activePortalStore.portalToShow.parent_id=n,this.portals.find((function(e){return e.portal_id==n})).subs.push(this.activePortalStore.portalToShow),this.activePortalStore.subs.remove(this.activePortalStore.portalToShow),this.setActivePortal({portal_id:t,parent_id:n})}},{key:"moveWidget",value:function(e,t){var n=this,r=[{val:"",label:""}];this.portals.map((function(n){if(n.can_edit&&e.mayAddWidgetToPortal(s.Z[t.widget_type],n)){var o=n.title;r.push({val:n.portal_id,label:o}),n.subs.length>0&&n.subs.map((function(e){return r.push({val:e.portal_id,label:e.title+" (".concat(o,")")})}))}}));var o=new L({data:{widget_id:t.widget_id},options:{portalOptions:r,widgetTitle:t.title},onSaveSuccess:function(r){var i=o.values.get("duplicate");if(null!=r&&r.other_portal_data){i?t.portal_id!==o.values.get("portal_id")&&(t.portal.portal_active=!1):e._widgets.remove(t);var a=e.createEmptyWidget(t.widget_type);a.updateData(r.widget_data),n.setActivePortal(r.other_portal_data),n.activePortalStore.addWidget(a)}(0,U.vm)().closeDialog()}});(0,U.vm)().openDialog("form",o)}},{key:"setActivePortal",value:function(e){var t=e.parent_id,n=e.portal_id,r=t>0;this.activePortalId=r?t:n,r&&this.setSubPortalId(n)}},{key:"activePortalId",get:function(){var e;return this._activePortalId||(this.portals.length>0?null===(e=this.portals[0])||void 0===e?void 0:e.portal_id:null)},set:function(e){this.nav([e])}},{key:"activePortalStore",get:function(){var e=this;return this.portals.find((function(t){return t.portal_id===e.activePortalId}))}},{key:"allowAnonymous",get:function(){var e;return!(null!==(e=this.portals.find((function(e){return e.portal_type===ce.ANONYMOUS})))&&void 0!==e&&e.portal_id)}}]),e}()).prototype,"ready",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),x=ie(O.prototype,"portals",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=ie(O.prototype,"_activePortalId",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=ie(O.prototype,"editMode",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ie(O.prototype,"activePortalId",[r.computed],Object.getOwnPropertyDescriptor(O.prototype,"activePortalId"),O.prototype),ie(O.prototype,"setSubPortalId",[r.action],Object.getOwnPropertyDescriptor(O.prototype,"setSubPortalId"),O.prototype),ie(O.prototype,"activePortalStore",[r.computed],Object.getOwnPropertyDescriptor(O.prototype,"activePortalStore"),O.prototype),ie(O.prototype,"updateRoute",[r.action],Object.getOwnPropertyDescriptor(O.prototype,"updateRoute"),O.prototype),ie(O.prototype,"deletePortal",[r.action],Object.getOwnPropertyDescriptor(O.prototype,"deletePortal"),O.prototype),ie(O.prototype,"addPortalCallback",[y],Object.getOwnPropertyDescriptor(O.prototype,"addPortalCallback"),O.prototype),ie(O.prototype,"moveSubPortal",[v],Object.getOwnPropertyDescriptor(O.prototype,"moveSubPortal"),O.prototype),ie(O.prototype,"moveWidget",[_],Object.getOwnPropertyDescriptor(O.prototype,"moveWidget"),O.prototype),ie(O.prototype,"setActivePortal",[w],Object.getOwnPropertyDescriptor(O.prototype,"setActivePortal"),O.prototype),O),fe=(C=r.observable.shallow,P=r.observable.shallow,Z=r.action.bound,B=r.action.bound,E=ie((T=function(){function e(t){var n=this,o=t.portalData,i=t.editValues,a=t.urlParams;ne(this,e),te(this,"_loaded",E,this),te(this,"showDeactivatedWidgets",I,this),te(this,"portal_title",A,this),te(this,"group_ids",D,this),te(this,"poster",R,this),te(this,"sub_groups",N,this),te(this,"portal_active",z,this),te(this,"style",M,this),ae(this,"parent_style",void 0),te(this,"subs",F,this),te(this,"_widgets",q,this),te(this,"subPortalId",X,this),ae(this,"urlParams",void 0),ae(this,"isEnterprise",Blsm.checkMod(["","ENT"])),(0,r.makeObservable)(this);var l=o.subs,s=K(o,H);this.urlParams=a,Object.assign(this,s),this.editValues=i,l&&(this.subs=l.map((function(t){return new e({portalData:t,editValues:n.editValues,urlParams:n.urlParams})})))}return oe(e,[{key:"newsItemPopupLoad",value:function(e){var t=this;this.newsItemPopupLoadRunOnce||(this.newsItemPopupLoadRunOnce=!0,(0,i.SC)("portal/get_news_by_id/news_id=".concat(e,"&portal_id=").concat(this.portal_id),{selfErrorHandling:!0,onError:function(n){return console.error("get_news_by_id",e,t.portal_id,n.responseJSON)}},(0,r.action)((function(e){return(0,V.tp)({item:e})}))))}},{key:"mayAddWidgetToPortal",value:function(e,t){var n=!1,r=t||this;return(this.isEnterprise||["weather","message","assignments","calendar","scores","shared_content","birthdays","phonebook","your_profile","groups"].includes(e.widget_type))&&(void 0===e.isAvailable||e.isAvailable(r.parent_type||r.portal_type))&&(n=!0),n}},{key:"updateVals",value:function(e){e.portal_active=e.portal_active||0,e.sub_groups=e.sub_groups||0,e.group_ids=e.group_ids||[],Object.assign(this,e)}},{key:"toggleShowDeactivatedWidgets",value:function(){this.showDeactivatedWidgets=!this.showDeactivatedWidgets}},{key:"createEmptyWidget",value:function(e){return new s.Z[e].store({widgetData:{widget_type:e,portal_id:this.portal_id,widget_order:this._widgets.length+1,widget_active:1,group_id:this.group_id,group_type:this.group_type},portalStore:this,mayEdit:!0,editValues:this.editValues})}},{key:"addWidget",value:function(e){this._widgets.push(e)}},{key:"deleteWidget",value:function(e){this._widgets.remove(e);var t=e.widget_id,n=e.group_id;(0,i.SC)("portal/widget/".concat(t).concat(n?"&gid=".concat(n):""),{method:"DELETE"})}},{key:"newOrder",value:function(e){var t,n=Object.fromEntries(e.map((function(e,t){return[e,t]}))),r=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Q(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this._widgets);try{for(r.s();!(t=r.n()).done;){var o=t.value;o.widget_order=(0,a.kE)(n[o.widget_id])?(n[o.widget_id]+1).toString():o.widget_order}}catch(e){r.e(e)}finally{r.f()}(0,i.SC)("portal/widget_order",{method:"POST",data:{new_order:e.join(","),portal_id:this.portal_id}})}},{key:"loaded",get:function(){var e=this,t=(0,a.tq)()?3:null;return!this._loaded&&(0,i.SC)("portal/portal_data/".concat(this.portal_id).concat(t?"&force_limit=".concat(t,"&"):""),{},(0,r.action)((function(n){var r,o;if("string"==typeof n)return(0,c.Mj)(n);n.group_ids=null===(r=n.group_ids)||void 0===r?void 0:r.split(",");var i=n.widgets,l=(n.subs,K(n,G));Object.assign(e,l),e._widgets.replace(i.map((function(n){return new s.Z[n.widget_type].store({widgetData:W({group_type:e.group_type,portal:l,force_limit:t},n),mayEdit:e.mayEdit,editValues:e.editValues,domain_id:e.domain_id,portalStore:e})}))),e._loaded=!0,(0,a.B5)(null===(o=e.urlParams)||void 0===o?void 0:o.news_id)&&e.newsItemPopupLoad(e.urlParams.news_id)}))),this._loaded}},{key:"widgets",get:function(){var e=this;return this._widgets.slice().sort((function(e,t){return e.widget_order-t.widget_order})).filter((function(t){return e.showDeactivatedWidgets||(0,a.P$)(t.widget_active)}))}},{key:"portalToShow",get:function(){var e=this;return this.subPortalId&&this.subs.find((function(t){return t.portal_id==e.subPortalId}))||this}},{key:"title",get:function(){var e=this.parent_id>0,t=e?"?":lng("home").caps();return this.portal_title||!e&&this.group_name||t}},{key:"mayEdit",get:function(){return(0,a.P$)(this.can_edit)&&!this.disable_edit}},{key:"mayHideWidgets",get:function(){return this.isEnterprise}},{key:"mayMoveToAnotherPortal",get:function(){return this.isEnterprise}},{key:"mayAddSubPortal",get:function(){return this.isEnterprise}}]),e}()).prototype,"_loaded",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),I=ie(T.prototype,"showDeactivatedWidgets",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),A=ie(T.prototype,"portal_title",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),D=ie(T.prototype,"group_ids",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=ie(T.prototype,"poster",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=ie(T.prototype,"sub_groups",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),z=ie(T.prototype,"portal_active",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),M=ie(T.prototype,"style",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),F=ie(T.prototype,"subs",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),q=ie(T.prototype,"_widgets",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),X=ie(T.prototype,"subPortalId",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ie(T.prototype,"newsItemPopupLoad",[r.action],Object.getOwnPropertyDescriptor(T.prototype,"newsItemPopupLoad"),T.prototype),ie(T.prototype,"loaded",[r.computed],Object.getOwnPropertyDescriptor(T.prototype,"loaded"),T.prototype),ie(T.prototype,"widgets",[r.computed],Object.getOwnPropertyDescriptor(T.prototype,"widgets"),T.prototype),ie(T.prototype,"portalToShow",[r.computed],Object.getOwnPropertyDescriptor(T.prototype,"portalToShow"),T.prototype),ie(T.prototype,"title",[r.computed],Object.getOwnPropertyDescriptor(T.prototype,"title"),T.prototype),ie(T.prototype,"mayAddWidgetToPortal",[Z],Object.getOwnPropertyDescriptor(T.prototype,"mayAddWidgetToPortal"),T.prototype),ie(T.prototype,"updateVals",[r.action],Object.getOwnPropertyDescriptor(T.prototype,"updateVals"),T.prototype),ie(T.prototype,"toggleShowDeactivatedWidgets",[B],Object.getOwnPropertyDescriptor(T.prototype,"toggleShowDeactivatedWidgets"),T.prototype),ie(T.prototype,"addWidget",[r.action],Object.getOwnPropertyDescriptor(T.prototype,"addWidget"),T.prototype),ie(T.prototype,"deleteWidget",[r.action],Object.getOwnPropertyDescriptor(T.prototype,"deleteWidget"),T.prototype),ie(T.prototype,"newOrder",[r.action],Object.getOwnPropertyDescriptor(T.prototype,"newOrder"),T.prototype),T)},92517:function(e,t,n){"use strict";n.d(t,{r:function(){return O}});var r,o,i,a,l,s,c,u,p,d,f,m=n(27821),g=n(98e3),h=n(71134),b=n(40441);function y(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var O=(r=m.observable.shallow,o=m.observable.shallow,i=m.observable.shallow,a=m.action.bound,s=w((l=function(){function e(t){var n=t.widgetData,r=t.mayEdit,o=t.editValues,i=t.domain_id,a=t.portalStore;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),_(this,"mayEdit",!1),_(this,"newMenuOptions",void 0),_(this,"portalStore",void 0),y(this,"loading",s,this),y(this,"data",c,this),y(this,"options",u,this),y(this,"style",p,this),y(this,"widget_order",d,this),y(this,"widget_active",f,this),(0,m.makeObservable)(this),this.mayEdit=r,this.editValues=o,this.domain_id=i,this.newMenuOptions,this.portalStore=a,n.portal=a,this.updateData(n)}var t,n,r;return t=e,(n=[{key:"updateData",value:function(e){var t;!1===e.data&&(console.warn("Bad data at",e),e.data=null),(0,h.P$)(null===(t=e.style)||void 0===t?void 0:t.translucent)&&(e.style.translucent=!0),Object.assign(this,e),this.loading=!1}},{key:"refreshFromServer",value:function(){var e=this;this.loading=!0;var t={};this.group_id&&(t.gid=this.group_id),this.force_limit&&(t.force_limit=this.force_limit),(0,g.SC)("portal/widget/".concat(this.widget_id).concat((0,h.xb)(t)?"":"/&".concat((0,h.Wh)(t),"&")),{},(function(t){return e.updateData(t)}))}},{key:"openInNewWindow",value:function(){(0,g.SC)("portal/widget/".concat(this.widget_id).concat(this.group_id?"/&gid=".concat(this.group_id,"&"):""),{},(function(e){return window.open(e.options.url)}))}},{key:"toggleActivation",value:function(){this.widget_active=(0,h.P$)(this.widget_active)?null:1,(0,g.SC)("portal/widget_active",{method:"POST",data:{widget_id:this.widget_id,portal_id:this.portal_id,a:this.widget_active?1:0}})}},{key:"isDouble",get:function(){var e;return(0,h.tq)()?!(0,h.Oz)():(0,h.P$)(null===(e=this.style)||void 0===e?void 0:e.double)}},{key:"refLink",get:function(){var e=this.portal,t=this.widget_id;return e?Blsm.prm.Mainref+(0,b.p4)(e.parent_id?{portal:e.parent_id,sub_id:e.portal_id,wid:t}:{portal:e.portal_id,wid:t}):null}}])&&v(t.prototype,n),r&&v(t,r),e}()).prototype,"loading",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),c=w(l.prototype,"data",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=w(l.prototype,"options",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=w(l.prototype,"style",[i],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=w(l.prototype,"widget_order",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),f=w(l.prototype,"widget_active",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),w(l.prototype,"updateData",[m.action],Object.getOwnPropertyDescriptor(l.prototype,"updateData"),l.prototype),w(l.prototype,"toggleActivation",[a],Object.getOwnPropertyDescriptor(l.prototype,"toggleActivation"),l.prototype),w(l.prototype,"isDouble",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"isDouble"),l.prototype),w(l.prototype,"refLink",[m.computed],Object.getOwnPropertyDescriptor(l.prototype,"refLink"),l.prototype),l)},51885:function(e,t,n){"use strict";n.d(t,{E:function(){return He},P:function(){return Ue}});var r=n(27821),o=n(87363),i=n(98e3),a=n(71134),l=n(68567),s=n(24210),c=n(66975),u=n(35944);function p(e){return function(e){if(Array.isArray(e))return d(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=n(33661);function m(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var h=n(16920);function b(e){return(b="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var y,v=["type","name","label","options","searchData"];function _(e){return function(e){if(Array.isArray(e))return O(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||w(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){if(e){if("string"==typeof e)return O(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?O(e,t):void 0}}function O(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function k(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function S(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(Object(n),!0).forEach((function(t){I(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t,n){return(C="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=E(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function P(e,t){return(P=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Z(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=E(e);if(t){var o=E(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return B(this,n)}}function B(e,t){return!t||"object"!==b(t)&&"function"!=typeof t?T(e):t}function T(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E(e){return(E=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function I(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A,D,R,N,z,M,F=(y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&P(e,t)}(l,e);var t,n,r,o=Z(l);function l(e){var t,n;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,l),I(T(n=o.call(this,e)),"required",[]);var r=e.initialValues,s=void 0===r?{}:r,d=e.reportData,g=d.filters,b=d.data.question_data,y=g.dates,w=g.date_ranges,O=g.checkboxes,x=g.selects,j=g.optionsFilters,C=g.hidden_values,P=g.numerics,Z=g.custom_filters,B=void 0===Z?[]:Z,E=g.timedist;if(C=S(S({},C),s),E&&n._fields.push(function(e){var t=[["daily",lng("daily")],["weekly",lng("weekly")],["monthly",lng("monthly")],["quarterly",lng("quarterly")],["yearly",lng("yearly")]];return{type:"select",name:"timedist",label:lng("time distribution"),options:(0,a.wd)(t),data:e}}(E)),y){var A=function(e,t,n){var r=t.date_ranges,o=e.ranges_only,i=e.ranges,a=e.dates_only,l=[];return o||a||l.push({val:"dates",label:lng("select dates")}),!a&&i.length>0&&l.push.apply(l,p(r.map((function(e){return{val:e.code,label:e.range_text}})))),{data:e,filterType:"dates",type:"set",label:lng("dates").caps(),ranges:new Map(null==r?void 0:r.map((function(e){return[e.code,{text:e.range_text,to:e.to,from:e.from}]}))),fields:[{type:"row_set",fields:[{type:"select",name:"range",inline:!0,options:l,insert:l.length>0},{type:"component",node:(0,u.tZ)(c.JO,{icon:"trash",toolTip:lng("clear"),onClick:function(){n.updateValue("dates","range"),n.updateValue(void 0,"from"),n.updateValue(void 0,"to")},buttonLike:!0})}]},{type:"date",name:"from",label:lng("from|date"),inline:!0,options:l,insert:!o,visible:a?void 0:function(e){return"dates"===e.get("range")}},{type:"date",name:"to",label:lng("to|date"),inline:!0,options:l,insert:!o,visible:a?void 0:function(e){return"dates"===e.get("range")}}]}}(y,{date_ranges:w},T(n));y.required&&(A.reportRequired=!0,n.required.push("range")),n._fields.push(A)}if(["assignment","group","external_course_type","user","creator","ou","qualification","classification","question","resourcebundle","food_provider","content","resource"].forEach((function(e){if(g[e]){s[e]&&(s[e]=s[e].split("_"),Array.isArray(s[e])&&!s[e].every((function(e){return(0,a.B5)(e)||["mypou","myou","mysubou"].includes(e)}))&&(s[e]=void 0));var t=(0,f.W)(g[e],b,T(n));g[e].required&&(t.reportRequired=!0,n.required.push(t.name)),n._fields.push(t)}})),x||O||P||j){var D=[];x&&(x.forEach((function(e){var t=e.name;e.multiple&&s[t]&&(s[t]=s[t].replace(/__/g,"<#!PLACEHOLDER!#>").replace(/_/g,",").replace(/<#!PLACEHOLDER!#>/g,"_").split(",").map((function(e){return(0,a.kE)(e)?parseInt(e):e})))})),D=x.filter((function(e){return e.options.length>0})).map((function(e){var t=e.name,n=e.label,r=e.options,o=e.multiple,i=e.defaultValue;return i&&!s[t]&&(s[t]=i),{type:o?"select_multi":"select",name:t,label:n,options:(0,a.wd)(r),emptyOption:!i&&""!==r[0][0]}})));var R=[];j&&(j.forEach((function(e){var t=e.name,n=e.multiple;s[t]&&n&&(s[t]=s[t].replace(/__/g,"<#!PLACEHOLDER!#>").replace(/_/g,",").replace(/<#!PLACEHOLDER!#>/g,"_").split(",").map((function(e){return(0,a.kE)(e)?parseInt(e):e})))})),R=j.map((function(e){var t=e.type,n=e.name,r=e.label,o=e.options,l=e.searchData,s=k(e,v);return(0,a.v7)(S({type:t,name:n,label:r,options:o&&(0,a.wd)(o),emptyOption:void 0===s.emptyOption||s.emptyOption,searchData:l&&function(e,t){return(0,i.SC)(l.url,{data:Object.assign({term:e.term||"",id:e.ids||"",ids:e.ids||""},l.data)},t)}},s),a.DM)})));var N=(null==O?void 0:O.length)>0?O.map((function(e){var t=e.name,r=e.label,o=e.value,i=e.required,a={type:"switcher",required:i,name:t,label:r,options:[{color:h.g.colors.text_placeholder},{val:o||1,color:h.g.colors.dominant_main}]};return i&&n.required.push(t),a})):[],z=(null==P?void 0:P.length)>0?P.map((function(e){return{type:"number",name:e.name,label:e.label,min:e.min,max:e.max}})):[];n._fields.push({filterType:"options",type:"set",fields:[].concat(_(B),_(D),_(R),_(z),_(N))})}return C&&(t=n._fields).push.apply(t,_(function(e){return Object.entries(e).map((function(e){var t=m(e,2);return{type:"hidden",name:t[0],value:t[1]}}))}(C))),n._fields.push({type:"hidden",name:"page"}),n._prepFields(s),n}return t=l,(n=[{key:"buildFinalValues",value:function(){var e=C(E(l.prototype),"buildFinalValues",this).call(this);"dates"!==e.range&&(delete e.from,delete e.to);for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Array.isArray(e[r])&&(e[r]=e[r].map((function(e){return"string"==typeof e?e.replace(/_/g,"__"):parseInt(e)})).join("_"))}return e}},{key:"filtersReady",get:function(){if(0===this.required.length)return!0;var e,t=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=w(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}(this.required);try{for(t.s();!(e=t.n()).done;){var n=e.value,r=this.values.get(n),o=this.values.get(n+"c");if("range"===n&&"dates"===r?this.values.get("from")||this.values.get("to"):r||o)return!0}}catch(e){t.e(e)}finally{t.f()}return!1}}])&&j(t.prototype,n),r&&j(t,r),l}(s.I),A=y.prototype,D="filtersReady",R=[r.computed],N=Object.getOwnPropertyDescriptor(y.prototype,"filtersReady"),z=y.prototype,M={},Object.keys(N).forEach((function(e){M[e]=N[e]})),M.enumerable=!!M.enumerable,M.configurable=!!M.configurable,("value"in M||M.initializer)&&(M.writable=!0),M=R.slice().reverse().reduce((function(e,t){return t(A,D,e)||e}),M),z&&void 0!==M.initializer&&(M.value=M.initializer?M.initializer.call(z):void 0,M.initializer=void 0),void 0===M.initializer&&(Object.defineProperty(A,D,M),M=null),y),q=n(23838),X=n(46945),L=n(28534),U=n(88989),V=n(22334);function H(e){return(H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function G(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function J(e,t){return(J=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function W(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Y(e);if(t){var o=Y(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K(this,n)}}function K(e,t){return!t||"object"!==H(t)&&"function"!=typeof t?$(e):t}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y(e){return(Y=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&J(e,t)}(a,e);var t,n,r,o=W(a);function a(e){var t,n,r,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e),n=$(t),l=void 0,(r="bookmarkId")in n?Object.defineProperty(n,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[r]=l,t.bookmarkId=e.bookmarkId,t.bookmark_name=e.bookmark_name,t.title=lng("share report").caps(),t.confirmButtonLabel=lng("share").caps(),(0,i.SC)("bookmarks/get_permission_users",{data:{bm_id:t.bookmarkId}},(function(e){var n={users:e.map((function(e){return e.id}))};t._buildFields(n)})),t}return t=a,(n=[{key:"_buildFields",value:function(e){this._fields=[{type:"component",node:(0,u.BX)("div",{children:[(0,u.tZ)(c.JO,{icon:"sign_notification"}),(0,u.BX)("span",{children:[" ",lng("sharing with a specific user will let him see the report from your point of view").caps()]})]})},{type:"multiple_items",name:"users",label:lng("select users"),poster:!0,theme:"bright",searchData:function(e,t){var n=e.term,r=e.ids;(0,i.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:n,id:r||""}},t)}}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("bookmarks/set_permission_users",Object.assign({bm_id:this.bookmarkId,bm_name:this.bookmark_name},e))}}])&&G(t.prototype,n),r&&G(t,r),a}(s.I),ee=n(82247);function te(e){return(te="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return re(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return re(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function re(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ae(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ce(e);if(t){var o=ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return le(this,n)}}function le(e,t){return!t||"object"!==te(t)&&"function"!=typeof t?se(e):t}function se(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ce(e){return(ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ue,pe,de,fe,me,ge,he,be,ye,ve,_e,we,Oe,ke,xe,Se,je,Ce,Pe,Ze,Be,Te,Ee,Ie,Ae=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(a,e);var t,n,r,o=ae(a);function a(e){var t,n,r,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=o.call(this,e),n=se(t),l=void 0,(r="bookmarkId")in n?Object.defineProperty(n,r,{value:l,enumerable:!0,configurable:!0,writable:!0}):n[r]=l,t.bookmarkId=e.bookmarkId,t.title=lng("add notification").caps(),t.confirmButtonLabel=lng("save").caps(),(0,i.SC)("bookmarks/get_notifications",{data:{object_id:t.bookmarkId}},(function(e){if(e.notifications){for(var n=new Map,r=0,o=Object.entries(e.notifications);r<o.length;r++){var i=ne(o[r],2),a=i[0],l=i[1];n.set(a,l)}e.notifications=n}t._buildFields(e)})),t}return t=a,(n=[{key:"_buildFields",value:function(e){var t={bookmark:{label:lng("bookmark notification"),dates:!0,options:{targetFieldsOptions:["other_user","group","role"]},messageType:"bookmark_reminder",message:!0}},n={targetFieldsOptions:["other_user","group","role"]};this._fields=[{type:"component",name:"notifications",Render:ee.oS,props:{notificationsTypes:t,options:n}},{type:"component",name:"notifications",Render:ee.oQ,props:{notificationsTypes:t,options:n}}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("bookmarks/add_notifications",Object.assign({object_id:this.bookmarkId},e))}}])&&oe(t.prototype,n),r&&oe(t,r),a}(s.I);function De(e){return(De="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Re(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ze(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ne(e){return function(e){if(Array.isArray(e))return Me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ze(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ze(e,t){if(e){if("string"==typeof e)return Me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Me(e,t):void 0}}function Me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function qe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Le(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ue=(0,o.createContext)(null),Ve=function(e){switch(e){case"find":return lng("find report");case"recent":return lng("recent reports");case"personal":return lng("bookmarks");case"recommended":return lng("recommended");case"shared":return lng("shared")}},He=(ue=r.observable.shallow,pe=r.action.bound,de=r.action.bound,fe=r.action.bound,me=r.action.bound,ge=r.action.bound,he=r.action.bound,be=r.action.bound,ve=Le((ye=function(){function e(t){var n=this,o=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Fe(this,"ready",ve,this),Xe(this,"isEnterprise",Blsm.checkMod(["","ENT"])),Xe(this,"_categories",[]),Xe(this,"_allReports",[]),Xe(this,"_allReportsHash",{}),Xe(this,"_tagsCount",[]),Fe(this,"selectedTags",_e,this),Fe(this,"searchText",we,this),Fe(this,"listTab",Oe,this),Fe(this,"_sets",ke,this),Fe(this,"reportReady",xe,this),Fe(this,"_activeReport",Se,this),Fe(this,"_activeGraph",je,this),Fe(this,"reportParams",Ce,this),Fe(this,"_bookmarkId",Pe,this),Xe(this,"reportFiltersForm",null),Fe(this,"reportData",Ze,this),Fe(this,"actionsData",Be,this),Fe(this,"showSetupFields",Te,this),Xe(this,"noCache",!1),Xe(this,"force",!1),Xe(this,"requestConfirmHighlight",!1),Xe(this,"scrollTo",null),Xe(this,"_autoRefreshInterval",null),Fe(this,"refreshSeconds",Ee,this),Fe(this,"reportTooBig",Ie,this),Xe(this,"shared_reports",[]),(0,r.makeObservable)(this),this.nav=o,(0,i.SC)("dashboard/reports/sidebar=1",{},(0,r.action)((function(e){var t=e.list,r=e.bookmarks,o=e.shared_reports;n._allReports=(t||[]).reduce((function(e,t){return[].concat(Ne(e),Ne(t.items))}),[]);var i={};n._allReports.forEach((function(e){var t;n._allReportsHash[e.cls]=e,null===(t=e.tags)||void 0===t||t.forEach((function(e){return i[e]=(i[e]||0)+1}))})),n._tagsCount=Object.entries(i).sort((function(e,t){return t[1]-e[1]})),n._sets.set("recent",(U.X.get("recent_reports_"+Blsm.user.id)||[]).filter((function(e){return n._allReportsHash[e.bookmark_url.report_name]}))),["personal","recommended","shared"].forEach((function(e){return n._sets.set(e,r[e].filter((function(t){return t.bookmark_url&&("shared"===e||n._allReportsHash[t.bookmark_url.report_name])})))})),n.shared_reports=o,n.ready=!0})))}var t,n,o;return t=e,(n=[{key:"getQueryReportName",value:function(e){return this._allReports.find((function(t){return"QueryReport"===t.cls&&t.params.report_id==e})).label}},{key:"toggleTagSelection",value:function(e){this.selectedTags[this.selectedTags.has(e)?"delete":"add"](e)}},{key:"clearTagSelection",value:function(){this.selectedTags.clear()}},{key:"_addRecent",value:function(e){var t=this,n=this._activeReport&&this._allReportsHash[this._activeReport];if(n){var r={report_name:this._activeReport,parameters:e},o=U.X.get("recent_reports_"+Blsm.user.id)||[],i=o.find((function(e){return(0,a.SZ)(e.bookmark_url)===(0,a.SZ)(r)}));if(i)i.modification_time=(0,a.c7)();else{var l="QueryReport"===n.cls?this.getQueryReportName(e.report_id):null==n?void 0:n.label;o.push({bookmark_name:l,bookmark_url:r,modification_time:(0,a.c7)()})}o.sort((function(e,t){return e.modification_time>t.modification_time?-1:t.modification_time>e.modification_time?1:0})),this._sets.set("recent",o.filter((function(e){return t._allReportsHash[e.bookmark_url.report_name]}))),U.X.set("recent_reports_"+Blsm.user.id,o)}}},{key:"updateRoute",value:function(e){var t=this,n=Re(e,4),o=n[0],l=n[1],s=n[2],c=n[3];this._activeReport=o||null;var u=this.activeGraph;this._activeGraph=s,this._bookmarkId=c,this.reportParams=l;var p=this.noCache;this.noCache=!1,this._activeReport&&(u!==this.activeGraph&&(0,a.SZ)(l)===(0,a.SZ)(this.filterValues())||(this.showSetupFields=!1,this.reportReady=!1,this.stopAutoRefresh(),(0,i.SC)(this._baseReportUrl(l,this.force?"force_html":"",p),{},(0,r.action)((function(e){if(t._addRecent(l),"object"!==De(e))return(0,L.Mj)(lng("unexpected error occurred"));t.reportData=e,t.reportFiltersForm=new F({reportData:e,initialValues:l||{}}),t.reportReady=!0,"UpcomingZoomMeetings"===t.reportData.type&&["thisday","latertoday"].includes(null==l?void 0:l.range)&&(t.refreshSeconds=60,t._autoRefreshInterval=setInterval((function(){t.refreshSeconds--,0===t.refreshSeconds&&t.reloadReport()}),1e3))})))))}},{key:"stopAutoRefresh",value:function(){clearInterval(this._autoRefreshInterval),this.refreshSeconds=void 0}},{key:"reloadReport",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.activeGraph,n=void 0===t?this._activeGraph:t,r=e.page,o=e.noCache,i=e.swapReportClass,a=e.hidden_values,l=e.requestConfirmHighlight,s=e.scroll,c=e.force;this.scrollTo=s;var u=Object.assign(this.filterValues(),a);u.page=r||(-1===u.page?-1:0),0==u.page&&delete u.page,this.noCache=o,this.force=c,this.requestConfirmHighlight=l,this.nav([i||this._activeReport,u,n,this._bookmarkId])}},{key:"filterValues",value:function(){var e;return(null===(e=this.reportFiltersForm)||void 0===e?void 0:e.buildFinalValues())||{}}},{key:"_baseReportUrl",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return"reports/data/".concat(this._activeReport,"/").concat((0,a.Wh)(e||{}),"&/").concat(t,"/").concat(n?1:"","/").concat(this.bookmarkId||"")}},{key:"openPrint",value:function(){return window.open((0,i.Q2)(this._baseReportUrl(this.filterValues(),"print")))}},{key:"openExport",value:function(){var e=this;(0,l.cS)(lng("export format:").caps(),{title:lng("export report"),confirmText:lng("export"),inputType:"select",selectOptions:(0,a.wd)([[1,lng("excel 2007").caps()],[2,lng("excel 2003").caps()],["pdf","PDF"],["csv","CSV"]]),onConfirm:function(t){return location.href=(0,i.Q2)(e._baseReportUrl(e.filterValues(),t))}})}},{key:"openCsv",value:function(){location.href=(0,i.Q2)(this._baseReportUrl(this.filterValues(),"csv"))}},{key:"loadAnyway",value:function(){this.reloadReport({force:!0})}},{key:"deleteBookmark",value:function(e){var t=this,n=function(e,n){t._sets.get(e).map((function(r){r.bookmark_id==n&&t._sets.get(e).remove(r)}))};(0,l.BB)(lng("are you sure you want to delete this bookmark?"),{onConfirm:function(){(0,q.vm)().invalidateStore("dashboard"),t.bookmarkId=null,Blsm.user.isPowerManager?["personal","recommended","shared"].forEach((function(t){return n(t,e)})):n("personal",e),(0,i.SC)("reports/action/delete_bookmark",{data:{bm_id:e},method:"POST"},(function(){(0,L.qV)(lng("bookmarks deleted successfully"))}))}})}},{key:"addBookmark",value:function(e,t,n,r){var o,i=this,a=new X.T({bookmarkId:e,activeReport:t||this.activeReport,parameters:n?null===(o=this.reportFiltersForm)||void 0===o?void 0:o.buildFinalValues():null==r?void 0:r.params,tab:this.listTab,onSaveSuccess:function(t){var n;(0,q.vm)().closeDialog(),(0,q.vm)().invalidateStore("dashboard");var r=a.values.get("personal_dashboard"),o=a.values.get("share_with_all"),l={bookmark_id:(null==t||null===(n=t.bookmarkInfo)||void 0===n?void 0:n.bookmark_id)||i.bookmarkId,bookmark_name:a.values.get("bookmark_name"),bookmark_description:a.values.get("bookmark_desc"),bookmark_url:JSON.parse(a.values.get("bookmark_url")),modification_time:"0",object_id:null,share_with_all:a.values.get("share_with_all"),user_id:Blsm.user.id,widget_options:{widget_size:a.values.get("widget_size"),widget_view:a.values.get("widget_view")}};e?(i.reportData&&(i.reportData.bookmark_name=t.bookmarkInfo.bookmark_name,i.reportData.bookmark_description=t.bookmarkInfo.bookmark_description),["personal","recommended"].forEach((function(t){i._sets.get(t).some((function(t){return t.bookmark_id===e}))?i._sets.get(t).map((function(n){n.bookmark_id==e&&("personal"===t&&Object.assign(n,l),"recommended"===t&&(o?Object.assign(n,l):i._sets.get(t).remove(n)))})):(r&&"personal"==t&&i._sets.get("personal").unshift(Object.assign({widget_order:r},l)),o&&"recommended"===t&&i._sets.get("recommended").unshift(Object.assign({widget_order:o},l)))}))):(i.bookmarkId=t.bookmark_id,r&&i._sets.get("personal").unshift(Object.assign({widget_order:i._sets.get("personal").length+1},l)),o&&i._sets.get("recommended").unshift(Object.assign({widget_order:i._sets.get("recommended").length+1},l)))}});(0,q.vm)().openDialog("form",a)}},{key:"shareReport",value:function(e){var t=e.bookmarkId,n=e.bookmark_name;(0,q.vm)().openDialog("form",new Q({bookmarkId:t,bookmark_name:n,onSaveSuccess:function(){(0,q.vm)().closeDialog(),(0,L.qV)(lng("report share saved"))}}))}},{key:"bookmarkNotification",value:function(e){var t=e.bookmarkId;(0,q.vm)().openDialog("form",new Ae({bookmarkId:t,onSaveSuccess:function(){return(0,q.vm)().closeDialog()}}))}},{key:"tabs",get:function(){var e=this,t=[{val:"find",label:Ve("find")}];return["recent","personal","recommended","shared"].forEach((function(n){e._sets.get(n).length&&t.push({val:n,label:Ve(n)})})),t}},{key:"visibleReports",get:function(){var e=this,t=this._allReports;if("recent"===this.listTab?t=this._sets.get(this.listTab).map((function(t){var n=e._allReportsHash[t.bookmark_url.report_name],r=t.bookmark_name||n.label;return Object.assign({},n,{label:r},{params:t.bookmark_url.parameters},{subLabel:(0,V.GG)(t.modification_time),time:t.modification_time})})):["personal","recommended","shared"].includes(this.listTab)&&(t=this._sets.get(this.listTab).map((function(t){var n=e._allReportsHash[t.bookmark_url.report_name]||e.shared_reports[t.bookmark_url.report_name],r={params:t.bookmark_url.parameters};return Object.assign(t,n,r,{label:t.bookmark_name,subLabel:"QueryReport"===n.cls?e.getQueryReportName(t.bookmark_url.parameters.report_id):null==n?void 0:n.label})}))),this.selectedTags.size||this.searchText){var n=this.searchText.toLowerCase(),r=Ne(this.selectedTags);return t.filter((function(e){var t,o,i;return r.filter((function(t){var n;return null===(n=e.tags)||void 0===n?void 0:n.includes(t)})).length===r.length&&((null===(t=e.label)||void 0===t?void 0:t.toLowerCase().includes(n))||(null===(o=e.desc)||void 0===o?void 0:o.includes(n))||(null===(i=e.tags)||void 0===i?void 0:i.some((function(e){return e.includes(n)}))))}))}return t}},{key:"allTags",get:function(){var e=this;return this._tagsCount.map((function(t){var n=Re(t,1)[0];return{tag:n,disabled:!e.visibleReports.some((function(e){var t;return null===(t=e.tags)||void 0===t?void 0:t.includes(n)}))}}))}},{key:"activeReport",get:function(){return this._activeReport},set:function(e){this.nav([e])}},{key:"showFilters",get:function(){return"bookmark"!==this.activeReport}},{key:"activeGraph",get:function(){return parseInt(this._activeGraph)||0},set:function(e){this.reloadReport({activeGraph:e})}},{key:"activePage",get:function(){return this.reportFiltersForm.getValue("page")},set:function(e){this.reloadReport({page:e})}},{key:"bookmarkId",get:function(){return this._bookmarkId},set:function(e){this._bookmarkId=(null==e?void 0:e.toString())||null,this.reloadReport()}},{key:"mayEdit",get:function(){var e=this;return Blsm.user.isPowerManager||this._sets.get("personal").some((function(t){return t.bookmark_id===e.bookmarkId}))}},{key:"reportIsDisplayed",get:function(){var e,t;return(null===(e=this.reportData)||void 0===e||null===(t=e.tables)||void 0===t?void 0:t.length)>0}}])&&qe(t.prototype,n),o&&qe(t,o),e}()).prototype,"ready",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e=Le(ye.prototype,"selectedTags",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Set}}),we=Le(ye.prototype,"searchText",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Oe=Le(ye.prototype,"listTab",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"find"}}),ke=Le(ye.prototype,"_sets",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),xe=Le(ye.prototype,"reportReady",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Se=Le(ye.prototype,"_activeReport",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),je=Le(ye.prototype,"_activeGraph",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ce=Le(ye.prototype,"reportParams",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Pe=Le(ye.prototype,"_bookmarkId",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Ze=Le(ye.prototype,"reportData",[ue],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Be=Le(ye.prototype,"actionsData",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{a:null}}}),Te=Le(ye.prototype,"showSetupFields",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ee=Le(ye.prototype,"refreshSeconds",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ie=Le(ye.prototype,"reportTooBig",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Le(ye.prototype,"tabs",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"tabs"),ye.prototype),Le(ye.prototype,"visibleReports",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"visibleReports"),ye.prototype),Le(ye.prototype,"allTags",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"allTags"),ye.prototype),Le(ye.prototype,"toggleTagSelection",[pe],Object.getOwnPropertyDescriptor(ye.prototype,"toggleTagSelection"),ye.prototype),Le(ye.prototype,"clearTagSelection",[de],Object.getOwnPropertyDescriptor(ye.prototype,"clearTagSelection"),ye.prototype),Le(ye.prototype,"_addRecent",[r.action],Object.getOwnPropertyDescriptor(ye.prototype,"_addRecent"),ye.prototype),Le(ye.prototype,"updateRoute",[r.action],Object.getOwnPropertyDescriptor(ye.prototype,"updateRoute"),ye.prototype),Le(ye.prototype,"reloadReport",[fe],Object.getOwnPropertyDescriptor(ye.prototype,"reloadReport"),ye.prototype),Le(ye.prototype,"filterValues",[me],Object.getOwnPropertyDescriptor(ye.prototype,"filterValues"),ye.prototype),Le(ye.prototype,"openPrint",[ge],Object.getOwnPropertyDescriptor(ye.prototype,"openPrint"),ye.prototype),Le(ye.prototype,"openExport",[he],Object.getOwnPropertyDescriptor(ye.prototype,"openExport"),ye.prototype),Le(ye.prototype,"activeReport",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"activeReport"),ye.prototype),Le(ye.prototype,"showFilters",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"showFilters"),ye.prototype),Le(ye.prototype,"activeGraph",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"activeGraph"),ye.prototype),Le(ye.prototype,"activePage",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"activePage"),ye.prototype),Le(ye.prototype,"bookmarkId",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"bookmarkId"),ye.prototype),Le(ye.prototype,"addBookmark",[be],Object.getOwnPropertyDescriptor(ye.prototype,"addBookmark"),ye.prototype),Le(ye.prototype,"reportIsDisplayed",[r.computed],Object.getOwnPropertyDescriptor(ye.prototype,"reportIsDisplayed"),ye.prototype),ye)},67861:function(e,t,n){"use strict";n.d(t,{Z:function(){return Q},hI:function(){return Y}});var r=n(27821),o=n(98e3),i=n(24210),a=n(23838),l=n(60793),s=n(69829),c=n(96504),u=n(87327),p=n(37659),d=n(38246),f=n(88989),m=n(35519),g=n(88918),h=n(40441),b=n(71134);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var v,_,w,O,k,x,S,j,C,P,Z,B,T,E,I,A=["q"];function D(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&R(e,t)}function R(e,t){return(R=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function N(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=M(e);if(t){var o=M(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return z(this,n)}}function z(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function F(e){return function(e){if(Array.isArray(e))return U(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function q(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function X(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return U(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?U(e,t):void 0}}function U(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?V(Object(n),!0).forEach((function(t){K(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function G(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function J(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function W(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Y=function(){return{users:lng("users"),groups:lng("workspaces",{phrase:!0}),assignments:lng("assignments"),catalog:lng("catalog"),tasks:lng("tasks",{phrase:!0}),content:lng("shared content"),mycontent:lng("my content"),discussions:lng("discussions",{phrase:!0})}},Q=(v=r.action.bound,_=r.action.bound,O=$((w=function(){function e(t){var n=this,o=t.nav;J(this,e),K(this,"searchCategories",[]),K(this,"availableCategories",[]),G(this,"_searchTerm",O,this),G(this,"_category",k,this),G(this,"results",x,this),G(this,"totalCount",S,this),G(this,"loading",j,this),G(this,"loadingMore",C,this),G(this,"compactView",P,this),G(this,"advanceFilterShow",Z,this),G(this,"_filterForms",B,this),K(this,"_curFetch",null),G(this,"advanced",T,this),G(this,"suggestion",E,this),G(this,"recentSearchesRefresh",I,this),K(this,"skillSearchForm",void 0),K(this,"allowedUserFields",[]),(0,r.makeObservable)(this),this.nav=o,this.availableCategories=[Blsm.isFeatureEnabled("catalog")&&"content",Blsm.canAccessModule("Content")&&"mycontent","assignments",Blsm.isFeatureEnabled("course_registartion")&&"catalog",(!Blsm.isFeatureEnabled("isolate_users")||Blsm.user.isPowerManager||Blsm.user.perm.isGroupViewer||Blsm.user.perm.isOuViewer)&&"users","groups",Blsm.isFeatureEnabled("group_tasks")&&"tasks"].filter((function(e){return!!e})),this.searchCategories=this.availableCategories.map((function(e){return{val:e,label:Y()[e]}})),Blsm.isFeatureEnabled("skills_occupations")&&(this.skillSearchForm=new ne({onValueChange:(0,b.Ds)(this.doSearch,500),showOccupation:function(){return"users"===n.activeCategory}}))}var t,n,i;return t=e,(n=[{key:"setQDelayed",value:function(e){this._searchTerm=e,clearTimeout(this.__delayTimeout),this.__delayTimeout=setTimeout(this.doSearch,1500)}},{key:"loadHistory",value:function(e){var t=e.q,n=e.category,r=e.filters;this.nav([n,H({q:t},r)])}},{key:"doSearch",value:function(){var e,t;this.nav([this.activeCategory,Object.assign({q:this.searchTerm},null===(e=this.filterForm)||void 0===e?void 0:e.buildFinalValues(),null===(t=this.skillSearchForm)||void 0===t?void 0:t.buildFinalValues())]),clearTimeout(this.__delayTimeout)}},{key:"clearSearch",value:function(){clearTimeout(this.__delayTimeout),this._searchTerm=""}},{key:"updateRoute",value:function(e){var t,n,r=this,o=X(e,2),i=o[0],a=o[1],l=(a=void 0===a?{}:a).q,s=void 0===l?"":l,c=q(a,A),f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this._category=this.availableCategories.includes(i)?i:this.availableCategories[0],this._searchTerm=s,f.skipFetch||(null===(t=this.filterForm)||void 0===t||t.setValues(c,{clear:!0}),null===(n=this.skillSearchForm)||void 0===n||n.setValues(c,{clear:!0}),this.loading=!0,this.loadingMore=!1,this._fetch((function(e){var t,n,o,a;switch(i){case"assignments":r.results=(null===(t=e[i])||void 0===t?void 0:t.map((function(e){return new u.o(e,{workspace:r})})))||[];break;case"content":r.results=(null===(n=e[i])||void 0===n?void 0:n.map((function(e){return new p.m(e,{workspace:r})})))||[];break;case"catalog":r.results=null===(o=e[i])||void 0===o?void 0:o.map((function(e){return new g.N(e)}));break;case"groups":r.results=(null===(a=e[i])||void 0===a?void 0:a.map((function(e){return new d.j(e)})))||[];break;default:r.results.replace(e[i])}r.totalCount="users"===r.activeCategory?parseInt(e.users_total):"tasks"===r.activeCategory?parseInt(e.total_tasks):"groups"===r.activeCategory&&parseInt(e.groups_total),r.allowedUserFields=e.allowedUserFields,r.buildFilterForms(e.advanced),r.suggestion=e.suggestion,r.loading=!1})))}},{key:"buildFilterForms",value:function(e){"groups"===this.activeCategory&&!this._filterForms.groups&&e&&(this._filterForms.groups=new ee({onValueChange:(0,b.Ds)(this.doSearch,500)})),"users"===this.activeCategory&&!this._filterForms.users&&e&&(this._filterForms.users=new te({onValueChange:(0,b.Ds)(this.doSearch,500)})),"tasks"===this.activeCategory&&!this._filterForms.tasks&&e&&(this._filterForms.tasks=new l.h({onValueChange:(0,b.Ds)(this.doSearch,500),advanced:e})),"assignments"===this.activeCategory&&!this._filterForms.assignments&&e&&(this._filterForms.assignments=new s.g({onValueChange:(0,b.Ds)(this.doSearch,500),advanced:e,type:"assignments"})),"content"===this.activeCategory&&!this._filterForms.content&&e&&(this._filterForms.content=new s.g({onValueChange:(0,b.Ds)(this.doSearch,500),advanced:e,type:"content"})),"mycontent"==this.activeCategory&&!this._filterForms.mycontent&&e&&(this._filterForms.mycontent=new s.g({onValueChange:(0,b.Ds)(this.doSearch,500),advanced:e,type:"mycontent"}))}},{key:"searchContentPage",value:function(e,t){switch(e){case"catalog":return{title:lng("catalog").caps(),href:(0,h.p4)({courseCatalog:!0,tab:"self",params:{term:t}})};case"content":return{title:lng("knowledge center").caps(),href:(0,h.p4)({catalog:!0,term:t})};case"mycontent":if(Blsm.user.isManager&&Blsm.isFeatureEnabled("catalog"))return{title:lng("my content").caps(),href:(0,h.p4)({list:"content",params:"filters[name]="+t})};break;case"users":if(Blsm.user.isPowerManager)return{title:lng("users").caps(),href:(0,h.p4)({list:"users",params:"filters[user_first_name]="+t})};break;case"assignments":case"groups":case"tasks":default:return!1}}},{key:"getMore",value:function(){var e=this,t=this.activeCategory;this.loadingMore=!0,this._fetch((function(n){var r,o,i,a,l,s,c;switch(t){case"assignments":(r=e.results).push.apply(r,F((null===(o=n[t])||void 0===o?void 0:o.map((function(t){return new u.o(t,{workspace:e})})))||[]));break;case"content":(i=e.results).push.apply(i,F((null===(a=n[t])||void 0===a?void 0:a.map((function(t){return new p.m(t,{workspace:e})})))||[]));break;case"groups":(l=e.results).push.apply(l,F((null===(s=n[t])||void 0===s?void 0:s.map((function(e){return new d.j(e)})))||[]));break;default:(c=e.results).push.apply(c,F(n[t]))}e.loadingMore=!1}),!0)}},{key:"_fetch",value:function(e,t){var n,r,i,a=this,l=H(H({},null===(n=this.filterForm)||void 0===n?void 0:n.buildFinalValues()),null===(r=this.skillSearchForm)||void 0===r?void 0:r.buildFinalValues());f.X.push("recent_search",{q:this.searchTerm,key:this.searchTerm||" ",category:this.activeCategory,filters:l,date:new Date},15,!0),this.recentSearchesRefresh++,null===(i=this._curFetch)||void 0===i||i.abortFetch(),this._curFetch=(0,o.SC)("search/"+this.activeCategory,{onComplete:function(){return a._curFetch=null},data:Object.assign({q:this.searchTerm,skip:t&&this.results.length},l)},e)}},{key:"clear",value:function(){var e=this;this._searchTerm="",Blsm.isFeatureEnabled("skills_occupations")&&!this.skillSearchForm&&(this.skillSearchForm=new ne({onValueChange:(0,b.Ds)(this.doSearch,500),showOccupation:function(){return"users"===e.activeCategory}}))}},{key:"activeCategory",get:function(){return this._category||f.X.get("active_search_category")||this.searchCategories[0].val},set:function(e){var t,n=X((0,a.vm)().mainRoute,1)[0];f.X.set("active_search_category",e),"search"!==n?this._category=e:this.nav([e,H({q:this.searchTerm},null===(t=this.skillSearchForm)||void 0===t?void 0:t.buildFinalValues())])}},{key:"filterForm",get:function(){return this._filterForms[this.activeCategory]}},{key:"searchTerm",get:function(){return this._searchTerm},set:function(e){this.nav([this.activeCategory,{q:e}])}},{key:"moreAvailable",get:function(){return!this.loading&&!1!==this.totalCount&&this.totalCount>this.results.length}},{key:"recentSearches",get:function(){var e;return this.recentSearchesRefresh,((null===(e=f.X.get("recent_search"))||void 0===e?void 0:e.reverse())||[]).map((function(e){var t=e.q?e.q.truncate(40,"..."):"---";return{val:e,label:"".concat(e.date?new moment(e.date).utcOffset(Blsm.prm.timezone_offset).format("".concat(Blsm.prm.short_date_moment_format," ").concat(Blsm.prm.time_moment_format)):""," ").concat("  "," ").concat(t," (").concat(Y()[e.category].caps(),")")}}))}}])&&W(t.prototype,n),i&&W(t,i),e}()).prototype,"_searchTerm",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),k=$(w.prototype,"_category",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),x=$(w.prototype,"results",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S=$(w.prototype,"totalCount",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),j=$(w.prototype,"loading",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),C=$(w.prototype,"loadingMore",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),P=$(w.prototype,"compactView",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Z=$(w.prototype,"advanceFilterShow",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),B=$(w.prototype,"_filterForms",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{users:null,groups:null,assignments:null,catalog:null,tasks:null,content:null,mycontent:null,discussions:null}}}),T=$(w.prototype,"advanced",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=$(w.prototype,"suggestion",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=$(w.prototype,"recentSearchesRefresh",[r.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),$(w.prototype,"activeCategory",[r.computed],Object.getOwnPropertyDescriptor(w.prototype,"activeCategory"),w.prototype),$(w.prototype,"filterForm",[r.computed],Object.getOwnPropertyDescriptor(w.prototype,"filterForm"),w.prototype),$(w.prototype,"searchTerm",[r.computed],Object.getOwnPropertyDescriptor(w.prototype,"searchTerm"),w.prototype),$(w.prototype,"moreAvailable",[r.computed],Object.getOwnPropertyDescriptor(w.prototype,"moreAvailable"),w.prototype),$(w.prototype,"doSearch",[v],Object.getOwnPropertyDescriptor(w.prototype,"doSearch"),w.prototype),$(w.prototype,"updateRoute",[r.action],Object.getOwnPropertyDescriptor(w.prototype,"updateRoute"),w.prototype),$(w.prototype,"getMore",[_],Object.getOwnPropertyDescriptor(w.prototype,"getMore"),w.prototype),$(w.prototype,"recentSearches",[r.computed],Object.getOwnPropertyDescriptor(w.prototype,"recentSearches"),w.prototype),w),ee=function(e){D(n,e);var t=N(n);function n(e){var r,o=e.onValueChange;return J(this,n),(r=t.call(this,{onValueChange:o}))._fields=[{type:"component",Render:m.R9,label:lng("filter by type").caps()+":"},{type:"checkbox",name:"types[Group]",checkboxValue:"Group",label:lng("groups").caps()},{type:"checkbox",name:"types[Course]",checkboxValue:"Course",label:lng("courses").caps()},{type:"checkbox",name:"types[Ou]",checkboxValue:"Ou",label:lng("org units").caps()},{type:"checkbox",name:"types[Qualification]",checkboxValue:"Qualification",label:lng("qualifications").caps()},{type:"checkbox",name:"types[Workplan]",checkboxValue:"Workplan",label:lng("workplans").caps()},{type:"component",name:"rules",Render:c._,props:{object_type:"groups"}}],r._prepFields(),r}return n}(i.I),te=function(e){D(n,e);var t=N(n);function n(e){var r,o=e.onValueChange;return J(this,n),(r=t.call(this,{onValueChange:o}))._fields=[{type:"text",name:"ou",label:lng("filter by org' unit").caps(),disable:function(e){return!!e.get("no_ou")}},{type:"checkbox",name:"no_ou",label:lng("no org' unit").caps()},{type:"component",Render:c._,props:{object_type:"users"},name:"rules"}],r._prepFields(),r}return n}(i.I),ne=function(e){D(n,e);var t=N(n);function n(e){var r,i=e.onValueChange,a=e.showOccupation;return J(this,n),(r=t.call(this,{onValueChange:i}))._fields=[{type:"multiple_items",name:"skills",label:lng("search skill"),showId:!1,searchData:function(e,t){var n=e.term,r=e.ids;return(0,o.SC)("skills/autocomplete_skill",{data:{term:n,id:r}},t)}},{type:"single_item",name:"occupation",label:lng("search occupation"),showId:!1,searchData:function(e,t){var n=e.term,r=e.ids;return(0,o.SC)("skills/autocomplete_occupation",{data:{term:n,id:r}},t)},visible:function(){return a()}}],r._prepFields(),r.ready=!0,r}return n}(i.I)},23838:function(e,t,n){"use strict";n.d(t,{Nd:function(){return rp},l9:function(){return Yu},vm:function(){return ep}});var r,o,i,a,l,s,c,u=n(27821),p=n(87363),d=n(71134),f=n(96901),m=n(40441),g=n(88989),h=n(85597),b=n(9431);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return _(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function w(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function O(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var S=(o=x((r=function(){function e(t){var n=t.mainStore;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),w(this,"opened",o,this),w(this,"activeItem",i,this),k(this,"managementMenuOptions",[]),w(this,"managementMenuOpen",a,this),w(this,"filterText",l,this),w(this,"_recentUse",s,this),w(this,"inbox_unread_count",c,this),k(this,"mainStore",void 0),k(this,"haveDashboardTabTodisplay",(function(){return Blsm.isFeatureEnabled("personal_dashboard")||Blsm.isFeatureEnabled("dashboard_assignments_workspaces")})),(0,u.makeObservable)(this),this.mainStore=n,this.managementMenuOptions=this._managementMenuBuild()}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=v(e,2),n=t[0],r=t[1];if("list"===n&&"forms"===r)return this.activeItem=r;switch(n){case"workspace":return this.activeItem="home";case"edit":case"edit2":return this.activeItem="management"}this.activeItem=n}},{key:"addRecentLink",value:function(e){e=(0,d.SZ)(e),this._recentUse.remove(e),this._recentUse.unshift(e),this._recentUse.length>9&&this._recentUse.replace(this._recentUse.slice(0,9)),g.X.set("management_menu_recent",this._recentUse.slice())}},{key:"_managementMenuBuild",value:function(){var e=[];if(Blsm.canAccessModule("Catalog")){var t=[];(Blsm.canAccessModule("Content|Questionnaires")||Blsm.hasPermission("blogs"))&&t.push({label:lng("my content"),link:{list:"content"}}),Blsm.hasPermission("catalog_manager")&&(Blsm.canAccessModule("Content|Questionnaires")&&t.push({label:lng("content permissions"),link:{list:"content_permissions"},help:"@content_permissions"}),t.push({label:lng("category tree"),link:{categoryTree:!0},help:"@categories_tree"}),Blsm.checkMod(["","ENT"])&&t.push({label:lng("manage tags"),link:{list:"tags"},help:"@manage_tags"})),t.length&&e.push({title:lng("knowledge & content"),icon:"menu_library",items:t,tutorial:"content:management"})}if(Blsm.canAccessModule("Elearning")){var n=[{label:lng("assignments"),link:{list:"assignments"},help:"@my_assignments"}];Blsm.isFeatureEnabled("assignments")&&Blsm.checkMod(["assignments","ENT"])&&n.push({label:lng("master assignments"),link:{list:"master_assignments"},help:"@my_master_assignments"}),Blsm.user.isPowerManager&&(n.push({label:lng("all assignments"),link:{list:"all_assignments"}}),Blsm.checkMod(["assignments","ENT"])&&n.push({label:lng("grading ladders (verbal scoring)"),link:{list:"grading_ladders"}})),e.push({title:lng("assignments"),icon:"mng_elearning",items:n})}var r=[];if(Blsm.CanUser("view","users","relative")){var o,i={label:lng("users"),link:{list:"users"},help:"@users",subs:[]};r.push(i),Blsm.user.isAdmin&&(i.subs.push({label:lng("import users from %s","active directory"),link:{import:"ldap"}}),(null===(o=Blsm.InitialData.main_menu)||void 0===o?void 0:o.hibobOn)&&i.subs.push({label:lng("import users from %s","Hibob"),link:{import:"hibob"}}))}Blsm.user.isPowerManager&&r.push({label:lng("power managers"),link:{list:"power_managers"}}),Blsm.canAccessModule("Ous")&&r.push({label:lng("organizational units"),link:{list:"ous"},help:"@organizational_units"}),Blsm.CanUser("view","groups","relative")&&r.push({label:lng("groups"),link:{list:"groups"},help:"@groups",tutorial:"workspace:configurations"}),Blsm.user.isPowerManager&&(r.push({label:lng("roles and privileges"),link:{list:"roles"},help:"@roles_and_privileges"},{label:lng("user fields"),link:{list:"user_fields"},help:"@manage_profile"}),Blsm.checkMod(["","ENT"])&&r.push({label:lng("workspace fields"),link:{list:"group_fields"}})),Blsm.isFeatureEnabled("patients")&&Blsm.hasPermission("case_manager")&&Blsm.checkMod(["patients","ENT"])&&(r.push({label:lng("patients"),link:{list:"patients"}}),r.push({label:lng("patient cases"),link:{list:"patient_cases"}})),r.length&&e.push({title:lng("users & groups"),icon:"mng_users",items:r});var a=[];if(Blsm.CanUser("view","groups","relative")&&a.push({label:lng("courses"),link:{list:"courses"},help:"@groups"}),Blsm.user.isPowerManager&&Blsm.isFeatureEnabled("course_registartion_external")&&Blsm.checkMod(["course_registartion_external","ENT"])&&a.push({label:lng("external event types"),link:{list:"external_course_types"}},{label:"".concat(lng("organizing institutions")),link:{list:"suppliers",params:"type=RegExt"}}),Blsm.CanUser("view","templates","relative")&&a.push({label:lng("course templates"),link:{list:"course_templates"},help:"@course_templates"}),Blsm.canAccessModule("Workplan")&&Blsm.checkMod(["","ENT"])&&a.push({label:lng("workplans"),link:{list:"workplans"}}),Blsm.canAccessModule("Certificates")&&a.push({label:lng("diplomas"),link:{list:"diplomas"},help:"@my_diplomas"}),a.length&&e.push({title:lng("courses"),icon:"mng_courses",items:a}),Blsm.canAccessModule("Qualifications")){var l=[{label:lng("qualifications"),link:{list:"qualifications"}}];Blsm.isFeatureEnabled("professions")&&Blsm.checkMod(["professions","ENT"])&&(l.push({label:lng("professions"),link:{list:"qualifications",params:"filters[professions]=1"}}),Blsm.user.isPowerManager&&l.push({label:lng("professional levels"),link:{list:"levels"}})),e.push({title:lng("qualifications"),icon:"mng_qualifications",items:l})}if(Blsm.canAccessModule("Resources")){var s=[{label:lng("resources"),link:{list:"resources"},help:"@manage_resources"},{label:lng("instructors"),link:{list:"resources",params:"mode=instructors"},help:"@manage_instructors"}];Blsm.checkMod(["Resources","ENT"])&&s.push({label:lng("resource categories"),link:{list:"resource_categories"}},{label:lng("resource planning"),link:{resourcePlanning:!0},help:"@resources_planning"},{label:lng("resource bundles"),link:{list:"resource_bundles"}}),e.push({title:lng("resources"),icon:"mng_resources",items:s})}if(Blsm.canAccessModule("Budgets")&&Blsm.checkMod(["Budgets","ENT"])){var c=[{label:lng("budgets"),link:{list:"budgets"}},{label:lng("budget items"),link:{list:"budget_items"}}];e.push({title:lng("budgets"),icon:"mng_budget",items:c})}if(Blsm.user.isPowerManager){var u=[];u.push.apply(u,(0,h.mL)().map((function(e){return Object.assign({link:e.href},e)}))),Blsm.canAccessModule("Sequences")&&u.push({label:lng("approval sequences"),link:{list:"approval_sequences"},help:"@manage_approval_sequences"}),u.length&&e.push({title:lng("approvals"),icon:"mng_approvals",items:u,approvals_menu:!0})}var p=[];if(Blsm.isFeatureEnabled("sites")&&Blsm.user.isPowerManager&&Blsm.checkMod(["sites","ENT"])&&p.push({label:lng("sites"),link:{list:"sites"}}),Blsm.user.isPowerManager&&(p.push({label:lng("themes"),link:{list:"themes"},help:"@manage_themes"}),Blsm.checkMod(["","ENT"])&&p.push({label:lng("poster default gallery"),link:{list:"gallery"}})),Blsm.isFeatureEnabled("portal")&&Blsm.hasPermission("portal_manager")&&(p.push({label:b.Eo[b.Bu.DOMAIN],link:{list:"portals",params:{type:b.Bu.DOMAIN}}},{label:lng("edit the global news list"),link:{list:"news_items"}}),Blsm.checkMod(["portal","ENT"])&&p.push({label:b.Eo[b.Bu.ANONYMOUS],link:{list:"portals",params:{type:b.Bu.ANONYMOUS}}},{label:b.Eo[b.Bu.GROUP],link:{list:"portals",params:{type:b.Bu.GROUP}}},{label:lng("photo albums"),link:{list:"album"}})),Blsm.isFeatureEnabled("app_portal")&&Blsm.hasPermission("portal_manager")&&p.push({label:b.Eo[b.Bu.APP],link:{list:"portals",params:{type:b.Bu.APP}}}),p.length&&e.push({title:lng("sites & portals"),icon:"mng_site",items:p}),Blsm.user.isPowerManager){var d=[];Blsm.isFeatureEnabled("checkin")&&Blsm.checkMod(["checkin","ENT"])&&d.push({label:lng("check-in desk"),link:"checkin/config?domain="+Blsm.user.domain_id}),Blsm.isFeatureEnabled("food")&&Blsm.checkMod(["food","ENT"])&&(d.push({label:lng("food providers"),link:{list:"food_providers"}}),d.push({label:lng("food orders"),link:{list:"food_orders"}})),d.length&&e.push({title:lng("kiosk"),icon:"kiosk",items:d})}var m=[];Blsm.user.isPowerManager&&Blsm.isFeatureEnabled("group_tasks")&&Blsm.checkMod(["group_tasks","ENT"])&&m.push({label:lng("task statuses"),link:{list:"task_statuses"}},{label:lng("task types"),link:{list:"task_types"}}),m.length&&e.push({title:lng("tasks"),icon:"support",items:m});var g=[];if(Blsm.user.isPowerManager&&Blsm.isFeatureEnabled("gamification")&&g.push({label:lng("challenges"),link:{list:"challenges"}}),g.length&&e.push({title:lng("gamification"),icon:"game",items:g}),Blsm.user.isPowerManager){var y,_=[{label:lng("manager permission types"),link:{list:"manager_permission_types"},tutorial:"workspace:manager_permission_types"},{label:lng("domain"),link:{edit:"domain",id:Blsm.user.domain_id},help:"@manage_domain"}];Blsm.checkMod(["","ENT"])&&_.push({label:lng("manuals|guide"),link:{list:"manuals"},help:"@manage_manuals"},{label:lng("user status codes"),link:{list:"status_codes"}},{label:lng("system messages"),link:{list:"system_messages"},help:"@manage_system_messages"},{label:lng("phrases"),link:{list:"phrases"},help:"@manage_phrases"}),Blsm.canAccessModule("Currency")&&Blsm.checkMod(["Currency","ENT"])&&_.push({label:lng("currencies"),link:{list:"currencies"}}),window.Branch.isAdmin()&&_.push({label:lng("classifications"),link:{list:"classifications"}}),Blsm.isFeatureEnabled("designation")&&Blsm.checkMod(["designation","ENT"])&&_.push({label:lng("designation",{phrase:!0}),link:{list:"designation"}}),Blsm.isFeatureEnabled("professions")&&Blsm.checkMod(["professions","ENT"])&&_.push({label:lng("skills for questionnaires",{phrase:!0}),link:{list:"question_skills"}}),Blsm.isFeatureEnabled("online_content")&&_.push({label:lng("online content categories"),link:{list:"oc_categories"}}),Blsm.isFeatureEnabled("eula")&&_.push({label:lng("EULA consent"),link:{edit:"eula"}}),null!==(y=Blsm.InitialData.main_menu)&&void 0!==y&&y.providersOn&&_.push({label:lng("providers"),link:{list:"providers"}}),_.push({label:lng("activity log"),link:{list:"activity_log"}}),e.push({title:lng("domain management"),icon:"mng_domain",items:_});for(var w=[],O=0,k=Object.entries((0,f.K)(Blsm.checkMod(["","ENT"])));O<k.length;O++){var x=v(k[O],2),S=x[0],j=x[1];w.push({label:"".concat(lng("custom fields")," - ").concat(j.caps(!1)),link:{list:"customfields",params:S}})}w.length&&e.push({title:lng("custom fields"),icon:"edit",items:w})}if(Blsm.user.isAdmin){var C=[{label:lng("domains"),link:{list:"domains"}},{label:lng("admins"),link:{list:"admins"}},{label:lng("power managers"),link:{list:"power_managers"}},{label:lng("server configuration"),link:{edit:"server"},help:"@edit_server_parameters"},{label:lng("update"),link:{edit:"update_system"}},{label:lng("mailing monitor"),link:{list:"mails/status=queue"}},{label:lng("error log"),link:{list:"error_log"}},{label:lng("remote servers"),link:{list:"remote_systems"}}];Blsm.InitialData.special.sqltools&&C.push({label:lng("sql tools"),link:"#sql"}),e.push({title:lng("system administration"),icon:"mng_settings",items:C})}return Blsm.user.isAdmin&&e.push({title:lng("online content"),icon:"external_content",items:[{label:"OpenSesame",link:{edit:"opensesame"}},{label:"LinkedIn Learning",link:{edit:"linkedin_learning"}}]}),1===e.length&&e[0].approvals_menu&&(e=[]),e}},{key:"recentUse",get:function(){var e=this.managementMenuOptions.slice();return this._recentUse.map((function(t){return(0,d.oH)(e,(function(e){return"object"===y(e)&&t===(0,d.SZ)(e.link)}))})).filter((function(e){return e}))}},{key:"menuBuild",get:function(){var e,t,n,r=this,o=[],i=Blsm.isFeatureEnabled("digital_library")||Blsm.isFeatureEnabled("online_content"),a=Blsm.isFeatureEnabled("catalog"),l=(null===(e=Blsm.InitialData.main_menu)||void 0===e?void 0:e.coursecatalog)||(null===(t=Blsm.InitialData.main_menu)||void 0===t?void 0:t.manager_coursecatalog);return Blsm.user.id&&this.managementMenuOptions.length>0&&o.push({id:"management",icon:"menu_management",label:lng("management"),className:"mobile_off",onClick:function(){return r.managementMenuOpen=!r.managementMenuOpen}}),null!==(n=Blsm.InitialData.main_menu)&&void 0!==n&&n.portal&&o.push({id:"portal",label:lng("portal"),icon:"home",href:(0,m.p4)({portal:!0})}),Blsm.user.id&&(o.push({id:"home",label:lng("desktop",{phrase:!0}),icon:"desktop",href:(0,m.p4)({home:!0})}),Blsm.canAccessModule("Reports")&&!(0,d.tq)()&&(this.haveDashboardTabTodisplay()&&o.push({id:"dashboard",label:lng("dashboard"),icon:"menu_dashboard",href:"#dashboard"}),o.push({id:"reports",label:lng("reports"),icon:"report",href:"#reports"})),i?(a||l)&&o.push({id:"library",label:lng("digital library",{phrase:!0}),icon:"for_u",href:(0,m.p4)({library:!0})}):a&&o.push({id:"catalog",label:lng("knowledge center",{phrase:!0}),icon:"menu_library",href:(0,m.p4)({catalog:!0})}),Blsm.isGuiFeatureEnabled("hide_calendar")||o.push({id:"calendar",label:lng("calendar"),icon:"menu_calendar",href:(0,m.p4)({calendar:!0})}),o.push({id:"messages",label:lng("messages"),icon:"message",href:(0,m.p4)({message:!0}),count:this.mainStore.inbox_unread_count})),!l||Blsm.user.id&&i||o.push({id:"cregistration",label:lng("catalog",{phrase:!0}),icon:"mng_courses",href:(0,m.p4)({courseCatalog:!0})}),Blsm.user.id&&Blsm.isFeatureEnabled("questionnaire_forms")&&Blsm.checkMod(["questionnaire_forms","ENT"])&&o.push({id:"forms",label:lng("forms"),icon:"vendor_form",href:(0,m.p4)({list:"forms"})}),o}}])&&O(t.prototype,n),r&&O(t,r),e}()).prototype,"opened",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=x(r.prototype,"activeItem",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=x(r.prototype,"managementMenuOpen",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),l=x(r.prototype,"filterText",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),s=x(r.prototype,"_recentUse",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.X.get("management_menu_recent")||[]}}),c=x(r.prototype,"inbox_unread_count",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),x(r.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(r.prototype,"updateRoute"),r.prototype),x(r.prototype,"addRecentLink",[u.action],Object.getOwnPropertyDescriptor(r.prototype,"addRecentLink"),r.prototype),x(r.prototype,"recentUse",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"recentUse"),r.prototype),x(r.prototype,"menuBuild",[u.computed],Object.getOwnPropertyDescriptor(r.prototype,"menuBuild"),r.prototype),r),j=n(12213),C=n(98e3),P=n(28534),Z=n(64902),B=n(22334),T=n(22906),E=n(55762),I=n(70917),A=n(15560),D=n(61533),R=n.n(D),N=n(16920),z=n(7392),M=n(57697),F=n(85311),q=n(35944);function X(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function L(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?X(Object(n),!0).forEach((function(t){U(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=(0,u.observable)([]),H=(0,A.observer)((function(){return V.length?(0,q.tZ)("div",{children:V.map((function(e){return(0,q.tZ)(oe,L(L({},e),{},{onClose:function(){var t;return V.remove(e),null===(t=e.onClose)||void 0===t?void 0:t.call(e)}}),e.__uid)}))}):null}));(0,d.Um)((function(){R().render((0,q.tZ)(H,{}),(0,d.wq)("InteractiveNoticeQueue"))}));var G,J,W,K,Y,Q,ee,te,ne=function(e){return V[0]=e},re=(0,I.iv)("margin:10px auto;background-color:",N.g.colors.dominant_white,";width:70%;display:flex;background-color:",N.g.colors.white,";-webkit-box-shadow:0 10px 13px -7px #000000,5px 5px 25px -15px rgba(0,0,0,0.5);box-shadow:0 10px 13px -7px #000000,5px 5px 25px -15px rgba(0,0,0,0.5);padding:30px;justify-content:space-around;border-radius:8px;align-items:center;position:fixed;bottom:0;",N.g.far,":15%;z-index:",N.g.z.notice,";",N.g.mQuery.mobile,"{width:90vw;left:calc(100% - 95vw);flex-wrap:wrap;}",N.g.mQuery.mobileNarrow,"{.interactive-content{padding:10px 0;}}.interactive-content{",N.g.classes.margin_near("20px")," .title{font-size:18px;font-weight:700;}.msg{font-size:16px;}.title,.msg{margin-top:10px;}}.buttons{display:flex;height:50px;justify-content:flex-end;div{padding:30px;font-size:1.1em;font-weight:600;align-items:center;",N.g.classes.margin_near("10px"),";display:flex;}}",""),oe=function(e){var t=e.onClose,n=e.href,r=e.title,o=e.msg;return(0,q.tZ)(E.SV,{children:(0,q.BX)("div",{css:re,children:[(0,q.tZ)(M.F$,{label:"i",color:N.g.colors.yellow,size:65,underLabel:!1}),(0,q.BX)("div",{className:"interactive-content",children:[(0,q.tZ)("div",{className:"title",children:r.caps()}),(0,q.tZ)("div",{className:"msg",children:o.caps()})]}),(0,q.tZ)(F.zh,{}),(0,q.BX)("div",{className:"buttons",children:[(0,q.tZ)(z.l,{theme:"contained",onClick:function(){return(0,m.p4)(n,!0)},children:lng("run assignment").caps()}),(0,q.tZ)(z.l,{className:"btn",theme:"outlined",onClick:function(e){e.stopPropagation(),e.preventDefault(),t()},children:lng("close").caps()})]})]})})};function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pe(e);if(t){var o=pe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?ue(e):t}function ue(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function de(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fe(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function fe(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function he(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ye(e,t,n){return t&&be(e.prototype,t),n&&be(e,n),e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var we,Oe,ke,xe,Se=(G=u.action.bound,W=_e((J=function(){function e(){var t=this;he(this,e),ge(this,"new_count",W,this),ge(this,"notifications",K,this),ge(this,"approvals",Y,this),ge(this,"t2k_echo",Q,this),ge(this,"t2k_echo_count",ee,this),ge(this,"showImportant",te,this),ve(this,"timestamp",null),ve(this,"total",0),ve(this,"broadCastChannel",void 0),ve(this,"_refreshInterval",void 0),(0,u.makeObservable)(this),void 0!==window.BroadcastChannel&&(this.broadCastChannel=new BroadcastChannel("NotificationStore"),this.broadCastChannel.onmessage=function(e){var t;return(null===(t=e.data)||void 0===t?void 0:t.popupClosed)&&(0,P.EP)(e.data.popupClosed)}),this.fetchNotifications(),Blsm.prm.LOCALHOST||(this._refreshInterval=setInterval((function(){return t.fetchNotifications()}),window.Branch.NotificationInterval()))}return ye(e,[{key:"fetchNotifications",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.more;if((0,d.B5)(Blsm.user.id)){var r={};n?r.skip=this.notifications.reduce((function(e,t){return e+t.count}),0):r.since=this.timestamp,(0,C.SC)("notifications",{data:r,selfErrorHandling:!0,onError:function(t){return 401===t.status&&clearInterval(e._refreshInterval)}},(0,u.action)((function(t){var n,r,o,i,a,l;if(!Array.isArray(null==t?void 0:t.notifications))return console.warn(t);null!==(n=t.t2k_echo_req)&&void 0!==n&&null!==(r=n.post)&&void 0!==r&&r.context_id&&(e.t2k_echo=t.t2k_echo_req,$.ajax(e.t2k_echo.url,{data:e.t2k_echo.post,method:"POST",complete:function(t){(0,d.kE)(null==t?void 0:t.responseText)&&(e.t2k_echo_count=parseInt(t.responseText))}})),(null===(o=t.notifications)||void 0===o?void 0:o.length)>0&&(null===(i=Blsm.user)||void 0===i||null===(a=i.preferences)||void 0===a||!a.hide_mention_notice)&&e.mentionNotice(t),e.followingAssignmentsNotice(t);var s,c=[],p=new Map,f=de(t.notifications);try{for(f.s();!(s=f.n()).done;){var m=s.value,g=new je(m);c.push(g),(0,d.B5)(g.task_id)&&p.set(g.task_id,g)}}catch(e){f.e(e)}finally{f.f()}var h,b=de(e.notifications);try{for(b.s();!(h=b.n()).done;){var y=h.value;c.push(y)}}catch(e){b.e(e)}finally{b.f()}e.notifications=c,t.timestamp&&(e.timestamp=t.timestamp),"new_count"in t&&(e.new_count=parseInt(t.new_count),Blsm.helpers.favicon_dot(e.new_count>0)),t.total&&(e.total=parseInt(t.total)),(0,d.Dw)(t.approvals)&&(e.approvals=u.observable.object(t.approvals)),null!==(l=t.notifications)&&void 0!==l&&l.length&&rp.trigger("FetchNotifications",null==t?void 0:t.notifications)})))}}},{key:"markNotificationsRead",value:function(){var e=this;(0,C.SC)("notifications/mark_all_read",{},(function(){e.notifications.forEach((function(e){return e.markRead()}))})),Blsm.helpers.favicon_dot(!1)}},{key:"toggleImportant",value:function(){this.showImportant=!this.showImportant}},{key:"markRead",value:function(e){var t=this;(0,C.SC)("notifications/mark_read",{data:{id:e}},(function(){t.notifications.forEach((function(t){t.pn_id==e&&t.markRead()}))}))}},{key:"approvalTypesSorted",value:function(){var e=this;return Object.keys(this.approvals).filter((function(t){return e.approvals[t]>0})).sort((function(t,n){return e.approvals[t]>e.approvals[n]?-1:1}))}},{key:"totalApprovals",value:function(){return Object.values(this.approvals).reduce((function(e,t){return parseInt(e||0)+parseInt(t||0)}),0)}},{key:"mentionNotice",value:function(e){var t=this,n=e.notifications.filter((function(e){return"comment_mention"===e.object_type&&!e.is_read&&moment(e.pn_time).isAfter(ep().startTime)})).sort((function(e,t){return moment(e.pn_time).isAfter(t.pn_time)}));if(n.length>0){var r=n[0],o=r.data,i=r.pn_id,a=r.pn_time,l=r.user;(0,P.LB)({title:o.task_title,msg:lng("%s mentioned you in a comment",(0,d.v2)(l)),href:{edit:"task",id:o.task_id,section:"c=".concat(o.comment_id)},onClick:function(){t.markRead(i),t.new_count>0&&t.new_count--},altIconComponent:(0,q.tZ)(Z.qE,{user:l,size:"2em",rounded:!1,balloon:!1}),remark:(0,B.GG)(a,{relative:!0}),closeOnClick:!0,type:"notice",id:i,onClose:function(){var e;return null===(e=t.broadCastChannel)||void 0===e?void 0:e.postMessage({popupClosed:i})}})}}},{key:"followingAssignmentsNotice",value:function(e){var t,n=de(e.notifications.filter((function(e){return"following_assignment"===e.object_type&&!e.is_read})).sort((function(e,t){return moment(e.pn_time).isAfter(t.pn_time)})));try{for(n.s();!(t=n.n()).done;){var r=t.value;ne({title:lng("the assignment you just finished has a following assignment"),msg:lng('next assignment: "%s"',r.data.assignment_name).caps(),href:{launcher:"assignment",id:r.object_id,cuser:r.data.cuser,absolute:!0}}),this.markRead(r.pn_id)}}catch(e){n.e(e)}finally{n.f()}}},{key:"filteredNotifications",get:function(){var e=this;return this.notifications.slice().sort((function(e,t){return t.attr("time_order")-e.attr("time_order")})).filter((function(t){return!e.showImportant||!!(t.task_id&&t.assignee_name===(0,d.v2)(Blsm.user)||"comment_mention"===t.object_type)}))||[]}},{key:"t2k_echo_req",get:function(){return this.t2k_echo}}]),e}()).prototype,"new_count",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),K=_e(J.prototype,"notifications",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Y=_e(J.prototype,"approvals",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Q=_e(J.prototype,"t2k_echo",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ee=_e(J.prototype,"t2k_echo_count",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),te=_e(J.prototype,"showImportant",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_e(J.prototype,"fetchNotifications",[G],Object.getOwnPropertyDescriptor(J.prototype,"fetchNotifications"),J.prototype),_e(J.prototype,"filteredNotifications",[u.computed],Object.getOwnPropertyDescriptor(J.prototype,"filteredNotifications"),J.prototype),_e(J.prototype,"t2k_echo_req",[u.computed],Object.getOwnPropertyDescriptor(J.prototype,"t2k_echo_req"),J.prototype),J),je=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(n,e);var t=se(n);function n(e){var r;return he(this,n),ve(ue(r=t.call(this,e)),"subs",[]),(0,u.makeObservable)(ue(r)),r}return ye(n,[{key:"markRead",value:function(){this._attr.is_read=1}},{key:"addSub",value:function(e){this.subs=[].concat(ae(this.subs),[e],ae(e.subs))}},{key:"pn_id",get:function(){return this._attr.pn_id}},{key:"is_read",get:function(){return this._attr.is_read}},{key:"time",get:function(){return this._attr.pn_time||this._attr.time}},{key:"task_id",get:function(){return this._attr.data.task_id}},{key:"assignee_name",get:function(){return this._attr.data.assignee_name}},{key:"object_type",get:function(){return this._attr.object_type}},{key:"count",get:function(){return this.subs.length+1}},{key:"task_resolution",get:function(){return this._attr.data.task_resolution}},{key:"task_status",get:function(){return this._attr.data.task_status}},{key:"task_title",get:function(){return this._attr.data.task_title}},{key:"activity_type",get:function(){return this._attr.data.type}},{key:"user",get:function(){return this._attr.user}}]),n}(T.JH),Ce=n(60421);function Pe(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Be(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Te(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ee(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ie(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ae,De,Re=(Oe=Ie((we=function(){function e(t){var n,r,o,i=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Te(this,"loadingChunk",Oe,this),Te(this,"formObj",ke,this),o=[],(r="route")in(n=this)?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,Te(this,"_showUsersDrawer",xe,this),(0,u.makeObservable)(this),this.nav=i}var t,r,o,i,a;return t=e,(r=[{key:"updateRoute",value:function(e,t){var n,r,o=this;(t.reload||"success"===(null===(n=this.formObj)||void 0===n?void 0:n.status)||!0!==(null===(r=this.formObj)||void 0===r?void 0:r.updateFormRoute(e)))&&(this.route=e,this._getFormObject().then((function(e){return o.formObj=e})))}},{key:"_getFormObject",value:(i=regeneratorRuntime.mark((function e(){var t,r,o,i,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(800).then(n.bind(n,83101));case 2:t=e.sent,r=t.forms,this.loadingChunk=!1,o=Pe(r),e.prev=6,o.s();case 8:if((i=o.n()).done){e.next=17;break}if(a=i.value,!(l=a.matchForm(this.route,{nav:this.nav}))){e.next=15;break}return Blsm.forms||(Blsm.forms=[]),Blsm.forms.push(l),e.abrupt("return",l);case 15:e.next=8;break;case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(6),o.e(e.t0);case 22:return e.prev=22,o.f(),e.finish(22);case 25:case"end":return e.stop()}}),e,this,[[6,19,22,25]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Be(o,n,r,a,l,"next",e)}function l(e){Be(o,n,r,a,l,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"setShowUsersDrawer",value:function(e){this._showUsersDrawer=e}},{key:"invalidate",value:function(){this.formObj&&(this.formObj.ready=!1)}},{key:"showUsersDrawer",get:function(){return this._showUsersDrawer}},{key:"ready",get:function(){return this.formObj&&this.formObj.ready}},{key:"error",get:function(){return this.formObj?this.formObj.error:"form not found"}}])&&Ee(t.prototype,r),o&&Ee(t,o),e}()).prototype,"loadingChunk",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),ke=Ie(we.prototype,"formObj",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),xe=Ie(we.prototype,"_showUsersDrawer",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ie(we.prototype,"setShowUsersDrawer",[u.action],Object.getOwnPropertyDescriptor(we.prototype,"setShowUsersDrawer"),we.prototype),Ie(we.prototype,"showUsersDrawer",[u.computed],Object.getOwnPropertyDescriptor(we.prototype,"showUsersDrawer"),we.prototype),Ie(we.prototype,"ready",[u.computed],Object.getOwnPropertyDescriptor(we.prototype,"ready"),we.prototype),Ie(we.prototype,"error",[u.computed],Object.getOwnPropertyDescriptor(we.prototype,"error"),we.prototype),we);function Ne(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return ze(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ze(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function ze(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Me(e,t,n,r,o,i,a){try{var l=e[i](a),s=l.value}catch(e){return void n(e)}l.done?t(s):Promise.resolve(s).then(r,o)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function qe(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Xe=(De=qe((Ae=function(){function e(t){var n,r,o,i,a,l,s,c=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="listObj",i=this,(o=De)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(i):void 0}),s=[],(l="route")in(a=this)?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,(0,u.makeObservable)(this),this.nav=c}var t,r,o,i,a;return t=e,(r=[{key:"updateRoute",value:function(e){var t,n=this;!0!==(null===(t=this.listObj)||void 0===t?void 0:t.updateListRoute(e))&&(this.route=e,this._getListObject().then((function(e){return n.listObj=e})))}},{key:"_getListObject",value:(i=regeneratorRuntime.mark((function e(){var t,r,o,i,a,l;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.e(822).then(n.bind(n,72564));case 2:t=e.sent,r=t.lists,o=Ne(r),e.prev=5,o.s();case 7:if((i=o.n()).done){e.next=14;break}if(a=i.value,!(l=a.match(this.route,{nav:this.nav}))){e.next=12;break}return e.abrupt("return",l);case 12:e.next=7;break;case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(5),o.e(e.t0);case 19:return e.prev=19,o.f(),e.finish(19);case 22:case"end":return e.stop()}}),e,this,[[5,16,19,22]])})),a=function(){var e=this,t=arguments;return new Promise((function(n,r){var o=i.apply(e,t);function a(e){Me(o,n,r,a,l,"next",e)}function l(e){Me(o,n,r,a,l,"throw",e)}a(void 0)}))},function(){return a.apply(this,arguments)})},{key:"ready",get:function(){var e;return null!==this.listObj&&(null===(e=this.listObj)||void 0===e?void 0:e.ready)}},{key:"error",get:function(){return this.listObj?this.listObj.error:"list not found"}}])&&Fe(t.prototype,r),o&&Fe(t,o),e}()).prototype,"listObj",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),qe(Ae.prototype,"ready",[u.computed],Object.getOwnPropertyDescriptor(Ae.prototype,"ready"),Ae.prototype),qe(Ae.prototype,"error",[u.computed],Object.getOwnPropertyDescriptor(Ae.prototype,"error"),Ae.prototype),Ae),Le=n(55832),Ue=n(68567),Ve=n(60409),He=n(70081),Ge=n(48207),Je=n(53178),We=n(43698),Ke=n(539);function $e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ye(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Qe,et,tt,nt,rt,ot,it=(0,I.iv)("p{margin-top:0;a{text-decoration:underline;color:",N.g.colors.dominant_main,";}}.error{color:",N.g.colors.negative,";}.inputs{margin:15px 0;display:flex;align-items:center;>*+*{",N.g.classes.margin_near("10px"),";}}",""),at=function(e){var t=e.onSuccess,n=$e((0,p.useState)(""),2),r=n[0],o=n[1],i=$e((0,p.useState)(""),2),a=i[0],l=i[1],s=$e((0,p.useState)(),2),c=s[0],u=s[1],f=(0,He.tm)();return(0,p.useEffect)((function(){(0,C.SC)("users/otp_get_code",{},(function(e){var t=e.url;return f.current&&u(t)}))}),[]),(0,q.tZ)("div",{css:it,width:"650px",children:(0,q.BX)(Ge.U0,{children:[(0,q.tZ)("div",{children:c?(0,q.tZ)(Je.s,{value:c,size:260}):(0,q.tZ)(Ke.$,{})}),(0,q.BX)("div",{children:[(0,q.tZ)("p",{dangerouslySetInnerHTML:{__html:lng('first, download %s or any other "Google Authenticator" compatible application.','<a target="blank" href="https://authy.com/download/">Authy</a>').caps()}}),(0,q.tZ)("p",{children:lng("next, scan the QR Code on the side with the application.").caps()}),(0,q.BX)("p",{children:[lng("Then, enter your 6 digit code here and press confirm").caps(),":"]}),(0,q.tZ)("form",{onSubmit:function(e){e.preventDefault();var n=(0,d.Lv)((0,d.en)(c).search.substr(1)).secret;(0,C.SC)("users/otp_set_code",{method:"POST",data:{secret:n,code:r}},(function(e){var n=e.msg,r=e.error;if(f.current){if(r)return l(r);(0,P.qV)(n),ep().closeDialog(),null==t||t()}}))},children:(0,q.BX)("div",{className:"inputs",children:[(0,q.tZ)(We.I,{type:"text",wrapped:!0,label:lng("code"),value:r||void 0,onChange:o,error:a}),(0,q.tZ)("div",{children:(0,q.tZ)(z.l,{theme:"contained",formButton:!0,disabled:!r,children:lng("confirm").caps()})})]})}),a&&(0,q.tZ)("div",{className:"error",children:a})]})]})})},lt=n(33079),st=n(24210);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pt(e,t){return(pt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function dt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=gt(e);if(t){var o=gt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ft(this,n)}}function ft(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?mt(e):t}function mt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function gt(e){return(gt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var bt,yt,vt,_t,wt,Ot,kt=(Qe=u.action.bound,et=u.action.bound,tt=u.action.bound,nt=u.action.bound,rt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&pt(e,t)}(i,e);var t,n,r,o=dt(i);function i(e){var t,n,r,a,l,s,c,p;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),n=mt(t),a=void 0,(r="initialData")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,l=mt(t),s="fetchWorkspaces",c=ot,p=mt(t),c&&Object.defineProperty(l,s,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(p):void 0}),(0,u.makeObservable)(mt(t)),t.user=e.userStore.basicDetails,t.params=e,t.title=lng("add %s to workspaces|full name",(0,d.v2)(t.user)),t.fetchWorkspaces(),t}return t=i,(n=[{key:"buildFields",value:function(e){this.initialData=e,this._fields=[{type:"multiple_items",name:"member_of_workspaces",label:lng("select workspaces"),theme:"bright",searchData:function(e,t){(0,C.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",is_owner:1,term:e.term,id:e.ids,types:["Group","Qualification"]}},t)}}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){var t=this,n=e.member_of_workspaces.filter((function(e){return!t.initialData.member_of_workspaces.includes(e)})),r=this.initialData.member_of_workspaces.filter((function(t){return!e.member_of_workspaces.includes(t)}));this.saveToUrl("users/toggle_user_groups",{user:this.user.user_id,add:n,remove:r})}},{key:"SaveSuccess",value:function(){this.params.userStore.fetch(),(0,P.qV)(lng("user added to workspaces successfully")),ep().closeDialog()}}])&&ut(t.prototype,n),r&&ut(t,r),i}(st.I),ot=ht(rt.prototype,"fetchWorkspaces",[Qe],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){var e=this;return function(){(0,C.SC)("users/member_of_allowed_workspaces/"+e.user.user_id,{},e.buildFields)}}}),ht(rt.prototype,"buildFields",[et],Object.getOwnPropertyDescriptor(rt.prototype,"buildFields"),rt.prototype),ht(rt.prototype,"save",[tt],Object.getOwnPropertyDescriptor(rt.prototype,"save"),rt.prototype),ht(rt.prototype,"SaveSuccess",[nt],Object.getOwnPropertyDescriptor(rt.prototype,"SaveSuccess"),rt.prototype),rt),xt=n(37659),St=n(88918);function jt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ct(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zt(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Bt,Tt,Et,It,At,Dt,Rt,Nt,zt,Mt,Ft=(yt=Zt((bt=function(){function e(t){var n=this,r=t.sk_id,o=t.user_id;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),jt(this,"ready",yt,this),Pt(this,"edit_level",null),jt(this,"skill",vt,this),Pt(this,"leaderboard",[]),jt(this,"skillLog",_t,this),jt(this,"skillSuggestions",wt,this),jt(this,"showLeaderboard",Ot,this),Pt(this,"type",void 0),(0,u.makeObservable)(this),this.type=localStorage.getItem("current_skill_type_".concat(r)),(0,C.SC)("skills/skill_page",{data:{sk_id:r,user_id:o,type:this.type}},(function(e){var t,r,i;n.user_id=o,n.edit_level=e.edit_level,n.skill=e.skill,null===(t=e.leaderboard)||void 0===t||t.forEach((function(e,t){e.rank=t+1,n.leaderboard.push(e)})),n.skillLog=null===(r=e.log)||void 0===r?void 0:r.map((function(e){return e.assignment_id?new xt.m(e):e.group_id?new St.N(e):void 0})),n.skillSuggestions=null===(i=e.suggestions)||void 0===i?void 0:i.map((function(e){return e.assignment_id?new xt.m(e):e.group_id?new St.N(e):void 0})),n.ready=!0}))}var t,n,r;return t=e,(n=[{key:"setSkillLevel",value:function(e){var t=this,n=e.user_id,r=e.sk_id,o=e.val,i=Blsm.user,a={sk_id:r,user_id:n};(i.isPowerManager||i.isManager)&&(a.manager_level=o),i.id==n&&(a.skill_level=o),(0,C.SC)("skills/set_level",{method:"POST",data:a},(function(){(i.isPowerManager||i.isManager)&&(t.skill.manager_level=o),i.id==n&&(t.skill.skill_level=o)}))}}])&&Ct(t.prototype,n),r&&Ct(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vt=Zt(bt.prototype,"skill",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),_t=Zt(bt.prototype,"skillLog",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wt=Zt(bt.prototype,"skillSuggestions",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ot=Zt(bt.prototype,"showLeaderboard",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!0}}),bt);function qt(e){return function(e){if(Array.isArray(e))return Xt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Xt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Xt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ut(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ht(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Gt,Jt=(Tt=Ht((Bt=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Vt(this,"user_id",null),Lt(this,"_loaded",Tt,this),Lt(this,"_skills",Et,this),Lt(this,"_occupation",It,this),Lt(this,"filterNsort",At,this),Lt(this,"leaderboard",Dt,this),Lt(this,"onBoardingShowingNeeded",Rt,this),Lt(this,"loaded",Nt,this),Lt(this,"type",zt,this),Lt(this,"_skillData",Mt,this),Vt(this,"onRemoveSkill",(function(e){(0,Ue.BB)(lng("are you sure you want to remove this skill from your list?").caps(),{title:lng("remove skill from my list"),confirmText:lng("remove"),onConfirm:function(){(0,C.SC)("skills/remove/"+e,{},(function(){n._skills=n._skills.map((function(t){return t.sk_id===e&&t.optional>1&&(t.skill_level=null,t.is_personal=null),t}))}))}})})),Vt(this,"onAddSkill",(function(e,t){var r,o=e.user_id,i=e.skills;Blsm.user.isPowerManager&&(null===(r=n.occupationSkills)||void 0===r?void 0:r.length)>0&&Object.values(i).forEach((function(e){var t;(null===(t=n.occupationSkills)||void 0===t?void 0:t.find((function(t){return t.sk_id==e.id})))&&(e.manager_level=e.skill_level)})),(0,C.SC)("skills/save",{method:"POST",data:{user_id:o,skills:i}},(function(){Object.values(i).forEach((function(e){var t=n._skills.find((function(t){return t.sk_id===e.id&&"additional"===t.type}));t?(t.skill_level=e.skill_level,t.is_personal=1):n._skills=[].concat(qt(n._skills),[{editable:!0,following:!0,type:"additional",name:e.label,optional:"2",is_personal:1,sk_id:e.id,skill_level:e.skill_level}])}))})),t()})),Vt(this,"setFollowing",(function(e){var t=e.sk_id,n=e.user_id,r=e.following;return(0,C.SC)("skills/set_following",{data:{sk_id:t,user_id:n,unfollow:r?1:0}},(function(){return!r}))})),this.userStore=t,this.user_id=this.userStore.id,(0,u.makeObservable)(this)}var t,n,r;return t=e,(n=[{key:"setCurrentSkill",value:function(e){this.type=e.type,window.localStorage&&localStorage.setItem("current_skill_type_".concat(e.sk_id),e.type),this.userStore.nav(["skills",null==e?void 0:e.sk_id])}},{key:"setSkillLevel",value:function(e){var t=this,n=e.user_id,r=e.sk_id,o=e.val,i=Blsm.user,a={sk_id:r,user_id:n};(i.isPowerManager||i.isManager)&&this.occupationSkills.find((function(e){return e.sk_id===r}))&&(a.manager_level=o),(0,d.Tz)(n)&&this.additionalSkills.find((function(e){return e.sk_id===r}))&&(a.skill_level=o),(0,C.SC)("skills/set_level",{method:"POST",data:a},(0,u.action)((function(){t._skills.forEach((function(e){e.sk_id===r&&((i.isPowerManager||i.isManager)&&(e.manager_level=o),(0,d.Tz)(n)&&(e.skill_level=o))}))})))}},{key:"ready",get:function(){var e=this;return null===this._skills&&(this._skills="loading",(0,C.SC)("skills/user_skills/"+this.user_id,{},(function(t){var n;e._skills=t.skills,null===(n=t.leaderboard)||void 0===n||n.forEach((function(e,t){return e.rank=t+1})),e.leaderboard=t.leaderboard,e.onBoardingShowingNeeded=0===e._skills.length&&(0,d.Tz)(e.user_id),e.loaded=!0}))),(0,u.isObservableArray)(this._skills)}},{key:"userOccupation",get:function(){var e=this;return null===this._occupation&&(this._occupation="loading",(0,C.SC)("skills/user_occupation/"+this.user_id,{},(function(t){e._occupation=t}))),this._occupation}},{key:"unrankedSkills",get:function(){return this.occupationSkills.filter((function(e){return null===e.manager_level}))}},{key:"occupationSkills",get:function(){return(0,Le.WB)(this._skills.filter((function(e){return"occupation"===e.type})),this.filterNsort.filter,this.filterNsort.sort)}},{key:"additionalSkills",get:function(){return(0,Le.WB)(this._skills.filter((function(e){return"additional"===e.type&&e.is_personal})),this.filterNsort.filter,this.filterNsort.sort)}},{key:"gainedSkills",get:function(){return(0,Le.WB)(this._skills.filter((function(e){return"additional"===e.type&&!e.is_personal&&e.sk_rating>0})),this.filterNsort.filter,this.filterNsort.sort)}},{key:"skillStore",get:function(){var e=this.userStore._p2;if(!(0,d.B5)(e))return null;if(this._skillData.has(e))return this._skillData.get(e);var t=new Ft({sk_id:e,user_id:this.user_id});return this._skillData.set(e,t),t}}])&&Ut(t.prototype,n),r&&Ut(t,r),e}()).prototype,"_loaded",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Et=Ht(Bt.prototype,"_skills",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),It=Ht(Bt.prototype,"_occupation",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),At=Ht(Bt.prototype,"filterNsort",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,Le.Cy)()}}),Dt=Ht(Bt.prototype,"leaderboard",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Rt=Ht(Bt.prototype,"onBoardingShowingNeeded",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Nt=Ht(Bt.prototype,"loaded",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),zt=Ht(Bt.prototype,"type",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Mt=Ht(Bt.prototype,"_skillData",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Ht(Bt.prototype,"ready",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"ready"),Bt.prototype),Ht(Bt.prototype,"userOccupation",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"userOccupation"),Bt.prototype),Ht(Bt.prototype,"unrankedSkills",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"unrankedSkills"),Bt.prototype),Ht(Bt.prototype,"occupationSkills",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"occupationSkills"),Bt.prototype),Ht(Bt.prototype,"additionalSkills",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"additionalSkills"),Bt.prototype),Ht(Bt.prototype,"gainedSkills",[u.computed],Object.getOwnPropertyDescriptor(Bt.prototype,"gainedSkills"),Bt.prototype),Bt),Wt=n(93522);function Kt(e){return(Kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function $t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e,t){return(Yt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Qt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=nn(e);if(t){var o=nn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return en(this,n)}}function en(e,t){return!t||"object"!==Kt(t)&&"function"!=typeof t?tn(e):t}function tn(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nn(e){return(nn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function rn(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var on,an,ln,sn,cn,un,pn,dn,fn=(rn((Gt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Yt(e,t)}(i,e);var t,n,r,o=Qt(i);function i(e,t){var n,r,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e),r=tn(n),l=void 0,(a="store")in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,(0,u.makeObservable)(tn(n)),n.store=t,n}return t=i,(n=[{key:"join",value:function(){this.store.join(this._attr.badge_id),this._attr.user_joined=!0}},{key:"leave",value:function(){this.store.leave(this._attr.badge_id),this._attr.user_joined=!1}},{key:"id",get:function(){return this._attr.badge_id}},{key:"title",get:function(){return this._attr.badge_name}},{key:"color",get:function(){return this._attr.color}},{key:"icon",get:function(){return this._attr.icon}},{key:"completed",get:function(){var e;return null===(e=this.progress)||void 0===e?void 0:e.completed}},{key:"explain",get:function(){switch(this._attr.badge_type){case"score_workspace":case"score_assignment":return lng('score %s or higher in "%s"',this._attr.req_score,this._attr.condition_item_name);case"social_like":return lng("get %s likes on your content",this._attr.amount);case"social_comment":return lng("write %s comments",this._attr.amount);case"social_discussion":return lng("create %s discussions",this._attr.amount);case"social_join_challenge":return lng("join %s challenges",this._attr.amount);case"action_enroll":return lng('enroll to "%s"',this._attr.condition_item_name);case"action_view_content":return lng("view the content below")+":";case"points":return lng("get %s points",this._attr.amount)}return""}},{key:"description",get:function(){return this._attr.badge_description}},{key:"dueDate",get:function(){return this._attr.badge_due_date}},{key:"type",get:function(){return Wt.m[this._attr.badge_type]}},{key:"active",get:function(){return this._attr.active}},{key:"leaderboard",get:function(){return this._attr.leaderboard}},{key:"progress",get:function(){return this._attr.progress}},{key:"joined",get:function(){return this._attr.user_joined||"auto"===this._attr.badge_access}}])&&$t(t.prototype,n),r&&$t(t,r),i}(T.JH)).prototype,"joined",[u.computed],Object.getOwnPropertyDescriptor(Gt.prototype,"joined"),Gt.prototype),rn(Gt.prototype,"join",[u.action],Object.getOwnPropertyDescriptor(Gt.prototype,"join"),Gt.prototype),rn(Gt.prototype,"leave",[u.action],Object.getOwnPropertyDescriptor(Gt.prototype,"leave"),Gt.prototype),Gt);function mn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function gn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var yn,vn,_n,wn,On,kn,xn,Sn=(an=bn((on=function(){function e(t){var n=t.nav,r=t.user;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),mn(this,"_challenges",an,this),mn(this,"currentChallenge",ln,this),mn(this,"challengeHistory",sn,this),mn(this,"ready",cn,this),mn(this,"filterNsort",un,this),mn(this,"sideMenu",pn,this),hn(this,"currentId",void 0),hn(this,"filters",void 0),hn(this,"sorts",void 0),hn(this,"challenge_types",[]),mn(this,"user",dn,this),(0,u.makeObservable)(this),this.nav=n,this.user=r,this.fetch()}var t,n,r;return t=e,(n=[{key:"toggleSideMenu",value:function(e){var t=this;if(e){var n="string"==typeof e?e:e.id;this.user?this.user.nav(["challenges",n]):this.nav([n],{trigger:!1}),(0,C.SC)("gamification/challenge_data",{data:{id:n}},(function(e){t.currentChallenge=new fn(e,t),t.sideMenu=!0}))}else this.id=!1,this.user&&(this.user._p2=!1),this.currentChallenge=!1,this.sideMenu=!1,this.user?this.user.nav(["challenges",""],{trigger:!1}):this.nav([""],{trigger:!1})}},{key:"updateRoute",value:function(e){e&&(this.id=(0,d.B5)(e[0])?e[0]:void 0),this.ready=!1}},{key:"fetch",value:function(){var e=this,t={};this.id&&(t.id=this.id),this.user&&(t.user_joined=this.user.id),t.id&&!t.user_joined&&(t={}),(0,C.SC)("gamification/challenges_page",{data:t},(function(t){var n=Array.isArray(t)?t:[t];e._challenges=(null==n?void 0:n.map((function(t){return new fn(t,e)})))||[],e._challenges.forEach((function(t){e.challenge_types.find((function(e){return e.val===t.type}))||e.challenge_types.push({val:t.type,label:t.type})})),e.filters=[{type:"text",name:"title",label:lng("name"),outOfMenu:!0},{type:"select_multi",name:"type",label:lng("challenge type"),options:e.challenge_types},{type:"checkbox",name:"joined",label:lng("bookmarked")},{type:"checkbox",name:"completed",label:lng("completed")}],e.sorts=[{label:lng("default"),val:""},{label:lng("name"),val:"title"},{label:lng("creation time"),val:"id"},{label:lng("joined"),val:"joined"},{label:lng("completed"),val:"completed"}],e.ready=!0}))}},{key:"join",value:function(e){(0,C.SC)("gamification/challenge_join",{method:"POST",data:{badge_id:e}})}},{key:"invite",value:function(){(0,C.SC)("gamification/invite_to_challenge",{method:"POST"})}},{key:"leave",value:function(e){(0,C.SC)("gamification/challenge_join",{method:"POST",data:{badge_id:e,leave:!0}})}},{key:"getChallengeHistory",value:function(e){var t=this;if(e!==this.currentId)return this.challengeHistory=null,(0,C.SC)("gamification/challenge_history",{data:{badge_id:e}},(function(e){return t.challengeHistory=e}),this.currentId=e)}},{key:"getCurrentChallenge",get:function(){return this.user?this.user._p2:this.id}},{key:"challenges",get:function(){return(0,Le.WB)(this._challenges,this.filterNsort.filter,this.filterNsort.sort)}}])&&gn(t.prototype,n),r&&gn(t,r),e}()).prototype,"_challenges",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ln=bn(on.prototype,"currentChallenge",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),sn=bn(on.prototype,"challengeHistory",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cn=bn(on.prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),un=bn(on.prototype,"filterNsort",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,Le.Cy)()}}),pn=bn(on.prototype,"sideMenu",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),dn=bn(on.prototype,"user",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),bn(on.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(on.prototype,"updateRoute"),on.prototype),on),jn=n(64821),Cn=n(15673);function Pn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pn(Object(n),!0).forEach((function(t){En(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bn(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Tn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function En(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function In(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var An,Dn,Rn,Nn,zn,Mn,Fn,qn,Xn,Ln,Un,Vn,Hn,Gn,Jn,Wn,Kn,$n,Yn,Qn,er,tr,nr,rr,or,ir,ar,lr,sr=(yn=u.action.bound,_n=In((vn=function(){function e(t){var n=t.nav,r=t.user;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Bn(this,"channel",_n,this),Bn(this,"filterNsort",wn,this),Bn(this,"_playlists",On,this),Bn(this,"bottomMenu",kn,this),Bn(this,"subscribed",xn,this),En(this,"componentsView",void 0),En(this,"user",void 0),En(this,"nav",void 0),(0,u.makeObservable)(this),this.nav=n,this.user=r}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){this.id=(0,d.B5)(e[0])?e[0]:void 0,this.fetch()}},{key:"toggleBottomMenu",value:function(){this.bottomMenu=!this.bottomMenu}},{key:"invalidate",value:function(){this.channel=null}},{key:"removePlaylist",value:function(e){this._playlists=this._playlists.filter((function(t){return t.id!==e}))}},{key:"fetch",value:function(){var e=this;this.channel="loading";var t={};this.id&&(t.id=this.id),this.user&&(t.id=this.user.id),(0,C.SC)("channel/channel_page",{data:t},(0,u.action)((function(t){e.subscribed=t.subscribed,e.channel=t?new jn.$(t,e):{},e._playlists=e.channel.playlists||[],e.following=e.channel.following,e.followers=e.channel.followers,e._ready=!0})))}},{key:"componentsCompactView",value:function(e){this.componentsView=e?"compact":"",g.X.set("workspace_components_view",e?"compact":void 0)}},{key:"addPlaylist",value:function(){var e=this;(0,Ue.cS)("",{title:lng("playlist name"),confirmText:lng("add"),inputType:"text",onConfirm:function(t){var n={playlist_name:t,channel_id:parseInt(e.channel.id)||null,status:1};(0,C.SC)("channel/save_playlist",{method:"POST",data:n},(function(t){e._ready=!1,e._playlists.push(new Cn.g(Zn(Zn({},n),{},{playlist_id:t,items:[]}))),(0,m.p4)({playlist:t},!0)}))}})}},{key:"customFuncFilters",get:function(){return[{name:"playlist_items",func:function(e,t){return t.playlist_items.filter((function(t){return t.title.includes(e)})).length>0}},{name:"playlist_skills",func:function(e,t){return t.playlist_items.filter((function(t){return t.skills.filter((function(t){return t.label.toLowerCase().includes(e.toLowerCase())})).length>0})).length>0}}]}},{key:"channelPlaylists",get:function(){var e;return(0,Le.WB)(null===(e=this._playlists)||void 0===e?void 0:e.filter((function(e){var t;return(null===(t=e.items)||void 0===t?void 0:t.length)>0})),this.filterNsort.filter,this.filterNsort.sort,{filters:this.customFuncFilters})}},{key:"channelPlaylistsEmpty",get:function(){var e;return(0,Le.WB)(null===(e=this._playlists)||void 0===e?void 0:e.filter((function(e){var t;return 0===(null===(t=e.items)||void 0===t?void 0:t.length)})),this.filterNsort.filter)}},{key:"ready",get:function(){return null===this.channel&&this.fetch(),"loading"!==this.channel}}])&&Tn(t.prototype,n),r&&Tn(t,r),e}()).prototype,"channel",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),wn=In(vn.prototype,"filterNsort",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,Le.Cy)()}}),On=In(vn.prototype,"_playlists",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kn=In(vn.prototype,"bottomMenu",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),xn=In(vn.prototype,"subscribed",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),In(vn.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(vn.prototype,"updateRoute"),vn.prototype),In(vn.prototype,"channelPlaylists",[u.computed],Object.getOwnPropertyDescriptor(vn.prototype,"channelPlaylists"),vn.prototype),In(vn.prototype,"channelPlaylistsEmpty",[u.computed],Object.getOwnPropertyDescriptor(vn.prototype,"channelPlaylistsEmpty"),vn.prototype),In(vn.prototype,"ready",[u.computed],Object.getOwnPropertyDescriptor(vn.prototype,"ready"),vn.prototype),In(vn.prototype,"invalidate",[u.action],Object.getOwnPropertyDescriptor(vn.prototype,"invalidate"),vn.prototype),In(vn.prototype,"removePlaylist",[yn],Object.getOwnPropertyDescriptor(vn.prototype,"removePlaylist"),vn.prototype),vn),cr=n(66975);function ur(e){return function(e){if(Array.isArray(e))return mr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function pr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=fr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function dr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||fr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fr(e,t){if(e){if("string"==typeof e)return mr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?mr(e,t):void 0}}function mr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function gr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function hr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function br(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yr(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var vr,_r,wr,Or,kr,xr,Sr,jr,Cr,Pr,Zr=(An=u.action.bound,Dn=u.action.bound,Rn=u.action.bound,Nn=u.action.bound,zn=u.action.bound,Mn=u.action.bound,Fn=u.action.bound,Xn=yr((qn=function(){function e(t){var n=this,r=t.id,o=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),br(this,"isEnterprise",Blsm.checkMod(["","ENT"])),gr(this,"ready",Xn,this),gr(this,"basicDetailsWidgetSpread",Ln,this),gr(this,"wsShowComponents",Un,this),gr(this,"wsFilterNsort",Vn,this),gr(this,"tasks_filterNsort",Hn,this),gr(this,"showFiles",Gn,this),br(this,"isSelf",!1),br(this,"user_id",""),br(this,"manageGroups",!1),br(this,"basicDetails",{}),br(this,"custom_fields_data",[]),br(this,"direct_manager",{}),gr(this,"_tab",Jn,this),gr(this,"_p2",Wn,this),br(this,"_profileTabs",[]),br(this,"_topTabs",void 0),br(this,"managed_groups",[]),br(this,"managed_ous",[]),br(this,"roles",[]),gr(this,"_courses",Kn,this),gr(this,"groups",$n,this),gr(this,"blog",Yn,this),br(this,"qualifications_roles",[]),br(this,"authorization_qualification",[]),br(this,"qualifications",[]),br(this,"professions",[]),br(this,"all_sub_professions",[]),br(this,"compliance_qualifications",[]),br(this,"compliance_courses",[]),br(this,"compliance_assignments",[]),br(this,"compliance_assignments_docs",[]),gr(this,"external",Qn,this),br(this,"requests",[]),br(this,"participationPlanningEnabled",Blsm.isFeatureEnabled("participation_planning")),br(this,"participation",[]),br(this,"evaluation",[]),br(this,"self_evaluation",[]),br(this,"assignments_stats",{}),br(this,"tasks",[]),br(this,"badges",[]),br(this,"forms",[]),gr(this,"files",er,this),gr(this,"login_sessions",tr,this),gr(this,"slaves",nr,this),gr(this,"otp",rr,this),gr(this,"google_id",or,this),br(this,"skillsStore",null),br(this,"challengesStore",null),br(this,"channelStore",null),gr(this,"OUHistory",ir,this),gr(this,"support_auth_on",ar,this),gr(this,"platform_auth_on",lr,this),(0,u.makeObservable)(this),this.id=r,this.nav=o,this.skillsStore=new Jt(this),this.challengesStore=new Sn({user:this}),this.channelStore=new sr({user:this}),this.manageGroups=Blsm.user.isPowerManager||Blsm.hasPermission("group_admin")||Blsm.hasPermission("users_admin"),rp.on("commentsUpdateCount",(function(e){if("content"===e.connectTo.type){var t=n.blog.find((function(t){return t.lesson_id==e.connectTo.object_id}));if(t){var r=e.action;"add"==r&&(t.comment_count=parseInt(t.comment_count)+1),"subtract"===r&&(t.comment_count=parseInt(t.comment_count)-1)}}})),this.fetch()}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=dr(e,2),n=t[0],r=t[1];this._tab=n,this._p2=r}},{key:"fetch",value:function(){var e=this;this.ready=!1,(0,C.SC)("users/"+this.id+"/all",{},(0,u.action)((function(t){var n,r=e;r.user_id=t.user_id,r.isSelf=(0,d.Tz)(r.user_id),r.basicDetails=(0,d.v7)(t,(function(e){return!Array.isArray(e)&&!(0,d.Kn)(e)})),["managed_groups","managed_ous","roles","courses","groups","professions","qualifications_roles","authorization_qualification","qualifications","compliance_qualifications","compliance_courses","compliance_assignments","compliance_assignments_docs","evaluation","self_evaluation","tasks","login_sessions","external","requests","participation","forms","direct_manager","assignments_stats","badges","files","slaves","custom_fields_data","blog","google_id","auth_google","support_auth_on","google_id","auth_google","user_type","support_system","platform_auth_on"].forEach((function(e){return t[e]&&((0,u.isObservableArray)(r[e])?r[e].replace(t[e]):r[e]=t[e])}));var o,i=pr(r.professions);try{for(i.s();!(o=i.n()).done;){var a,l=pr(o.value.sub);try{for(l.s();!(a=l.n()).done;){var s=a.value;if(r.all_sub_professions.push(Object.assign({},s,{group_type:"SubProfession"})),s.dependencies){var c,p=pr(s.dependencies);try{for(p.s();!(c=p.n()).done;){var f=c.value;f.hidden_row=!0,r.all_sub_professions.push(f)}}catch(e){p.e(e)}finally{p.f()}}}}catch(e){l.e(e)}finally{l.f()}}}catch(e){i.e(e)}finally{i.f()}[r.qualifications_roles,r.authorization_qualification,r.qualifications,r.all_sub_professions].forEach(d.f_),r.login_sessions.forEach((function(e,t){return(0,u.set)(e,{_key:t+"_"+Math.random(),geoData:null})})),r.external.forEach((function(e){e.registration_extra_info=e.registration_extra_info||{},e.target_data=e.target_data||{}}));var m=r.all_sub_professions.length||r.qualifications_roles.length||r.authorization_qualification.length||r.qualifications.length||r._courses.length||r.groups.length;r._profileTabs=[{val:"general",label:lng("general")},m&&{val:"workspaces",label:lng("workspaces")},(r.managed_ous.length||r.managed_groups.length||r.roles.length)&&{val:"management",label:lng("management")},(r.evaluation.length||r.self_evaluation.length)&&{val:"evaluation",label:lng("evaluation")},(r.compliance_qualifications.length||r.compliance_courses.length||r.compliance_assignments.length||r.compliance_assignments_docs.length)&&{val:"compliance",label:lng("compliance")},(r.external.length||r.requests.length)&&{val:"requests",label:lng("requests status")},r.tasks.length&&{val:"tasks",label:lng("tasks",{phrase:!0})},r.login_sessions.length&&{val:"logins",label:lng("login sessions")},Blsm.user.isAdmin&&{val:"multiuser",label:lng("multiuser")},t.blog&&(r.blog.length||e.isSelf)&&{val:"blog",label:lng("blog",{phrase:!0})},r.forms.length&&{val:"forms",label:lng("forms")},r.participationPlanningEnabled&&{val:"participation",label:lng("participation planning")}].filter((function(e){return!!e})),Blsm.isFeatureEnabled("skills_occupations")&&r.addTopTab({val:"skills",label:lng("skills"),icon:"skill"}),Blsm.isFeatureEnabled("gamification")&&(m||null!==(n=r.challengesStore)&&void 0!==n&&n.challenges.length)&&Blsm.checkMod(["gamification","ENT"])&&r.addTopTab({val:"challenges",label:lng("challenges"),icon:"challenge"}),Blsm.isFeatureEnabled("channels")&&(e.basicDetails.channel_exists||Blsm.user.id==e.user_id)&&r.addTopTab({val:"channel",label:lng("channel"),icon:"channel"}),"otp"in t&&(e.otp=!!t.otp),r.ready=!0})))}},{key:"addTopTab",value:function(e){this._topTabs||(this._topTabs=[{val:"",label:lng("profile"),icon:"user"}]),this._topTabs.push(e)}},{key:"loadOUHistory",value:function(){var e=this;(0,C.SC)("users/ou_history/"+this.id,{},(function(t){return e.OUHistory=t}))}},{key:"updateFileName",value:function(e,t){var n=e.file_name;e.file_name=t,(0,C.SC)("file/user_file_set_title=".concat(e.file_id),{method:"PUT",data:{title:t},onError:function(){return e.file_name=n}})}},{key:"deleteFile",value:function(e){this.files.remove(e),(0,C.SC)("file/user_files=".concat(e.file_id),{method:"DELETE"})}},{key:"uploadFiles",value:function(e){var t,n=this,r=pr(e);try{var o=function(){var e=t.value,r=(0,u.observable)({file_id:(0,d.o0)("tmp_"),user_id:n.user_id,file_name:"uploading "+e.name,org_file_name:e.name,creation_time:void 0,progress:0});n.files.unshift(r),(0,C.SC)("file/user_file_upload",{data:{user_id:n.user_id,new_user_file:e},onProgressUp:function(e,t){return r.progress=(0,d.NM)(100*e/t)},onError:function(){return n.files.remove(r)}},(0,u.action)((function(e){return Object.assign(r,e[0],{progress:void 0})})))};for(r.s();!(t=r.n()).done;)o()}catch(e){r.e(e)}finally{r.f()}}},{key:"removeUserExternalCourse",value:function(e){var t=this;(0,Ue.BB)(lng("are you sure you want to delete this external event?").caps(),{onConfirm:function(){t.external.remove(e),(0,C.SC)("groups/removeUserExternalCourse",{data:{group_id:e.group_id,user_id:t.user_id},method:"POST"})}})}},{key:"removeUserWorkspace",value:function(e){var t=this;(0,Ue.BB)(lng("are you sure you want to remove user from %s?",e.group_name),{onConfirm:function(){e.is_course?t._courses.remove(e):t.groups.remove(e),(0,C.SC)("ajax/GroupsAjax.class.php",{method:"POST",data:{req:"remove_user_from_group",group_id:e.group_id,user_id:t.user_id}},(function(n){return 1!=n&&((0,P.nb)(lng("an error has occurred")),e.is_course?t._courses.push(e):t.groups.push(e))}))}})}},{key:"removeBlog",value:function(e){var t=this;(0,Ue.BB)(lng("are you sure you want to delete this post?"),{onConfirm:function(){t.blog.remove(e),(0,C.SC)("content/"+e.lesson_id,{method:"DELETE"},(function(n){"error"===n.res&&t.blog.push(e)}))}})}},{key:"toggleLockPostComments",value:function(e){var t,n=null===(t=e.lesson_options)||void 0===t||!t.lock_comments;e.lesson_options={lock_comments:n},(0,C.SC)("content/lock_comments",{method:"POST",data:{lesson_id:e.lesson_id}})}},{key:"toggleUserVotePost",value:function(e){var t,n,r;e.likes={likes:null!=e&&null!==(t=e.likes)&&void 0!==t&&t.user_vote?parseInt(e.likes.likes)-1:parseInt(null==e||null===(n=e.likes)||void 0===n?void 0:n.likes)+1,user_vote:null==e||null===(r=e.likes)||void 0===r||!r.user_vote};var o={req:"vote",type:"content",object_id:e.lesson_id,user_action:"like"};(0,C.SC)("likes",{data:o,method:"POST"})}},{key:"disconnectSession",value:function(e){this.login_sessions.remove(e),(0,C.SC)("users/session_disconnect",{method:"POST",data:{user_id:this.user_id,ip:e.ip,expiry:e.expiry}})}},{key:"disconnectMultiUser",value:function(e){this.slaves.remove(e),(0,C.SC)("users/disconnect_multi_user",{method:"POST",data:{user_id:this.user_id,connect_id:e.user_id}})}},{key:"toggleOtp",value:function(){var e=this;this.otp?(0,Ue.BB)(lng("are you sure you want to turn off 2-step verification?").caps(),{onConfirm:function(){e.otp=0,(0,C.SC)("users/otp_remove_code/"+e.id,{method:"DELETE"})}}):ep().openDialog("Component",{child:(0,q.tZ)(at,{onSuccess:function(){return e.otp=1}}),title:lng("setup 2 step authentication")})}},{key:"courses",get:function(){return this._courses}},{key:"tab",get:function(){var e,t,n=this;return null!==(e=this._topTabs)&&void 0!==e&&e.some((function(e){return e.val===n._tab}))||this._profileTabs.some((function(e){return e.val===n._tab}))?this._tab:null===(t=this._profileTabs[0])||void 0===t?void 0:t.val},set:function(e){this.nav(e?[e]:[])}},{key:"topTabs",get:function(){return this._topTabs||this._profileTabs}},{key:"subTabs",get:function(){var e=this;return this._topTabs&&!this._topTabs.some((function(t){return t.val===e._tab}))&&this._profileTabs}},{key:"rolesBadges",get:function(){return this.qualifications_roles.filter((function(e){return e.special_qualification}))}},{key:"filteredTasks",get:function(){return(0,Le.WB)(this.tasks,this.tasks_filterNsort.filter,this.tasks_filterNsort.sort)}},{key:"loginWithLocationData",get:function(){return this.login_sessions.forEach((function(e){null===e.geoData&&(e.geoData=!1,$.getJSON("https://ipapi.co/".concat(e.ip,"/jsonp?callback=?"),(function(t){t.city&&(0,u.set)(e,"geoData",t)})))})),this.login_sessions}},{key:"userDetails",get:function(){var e=this;return[{label:lng("base"),fields:[{field:"user_birthdate",type:"date"},"user_email"]},{label:lng("personal"),fields:["user_gender","user_identity_num","user_address","user_city","user_state","user_postal_code","user_country"]},{label:lng("work"),fields:["user_company","user_department","user_job_title",{field:"employee_id",type:"text"},{field:"employment_date",type:"date"}]},{label:lng("contact"),fields:["user_business_phone","user_home_phone","user_mobile_phone","user_fax_number"]},{label:lng("more"),fields:["status_name","classification_id",{field:"user_extra_time",type:"checkbox",hideEmpty:!0}].concat(ur(this.custom_fields_data.map((function(e){return{field:e.field_column,name:e.field_name,type:e.field_type.toLowerCase()}}))))},{id:"monitor",label:lng("monitor"),fields:["user_name","domain_name","external_id","user_nt","user_type",Blsm.hasPermission("users_admin")&&(this.basicDetails.user_enabled?{field:"user_enabled",type:"checkbox"}:{field:"user_locked",type:"checkbox",attr:{"data-field":"user_locked"}}),{field:"user_joined",type:"date"},{field:"user_lastvisit",type:"date"},{field:"user_expiration",type:"datetime"},"user_pretend","user_ip"]}].map((function(t){var n=t.fields.map((function(t){var n=(0,d.Kn)(t)?t:{field:t},r=n.field,o=n.type,i=n.hideEmpty,a=n.name,l=e.basicDetails[r];if("user_gender"===r)l="Male"===l?lng("male"):"Female"===l?lng("female"):void 0;else if("user_locked"===r)l={icon:l?"lock":"lock_open"};else if("date"===o||"datetime"===o){if(!/^\d+-\d+-\d+/.test(l))return;l=(0,B.GG)(l,{time:/time/.test(o)})}else"checkbox"===o&&(l=(0,d.P$)(l)?{icon:"mark_v"}:i?void 0:{icon:"mark_x"});if(l)return[a||(0,Ve.X)(r),l,o]})).filter((function(e){return!!e}));return!!n.length&&Object.assign({},t,{fields:n})})).filter((function(e){return!!e}))}},{key:"deleted",get:function(){return"1"===this.basicDetails.deleted}},{key:"actionIcons",get:function(){var e=this,t=this.user_id,n=this.isSelf,r=this.deleted,o=this.otp,i=this.basicDetails,a=this.google_id,l=this.auth_google,s=this.support_system,c=i.pretend,u=i.manager,p=i.can_edit,f=i.auth_permission,g=i.ou_auth_permission,h=i.user_type,b=(0,lt.N)({user_id:t,is_manager:u,auth_permission:f,ou_auth_permission:g}),y=!Blsm.InitialData.parameters.disable_user_totp&&null!==o&&((0,d.Tz)(t)||o);return[p&&!r&&{icon:"edit",href:{edit:"user",id:t},toolTip:lng("edit user")},l&&(0,d.Tz)(t)&&{icon:"google",toolTip:(a?lng("detach account",!0):lng("connect account",!0)).caps(),onClick:function(){return a?(0,Ue.BB)(lng("are you sure you want to disconnect this account?").caps(),{onConfirm:function(){return(0,C.SC)("ajax/requests.php",{method:"POST",data:{req:"RemoveOauth",provider:"google"}},(function(){e.google_id=null,e.fetch()}))}}):(0,m.p4)("oauth?s=google",!0)},bgColor:a?N.g.colors.negative:N.g.colors.dominant_main},y&&{icon:o?"mfa_on":"mfa",toolTip:o?lng("turn off 2-step verification"):lng("protect your account with 2 step verification"),onClick:function(){return e.toggleOtp()}},(Blsm.hasPermission("group_admin")||Blsm.hasPermission("qualifications"))&&!r&&this.isEnterprise&&{icon:"user_plus",toolTip:lng("add user to workspaces"),onClick:function(){return ep().openDialog("form",new kt({userStore:e}))}},u&&!n&&!r&&this.isEnterprise&&{icon:"lock_open",toolTip:lng("send the user a reset password link via email"),onClick:function(){(0,Ue.cS)((0,d.rj)(lng("are you sure you want to send the user a reset password link?").caps()+"\n\n"+lng("add extra details for the user (optional)").caps()),{title:lng("reset password"),confirmText:lng("send"),textArea:!0,onConfirm:function(e){return(0,C.SC)("users/send_reset_password_link",{method:"POST",data:{user_id:t,message:e}},(function(){return(0,P.qV)(lng("reset password link was sent successfully."))}))}})}},Blsm.isFeatureEnabled("users_files")&&(n||u)&&{icon:"vendor_file",toolTip:lng("files"),onClick:function(){return e.showFiles=!0}},c&&!r&&{icon:"pretend",onClick:function(){return ep().pretend(t)},toolTip:lng("pretend to be this user")},b.length>0&&{icon:"report",menu:b,className:"mobile_off"},!s&&Blsm.user.isAdmin&&{icon:"support",toolTip:"support quick access",bgColor:this.support_auth_on?N.g.colors.negative:N.g.colors.dominant_main,className:"mobile_off",onClick:function(){return e.support_auth_on?(0,Ue.BB)("would you like to remove support quick access for this user?".caps(),{onConfirm:function(){return(0,C.SC)("users/set_support_token",{method:"POST",data:{user_id:t}},(function(){return e.support_auth_on=null}))}}):(0,Ue.cS)("paste the token from the support system here:",{title:"support quick access",inputRequired:!0,onConfirm:function(n){return(0,C.SC)("users/set_support_token",{method:"POST",data:{user_id:t,token:n}},(function(){return e.support_auth_on=!0}))}})}},s&&"User"===h&&{icon:"support",toolTip:"support quick access",bgColor:this.platform_auth_on?N.g.colors.negative:N.g.colors.dominant_main,className:"mobile_off",onClick:function(){return e.platform_auth_on?(0,Ue.BB)("would you like to remove support quick access for this user?".caps(),{onConfirm:function(){return(0,C.SC)("users/platform_auth_token_remove",{method:"POST",data:{user_id:t}},(function(){return e.platform_auth_on=null}))}}):(0,C.SC)("users/platform_auth_token_generate",{method:"POST",data:{user_id:t}},(function(t){var n=(0,I.iv)("margin:1em 0;display:flex;input{flex-grow:1;border:0;background-color:",N.g.colors.positive,";color:white;border-radius:5px;padding:4px;}","");(0,Ue.qR)((0,q.BX)("div",{children:["Paste the following token in the client's user profile:",(0,q.BX)("div",{css:n,children:[(0,q.tZ)("input",{value:t}),navigator.clipboard&&(0,q.tZ)(cr.JO,{buttonLike:!0,icon:"copy",onClick:function(){navigator.clipboard.writeText(t),(0,P.qV)("token copied to clipboard")}})]}),"This is the only time you will see this token, so make sure to copy it before closing the dialog."]})),e.platform_auth_on=!0}))}}]}}])&&hr(t.prototype,n),r&&hr(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ln=yr(qn.prototype,"basicDetailsWidgetSpread",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=yr(qn.prototype,"wsShowComponents",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vn=yr(qn.prototype,"wsFilterNsort",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,Le.Cy)()}}),Hn=yr(qn.prototype,"tasks_filterNsort",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{filter:{task_resolution:[]},sort:{by:"priority",desc:!0}}}}),Gn=yr(qn.prototype,"showFiles",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Jn=yr(qn.prototype,"_tab",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Wn=yr(qn.prototype,"_p2",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kn=yr(qn.prototype,"_courses",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),$n=yr(qn.prototype,"groups",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Yn=yr(qn.prototype,"blog",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Qn=yr(qn.prototype,"external",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),er=yr(qn.prototype,"files",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),tr=yr(qn.prototype,"login_sessions",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nr=yr(qn.prototype,"slaves",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rr=yr(qn.prototype,"otp",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),or=yr(qn.prototype,"google_id",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ir=yr(qn.prototype,"OUHistory",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),ar=yr(qn.prototype,"support_auth_on",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lr=yr(qn.prototype,"platform_auth_on",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),yr(qn.prototype,"courses",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"courses"),qn.prototype),yr(qn.prototype,"tab",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"tab"),qn.prototype),yr(qn.prototype,"topTabs",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"topTabs"),qn.prototype),yr(qn.prototype,"subTabs",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"subTabs"),qn.prototype),yr(qn.prototype,"rolesBadges",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"rolesBadges"),qn.prototype),yr(qn.prototype,"filteredTasks",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"filteredTasks"),qn.prototype),yr(qn.prototype,"loginWithLocationData",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"loginWithLocationData"),qn.prototype),yr(qn.prototype,"userDetails",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"userDetails"),qn.prototype),yr(qn.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(qn.prototype,"updateRoute"),qn.prototype),yr(qn.prototype,"fetch",[u.action],Object.getOwnPropertyDescriptor(qn.prototype,"fetch"),qn.prototype),yr(qn.prototype,"loadOUHistory",[An],Object.getOwnPropertyDescriptor(qn.prototype,"loadOUHistory"),qn.prototype),yr(qn.prototype,"updateFileName",[u.action],Object.getOwnPropertyDescriptor(qn.prototype,"updateFileName"),qn.prototype),yr(qn.prototype,"deleteFile",[u.action],Object.getOwnPropertyDescriptor(qn.prototype,"deleteFile"),qn.prototype),yr(qn.prototype,"uploadFiles",[Dn],Object.getOwnPropertyDescriptor(qn.prototype,"uploadFiles"),qn.prototype),yr(qn.prototype,"removeUserExternalCourse",[Rn],Object.getOwnPropertyDescriptor(qn.prototype,"removeUserExternalCourse"),qn.prototype),yr(qn.prototype,"removeUserWorkspace",[Nn],Object.getOwnPropertyDescriptor(qn.prototype,"removeUserWorkspace"),qn.prototype),yr(qn.prototype,"removeBlog",[zn],Object.getOwnPropertyDescriptor(qn.prototype,"removeBlog"),qn.prototype),yr(qn.prototype,"disconnectSession",[Mn],Object.getOwnPropertyDescriptor(qn.prototype,"disconnectSession"),qn.prototype),yr(qn.prototype,"disconnectMultiUser",[Fn],Object.getOwnPropertyDescriptor(qn.prototype,"disconnectMultiUser"),qn.prototype),yr(qn.prototype,"actionIcons",[u.computed],Object.getOwnPropertyDescriptor(qn.prototype,"actionIcons"),qn.prototype),qn),Br=n(76691),Tr=n(40554);function Er(e){return(Er="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ir(e){return function(e){if(Array.isArray(e))return Ar(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ar(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ar(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ar(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Dr(e,t){return(Dr=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Rr(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=zr(e);if(t){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Nr(this,n)}}function Nr(e,t){return!t||"object"!==Er(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function zr(e){return(zr=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Mr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Fr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qr(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xr(e,t,n){return t&&qr(e.prototype,t),n&&qr(e,n),e}function Lr(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Ur,Vr,Hr,Gr,Jr,Wr,Kr,$r,Yr,Qr,eo,to,no,ro,oo,io,ao,lo,so,co,uo,po,fo,mo=(vr=u.observable.shallow,_r=u.observable.shallow,wr=u.observable.shallow,Or=u.action.bound,xr=Lr((kr=function(){function e(){Fr(this,e),Mr(this,"tables",xr,this),Mr(this,"recentQueries",Sr,this),Mr(this,"savedReports",jr,this),Mr(this,"size",Cr,this),Mr(this,"query",Pr,this),(0,u.makeObservable)(this),this.fetch()}return Xr(e,[{key:"fetch",value:function(){var e=this;(0,C.SC)("SQL/initial_data",{},(0,u.action)((function(t){var n=t.tables,r=t.recent_queries,o=t.saved_reports,i=t.size;e.tables.replace(n),e.recentQueries.replace(r),e.savedReports.replace(o),e.size=i})))}},{key:"selectedTableCols",value:function(e){return e?this.tables.find((function(t){return t.name===e})).cols:void 0}},{key:"getSavedReportById",value:function(e){return this.savedReports.find((function(t){return t.id===e}))}},{key:"deletedSavedReport",value:function(e){var t=this;e&&(0,Ue.BB)(lng("are you sure you want to delete this report?").caps(),{onConfirm:function(){t.savedReports.remove(t.getSavedReportById(e)),(0,C.SC)("SQL/saved_reports/",{method:"DELETE",data:{id:e}})}})}},{key:"saveReport",value:function(e){var t=this;(0,C.SC)("SQL/save_report",{method:"POST",data:{report_name:e,QueryText:this.query}},(function(e){return t.savedReports.replace(e.saved_reports)}))}},{key:"reformatQuery",value:function(){var e=this.query;e=(e=e.replace(/\r/g,"").replace(/\n/g," ")).replace(/\b(SELECT|FROM|LEFT JOIN|JOIN|WHERE|GROUP BY|ORDER BY|LIMIT)\b/gi,(function(e,t){return"\n"+t.toUpperCase()})),this.query=e.trim()}},{key:"selectiveDownload",value:function(){ep().openDialog("form",new bo(this.tables))}},{key:"sendScehma",value:function(e){(0,Ue.cS)("Send to mail (optional)",{title:"dump schema"+(1===e?" - slim":e?" - "+e:""),confirmText:lng("submit"),onConfirm:function(t){return window.open((0,C.Q2)("SQL/dump",{slim:e,mail:t}))}})}}]),e}()).prototype,"tables",[vr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Sr=Lr(kr.prototype,"recentQueries",[_r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),jr=Lr(kr.prototype,"savedReports",[wr],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Cr=Lr(kr.prototype,"size",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Pr=Lr(kr.prototype,"query",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Lr(kr.prototype,"reformatQuery",[Or],Object.getOwnPropertyDescriptor(kr.prototype,"reformatQuery"),kr.prototype),kr),go=function(e){return e.name.startsWith("log")||["outgoing_mails","login_sessions","personal_notifications","processing_queue","mails_blacklist","lessons_text_search"].includes(e.name)},ho=function(e){return e.name.includes("performance")},bo=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Dr(e,t)}(n,e);var t=Rr(n);function n(e){var r;Fr(this,n),(r=t.call(this)).title="dump schema - selective";var o=20971520,i=0;r.skipableTables=e.filter((function(e){if(!function(e){return["users","groups","assignments","users_in_groups","lessons","approval_requests","assignments_in_groups","domains","questionnaire_pages","questionnaire_questions","categories","classifications","resources","external_course_types","external_course_types_required_groups","sequences","sequences_steps","extended_fields","lessons_folders","lessons_in_folders","themes","assignments_status","comments","tasks"].includes(e.name)}(e)&&(e.size>o||go(e)&&e.size>102400))return!0;i+=e.size})).sort((function(e,t){return ho(e)!==ho(t)?ho(e)?-1:1:go(e)!==go(t)?go(e)?1:-1:e.name.localeCompare(t.name)}));var a=!1,l=!1,s=!1;return r.confirmButtonLabel=lng("submit").caps(),r._fields=[{type:"text",name:"mail",label:"send to mail (optional)"},{type:"title",label:lng("download")+":"}].concat(Ir(r.skipableTables.map((function(e){return ho(e)&&!a?(a=!0,{type:"set",titleSmall:!0,noMarginBottom:!0,title:lng("performance tables"),fields:[{type:"checkbox",name:e.name,label:"".concat(e.name,": ").concat((0,d.bQ)(e.size),", ").concat(e.rows," rows")}]}):go(e)&&!s?(s=!0,{type:"set",titleSmall:!0,noMarginBottom:!0,title:lng("log tables"),fields:[{type:"checkbox",name:e.name,label:"".concat(e.name,": ").concat((0,d.bQ)(e.size),", ").concat(e.rows," rows")}]}):go(e)||ho(e)||l?{type:"checkbox",name:e.name,label:"".concat(e.name,": ").concat((0,d.bQ)(e.size),", ").concat(e.rows," rows")}:(l=!0,{type:"set",titleSmall:!0,noMarginBottom:!0,title:lng("other tables"),fields:[{type:"checkbox",name:e.name,label:"".concat(e.name,": ").concat((0,d.bQ)(e.size),", ").concat(e.rows," rows")}]})}))),[{type:"checkbox",disabled:!0,name:"__rest__",value:1,label:"all other tables (mandatory and smaller than ".concat((0,d.bQ)(o),"): ").concat((0,d.bQ)(i))}]),r._prepFields(),r.ready=!0,r}return Xr(n,[{key:"save",value:function(){var e=this,t=this.skipableTables.map((function(e){return e.name})).filter((function(t){return!e.values.get(t)}));(0,C.hn)((0,C.Q2)("SQL/dump",{slim:"skip",mail:this.values.get("mail")}),{skip:t.join()},!0),ep().closeDialog()}}]),n}(st.I),yo=n(67861),vo=["notes"];function _o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ko(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wo(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Oo(e){return function(e){if(Array.isArray(e))return xo(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ko(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ko(e,t){if(e){if("string"==typeof e)return xo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?xo(e,t):void 0}}function xo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function So(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function jo(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Co(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Po(e,t,n){return t&&Co(e.prototype,t),n&&Co(e,n),e}function Zo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bo(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var To=(Vr=Bo((Ur=function(){function e(){jo(this,e),So(this,"ready",Vr,this),So(this,"showSearch",Hr,this),So(this,"boards_list",Gr,this),So(this,"boards",Jr,this),So(this,"current_board",Wr,this),So(this,"fullSize",Kr,this),So(this,"searchInBoard",$r,this),Zo(this,"searchTasks",void 0),Zo(this,"lastSync",void 0),(0,u.makeObservable)(this),this.init(),this.searchTasks=new Do(this)}return Po(e,[{key:"init",value:function(){var e=this;this.ready=!1,(0,C.SC)("projectBoard/init",{},(function(t){e.boards_list=new Map((Object.entries(t.boards_list)||[]).map((function(e){return[parseInt(e[0]),e[1]]}))),e.current_board=t.current_board,e.tasks_status=t.tasks_status,e.tasks_types=t.tasks_types,t.first_board&&e.boards.set(e.current_board,new Eo(t.first_board,e)),e.ready=!0,e.lastSync=(0,d.c7)()}))}},{key:"saveNewBoard",value:function(e){var t=this;(0,C.SC)("projectBoard/saveNewBoard",{data:{name:e}},(function(n){n.board_id&&(t.boards_list.set(n.board_id,e),n.board&&t.boards.set(n.board_id,new Eo(n.board,t)),t.current_board=n.board_id)}))}},{key:"changeBoard",value:function(e){var t=parseInt(e);this.boards.has(t)?this.current_board=t:this.fetchBoard(t)}},{key:"fetchBoard",value:function(e){var t=this;this.current_board=0,(0,C.SC)("projectBoard/getBoard",{data:{id:e}},(function(n){t.boards.set(e,new Eo(n,t)),t.current_board=e,t.lastSync=(0,d.c7)()}))}},{key:"toggleSearchTasks",value:function(){this.showSearch=!this.showSearch}},{key:"refresh",value:function(){var e=this,t=(0,d.c7)();t-this.lastSync<=20||(0,C.SC)("projectBoard/syncBoard",{data:{id:this.current_board,syncTime:this.lastSync}},(function(n){e.board.sync(n),e.lastSync=t}))}},{key:"board",get:function(){return this.current_board?this.boards.get(this.current_board):null}},{key:"canWrite",get:function(){var e;return null===(e=this.board)||void 0===e?void 0:e.canWrite}}]),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hr=Bo(Ur.prototype,"showSearch",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Gr=Bo(Ur.prototype,"boards_list",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Jr=Bo(Ur.prototype,"boards",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),Wr=Bo(Ur.prototype,"current_board",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kr=Bo(Ur.prototype,"fullSize",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$r=Bo(Ur.prototype,"searchInBoard",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bo(Ur.prototype,"board",[u.computed],Object.getOwnPropertyDescriptor(Ur.prototype,"board"),Ur.prototype),Bo(Ur.prototype,"canWrite",[u.computed],Object.getOwnPropertyDescriptor(Ur.prototype,"canWrite"),Ur.prototype),Ur),Eo=(Qr=Bo((Yr=function(){function e(t,n){var r=this,o=t.board_id,i=t.columns,a=t.board_name,l=t.board_users,s=t.permission;jo(this,e),So(this,"columns",Qr,this),Zo(this,"board_id",void 0),Zo(this,"board_name",void 0),Zo(this,"board_users",void 0),So(this,"permission",eo,this),Zo(this,"store",void 0),Zo(this,"notes_map",new Map),(0,u.makeObservable)(this),this.store=n,this.board_id=o,this.board_name=a,this.board_users=l,this.permission=s,this.columns=(null==i?void 0:i.map((function(e){return new Io(e,r)})))||[]}return Po(e,[{key:"swapNotes",value:function(e,t,n,r){var o=this.getColumnById(e).removeNoteByIndex(t),i=this.getColumnById(n);i.addNoteToIndex(r,o),(0,C.SC)("projectBoard/moveNote",{method:"POST",data:{note_id:o.data.note_id,column_id:i.column_id,order:r}})}},{key:"swapColumns",value:function(e,t){var n=this.removeColumnByIndex(e);this.addColumnToIndex(t,n),(0,C.SC)("projectBoard/moveColumn",{method:"POST",data:{board_id:this.board_id,column_id:n.column_id,order:t}})}},{key:"removeColumnByIndex",value:function(e){var t=this.columns.find((function(t,n){return n===e}));return this.columns=this.columns.filter((function(t,n){return n!==e})),t}},{key:"removeColumnById",value:function(e){var t=this.columns.findIndex((function(t){return t.column_id===e}));this.columns=this.columns.filter((function(e,n){return n!==t}))}},{key:"addColumnToIndex",value:function(e,t){this.columns=[].concat(Oo(this.columns.slice(0,e)),[t],Oo(this.columns.slice(e)))}},{key:"getColumnById",value:function(e){return this.columns.find((function(t){return t.column_id==e}))}},{key:"addColumn",value:function(e){e.board_id=this.board_id;var t=new Io(e,this);t.save(e),this.columns=[].concat(Oo(this.columns),[t])}},{key:"save",value:function(e){var t=this;e.board_id=this.board_id,(0,C.SC)("projectBoard/saveBoard",{method:"POST",data:e},(function(){var n;t.board_name=e.board_name,t.board_users=e.board_users,t.permission=null!==(n=e.board_users[Blsm.user.id])&&void 0!==n&&n.write_permission?"write":"read",t.store.boards_list.set(parseInt(e.board_id),e.board_name)}))}},{key:"delete",value:function(){var e=this,t=parseInt(this.board_id);(0,C.SC)("projectBoard/deleteBoard",{method:"POST",data:{board_id:t}},(0,u.action)((function(){e.store.boards_list.delete(t),e.store.boards.delete(t),e.store.current_board=e.store.boards.keys().next().value||null})))}},{key:"addTaskFromSearch",value:function(e,t,n){var r=this.getColumnById(t);null==r||r.addNote({task_id:e},n)}},{key:"firstColumn",value:function(){return this.columns[0]}},{key:"selectedNoteIds",value:function(){return this.columns.reduce((function(e,t){return[].concat(Oo(e),Oo(t.selectedNoteIds()))}),[])}},{key:"deleteSelected",value:function(){var e=this,t=this.selectedNoteIds();t.length&&(0,C.SC)("projectBoard/deleteNotes",{method:"POST",data:{note_ids:t}},(0,u.action)((function(){e.columns.forEach((function(e){return e.removeSelectedNotes()}))})))}},{key:"sync",value:function(e){for(var t=0,n=Object.values(e);t<n.length;t++)for(var r=n[t],o=0,i=Object.values(r);o<i.length;o++){var a=i[o],l=this.notes_map.get(parseInt(a.note_id));if(!l||l.data.column_id!=a.column_id){var s=new Ao(a,this);null!=l&&l.data.note_id&&(s=l.column.removeNoteByNoteID(l.data.note_id));var c=this.getColumnById(a.column_id);c?c.addNoteToIndex(a.note_order,s):console.warn("didnt find column with id: ".concat(a.column_id))}}this.columns.forEach((function(t){return e[t.column_id]&&t.sync(e[t.column_id])}))}},{key:"existingTaskIds",get:function(){return this.columns.reduce((function(e,t){return[].concat(Oo(e),Oo(t.existingTaskIds))}),[])}},{key:"canWrite",get:function(){return"write"===this.permission}}]),e}()).prototype,"columns",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),eo=Bo(Yr.prototype,"permission",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Bo(Yr.prototype,"swapNotes",[u.action],Object.getOwnPropertyDescriptor(Yr.prototype,"swapNotes"),Yr.prototype),Bo(Yr.prototype,"swapColumns",[u.action],Object.getOwnPropertyDescriptor(Yr.prototype,"swapColumns"),Yr.prototype),Bo(Yr.prototype,"removeColumnByIndex",[u.action],Object.getOwnPropertyDescriptor(Yr.prototype,"removeColumnByIndex"),Yr.prototype),Bo(Yr.prototype,"removeColumnById",[u.action],Object.getOwnPropertyDescriptor(Yr.prototype,"removeColumnById"),Yr.prototype),Bo(Yr.prototype,"addColumnToIndex",[u.action],Object.getOwnPropertyDescriptor(Yr.prototype,"addColumnToIndex"),Yr.prototype),Bo(Yr.prototype,"existingTaskIds",[u.computed],Object.getOwnPropertyDescriptor(Yr.prototype,"existingTaskIds"),Yr.prototype),Bo(Yr.prototype,"canWrite",[u.computed],Object.getOwnPropertyDescriptor(Yr.prototype,"canWrite"),Yr.prototype),Yr),Io=(no=Bo((to=function(){function e(t,n){var r=this,o=t.notes,i=wo(t,vo);jo(this,e),So(this,"notes",no,this),So(this,"column_name",ro,this),So(this,"column_color",oo,this),Zo(this,"board_id",void 0),Zo(this,"column_id",void 0),Zo(this,"column_order",void 0),Zo(this,"board",void 0),(0,u.makeObservable)(this),this.board=n,this.notes=(null==o?void 0:o.map((function(e){var t=new Ao(e,r);return r.board.notes_map.set(parseInt(t.data.note_id),t),t})))||[],this.setValues(i)}return Po(e,[{key:"setValues",value:function(e){var t=e.column_name,n=e.board_id,r=e.column_id,o=e.column_order,i=e.column_color;this.column_name=t,this.board_id=n,this.column_id=r,this.column_order=o,this.column_color=i}},{key:"data",value:function(){return{column_id:this.column_id,column_name:this.column_name,column_color:this.column_color,board_id:this.board_id}}},{key:"save",value:function(e){var t=this;this.column_name=e.column_name,this.column_color=e.column_color,(0,C.SC)("projectBoard/saveColumn",{method:"POST",data:this.data()},(0,u.action)((function(e){e&&t.setValues(e)})))}},{key:"addNote",value:function(e,t){var n=this;e.column_id=this.column_id,t=t>=0?t:this.notes.length,this.addNoteToIndex(t,new Ao({loading:!0},this)),(0,C.SC)("projectBoard/saveNewNote",{method:"POST",data:e},(function(e){n.notes[t]=new Ao(e,n),n.board.notes_map.set(parseInt(e.note_id),n.notes[t])}))}},{key:"removeNoteByIndex",value:function(e){var t=this.notes[e];return this.notes=[].concat(Oo(this.notes.slice(0,e)),Oo(this.notes.slice(e+1))),t}},{key:"removeNoteByNoteID",value:function(e){var t=this.notes.find((function(t){return t.data.note_id===e}));return this.notes=this.notes.filter((function(t){return t.data.note_id!==e})),t}},{key:"addNoteToIndex",value:function(e,t){t.column=this,t.data.column_id=this.column_id,this.notes=[].concat(Oo(this.notes.slice(0,e)),[t],Oo(this.notes.slice(e)))}},{key:"selectedNoteIds",value:function(){return this.notes.filter((function(e){return e.checked})).map((function(e){return(0,d.B5)(e.data.note_id)})).filter((function(e){return!!e}))}},{key:"removeSelectedNotes",value:function(){this.notes=this.notes.filter((function(e){return!e.checked}))}},{key:"delete",value:function(){var e=this;(0,C.SC)("projectBoard/deleteColumn",{method:"POST",data:{column_id:this.column_id}},(function(){e.board.removeColumnById(e.column_id)}))}},{key:"sync",value:function(e){var t=Object.keys(e);this.notes=this.notes.filter((function(e){return t.includes(""+e.data.note_id)})),this.notes.forEach((function(t){return t.sync(e[t.data.note_id])})),this.notes=Oo(this.notes.sort((function(e,t){return e.data.note_order-t.data.note_order})))}},{key:"empty",value:function(){var e=this,t=this.notes.map((function(e){return parseInt(e.data.note_id)}));(0,C.SC)("projectBoard/deleteNotes",{method:"POST",data:{note_ids:t}},(0,u.action)((function(){e.notes=[]})))}},{key:"existingTaskIds",get:function(){return this.notes.map((function(e){return(0,d.B5)(e.data.task_id)})).filter((function(e){return!!e}))}},{key:"canWrite",get:function(){return this.board.canWrite}}]),e}()).prototype,"notes",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ro=Bo(to.prototype,"column_name",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),oo=Bo(to.prototype,"column_color",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Bo(to.prototype,"save",[u.action],Object.getOwnPropertyDescriptor(to.prototype,"save"),to.prototype),Bo(to.prototype,"removeNoteByIndex",[u.action],Object.getOwnPropertyDescriptor(to.prototype,"removeNoteByIndex"),to.prototype),Bo(to.prototype,"removeNoteByNoteID",[u.action],Object.getOwnPropertyDescriptor(to.prototype,"removeNoteByNoteID"),to.prototype),Bo(to.prototype,"addNoteToIndex",[u.action],Object.getOwnPropertyDescriptor(to.prototype,"addNoteToIndex"),to.prototype),Bo(to.prototype,"existingTaskIds",[u.computed],Object.getOwnPropertyDescriptor(to.prototype,"existingTaskIds"),to.prototype),Bo(to.prototype,"removeSelectedNotes",[u.action],Object.getOwnPropertyDescriptor(to.prototype,"removeSelectedNotes"),to.prototype),Bo(to.prototype,"canWrite",[u.computed],Object.getOwnPropertyDescriptor(to.prototype,"canWrite"),to.prototype),to),Ao=(ao=Bo((io=function(){function e(t,n){jo(this,e),So(this,"data",ao,this),Zo(this,"column",void 0),So(this,"checked",lo,this),(0,u.makeObservable)(this),this.data=t||{},this.column=n}return Po(e,[{key:"save",value:function(e){this.data.note_content=e.note_content,(0,C.SC)("projectBoard/saveNote",{method:"POST",data:{note_id:this.data.note_id,note_content:e.note_content}})}},{key:"toggleCheck",value:function(){this.checked=!this.checked}},{key:"sync",value:function(e){e.task_id?this.data=e:(this.data.note_order=e.note_order,this.data.note_content=e.note_content)}},{key:"loading",get:function(){return!!this.data.loading}},{key:"title",get:function(){return this.data.task_id?this.data.task_title:this.data.note_content}},{key:"canWrite",get:function(){return this.column.canWrite}},{key:"isChecked",get:function(){return this.checked}}]),e}()).prototype,"data",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),lo=Bo(io.prototype,"checked",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo(io.prototype,"canWrite",[u.computed],Object.getOwnPropertyDescriptor(io.prototype,"canWrite"),io.prototype),Bo(io.prototype,"isChecked",[u.computed],Object.getOwnPropertyDescriptor(io.prototype,"isChecked"),io.prototype),io),Do=(co=Bo((so=function(){function e(t){jo(this,e),So(this,"foundTasks",co,this),So(this,"term",uo,this),So(this,"filters",po,this),So(this,"searching",fo,this),Zo(this,"handle",0),Zo(this,"canWrite",!0),Zo(this,"store",void 0),(0,u.makeObservable)(this),this.store=t}return Po(e,[{key:"updateTerm",value:function(e){this.term=e,this.search()}},{key:"search",value:function(){var e=this;if(clearTimeout(this.handle),!this.term&&!Object.keys(this.filters).length)return this.searching=!1,void(this.foundTasks=[]);this.handle=setTimeout((function(){e.searching=!0;var t=(0,u.toJS)(e.filters);t.term=e.term,t.exclude=e.store.board.existingTaskIds.join(","),(0,C.SC)("tasks/search2",{data:{filters:t}},(function(t){var n;e.searching&&(e.searching=!1,e.foundTasks=(null==t||null===(n=t.map)||void 0===n?void 0:n.call(t,(function(t){return e.fakeNote(t)})))||[])}))}),1e3)}},{key:"addMatchingToFirstCol",value:function(){var e=this,t=(0,u.toJS)(this.filters);if(t.term=this.term,t.exclude=this.store.board.existingTaskIds.join(","),t.term||0!==Object.keys(t).filter((function(e){return!["term","exclude"].includes(e)})).length){var n=this.store.board.firstColumn().column_id;(0,C.SC)("projectBoard/addMatchingToCol",{data:{filters:t,column_id:n},method:"POST"},(function(t){var n=_o(t,2)[1];(0,P.qV)(lng("added %s tasks to column",n)),e.store.fetchBoard(e.store.current_board)}))}}},{key:"fakeNote",value:function(e){return new Ao(e,this)}},{key:"setFilters",value:function(e){this.filters=e,g.X.set("board_filters",e),this.search()}},{key:"tasks",get:function(){var e=this;return this.foundTasks.filter((function(t){return!e.store.board.existingTaskIds.includes(t.data.task_id)}))}}]),e}()).prototype,"foundTasks",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),uo=Bo(so.prototype,"term",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),po=Bo(so.prototype,"filters",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return g.X.get("board_filters")||{}}}),fo=Bo(so.prototype,"searching",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bo(so.prototype,"tasks",[u.computed],Object.getOwnPropertyDescriptor(so.prototype,"tasks"),so.prototype),so),Ro=n(25738);function No(e){return(No="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function zo(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Mo(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Mo(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Mo(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fo(e,t,n){return(Fo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ho(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xo(e,t,n){return t&&qo(e.prototype,t),n&&qo(e,n),e}function Lo(e,t){return(Lo=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Uo(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ho(e);if(t){var o=Ho(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vo(this,n)}}function Vo(e,t){return!t||"object"!==No(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ho(e){return(Ho=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Go=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Lo(e,t)}(n,e);var t=Uo(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("import users").caps(),r.objType="users",r.fetch(),r}return Xo(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=zo(e),i=o[0],a=o.slice(1);if("users"===i)return new n({route:a,nav:r})}}]),Xo(n,[{key:"_buildFields",value:function(){var e=this;this._fields=[{type:"checkbox",name:"keep_old_values",label:lng("keep empty values untouched for updates")},{type:"checkbox",name:"temp_password",label:lng("set temporary password for new users")},{type:"checkbox",name:"password_not_required",label:lng("do not require password for new users (SSO only)")},{type:"checkbox",name:"update_password",label:lng("update password for existing users"),className:"danger_text",onValueChange:function(t){return t&&(0,Ue.BB)((0,q.BX)(q.HY,{children:[(0,q.tZ)("span",{className:"danger_text",children:lng("this may prevent the users from accessing the system!").caps()}),(0,q.tZ)("br",{}),(0,q.tZ)("br",{}),lng("are you sure you want to continue?").caps()]}),{onCancel:function(){return e.values.set("update_password",void 0)}})}},{type:"checkbox",name:"new_user_notification",label:lng("send users details by mail (requires valid email)")},{type:"checkbox",name:"manager_ou",label:lng("create org' units using manager field"),helpKey:"@import/manager_ou"}],Fo(Ho(n.prototype),"_buildFields",this).call(this)}},{key:"moreInfoFields",value:function(){return[(0,Ro.bw)("Excel: ".concat(lng("date cells must be in Excel proper date format.").caps()," ").concat(lng("if uncertain, use long date format").caps(),":"),["March 14, 2012"]),(0,Ro.bw)("CSV: ".concat(lng("date cells must be in the following date format:").caps()),[Blsm.prm.date_moment_format]),(0,Ro.bw)(lng("the following fields are of type %s",lng("date").caps()).caps()+":",["employment_date","birthday"]),(0,Ro.bw)(lng("available values for %s","gender").caps()+":",["male","female"]),(0,Ro.bw)(lng("available values for %s","language").caps(),(0,q.tZ)(m.A,{href:(0,Ro.lA)(Object.keys(this.data.languages)),target:"_blank",children:(0,q.tZ)(cr.JO,{icon:"download"})})),(0,Ro.bw)(lng("available values for %s","date_format").caps()+":",["dd/mm/yy","mm/dd/yy"]),(0,Ro.bw)(lng("available values for %s","disabled, extra_time".concat(Blsm.isFeatureEnabled("eula")?", consent_eula":"")).caps()+":",[1,0]),(0,Ro.bw)(lng("available values for %s","timezone").caps(),(0,q.tZ)(m.A,{href:(0,Ro.lA)(this.data.timezones),target:"_blank",children:(0,q.tZ)(cr.JO,{icon:"download"})})),(0,Ro.bw)(lng("the following fields are of type %s",lng("external id")).caps()+":",["group","human_resources_coordinator","professional_manager","personal_coach"]),(0,Ro.bw)(lng("available values for %s","ou").caps()+":",(0,q.BX)("div",{children:[lng("the name of an existing org' unit").caps(),"."]}))]}}]),n}(Ro.dH);function Jo(e){return(Jo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Wo(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ko(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ko(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ko(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function $o(e,t,n){return($o="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ri(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function Yo(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qo(e,t,n){return t&&Yo(e.prototype,t),n&&Yo(e,n),e}function ei(e,t){return(ei=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ti(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ri(e);if(t){var o=ri(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ni(this,n)}}function ni(e,t){return!t||"object"!==Jo(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ri(e){return(ri=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var oi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ei(e,t)}(n,e);var t=ti(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("import workspaces").caps(),r.objType="groups",r.tutorial="workspace:excel_import",r.fetch(),r}return Qo(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=Wo(e),i=o[0],a=o.slice(1);if("groups"===i)return new n({route:a,nav:r})}}]),Qo(n,[{key:"_buildFields",value:function(){var e;this._fields=[{type:"checkbox",name:"keep_old_values",label:lng("keep empty values untouched for updates")},{type:"select",name:"managers_permission",label:lng("managers permission"),options:(0,d.wd)(null===(e=this.data)||void 0===e?void 0:e.permissions_types)},{type:"checkbox",name:"override_existing_permissions",label:lng("override existing managers permissions")},{type:"checkbox",name:"remove_existing_managers",label:lng("remove existing managers")},{type:"checkbox",name:"set_primary_manager",label:lng("set as primary manager")}],$o(ri(n.prototype),"_buildFields",this).call(this)}}]),n}(Ro.dH);function ii(e){return(ii="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ai(e){return function(e){if(Array.isArray(e))return ci(e)}(e)||ui(e)||si(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function li(e){return function(e){if(Array.isArray(e))return e}(e)||ui(e)||si(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function si(e,t){if(e){if("string"==typeof e)return ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ci(e,t):void 0}}function ci(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ui(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function pi(e,t,n){return(pi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=bi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function di(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fi(e,t,n){return t&&di(e.prototype,t),n&&di(e,n),e}function mi(e,t){return(mi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function gi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=bi(e);if(t){var o=bi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hi(this,n)}}function hi(e,t){return!t||"object"!==ii(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function bi(e){return(bi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var yi=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}(n,e);var t=gi(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("delete users").caps(),r.objType="users_deletion",r.fetch(),r}return fi(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=li(e),i=o[0],a=o.slice(1);if("users_deletion"===i)return new n({route:a,nav:r})}}]),fi(n,[{key:"templateFields",value:function(e){return[Ro.Qy].concat(ai(pi(bi(n.prototype),"templateFields",this).call(this,e)))}},{key:"templateLink",value:function(e){return pi(bi(n.prototype),"templateLink",this).call(this,e)+e.get("userCol")}}]),n}(Ro.dH);function vi(e){return(vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _i(e){return function(e){if(Array.isArray(e))return ki(e)}(e)||xi(e)||Oi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function wi(e){return function(e){if(Array.isArray(e))return e}(e)||xi(e)||Oi(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Oi(e,t){if(e){if("string"==typeof e)return ki(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ki(e,t):void 0}}function ki(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xi(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Si(e,t,n){return(Si="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Ei(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ji(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ci(e,t,n){return t&&ji(e.prototype,t),n&&ji(e,n),e}function Pi(e,t){return(Pi=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zi(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ei(e);if(t){var o=Ei(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bi(this,n)}}function Bi(e,t){return!t||"object"!==vi(t)&&"function"!=typeof t?Ti(e):t}function Ti(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ei(e){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ii=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Pi(e,t)}(n,e);var t=Zi(n);function n(e){var r,o,i,a,l;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e),i=Ti(o),l=null,(a="workspaceId")in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l;var s=e.route;return o.workspace_id=(null===(r=s[0])||void 0===r?void 0:r.workspace_id)||o.workspace,o.title=lng("import members").caps(),o.objType="members",o.tutorial="workspace:excel_import",o._fields=[{type:"single_item",name:"workspace_id",label:lng("select workspace"),value:o.workspace_id,poster:!0,theme:"bright",searchData:function(e,t){(0,C.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",is_owner:1,members_director:1,show_all:1,types:"Group,Ou,Qualification,Subset,Workplan,Role",term:e.term||void 0,id:e.ids||void 0}},t)}}],o.fetch(),o}return Ci(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=wi(e),i=o[0],a=o.slice(1);if("members"===i)return new n({route:a,nav:r})}}]),Ci(n,[{key:"templateFields",value:function(e){var t=[{val:"group_name",label:lng("workspace name")},{val:"group_external_id",label:lng("external id")}];return[Ro.Z,{type:"select",name:"groupCol",label:lng("workspace column",lng("group")).caps(),options:t,visible:function(){return!e.get("workspace_id")}}].concat(_i(Si(Ei(n.prototype),"templateFields",this).call(this,e)))}},{key:"templateLink",value:function(e){return Si(Ei(n.prototype),"templateLink",this).call(this,e)+e.get("userCol")+(e.get("workspace_id")?"":"-"+e.get("groupCol"))}}]),n}(Ro.dH);function Ai(e){return(Ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Di(e){return function(e){if(Array.isArray(e))return zi(e)}(e)||Mi(e)||Ni(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ri(e){return function(e){if(Array.isArray(e))return e}(e)||Mi(e)||Ni(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ni(e,t){if(e){if("string"==typeof e)return zi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?zi(e,t):void 0}}function zi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Mi(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Fi(e,t,n){return(Fi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Gi(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function qi(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Xi(e,t,n){return t&&qi(e.prototype,t),n&&qi(e,n),e}function Li(e,t){return(Li=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ui(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Gi(e);if(t){var o=Gi(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vi(this,n)}}function Vi(e,t){return!t||"object"!==Ai(t)&&"function"!=typeof t?Hi(e):t}function Hi(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gi(e){return(Gi=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ji=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Li(e,t)}(n,e);var t=Ui(n);function n(e){var r,o,i,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e),i=Hi(o),l=void 0,(a="workspace_id")in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l,o.workspace_id=(null===(r=e.route[0])||void 0===r?void 0:r.workspace_id)||o.workspace_id,o.title=lng("import workspace performances").caps(),o.objType="groupperformances",o._fields=[{type:"single_item",name:"workspace_id",label:lng("select workspace"),value:o.workspace_id,poster:!0,theme:"bright",searchData:function(e,t){(0,C.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",types:["Group","Qualification"],term:e.term||"",id:e.ids||"",is_owner:1,show_all:1}},t)}},{type:"checkbox",name:"assignments_exemption",label:lng("give exemption to workspace assignments")},{type:"checkbox",name:"overwrite_performance",label:lng("overwrite current performances (if any)")}],o.fetch(),o}return Xi(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=Ri(e),i=o[0],a=o.slice(1);if("group_performances"===i)return new n({route:a,nav:r})}}]),Xi(n,[{key:"templateFields",value:function(e){var t=[{val:"group_name",label:lng("workspace name")},{val:"group_external_id",label:lng("external id")}];return[Ro.Z,{type:"select",name:"groupCol",label:lng("workspace column",lng("group")).caps(),options:t,visible:function(){return!e.get("workspace_id")}}].concat(Di(Fi(Gi(n.prototype),"templateFields",this).call(this,e)))}},{key:"moreInfoFields",value:function(){return[(0,Ro.bw)(lng("data must be sorted by date in ascending order").caps()+"."),(0,Ro.bw)(lng("qualification performances can be imported for qualifications in status:").caps(),[lng("renewing"),lng("late"),lng("expired")])]}},{key:"templateLink",value:function(e){return Fi(Gi(n.prototype),"templateLink",this).call(this,e)+e.get("userCol")+(e.get("workspace_id")?"":"-"+e.get("groupCol"))}}]),n}(Ro.dH);function Wi(e){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ki(e){return function(e){if(Array.isArray(e))return Qi(e)}(e)||ea(e)||Yi(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $i(e){return function(e){if(Array.isArray(e))return e}(e)||ea(e)||Yi(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Yi(e,t){if(e){if("string"==typeof e)return Qi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qi(e,t):void 0}}function Qi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ea(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function ta(e,t,n){return(ta="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=sa(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ra(e,t,n){return t&&na(e.prototype,t),n&&na(e,n),e}function oa(e,t){return(oa=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ia(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=sa(e);if(t){var o=sa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return aa(this,n)}}function aa(e,t){return!t||"object"!==Wi(t)&&"function"!=typeof t?la(e):t}function la(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function sa(e){return(sa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ca=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&oa(e,t)}(n,e);var t=ia(n);function n(e){var r,o,i,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),o=t.call(this,e),i=la(o),l=void 0,(a="assignment_id")in i?Object.defineProperty(i,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):i[a]=l,o.assignment_id=(null===(r=e.route[0])||void 0===r?void 0:r.assignment_id)||o.assignment_id,o.title=lng("import assignment performances").caps(),o.objType="assignmentperformances",o._fields=[{type:"single_item",name:"assignment_id",label:lng("select assignment"),value:o.assignment_id,poster:!0,theme:"bright",searchData:function(e,t){(0,C.SC)("search/assignments/",{data:{req:"AutoComplete",term:e.term||"",assignment_type:"lesson,task",id:e.ids||""},method:"POST"},t)}},{type:"checkbox",name:"my_assignments",label:lng("load performances only for my assignments"),visible:function(){return!o.values.get("assignment_id")}}],o.fetch(),o}return ra(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=$i(e),i=o[0],a=o.slice(1);if("assignment_performances"===i)return new n({route:a,nav:r})}}]),ra(n,[{key:"templateFields",value:function(e){var t=[{val:"assignment_name",label:lng("assignment name")},{val:"assignment_id",label:lng("ID")}];return[Ro.Z,{type:"select",name:"assignmentCol",label:lng("assignment column",lng("assignment")).caps(),options:t,visible:function(){return!e.get("assignment_id")}}].concat(Ki(ta(sa(n.prototype),"templateFields",this).call(this,e)))}},{key:"templateLink",value:function(e){return ta(sa(n.prototype),"templateLink",this).call(this,e)+e.get("userCol")+(e.get("assignment_id")?"":"-"+e.get("assignmentCol"))}}]),n}(Ro.dH);function ua(e){return(ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function pa(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return da(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return da(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function da(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function fa(e,t,n){return(fa="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=va(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ma(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ga(e,t,n){return t&&ma(e.prototype,t),n&&ma(e,n),e}function ha(e,t){return(ha=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=va(e);if(t){var o=va(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ya(this,n)}}function ya(e,t){return!t||"object"!==ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function va(e){return(va=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var _a=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ha(e,t)}(n,e);var t=ba(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("import users from %s","active directory").caps(),r.objType="ldap",r.importFromTemplate=!1,r.fetch(),r}return ga(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=pa(e),i=o[0],a=o.slice(1);if("ldap"===i)return new n({route:a,nav:r})}}]),ga(n,[{key:"_buildFields",value:function(){var e=this;this.srcFields=[{type:"indent_set",toggleTitle:lng("connection details").caps(),toggle:!0,fields:[{type:"text",name:"ldap_server",label:lng("server address"),disabled:!0},{type:"text",name:"ldap_domain",label:lng("domain"),disabled:!0},{type:"text",name:"user",label:lng("user"),required:!0},{type:"password",name:"password",label:lng("password"),autoComplete:"new-password",required:!0}]},{type:"indent_set",toggleTitle:lng("filtering").caps(),toggle:!0,fields:[{type:"text",name:"ou",label:lng("org' unit")},{type:"text",name:"filter",label:lng("ldap filter string")},{type:"checkbox",name:"bi_filters[0]",label:lng("skip disabled users"),checkboxValue:"enabled_users"}]}],this._fields=[{type:"checkbox",name:"import_photos",label:lng("import photos")},{type:"checkbox",name:"create_ou",label:lng("create org' units")},{type:"indent_set",fields:[{type:"checkbox",name:"attach_ou_manager",label:lng("assign managers"),disable:function(){return!e.values.get("create_ou")},onValueChange:function(t){return t&&e.updateValue(null,"manager_ou")}},{type:"checkbox",name:"manager_ou",label:lng("create using manager field"),disable:function(){return!e.values.get("create_ou")},onValueChange:function(t){return t&&e.updateValue(null,"attach_ou_manager")}}]},{type:"checkbox",name:"del_users",label:lng("remove missing users")}],fa(va(n.prototype),"_buildFields",this).call(this)}}]),n}(Ro.dH);function wa(e){return(wa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oa(e){return function(e){if(Array.isArray(e))return Sa(e)}(e)||ja(e)||xa(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ka(e){return function(e){if(Array.isArray(e))return e}(e)||ja(e)||xa(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function xa(e,t){if(e){if("string"==typeof e)return Sa(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Sa(e,t):void 0}}function Sa(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ja(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function Ca(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pa(e,t,n){return t&&Ca(e.prototype,t),n&&Ca(e,n),e}function Za(e,t){return(Za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ba(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ea(e);if(t){var o=Ea(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ta(this,n)}}function Ta(e,t){return!t||"object"!==wa(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ea(e){return(Ea=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ia=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Za(e,t)}(n,e);var t=Ba(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("import meetings").caps(),r.objType="meetings",r._fields=[],r.fetch(),r}return Pa(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=ka(e),i=o[0],a=o.slice(1);if("meetings"===i)return new n({route:a,nav:r})}}]),Pa(n,[{key:"moreInfoFields",value:function(){var e=[{val:lng("any valid url").caps(),label:lng("e.g.: %s","https://example.com/mymeeting").caps()}].concat(Oa(this.data.assignment_url_options.map((function(e){return{label:e.label,val:e.code}})))),t=[{label:lng("automatic attendance when clicking online link (link shows 5 min before starting)"),val:1},{label:lng("none"),val:0}];return[(0,Ro.xF)(lng("available values for %s","meeting url").caps(),e),(0,Ro.xF)(lng("available values for %s","auto attendance").caps(),t)]}}]),n}(Ro.dH);function Aa(e){return(Aa="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Da(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ra(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ra(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Na(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function za(e,t){return(za=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Ma(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Xa(e);if(t){var o=Xa(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Fa(this,n)}}function Fa(e,t){return!t||"object"!==Aa(t)&&"function"!=typeof t?qa(e):t}function qa(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Xa(e){return(Xa=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var La=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&za(e,t)}(i,e);var t,n,r,o=Ma(i);function i(e){var t,n,r,a,l;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),n=o.call(this,e),r=qa(n),l=null,(a="group_id")in r?Object.defineProperty(r,a,{value:l,enumerable:!0,configurable:!0,writable:!0}):r[a]=l,n.group_id=(null===(t=e.route[0])||void 0===t?void 0:t.group_id)||n.group_id,n.title=lng("import tasks").caps(),n.objType="tasks",n.fetch(),n}return t=i,r=[{key:"match",value:function(e,t){var n=t.nav,r=Da(e),o=r[0],a=r.slice(1);if("tasks"===o)return new i({route:a,nav:n})}}],(n=null)&&Na(t.prototype,n),r&&Na(t,r),i}(Ro.dH);function Ua(e){return(Ua="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Va(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ha(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ha(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ha(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ga(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ja(e,t){return(Ja=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Wa(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$a(e);if(t){var o=$a(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ka(this,n)}}function Ka(e,t){return!t||"object"!==Ua(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function $a(e){return($a=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ya=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ja(e,t)}(i,e);var t,n,r,o=Wa(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).title=lng("import questionnaires").caps(),t.objType="questionnaires",t.fetch(),t}return t=i,r=[{key:"match",value:function(e,t){var n=t.nav,r=Va(e),o=r[0],a=r.slice(1);if("questionnaires"===o)return new i({route:a,nav:n})}}],(n=null)&&Ga(t.prototype,n),r&&Ga(t,r),i}(Ro.dH),Qa=n(40423);function el(e){return(el="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function tl(e){return function(e){if(Array.isArray(e))return e}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return nl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nl(e,t)}(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function nl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function rl(e,t,n){return(rl="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=cl(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(n):o.value}})(e,t,n||e)}function ol(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function il(e,t,n){return t&&ol(e.prototype,t),n&&ol(e,n),e}function al(e,t){return(al=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ll(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=cl(e);if(t){var o=cl(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sl(this,n)}}function sl(e,t){return!t||"object"!==el(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function cl(e){return(cl=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var ul,pl,dl=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&al(e,t)}(n,e);var t=ll(n);function n(e){var r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),(r=t.call(this,e)).title=lng("import users from %s","hibob").caps(),r.objType="hibob",r.importFromTemplate=!1,r.fetch(),r}return il(n,null,[{key:"match",value:function(e,t){var r=t.nav,o=tl(e),i=o[0],a=o.slice(1);if("hibob"===i)return new n({route:a,nav:r})}}]),il(n,[{key:"_buildFields",value:function(){var e=this;this.srcFields=[{type:"indent_set",toggleTitle:lng("connection details").caps(),toggle:!0,fields:[{type:"text",name:"user",label:lng("user"),required:!0},{type:"password",name:"password",label:lng("password"),autoComplete:"new-password",required:!0}]},{type:"indent_set",toggleTitle:lng("filtering").caps(),toggle:!0,fields:[{type:"text",name:"filters[departments]",label:lng("departments")+" (csv)"}]}],this._fields=[{type:"checkbox",name:"create_ou",label:lng("create org' units")+" ("+lng("flat structure based on departments")+")"},{type:"indent_set",fields:[{type:"checkbox",name:"manager_ou",label:lng("create using manager field"),disable:function(){return!e.values.get("create_ou")}}]},{type:"checkbox",name:"del_users",label:lng("remove missing users")}],rl(cl(n.prototype),"_buildFields",this).call(this)}}]),n}(Ro.dH);function fl(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ml(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var gl,hl,bl,yl,vl,_l,wl,Ol,kl,xl,Sl,jl,Cl,Pl,Zl,Bl,Tl,El,Il,Al=(pl=ml((ul=function(){function e(t){var n,r,o,i,a,l,s,c=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n=this,r="importObj",i=this,(o=pl)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(i):void 0}),s=[],(l="route")in(a=this)?Object.defineProperty(a,l,{value:s,enumerable:!0,configurable:!0,writable:!0}):a[l]=s,(0,u.makeObservable)(this),this.nav=c}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){this.route=e,this.importObj=this._getImportObject()}},{key:"_getImportObject",value:function(){for(var e=0,t=[Go,oi,yi,Ii,Ji,ca,_a,Ia,La,Ya,Qa.l,dl];e<t.length;e++){var n=t[e].match(this.route,{nav:this.nav});if(n)return n}}},{key:"ready",get:function(){return this.importObj&&this.importObj.ready}},{key:"error",get:function(){return this.importObj?this.importObj.error:"import not found"}}])&&fl(t.prototype,n),r&&fl(t,r),e}()).prototype,"importObj",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),ml(ul.prototype,"ready",[u.computed],Object.getOwnPropertyDescriptor(ul.prototype,"ready"),ul.prototype),ml(ul.prototype,"error",[u.computed],Object.getOwnPropertyDescriptor(ul.prototype,"error"),ul.prototype),ul),Dl=n(98075),Rl=n(87327),Nl=n(38246),zl=n(88116);function Ml(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Fl(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fl(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Fl(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ql(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ql(Object(n),!0).forEach((function(t){Vl(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ql(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ll(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Ul(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Vl(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hl(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Gl,Jl,Wl=(gl=u.action.bound,hl=u.action.bound,yl=Hl((bl=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ll(this,"ready",yl,this),Ll(this,"assignments",vl,this),Ll(this,"workspaces",_l,this),Ll(this,"groupsCompactView",wl,this),Ll(this,"events",Ol,this),Ll(this,"assignment_completion",kl,this),Ll(this,"qualification_completion",xl,this),Ll(this,"course_completion",Sl,this),Ll(this,"coach_completion",jl,this),Ll(this,"activeCalendarDate",Cl,this),Ll(this,"activeCalendarMonth",Pl,this),Ll(this,"_showOnlyAssignments",Zl,this),Ll(this,"_coachingMode",Bl,this),Ll(this,"_coachingUserId",Tl,this),Ll(this,"showOld",El,this),Ll(this,"showCompleted",Il,this),Vl(this,"_trainees",new Map),(0,u.makeObservable)(this),this.nav=r,this.fetch(),(0,u.observe)(this,"groupsCompactView",(function(e){g.X.set("overview_groupsCompactView",e.newValue?1:void 0)})),rp.on("commentsUpdateCount",(function(e){if("assignment"===e.connectTo.type){var t=n.assignments.find((function(t){return t.assignment_id==e.connectTo.object_id}));t&&(t.comment_count=e.length)}}))}var t,n,r;return t=e,(n=[{key:"calcTraineeData",value:function(){var e=this;this.coachingAssignments.forEach((function(t){t.users.forEach((function(n){var r,o=e._trainees.get(n.user_id)||Xl(Xl({},n),{},{countAssignments:0,countAssignmentsOverdue:0});o.countAssignments++,(null===(r=t.sortTime)||void 0===r?void 0:r.unix())<Blsm.prm.TIME&&!n.performance_completed&&o.countAssignmentsOverdue++,e._trainees.set(n.user_id,o)}))}))}},{key:"fetch",value:function(){var e=this,t=(0,B.WQ)(),n="".concat(t.year(),"-").concat(t.month()+1,"-01"),r=t.clone().endOf("month"),o="".concat(r.year(),"-").concat(r.month()+1,"-").concat(r.date());(0,C.SC)("overview/basic",{method:"GET",data:{dateFrom:n,dateTo:o,show_old:this.showOld}},(0,u.action)((function(n){var r,o,i;e.assignments=(null===(r=n.assignments)||void 0===r?void 0:r.map((function(e){return new Rl.o(e)})))||[],e.workspaces=(null===(o=n.workspaces)||void 0===o?void 0:o.map((function(e){return new Nl.j(e)})))||[];var a=(null===(i=n.schedule)||void 0===i?void 0:i.map((function(e){return(0,zl.aZ)(e,{displayWorkspace:!0})})))||[],l=t.clone().format("YYYY-MM");e.events.set(l,a),e.assignment_completion=n.assignment_completion,e.qualification_completion=n.qualification_completion,e.course_completion=n.course_completion,e.coach_completion=n.coach_completion,e.calcTraineeData(),e.ready=!0})))}},{key:"_fetchMonthEvents",value:function(e){var t=this,n="".concat(e.year(),"-").concat(e.month()+1,"-01"),r=e.clone().endOf("month"),o="".concat(e.year(),"-").concat(e.month()+1,"-").concat(r.date());(0,C.SC)("overview/schedule",{method:"GET",data:{dateFrom:n,dateTo:o}},(0,u.action)((function(n){var r,o=(null===(r=n.schedule)||void 0===r?void 0:r.map((function(e){return(0,zl.aZ)(e,{displayWorkspace:!0})})))||[],i=e.format("YYYY-MM");t.events.set(i,o)})))}},{key:"updateRoute",value:function(e){var t=Ml(e,2),n=t[0],r=t[1];this._coachingMode="coaching"===n,this._coachingUserId=this._coachingMode&&r,this._showOnlyAssignments="1"===(null==n?void 0:n.alist),"1"===(null==n?void 0:n.alist)&&"1"===(null==r?void 0:r.show_completed)&&this.setShowCompleted(!0)}},{key:"setShowOld",value:function(e){var t=this;this.showOld=e,(0,C.SC)("overview/workspaces",{data:{show_old:this.showOld?1:0},method:"GET"},(function(e){return t.workspaces=(null==e?void 0:e.map((function(e){return new Nl.j(e)})))||[]}))}},{key:"setShowCompleted",value:function(e){var t=this;this.showCompleted=e,(0,C.SC)("overview/assignments",{data:{show_completed:this.showCompleted?1:0},method:"GET"},(function(e){return t.assignments=(null==e?void 0:e.map((function(e){return new Rl.o(e)})))||[]}))}},{key:"setActiveComponent",value:function(e){var t=this;ep().showSideDrawer(e,{tab:"",close:function(){return t.setActiveComponent(null)}})}},{key:"todoAssignments",get:function(){return this.assignments.filter((function(e){return!e.isForCoach()&&e.isToDO()}))}},{key:"listAssignments",get:function(){return this.assignments.filter((function(e){return!e.isForCoach()}))}},{key:"coachingAssignments",get:function(){return this.assignments.filter((function(e){return e.isForCoach()}))}},{key:"trainees",get:function(){return Array.from(this._trainees.values()).sort((function(e,t){return(0,d.v2)(e).localeCompare((0,d.v2)(t))}))}},{key:"monthEvents",get:function(){if(!this.activeCalendarMonth)return!1;var e=this.activeCalendarMonth.format("YYYY-MM");return this.events.has(e)||(this.events.set(e,!1),this._fetchMonthEvents(this.activeCalendarMonth)),this.events.get(e)}},{key:"showOnlyAssignments",get:function(){return this._showOnlyAssignments},set:function(e){this.nav([{alist:e?1:""}])}},{key:"coachingMode",get:function(){return this._coachingMode}},{key:"coachingUserId",get:function(){return this._coachingUserId},set:function(e){this.nav(e?["coaching",e]:["coaching"])}}])&&Ul(t.prototype,n),r&&Ul(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),vl=Hl(bl.prototype,"assignments",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),_l=Hl(bl.prototype,"workspaces",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wl=Hl(bl.prototype,"groupsCompactView",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!!g.X.get("overview_groupsCompactView")}}),Ol=Hl(bl.prototype,"events",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new Map}}),kl=Hl(bl.prototype,"assignment_completion",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),xl=Hl(bl.prototype,"qualification_completion",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Sl=Hl(bl.prototype,"course_completion",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),jl=Hl(bl.prototype,"coach_completion",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Cl=Hl(bl.prototype,"activeCalendarDate",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,B.WQ)().startOf("day")}}),Pl=Hl(bl.prototype,"activeCalendarMonth",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Zl=Hl(bl.prototype,"_showOnlyAssignments",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Bl=Hl(bl.prototype,"_coachingMode",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tl=Hl(bl.prototype,"_coachingUserId",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),El=Hl(bl.prototype,"showOld",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Il=Hl(bl.prototype,"showCompleted",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hl(bl.prototype,"todoAssignments",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"todoAssignments"),bl.prototype),Hl(bl.prototype,"listAssignments",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"listAssignments"),bl.prototype),Hl(bl.prototype,"coachingAssignments",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"coachingAssignments"),bl.prototype),Hl(bl.prototype,"trainees",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"trainees"),bl.prototype),Hl(bl.prototype,"fetch",[u.action],Object.getOwnPropertyDescriptor(bl.prototype,"fetch"),bl.prototype),Hl(bl.prototype,"monthEvents",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"monthEvents"),bl.prototype),Hl(bl.prototype,"showOnlyAssignments",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"showOnlyAssignments"),bl.prototype),Hl(bl.prototype,"coachingMode",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"coachingMode"),bl.prototype),Hl(bl.prototype,"coachingUserId",[u.computed],Object.getOwnPropertyDescriptor(bl.prototype,"coachingUserId"),bl.prototype),Hl(bl.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(bl.prototype,"updateRoute"),bl.prototype),Hl(bl.prototype,"setShowOld",[gl],Object.getOwnPropertyDescriptor(bl.prototype,"setShowOld"),bl.prototype),Hl(bl.prototype,"setShowCompleted",[hl],Object.getOwnPropertyDescriptor(bl.prototype,"setShowCompleted"),bl.prototype),bl),Kl=n(62115),$l=n(27787);function Yl(e){return function(e){if(Array.isArray(e))return ts(e)}(e)||ns(e)||es(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ql(e){return function(e){if(Array.isArray(e))return e}(e)||ns(e)||es(e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function es(e,t){if(e){if("string"==typeof e)return ts(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ts(e,t):void 0}}function ts(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ns(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function rs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function os(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function is(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var as,ls,ss,cs,us=(Jl=is((Gl=function(){function e(t){var n,r,o,i,a=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),os(this,"nav",void 0),os(this,"modes",["overview"]),os(this,"show_tasks",void 0),os(this,"show_discussions",void 0),os(this,"show_nav",void 0),n=this,r="mode",i=this,(o=Jl)&&Object.defineProperty(n,r,{enumerable:o.enumerable,configurable:o.configurable,writable:o.writable,value:o.initializer?o.initializer.call(i):void 0}),os(this,"overviewStore",null),os(this,"tasksStore",null),os(this,"discussionsStore",null),(0,u.makeObservable)(this),this.nav=a,this.show_tasks=Blsm.isFeatureEnabled("group_tasks"),this.show_discussions=Blsm.isGuiFeatureEnabled("show_discussions_in_home")&&Blsm.isFeatureEnabled("discussions"),this.show_nav=this.show_discussions||this.show_tasks,this.show_tasks&&this.modes.push("tasks"),this.show_discussions&&this.modes.push("discussions")}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=Ql(e),n=t[0],r=t.slice(1);"new_task"===n&&(location.replace(location.href.replace("/new_task","/")),(0,$l.l)());var o="overview",i=Blsm.prm.Mainref+"home_default";g.X.get(i)&&this.modes.includes(g.X.get(i))?o=g.X.get(i):Blsm.isGuiFeatureEnabled("home_default")&&this.modes.includes(Blsm.GuiFeatureValue("home_default"))&&(o=Blsm.GuiFeatureValue("home_default")),this.modes.includes(n)?(this.mode=n,g.X.set(i,n)):(this.mode=o,"tasks"===o&&(r=["my"])),this.getStore(this.mode).updateRoute(r)}},{key:"getTasksStore",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.tasksStore||t||(this.tasksStore=new Dl.w({nav:function(t,n){return e.nav(["tasks"].concat(Yl(t)),n)}})),this.tasksStore}},{key:"getOverviewStore",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.overviewStore||t||(this.overviewStore=new Wl({nav:function(t,n){return e.nav(["overview"].concat(Yl(t)),n)}})),this.overviewStore}},{key:"getDiscussionsStore",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.discussionsStore||t||(this.discussionsStore=new Kl.C({nav:function(t,n){return e.nav(["discussions"].concat(Yl(t)),n)}})),this.discussionsStore}},{key:"getStore",value:function(e){switch(e){case"overview":return this.getOverviewStore();case"tasks":return this.getTasksStore();case"discussions":return this.getDiscussionsStore()}}}])&&rs(t.prototype,n),r&&rs(t,r),e}()).prototype,"mode",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),is(Gl.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(Gl.prototype,"updateRoute"),Gl.prototype),Gl),ps=n(51885),ds=n(35997),fs=n(2645),ms=n(76259);function gs(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function hs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function bs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ys(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var vs,_s,ws=(ls=ys((as=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),gs(this,"ready",ls,this),gs(this,"subs",ss,this),gs(this,"data",cs,this),bs(this,"id",void 0),bs(this,"ws",void 0),(0,u.makeObservable)(this),this.id=t}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e,t){var n=this,r=t.reload;this.ready&&!r||(this.ws=e[1],(0,C.SC)("assignment/master/".concat(this.ws?"group=".concat(this.ws):"","/").concat(this.id),{},(function(e){var t;n.data=e,n.subs=(null===(t=e.subs)||void 0===t?void 0:t.map((function(e){return new Rl.o(e,{master:n})})))||[],n.ready=!0})))}},{key:"removeSub",value:function(e){this.subs=this.subs.filter((function(t){return t.assignment_id!=e}))}}])&&hs(t.prototype,n),r&&hs(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ss=ys(as.prototype,"subs",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cs=ys(as.prototype,"data",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),as),Os=n(10101);function ks(e){return(ks="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ss(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?xs(Object(n),!0).forEach((function(t){js(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function js(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ps(e,t){return(Ps=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Zs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Es(e);if(t){var o=Es(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Bs(this,n)}}function Bs(e,t){return!t||"object"!==ks(t)&&"function"!=typeof t?Ts(e):t}function Ts(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Es(e){return(Es=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Is,As,Ds,Rs,Ns,zs,Ms,Fs,qs=(vs=u.action.bound,_s=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ps(e,t)}(i,e);var t,n,r,o=Zs(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),(0,u.makeObservable)(Ts(t));var n=e.data,r=void 0===n?{}:n;return t.tab=r.tab,t.onSaveSuccess=e.onSaveSuccess,r.category?(t.category=r.category,t.title=lng('add category under "%s"',r.category.name).caps()):t.title=lng("add new category").caps(),t._fields=[{type:"text",name:"title",label:lng("category name").caps(),theme:"bright",required:!0}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){var t,n=Object.assign(Ss(Ss({},e),{},{create:!0,id:(null===(t=this.category)||void 0===t?void 0:t.id)||0}));1===this.tab&&(n.global=!0),this.saveToUrl("domains/category_tree",n)}},{key:"SaveSuccess",value:function(){}}])&&Cs(t.prototype,n),r&&Cs(t,r),i}(st.I),Is=_s.prototype,As="SaveSuccess",Ds=[vs],Rs=Object.getOwnPropertyDescriptor(_s.prototype,"SaveSuccess"),Ns=_s.prototype,zs={},Object.keys(Rs).forEach((function(e){zs[e]=Rs[e]})),zs.enumerable=!!zs.enumerable,zs.configurable=!!zs.configurable,("value"in zs||zs.initializer)&&(zs.writable=!0),zs=Ds.slice().reverse().reduce((function(e,t){return t(Is,As,e)||e}),zs),Ns&&void 0!==zs.initializer&&(zs.value=zs.initializer?zs.initializer.call(Ns):void 0,zs.initializer=void 0),void 0===zs.initializer&&(Object.defineProperty(Is,As,zs),zs=null),_s);function Xs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ls(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Xs(Object(n),!0).forEach((function(t){Us(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Us(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vs(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Hs(e,t){return(Hs=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gs(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ks(e);if(t){var o=Ks(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Js(this,n)}}function Js(e,t){return!t||"object"!==$s(t)&&"function"!=typeof t?Ws(e):t}function Ws(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ks(e){return(Ks=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $s(e){return($s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ys(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Qs(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Qs(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Qs(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ec,tc,nc,rc,oc,ic,ac=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(0===(null==t?void 0:t.slice().length)||!t)return[];var r,o=Ys(t.slice());try{for(o.s();!(r=o.n()).done;){var i=r.value;n.push(i),i.sons&&i.sons.slice().length>0&&n.push(e(i.sons,n))}}catch(e){o.e(e)}finally{o.f()}return n.filter((function(e){return"object"===$s(e)&&!$.isArray(e)}))},lc=(Ms=u.action.bound,function(e,t,n,r,o){var i={};Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null)}((Fs=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Hs(e,t)}(i,e);var t,n,r,o=Gs(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this),(0,u.makeObservable)(Ws(t));var n=e.data,r=void 0===n?{}:n;t.onSaveSuccess=e.onSaveSuccess,t.category=r.category,t.title=lng("edit category").caps()+" "+r.category.name;var a=ac(r.categories.sons);return t.buildFields(r.category.id,e.initialValues,a),t}return t=i,(n=[{key:"buildFields",value:function(e,t,n){this._fields=[{type:"text",name:"title",label:lng("category name").caps(),theme:"bright",required:!0},{type:"select",name:"parent",label:lng("parent"),empty_option:!0,options:[{val:0,label:""}].concat(n.filter((function(t){return parseInt(t.id)!==parseInt(e)})).map((function(e){return{label:e.name,val:e.id}})))}],this._prepFields(t),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("domains/category_tree",Object.assign(Ls(Ls({},e),{},{id:this.category.id})))}},{key:"SaveSuccess",value:function(){}}])&&Vs(t.prototype,n),r&&Vs(t,r),i}(st.I)).prototype,"SaveSuccess",[Ms],Object.getOwnPropertyDescriptor(Fs.prototype,"SaveSuccess"),Fs.prototype),Fs);function sc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return cc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function cc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function uc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function pc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function dc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function fc(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var mc=(ec=u.action.bound,tc=u.action.bound,rc=fc((nc=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),uc(this,"ready",rc,this),uc(this,"_tree",oc,this),uc(this,"tab",ic,this),dc(this,"addCategory",(function(e){ep().openDialog("form",new qs({data:{category:e,tab:n.tab},onSaveSuccess:function(e){return n.onDialogClose(e)}}))})),dc(this,"addParentCategory",(function(){ep().openDialog("form",new qs({data:{tab:n.tab},onSaveSuccess:n.onDialogClose}))})),dc(this,"editCategory",(function(e){var t,r=n._findNode(e.id);ep().openDialog("form",new lc({data:{category:e,categories:n._tree,tab:n.tab},initialValues:{title:e.name,parent:null===(t=r[1])||void 0===t?void 0:t.id},onSaveSuccess:n.onDialogClose}))})),dc(this,"deleteCategory",(function(e){(0,Ue.BB)(lng('are you sure that you want to delete the category "%s"?',e.name).caps(),{text:lng("delete").caps(),onConfirm:function(){return(0,C.SC)("domains/category_tree",{data:e,method:"DELETE"},n.onDialogClose)}})})),dc(this,"onDialogClose",(function(e){n._tree.lastSon=parseInt(e),ep().closeDialog(),n._fetch()})),(0,u.makeObservable)(this),this.nav=r,this._fetch()}var t,n,r;return t=e,(n=[{key:"_fetch",value:function(){var e=this;this._tree.sons=[],(0,C.SC)("domains/category_tree",{data:{global:this.tab}},(0,u.action)((function(t){e._tree.sons=t.categories,(0,Os.v0)(e._tree.sons),e.ready=!0})))}},{key:"fetch",value:function(){this._fetch()}},{key:"setTab",value:function(e){this.tab=e,this.fetch()}},{key:"updateRoute",value:function(){}},{key:"updateNav",value:function(){this.nav([],{replace:!0})}},{key:"moveNode",value:function(e,t){e=e.toString(),t=t.toString();var n=sc(this._findNode(t),1)[0],r=!1;if(t.includes("|")){var o=sc(t.split("|",2),2)[1];r=parseInt(o);var i=sc(this._findNode(e),2),a=i[0];i[1]===n&&n.sons.indexOf(a)<r&&r--}var l=sc(this._findNode(e),2),s=l[0];l[1].sons.remove(s),n.sons.splice(!1===r?n.sons.length:r,0,s),(0,Os.v0)(this._tree.sons),(0,C.SC)("domains/category_tree_move",{method:"POST",data:{moved_id:e,to_parent:n.id,to_index:r,global:0}})}},{key:"_findNode",value:function(e){var t=sc(e.split("|",2),1)[0];if(!t)return[this._tree,this._tree];var n=[];return[(0,d.oH)(this._tree.sons,(function(e){return e.id===t}),n),n.length>1?n[n.length-2]:this._tree]}},{key:"tree",get:function(){return this._tree.sons}}])&&pc(t.prototype,n),r&&pc(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),oc=fc(nc.prototype,"_tree",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{sons:[]}}}),ic=fc(nc.prototype,"tab",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),fc(nc.prototype,"fetch",[u.action],Object.getOwnPropertyDescriptor(nc.prototype,"fetch"),nc.prototype),fc(nc.prototype,"setTab",[u.action],Object.getOwnPropertyDescriptor(nc.prototype,"setTab"),nc.prototype),fc(nc.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(nc.prototype,"updateRoute"),nc.prototype),fc(nc.prototype,"tree",[u.computed],Object.getOwnPropertyDescriptor(nc.prototype,"tree"),nc.prototype),fc(nc.prototype,"updateNav",[ec],Object.getOwnPropertyDescriptor(nc.prototype,"updateNav"),nc.prototype),fc(nc.prototype,"moveNode",[tc],Object.getOwnPropertyDescriptor(nc.prototype,"moveNode"),nc.prototype),nc),gc=n(35519);function hc(e){return(hc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yc(e,t){return(yc=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vc(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wc(e);if(t){var o=wc(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _c(this,n)}}function _c(e,t){return!t||"object"!==hc(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wc(e){return(wc=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Oc,kc,xc,Sc,jc,Cc,Pc,Zc,Bc,Tc,Ec,Ic,Ac=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yc(e,t)}(i,e);var t,n,r,o=vc(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).initialValues=e.data||{},t.successMessage=lng("resources for meeting saved successfully"),t.title=lng("meeting resources").caps(),t._fields=[{type:"hidden",name:"group_id"},{type:"hidden",name:"obj_id"},{type:"hidden",name:"obj_type"},{type:"multiple_items",name:"resources",label:lng("select resources"),poster:!0,theme:"bright",valueIsMap:!0,objectKeys:["resource_id","label","amount_in_use","resource_category","note"],searchData:function(e,t){(0,C.SC)("resources/search_resource",{data:{req:"AutoComplete",by_id:e.ids,mode:"all",term:e.term,matches_only:!0}},t)},buttons:[{Render:gc.V_,props:{period:function(){return[t.initialValues.start,t.initialValues.end]},assignmentId:t.initialValues.obj_id,groupId:t.initialValues.group_id},onChange:function(e,t){var n=t.note,r=t.amount_in_use;return void 0!==n&&(e.note=n),void 0!==r&&(e.amount_in_use=r),e}}]}],t._prepFields(t.initialValues),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("resources/set_use",Object.assign(e))}}])&&bc(t.prototype,n),r&&bc(t,r),i}(st.I);function Dc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Rc(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Rc(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function zc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mc(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fc(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var qc,Xc,Lc,Uc,Vc=(Oc=u.action.bound,kc=u.action.bound,xc=u.action.bound,Sc=u.action.bound,jc=u.action.bound,Pc=Fc((Cc=function(){function e(t){var n=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Nc(this,"allUses",Pc,this),Nc(this,"id",Zc,this),Nc(this,"name",Bc,this),Nc(this,"type",Tc,this),Nc(this,"fcTitle",Ec,this),Nc(this,"ready",Ic,this),Mc(this,"calendarRef",{current:null}),Mc(this,"viewType","month"),Mc(this,"viewTypes",{month:"dayGridMonth",week:"timeGridWeek",day:"timeGridDay"}),Mc(this,"todayDisabled",!1),Mc(this,"title",null),(0,u.makeObservable)(this),this.nav=n,this.ready=!0}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=this,n=Dc(e,2),r=n[0],o=n[1];switch(this.title="resource"===r?lng("resource planning"):lng("resource bundle planning"),this.id=o,this.type=r,this.name="",this.type){case"resource":this.id&&(0,C.SC)("resources/list_resource_planning_resources",{data:{resource_id:this.id}},(function(e){t.name=e.resource_name,t.allUses=e.items}));break;case"bundle":(0,C.SC)("resources/list_resource_planning_bundles",{data:{group_id:this.id}},(function(e){t.allUses=e.items,t.name=e.group_name}))}}},{key:"updateFromFC",value:function(e){this.fcTitle=e.title}},{key:"updateNav",value:function(){this.nav([],{replace:!0})}},{key:"getEvents",value:function(e,t){var n={start:e.start.getTime()/1e3,end:e.end.getTime()/1e3};(0,C.SC)("calendar/get_resource_planning",{data:n},(function(e){var n=e.map((function(e){var t=e.id,n=e.allDay,r=e.title,o=e.start,i=e.end,a=e.backgroundColor,l=e.resources,s=e.group_id,c=e.event_date,u=e.start_time,p=e.end_time;return{id:t,allDay:n,title:r+=Object.values(l).map((function(e){return" ".concat(e.label,"(").concat(e.amount_in_use,")")})),backgroundColor:a,start:o,end:i,durationEditable:!1,startEditable:!1,extendedProps:{resources:l,group_id:s,date:c,start_time:u,end_time:p}}}));t(n.filter((function(e){return!!e})))}))}},{key:"eventClick",value:function(e){var t=this;ep().openDialog("form",new Ac({data:{obj_id:e.event.id,obj_type:"Meeting",resources:e.event.extendedProps.resources,group_id:e.event.extendedProps.group_id,start:e.event.extendedProps.date+" "+e.event.extendedProps.start_time,end:e.event.extendedProps.date+" "+e.event.extendedProps.end_time},onSaveSuccess:function(){return ep().closeDialog(),t.calendarRef.current.refresh()}}))}},{key:"changeDate",value:function(e){this.calendarRef.current.gotoDate((0,B.GG)(e,{format:"YYYY-MM-DD"}))}}])&&zc(t.prototype,n),r&&zc(t,r),e}()).prototype,"allUses",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Zc=Fc(Cc.prototype,"id",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Bc=Fc(Cc.prototype,"name",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Tc=Fc(Cc.prototype,"type",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ec=Fc(Cc.prototype,"fcTitle",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Ic=Fc(Cc.prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Fc(Cc.prototype,"updateRoute",[u.action],Object.getOwnPropertyDescriptor(Cc.prototype,"updateRoute"),Cc.prototype),Fc(Cc.prototype,"updateFromFC",[Oc],Object.getOwnPropertyDescriptor(Cc.prototype,"updateFromFC"),Cc.prototype),Fc(Cc.prototype,"updateNav",[kc],Object.getOwnPropertyDescriptor(Cc.prototype,"updateNav"),Cc.prototype),Fc(Cc.prototype,"getEvents",[xc],Object.getOwnPropertyDescriptor(Cc.prototype,"getEvents"),Cc.prototype),Fc(Cc.prototype,"eventClick",[Sc],Object.getOwnPropertyDescriptor(Cc.prototype,"eventClick"),Cc.prototype),Fc(Cc.prototype,"changeDate",[jc],Object.getOwnPropertyDescriptor(Cc.prototype,"changeDate"),Cc.prototype),Cc),Hc=n(84943),Gc=n(40965);function Jc(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Wc(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Kc(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var $c,Yc,Qc,eu,tu,nu,ru,ou,iu,au,lu,su=(Xc=Kc((qc=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Jc(this,"ready",Xc,this),Jc(this,"url",Lc,this),Jc(this,"post",Uc,this),(0,u.makeObservable)(this),this.fetch()}var t,n,r;return t=e,(n=[{key:"fetch",value:function(){var e=this;(0,C.SC)("generic/t2k_echo_overview",{},(function(t){e.url=t.url,e.post=t.post,e.ready=!0}))}}])&&Wc(t.prototype,n),r&&Wc(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Lc=Kc(qc.prototype,"url",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Uc=Kc(qc.prototype,"post",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),qc);function cu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uu(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function pu(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function du(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function fu(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var mu=($c=u.action.bound,Qc=fu((Yc=function(){function e(t){var n=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),pu(this,"ready",Qc,this),pu(this,"listId",eu,this),pu(this,"assignmentId",tu,this),pu(this,"activePlayItem",nu,this),pu(this,"createMode",ru,this),pu(this,"editDetailsDrawer",ou,this),pu(this,"playlist",iu,this),pu(this,"displayComments",au,this),pu(this,"list",lu,this),(0,u.makeObservable)(this),this.nav=n}var t,n,r;return t=e,(n=[{key:"updateRoute",value:function(e){var t=cu(e,1)[0],n=t.list,r=t.id;"edit"===r?this.editDetailsDrawer=!0:this.assignmentId=r,this.listId!==n&&(this.listId=n,this.fetch())}},{key:"fetch",value:function(){var e=this;(0,C.SC)("channel/playlist",{data:{id:this.listId}},(function(t){e.playlist=new Cn.g(t),e.ready=!0}))}},{key:"updatePlaylist",value:function(e){this.playlist.updatePlaylist(e)}},{key:"toggleCreateMode",value:function(e){if(!1===e||!0===e)return this.createMode=e;this.createMode=!this.createMode}},{key:"toggleEditPlaylistDetails",value:function(){this.editDetailsDrawer=!this.editDetailsDrawer}},{key:"toggleComments",value:function(){this.displayComments=!this.displayComments}},{key:"assignmentPlaying",get:function(){var e=this,t=this.playlistItems.find((function(t){return t.assignment_id==e.assignmentId}));return!!t&&(this.activePlayItem=parseInt(t.assignment_id),t)}},{key:"playlistItems",get:function(){return this.playlist.items}},{key:"playlistTitle",get:function(){return this.playlist.title}}])&&du(t.prototype,n),r&&du(t,r),e}()).prototype,"ready",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),eu=fu(Yc.prototype,"listId",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),tu=fu(Yc.prototype,"assignmentId",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),nu=fu(Yc.prototype,"activePlayItem",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),ru=fu(Yc.prototype,"createMode",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),ou=fu(Yc.prototype,"editDetailsDrawer",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),iu=fu(Yc.prototype,"playlist",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),au=fu(Yc.prototype,"displayComments",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),lu=fu(Yc.prototype,"list",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),fu(Yc.prototype,"assignmentPlaying",[u.computed],Object.getOwnPropertyDescriptor(Yc.prototype,"assignmentPlaying"),Yc.prototype),fu(Yc.prototype,"playlistItems",[u.computed],Object.getOwnPropertyDescriptor(Yc.prototype,"playlistItems"),Yc.prototype),fu(Yc.prototype,"playlistTitle",[u.computed],Object.getOwnPropertyDescriptor(Yc.prototype,"playlistTitle"),Yc.prototype),fu(Yc.prototype,"updatePlaylist",[$c],Object.getOwnPropertyDescriptor(Yc.prototype,"updatePlaylist"),Yc.prototype),Yc),gu=n(71612);function hu(e){return(hu="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bu(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function yu(e,t){return(yu=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function vu(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=wu(e);if(t){var o=wu(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(e,t){return!t||"object"!==hu(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function wu(e){return(wu=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ou=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&yu(e,t)}(i,e);var t,n,r,o=vu(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).params=e,t.confirmButtonLabel=!1,e.close_is_decline&&(t.headExtra=(0,q.tZ)(cr.JO,{buttonLike:!0,icon:"close",onClick:function(){return t.save({val:0})}})),t.title=e.text.title||"",t._fields=[{type:"component",node:(0,q.tZ)(Gc.x,{content:e.text.content})},{type:"row_set",fields:[{type:"component",node:(0,q.BX)("div",{children:[e.text.accept?(0,q.tZ)(z.l,{onClick:function(){return t.save({val:1})},theme:"contained",children:e.text.accept}):null," ",e.text.decline?(0,q.tZ)(z.l,{onClick:function(){return t.save({val:0})},style:{color:N.g.colors.negative},children:e.text.decline}):null]})}]}],t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.ready&&this.saveToUrl("users/consent",Object.assign({type:"eula"},e))}},{key:"SaveSuccess",value:function(){this.ready=!1,location.reload()}}])&&bu(t.prototype,n),r&&bu(t,r),i}(st.I),ku=n(29523);function xu(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Su(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Su(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Su(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var ju,Cu,Pu,Zu,Bu,Tu,Eu,Iu,Au,Du,Ru,Nu,zu,Mu,Fu={name:"hobrju",styles:"width:100%;display:block;padding:5px 10px;>*{width:100%;}"},qu=function(){var e=xu((0,p.useState)(!1),2),t=e[0],n=e[1],r={en_US:"Continue in english",he_IL:"המשך בעברית",es_ES:"Continuar en español",pt_BR:"Continue em português",de_DE:"Weiter auf deutsch",fr_FR:"Continuer en français",vi_VN:"Tiếp tục bằng tiếng việt",ru_RU:"Продолжить на русском",hi_IN:"हिंदी में जारी रखें",ar_SA:"تواصل بالعربية"},o=Object.keys(Blsm.lang.available),i=Fu,a=function(e){var t=e.langCode;return(0,q.tZ)("div",{css:i,children:(0,q.tZ)(z.l,{onClick:function(){return e=t,n(!0),void(0,ku.rt)(e);var e},theme:"contained",children:r[t]||t})})};return t?(0,q.tZ)(Ke.$,{}):(0,q.tZ)("div",{children:o.map((function(e){return(0,q.tZ)(a,{langCode:e},e)}))})},Xu=["type"];function Lu(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return Uu(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Uu(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Uu(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Vu(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function Hu(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function Gu(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ju(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Wu(e,t,n){return t&&Ju(e.prototype,t),n&&Ju(e,n),e}function Ku(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $u(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var Yu=(0,p.createContext)(null),Qu=null,ep=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0;return Qu=Qu||e&&new np};window.mainStoreInstance=ep;var tp=function(e){return(0,d.DM)(e)?(0,d.Kn)(e)?(0,d.Wh)((0,d.v7)(e),!0):e:""},np=(ju=u.observable.shallow,Cu=u.action.bound,Pu=u.action.bound,Bu=$u((Zu=function(){function e(){var t=this;Gu(this,e),Ku(this,"sideMenuStore",null),Ku(this,"notificationsStore",null),Ku(this,"user",Object.assign({},Blsm.user)),Hu(this,"hierarchy_button_show",Bu,this),Ku(this,"_stores",new Map),Hu(this,"mainRoute",Tu,this),Hu(this,"overlayRoute",Eu,this),Hu(this,"mainDialog",Iu,this),Hu(this,"inbox_unread_count",Au,this),Ku(this,"_curRoute",[]),Ku(this,"_curHash",""),Ku(this,"_mainRouteWindowTitle",null),Ku(this,"restoreOldRoute",!1),Hu(this,"componentSideDrawer",Du,this),Ku(this,"dirtyStore",null),Ku(this,"formPassData",null),Hu(this,"showGlobalLoader",Ru,this),Hu(this,"startTime",Nu,this),Ku(this,"history",[]),(0,u.makeObservable)(this),this.startTime=moment(),this.inbox_unread_count=Blsm.InitialData.inbox_unread_count,this.sideMenuStore=new S({mainStore:this}),this.notificationsStore=new Se,this.searchStore=new yo.Z({nav:function(e,n){return t._buildNav("search",e,n)}}),this._curHash=(0,d.VD)(),this._loadUrl(),window.addEventListener("hashchange",(function(){return t.loadNewHash()})),Blsm.InitialData.show_login_popup&&setTimeout((function(){return(0,Ue.cS)((0,q.tZ)(Gc.x,{content:Blsm.InitialData.login_popup}),{inputType:Blsm.InitialData.login_popup_show_dont_show_again?"checkbox":"hidden",inputOptions:{label:lng("don't show again").caps()},title:lng("message"),cancelText:"",onConfirm:function(e){return(0,C.SC)("users/dismiss_login_popup",{method:"POST",data:{login_popup_hide:e}})}})}),1e3),Blsm.InitialData.action&&this.handleActionFromServer(Blsm.InitialData.action)}return Wu(e,[{key:"loadNewHash",value:function(){var e=this,t=(0,d.VD)();if(this._curHash!==t){var n,r,o,i,a,l,s,c,u=function(){e._curHash=t,e._loadUrl()};if(null!==(n=this.dirtyStore)&&void 0!==n&&null!==(r=n.formObj)&&void 0!==r&&r.dirty||null!==(o=this.dirtyStore)&&void 0!==o&&null!==(i=o.formObj)&&void 0!==i&&i.alertBeforeClose)(0,Ue.BB)(null!==(a=this.dirtyStore)&&void 0!==a&&null!==(l=a.formObj)&&void 0!==l&&l.dirty?lng("there are unsaved changes, are you sure you want to close the dialog?").caps():null===(s=this.dirtyStore)||void 0===s||null===(c=s.formObj)||void 0===c?void 0:c.alertBeforeClose,{title:lng("discard changes"),confirmText:lng("close without saving").caps(),onConfirm:u,onCancel:function(){return(0,d.Y3)((function(){return e.nav(e._curHash,{replace:!0,trigger:!1})}))}});else u()}}},{key:"storeKey",value:function(e,t){var n=e;return t&&(n+=":"+((0,d.Kn)(t)?(0,d.SZ)(t):t)),n}},{key:"hasStore",value:function(e,t){return this._stores.has(this.storeKey(e,t))}},{key:"invalidateStore",value:function(e,t){var n=this.storeKey(e,t);if(this._stores.has(n)){var r,o=this._stores.get(n);this._stores.delete(n),(0,u.isObservableProp)(o,"ready")&&!(0,u.isComputedProp)(o,"ready")&&(o.ready=!1),null===(r=o.invalidate)||void 0===r||r.call(o)}}},{key:"getStore",value:function(e,t){var n=this,r=this.storeKey(e,t);if(this._stores.has(r))return this._stores.get(r);var o,i={withNav:{home:us,messages:Br.Ou,calendar:Tr.m,edit:Re,list:Xe,import:Al,reports:ps.E,dashboard:ds.EK,cregistration:fs.iS,catalog:ms.Z,yearly:Hc.I,t2k_echo:su,portal:b.fm,category_tree:mc,resourceplanning:Vc,challenges:Sn,play:mu,library:gu.U},withNavAndId:{workspace:Ce.J,user:Zr},withId:{comments:j.pE,master:ws},other:{sql:mo,board:To}},a=null;return(o=i.withNav[e])?a=new o({nav:function(t,r){return n._buildNav(e,t,r)},mainStore:this}):(o=i.withNavAndId[e])?a=new o({id:t,nav:function(r,o){return n._buildNav(e+"/"+t,r,o)}}):(o=i.withId[e])?a=new o(t):(o=i.other[e])?a=new o:"test"===e&&(a={}),a?(this._stores.set(r,a),a):void 0}},{key:"_buildNav",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.reload,o=n.trigger,i=n.replace;if(r)return this._loadUrl({reload:!0});var a=Array.isArray(t)?t.map(tp).join("/").replace(/\/+$/g,""):"";this.nav(e+(e&&a?"/":"")+a,{trigger:o,replace:i})}},{key:"nav",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.trigger,r=void 0===n||n,o=t.replace,i=e.trimStart();o?location.replace("#"+i):location.href="#"+i,this._curHash=(0,d.VD)(),r&&this._loadUrl()}},{key:"_loadUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._curRoute=this.splitHash(this._curHash),this.dirtyStore=null,this.componentSideDrawer=null;var t=this._curRoute[0];if("user"!==t||this._curRoute[1]||(this._curRoute[1]=Blsm.user.id),this.checkMissingFields()||this.checkEULAConsent()||this.checkChooseLanguage())this.overlayRoute.replace(this._curRoute);else{this.addToHistory(this._curHash),this.sideMenuStore.updateRoute(this._curRoute),"edit"!==t&&this.invalidateStore("edit"),"search"!==t&&this.searchStore.clear();var n=["home","messages","workspace","groups","user","edit","list","calendar","sql","search","import","reports","dashboard","cregistration","catalog","portal","category_tree","test","resourceplanning","yearly","challenges","t2k_echo","play","library"];if("edit"===t&&["task","discussion","share","share_by_mail"].includes(this._curRoute[1])||"master"===t){this._mainRouteWindowTitle=document.title,this.overlayRoute.replace(this._curRoute);var r="master"===t?(0,d.B5)(this._curRoute[1]):void 0;this.getStore(t,r).updateRoute(this._curRoute.slice(1),e),"edit"===t&&(this.dirtyStore=this.getStore(t))}else n.includes(t)?($("#v5_page").show(),this.overlayRoute.clear(),this.mainRoute.replace(this._curRoute),"search"===t?this.searchStore.updateRoute(this._curRoute.slice(1),Object.assign(e,{skipFetch:!!this.restoreOldRoute})):["sql"].includes(t)?this.getStore(t):["home","messages","edit","list","calendar","import","reports","dashboard","cregistration","catalog","library","portal","category_tree","resourceplanning","yearly","challenges","channel","play"].includes(t)?this.getStore(t).updateRoute(this._curRoute.slice(1),e):["workspace","user"].includes(t)&&this.getStore(t,this._curRoute[1]).updateRoute(this._curRoute.slice(2),e),"edit"===t&&(this.dirtyStore=this.getStore(t))):Blsm.user.id&&Blsm.InitialData.main_menu.portal?this.nav("portal",{replace:!0}):Blsm.user.id&&this.nav("home",{replace:!0});this.restoreOldRoute=!1}}},{key:"splitHash",value:function(e){return e.split("/").map((function(e){return e.includes("=")?$.deparam(e):e}))}},{key:"closeOverlay",value:function(e){null!==this._mainRouteWindowTitle&&(document.title=this._mainRouteWindowTitle,this._mainRouteWindowTitle=null),this.overlayRoute.clear(),this.restoreOldRoute=!0,this.mainRoute.length>0?this._buildNav("",(0,u.toJS)(this.mainRoute)):this._buildNav(e||"",[])}},{key:"openCommentsDialog",value:function(e){this.openDialog("comments",this.getStore("comments",e))}},{key:"openDialog",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.mainDialog.data=t,this.mainDialog.options=n,this.mainDialog.closeConfirm=!1,this.mainDialog.dialog=e,document.getElementsByTagName("body")[0].style.overflow=""}},{key:"closeDialog",value:function(){this.mainDialog.dialog=!1}},{key:"showSideDrawer",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.componentSideDrawer=e?{component:e,options:t}:null}},{key:"pretend",value:function(e){var t=this;this.showGlobalLoader=!0,(0,C.SC)("generic/pretend/"+e,{onError:(0,u.action)((function(){return t.showGlobalLoader=!1}))},(function(){return location.reload()}))}},{key:"addToHistory",value:function(e){this.history.unshift(e),this.history=this.history.slice(0,4)}},{key:"searchHistory",value:function(e){var t=this,n=!1;return this.history.some((function(r){var o=t.splitHash(r);if(e(o))return n=function(){return t.nav(r)},!0})),n}},{key:"handleActionFromServer",value:function(e){var t=e.type,n=Vu(e,Xu);if("meeting_attendance"===t){var r=function(){(0,m.p4)({workspace:n.group_id,components:!0},!0),Blsm.Success(lng('setting attendance for "%s"',[n.assignment_name]))};n.signature_needed?(0,Ue.cS)("",{title:n.assignment_name,inputType:"signpad",inputRequired:!0,inputOptions:{label:lng("sign here to confirm attendance").caps()},confirmText:lng("submit"),onConfirm:function(e){return(0,C.SC)("meetings/verify_attendance/"+(0,d.$t)((0,d.ei)(n,["group_id","assignment_id","origin_user_id"])),{method:"POST",data:{signature:e}},(function(){return r()}))}}):r()}}},{key:"checkMissingFields",value:function(){var e=Blsm.InitialData.MissingMandatoryFields;if((null==e?void 0:e.length)>0){if(!("edit"===this._curRoute[0]&&"user"===this._curRoute[1]&&this._curRoute[2]==Blsm.user.id))return this.missingTimeoutHandler=!1,this.nav("edit/user/"+Blsm.user.id),!0;this.missingTimeoutHandler||(this.missingTimeoutHandler=setTimeout((function(){var t,n=[],r=Lu(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push((0,Ve.X)(o))}}catch(e){r.e(e)}finally{r.f()}(0,P.LB)({msg:lng("in order to continue, please fill in the necessary fields in your profile.")+" ("+n.join(", ")+")",closeOnClick:!0,type:"warning"})}),500))}return!1}},{key:"checkEULAConsent",value:function(){var e;return!(!Blsm.InitialData.EulaReplyRequired||null!==(e=Blsm.user)&&void 0!==e&&e.real_data)&&(this.openDialog("form",new Ou(Blsm.InitialData.EulaReplyRequired,{onClose:!1}),{hideX:!0}),!0)}},{key:"checkChooseLanguage",value:function(){var e;return!(!Blsm.isFeatureEnabled("first_login_language")||Blsm.lang.user_language||null!==(e=Blsm.user)&&void 0!==e&&e.real_data)&&(this.openDialog("Component",{child:(0,q.tZ)(qu,{}),title:lng("welcome, please select the system language").caps()},{hideX:!0}),!0)}},{key:"selfUserStore",get:function(){return ep().hasStore("user",Blsm.user.user_id)?this.getStore("user",Blsm.user.user_id):null}}]),e}()).prototype,"hierarchy_button_show",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tu=$u(Zu.prototype,"mainRoute",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Eu=$u(Zu.prototype,"overlayRoute",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Iu=$u(Zu.prototype,"mainDialog",[ju],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{dialog:!1,data:null,closeConfirm:!1,options:{hideX:!1}}}}),Au=$u(Zu.prototype,"inbox_unread_count",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Du=$u(Zu.prototype,"componentSideDrawer",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Ru=$u(Zu.prototype,"showGlobalLoader",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nu=$u(Zu.prototype,"startTime",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),$u(Zu.prototype,"closeOverlay",[Cu],Object.getOwnPropertyDescriptor(Zu.prototype,"closeOverlay"),Zu.prototype),$u(Zu.prototype,"openCommentsDialog",[u.action],Object.getOwnPropertyDescriptor(Zu.prototype,"openCommentsDialog"),Zu.prototype),$u(Zu.prototype,"openDialog",[u.action],Object.getOwnPropertyDescriptor(Zu.prototype,"openDialog"),Zu.prototype),$u(Zu.prototype,"closeDialog",[Pu],Object.getOwnPropertyDescriptor(Zu.prototype,"closeDialog"),Zu.prototype),$u(Zu.prototype,"showSideDrawer",[u.action],Object.getOwnPropertyDescriptor(Zu.prototype,"showSideDrawer"),Zu.prototype),$u(Zu.prototype,"pretend",[u.action],Object.getOwnPropertyDescriptor(Zu.prototype,"pretend"),Zu.prototype),Zu),rp=new(Mu=$u((zu=function(){function e(){Gu(this,e),Hu(this,"events",Mu,this),Ku(this,"keep",{}),(0,u.makeObservable)(this)}return Wu(e,[{key:"on",value:function(e,t){return(0,u.observe)(this.events,e,(function(e){return t((0,u.toJS)(e.newValue))}))}},{key:"trigger",value:function(e,t){this.events[e]=t}},{key:"once",value:function(e,t){console.warn("calling disposer",this.keep[e]),(0,d.g4)(this.keep[e]);var n=this.on(e,t);return this.keep[e]=n,n}}]),e}()).prototype,"events",[u.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{commentsUpdateCount:null,TaskUpdate:null,TaskDelete:null,DiscussionDelete:null,DiscussionCreate:null,FolderTree:null,FetchNotifications:null}}}),zu)},98075:function(e,t,n){"use strict";n.d(t,{k:function(){return P},w:function(){return Z}});var r,o,i,a,l,s,c,u,p,d,f,m=n(27821),g=n(98e3),h=n(55832),b=n(23838),y=n(88989),v=n(71134);function _(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=O(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||O(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){if(e){if("string"==typeof e)return k(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?k(e,t):void 0}}function k(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function x(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function S(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var P=function(e){e.bookmarked=!e.bookmarked,(0,g.SC)("bookmarks",{method:"POST",data:{type:"task",id:e.task_id,delete:e.bookmarked?"0":"1"}})},Z=(o=C((r=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),x(this,"ready",o,this),x(this,"_tab",i,this),x(this,"tabs",a,this),x(this,"new_tasks",l,this),x(this,"updated_tasks",s,this),x(this,"my_tasks",c,this),x(this,"bookmark_tasks",u,this),x(this,"resolution_numbers",p,this),x(this,"recent_tasks",d,this),x(this,"filterNsort",f,this),j(this,"tabKeys",["new","updated","my","bookmarks","archive"]),j(this,"_internalNav",!1),j(this,"timestamp",void 0),j(this,"group_image",void 0),(0,m.makeObservable)(this),this.nav=r,this.fetch();var g=(0,v.Ds)((function(){return n.updateNav()}),500),h=function(){n._internalNav||g()};(0,m.observe)(this.filterNsort.new,h),(0,m.observe)(this.filterNsort.updated,h),(0,m.observe)(this.filterNsort.my,h),(0,m.observe)(this.filterNsort.bookmarks,h),b.Nd.on("TaskUpdate",(function(e){var t,r=null===(t=n.my_tasks)||void 0===t?void 0:t.find((function(t){return t.task_id==e.id}));if(r)for(var o=0,i=Object.entries(e.task);o<i.length;o++){var a=w(i[o],2),l=a[0],s=a[1];Object.prototype.hasOwnProperty.call(r,l)&&(0,m.set)(r,l,s)}}))}var t,n,r;return t=e,(n=[{key:"fetch",value:function(){var e=this;this.ready=!1;var t=(y.X.get("recent_tasks_"+Blsm.user.id)||[]).join(",");(0,g.SC)("tasks/page",{data:{recent_tasks:t}},(0,m.action)((function(t){e.new_tasks=t.new_tasks||[],e.updated_tasks=t.updated_tasks||[],e.my_tasks=t.my_tasks||[],e.bookmark_tasks=t.bookmark_tasks||[],e.recent_tasks=t.recent_tasks||[],e.resolution_numbers=t.resolution_numbers||[],e.timestamp=t.timestamp,e.group_image=t.group_image,e.ready=!0,e.setTabs()})))}},{key:"refresh",value:function(){var e=this;(0,g.SC)("tasks/page",{data:{t:this.timestamp,idCheck:this.gatherTaskIds()}},(function(t){e.timestamp=t.timestamp;for(var n=0,r=["new_tasks","updated_tasks","my_tasks","bookmark_tasks"];n<r.length;n++){var o,i=r[n];if(null!==(o=t[i])&&void 0!==o&&o.length){var a,l=_(t[i]);try{for(l.s();!(a=l.n()).done;){var s=a.value;s.shownAt=e.timestamp,e.removeTaskFromList(i,s.task_id),s.relevant&&e[i].unshift(s)}}catch(e){l.e(e)}finally{l.f()}}}e.setTabs()}))}},{key:"removeTaskFromList",value:function(e,t){this[e].remove(this[e].find((function(e){return e.task_id==t})))}},{key:"setTabs",value:function(){this.tabs=[],this.new_tasks.length&&this.tabs.push({val:"new",label:lng("new")}),this.updated_tasks.length&&this.tabs.push({val:"updated",label:lng("updated")}),this.tabs.push({val:"my",label:lng("my tasks",{phrase:!0})},{val:"bookmarks",label:lng("bookmarks")}),Blsm.user.preferences.show_project_boards&&this.tabs.push({val:"board",label:lng("boards")}),this.tabKeys=this.tabs.map((function(e){return e.val}))}},{key:"updateNav",value:function(){var e,t,n;if(!this._internalNav){var r=(null===(e=this.filterNsort)||void 0===e?void 0:e[this.tab])||{},o={filters:(0,m.toJS)(r.filter),sort:null===(t=r.sort)||void 0===t?void 0:t.by,reverse:null!==(n=r.sort)&&void 0!==n&&n.desc?1:void 0};this.nav([this._tab,o],{replace:!0})}}},{key:"updateRoute",value:function(e){var t=w(e,2),n=t[0],r=t[1];this._tab=n,this._updateFromUrl(r)}},{key:"_updateFromUrl",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={filter:e.filters||{},sort:{by:e.sort||"",desc:"1"===e.reverse}};this._internalNav=!0,this.filterNsort[this.tab]&&(0,m.set)(this.filterNsort[this.tab],t),this._internalNav=!1}},{key:"addToRecentTasks",value:function(e){var t=e.task_id,n=e.task_title,r=e.task_resolution,o=e.status_name,i=e.assignee_name;this.recent_tasks=this.recent_tasks.filter((function(e){return e.task_id!=t})),this.recent_tasks.unshift({task_id:t,task_title:n,task_resolution:r,status_name:o,assignee_name:i})}},{key:"gatherTaskIds",value:function(){return{new_tasks:this.new_tasks.map((function(e){return e.task_id})).join("_"),updated_tasks:this.updated_tasks.map((function(e){return e.task_id})).join("_"),my_tasks:this.my_tasks.map((function(e){return e.task_id})).join("_"),bookmark_tasks:this.bookmark_tasks.map((function(e){return e.task_id})).join("_")}}},{key:"tab",get:function(){return this._tab&&this.tabKeys.includes(this._tab)?this._tab:this.tabKeys[0]},set:function(e){this._tab=e,this.updateNav()}},{key:"filteredNewTasks",get:function(){return(0,h.WB)(this.new_tasks,this.filterNsort.new.filter,this.filterNsort.new.sort)}},{key:"filteredUpdatedTasks",get:function(){return(0,h.WB)(this.updated_tasks,this.filterNsort.updated.filter,this.filterNsort.updated.sort)}},{key:"filteredMyTasks",get:function(){return(0,h.WB)(this.my_tasks.filter((function(e){return e.allocated_to==Blsm.user.id})),this.filterNsort.my.filter,this.filterNsort.my.sort)}},{key:"filteredBookmarksTasks",get:function(){return(0,h.WB)(this.bookmark_tasks,this.filterNsort.bookmarks.filter,this.filterNsort.bookmarks.sort)}},{key:"tabsWithCounters",get:function(){var e=this;return this.tabs.map((function(t){switch(t.val){case"new":t.badge=e.filteredNewTasks.length;break;case"updated":t.badge=e.filteredUpdatedTasks.length;break;case"my":t.badge=e.filteredMyTasks.length;break;case"bookmarks":t.badge=e.filteredBookmarksTasks.length}return t}))}}])&&S(t.prototype,n),r&&S(t,r),e}()).prototype,"ready",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),i=C(r.prototype,"_tab",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),a=C(r.prototype,"tabs",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),l=C(r.prototype,"new_tasks",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),s=C(r.prototype,"updated_tasks",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),c=C(r.prototype,"my_tasks",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),u=C(r.prototype,"bookmark_tasks",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),p=C(r.prototype,"resolution_numbers",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=C(r.prototype,"recent_tasks",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),f=C(r.prototype,"filterNsort",[m.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{new:(0,h.Cy)(),updated:(0,h.Cy)(),my:(0,h.Cy)(),bookmarks:(0,h.Cy)()}}}),C(r.prototype,"refresh",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"refresh"),r.prototype),C(r.prototype,"setTabs",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"setTabs"),r.prototype),C(r.prototype,"tab",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"tab"),r.prototype),C(r.prototype,"updateRoute",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"updateRoute"),r.prototype),C(r.prototype,"_updateFromUrl",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"_updateFromUrl"),r.prototype),C(r.prototype,"filteredNewTasks",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"filteredNewTasks"),r.prototype),C(r.prototype,"filteredUpdatedTasks",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"filteredUpdatedTasks"),r.prototype),C(r.prototype,"filteredMyTasks",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"filteredMyTasks"),r.prototype),C(r.prototype,"filteredBookmarksTasks",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"filteredBookmarksTasks"),r.prototype),C(r.prototype,"tabsWithCounters",[m.computed],Object.getOwnPropertyDescriptor(r.prototype,"tabsWithCounters"),r.prototype),C(r.prototype,"addToRecentTasks",[m.action],Object.getOwnPropertyDescriptor(r.prototype,"addToRecentTasks"),r.prototype),r)},60421:function(e,t,n){"use strict";n.d(t,{J:function(){return eo}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h=n(27821),b=n(98e3),y=n(23838),v=n(55832),_=n(71134);function w(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function S(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var j,C,P,Z,B=(r=h.action.bound,o=h.action.bound,i=h.action.bound,l=S((a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.assignment_id,r=t.question,o=t.choices,i=t.answered,a=t.results,b=t.due_date,y=t.past,v=t.assignment_options,_=t.assignment_owner,k=arguments.length>1?arguments[1]:void 0;O(this,e),x(this,"workspaceStore",null),w(this,"assignment_id",l,this),w(this,"assignment_owner",s,this),w(this,"question",c,this),w(this,"choices",u,this),w(this,"due_date",p,this),w(this,"assignment_options",d,this),w(this,"past",f,this),w(this,"answered",m,this),w(this,"results",g,this),(0,h.makeObservable)(this),Object.assign(this,{assignment_id:n,question:r,answered:i,due_date:b,past:y,assignment_options:v,assignment_owner:_,workspaceStore:k}),this.choices.replace(o),Array.isArray(a)&&this.results.replace(a)}var t,n,r;return t=e,(n=[{key:"vote",value:function(e){this.answered=e,this.results[e]++,(0,b.SC)("poll",{method:"POST",data:{id:this.assignment_id,answer:e}})}},{key:"save",value:function(e,t){var n=this;this.assignment_id?(0,b.SC)("poll/id="+this.assignment_id,{method:"POST",data:e},(function(){Object.assign(n,(0,_.ei)(e,["question","assignment_options","due_date"])),n.choices.replace(Object.values(e.choices));var r=n.results.length;n.results.length=n.choices.length,n.results.fill(0,r,n.results.length),null==t||t()})):(0,b.SC)("poll/group="+e.group_id,{method:"POST",data:e},(function(r){Object.assign(n,(0,_.ei)(e,["question","assignment_options","due_date"]),(0,_.ei)(r,["assignment_id","assignment_type","assignment_owner","creation_time"])),n.choices.replace(Object.values(e.choices)),n.results.length=n.choices.length,n.results.fill(0),null==t||t()}))}},{key:"delete",value:function(e){(0,b.SC)("poll",{method:"DELETE",data:{ids:e}})}},{key:"isAnswered",get:function(){return null!==this.answered&&void 0!==this.answered}},{key:"mayEdit",get:function(){var e=!1;return((0,_.Tz)(this.assignment_owner)||Blsm.user.isPowerManager||this.workspaceStore.permissions&&this.workspaceStore.permissions[Blsm.ManagerPermissions.CREATE_ASSIGNMENTS])&&(e=!0),e}}])&&k(t.prototype,n),r&&k(t,r),e}()).prototype,"assignment_id",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),s=S(a.prototype,"assignment_owner",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),c=S(a.prototype,"question",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),u=S(a.prototype,"choices",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),p=S(a.prototype,"due_date",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),d=S(a.prototype,"assignment_options",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),f=S(a.prototype,"past",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),m=S(a.prototype,"answered",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=S(a.prototype,"results",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),S(a.prototype,"vote",[r],Object.getOwnPropertyDescriptor(a.prototype,"vote"),a.prototype),S(a.prototype,"save",[o],Object.getOwnPropertyDescriptor(a.prototype,"save"),a.prototype),S(a.prototype,"delete",[i],Object.getOwnPropertyDescriptor(a.prototype,"delete"),a.prototype),S(a.prototype,"isAnswered",[h.computed],Object.getOwnPropertyDescriptor(a.prototype,"isAnswered"),a.prototype),a),T=n(9934),E=n(68567),I=n(6401),A=n(62115),D=n(87327),R=n(37659),N=n(88116),z=n(22906);function M(e){return(M="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function L(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U(this,n)}}function U(e,t){return!t||"object"!==M(t)&&"function"!=typeof t?V(e):t}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return(H=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var W=(j=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(i,e);var t,n,r,o=L(i);function i(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),G(V(n=o.call(this,e)),"workspace",void 0),G(V(n),"parent_unit",void 0),F(V(n),"active",C,V(n)),F(V(n),"countItems",P,V(n)),F(V(n),"sub_units",Z,V(n)),(0,h.makeObservable)(V(n)),n.workspace=null==t?void 0:t.workspace,n.parent_unit=null==t?void 0:t.parent_unit,!n.parent_unit&&e.sub_units&&(n.sub_units=e.sub_units.map((function(e){return new i(e,{workspace:n.workspace,parent_unit:V(n)})}))),n}return t=i,(n=[{key:"activate",value:function(){var e;this.active=!0,null===(e=this.parent_unit)||void 0===e||e.activate()}},{key:"deactivate",value:function(){var e;this.active=!1,null===(e=this.parent_unit)||void 0===e||e.deactivate()}},{key:"unit_id",get:function(){return parseInt(this._attr.unit_id)}},{key:"name",get:function(){return this._attr.unit_name}},{key:"count",set:function(e){this.countItems=e},get:function(){return this.countItems}},{key:"fullCount",get:function(){return this.sub_units.reduce((function(e,t){return e+t.count}),this.countItems)}},{key:"isCompleted",get:function(){if(!this.sub_units)return this.completed;var e=this.sub_units.length>0&&this.sub_units.every((function(e){return e.completed}));return this.parent_unit?this.completed||e:(0===this.countItems||this.completed)&&e}}])&&q(t.prototype,n),r&&q(t,r),i}(z.JH),C=J(j.prototype,"active",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),P=J(j.prototype,"countItems",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),Z=J(j.prototype,"sub_units",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),J(j.prototype,"activate",[h.action],Object.getOwnPropertyDescriptor(j.prototype,"activate"),j.prototype),J(j.prototype,"deactivate",[h.action],Object.getOwnPropertyDescriptor(j.prototype,"deactivate"),j.prototype),J(j.prototype,"count",[h.computed],Object.getOwnPropertyDescriptor(j.prototype,"count"),j.prototype),J(j.prototype,"fullCount",[h.computed],Object.getOwnPropertyDescriptor(j.prototype,"fullCount"),j.prototype),J(j.prototype,"isCompleted",[h.computed],Object.getOwnPropertyDescriptor(j.prototype,"isCompleted"),j.prototype),j),K=n(24210),$=n(343),Y=n(35944);function Q(e){return(Q="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var ee=["patient","caseId"];function te(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function re(e,t){return(re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function oe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=le(e);if(t){var o=le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ie(this,n)}}function ie(e,t){return!t||"object"!==Q(t)&&"function"!=typeof t?ae(e):t}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function le(e){return(le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var se=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&re(e,t)}(i,e);var t,n,r,o=oe(i);function i(e){var t,n,r,a,l=e.patient,s=e.caseId,c=te(e,ee);return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,c),n=ae(t),a=null,(r="patient")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.caseId=s,t.title=lng("send message to '%s'","".concat(l.patient_first_name," ").concat(l.patient_last_name)).caps(),t._fields=[{visible:!l.patient_phone,type:"component",node:(0,Y.tZ)("b",{style:{color:$.g.colors.negative},children:lng("patient phone number not specified").caps()})},{type:"text",name:"subject",label:lng("subject"),required:!0},{type:"richtext",name:"message",label:lng("message"),required:!0}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("patient/create_communication",Object.assign({case_id:this.caseId},e))}}])&&ne(t.prototype,n),r&&ne(t,r),i}(K.I),ce=n(88989),ue=n(22334),pe=n(16920),de=n(28904),fe=n(40441),me=n(87363),ge=n(15560),he=n(40676),be=n(29180),ye=n(79793),ve=(n(57882),n(23205)),_e=n(28534);function we(e){return(we="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ke(e,t){return(ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Se(this,n)}}function Se(e,t){return!t||"object"!==we(t)&&"function"!=typeof t?je(e):t}function je(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ce(e){return(Ce=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ze,Be,Te,Ee=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ke(e,t)}(i,e);var t,n,r,o=xe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Pe(je(t=o.call(this,e)),"attendanceUsers",void 0),Pe(je(t),"assignmentId",void 0),Pe(je(t),"groupId",void 0),t.groupId=e.groupId,t.assignmentId=e.assignmentId,t.attendanceUsers=e.attendanceUsers,t.saveUrl="users/verify_password",t.title=lng("approve attendance").caps(),t.confirmButtonLabel=lng("approve attendance").caps(),t._fields=[{type:"component",node:(0,Y.tZ)("b",{children:lng("check-in users will no longer be able to mark self-attendance once attendance has been confirmed.").caps()})},{type:"textarea",name:"optional_text"},Blsm.InitialData.parameters.kiosk_approve_meeting_attendance_signature&&{type:"signpad",name:"signature",required:!0,label:lng("signature")},{type:"password",name:"password",label:lng("type your password to confirm"),required:!0}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign(e))}},{key:"SaveSuccess",value:function(e){if(e.pass){var t=this.values.get("optional_text"),n=this.values.get("password"),r=this.values.get("signature"),o=Object.assign({optional_text:t,password:n,signature:r,assignment:this.assignmentId,group:this.groupId},this.attendanceUsers);(0,b.SC)("meetings/approve_attendance",{method:"POST",data:o},(function(){(0,_e.qV)(lng("attendance approved")),(0,y.vm)().closeDialog()}))}else(0,_e.Mj)(lng("wrong password")),this.status=""}}])&&Oe(t.prototype,n),r&&Oe(t,r),i}(K.I),Ie=n(69637),Ae=n(15940),De=n(60409);function Re(e){return(Re="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ne(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Me(e,t){return(Me=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Fe(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Le(e);if(t){var o=Le(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qe(this,n)}}function qe(e,t){return!t||"object"!==Re(t)&&"function"!=typeof t?Xe(e):t}function Xe(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Le(e){return(Le=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ue(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ve(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var He=(Ze=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Me(e,t)}(i,e);var t,n,r,o=Fe(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Ue(Xe(t=o.call(this,e)),"assignmentId",null),Ue(Xe(t),"groupId",null),Ue(Xe(t),"assignmentUsers",[]),Ne(Xe(t),"showApproveForm",Be,Xe(t)),Ne(Xe(t),"allowSetAttendance",Te,Xe(t)),(0,h.makeObservable)(Xe(t)),t.groupId=e.data.groupId,t.assignmentId=e.data.assignmentId,t.successMessage=lng("attendance saved"),(0,b.SC)("meetings/edit_attendance",{data:{group:t.groupId,assignment:t.assignmentId}},(function(e){var n;t.allowSetAttendance=Blsm.user.isPowerManager||!e.approve_attendance,t.assignmentUsers=(null==e||null===(n=e.assignment_users)||void 0===n?void 0:n.map((function(e){return e[1].disabled=!t.allowSetAttendance,new T.o(e[1],e[1].completed)})))||t.assignmentUsers,t.buildFields(e)})),t}return t=i,(n=[{key:"buildFields",value:function(e){var t=this;this.title="".concat(lng("attendance:")," ").concat(e.assignment_name),this.saveUrl="meetings/save_attendance/",this.headExtra=(0,Y.tZ)(ye.b,{children:Blsm.InitialData.parameters.kiosk_approve_meeting_attendance&&(0,Y.tZ)(Ae.zx,{onClick:function(){e.approve_attendance?(0,E.qR)((0,Y.tZ)(Je,{approve_attendance:e.approve_attendance}),{title:lng("attendance approving details").caps()}):t.showApproveForm=!0},children:e.approve_attendance?lng("approved by").caps()+" "+e.approve_attendance.approver_name:lng("approve attendance").caps()})}),this._fields=[{type:"component",node:(0,Y.tZ)(be.qm,{dateNote:{start:e.start_date,end:e.due_date}})},{type:"component",name:"attendance[]",node:(0,Y.tZ)(We,{assignmentUsers:this.assignmentUsers,allowSetAttendance:this.allowSetAttendance})},{type:"component",node:(0,Y.tZ)(Ge,{assignmentUsers:this.assignmentUsers,groupId:this.groupId,assignmentId:this.assignmentId,onClose:function(){return t.showApproveForm=!1}}),visible:function(){return t.showApproveForm}}],this._prepFields(),this.ready=!0}},{key:"save",value:function(){var e={};this.assignmentUsers.forEach((function(t){t._checked&&(e["user_".concat(t.user_id)]="1")})),this.saveToUrl(this.saveUrl+(0,_.$t)({group:this.groupId,assignment:this.assignmentId}),{attendance:e})}}])&&ze(t.prototype,n),r&&ze(t,r),i}(K.I),Be=Ve(Ze.prototype,"showApproveForm",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Te=Ve(Ze.prototype,"allowSetAttendance",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Ze),Ge=(0,ge.observer)((function(e){var t=e.onClose,n=e.assignmentUsers,r=e.assignmentId,o=e.groupId,i={};n.forEach((function(e){e._checked&&(i["attendance[user_".concat(e.user_id,"]")]="1")}));var a=(0,me.useRef)(new Ee({attendanceUsers:i,assignmentId:r,groupId:o})).current;return(0,Y.tZ)(ve.l,{form:a,internalForm:!0,onClose:t})})),Je=function(e){var t=e.approve_attendance,n=t.approver_name,r=t.text,o=t.time;return(0,Y.BX)("div",{children:[lng("approved by").caps(),": ",n," ",lng("at|date")," ",(0,Y.tZ)(be.qp,{time:o}),(0,Y.tZ)("br",{}),lng("approver note").caps(),":",(0,Y.tZ)("br",{}),(0,Y.tZ)("div",{dangerouslySetInnerHTML:{__html:r}})]})},We=(0,ge.observer)((function(e){var t=e.assignmentUsers,n=e.allowSetAttendance,r=["employee_id","external_id","user_identity_num"].filter((function(e){var n;return void 0!==(null===(n=t[0])||void 0===n?void 0:n[e])})),o=[{title:lng("first name")},{title:lng("last name")}];for(var i in r.forEach((function(e){return o.push({title:(0,De.X)(e)})})),o.push({checkAll:n}),t)t[i].search_data=Object.values(t[i]).join(" ");var a=(0,ge.observer)((function(e){var t=e.row,o=t.user_first_name,i=t.user_last_name;return(0,Y.BX)("tr",{children:[(0,Y.tZ)("td",{children:o}),(0,Y.tZ)("td",{children:i}),r.map((function(e){return(0,Y.tZ)("td",{children:t[e]},e)})),(0,Y.tZ)(Ie.Fo,{o:t,disabled:!n})]})}));return(0,Y.tZ)(he.iA,{cols:o,collection:t,rowIdCol:"user_id",loading:null===t,filters:[{name:"search_data",label:lng("search"),type:"text",outOfMenu:!0}],RowRenderer:a,noWindow:!0,compact:!0})})),Ke=n(7392);function $e(e){return($e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return(Qe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function et(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=rt(e);if(t){var o=rt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return tt(this,n)}}function tt(e,t){return!t||"object"!==$e(t)&&"function"!=typeof t?nt(e):t}function nt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rt(e){return(rt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var it=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Qe(e,t)}(i,e);var t,n,r,o=et(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),ot(nt(t=o.call(this,e)),"meetingsIds",[]),ot(nt(t),"eventIds",[]),ot(nt(t),"countDates",0),(0,h.makeObservable)(nt(t),{_fields:h.observable}),t.meetingsIds=e.meetingsIds||t.meeting,t.eventIds=e.eventIds||t.eventIds,t.title=t.eventIds.length>0?lng("duplicate event").caps():lng("duplicate meetings").caps(),t.saveUrl="meetings/duplicate",t.successMessage=lng("meetings duplicated"),t._fields=[{type:"hidden",name:"ids[meetings]",value:t.meetingsIds},{type:"hidden",name:"ids[events]",value:t.eventIds},{type:"checkbox",name:"sendMailToUsers",label:lng("send users notification about the meeting")+" ("+lng("only for meetings")+")"},{type:"row_set",fields:[{type:"date",name:"dates[".concat(t.countDates,"]"),label:lng("duplicate to date"),required:!0,grow:10},{type:"component",node:(0,Y.tZ)(Ke.l,{theme:"contained",onClick:function(){return t.addDateField()},children:lng("add date").caps()})}]}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"addDateField",value:function(){this.countDates++,this._fields.push({type:"date",name:"dates[".concat(this.countDates,"]"),label:lng("duplicate to date")})}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign(e))}}])&&Ye(t.prototype,n),r&&Ye(t,r),i}(K.I),at=n(68595);function lt(e){return(lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ct(e,t){return(ct=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function ut(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ft(e);if(t){var o=ft(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pt(this,n)}}function pt(e,t){return!t||"object"!==lt(t)&&"function"!=typeof t?dt(e):t}function dt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var mt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ct(e,t)}(i,e);var t,n,r,o=ut(i);function i(e){var t,n,r,a;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=dt(t),a=void 0,(r="group_id")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.group_id=e.group_id,t.title=lng("set item for sale").caps(),t.successMessage=lng("item sale data saved"),(0,b.SC)("groups/sale_data/group_id="+t.group_id,{},(function(e){return t.buildFields(e)})),t}return t=i,(n=[{key:"buildFields",value:function(e){this._fields=[{type:"number",name:"price",label:lng("price"),min:0,step:"0.01",helpKey:"@price_tag",required:!0},{type:"select",name:"currency",label:lng("currency"),options:[["USD",lng("USD")],["ILS",lng("ILS")],["BRL",lng("BRL")]]}],this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl("groups/save_sale_data",Object.assign({group_id:this.group_id},e))}}])&&st(t.prototype,n),r&&st(t,r),i}(K.I),gt=n(10101),ht=n(90603),bt=n(44401),yt=n(68297),vt=n(38246),_t=n(66975);function wt(e){return(wt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function xt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ct(e);if(t){var o=Ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return St(this,n)}}function St(e,t){return!t||"object"!==wt(t)&&"function"!=typeof t?jt(e):t}function jt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ct(e){return(Ct=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Pt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(i,e);var t,n,r,o=xt(i);function i(e){var t,n,r,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e),n=jt(t),a=void 0,(r="groupId")in n?Object.defineProperty(n,r,{value:a,enumerable:!0,configurable:!0,writable:!0}):n[r]=a,t.groupId=e.groupId,t.title=lng("import meeting attendance").caps(),t.saveUrl="meetings/import_attendance",t.confirmButtonLabel=lng("import"),t.successMessage=lng("meeting attendance imported successfully");var l=Blsm.prm.Mainref+"api?meetings/import_attendance_excel_template/group=".concat(t.groupId);return t._fields=[{type:"component",node:(0,Y.BX)("div",{children:[(0,Y.tZ)(fe.A,{theme:"highlight",href:l.csrf(),children:lng("template download").caps()}),(0,Y.tZ)(_t.JO,{icon:"menu_info",toolTip:lng('to mark attendance type 1 in the "attended" column and leave it empty to signify non-attendance')})]})},{type:"file",name:"meeting_attendance_excel",label:lng("data upload")}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign({group_id:this.groupId},e)),(0,y.vm)().closeDialog()}},{key:"SaveSuccess",value:function(){}}])&&Ot(t.prototype,n),r&&Ot(t,r),i}(K.I),Zt=n(87138),Bt=n(43698);function Tt(e){return(Tt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function It(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Et(Object(n),!0).forEach((function(t){At(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function At(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Rt(e,t){return(Rt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Nt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Mt(e);if(t){var o=Mt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zt(this,n)}}function zt(e,t){return!t||"object"!==Tt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Ft,qt=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Rt(e,t)}(i,e);var t,n,r,o=Nt(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,It(It({},e),{},{baseRoute:"meetings"}))).group_id=e.group_id,t.event_ids=e.event_ids,t.saveUrl="assignment/save_meetings",t}return t=i,(n=[{key:"createAttributes",value:function(){this.attributes=[{name:"start_date",type:"date",label:lng("start date")},{name:"meeting_location",type:"text",label:lng("location")},{name:"meeting_gathering_area",type:"text",label:lng("gathering area")},{name:"meeting_audience",type:"text",label:lng("audience")},{name:"meeting_category",type:"single_item",label:lng("proficiency category"),searchData:function(e,t){(0,b.SC)("assignment/get_categories",{},t)}},{name:"instructors",type:"multiple_items",label:lng("instructors"),theme:"bright",placeholder:lng("search instructor or proficiency").caps(),valueIsMap:!0,objectKeys:["resource_id","sequence_id"],searchData:function(e,t){(0,b.SC)("meetings/search_instructors",{data:{term:e.term}},t)},buttons:[{Render:Xt,onChange:function(e,t){var n=t.amount_in_use;return void 0!==n&&(e.amount_in_use=n),e}}]},{name:"clear_instructors",type:"checkbox",label:lng("clear existing instructors")},{type:"multiple_items",name:"resources",label:lng("select resources"),poster:!0,theme:"bright",valueIsMap:!0,objectKeys:["resource_id","label","amount_in_use","resource_category","note"],searchData:function(e,t){(0,b.SC)("resources/search_resource",{data:{req:"AutoComplete",by_id:e.ids,term:e.term,matches_only:!0}},t)},buttons:[{Render:Xt,onChange:function(e,t){var n=t.amount_in_use;return void 0!==n&&(e.amount_in_use=n),e}}]},{name:"clear_resources",type:"checkbox",label:lng("clear existing resources")}]}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign({group_id:this.group_id,ids:this.ids,event_ids:this.event_ids},e))}}])&&Dt(t.prototype,n),r&&Dt(t,r),i}(Zt.U),Xt=function(e){var t=e.item,n=e.onChange;return(0,Y.tZ)(Bt.I,{inline:!0,minimalist:!0,skinny:!0,wrapped:!0,type:"number",min:"1",value:t.amount_in_use,onChange:function(e){return n({amount_in_use:e})}})},Lt=n(35519);function Ut(e){return(Ut="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function Gt(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Wt(e);if(t){var o=Wt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Jt(this,n)}}function Jt(e,t){return!t||"object"!==Ut(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Wt(e){return(Wt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Kt,$t,Yt,Qt,en,tn,nn=(Ft=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(i,e);var t,n,r,o=Gt(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).title=lng("send invitations"),t.confirmButtonLabel=lng("send").caps(),t.status=1;var n=(0,h.action)((function(){t.values.get("sendMailToUsers")||t.values.get("sendMailToResources")?t.status=null:t.status=1}));return t._fields=[{type:"hidden",name:"ids"},{type:"hidden",name:"invite_only"},{type:"hidden",name:"group_id"},{type:"component",Render:Lt.R9,label:lng("the notification will be sent for future meetings.").caps(),bold:!0},{type:"checkbox",name:"sendMailToUsers",label:lng("send users an email invitation"),onValueChange:n},{type:"checkbox",name:"sendMailToResources",label:lng("send instructors and resources an email invitation"),onValueChange:n}],t._prepFields({ids:e.ids,invite_only:1,group_id:e.ws}),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("assignment/save_meetings",e)}},{key:"SaveSuccess",value:function(){(0,_e.qV)(lng("invitations sent")),(0,y.vm)().closeDialog()}},{key:"dirty",get:function(){return!1}}])&&Vt(t.prototype,n),r&&Vt(t,r),i}(K.I),Kt=Ft.prototype,$t="dirty",Yt=[h.override],Qt=Object.getOwnPropertyDescriptor(Ft.prototype,"dirty"),en=Ft.prototype,tn={},Object.keys(Qt).forEach((function(e){tn[e]=Qt[e]})),tn.enumerable=!!tn.enumerable,tn.configurable=!!tn.configurable,("value"in tn||tn.initializer)&&(tn.writable=!0),tn=Yt.slice().reverse().reduce((function(e,t){return t(Kt,$t,e)||e}),tn),en&&void 0!==tn.initializer&&(tn.value=tn.initializer?tn.initializer.call(en):void 0,tn.initializer=void 0),void 0===tn.initializer&&(Object.defineProperty(Kt,$t,tn),tn=null),Ft);function rn(e){return(rn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function on(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?on(Object(n),!0).forEach((function(t){ln(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):on(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ln(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function cn(e,t){return(cn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function un(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=dn(e);if(t){var o=dn(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return pn(this,n)}}function pn(e,t){return!t||"object"!==rn(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function dn(e){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var fn,mn,gn,hn,bn,yn,vn,_n,wn,On,kn,xn,Sn,jn,Cn,Pn,Zn,Bn,Tn,En,In,An,Dn,Rn,Nn,zn,Mn,Fn,qn,Xn,Ln,Un,Vn,Hn,Gn,Jn,Wn,Kn,$n,Yn,Qn,er,tr,nr,rr,or,ir,ar,lr,sr,cr,ur,pr,dr,fr,mr,gr,hr,br,yr,vr,_r,wr,Or,kr,xr,Sr,jr,Cr,Pr,Zr,Br,Tr,Er,Ir,Ar,Dr,Rr,Nr,zr,Mr,Fr,qr,Xr=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&cn(e,t)}(i,e);var t,n,r,o=un(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).title=lng("absent members message").caps(),t.saveUrl="meetings/absent_members_message",t.confirmButtonLabel=lng("send message").caps(),t.successMessage=lng("absent members message was sent"),(0,b.SC)("meetings/absent_members_message",{data:e},(function(e){t._fields=[{type:"multiple_items",name:"members",label:lng("members that did not attend at least one of the selected meetings").caps(),theme:"bright",poster:!0,valueIsMap:!0,required:!0},{type:"single_item",name:"custom_message",label:lng("select custom message (leave empty for default message)"),searchData:function(e,t){(0,b.SC)("ajax/requests.php?req=SearchSystemMessages",{data:{id:e.ids,term:e.term}},t)},mod:["","ENT"]},{type:"checkbox",name:"whatsapp",label:lng("also send WhatsApp matching message"),insert:Blsm.InitialData.special.whatsapp}],t._prepFields(e),t.ready=!0})),t}return t=i,(n=[{key:"save",value:function(e){var t=an({},this.params);t.options=an({},e),delete t.options.members,t.members=Object.values(e.members).map((function(e){return e.id})),t.members.length&&(this.saveToUrl("meetings/send_absent_members_message",t),(0,y.vm)().closeDialog())}},{key:"SaveSuccess",value:function(){}}])&&sn(t.prototype,n),r&&sn(t,r),i}(K.I);function Lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ur(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Lr(Object(n),!0).forEach((function(t){Yr(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Vr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=Jr(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){l=!0,i=e},f:function(){try{a||null==n.return||n.return()}finally{if(l)throw i}}}}function Hr(e){return function(e){if(Array.isArray(e))return Wr(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||Jr(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Gr(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||Jr(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Jr(e,t){if(e){if("string"==typeof e)return Wr(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Wr(e,t):void 0}}function Wr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Kr(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function $r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qr(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var eo=(fn=h.action.bound,mn=h.action.bound,gn=h.action.bound,hn=h.action.bound,bn=h.action.bound,yn=h.action.bound,vn=h.action.bound,_n=h.action.bound,wn=h.action.bound,On=h.action.bound,kn=h.action.bound,xn=h.action.bound,Sn=h.action.bound,jn=h.action.bound,Cn=h.action.bound,Pn=h.action.bound,Zn=h.action.bound,Bn=h.action.bound,Tn=h.action.bound,En=h.action.bound,In=h.action.bound,An=h.action.bound,Dn=h.action.bound,Rn=h.action.bound,Nn=h.action.bound,zn=h.action.bound,Fn=Qr((Mn=function(){function e(t){var n=this,r=t.id,o=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Kr(this,"ready",Fn,this),Kr(this,"_tab",qn,this),Kr(this,"display_message",Xn,this),Yr(this,"tabs",[]),Yr(this,"lastBackTab",""),Kr(this,"managersLoaded",Ln,this),Kr(this,"membersLoaded",Un,this),Kr(this,"waitingListLoaded",Vn,this),Kr(this,"activeCalendarDate",Hn,this),Kr(this,"warnings",Gn,this),Yr(this,"features",{}),Kr(this,"active_unit",Jn,this),Kr(this,"active_unit_id",Wn,this),Kr(this,"activeBlog",Kn,this),Yr(this,"group_id",""),Yr(this,"group_name",""),Yr(this,"group_description",""),Yr(this,"group_type",""),Yr(this,"group_invisible",""),Yr(this,"status",null),Yr(this,"users_count",0),Yr(this,"is_course",null),Yr(this,"group_image",""),Kr(this,"group_options",$n,this),Yr(this,"classification_name",""),Yr(this,"categoriesTree",{}),Yr(this,"sequence_id",null),Yr(this,"qual_top_name",null),Yr(this,"qual_top_id",null),Kr(this,"qual_list",Yn,this),Yr(this,"required_courses",null),Yr(this,"syllabus_file",null),Yr(this,"syllabus_text",null),Yr(this,"syllabus_url",null),Yr(this,"owner_options",{}),Yr(this,"display_condition_components",null),Yr(this,"is_member",!1),Kr(this,"is_owner",Qn,this),Kr(this,"is_manager",er,this),Yr(this,"can_create_instance",!1),Yr(this,"permissions",{}),Yr(this,"manager",null),Yr(this,"patient",null),Yr(this,"user_scores",{}),Yr(this,"scoring_details",{}),Yr(this,"arrived_to_meetings",{}),Yr(this,"manager_permission_types",{}),Yr(this,"default_manager_setting",void 0),Yr(this,"default_permissions",void 0),Kr(this,"waitingList",tr,this),Kr(this,"assignments",nr,this),Kr(this,"_managers",rr,this),Kr(this,"_waiting_list",or,this),Kr(this,"_members",ir,this),Kr(this,"registeredUsers",ar,this),Kr(this,"allowedUserFields",lr,this),Kr(this,"schedule",sr,this),Kr(this,"planning",cr,this),Kr(this,"contents",ur,this),Kr(this,"portal_id",pr,this),Kr(this,"discussions",dr,this),Kr(this,"blog",fr,this),Kr(this,"polls",mr,this),Kr(this,"tasks",gr,this),Kr(this,"_loading_tasks",hr,this),Yr(this,"_archive_tasks_loaded",!1),Kr(this,"tasks_stats",br,this),Kr(this,"_reports",yr,this),Kr(this,"reportsLoaded",vr,this),Kr(this,"units",_r,this),Kr(this,"componentsView",wr,this),Kr(this,"patients_communication",Or,this),Kr(this,"tasks_filterNsort",kr,this),Kr(this,"planning_filterNsort",xr,this),Kr(this,"discussions_blogs_filterNsort",Sr,this),Kr(this,"components_filterNsort",jr,this),Kr(this,"schedule_filterNsort",Cr,this),Kr(this,"waiting_list_active",Pr,this),Kr(this,"max_users",Zr,this),Kr(this,"showUnits",Br,this),Kr(this,"myContents",Tr,this),Kr(this,"displayManagers",Er,this),Kr(this,"mailingList",Ir,this),Kr(this,"mailingListLoaded",Ar,this),Yr(this,"meetingFilters",[{name:"location",label:lng("location"),type:"text"},{name:"date",label:lng("date"),type:"date"},{name:"instructorNames",label:lng("instructor"),type:"text"}]),Kr(this,"_show_members_drawer",Dr,this),Kr(this,"meetingUrl",Rr,this),Kr(this,"hierarchy",Nr,this),Yr(this,"conditionsTree",void 0),Kr(this,"groupMessages",zr,this),Kr(this,"availableRootGroups",Mr,this),Yr(this,"requestedComponent",!1),Yr(this,"showHierarchy",!1),Kr(this,"welcome_message",Fr,this),Kr(this,"qualificationLevelsExpand",qr,this),(0,h.makeObservable)(this),this.id=r,this.nav=o,this.fetch(),y.Nd.on("commentsUpdateCount",(function(e){if("assignment"===e.connectTo.type){var t=n.assignments.find((function(t){return t.assignment_id==e.connectTo.object_id}));t||(t=n.contents.find((function(t){return t.assignment_id==e.connectTo.object_id}))),t&&(t.comment_count=e.length)}if("content"===e.connectTo.type){var r=n.blog.find((function(t){return t.lesson_id==e.connectTo.object_id}));if(r){var o=e.action;"add"==o&&(r.comment_count=parseInt(r.comment_count)+1),"subtract"===o&&(r.comment_count=parseInt(r.comment_count)-1)}}})),y.Nd.on("TaskUpdate",(function(e){var t;if(e.task.group_id==n.id)if(t=n.tasks.find((function(t){return t.task_id==e.id})))for(var r=0,o=Object.entries(e.task);r<o.length;r++){var i=Gr(o[r],2),a=i[0],l=i[1];Object.prototype.hasOwnProperty.call(t,a)&&(0,h.set)(t,a,l)}else n.tasks.unshift(new T.o(e.task))})),y.Nd.on("TaskDelete",(function(e){var t=e.id;return n.tasks=n.tasks.filter((function(e){return t!=e.task_id}))})),y.Nd.on("DiscussionDelete",(function(e){var t=e.id;return n.discussions=n.discussions.filter((function(e){return t!=e.discussion_id}))})),y.Nd.on("DiscussionCreate",(function(e){var t=e.discussion;return n.discussions=[new T.o(t)].concat(Hr(n.discussions))})),(0,h.autorun)((function(){n.tasks_filterNsort.filter.archive&&!n._archive_tasks_loaded&&(n._loading_tasks=!0,(0,b.SC)("groups/group_tasks",{data:{group:n.id,archive:1}},(function(e){var t,r=e.map((function(e){return new T.o(e)}));(t=n.tasks).push.apply(t,Hr(r)),n._loading_tasks=!1,n._archive_tasks_loaded=!0})))}))}var t,n,r;return t=e,(n=[{key:"showMembersDrawer",value:function(){this._show_members_drawer=!0}},{key:"deleteContent",value:function(e){this.contents=this.contents.filter((function(t){return t!==e}))}},{key:"hideMembersDrawer",value:function(){this._show_members_drawer=!1}},{key:"assignmentsWithDueDate",value:function(){return this.assignments.filter((function(e){return e.sortTime}))}},{key:"getComponentById",value:function(e){return this.componentsList.find((function(t){return t.assignment_id==e}))}},{key:"updateRoute",value:function(e){var t,n,r,o,i=Gr(e,4),a=i[0],l=i[1],s=i[2],c=i[3];this._tab=a||this.group_options.default_tab,("components"===a||"components"===this.tab)&&(this.ready?(((0,_.B5)(l)||"0"===l||"-1"===l)&&(o=this.getUnitById(l))&&(0,_.DM)(o.unit_id)?this.activateUnit(o):null!==(t=this.units)&&void 0!==t&&t.length&&this.activateUnit(null!==(n=this.units[0])&&void 0!==n&&null!==(r=n.sub_units)&&void 0!==r&&r.length?this.units[0].sub_units[0]:this.units[0]),this.showComponentSide(s,c)):(this.active_unit_id=l,this.requestedComponent={id:s,tab:c}))}},{key:"showComponentSide",value:function(e,t){var n=this;if((0,_.B5)(e)){var r=this.getComponentById(e);(0,y.vm)().showSideDrawer(r,{tab:t||"",close:function(){return n.setActiveComponent(null)}})}}},{key:"maySetAttendance",value:function(){return(0,_.B5)(this.group_id)&&this.is_manager&&this.permissions[Blsm.ManagerPermissions.SET_ATTENDANCE]}},{key:"mayEditSetting",value:function(){return this.is_owner||this.is_manager&&this.permissions[Blsm.ManagerPermissions.GENERAL_CONFIG]}},{key:"mayEditMeetings",value:function(){return(0,_.B5)(this.group_id)&&this.is_manager&&this.permissions[Blsm.ManagerPermissions.EDIT_MEETINGS]}},{key:"mayEditMembers",value:function(){return(0,_.B5)(this.group_id)&&(this.permissions[Blsm.ManagerPermissions.MEMBERS_DIRECTOR]||this.is_owner||"Ou"===this.group_type&&Blsm.hasPermission("users_admin"))}},{key:"mayImportMembers",value:function(){return this.mayEditMembers()&&Blsm.canAccessModule("Groups")}},{key:"mayCreateMeetings",value:function(){return["components","schedule"].includes(this.tab)&&(0,_.B5)(this.group_id)&&this.permissions[Blsm.ManagerPermissions.CREATE_MEETINGS]&&this.features.meetings}},{key:"mayCreateEvents",value:function(){return"schedule"===this.tab&&this.mayCreateMeetings()}},{key:"mayCreateInstance",value:function(){return(this.is_owner||this.can_create_instance)&&"Course_template"===this.group_type}},{key:"mayShareContent",value:function(){return"components"===this.tab&&(0,_.B5)(this.group_id)&&this.permissions[Blsm.ManagerPermissions.CONTENT_SHARE]&&this.features.content}},{key:"mayCreateAssignments",value:function(){return"components"===this.tab&&(0,_.B5)(this.group_id)&&this.permissions[Blsm.ManagerPermissions.CREATE_ASSIGNMENTS]&&this.features.assignments}},{key:"mayCreateComponent",value:function(){return this.mayCreateAssignments()||this.mayShareContent()||this.mayCreateMeetings()}},{key:"mayInviteGuest",value:function(e){return this.is_manager&&"prv://watchittoo"===e&&Blsm.InitialData.parameters.anonymous_assignments}},{key:"mayCreateDiscussion",value:function(){return"social"===this.tab&&this.features.discussions&&this.features.new_discussions&&Blsm.isFeatureEnabled("discussions")}},{key:"mayCreatePoll",value:function(){return"social"===this.tab&&this.features.polls&&(Blsm.user.isPowerManager||this.permissions["perm_assignments|1"])}},{key:"mayCreatePost",value:function(){return"social"===this.tab&&this.features.blog&&(this.is_owner||this.is_manager)}},{key:"mayCreateTask",value:function(){return"tasks"===this.tab}},{key:"canUploadFiles",value:function(){return"components"===this.tab&&(this.mayCreateAssignments()||this.mayShareContent())}},{key:"isGeneralManager",value:function(){return(0,_.B5)(this.group_id)&&this.permissions[Blsm.ManagerPermissions.GENERAL_CONFIG]}},{key:"mayChangeComponents",value:function(e){var t=!1;if(this.group_id)switch(e){case"share":t=this.permissions[Blsm.ManagerPermissions.CONTENT_SHARE];break;case"meeting":t=this.permissions[Blsm.ManagerPermissions.CREATE_MEETINGS];break;case"assignment":t=this.permissions[Blsm.ManagerPermissions.CREATE_ASSIGNMENTS];break;default:t=this.group_id&&(this.is_owner||this.permissions&&(this.permissions[Blsm.ManagerPermissions.CREATE_ASSIGNMENTS]||this.permissions[Blsm.ManagerPermissions.CREATE_MEETINGS]||this.permissions[Blsm.ManagerPermissions.CONTENT_SHARE]||this.permissions[Blsm.ManagerPermissions.GENERAL_CONFIG]))}return t}},{key:"maySetCoaches",value:function(){return Blsm.isFeatureEnabled("coached_assignments")&&this.permissions[Blsm.ManagerPermissions.GENERAL_CONFIG]&&this.assignments.filter((function(e){return e.hasCoach})).length>0}},{key:"deleteMeeting",value:function(e){var t=this;e.icalUid?(0,E.cS)(lng("are you sure you want to delete the meeting?"),{title:lng("delete").caps(),inputType:"checkbox",placeholder:lng("send invite cancellation"),onConfirm:function(n){t.schedule.remove(e),t.activeCalendarDate=(0,ue._3)(e.start_date).clone().startOf("day"),(0,b.SC)("meetings/",{data:{ids:e.assignment_id,cancel_invite:n},method:"DELETE"})}}):(0,E.BB)(lng("are you sure you want to delete the meeting?"),{title:lng("delete").caps(),onConfirm:function(){t.schedule.remove(e),t.activeCalendarDate=(0,ue._3)(e.start_date).clone().startOf("day"),(0,b.SC)("meetings/",{data:{ids:e.assignment_id},method:"DELETE"})}})}},{key:"deleteEvent",value:function(e){this.schedule.remove(e),this.activeCalendarDate=(0,ue._3)(e.start_date).clone().startOf("day")}},{key:"setAttendance",value:function(e){var t=e.assignmentId,n=e.groupId;(0,y.vm)().openDialog("form",new He({data:{assignmentId:t,groupId:n},onSaveSuccess:function(){return(0,y.vm)().closeDialog()}}))}},{key:"setMeetingUrl",value:function(e){this.meetingUrl=e}},{key:"_initialCalendarDay",value:function(){var e,t,n=moment(),r=null,o=Vr(this.allEvents);try{for(o.s();!(t=o.n()).done;){var i=t.value.end_time;i>n&&(!r||i<r)&&(r=i)}}catch(e){o.e(e)}finally{o.f()}if(!r){var a,l=Vr(this.allEvents);try{for(l.s();!(a=l.n()).done;){var s=a.value.end_time;s>n&&(!r||s>r)&&(r=s)}}catch(e){l.e(e)}finally{l.f()}}return((null===(e=r)||void 0===e?void 0:e.clone())||n).startOf("day")}},{key:"populateData",value:function(e){var t,n,r,o,i,a,l,s=this,c=e.data||e;this.display_message=e.display_message,this.group_id=c.group_id,this.group_name=c.group_name,this.group_description=c.group_description,this.group_type=c.group_type,this.group_invisible=c.group_invisible,this.status=c.status,this.users_count=e.users_count,this.is_course=c.is_course,this.group_image=c.group_image,this.group_options=c.group_options||{},this.classification_name=e.classification_name,this.categoriesTree=e.categories_tree,this.required_courses=null===(t=e.required_courses)||void 0===t?void 0:t.map((function(e){return new vt.j(e,{qualificationRequirement:!0})})),this.qual_list=e.qual_list,this.qual_top_name=e.qual_top_name,this.qual_top_id=e.qual_top_id,this.c_completed=e.c_completed,this.c_performance_score=e.c_performance_score,this.group_close_date=c.group_close_date,this.group_open_date=c.group_open_date,this.view_pre_days=c.view_pre_days,this.view_post_days=c.view_post_days,this.activity_date_future=e.activity_date_future,this.activity_date_past=e.activity_date_past,this.course_certificate=c.course_certificate,this.diploma=e.diploma,this.sequence_id=c.sequence_id,this.syllabus_file=c.syllabus_file,this.syllabus_text=c.syllabus_text,this.syllabus_url=c.syllabus_url,this.owner_options=c.owner_options,this.display_condition_components=c.display_condition_components,this.is_member=e.is_member,this.is_owner=e.is_owner,this.is_manager=e.is_manager,this.can_create_instance=e.can_create_instance,this.permissions=e.permissions,this.manager=e.manager,this.patient=e.patient,this.user_scores=e.user_scores,this.scoring_details=e.scoring_details,this.arrived_to_meetings=e.arrived_to_meetings,this.assignments=(null===(n=e.assignments)||void 0===n?void 0:n.map((function(e){return new D.o(e,{workspace:s})})))||[],this.schedule=(null===(r=e.meetings)||void 0===r?void 0:r.map((function(e){return(0,N.aZ)(e,{workspace:s})})))||[],this.contents=(null===(o=e.contents)||void 0===o?void 0:o.map((function(e){return new R.m(e,{workspace:s,deleteContent:s.deleteContent})})))||[],this.portal_id=e.portal_id,this.availableRootGroups=e.available_root_groups||[],this.waitingList=null===(i=e.waiting_list)||void 0===i?void 0:i.map((function(e){return new T.o(e)})),this.registeredUsers=null===(a=e.registered_users)||void 0===a?void 0:a.map((function(e){return new T.o(e)})),this.waiting_list_active=c.waiting_list_active,this.planning=null===(l=c.planning)||void 0===l?void 0:l.map((function(e){return new T.o(e)})),this.max_users=parseInt(c.max_users)}},{key:"fetch",value:function(){var e=this;this.ready=!1,(0,b.SC)("groups/"+this.id,{},(0,h.action)((function(t){var n,r,o,i,a,l,s,c=function(n,r){e[n].replace((t[n]||[]).map((function(t){return r?new r(t,e):new T.o(t)})))};if(e.populateData(t),t.display_message)e.ready=!0;else{c("discussions"),c("blog"),c("polls",B),e.tasks_stats=t.tasks_stats||{},c("tasks"),e._loading_tasks=!1,e.welcome_message=t.welcome_message,e.displayManagers=t.display_managers,e.group_access=t.group_access,e.units=(null===(n=t.units)||void 0===n?void 0:n.map((function(t){return new W(t,{workspace:e})})))||[],e.addDefaultUnits(),"PatientCase"===e.group_type&&t.patients_communication&&(e.patients_communication=t.patients_communication.sort((function(e,t){return t.com_id-e.com_id}))),e.tabs=[];var u,p,d,f,m=function(t,n,r){var o,i=parseInt(e.group_options[t]);return i>0&&(e.is_owner||e.is_manager||1===i&&(r||(null===(o=n||e[t])||void 0===o?void 0:o.length)>0))};if(e.features={assignments:m("assignments"),meetings:m("meetings"),content:m("catalog",e.contents),discussions:m("discussions",null,!0)&&Blsm.isFeatureEnabled("discussions"),new_discussions:m("new_discussions",null,!0),blog:m("blog")&&Blsm.isFeatureEnabled("blog"),polls:m("polls"),tasks:m("group_tasks",e.tasks,!0),users:m("users",!1,!0),group_messages:m("notice_board",!1,!0)},(e.features.assignments||e.features.meetings||e.features.content)&&e.tabs.push({val:"components",label:lng("components",{phrase:!0})}),e.features.tasks&&e.tabs.push({val:"tasks",label:lng("tasks",{phrase:!0})}),(e.features.discussions||e.features.blog||e.features.polls)&&e.tabs.push({val:"social",label:lng("social",{phrase:!0})}),"PatientCase"===e.group_type&&e.patients_communication&&e.tabs.push({val:"patients_communication",label:lng("patient communication")}),"Qualification"===e.group_type&&(null===(r=e.required_courses)||void 0===r?void 0:r.length)>0&&e.tabs.push({val:"requirements",label:lng("requirements")}),e.features.meetings&&(e.scheduleItems.length>0||e.is_manager||e.is_owner)&&e.tabs.push({val:"schedule",label:lng("schedule",{phrase:!0})}),(e.welcome_message||null!==(o=e.displayManagers)&&void 0!==o&&o.length)&&e.tabs.push({val:"welcome",label:lng("welcome",{phrase:!0})}),"Workplan"===e.group_type&&e.tabs.push({val:"planning",label:lng("planning",{phrase:!0})}),t.show_welcome_on_first_visit&&e.is_member&&!t.first_visit&&(e.welcome_message||e.displayManagers.length)?e._tab="welcome":e._tab=e._tab||e.group_options.default_tab,e.sections=Hr(e.tabs.map((function(e){return e.val}))),(e.features.users&&e.group_options.show_members||e.mayEditMembers())&&(e.sections.push("members"),e.waiting_list_active&&(null===(u=t.waiting_list)||void 0===u?void 0:u.length)>0&&e.sections.push("waiting_list"),(null===(p=t.registered_users)||void 0===p?void 0:p.length)>0&&e.sections.push("registration")),e.mayEditSetting&&["group","course","qualification","workplan"].includes(null===(i=e.group_type)||void 0===i?void 0:i.toLowerCase())&&e.sections.push("mailing_list"),(e.features.users&&(e.group_options.managers_primary||e.group_options.managers_managers||e.group_options.managers_viewers||e.group_options.managers_inherited)||e.is_owner)&&e.sections.push("managers"),e.sections.push("reports","my_contents"),t.hierarchy&&(e.showHierarchy=(e.is_owner||e.is_manager)&&(null===(d=t.hierarchy)||void 0===d?void 0:d.length)>0||(null===(f=t.hierarchy)||void 0===f?void 0:f.length)>1,e.hierarchy=(0,gt.Jf)(t.hierarchy),e.sections.push("hierarchy")),t.qual_list){var g,h={},b=Vr(t.qual_list);try{for(b.s();!(g=b.n()).done;){var y=g.value;h[y.group_id]=y}}catch(e){b.e(e)}finally{b.f()}var v,_=Vr(t.qual_list);try{for(_.s();!(v=_.n()).done;){var w,O=v.value,k=Vr(O.parents);try{for(k.s();!(w=k.n()).done;){var x=w.value;x&&h[x]&&(h[x].sons||(h[x].sons=[]),h[x].sons.push(O))}}catch(e){k.e(e)}finally{k.f()}}}catch(e){_.e(e)}finally{_.f()}for(var S=0,j=Object.values(h);S<j.length;S++){var C=j[S];C.sons&&C.sons.sort((function(e,t){return e.c_order-t.c_order}))}var P=Object.keys(h),Z=t.qual_list.filter((function(e){return!(e.parents&&P.filter((function(t){return e.parents.includes(t)})).length>0)}));(0,gt.v0)(Z),e.conditionsTree=Z}e.activeCalendarDate=e._initialCalendarDay(),e.ready=!0,e.countItemsPerUnit(),e.active_unit_id?e.activateUnit(e.getUnitById(e.active_unit_id)):null!==(a=e.units)&&void 0!==a&&a.length&&e.activateUnit(null!==(l=e.units[0])&&void 0!==l&&null!==(s=l.sub_units)&&void 0!==s&&s.length?e.units[0].sub_units[0]:e.units[0]),e.requestedComponent&&(e.showComponentSide(e.requestedComponent.id,e.requestedComponent.tab),e.requestedComponent=!1),"Course_template"===e.group_type&&e.warnings.push(lng("course template")),e.is_manager&&e.group_invisible==Blsm.ManagerPermissions.GROUP_MANAGERS_ONLY&&e.warnings.push(lng("manager only")),e.is_manager&&e.group_invisible==Blsm.ManagerPermissions.GROUP_INVISIBLE&&e.warnings.push(lng("not active")),e.is_manager&&"draft"==e.status&&e.warnings.push(lng("draft")),e.is_manager&&"approval"==e.status&&e.warnings.push(lng("approval waiting")),e.is_manager&&e.activity_date_past&&e.warnings.push(lng("was available until %s",(0,ue.GG)(e.activity_date_past,{time:!1}))),e.is_manager&&e.activity_date_future&&e.warnings.push(lng("will be available on %s",(0,ue.GG)(e.activity_date_future,{time:!1}))),e.deleted&&e.warnings.push(lng("deleted")),e.myContents=t.my_contents,e.groupMessages=t.notice_board||[],e.slack_webhook=t.slack_webhook,"Qualification"===t.group_type&&t.credit_required&&(e.creditRequired=t.credit_required,e.userCredit=t.user_credit||0),e.creditOnCompletion=t.credit_on_completion||0}})))}},{key:"addDefaultUnits",value:function(){var e=this,t=this.componentsList;this.units.length>0&&t.some((function(t){return!t.unitId||!e.unitIds.includes(t.unitId)}))&&(this.is_owner||this.is_manager)&&this.units.push(new W({unit_id:0,unit_name:lng("unassigned").caps()},{workspace:this})),this.units.length>0&&t.some((function(e){return e.unitId}))&&!this.group_options.hide_all_learning_unit&&this.units.push(new W({unit_id:-1,unit_name:lng("all").caps()},{workspace:this}))}},{key:"fetchGroupMessages",value:function(){var e=this;(0,b.SC)("groups/messages",{data:{group_id:this.id}},(function(t){return e.groupMessages=t||[]}))}},{key:"fetchHierarchy",value:function(){var e=this;(0,b.SC)("groups/hierarchy",{data:{group_id:this.id}},(function(t){(null==t?void 0:t.length)>1&&(e.hierarchy=(0,gt.Jf)(t))}))}},{key:"fetchQualList",value:function(){var e=this;(0,b.SC)("groups/qual_list",{data:{group_id:this.id}},(function(t){return e.qual_list=t}))}},{key:"fetchManagers",value:function(){var e=this;(0,b.SC)("groups/workspace_managers",{data:{group_id:this.id}},(function(t){e._managers.replace(t.managers.map((function(e){return new T.o(e)}))),e.manager_permission_types=null==t?void 0:t.manager_permission_types,e.default_manager_setting=t.default_manager_setting,e.default_permissions=t.default_permissions,e.managersLoaded=!0}))}},{key:"fetchMembers",value:function(){var e=this;(0,b.SC)("groups/workspace_members",{data:{group_id:this.id}},(function(t){var n;e._members.replace((null==t||null===(n=t.members)||void 0===n?void 0:n.map((function(e){return new T.o(e)})))||[]),e.allowedUserFields=t.allowedUserFields,e.membersLoaded=!0}))}},{key:"fetchMailinList",value:function(){var e=this;(0,b.SC)("groups/mailing_list",{data:{group_id:this.id}},(function(t){e.mailingList.replace(t.map((function(e){return new T.o(e)}))),e.mailingListLoaded=!0}))}},{key:"fetchReports",value:function(){var e=this;(0,b.SC)("groups/reports_data",{data:{group_id:this.id}},(function(t){e._reports=t.reports||{},e._reportsBundle=t.bundle||[],e.reportsLoaded=!0}))}},{key:"fetchTasks",value:function(){var e=this;(0,b.SC)("groups/group_tasks",{data:{group:this.id}},(function(t){e.tasks.replace((t||[]).map((function(e){return new T.o(e)}))),e._archive_tasks_loaded=!1}))}},{key:"deleteTasks",value:function(e){var t=this,n=e.map((function(e){return e.task_id}));(0,E.BB)(lng("are you sure you want to delete these tasks?").caps(),{title:lng("delete tasks"),confirmText:lng("delete"),onConfirm:function(){return(0,b.SC)("tasks/delete",{data:{id:n}},(0,h.action)((function(){t.tasks=t.tasks.filter((function(e){return!n.includes(e.task_id)}))})))}})}},{key:"getDiploma",value:function(){var e;return!("1"!=(null===(e=this.user_scores)||void 0===e?void 0:e.c_completed)||!(this.diploma||parseInt(this.course_certificate)>0))&&(this.diploma?Blsm.prm.Mainref+"GetFile?file_id="+this.diploma:!!this.course_certificate&&Blsm.prm.Mainref+"ajax/requests.php?user="+Blsm.user.id+"&group="+this.group_id+"&req=diploma")}},{key:"moveTasks",value:function(e){var t=this,n=e.map((function(e){return e.task_id}));(0,E.cS)(lng("move the selected tasks to:"),{title:lng("move tasks"),inputType:"single_item",inputOptions:{searchData:function(e,n){(0,b.SC)("groups/autocomplete",{data:{managed_perm:"manage",is_owner:1,tasks_enabled:1,types:"Workplan",term:e.term||"",exclude:[t.group_id]}},n)}},onConfirm:function(e){(0,E.BB)(lng("this will also move parent and sub tasks, continue?"),{onConfirm:function(){return(0,b.SC)("tasks/move_tasks",{method:"POST",data:{tasks:n,workplan_id:e}},(function(){var e=t.tasks.filter((function(e){return n.includes(e.task_id)&&e.parent_task})).map((function(e){return e.parent_task}));n=n.concat(e),t.tasks=t.tasks.filter((function(e){return!n.includes(e.task_id)&&!n.includes(e.parent_task)}))}))}})}})}},{key:"createPoll",value:function(){var e=this,t=new B({},this);(0,y.vm)().openDialog("form",new I.y({data:{poll:t,groupId:this.group_id},onSaveSuccess:function(){return(0,y.vm)().closeDialog(),e.polls.push(t)}}))}},{key:"deletePoll",value:function(e){var t=this;(0,E.BB)(lng("are you sure you want to delete this poll question?").caps(),{title:lng("delete poll"),confirmText:lng("delete"),onConfirm:function(){t.polls.remove(e),e.delete(e.assignment_id)}})}},{key:"getBlogPostOrgData",value:function(e,t){return"blog"===t?this.blog.find((function(t){return t.lesson_id===e})):"discussion"===t?this.discussions.find((function(t){return t.discussion_id===e})):null}},{key:"setActiveBlog",value:function(e,t){this.activeBlog=!!(0,_.B5)(e)&&this.getBlogPostOrgData(e,t)}},{key:"removeBlog",value:function(e,t){var n=this;(0,E.BB)(lng("are you sure you want to delete this post?"),{onConfirm:function(){var r=n.getBlogPostOrgData(e,t);n.blog.remove(r),(0,b.SC)("content/"+r.lesson_id,{method:"DELETE"},(function(e){"error"===e.res&&n.blog.push(r)}))}})}},{key:"toggleUserVotePost",value:function(e,t){var n,r,o,i=this.getBlogPostOrgData(e,t);i.likes={likes:null!=i&&null!==(n=i.likes)&&void 0!==n&&n.user_vote?parseInt(i.likes.likes)-1:parseInt(null==i||null===(r=i.likes)||void 0===r?void 0:r.likes)+1,user_vote:null==i||null===(o=i.likes)||void 0===o||!o.user_vote};var a={req:"vote",type:"blog"===t?"content":"discussion",object_id:e,user_action:"like",group_id:this.group_id};(0,b.SC)("likes",{data:a,method:"POST"})}},{key:"toggleLockPostComments",value:function(e,t){var n,r=this,o=this.getBlogPostOrgData(e,t),i=!(null!==(n=o.lesson_options)&&void 0!==n&&n.lock_comments);o.lesson_options={lock_comments:i},"blog"===t?(0,b.SC)("content/lock_comments",{method:"POST",data:{lesson_id:e}}):"discussion"===t&&(0,b.SC)("discussions",{data:{discussion_id:e,lock:i,req:"lock_discussion"},method:"PATCH"},(function(){var t=r.discussions.find((function(t){return t.discussion_id===e}));t.locked="1"===t.locked?"0":"1"}))}},{key:"addGroupMessageLocally",value:function(e,t){this.groupMessages.unshift({deleted:"0",text:t,time:((new Date).getTime()/1e3).toString(),id:e})}},{key:"updateGroupMessageLocally",value:function(e,t){this.groupMessages=this.groupMessages.map((function(n){return n.id!==e?n:Ur(Ur({},n),t)}))}},{key:"addGroupMessage",value:function(){(0,y.vm)().openDialog("form",new yt.M({data:{ws:this.id}}))}},{key:"addSlackMessage",value:function(){var e=this;(0,E.cS)("",{title:lng("send message to slack"),confirmText:lng("send").caps(),placeholder:lng("message"),inputType:"richtext",inputOptions:{slackMarkdown:!0},multiline:!0,onConfirm:function(t){return(0,b.SC)("groups/send_to_slack",{method:"POST",data:{group_id:e.id,message:t.replaceAll('<div dir="rtl">',"").replaceAll('<div dir="ltr">',"").replaceAll("</div>","")}})}})}},{key:"updateGroupMessage",value:function(){(0,y.vm)().openDialog("form",new yt.M({data:{ws:this.id}}))}},{key:"removeGroupMessage",value:function(e,t){var n=this;(0,b.SC)("groups/message/"+e.id,{method:"DELETE",data:{ws:this.id}},(0,h.action)((function(){n.groupMessages=n.groupMessages.filter((function(t){return t.id!==e.id})),t()})))}},{key:"toggleGroupMessage",value:function(e){var t=this;(0,b.SC)("groups/activate_message",{method:"POST",data:{id:e.id,activate:2==e.deleted?1:0}},(0,h.action)((function(){t.groupMessages=t.groupMessages.map((function(t){return t.id===e.id&&(t.deleted=2==e.deleted?0:2),t}))})))}},{key:"updateNoticeBoardVisibility",value:function(e){var t=this;this.group_options.notice_board=e,(0,b.SC)("groups/update_options/".concat(this.id),{data:{group_options:this.group_options},method:"POST",json:!0},(0,h.action)((function(){!t.groupMessages&&e&&t.fetchGroupMessages()})))}},{key:"registeredUsersReject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";(0,b.SC)("groups/registered_users_reject",{data:{group_id:this.id,list:this.registeredUsersSelected.join(","),reason:t},method:"POST"},(function(){e.fetch(),e.tab="registration",(0,_e.qV)(lng("users rejected").caps())}))}},{key:"waitingListApprove",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.waitingListSelected;(0,b.SC)("groups/waiting_list_approve",{data:{group_id:this.id,users:t},method:"POST"},(function(){e.fetch(),e.tab="members",(0,_e.qV)(lng("members added"))}))}},{key:"waitingListReject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.waitingListSelected;(0,b.SC)("groups/waiting_list_reject",{data:{group_id:this.id,users:t},method:"POST"},(function(){e.fetch(),e.tab="members",(0,_e.qV)(lng("members rejected").caps())}))}},{key:"canApproveMembers",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return!this.max_users||(null===(e=this.members)||void 0===e?void 0:e.length)+t<=this.max_users}},{key:"toggleDisplayManager",value:function(e,t){var n=this;e.stopPropagation();var r=this._managers.find((function(e){return e.user_id===t})),o={group_id:this.id,user_id:t},i=!r.display_about;i&&(o.checked=1),(0,b.SC)("groups/toggle_display_about",{method:"POST",data:o},(function(e){i?n.displayManagers.push(e):n.displayManagers=n.displayManagers.filter((function(e){var n=e.user_id;return t!==n}));var r=n._managers.map((function(e){return e.user_id===t?Ur(Ur({},e),{},{display_about:i}):e}));n._managers.replace(r)}))}},{key:"activateUnit",value:function(e){var t;if(this.componentsList.some((function(e){return e.unitId}))||this.mayCreateComponent()){if(!e)return this.active_unit_id&&this.setActiveUnit({}),this.active_unit_id=null,void(this.active_unit=null);null===(t=this.active_unit)||void 0===t||t.deactivate(),0===e.count&&e.sub_units.length>0&&e.fullCount&&(e=e.sub_units.find((function(e){return e.count>0}))),this.active_unit=e,this.active_unit_id=e.unit_id,this.activeCalendarDate=this._initialCalendarDay(),this.active_unit.activate()}}},{key:"setActiveUnit",value:function(e){this.nav(["components",e.unit_id])}},{key:"setActiveComponent",value:function(e,t){this.nav(["components",(0,_.DM)(this.active_unit_id)?this.active_unit_id:"",e,t])}},{key:"onCalendarStripClick",value:function(e){"event"===e.type?this.mayEditMeetings()&&this.openEventForm(e):this.setActiveComponent(e.assignment_id)}},{key:"getUnitById",value:function(e){return function e(t,n){var r,o=Vr(t);try{for(o.s();!(r=o.n()).done;){var i,a=r.value;if(a.unit_id==n)return a;if(null!==(i=a.sub_units)&&void 0!==i&&i.length){var l=e(a.sub_units,n);if(l)return l}}}catch(e){o.e(e)}finally{o.f()}}(this.units,e)}},{key:"deleteUnitById",value:function(e){this.units=this.units.filter((function(t){var n,r=t.unit_id==e;return!r&&null!==(n=t.sub_units)&&void 0!==n&&n.length&&(t.sub_units=t.sub_units.filter((function(t){return t.unit_id!=e}))),!r})),0===this.unitsTree().length&&(this.units=[]),this.active_unit_id==e&&this.activateUnit(null)}},{key:"parentUnitsList",value:function(){var e,t=[[0," - "+lng("root").caps()+" - "]],n=Vr(this.units);try{for(n.s();!(e=n.n()).done;){var r=e.value;(0,_.B5)(r.unit_id)&&t.push([r.unit_id,r.attr("unit_name")])}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"unitsTree",value:function(){var e,t=[],n=Vr(this.units);try{for(n.s();!(e=n.n()).done;){var r,o=e.value;if((0,_.B5)(o.unit_id)&&(t.push({val:o.unit_id,label:o.attr("unit_name")}),null!==(r=o.sub_units)&&void 0!==r&&r.length)){var i,a=Vr(o.sub_units);try{for(a.s();!(i=a.n()).done;){var l=i.value;t.push({val:l.unit_id,label:" > "+l.attr("unit_name")})}}catch(e){a.e(e)}finally{a.f()}}}}catch(e){n.e(e)}finally{n.f()}return t}},{key:"saveUnit",value:function(e,t){var n=this;t?(0,b.SC)("groups/save_learning_unit",{method:"POST",data:Ur({unit_id:t},e)},(function(){var r,o,i,a=n.getUnitById(t);if(a._attr=Object.assign(a._attr,e),e.unit_hide||(a._attr.unit_hide=null),((0,_.B5)(null===(r=a.parent_unit)||void 0===r?void 0:r.unit_id)||(0,_.B5)(e.parent_unit))&&(null===(o=a.parent_unit)||void 0===o?void 0:o.unit_id)!=e.parent_unit)if(null!==(i=a.parent_unit)&&void 0!==i&&i.unit_id?(a.parent_unit.sub_units=a.parent_unit.sub_units.filter((function(e){return e.unit_id!=t})),a.parent_unit=null):n.units=n.units.filter((function(e){return e.unit_id!=t})),e.parent_unit){var l=n.getUnitById(e.parent_unit);a.parent_unit=l,l.sub_units=[].concat(Hr(l.sub_units),[a])}else n.units=[].concat(Hr(n.units),[a])})):(0,b.SC)("groups/new_learning_unit",{method:"POST",data:Ur({group_id:this.group_id},e)},(function(e){var t=new W(e,{workspace:n}),r=0===n.units.length;if(e.parent_unit){var o=n.getUnitById(e.parent_unit);t.parent_unit=o,o.sub_units=[].concat(Hr(o.sub_units),[t])}else n.units=[].concat(Hr(n.units),[t]);r&&n.addDefaultUnits()}))}},{key:"deleteUnit",value:function(e){var t=this;(0,b.SC)("groups/delete_learning_unit",{method:"POST",data:{unit_id:e}},(function(){t.deleteUnitById(e)}))}},{key:"isUnitCompleted",value:function(e){if(0===e.length)return!1;var t,n=Vr(e);try{for(n.s();!(t=n.n()).done;){var r=t.value,o=this.getComponentById(r);if(!o.completed&&!o.attr("completed"))return!1}}catch(e){n.e(e)}finally{n.f()}return!0}},{key:"countItemsPerUnit",value:function(){var e=this,t={0:[],"-1":[]};this.componentsList.forEach((function(n){n.unitId&&e.unitIds.includes(n.unitId)?(t[n.unitId]||(t[n.unitId]=[]),t[n.unitId].push(n.attr("assignment_id"))):n._attr.condition_component||t[0].push(n.attr("assignment_id")),t[-1].push(n.attr("assignment_id"))}));for(var n=0,r=Object.entries(t);n<r.length;n++){var o=Gr(r[n],2),i=o[0],a=o[1],l=this.getUnitById(i);l&&(l.count=a.length,l.completed=this.isUnitCompleted(a))}}},{key:"componentsCompactView",value:function(e){this.componentsView=e?"compact":"",ce.X.set("workspace_components_view",e?"compact":void 0)}},{key:"setComponentOrder",value:function(e){this.components.forEach((function(t){t.order=e.indexOf(t.assignment_id+"")})),(0,b.SC)("assignment/assignments_ordering",{method:"POST",data:{ordering:e,group_id:this.group_id}})}},{key:"moveSelectedToUnit",value:function(e){var t=this,n=this.components.filter((function(e){return e.selected}));if(0!==n.length){var r={group_id:this.group_id,items:Hr(n.map((function(e){return e.assignment_id}))),move_to:e};(0,b.SC)("groups/move_to_learning_unit",{method:"POST",data:r},(function(){n.forEach((function(t){t.unitId=e,t.selected=!1})),t.countItemsPerUnit()}))}}},{key:"removeAssignment",value:function(e){this.assignments.remove(e)}},{key:"deleteComponents",value:function(e,t){var n=this,r=[],o=[],i=[],a=[];e.forEach((function(e){switch(e.type){case"meeting":r.push(e.assignment_id);break;case"event":a.push(e.id);break;case"share":o.push(e.assignment_id);break;case"assignment":i.push(e.assignment_id)}})),(0,b.SC)("groups/detach_components",{method:"POST",data:{group_id:this.group_id,cancel_invite:t,meetings:r,shares:o,assignments:i,events:a}},(function(e){null==e||e.forEach((function(e){i.includes(parseInt(e))?n.assignments=n.assignments.filter((function(t){return t.assignment_id!=e})):o.includes(parseInt(e))?n.contents=n.contents.filter((function(t){return t.assignment_id!=e})):r.includes(parseInt(e))?n.schedule=n.schedule.filter((function(t){return t.assignment_id!=e})):a.includes(parseInt(e))&&(n.schedule=n.schedule.filter((function(t){return t.id!=e})))}))}))}},{key:"onFileDrop",value:function(e){var t=this,n=[];this.mayShareContent()&&n.push(["content",lng("content").caps()]),this.mayCreateAssignments()&&n.push(["assignment",lng("assignment").caps()]),(0,E.cS)(lng("select component type"),{title:lng("select component type"),inputType:"select",selectOptions:(0,_.wd)(n),onConfirm:function(n){switch(n){case"content":(0,y.vm)().openDialog("form",new ht.y({files:e,share:t.group_id,unit_id:t.active_unit_id,onSaveSuccess:function(e){return t.addToContents(e.lessons)}}));break;case"assignment":(0,y.vm)().formPassData=e,(0,fe.p4)({edit:"assignment",params:{ws:t.group_id,type:"content",multiple:1,unit:t.active_unit_id}},!0)}}})}},{key:"addToContents",value:function(e){var t=this;e.forEach((function(e){return t.contents.push(new R.m(e,{workspace:t}))}))}},{key:"addToMyContents",value:function(e){var t=this;e.forEach((function(e){return t.myContents.push(e)}))}},{key:"createCommunication",value:function(){var e=this;(0,y.vm)().openDialog("form",new se({patient:this.patient,caseId:this.group_id,onSaveSuccess:function(t){var n=lng("communication created successfully");t._sms_sent?(0,_e.qV)(lng("the patient will receive an SMS soon"),n):(0,_e.qV)(n),e.patients_communication.unshift(t),(0,y.vm)().closeDialog()}}))}},{key:"headerActions",value:function(){var e,t,n,r,o,i,a=this,l=this,s={portal_type:"group",portal_title:l.group_name,group_id:l.group_id},c=function(e){return(0,y.vm)().closeDialog(),l.portal_id=e.portal_id,(0,fe.p4)({portal:l.portal_id},!0)},u=(null===(e=l.permissions)||void 0===e?void 0:e[Blsm.ManagerPermissions.GENERAL_CONFIG])&&Blsm.isFeatureEnabled("portal")&&"Subset"!==l.group_type,p=l.is_course&&(null===(t=l.mayEditSetting)||void 0===t?void 0:t.call(l))&&Blsm.isFeatureEnabled("integration_paypal");return[l.maySendSlackMessage&&{icon:"slack",onClick:function(){return a.addSlackMessage()}},Blsm.isFeatureEnabled("users_content")&&(this.myContents&&void 0!==this.myContents.length||this.is_manager)&&(1==this.group_options.catalog||2==this.group_options.catalog&&this.is_manager)&&{icon:"content",onClick:function(){return l.tab="my_contents"},toolTip:lng("my content")},Blsm.isFeatureEnabled("participation_planning")&&l.is_owner&&{icon:"calendar",toolTip:lng("participation planning"),onClick:function(){return(0,fe.p4)({list:"participation_planning",params:"group_id=".concat(a.group_id)},!0)}},window.bchat&&{icon:"chat",onClick:function(){return Blsm.chat_with_group(l.group_id)}},Blsm.InitialData.special.watchittoo&&(null===(n=l.owner_options)||void 0===n?void 0:n.watchittoo)&&{icon:"chalkboard",href:{newrow:l.group_id},toolTip:lng("liveclass")},l.is_owner||l.is_manager?(null===(r=l.group_options)||void 0===r?void 0:r.ou_report)>0&&{icon:"report",onClick:function(){return l.tab="reports"},toolTip:lng("reports")}:{icon:"report",href:{report:"CourseGradesReport",params:{group:this.group_id,user_mode:1}}},l.portal_id?{icon:"home",onClick:function(){return(0,fe.p4)({portal:l.portal_id},!0)},toolTip:lng("portal")}:u&&{icon:"home",onClick:function(){return(0,y.vm)().openDialog("form",new de.q({newPortalInfo:s,onSaveSuccess:c}))},toolTip:lng("portal")},p&&{icon:"mng_budget",toolTip:lng("set up for sale"),onClick:function(){return(0,y.vm)().openDialog("form",new mt({group_id:l.group_id,onSaveSuccess:function(){return(0,y.vm)().closeDialog()}}))}},this.showHierarchy&&{icon:"hierarchy",onClick:function(){return l.tab="hierarchy"},toolTip:lng("hierarchy")},"Qualification"===l.group_type&&l.qual_list.length>1&&{icon:"map_spot",onClick:function(){l.qualificationLevelsExpand++,window.scrollTo({top:0,behavior:"smooth"})},toolTip:lng("view full path")},(null===(o=l.mayEditSetting)||void 0===o?void 0:o.call(l))&&{icon:"mng_settings",href:{edit:"workspace",id:l.group_id},toolTip:lng("settings"),bgColor:pe.g.colors.grey},(null===(i=l.mayCreateInstance)||void 0===i?void 0:i.call(l))&&{icon:"new",onClick:function(){return(0,fe.p4)({edit:"workspace",params:{type:"course",template:l.group_id}},!0)},toolTip:lng("create an instance")}]}},{key:"duplicateMeetings",value:function(e){var t=this,n=e.filter((function(e){return e.assignment_id})).map((function(e){return e.assignment_id})),r=e.filter((function(e){return"event"===e.type})).map((function(e){return e.id}));(0,y.vm)().openDialog("form",new it({meetingsIds:n,eventIds:r,onSaveSuccess:function(e){null==e||e.newSchedule.forEach((function(e){return t.schedule.push((0,N.aZ)(e,{workspace:t}))})),(0,y.vm)().closeDialog()}}))}},{key:"openEventForm",value:function(e){var t=this,n=new bt.Z({event:e,group_id:this.group_id,onSaveSuccess:function(n){t.status=null,n.event_info&&(e&&t.schedule.remove(e),t.schedule.push(new at.n(n.event_info,{workspace:t})),t.activeCalendarDate=(0,ue._3)(n.event_info.start_date).startOf("day"))}});(0,y.vm)().openDialog("form",n)}},{key:"checkVisible",value:function(e){"schedule"===this.tab?this.scheduleItems.forEach((function(t){t.isEntity&&t.select(!!e)})):this.components.forEach((function(t){return t.select(!!e)}))}},{key:"MeetingActions",value:function(){var e=this,t=[],n=this.scheduleItems.length,r="schedule"===this.tab?this.scheduleItems.filter((function(e){return e.selected})):this.components.filter((function(e){return e.selected})),o=r.filter((function(e){return"meeting"===e.type||"event"===e.type}));return t.push(this.mayChangeComponents("meeting")&&{icon:"trash",action:r.length?function(){r.filter((function(e){return"meeting"===e.type&&e.icalUid})).length>0?(0,E.cS)(lng("are you sure you want to remove these components?"),{title:lng("delete").caps(),inputType:"checkbox",placeholder:lng("send invite cancellation (only for meetings where invitations were sent)"),onConfirm:function(t){return e.deleteComponents(r,t)}}):(0,E.BB)(lng("are you sure you want to remove these components?").caps(),{title:lng("remove components"),confirmText:lng("remove").caps(),onConfirm:function(){return e.deleteComponents(r,!1)}})}:void 0,toolTip:lng("remove component")},"schedule"===this.tab&&(this.mayCreateEvents()||this.mayCreateMeetings())&&n>0&&{icon:"copy",action:o.length>0?function(){return e.duplicateMeetings(o)}:void 0,toolTip:lng("duplicate")},this.maySetAttendance()&&n>0&&{icon:"meeting",toolTip:lng("import meeting attendance"),action:function(){return(0,y.vm)().openDialog("form",new Pt({groupId:e.id}))}},this.mayChangeComponents("meeting")&&{icon:"notifications",toolTip:lng("send invitations"),action:o.length>0?function(){var t=o.filter((function(e){return e.attr("assignment_id")&&moment(e.attr("start_date")).isAfter(new Date)})).map((function(e){return e.attr("assignment_id")}));return 0===t.length?(0,_e.nb)(lng("please select at least one future meeting")):(0,y.vm)().openDialog("form",new nn({ids:t,ws:e.id}))}:void 0},this.mayChangeComponents("meeting")&&{icon:"edit",toolTip:lng("edit multiple meetings"),action:o.length>0?function(){(0,y.vm)().openDialog("form",new qt({names:o.map((function(e){return e.assignment_name||e._attr.title})),ids:o.map((function(e){return e.assignment_id})).filter((function(e){return e})),event_ids:o.map((function(e){return e._attr.event_id})).filter((function(e){return e})),group_id:e.id,onSaveSuccess:function(){return(0,y.vm)().closeDialog(),e.fetch()}}))}:void 0},this.mayChangeComponents("meeting")&&n>0&&this.group_options.show_unattended_message&&{icon:"waiting_list",toolTip:lng("absent members message"),action:function(){return(0,y.vm)().openDialog("form",new Xr({groupId:e.id,meetings:r.map((function(e){return e.assignment_id}))}))}}),t}},{key:"show_members_drawer",get:function(){return this._show_members_drawer}},{key:"loading_tasks",get:function(){return this._loading_tasks}},{key:"tab",get:function(){var e,t;return null!==(e=this.sections)&&void 0!==e&&e.includes(this._tab)?this._tab:null===(t=this.tabs[0])||void 0===t?void 0:t.val},set:function(e){this.backTabsList.includes(this.tab)&&(this.lastBackTab=this.tab);var t="components"===e&&this.active_unit_id||"";this.nav(e?[e,t]:[])}},{key:"backTabsList",get:function(){return["welcome","components","social","tasks","patients_communication","schedule","requirements","planning"]}},{key:"filteredTasks",get:function(){return(0,v.WB)(this.tasks.slice(),this.tasks_filterNsort.filter,this.tasks_filterNsort.sort)}},{key:"selectedTasks",get:function(){return this.filteredTasks.filter((function(e){return e._checked}))}},{key:"discussionsBlogs",get:function(){var e=this.discussions.map((function(e){return new A.$(e)})),t=this.blog.map((function(e){var t,n,r;return{type:"blog",id:"b_"+e.lesson_id,blog_id:e.lesson_id,title:e.lesson_name,user:e.author,comments_count:e.comment_count,date:(0,ue._3)(e.modification_time),lesson_text_data:e.lesson_text_data,lesson_options:{lock_comments:null===(t=e.lesson_options)||void 0===t?void 0:t.lock_comments},mayEdit:"0"!=e.can_edit,likes:{likes:parseInt(null===(n=e.likes)||void 0===n?void 0:n.likes)||0,user_vote:null===(r=e.likes)||void 0===r?void 0:r.user_vote}}}));return e.concat(t).sort((function(e,t){return t.date-e.date}))}},{key:"filteredDiscussionsBlogs",get:function(){return(0,v.WB)(this.discussionsBlogs,this.discussions_blogs_filterNsort.filter,this.discussions_blogs_filterNsort.sort)}},{key:"nextAssignment",get:function(){return this.assignments.find((function(e){return!1===e._attr.status.completed}))}},{key:"nextMeeting",get:function(){return this.schedule.find((function(e){return!!(0,z.Lj)(e,"start_date")&&!(0,ue._3)((0,z.Lj)(e,"start_date")).isBefore()}))}},{key:"allEvents",get:function(){var e=this;return(0,_.B5)(this.active_unit_id)||"0"===this.active_unit_id||0===this.active_unit_id?this.schedule.filter((function(t){return e.active_unit_id>0?t.unitId===e.active_unit_id:!t.unitId||!e.unitIds.includes(t.unitId)})):this.schedule}},{key:"members",get:function(){return this.membersLoaded?this._members:(this.fetchMembers(),null)}},{key:"managers",get:function(){return this.managersLoaded?this._managers:(this.fetchManagers(),null)}},{key:"filteredAssignments",get:function(){var e=this,t=this.assignments.slice().sort((function(e,t){return(e.order+"").localeCompare(t.order+"",void 0,{numeric:!0})}));return(0,_.B5)(this.active_unit_id)||"0"===this.active_unit_id||0===this.active_unit_id?t.filter((function(t){return e.active_unit_id>0?t.unitId===e.active_unit_id:!t.unitId||!e.unitIds.includes(t.unitId)})):t}},{key:"filteredSharedContent",get:function(){var e=this,t=this.contents.slice().sort((function(e,t){return(e.order+"").localeCompare(t.order+"",void 0,{numeric:!0})}));return(0,_.B5)(this.active_unit_id)||"0"===this.active_unit_id||0===this.active_unit_id?t.filter((function(t){return e.active_unit_id>0?t.unitId===e.active_unit_id:!t.unitId||!e.unitIds.includes(t.unitId)})):t}},{key:"reports",get:function(){return this.reportsLoaded?this._reports:(this.fetchReports(),null)}},{key:"reportsBundle",get:function(){return this.reportsLoaded?this._reportsBundle:(this.fetchReports(),null)}},{key:"meetings",get:function(){return this.schedule.filter((function(e){return"meeting"===e.type}))}},{key:"componentsList",get:function(){return[].concat(Hr(this.assignments),Hr(this.meetings),Hr(this.contents))}},{key:"components",get:function(){var e=this,t=this.componentsList;return((0,_.B5)(this.active_unit_id)||"0"===this.active_unit_id||0===this.active_unit_id)&&(t=t.filter((function(t){return e.active_unit_id>0?t.unitId===e.active_unit_id:!(t.unitId&&e.unitIds.includes(t.unitId)||t._attr.condition_component)}))),t=t.sort((function(e,t){return e.order||t.order?(e.order+"").localeCompare(t.order+"",void 0,{numeric:!0}):(e._attr.due_date+"").localeCompare(t._attr.due_date+"",void 0,{numeric:!0})})),this.mayChangeComponents()||(t=t.sort((function(e,t){return t.is_waiting-e.is_waiting}))),(0,v.WB)(t,this.components_filterNsort.filter,this.components_filterNsort.sort)}},{key:"scheduleItems",get:function(){var e,t=null!==(e=this.schedule_filterNsort.filter)&&void 0!==e&&e.show_assignments?[].concat(Hr(this.assignmentsWithDueDate()),Hr(this.schedule)):Hr(this.schedule),n=(0,v.WB)(t,this.schedule_filterNsort.filter,this.schedule_filterNsort.sort);if("sortTime"===this.schedule_filterNsort.sort.by){var r,o,i=0,a={};(r=n.map((function(e){return[(0,ue.GG)(e.sortTime,{time:!1}),e.sortTime.unix()]}))).sort((function(e,t){return e[1]>t[1]?1:-1})),r.forEach((function(e){o!==e[0]&&(o=e[0],i++),a[e[0]]=i})),o=void 0;var l=[];return n.forEach((function(e){var t=(0,ue.GG)(e.sortTime,{time:!1});o!==t?(o=t,l.push({type:"dayNumber",day:a[t],date:t},e)):l.push(e)})),l}return n}},{key:"filters",get:function(){var e=[this.filteredAssignments.length>0&&{val:"assignment",label:lng("assignment"),color:pe.g.colors.green,icon:"menu_overview"},this.scheduleItems.length>0&&{val:"meeting",label:lng("meeting",{phrase:!0}),color:pe.g.colors.purple,icon:"menu_calendar"},this.filteredSharedContent.length>0&&{val:"share",label:lng("content"),color:pe.g.colors.light_blue,icon:"content"}].filter((function(e){return e})),t=[{name:"title",label:lng("title"),type:"text"},{name:"type",label:lng("type"),type:"button_toggle",options:e}];return(this.filteredAssignments.length>0||this.scheduleItems.length>0)&&t.push({name:"descriptionText",label:lng("description"),type:"text"}),(this.filteredAssignments.length>0||this.filteredSharedContent.length>0)&&t.push({name:"category_id",label:lng("category"),type:"tree_node",tree:this.categoriesTree}),t}},{key:"maySendSlackMessage",get:function(){return(this.is_owner||this.is_manager)&&this.slack_webhook&&Blsm.isFeatureEnabled("slack")}},{key:"mayAddMessage",get:function(){return(this.is_owner||this.is_manager)&&this.features.group_messages}},{key:"mayEditMessageVisibility",get:function(){return(0,_.B5)(this.group_id)&&this.permissions[Blsm.ManagerPermissions.MANAGE]}},{key:"showNewComponentButton",get:function(){return(this.components.length>0&&"components"===this.tab||this.tab)&&(this.mayCreateAssignments()||this.mayCreateMeetings()||this.mayShareContent()||this.mayAddMessage||this.mayCreateDiscussion()||this.mayCreatePoll()||this.mayCreatePost()||this.mayCreateTask())}},{key:"orderedUnits",get:function(){var e,t=[],n=Vr(this.units);try{for(n.s();!(e=n.n()).done;){var r=e.value;(0,_.B5)(r.unit_id)&&t.push(r)}}catch(e){n.e(e)}finally{n.f()}t=t.sort((function(e,t){return e.attr("unit_order")-t.attr("unit_order")}));var o,i=Vr(this.units);try{for(i.s();!(o=i.n()).done;){var a=o.value;(0,_.B5)(a.unit_id)||t.push(a)}}catch(e){i.e(e)}finally{i.f()}return t}},{key:"waitingListSelected",get:function(){var e;return null===(e=this.waitingList)||void 0===e?void 0:e.filter((function(e){return e._checked})).map((function(e){return e.user_id}))}},{key:"registeredUsersSelected",get:function(){var e;return null===(e=this.registeredUsers)||void 0===e?void 0:e.filter((function(e){return e._checked})).map((function(e){return e.user_id}))}},{key:"unitIds",get:function(){var e=[];return this.units.forEach((function(t){if((0,_.B5)(t.unit_id)&&(e.push(t.unit_id),t.sub_units.length)){var n=t.sub_units.map((function(e){return e.unit_id}));n&&e.push.apply(e,Hr(n))}})),e}},{key:"isVisibleChecked",get:function(){return"schedule"===this.tab?this.scheduleItems.length>0&&this.scheduleItems.filter((function(e){return e.isEntity})).reduce((function(e,t){return e&&t.selected}),!0):this.components.reduce((function(e,t){return e&&t.selected}),!0)}},{key:"tabFiltersSorts",get:function(){var e=this.filteredAssignments.length,t=this.scheduleItems.length,n=this.filteredSharedContent.length,r=[{name:"title",label:lng("title"),type:"text",outOfMenu:!0}],o=[{val:"",label:lng("default")},{val:"title",label:lng("title")},{val:"type",label:lng("type")}];if("components"===this.tab){var i=[e>0&&{val:"assignment",label:lng("assignment"),color:pe.g.colors.green,icon:"menu_overview"},t>0&&{val:"meeting",label:lng("meeting",{phrase:!0}),color:pe.g.colors.purple,icon:"menu_calendar"},n>0&&{val:"share",label:lng("content"),color:pe.g.colors.light_blue,icon:"content"}].filter((function(e){return e}));r.push({name:"type",label:lng("type"),type:"button_toggle",options:i}),(n>0||e>0)&&r.push({name:"category_id",label:lng("category"),type:"tree_node",tree:this.categoriesTree})}return["components","schedule"].includes(this.tab)&&(t>0&&(r.push.apply(r,Hr(this.meetingFilters)),o.push({val:"location",label:lng("location")})),(e>0||t>0)&&(r.push({name:"descriptionText",label:lng("description"),type:"text"}),o.push({val:"sortTime",label:lng("date")}))),"schedule"===this.tab&&r.push({name:"show_assignments",label:lng("show assignments"),type:"checkbox"}),{filters:r,sorts:o}}},{key:"filteredPlanning",get:function(){return(0,v.WB)(this.planning.slice(),this.planning_filterNsort.filter,this.planning_filterNsort.sort)}},{key:"checkedPlanningItems",get:function(){return this.planning.filter((function(e){return e._checked}))}}])&&$r(t.prototype,n),r&&$r(t,r),e}()).prototype,"ready",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),qn=Qr(Mn.prototype,"_tab",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),Xn=Qr(Mn.prototype,"display_message",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Ln=Qr(Mn.prototype,"managersLoaded",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Un=Qr(Mn.prototype,"membersLoaded",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Vn=Qr(Mn.prototype,"waitingListLoaded",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Hn=Qr(Mn.prototype,"activeCalendarDate",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return moment().startOf("day")}}),Gn=Qr(Mn.prototype,"warnings",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Jn=Qr(Mn.prototype,"active_unit",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Wn=Qr(Mn.prototype,"active_unit_id",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Kn=Qr(Mn.prototype,"activeBlog",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),$n=Qr(Mn.prototype,"group_options",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),Yn=Qr(Mn.prototype,"qual_list",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Qn=Qr(Mn.prototype,"is_owner",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),er=Qr(Mn.prototype,"is_manager",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),tr=Qr(Mn.prototype,"waitingList",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),nr=Qr(Mn.prototype,"assignments",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),rr=Qr(Mn.prototype,"_managers",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),or=Qr(Mn.prototype,"_waiting_list",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ir=Qr(Mn.prototype,"_members",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ar=Qr(Mn.prototype,"registeredUsers",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),lr=Qr(Mn.prototype,"allowedUserFields",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),sr=Qr(Mn.prototype,"schedule",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),cr=Qr(Mn.prototype,"planning",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),ur=Qr(Mn.prototype,"contents",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),pr=Qr(Mn.prototype,"portal_id",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),dr=Qr(Mn.prototype,"discussions",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),fr=Qr(Mn.prototype,"blog",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),mr=Qr(Mn.prototype,"polls",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),gr=Qr(Mn.prototype,"tasks",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),hr=Qr(Mn.prototype,"_loading_tasks",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),br=Qr(Mn.prototype,"tasks_stats",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),yr=Qr(Mn.prototype,"_reports",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return{}}}),vr=Qr(Mn.prototype,"reportsLoaded",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),_r=Qr(Mn.prototype,"units",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),wr=Qr(Mn.prototype,"componentsView",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return ce.X.get("workspace_components_view")||""}}),Or=Qr(Mn.prototype,"patients_communication",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),kr=Qr(Mn.prototype,"tasks_filterNsort",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,v.Cy)()}}),xr=Qr(Mn.prototype,"planning_filterNsort",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,v.Cy)()}}),Sr=Qr(Mn.prototype,"discussions_blogs_filterNsort",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,v.Cy)()}}),jr=Qr(Mn.prototype,"components_filterNsort",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,v.Cy)()}}),Cr=Qr(Mn.prototype,"schedule_filterNsort",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return(0,v.Cy)({},{by:"sortTime"})}}),Pr=Qr(Mn.prototype,"waiting_list_active",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Zr=Qr(Mn.prototype,"max_users",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),Br=Qr(Mn.prototype,"showUnits",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Tr=Qr(Mn.prototype,"myContents",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Er=Qr(Mn.prototype,"displayManagers",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ir=Qr(Mn.prototype,"mailingList",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Ar=Qr(Mn.prototype,"mailingListLoaded",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Dr=Qr(Mn.prototype,"_show_members_drawer",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Rr=Qr(Mn.prototype,"meetingUrl",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),Nr=Qr(Mn.prototype,"hierarchy",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),zr=Qr(Mn.prototype,"groupMessages",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Mr=Qr(Mn.prototype,"availableRootGroups",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),Fr=Qr(Mn.prototype,"welcome_message",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),qr=Qr(Mn.prototype,"qualificationLevelsExpand",[h.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),Qr(Mn.prototype,"show_members_drawer",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"show_members_drawer"),Mn.prototype),Qr(Mn.prototype,"showMembersDrawer",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"showMembersDrawer"),Mn.prototype),Qr(Mn.prototype,"deleteContent",[fn],Object.getOwnPropertyDescriptor(Mn.prototype,"deleteContent"),Mn.prototype),Qr(Mn.prototype,"hideMembersDrawer",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"hideMembersDrawer"),Mn.prototype),Qr(Mn.prototype,"loading_tasks",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"loading_tasks"),Mn.prototype),Qr(Mn.prototype,"tab",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"tab"),Mn.prototype),Qr(Mn.prototype,"filteredTasks",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"filteredTasks"),Mn.prototype),Qr(Mn.prototype,"selectedTasks",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"selectedTasks"),Mn.prototype),Qr(Mn.prototype,"discussionsBlogs",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"discussionsBlogs"),Mn.prototype),Qr(Mn.prototype,"filteredDiscussionsBlogs",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"filteredDiscussionsBlogs"),Mn.prototype),Qr(Mn.prototype,"nextAssignment",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"nextAssignment"),Mn.prototype),Qr(Mn.prototype,"nextMeeting",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"nextMeeting"),Mn.prototype),Qr(Mn.prototype,"allEvents",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"allEvents"),Mn.prototype),Qr(Mn.prototype,"members",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"members"),Mn.prototype),Qr(Mn.prototype,"managers",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"managers"),Mn.prototype),Qr(Mn.prototype,"filteredAssignments",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"filteredAssignments"),Mn.prototype),Qr(Mn.prototype,"filteredSharedContent",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"filteredSharedContent"),Mn.prototype),Qr(Mn.prototype,"reports",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"reports"),Mn.prototype),Qr(Mn.prototype,"meetings",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"meetings"),Mn.prototype),Qr(Mn.prototype,"componentsList",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"componentsList"),Mn.prototype),Qr(Mn.prototype,"components",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"components"),Mn.prototype),Qr(Mn.prototype,"scheduleItems",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"scheduleItems"),Mn.prototype),Qr(Mn.prototype,"updateRoute",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"updateRoute"),Mn.prototype),Qr(Mn.prototype,"maySendSlackMessage",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"maySendSlackMessage"),Mn.prototype),Qr(Mn.prototype,"mayAddMessage",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"mayAddMessage"),Mn.prototype),Qr(Mn.prototype,"mayEditMessageVisibility",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"mayEditMessageVisibility"),Mn.prototype),Qr(Mn.prototype,"showNewComponentButton",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"showNewComponentButton"),Mn.prototype),Qr(Mn.prototype,"fetch",[mn],Object.getOwnPropertyDescriptor(Mn.prototype,"fetch"),Mn.prototype),Qr(Mn.prototype,"fetchGroupMessages",[gn],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchGroupMessages"),Mn.prototype),Qr(Mn.prototype,"fetchHierarchy",[hn],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchHierarchy"),Mn.prototype),Qr(Mn.prototype,"fetchQualList",[bn],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchQualList"),Mn.prototype),Qr(Mn.prototype,"fetchManagers",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchManagers"),Mn.prototype),Qr(Mn.prototype,"fetchMembers",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchMembers"),Mn.prototype),Qr(Mn.prototype,"fetchMailinList",[yn],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchMailinList"),Mn.prototype),Qr(Mn.prototype,"fetchReports",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchReports"),Mn.prototype),Qr(Mn.prototype,"fetchTasks",[h.action],Object.getOwnPropertyDescriptor(Mn.prototype,"fetchTasks"),Mn.prototype),Qr(Mn.prototype,"createPoll",[vn],Object.getOwnPropertyDescriptor(Mn.prototype,"createPoll"),Mn.prototype),Qr(Mn.prototype,"deletePoll",[_n],Object.getOwnPropertyDescriptor(Mn.prototype,"deletePoll"),Mn.prototype),Qr(Mn.prototype,"getBlogPostOrgData",[wn],Object.getOwnPropertyDescriptor(Mn.prototype,"getBlogPostOrgData"),Mn.prototype),Qr(Mn.prototype,"setActiveBlog",[On],Object.getOwnPropertyDescriptor(Mn.prototype,"setActiveBlog"),Mn.prototype),Qr(Mn.prototype,"removeBlog",[kn],Object.getOwnPropertyDescriptor(Mn.prototype,"removeBlog"),Mn.prototype),Qr(Mn.prototype,"toggleUserVotePost",[xn],Object.getOwnPropertyDescriptor(Mn.prototype,"toggleUserVotePost"),Mn.prototype),Qr(Mn.prototype,"toggleLockPostComments",[Sn],Object.getOwnPropertyDescriptor(Mn.prototype,"toggleLockPostComments"),Mn.prototype),Qr(Mn.prototype,"addGroupMessageLocally",[jn],Object.getOwnPropertyDescriptor(Mn.prototype,"addGroupMessageLocally"),Mn.prototype),Qr(Mn.prototype,"updateGroupMessageLocally",[Cn],Object.getOwnPropertyDescriptor(Mn.prototype,"updateGroupMessageLocally"),Mn.prototype),Qr(Mn.prototype,"addGroupMessage",[Pn],Object.getOwnPropertyDescriptor(Mn.prototype,"addGroupMessage"),Mn.prototype),Qr(Mn.prototype,"addSlackMessage",[Zn],Object.getOwnPropertyDescriptor(Mn.prototype,"addSlackMessage"),Mn.prototype),Qr(Mn.prototype,"updateGroupMessage",[Bn],Object.getOwnPropertyDescriptor(Mn.prototype,"updateGroupMessage"),Mn.prototype),Qr(Mn.prototype,"removeGroupMessage",[Tn],Object.getOwnPropertyDescriptor(Mn.prototype,"removeGroupMessage"),Mn.prototype),Qr(Mn.prototype,"toggleGroupMessage",[En],Object.getOwnPropertyDescriptor(Mn.prototype,"toggleGroupMessage"),Mn.prototype),Qr(Mn.prototype,"updateNoticeBoardVisibility",[In],Object.getOwnPropertyDescriptor(Mn.prototype,"updateNoticeBoardVisibility"),Mn.prototype),Qr(Mn.prototype,"orderedUnits",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"orderedUnits"),Mn.prototype),Qr(Mn.prototype,"waitingListSelected",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"waitingListSelected"),Mn.prototype),Qr(Mn.prototype,"registeredUsersSelected",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"registeredUsersSelected"),Mn.prototype),Qr(Mn.prototype,"registeredUsersReject",[An],Object.getOwnPropertyDescriptor(Mn.prototype,"registeredUsersReject"),Mn.prototype),Qr(Mn.prototype,"waitingListApprove",[Dn],Object.getOwnPropertyDescriptor(Mn.prototype,"waitingListApprove"),Mn.prototype),Qr(Mn.prototype,"waitingListReject",[Rn],Object.getOwnPropertyDescriptor(Mn.prototype,"waitingListReject"),Mn.prototype),Qr(Mn.prototype,"canApproveMembers",[Nn],Object.getOwnPropertyDescriptor(Mn.prototype,"canApproveMembers"),Mn.prototype),Qr(Mn.prototype,"toggleDisplayManager",[zn],Object.getOwnPropertyDescriptor(Mn.prototype,"toggleDisplayManager"),Mn.prototype),Qr(Mn.prototype,"unitIds",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"unitIds"),Mn.prototype),Qr(Mn.prototype,"isVisibleChecked",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"isVisibleChecked"),Mn.prototype),Qr(Mn.prototype,"filteredPlanning",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"filteredPlanning"),Mn.prototype),Qr(Mn.prototype,"checkedPlanningItems",[h.computed],Object.getOwnPropertyDescriptor(Mn.prototype,"checkedPlanningItems"),Mn.prototype),Mn)},84943:function(e,t,n){"use strict";n.d(t,{I:function(){return b},b:function(){return h}});var r,o,i,a,l=n(87363),s=n(27821),c=n(98e3),u=n(10918);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t,n,r){n&&Object.defineProperty(e,t,{enumerable:n.enumerable,configurable:n.configurable,writable:n.writable,value:n.initializer?n.initializer.call(r):void 0})}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t,n,r,o){var i={};return Object.keys(r).forEach((function(e){i[e]=r[e]})),i.enumerable=!!i.enumerable,i.configurable=!!i.configurable,("value"in i||i.initializer)&&(i.writable=!0),i=n.slice().reverse().reduce((function(n,r){return r(e,t,n)||n}),i),o&&void 0!==i.initializer&&(i.value=i.initializer?i.initializer.call(o):void 0,i.initializer=void 0),void 0===i.initializer&&(Object.defineProperty(e,t,i),i=null),i}var h=(0,l.createContext)(null),b=(o=g((r=function(){function e(t){var n=this,r=t.nav;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),f(this,"_allEvents",o,this),f(this,"year",i,this),f(this,"ready",a,this),(0,s.makeObservable)(this),this.nav=r,(0,c.SC)("calendar/yearly",{},(0,s.action)((function(e){n._allEvents=e.events,n.ready=!0})))}var t,n,r;return t=e,(n=[{key:"moveYear",value:function(e){this.nav(["up"===e?this.year+1:this.year-1])}},{key:"updateRoute",value:function(e){var t=p(e,1)[0];this.year=parseInt(t||(new Date).getFullYear())}},{key:"eventsArray",get:function(){return(0,u.a)(this._allEvents,this.year)}}])&&m(t.prototype,n),r&&m(t,r),e}()).prototype,"_allEvents",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),i=g(r.prototype,"year",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),a=g(r.prototype,"ready",[s.observable],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),g(r.prototype,"moveYear",[s.observable],Object.getOwnPropertyDescriptor(r.prototype,"moveYear"),r.prototype),g(r.prototype,"updateRoute",[s.action],Object.getOwnPropertyDescriptor(r.prototype,"updateRoute"),r.prototype),g(r.prototype,"eventsArray",[s.computed],Object.getOwnPropertyDescriptor(r.prototype,"eventsArray"),r.prototype),r)},95033:function(e,t,n){"use strict";n.d(t,{Al:function(){return _e},zq:function(){return we},aA:function(){return je},Mz:function(){return xe},qz:function(){return Se},Xq:function(){return ve}});var r=n(15560),o=n(75898),i=n(95875),a=n(70917),l=n(16920),s=n(87363),c=n(70081),u=n(55832),p=n(8411),d=n(71134),f=n(48207),m=n(31991),g=n(64902),h=n(3755),b=n(40236),y=n(43389),v=n(74216),_=n(28534),w=n(9934),O=n(98e3),k=n(68567),x=n(27821),S=n(69637),j=n(22334);var C={bg:"#f5f4f5",grey_1:"#7d7d7d",grey_2:"#D8D8D8",grey_3:"#5D676D",grey_4:"silver",grey_5:"#e7e7e7",grey_6:"#c0c0c0",grey_7:"#e8e8e8",grey_8:"#ebedee",grey_9:"#869299",grey_10:"#b1b8bc",grey_11:"#52636C",grey_12:"#c9c9c9",blue:"#0d2532",strong:"#ff9800",positive:"#4aaa61",negative:"#d03434",blossom:"#20ae61",warning:"#e87e0d"},P=$("HTML").hasClass("RTL");P&&document.getElementById("bchat_full")&&(P=!1,$("HTML").removeClass("RTL"));var Z=C,B=n(35519),T=n(24210);function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function I(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function D(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=z(e);if(t){var o=z(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return R(this,n)}}function R(e,t){return!t||"object"!==E(t)&&"function"!=typeof t?N(e):t}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z(e){return(z=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var F,q=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,n,r,o=D(i);function i(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),M(N(t=o.call(this,e)),"coaches",void 0),M(N(t),"checkedItems",void 0),M(N(t),"rowIdCol",void 0),M(N(t),"assignmentEntity",void 0),M(N(t),"possibleCoaches",void 0),M(N(t),"buildFields",(function(){t._fields=[{name:"user",label:lng("select coach"),confirmText:lng("set"),type:"select",options:(0,d.wd)(t.coaches)},{name:"send_notification",type:"checkbox",label:lng("send notification to coach")}],t._prepFields(),t.ready=!0})),t.coaches=e.coaches,t.checkedItems=e.checkedItems,t.rowIdCol=e.rowIdCol,t.assignmentEntity=e.assignmentEntity,t.possibleCoaches=e.possibleCoaches,t.title=lng("set coach").caps(),t.buildFields(),t}return t=i,(n=[{key:"save",value:function(){var e=this,t=this.checkedItems.map((function(t){return t[e.rowIdCol]})),n=Object.fromEntries(t.map((function(t){return[t,e.values.get("user")]}))),r={assignment:this.assignmentEntity.assignment_id,data:n,notify_coach:this.values.get("send_notification"),users:t};(0,O.SC)("assignment/set_coach",{data:r,method:"POST"},(function(){e.checkedItems.forEach((function(t){t.coach_name=e.possibleCoaches[e.values.get("user")],t.coach_id=e.values.get("user")})),e.values.get("send_notification")&&(0,_.qV)("notification will be sent to the selected coach")}))}}])&&I(t.prototype,n),r&&I(t,r),i}(T.I),X=n(33346),L=n(35944);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function G(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=K(e);if(t){var o=K(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return J(this,n)}}function J(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?W(e):t}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function K(e){return(K=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Q,ee,te,ne,re,oe,ie=(F=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(i,e);var t,n,r,o=G(i);function i(e){var t,n,r=e.assignment;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),Y(W(n=o.call(this,{})),"_innerFilterSort",!0),Y(W(n),"possible_coaches",void 0),Y(W(n),"assignment_data",void 0),Y(W(n),"assignmentEntity",void 0),(0,x.makeObservable)(W(n)),n.assignmentEntity=r,n.RowRenderer=ae,n._actionsCol=!1,n.flags={personal_dates:r.attr("personal_dates"),coachable:"coach"===r.attr("completion_requirement")||r.attr("managerun")===B.hy||(null===(t=r.attr("assignment_options"))||void 0===t?void 0:t.test_coach_review)},n._cols=[{title:lng("user name"),sortVal:"full_name",input:"text"},n.flags.personal_dates&&{title:lng("start date"),sortVal:"personal_start_date",input:"date"},n.flags.personal_dates&&{title:lng("due date"),sortVal:"next_due_date",input:"date"},n.flags.coachable&&{title:lng("coach"),sortVal:"coach_name",input:"text"}].filter((function(e){return e})),n.colsToFiltersAndSorts(),n.rowIdCol="user_id",n.fetchUrl="assignment/assignment_users_options/&assignment="+r.assignment_id+"&group="+r.workspace.group_id,n.ready=!0,n.fetch(),n}return t=i,(n=[{key:"_acceptDataFromServer",value:function(e){var t=this;this.items.replace(e.items.map((function(e){return e.personal_start_date=(0,j.GG)(e.personal_start_date,{time:!1}),e.next_due_date=(0,j.GG)(e.next_due_date,{time:!1}),new w.o(e)}))),this.possible_coaches=e.possible_coaches,this.assignment_data=e.assignment_data,this._actions=[this.flags.coachable&&(this.assignment_data.coach_type?{icon:"user_sync",action:function(){return t.recalculateCoach()},toolTip:lng("recalculate coach")}:{icon:"group",action:function(){return t.setCoach()},toolTip:lng("set coach")}),this.flags.coachable&&{icon:"notifications",action:function(){return t.notifyCoaches()},toolTip:lng("notify coaches")},this.flags.personal_dates&&{icon:"event",color:"".concat(Z.positive),action:function(){return t.setDates("start_date")},toolTip:lng("set personal start date")},this.flags.personal_dates&&{icon:"event",color:"".concat(Z.negative),action:function(){return t.setDates("due_date")},toolTip:lng("set personal due date")}]}},{key:"setDates",value:function(e){var t,n=this;if(!this.checkedItems.map((function(e){return e[n.rowIdCol]})).length)return(0,_.nb)(lng("please select at least one item").caps());var r=this.checkedItems,o=null===(t=this.assignmentEntity)||void 0===t?void 0:t._attr,i="due_date"===e?lng("select personal due date"):lng("select personal start date");(0,k.cS)(i.caps()+":",{title:lng("select dates"),confirmText:lng("save"),inputType:"date_time",onConfirm:function(t){var i=r.map((function(e){return e.user_id}));(0,O.SC)("assignment/set_personal_dates",{method:"POST",data:Y({assignment:o.assignment_id,users:i},e,t)},(function(){n.fetch()}))}})}},{key:"setCoach",value:function(){var e=this;if(!this.checkedItems.map((function(t){return t[e.rowIdCol]})).length)return(0,_.nb)(lng("please select at least one item").caps());var t=(0,d.wd)(Object.entries(this.possible_coaches));if(t.length){t.sort((function(e,t){return e.val.localeCompare(t.val)}));var n=new q({coaches:t,checkedItems:this.checkedItems,rowIdCol:this.rowIdCol,possibleCoaches:this.possible_coaches,assignmentEntity:this.assignmentEntity});(0,k.BB)((0,L.tZ)(T.q3.Provider,{value:n,children:(0,L.tZ)(X.au,{input:n.fields})}),{title:lng("select coach"),confirmText:lng("set"),onConfirm:function(){return n.callSave(),setTimeout(e.fetch,100)}})}else(0,_.nb)(lng("no coaches found, check assignment settings"))}},{key:"notifyCoaches",value:function(){var e=this,t=this.checkedItems.map((function(t){return t[e.rowIdCol]}));if(!t.length)return(0,_.nb)(lng("please select at least one item").caps());var n={assignment:this.assignmentEntity.assignment_id,users:t};(0,O.SC)("assignment/notify_coach",{data:n,method:"POST"},(function(){(0,_.qV)(lng("notification will be sent to selected coaches").caps())}))}},{key:"recalculateCoach",value:function(){var e=this,t=this.checkedItems.map((function(t){return t[e.rowIdCol]}));if(!t.length)return(0,_.nb)(lng("please select at least one item").caps());var n={assignment:this.assignmentEntity.assignment_id,users:t};(0,O.SC)("assignment/recalculate_coach",{data:n,method:"POST"},(function(){e.fetch()}))}}])&&V(t.prototype,n),r&&V(t,r),i}(v.D),Q=F.prototype,ee="_acceptDataFromServer",te=[x.override],ne=Object.getOwnPropertyDescriptor(F.prototype,"_acceptDataFromServer"),re=F.prototype,oe={},Object.keys(ne).forEach((function(e){oe[e]=ne[e]})),oe.enumerable=!!oe.enumerable,oe.configurable=!!oe.configurable,("value"in oe||oe.initializer)&&(oe.writable=!0),oe=te.slice().reverse().reduce((function(e,t){return t(Q,ee,e)||e}),oe),re&&void 0!==oe.initializer&&(oe.value=oe.initializer?oe.initializer.call(re):void 0,oe.initializer=void 0),void 0===oe.initializer&&(Object.defineProperty(Q,ee,oe),oe=null),F),ae=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=n.rowAction;return(0,L.BX)("tr",{onClick:function(){return null==r?void 0:r(t)},children:[(0,L.tZ)(S.U6,{children:t.full_name}),n.flags.personal_dates&&(0,L.tZ)("td",{children:t.personal_start_date||lng("default").caps()}),n.flags.personal_dates&&(0,L.tZ)("td",{children:t.next_due_date||lng("default").caps()}),n.flags.coachable&&(0,L.tZ)("td",{children:t.coach_name}),(0,L.tZ)(S.Fo,{o:t})]})})),le=(n(22906),n(23838)),se=(n(57882),n(34765)),ce=n(86303),ue=["assignment","inContainer","newTab","short","refLink"];function pe(e){return function(e){if(Array.isArray(e))return me(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||fe(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function de(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||fe(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function fe(e,t){if(e){if("string"==typeof e)return me(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?me(e,t):void 0}}function me(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function he(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ge(Object(n),!0).forEach((function(t){be(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function be(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ye(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var ve=function(e,t){switch(e){case"assignment_options":var n=new ie({assignment:t});(0,le.vm)().openDialog("Component",{child:(0,L.tZ)(y.b,{list:n}),title:lng("assignment member options")+" - "+t.title})}},_e=(0,r.observer)((function(e){var t=e.assignment,n=e.assignee,r=e.inContainer,i=e.noComments;return(0,L.tZ)(o.xr,{entity:t,assignee:n,noComments:i,playLink:t.playLink?t.playLink:t.link,onTitleClick:function(){return(0,le.vm)().showSideDrawer(t)},inContainer:r,onMenuSelect:function(e){return ve(e,t)}})})),we=function(e){var t=e.assignment,n=e.inContainer,r=e.newTab,s=void 0===r||r,c=e.short,u=void 0!==c&&c,p=e.refLink,f=ye(e,ue),m=(0,a.iv)("background-color:",l.g.colors.white,";&.short{flex-direction:column;align-items:flex-start;._subTitle{display:flex;justify-content:space-between;}}",""),b=t.title,y=t.type_title,v=t.category,_=t.progress,w=t.subTitle,O=t.users,k=t.countUsers,x=t.dateNote,S=t.link;return p&&(0,d.Kn)(S)&&(S.ref=p),(0,L.BX)(i.o,he(he({title:b,css:m,className:(0,d.AK)({short:u}),markColor:t.markColor,icon:t.markNew?"asterisk":void 0,iconColor:l.g.colors.dominant_orange,iconTooltip:lng("new|mark new content"),href:S,inContainer:n,newTab:s,tags:u?null:[y.toUpperCase(),v].filter((function(e){return e})),progress:!u&&_,subTitle:(0,L.BX)(L.HY,{children:[w,u&&x&&(0,L.tZ)(o.jC,he({noBoxShadow:!0,className:"_note"},x))]}),menuOptions:u?null:t.menu()},f),{},{children:[_&&(0,L.tZ)("div",{children:(0,L.tZ)(h.k,{numerator:_.progress[0],denominator:_.progress[1]})}),(null==O?void 0:O.length)>0&&(0,L.tZ)("div",{children:(0,L.tZ)(g.I9,{users:O,totalCount:k,maxSlots:3})}),!u&&x&&(0,L.tZ)("div",{children:(0,L.tZ)(o.jC,he({noBoxShadow:!0,className:"_note"},x))})]}))},Oe=(0,a.iv)(">.filtersAbove{position:relative;>div{position:absolute;bottom:1em;",l.g.classes.far(0),";}}",""),ke={name:"1gpzra0",styles:"margin-bottom:1em"},xe=function(e){var t=e.assignments,n=e.inContainer,r=e.filtersTheme,o=e.showCompleted,i=e.setShowCompleted,a=e.assignee,g=e.compactView,h=e.initCompactView,y=void 0!==h&&h,v=e.mayChangeView,_=e.title,w=e.className,O=e.barExtraComponent,k=e.filtersAbove,x=void 0!==k&&k,S=e.useCarousel,j=e.noFilterSort,C=e.noComments,P=e.displayTags,Z=de((0,s.useState)(y),2),B=Z[0],T=Z[1],E=(0,c.qD)(),I=E.filtersVals,A=E.setFilterVals,D=E.sort,R=E.setSort;o&&(I.show_completed=!0);var N=void 0!==g?g:B,z=[],M=[];t.forEach((function(e){e._attr.lesson_tags&&(z=[].concat(pe(z),pe(e._attr.lesson_tags))),e._attr.category_name&&(M=[].concat(pe(M),pe(e._attr.category_name)))})),z=pe(new Set(z)).filter((function(e){return e})).sort().map((function(e){return{val:e,label:e}}));var F=j?void 0:[{name:"title",label:lng("name"),type:"text",outOfMenu:!0},{name:"type_title",label:lng("type"),type:"select_multi",options:(0,u._V)("type_title",t)},{name:"category_name",type:"select",val:"category_name",emptyOption:!0,label:lng("category"),options:(0,u._V)("category",t)},i&&{name:"show_completed",type:"checkbox",label:lng("show completed assignments"),func:function(e,t){return t},onValueChange:function(e){return i(e),I.show_completed=e.show_completed}}].filter((function(e){return e})),q=j?void 0:[{val:"",label:lng("default")},{val:"assignment_name",label:lng("name")},{val:"assignment_type",label:lng("type")},{val:"category_name",label:lng("category")}],X=(0,L.tZ)(p.CX,{title:_,filters:F,filtersVals:I,onFilter:A,sorts:q,sort:D,onSort:R,compactView:N,onViewSelect:v?function(){return T(!N)}:void 0,extraComponent:O,collection:t});r&&(X=(0,L.tZ)(p.dI.Provider,{value:r,children:X}));var U=(0,u.WB)(t,I,D,{filters:F}).map((function(e){return N?(0,L.tZ)(se.Q,{item:e,onClick:function(){return(0,le.vm)().showSideDrawer(e)}},e.assignment_id):(0,L.tZ)(_e,{assignee:a,assignment:e,inContainer:!0,noComments:C},e.assignment_id)}));return n?(0,L.tZ)(f.W2,{head:X,className:w,children:N?(0,L.tZ)("div",{css:l.g.classes.list,children:U}):(0,L.tZ)(b.Hl,{children:U})}):(0,L.BX)("div",{css:Oe,className:w,children:[(0,L.tZ)("div",{className:(0,d.AK)({filtersAbove:x}),children:X}),P&&z.length>1&&(0,L.tZ)(ce._,{options:z,value:I.lesson_tags,theme:"tags",css:ke,onChange:function(e){return A((0,d.v7)(Object.assign({},I,{lesson_tags:e||void 0})))}}),S&&!N?(0,L.tZ)(m.T,{children:U}):N?(0,L.tZ)("div",{css:l.g.classes.list,children:U}):(0,L.tZ)(b.Hl,{children:U})]})},Se=function(e){return{content:lng("content"),readingConfirmation:lng("reading confirmation"),courseware:lng("courseware"),test:lng("test"),survey:lng("survey"),evaluation:lng("evaluation"),submit:lng("immediate completion"),approval:lng("complete on approval"),activity:lng("activity"),activityCoach:lng("activity coach"),checklistCoach:lng("checklist coach"),surveyCoach:Blsm.isFeatureEnabled("evaluation")?lng("survey/evaluation coach"):lng("survey coach"),master:lng("master"),checklist:lng("checklist"),external:lng("external"),feedback:lng("feedback"),lti:lng("lti")}[e]},je=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=[{topic:"file",type:"content",text:lng("an assignment based on a file or text content in the system that doesn't have a required score"),check:Blsm.isFeatureEnabled("content")},{topic:"file",type:"readingConfirmation",text:lng("an assignment that requires the performer's reading confirmation of a document"),check:Blsm.isFeatureEnabled("content")},{topic:"file",type:"courseware",text:lng("an assignment based on Scorm/Tincan"),check:Blsm.isFeatureEnabled("run_scorm")},{topic:"questionnaire",type:"test",text:lng("an assignment based on test type questionnaire"),check:Blsm.isFeatureEnabled("tests")},{topic:"questionnaire",type:"survey",text:lng("an assignment based on survey type questionnaire"),check:Blsm.isFeatureEnabled("survey")},{topic:"questionnaire",type:"evaluation",text:lng("an assignment based on evaluation type questionnaire"),check:Blsm.isFeatureEnabled("evaluation")},{topic:"submission",type:"approval",text:lng("an assignment in which the performer has to write or submit something that requires review and approval"),check:!0},{topic:"submission",type:"submit",text:lng("an assignment in which the performer has to write something. after submitting, the performance is immediately completed"),check:!0},{topic:"submission",type:"activity",text:lng("an assignment that reflects activity in the real world.").caps()+" "+lng("for example: completing a written assignment, taking the verbal test, submitting homework, etc").caps(),check:!0},{topic:"coaching",type:"activityCoach",text:lng("an assignment that a coach performs on a trainee with automatic completion"),check:Blsm.isFeatureEnabled("coached_assignments")},{topic:"coaching",type:"checklistCoach",text:lng("an assignment that contains a list of things to do in which the coach checks each time what has been done"),check:Blsm.isFeatureEnabled("coached_assignments")&&Blsm.isFeatureEnabled("checklist")},{topic:"coaching",type:"surveyCoach",text:Blsm.isFeatureEnabled("evaluation")?lng("an assignment based on survey/evaluation type questionnaire that the activator is coach"):lng("an assignment based on survey type questionnaire that the activator is coach"),check:Blsm.isFeatureEnabled("coached_assignments")&&Blsm.isFeatureEnabled("survey")},{topic:"other",type:"master",text:lng("an assignment that contains several sub assignments where each one has a weight that makes up the final score of the master assignments"),check:!0,mod:["assignments","ENT"]},{topic:"other",type:"checklist",text:lng("an assignment that contains a list of things to do in which the performer checks each time what has been done"),check:Blsm.isFeatureEnabled("checklist")},{topic:"other",type:"external",text:lng("an assignment that is not performed at all in the system and it is only necessary to set a score for the users"),check:(0,d.B5)(e.ws)},{topic:"other",type:"feedback",text:lng("an assignment in which feedback must be given on the performance of different assignment in the system. the feedback assignment is performed by another user in the system"),check:Blsm.isFeatureEnabled("feedback_assignments")},{topic:"other",type:"lti",text:lng("an assignment based on LTI"),check:Blsm.isFeatureEnabled("external_content")}];(n=n.filter((function(e){return!!e.check&&Blsm.checkMod(e.mod)&&(0===t.length||t.includes(e.type))}))).forEach((function(t){t.typeLabel=Se(t.type),t.action={edit:"assignment",params:he(he({},e),{},{type:t.type})}}));var r={file:{label:lng("file"),color:l.g.colors.set[1]},questionnaire:{label:lng("questionnaire"),color:l.g.colors.set[2]},submission:{label:lng("submission"),color:l.g.colors.set[6]},coaching:{label:lng("coaching"),color:l.g.colors.set[10]},other:{label:lng("other"),color:l.g.colors.set[13]}};return{types:n,topics:r,title:lng("create assignment")}}},60619:function(e,t,n){"use strict";n.d(t,{V:function(){return x}});var r=n(87363),o=n(16920),i=n(70917),a=n(48207),l=n(25690),s=(n(57882),n(66975)),c=n(71134),u=n(29180),p=n(85311),d=n(7392),f=n(22334),m=n(34765),g=n(35944);function h(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return b(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function b(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var y=(0,i.iv)("font-size:1em;display:flex;align-items:center;._day{background-color:",o.g.colors.dominant_main,";color:white;font-size:2.2em;border-radius:10px;font-weight:700;width:72px;height:3em;line-height:3em;text-align:center;}._menu{",o.g.classes.opposite_float,";}._titles{color:",o.g.colors.text_sec,";",o.g.classes.margin_near("30px"),";._title{color:",o.g.colors.text_main,";font-weight:700;font-size:2em;}._subTitle{font-size:1.2em;}}",""),v=function(e){var t=e.date,n=e.eventsCount,r=e.sideComponent,o=(0,f.zk)(t);return(0,g.BX)("div",{css:y,className:"event-title",children:[(0,g.tZ)("div",{className:"_day",children:t.date()}),(0,g.BX)("div",{className:"_titles",children:[(0,g.tZ)("div",{className:"_title",children:lng("daily agenda").caps()}),0===n&&(0,g.tZ)("div",{className:"_subTitle",children:(o?lng("you have no events scheduled today"):lng("no events")).caps()}),n>1&&(0,g.tZ)("div",{className:"_subTitle",children:o?lng("you have %s events today",n).caps():lng("%s events",n).caps()})]}),(0,g.tZ)(p.zh,{}),r]})},_=(0,i.iv)("font-size:1em;color:",o.g.colors.text_sec,";.subTitle{text-align:center;}.topPart{display:flex;align-items:center;font-size:1.2em;margin-bottom:1rem;height:28px;>._strike{flex-grow:1;border-top:1px solid ",o.g.colors.separator,";",o.g.classes.margin_near(".5em"),";}}._title{color:",o.g.colors.text_main,";}",""),w=function(e){var t=e.date,n=e.eventsCount,r=e.onBackClick,i=e.showBackButton,a=(0,f.zk)(t);return(0,g.BX)("div",{css:_,children:[(0,g.BX)("div",{className:"topPart headers",children:[i&&(0,g.tZ)(s.JO,{icon:o.g.isRTL?"arrow_right":"arrow_left",smallButtonLike:!0,onClick:r,toolTip:lng("month view")}),(0,g.BX)("b",{className:"_title",children:[lng("daily agenda").caps()," "]}),(0,g.tZ)(u.qp,{time:t,showTime:!1,showYear:!1}),(0,g.tZ)("div",{className:"_strike"})]}),0===n&&(0,g.tZ)("div",{className:"subTitle headers",children:(a?lng("you have no events scheduled today"):lng("no events")).caps()})]})},O=(0,i.iv)(">._picker{>{margin:0 auto;}}>._events{._list{margin-top:1em;overflow:auto;max-height:234px;padding-right:2px;}}&.small{._navigation{",o.g.classes.margin_far("15px"),";}}&.widget{._picker,._events{padding:10px 10px 0;}.day{>div{width:32px;height:37px;padding-top:4px;}}}.event-title{margin-bottom:20px;}",""),k={name:"morozh",styles:"display:flex;flex-direction:row;justify-content:space-between;align-items:center;padding:0 8px;>.text{font-size:21px;font-weight:600;}>.btn{font-size:16px;}"},x=function(e){var t=e.activeDate,n=e.onDateSelect,o=e.onMonthChange,i=e.events,s=e.className,u=e.small,p=e.theme,m=e.sideComponent,b=e.onStripClick,y=e.minimizeOnEmpty,_=e.monthNavigation,x=void 0===_||_,j=e.defaultDayView,C=void 0!==j&&j,P=h((0,r.useState)(null),2),Z=P[0],B=P[1],T=function(e){return B(e),null==o?void 0:o(e)},E=h((0,r.useState)([]),2),I=E[0],A=E[1],D=h((0,r.useState)(!0),2),R=D[0],N=D[1],z=h((0,r.useState)(C?"day":u?"month":"all"),2),M=z[0],F=z[1],q=h((0,r.useState)(y),2),X=q[0],L=q[1];return(0,r.useEffect)((function(){i&&Z&&t.isBetween(Z,Z.clone().endOf("month"),"day","[]")&&A(i.filter((function(e){return e.calRelevantForDate(t)})).sort((function(e,t){return e.sortTime.diff(t.sortTime)})))}),[t,Z,i]),(0,r.useEffect)((function(){F(u?"all"!==M?M:"month":"all")}),[u]),(0,r.useEffect)((function(){var e;t&&T(null===(e=t.clone)||void 0===e?void 0:e.call(t).startOf("month"))}),[]),X&&0===i.length?(0,g.tZ)(a.W2,{className:"cont-empty",children:(0,g.BX)("div",{css:k,children:[(0,g.tZ)("div",{className:"text",children:lng("no events this month").caps()}),(0,g.tZ)(d.l,{onClick:function(){return L(!1)},theme:"contained",children:lng("show calendar").caps()})]})}):(0,g.tZ)(a.W2,{css:O,className:(0,c.AK)({small:u,widget:"widget"===p})+" "+s,padded:!1,children:(0,g.BX)(a.U0,{children:["day"!==M&&(0,g.tZ)("div",{className:"_picker",children:(0,g.tZ)(l.M,{activeDate:t,onDateSelect:function(e){null==n||n(e),u&&F("day"),N((0,f.zk)(e))},onMonthChange:T,events:i,monthNavigation:x})}),t&&"month"!==M&&(0,g.tZ)("div",{className:"_events",children:(0,g.BX)(g.HY,{children:["widget"===p?(0,g.tZ)(w,{showBackButton:u,onBackClick:function(){return F("month")},date:t,eventsCount:(0,c.zG)(i)?I.length:void 0}):(0,g.tZ)(v,{date:t,eventsCount:(0,c.zG)(i)?I.length:void 0,sideComponent:m}),(0,g.tZ)(S,{events:I,today:R,narrow:"widget"===p,onClick:b})]})})]})})},S=function(e){var t=e.events,n=e.today,r=e.narrow,o=e.onClick;if(null==t||!t.length)return null;r=r||(0,c.tq)();var i=function(e){return e.end_time&&(0,f.CR)(e.end_time)};return(0,g.tZ)("div",{className:"_list",children:n?(0,g.BX)(g.HY,{children:[t.filter((function(e){return!i(e)})).map((function(e,t){return(0,g.tZ)(m.Q,{item:e,narrow:r,onClick:o,actions:{action:!0,menu:!0}},t)})),t.filter(i).length>0&&(0,g.tZ)("div",{className:"_subTitle",children:lng("earlier today:").caps()}),t.filter(i).map((function(e,t){return(0,g.tZ)(m.Q,{item:e,narrow:r,onClick:o,actions:{action:!0,menu:!0}},t)}))]}):t.map((function(e,t){return(0,g.tZ)(m.Q,{item:e,narrow:r,onClick:o,actions:{action:!0,menu:!0}},t)}))})}},94238:function(e,t,n){"use strict";n.d(t,{H:function(){return T},Y:function(){return P}});var r=n(87363),o=n(70917),i=n(16920),a=n(12213),l=n(64902),s=n(73105),c=n(29180),u=n(33051),p=n(15560),d=n(71134),f=n(539),m=n(66975),g=n(43698),h=n(68567),b=n(40441),y=n(7392),v=n(32808),_=(n(57882),n(27813)),w=n(40965),O=n(35944);function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function C(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var P=(0,r.createContext)(null),Z=(0,o.iv)("color:",i.g.colors.text_sec,";>.comments_cont>div+div,.sub_comments_cont>div{margin-top:1.5em;}",""),B=function(e){return(0,o.iv)("display:flex;flex-direction:column;height:",e,";>.comments_cont{flex-grow:1;overflow:auto;}>*:nth-child(2){flex-shrink:0;}","")},T=(0,p.observer)((function(e){var t=e.commentsStore,n=e.connectTo,o=e.locked,i=e.comments,l=e.setTitle,s=e.refresh,c=e.labels,u=e.editable,p=e.deletable,d=e.afterSend,m=e.confirmSend,g=e.richTextOptions,h=e.spreadHeight,b=e.replying,y=e.allowFileSharing,v=void 0!==y&&y,_=void 0!==i,w=i||t.comments,k=(0,r.useRef)(0);(0,r.useEffect)((function(){if(s)return k.current=setInterval((function(){return t.refresh()}),8e3),function(){return clearInterval(k.current)}}),[]);var x=j(j({},g||{font:!0,color:!0,link:!0,attach:v}),{},{upload:"comment"}),S=(_||t.ready)&&(0,O.BX)("div",{css:[Z,h&&B(h),"",""],className:"Comments",children:[(0,O.tZ)("div",{className:_?"sub_comments_cont":"comments_cont",children:w.map((function(e,t){return"task_change"===e.type?(0,O.tZ)(N,{comment:e},e.id):(0,O.tZ)(D,{canReply:_&&t==w.length-1,connectTo:n,comment:e,locked:o,labelAllowed:c,deletable:p,replying:b,editable:void 0===u||u,richTextOptions:x},e.id)}))}),!_&&!o&&(0,O.tZ)(M,{connectTo:n,afterSend:d,confirm:m,richTextOptions:x})]});return t?t.ready?(l&&l(t.title),(0,O.tZ)(a.t0.Provider,{value:t,children:S})):(0,O.tZ)(f.$,{}):S})),E=(0,o.iv)("display:flex;position:relative;>._avatar{position:absolute;top:4px;._white_border_avatar{border:4px solid #FFF;box-sizing:content-box;}}>._main{flex-grow:1;",i.g.classes.margin_near("30px"),";>._data{>._top{display:flex;>._username{color:",i.g.colors.text_main,";font-weight:600;}>._label{margin:0 .5em;padding:0 .4px;background-color:#dbdbdd;color:#20ae61;border-radius:2px;font-weight:bold;}._time{font-size:.8em;color:",i.g.colors.text_sec,";display:inline-block;padding-top:3px;}}>._content{margin:0.5em 0;.mentions_box,.mention{",_.mp,";.RTL &{padding:0 1px 0 4px;}}}>._bottom{display:flex;>._reply{font-size:.9em;}}}>._collapsed{margin:1em 2em 0;cursor:pointer;color:",i.g.colors.dominant_main,";font-size:.9em;}}._grow{flex-grow:1;}",""),I=(0,p.observer)((function(e){var t,n,o,p,f,g=e.content,h=e.comment,_=e.canReply,w=e.menuOptions,x=e.menuOnSelect,S=e.className,j=e.editMode,C=e.editAction,P=e.gif,Z=e.file,B=e.richTextOptions,I=e.deletable,A=e.replyToMaster,D=h.data,R=D.user,N=D.label,z=(0,r.useContext)(a.t0),F=k((0,r.useState)(""!==z.storedComment({object_id:h.id,type:"comment"}).text),2),X=F[0],L=F[1],U=k((0,r.useState)((null===(t=h.subComments)||void 0===t?void 0:t.length)<=3),2),V=U[0],H=U[1],G=V?h.subComments:h.subComments.slice(-3),J=(null===(n=h.subComments)||void 0===n?void 0:n.length)-3,W=j?z.storedComment({comment_id:h.id}):{},K=Z&&Z.file_id&&Z.file_name?Blsm.prm.Mainref+"GetFile?file_id="+Z.file_id:null;return(0,O.BX)("div",{css:E,className:S,ref:h.scrollTo?function(e){e&&setTimeout((function(){e.scrollIntoView({behavior:"smooth"});var t=e.querySelector("._data");t&&(t.style.border="1px solid ".concat(i.g.darkMode?i.g.colors.mention_bg:i.g.colors.light_blue)),h.scrollTo=!1}),700)}:void 0,"data-comment_id":h.id,children:[(0,O.tZ)("div",{className:"_avatar",children:(0,O.tZ)(l.qE,{user:R,size:"30px",className:"_white_border_avatar"})}),(0,O.BX)("div",{className:"_main",children:[(0,O.BX)("div",{className:"_data",children:[(0,O.BX)("div",{className:"_top",children:[(0,O.tZ)("div",{className:"_username",children:(0,d.v2)(R)}),N&&(0,O.tZ)("div",{className:"_label",children:N}),(0,O.tZ)("div",{className:"_grow"}),null!==(o=(h.data.parent||h).connectTo)&&void 0!==o&&null!==(p=o.type)&&void 0!==p&&p.startsWith("task")?(0,O.tZ)(b.A,{href:{edit:"task",id:(h.data.parent||h).connectTo.object_id,section:"c=".concat(h.id)},newTab:!0,children:(0,O.tZ)(c.ij,{time:h.time,className:"_time"})}):(0,O.tZ)(c.ij,{time:h.time,className:"_time"}),!j&&w&&w.length>0&&(0,O.BX)(O.HY,{children:[" ",(0,O.tZ)(u.x,{className:"_menu",options:w,onSelect:x,inForm:!0,children:(0,O.tZ)(m.JO,{icon:"menu",smallButtonLike:!0})})]})]}),j?(0,O.tZ)(q,{text:W.text,editorState:W.editorState,onSend:function(){return C(!0),W.text=""},onDataChange:function(e){Object.prototype.hasOwnProperty.call(e,"text")&&(W.text=e.text,W.commands=e.commands,W.editorState=e.editorState),Object.prototype.hasOwnProperty.call(e,"file")&&(W.file=e.file)},keySubmit:function(){return C(!0),W.text=""},placeholder:lng("write a comment").caps()+"...",files:!!Blsm.isFeatureEnabled("comments_attachments"),giphy:Blsm.prm.giphy,onCancel:function(){return C(!1),W.text=""},disabled:""===W.text,richTextOptions:B}):(0,O.BX)(O.HY,{children:[(0,O.tZ)("div",{className:"_content",css:i.g.classes.wysiwyg,children:g}),(0,O.BX)("div",{className:"_bottom",children:[!!(Z&&Z.file_id&&Z.file_name)&&(0,O.tZ)(s.u,{text:Z.file_name,children:(0,v.Or)(Z.file_name)?(0,O.tZ)(b.A,{href:K,newTab:!0,"data-preview":"img",children:(0,O.tZ)("img",{src:K,alt:"image",style:{maxHeight:"285px",maxWidth:"400px"}})}):(0,O.BX)(b.A,{href:K,newTab:!0,"data-preview":(0,v.BX)(Z.file_name),children:[(0,O.tZ)(m.JO,{icon:"attachment"})," ",Z.file_name]})}),P&&(0,O.tZ)("img",{className:"comment-gif",src:P}),(0,O.tZ)("div",{className:"_grow"}),!X&&_&&(0,O.tZ)(y.l,{className:"_reply",onClick:function(){return"comment"===h.type?A(!0):L(!0)},children:lng("reply").caps()})]})]})]}),(null===(f=h.subComments)||void 0===f?void 0:f.length)>0&&(0,O.BX)(O.HY,{children:[!V&&J>0&&(0,O.BX)("div",{className:"_collapsed",onClick:function(){return H(!0)},children:[(0,O.tZ)(m.JO,{icon:"reply"})," ",lng("view %s older replies",J).caps()]}),(0,O.tZ)(T,{connectTo:{object_id:h.id,type:"comment"},comments:G,deletable:I,richTextOptions:B,replying:L})]}),X&&(0,O.tZ)(M,{connectTo:{object_id:h.id,type:"comment"},afterSend:function(){return L(!1)},replyTo:h.chainMembers(!0),richTextOptions:B})]})]})})),A=function(e){return(0,o.iv)(">._main>._data{background-color:",e.bgColor||i.g.colors.bg_2,";color:",i.g.colors.bg_2_text,";border-radius:",i.g.consts.CONT_BORDER_RADIUS,"px;padding:13px 18px;>._content{._text{word-break:break-all;word-break:break-word;",i.g.classes.editor_directions,";ul,ol{padding:0 1.3em;}div{min-height:1em;}}img{max-width:100%;max-height:300px;}img.emojione{height:1.5em;vertical-align:text-bottom;}}}","")},D=function(e){var t=e.comment,n=e.locked,o=e.labelAllowed,i=e.editable,l=e.deletable,s=e.richTextOptions,c=e.canReply,u=e.replying,p=t.data,d=p.file,f=p.text,m=p.gif,g=p.label,b=p.user,y=k((0,r.useState)(""),2),v=y[0],_=y[1],x=k((0,r.useState)(!1),2),S=x[0],C=x[1],Z=(0,r.useContext)(P)||{},B=(0,r.useContext)(a.t0),T=B.storedComment({comment_id:t.id}),E={};"delete"===v&&(E={confirmText:lng("delete"),onConfirm:function(){return B.deleteComment(j({comment_id:t.id},t.connectTo))},onCancel:function(){return _("")}});var D={};"label"===v&&(D={title:lng("comment label").caps(),onConfirm:function(e){B.setCommentLabel(j({comment_id:t.id,label:e},t.connectTo)),_("")},onCancel:function(){return _("")},placeholder:lng("label").caps(),confirmText:lng("set"),startValue:g||""});var R=[];return i&&Blsm.user.id===(null==b?void 0:b.user_id)&&R.push({val:"edit",label:lng("edit").caps()}),(l||i&&Blsm.user.id===(null==b?void 0:b.user_id))&&R.push({val:"delete",label:lng("delete").caps()}),o&&R.push({val:"label",label:lng("label").caps()}),(0,O.BX)(O.HY,{children:[(0,O.tZ)(I,{comment:t,content:f&&(0,O.tZ)(w.x,{className:"_text",content:f}),css:A(Z),canReply:c||t.id&&"comment"!==t.type&&!n&&!B.noReplies,menuOptions:R,menuOnSelect:function(e){return function(e){switch(e){case"edit":T.text=f,_("edit");break;case"delete":_("delete");break;case"label":_("label")}}(e)},gif:m,file:d,editMode:"edit"===v,editAction:function(e){if(!S)if(e){if(!T.text)return!1;C(!0),B.sendComment({text:T.text,commands:T.commands,file:T.file,connectTo:j({comment_id:t.id},t.connectTo)},(function(e){C(!1),!0===e&&_("")}))}else _("")},replyToMaster:u,deletable:l,richTextOptions:s}),"delete"===v&&(0,O.tZ)(h.I4,j(j({},E),{},{children:lng("are you sure you want to delete this comment?").caps()})),"label"===v&&(0,O.tZ)(h.NL,j(j({},D),{},{children:lng("insert comment label").caps()+":"}))]})},R=(0,o.iv)("._content{color:",i.g.colors.bg_2_text,";",i.g.classes.border_near("3px solid #c8cdd0"),";",i.g.classes.padding_near("15px"),";em{font-style:normal;color:",i.g.colors.text_main,";font-weight:600;}._positive{color:",i.g.colors.positive,";}._negative{color:",i.g.colors.negative,";}}>._main>._data{background-color:",i.g.colors.bg_2,";color:",i.g.colors.bg_2_text,";border-radius:",i.g.consts.CONT_BORDER_RADIUS,"px;padding:13px 18px;}",""),N=function(e){var t=e.comment,n=t.data.change_data,r=null;if(n.length){var o=n,i=1;r=(0,O.tZ)("div",{children:o.map((function(e,t){if(!(o.length>+t+1&&o[+t+1]&&JSON.stringify(o[+t+1])===JSON.stringify(o[t]))){var n=i;return i=1,o[t].update?(0,O.BX)("div",{children:[lng("updated the")," ",(0,O.tZ)("em",{children:o[t].update})," ",n>1?lng("%d times",n):""]},t):o[t].set?(0,O.BX)("div",{children:[lng("set")," ",(0,O.tZ)("em",{children:o[t].set})," ",(0,O.tZ)("span",{className:o[t].value?"_positive":"_negative",children:o[t].value?lng("on"):lng("off")}),n>1?lng("%d times",n):""]},t):(0,O.BX)("div",{children:[lng("changed")," ",(0,O.tZ)("em",{children:o[t].field})," ",o[t].previous&&(0,O.BX)(O.HY,{children:[lng("from|value")," ",(0,O.tZ)("em",{style:o[t].previous_color?{color:o[t].previous_color}:void 0,children:o[t].previous})," "]}),lng("to|value")," ",(0,O.tZ)("em",{style:o[t].current_color?{color:o[t].current_color}:void 0,children:o[t].current?o[t].current:(0,O.tZ)("i",{children:lng("empty")})}),n>1?lng("%d times",n):""]},t)}i++}))})}return(0,O.tZ)(I,{comment:t,content:r,css:R})},z=function(e){return(0,o.iv)(">._content{margin-top:1.5em;position:relative;>._avatar{position:absolute;top:12px;._white_border_avatar{border:4px solid #FFF;box-sizing:content-box;}}>._main{flex-grow:1;",i.g.classes.margin_near("30px"),";background-color:",e.bgColor||i.g.colors.bg_2,";color:",i.g.colors.bg_2_text,";border-radius:",i.g.consts.CONT_BORDER_RADIUS,"px;padding:13px 18px;}}._grow{flex-grow:1;}","")},M=(0,p.observer)((function(e){var t=e.connectTo,n=e.afterSend,o=e.replyTo,i=e.confirm,s=e.richTextOptions,c=(0,r.useContext)(a.t0),u=(0,r.useContext)(P)||{},p=c.storedComment(t),d=k((0,r.useState)(!1),2),f=d[0],m=d[1],g=k((0,r.useState)(!1),2),b=g[0],y=g[1],v=function(){(0,h.BB)(lng("are you sure you want to send the message?"),{onConfirm:_,confirmText:lng("send")})},_=function(){m(!0),c.sendComment({text:p.text,commands:p.commands,file:p.file,connectTo:t},(function(e){m(!1),!0===e&&(y(!0),y(!1),n&&n())}))};return(0,O.tZ)("div",{css:z(u),children:(0,O.BX)("div",{className:"_content",children:[(0,O.tZ)("div",{className:"_avatar",children:(0,O.tZ)(l.qE,{size:"30px",className:"_white_border_avatar"})}),(0,O.tZ)("div",{className:"_main",children:(0,O.tZ)(q,{text:p.text,editorState:p.editorState,richTextOptions:s,onSend:i?v:_,onDataChange:function(e){Object.prototype.hasOwnProperty.call(e,"text")&&(p.text=e.text,p.commands=e.commands,p.editorState=e.editorState),Object.prototype.hasOwnProperty.call(e,"file")&&(p.file=e.file)},keySubmit:i?v:_,placeholder:lng("write a comment").caps()+"...",files:!!Blsm.isFeatureEnabled("comments_attachments"),giphy:Blsm.prm.giphy,disabled:f,onCancel:n,clear:b,fileName:p.file?p.file.name:"",replyTo:o})})]})})})),F=(0,o.iv)("background-color:",i.g.colors.bg_input,";color:",i.g.colors.text_main,";border:1px solid #DCDCDC;border-radius:4px;padding:5px;position:relative;._buttons{position:absolute;bottom:6px;",i.g.far,":7px;.send-msg-icon{color:white;background:",i.g.colors.dominant_main,";padding:5px 10px;border-radius:8px;margin-bottom:5px;}}",""),q=function(e){var t=e.text,n=e.editorState,o=e.onSend,i=e.onDataChange,l=e.keySubmit,s=e.onCancel,c=e.placeholder,u=e.files,p=e.giphy,f=e.disabled,h=e.clear,b=e.replyTo,v=e.richTextOptions,_=(0,r.useContext)(a.t0);return Blsm.prm.disable_comment_attachments&&null!=v&&v.attach&&(v.attach=!1),(0,O.tZ)("div",{css:F,children:(0,O.BX)("div",{children:[(0,O.tZ)(g.I,{type:"richtext",focusOnShow:!!b,placeholder:c,value:t,loadState:n,clear:h,onChange:function(e,t,n){return i({text:e,commands:t,editorState:n})},keySubmit:l,canGiphy:p,canMention:Object.keys(_.mentions).length>0,mentions:_.mentions,addMentions:t?[]:b,canFile:u,toolbarOptions:v}),(0,O.BX)("div",{className:"_buttons",children:[s&&(0,O.tZ)(y.l,{className:"_button",onClick:s,children:lng("cancel").caps()}),d.Oz?(0,O.tZ)(m.JO,{icon:"send_comment",className:"send-msg-icon",onClick:o,disabled:f}):(0,O.tZ)(y.l,{theme:"contained",className:"_button",onClick:o,disabled:f,children:lng("send").caps()})]})]})})}},22906:function(e,t,n){"use strict";n.d(t,{JH:function(){return S},Lj:function(){return j},yY:function(){return C}});var r,o,i=n(71134),a=n(27821),l=n(16920),s=n(22334);function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function p(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=m(e);if(t){var o=m(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d(this,n)}}function d(e,t){return!t||"object"!==c(t)&&"function"!=typeof t?f(e):t}function f(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function m(e){return(m=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t&&h(e.prototype,t),n&&h(e,n),e}function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v,_,w,O,k,x,S=(r=function(){function e(t){var n,r,i,l;g(this,e),y(this,"isEntity",!0),n=this,r="_attr",l=this,(i=o)&&Object.defineProperty(n,r,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(l):void 0}),y(this,"hide_type",void 0),(0,a.makeObservable)(this),this._attr=t}return b(e,[{key:"attr",value:function(e){return(0,i.DM)(this[e])?this[e]:this._attr[e]}},{key:"color",get:function(){return l.g.colors.entity[this.type]||l.g.colors.text_black}}]),e}(),v=r.prototype,_="_attr",w=[a.observable],O={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},x={},Object.keys(O).forEach((function(e){x[e]=O[e]})),x.enumerable=!!x.enumerable,x.configurable=!!x.configurable,("value"in x||x.initializer)&&(x.writable=!0),x=w.slice().reverse().reduce((function(e,t){return t(v,_,e)||e}),x),k&&void 0!==x.initializer&&(x.value=x.initializer?x.initializer.call(k):void 0,x.initializer=void 0),void 0===x.initializer&&(Object.defineProperty(v,_,x),x=null),o=x,r),j=function(e,t){return e.isEntity?e.attr(t):e[t]},C=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(n,e);var t=p(n);function n(){var e;g(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return y(f(e=t.call.apply(t,[this].concat(o))),"_start_time",void 0),y(f(e),"_end_time",void 0),e}return b(n,[{key:"calRelevantForDate",value:function(e){return this.start_time,this.end_time,this._start_time?!this._end_time||(0,s.KC)(this._start_time,this._end_time)?(0,s.KC)(e,this._start_time):e.isBetween(this._start_time,this._end_time,"day","[]"):(console.warn("missing _start_time:",this),!1)}},{key:"start_date",get:function(){return this.start_time}},{key:"start_time",get:function(){return this._start_time||(this._start_time=(0,s._3)(this.calcStartTime()))}},{key:"end_time",get:function(){return this._end_time||(this._end_time=(0,s._3)(this.calcEndTime()))}},{key:"sortTime",get:function(){return this.start_time}}]),n}(S)},66418:function(e,t,n){"use strict";n.d(t,{$:function(){return j}});var r=n(87363),o=n(61533),i=n.n(o),a=n(70917),l=n(15560),s=n(40441),c=n(66975),u=n(73105),p=n(16920),d=n(98e3),f=n(539),m=n(71134),g=n(5474),h=n(74765),b=n(94238),y=n(12213),v=n(70081),_=n(35944);function w(e){return function(e){if(Array.isArray(e))return x(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||k(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function O(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||k(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(e,t){if(e){if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?x(e,t):void 0}}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,a.iv)("position:fixed;z-index:",p.g.z.file_viewer,";top:0;left:0;width:100vw;height:100vh;background-color:rgba(0, 0, 0, .7);display:flex;flex-direction:column;.prev_cont{display:flex;flex-grow:1;height:100%;&.withComments{.preview{max-width:calc(100vw - 520px);}}.comments{background-color:white;width:500px;padding:15px;}}",""),j=(0,l.observer)((function(e){var t,n,o,i,a=e.file,l=e.onClose,s=e.socialFlag,c=O((0,r.useState)(a),2),u=c[0],p=c[1],f=O((0,r.useState)(0),2),g=f[0],k=f[1],x=O((0,r.useState)(!(0,m.Oz)()),2),j=x[0],C=x[1],Z=(0,r.useRef)(),T=(0,r.useRef)(),E=u.type,I=u.file_id,A="img"===E,D=null===(t=u.object_ids)||void 0===t?void 0:t[g],R=(0,r.useMemo)((function(){return s&&D?new y.pE({type:"file",object_id:D}):null}),[D]),N=(n=O((0,r.useState)((0,m.o0)("render")),2),o=n[0],i=n[1],[o,function(){return setTimeout((function(){return i((0,m.o0)("render"))}),100)}]),z=O(N,2),M=z[0],F=z[1];(0,r.useEffect)((function(){if(E){if(["img","mp4","pdf"].includes(E))if(u.a){var e=$("a[data-preview]:visible").get().filter((function(e){var t=e.getAttribute("data-preview").toLowerCase();return"img"===t||Blsm.prm.extensions.img.includes(t)})).map((function(e){return e.href})),t=w(new Set(e));t.length>1&&(T.current=(0,m.wd)((0,m.w6)(t.length).map((function(e){return lng("file").caps()+" "+(e+1)}))),p(Object.assign({},u,{images:t})),k(t.indexOf(u.a.href)))}else T.current=(0,m.wd)((0,m.w6)(u.images.length).map((function(e){return u.labels&&u.labels[e]||lng("image").caps()+" "+(e+1)}))),p(Object.assign({},u,{images:u.images})),k(u.images.indexOf(u.url))}else if(I){var n=(0,d.SC)("file/preview/"+I,{dataType:"json",onError:function(){return p({file_id:I,type:"error"})}},(function(e){"spreadsheet"===e.type&&e.tables.length>1&&(T.current=(0,m.wd)(e.tables.map((function(e){return e[0]})))),p(Object.assign({},u,e))}));return function(){return n&&n.abortFetch()}}}),[]),(0,v.OR)("orientationchange",F);var q=T.current,X=(null==q?void 0:q.length)>1,L={req:"vote",type:"file",object_id:D||u.file_id,user_action:"like"},U=X&&function(){return k(g<q.length-1?g+1:0)},V=X&&function(){return k(g>0?g-1:q.length-1)},H=function(e){var t=u;return t.likes[e]={user_vote:"like"===u.likes[e].user_vote?null:"like",likes:"like"===u.likes[e].user_vote?parseInt(u.likes[e].likes)-1:u.likes[e].likes+1},p(Object.assign({},t)),(0,d.SC)("likes",{data:L,method:"POST"})},G=function(e){"Escape"===e.key?l&&l():q&&X&&["ArrowLeft","ArrowRight"].includes(e.key)&&document.activeElement!==Z.current&&("ArrowRight"===e.key?U():V())};return A?(0,_.tZ)(h.d,{zoomIn:{step:6},zoomOut:{step:6},doubleClick:{step:6},wheel:{step:s?1:24},options:{minScale:.1},children:function(e){return(0,_.BX)("div",{css:S,tabIndex:0,ref:function(e){return null==e?void 0:e.focus()},onKeyUp:G,children:[(0,_.tZ)(P,{data:u,onClose:l,idx:g,selectOptions:q,onCommentsClick:!!s&&function(){return C(!j)},onSelect:function(e){return k(parseInt(e))},selectRef:Z.current,zoomProps:e,onLike:s&&H,onNext:U||void 0,onPrev:V||void 0}),(0,_.BX)("div",{className:(0,m.AK)("prev_cont",{withComments:j&&s&&D}),children:[(0,_.tZ)(B,{data:u,onClose:l,idx:g,zoomProps:e}),j&&s&&D&&(0,_.BX)("div",{className:"comments",children:[(0,_.tZ)("h3",{children:lng("comments").caps()}),(0,_.tZ)(b.H,{locked:!1,commentsStore:R,deletable:!0,connectTo:R.connectTo,refresh:!0,allowFileSharing:!0})]})]})]})}},M):(0,_.BX)("div",{css:S,tabIndex:0,ref:function(e){return null==e?void 0:e.focus()},onKeyUp:G,children:[(0,_.tZ)(P,{data:u,onClose:l,idx:g,selectOptions:q,onSelect:function(e){return k(parseInt(e))},onNext:U||void 0,onPrev:V||void 0}),(0,_.tZ)(B,{data:u,onClose:l,idx:g})]})})),C=(0,a.iv)("background-color:#323232;padding:10px;box-shadow:0 2px 2px rgba(0, 0, 0, 0.6);z-index:1;color:white;font-weight:600;display:flex;flex-direction:row;.Icon{font-size:1.3rem;vertical-align:middle;padding:8px;border-radius:2px;&:hover{background:rgba(255, 255, 255, .25);}}.preview_select{",p.g.classes.font_reset,";color:",p.g.colors.grey,";margin:0 15px;.InputDropDown{width:100%;}.label_text{padding:8px;}}.preview_tb_part{display:inline-flex;flex-grow:10;width:33%;}.preview_tb_part_start{flex-direction:row;}.preview_tb_part_mid{flex-direction:row;justify-content:center;}.preview_tb_part_end{flex-direction:row-reverse;}",""),P=function(e){var t,n,r=e.data,o=e.onClose,i=e.idx,a=e.selectOptions,l=e.onSelect,d=e.onNext,f=e.onPrev,m=e.onLike,h=e.onCommentsClick,b=e.zoomProps,y=r.type,v=(null===(t=r.object_ids)||void 0===t?void 0:t[i])||r.file_id,w=null===(n=r.likes)||void 0===n?void 0:n[i];return(0,_.BX)("div",{css:C,children:[(0,_.BX)("div",{className:"preview_tb_part preview_tb_part_start",children:[(0,_.tZ)(u.u,{text:lng("close").caps(),noPortal:!0,children:(0,_.tZ)(c.JO,{icon:"arrow_near",onClick:o})}),"img"===y&&a&&(0,_.tZ)("div",{className:"preview_select mobile_off",children:(0,_.tZ)(g.P,{options:a,value:i,onChange:l})}),m&&(0,_.tZ)(c.JO,{icon:"badge-love",onClick:function(){return m(i)},color:"like"===w.user_vote?p.g.colors.dominant_main:"",badge:w.likes}),h&&(0,_.tZ)(c.JO,{icon:"chat",onClick:function(){return h()}})]}),(0,_.tZ)("div",{className:"preview_tb_part preview_tb_part_mid",children:"img"===y&&f&&(0,_.BX)("div",{className:"preview_nextprev",children:[(0,_.tZ)(c.JO,{icon:"arrow_go_left",onClick:f}),(0,_.tZ)(c.JO,{icon:"arrow_go_right",onClick:d})]})}),(0,_.BX)("div",{className:"preview_tb_part preview_tb_part_end",children:[v&&(0,_.tZ)(s.A,{href:{file:"file_id="+v},newTab:!0,children:(0,_.tZ)(u.u,{text:lng("download").caps(),noPortal:!0,children:(0,_.tZ)(c.JO,{icon:"download"})})}),"img"===y&&(0,_.BX)("div",{className:"tools",children:[(0,_.BX)("span",{children:[Math.round(100*(null==b?void 0:b.scale)),"%"]}),(0,_.tZ)("span",{className:"mobile_off",children:(0,_.tZ)(c.JO,{icon:"sign_plus",onClick:null==b?void 0:b.zoomIn,disabled:(null==b?void 0:b.scale)>=8})}),(0,_.tZ)("span",{className:"mobile_off",children:(0,_.tZ)(c.JO,{icon:"sign_minus",onClick:null==b?void 0:b.zoomOut,disabled:(null==b?void 0:b.scale)<=1})}),(0,_.tZ)("span",{children:(0,_.tZ)(c.JO,{icon:"fullscreen",onClick:null==b?void 0:b.resetTransform})})]})]})]})},Z=(0,a.iv)("color:",p.g.colors.text_main,";height:calc(100% - 61px);flex-grow:1;display:flex;justify-content:center;align-items:center;direction:ltr;width:100%;>.react-transform-component,>.full_size{width:100%;height:100%;overflow:auto;}>div{>iframe{width:100%;height:100%;vertical-align:bottom;border:0!important;}>video{max-width:100%;max-height:calc(100vh - 64px);margin:auto;display:block;}>pre,>table{background:white;}>pre{margin:0;padding:5px;}}",""),B=function(e){var t,n=e.data,o=e.onClose,i=e.idx,l=e.zoomProps,s=n.type,c=n.url,u=n.style,p=(0,r.useRef)(),d=(0,r.useRef)(),g=l?function(e){var t=Math.min(1,d.current.offsetHeight/e.target.offsetHeight,d.current.offsetWidth/e.target.offsetWidth),n=(d.current.offsetWidth-e.target.offsetWidth*t)/2,r=(d.current.offsetHeight-e.target.offsetHeight*t)/2;l.setTransform(n,r,t,100)}:void 0;return(0,_.tZ)("div",{css:Z,className:(0,m.AK)("preview backdrop",{"with-zoom":l}),onClick:function(e){return s&&(e.target.matches(".react-transform-component")||e.target===d.current&&p.current===d.current)&&(null==o?void 0:o())},onMouseDown:function(e){return p.current=e.target},ref:d,children:(t=(0,_.BX)("div",{className:["spreadsheet","pdf"].includes(s)?"full_size":void 0,children:[!s&&(0,_.tZ)(f.$,{color:"white"}),"error"===s&&(0,_.BX)("pre",{children:[lng("unable to open file")," :("]}),"spreadsheet"===s&&(0,_.tZ)("div",{css:u?(0,a.iv)(u,";",""):void 0,dangerouslySetInnerHTML:{__html:n.tables[i][1]}}),"txt"===s&&(0,_.tZ)("pre",{children:n.txt}),"pdf"===s&&(0,_.tZ)("iframe",{src:Blsm.prm.Mainref+"lib/external/pdfjs-2.16.105-legacy/web/viewer.blossom.php?file="+encodeURIComponent(c),frameBorder:"0",allowFullScreen:!0}),"img"===s&&(0,_.tZ)("img",{src:n.images[i],onLoad:g},i),"mp4"===s&&(0,_.tZ)("video",{controls:!0,autoPlay:!0,children:(0,_.tZ)("source",{type:"video/mp4",src:n.url})})]}),l?(0,_.tZ)(h.U,{children:t}):t)})},T=function(){var e=O((0,r.useState)(!1),2),t=e[0],n=e[1];return(0,r.useEffect)((function(){var e=function(e){var t=e.currentTarget,r=t.getAttribute("data-preview"),o=t.href,i=null;if(["csv","xls","xlsx","txt","log","pdf"].includes(r)){var a=o.match(/file_id=(\d+)/);a&&(i="pdf"===r?{type:"pdf",a:t,url:o}:{file_id:a[1]})}else"img"===r||Blsm.prm.extensions.img.includes(r)?i={type:"img",a:t,images:[o]}:"mp4"===r?i={type:"mp4",a:t,url:o}:"spreadsheet"===r&&(i={type:"spreadsheet",a:t,url:o});i&&(e.preventDefault(),n(i))};return $("body").on("click","a[data-preview]",e),function(){return $("body").off("click","a[data-preview]",e)}}),[]),t?(0,_.tZ)(j,{onClose:function(){return n(!1)},file:t}):null};(0,m.Um)((function(){if(!document.getElementById("FileViewerOpener")){var e=(0,m.wq)("FileViewerOpener");i().render((0,_.tZ)(T,{}),e)}}))},66005:function(e,t,n){"use strict";n.d(t,{D:function(){return g},E:function(){return h}});var r=n(15560),o=(n(57882),n(40676)),i=n(40441),a=n(71134),l=n(24061),s=n(16920),c=n(35944),u=["user"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){f(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var g=function(e){var t=e.user,n=m(e,u);return(0,c.tZ)(i.A,d(d({},n),{},{href:{user:t.user_id},children:(0,a.v2)(t)}))},h=(0,r.observer)((function(e){var t=e.collection,n=e.noFilterSort,r=e.actions,i=e.barExtraComponent,a=e.filters,u=e.sticky,p=void 0===u?s.g.consts.TABLE_HEAD_HEIGHT:u,d=e.stickyStartHeight,f=void 0===d?s.g.consts.DEFAULT_STICKY_START_HEIGHT:d,m=n?void 0:a||[{name:"content_types",label:lng("content types"),type:"text"}],g=n?void 0:[{val:"",label:lng("default")}];return(0,c.tZ)(o.iA,{cols:(0,l.Hc)(),collection:t,filters:m,sorts:g,RowRenderer:l.Jv,rowIdCol:"lesson_id",rowProps:{deleteContent:function(e){t.remove(e)}},compact:!0,actions:r,barExtraComponent:i,sticky:p,stickyStartHeight:f})}))},79160:function(e,t,n){"use strict";n.d(t,{b:function(){return A}});var r=n(87363),o=n(70917),i=n(48207),a=n(83380),l=n(15560),s=n(16920),c=n(31092),u=(n(57882),n(70081)),p=n(73105),d=n(71134),f=n(66975),m=n(68567),g=(n(86344),n(33051)),h=n(32808),b=n(35944),y=(0,o.iv)("position:relative;width:130px;height:130px;margin-top:10px;",s.g.classes.margin_far("10px"),";border:3px solid ",s.g.colors.border,";border-radius:2px;color:",s.g.colors.text_main,";display:flex;align-items:flex-end;>img,>video{position:absolute;width:100%;height:100%;object-fit:cover;}>._label{z-index:1;width:100%;background-color:",s.g.colors.half_black,";color:",s.g.colors.dominant_white,";padding:3px 6px;font-size:.8em;div{display:block;}._btn{",s.g.classes.ellipsis,";}}",""),v=(0,o.iv)(y,";&._active{border-color:",s.g.colors.dominant_main,";}>._menu{display:none;position:absolute;top:0;right:0;background:rgba(255, 255, 255, .7);padding:2px 5px;}&:hover>._menu{display:block;}",""),_=(0,l.observer)((function(e){var t=e.data,n=t.mf_id,o=t.file_id,i=t.imgtag,l=t.name,c=t.user_id,u=(0,r.useContext)(a.bw),y=l&&(0,d.nu)(l.replace(/^.*[/]/,"")),_=function(e){return l.replace(y,"")+e+"."+l.split(".")[1]},w=function(){var e=l.split("/"),t=e[e.length-1];return(0,d.nu)(t.split(".")[0])},O=t===u.activeItem;return(0,b.BX)("div",{css:v,className:(0,d.AK)({_active:O}),ref:function(e){return e&&O&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()&&e.scrollIntoView(!1)},onClick:function(){return u.activeItem=t},children:[y&&"mp4"===(0,h.BX)(y)?(0,b.tZ)("video",{preload:"metadata",src:s.g.func.imgUrl(i)}):(0,b.tZ)("img",{src:s.g.func.imgUrl(i),loading:"lazy"}),y&&(0,b.tZ)("div",{className:"_label",children:(0,b.tZ)(p.u,{text:y,children:y})}),(Blsm.user.isPowerManager||(0,d.Tz)(c))&&(n||o)&&(0,b.tZ)(b.HY,{children:(0,b.tZ)(g.x,{className:"_menu",options:[{icon:"trash",label:lng("delete"),onClick:function(){return(0,m.BB)(lng("are you sure you want to delete this file?").caps(),{onConfirm:function(){return u.deleteItem(t)}})}},{icon:"edit",label:lng("rename"),onClick:function(){return(0,m.cS)("",{title:lng("rename file"),placeholder:lng("file name"),confirmText:lng("confirm"),inputType:"text",inputRequired:!0,startValue:w(),valueValid:k,onConfirm:function(e){var t=encodeURIComponent(e);u.renameFile({mf_id:n,file_id:o,path:_(t),name:t})}})}},{icon:"AssignOutsource",label:lng("move"),onClick:function(){var e=(0,a.aF)(u.activeTab.startsWith("my")?"my":u.activeTab).filter((function(e){return e+"/"!==u.activeFolder})).map((function(e){return{val:e,label:e}}));""!==u.activeFolder&&e.push({val:"",label:lng("parent folder")}),(0,m.cS)("",{title:lng("move file"),inputType:"select",selectOptions:e,placeholder:lng("target folder"),inputOptions:{caps:!1},onConfirm:function(e){return u.moveFile({folder:e,file:t})}})}}],children:(0,b.tZ)(f.JO,{icon:"menu"})})})]})})),w=(0,o.iv)(y,";background-position:center;background-size:70px;background-repeat:no-repeat;>._rename{display:none;position:absolute;top:0;right:0;background:rgba(255, 255, 255, .7);padding:2px 5px;}&:hover>._rename{display:block;}",""),O=(0,l.observer)((function(e){var t=e.data,n=t.name,o=t.temp,i=(0,r.useContext)(a.bw),l="../"===n;return(0,b.BX)("div",{css:w,onClick:function(){l?(i.activeFolder=i.activeFolder.slice(0,-1).split("/").slice(0,-1).join("/"),""!==i.activeFolder&&(i.activeFolder+="/")):i.activeFolder+=n},style:{backgroundImage:'url("'.concat(Blsm.prm.Mainref,"images/v4/folder").concat(l?"_up":"",'.svg")')},children:[(0,b.tZ)("div",{className:"_label",children:(0,b.tZ)(p.u,{text:n.slice(0,-1),children:n.slice(0,-1)})}),!l&&Blsm.user.isPowerManager&&(0,b.tZ)("div",{className:"_rename",children:(0,b.tZ)(f.JO,{icon:"edit",onClick:function(e){return e.stopPropagation(),(0,m.cS)("",{title:lng("set folder name"),placeholder:lng("folder name"),confirmText:lng("confirm"),inputType:"text",inputRequired:!0,startValue:n.slice(0,-1),valueValid:k,onConfirm:function(e){return i.renameFolder({path:i.activeFolder+n,name:e,temp:o,tab:i.activeTab})}})}})})]})})),k=function(e){return!/\/|\.\.|%2F|\.$|^\./.test(e)},x=(0,o.iv)(y,";align-items:center;justify-content:center;flex-direction:column;text-align:center;",s.g.classes.drop_button,";.Icon{font-size:30px;margin-bottom:10px;}>*{max-width:100%;}>input{display:none;}",""),S=function(){var e=(0,r.useContext)(a.bw),t=(0,b.BX)("label",{css:x,children:[(0,b.tZ)(f.JO,{icon:"mark_plus_light",balloonAnchor:!1}),(0,b.tZ)("div",{children:lng("click or drag to add items").caps()}),(0,b.tZ)("input",{type:"file",accept:e.extensions.map((function(e){return"."+e})).join(","),onChange:function(t){return t.target.files.length&&e.uploadItems(t.target.files)},multiple:!0})]});return e.albumId?t:(0,b.tZ)(g.x,{options:[("images"===e.activeTab||"my_images"===e.activeTab)&&{label:lng("pick a color..."),onClick:function(){return(0,m.cS)("",{title:lng("select color"),confirmText:lng("save"),inputType:"color",inputRequired:!0,onConfirm:function(t){return e.createFromColor(t)}})}},{label:lng("new folder"),onClick:function(){return(0,m.cS)("",{title:lng("create folder"),placeholder:lng("folder name"),confirmText:lng("confirm"),inputType:"text",inputRequired:!0,onConfirm:function(t){return t&&e.createNewFolder(t)}})}}],inForm:!0,children:t})},j=(0,l.observer)((function(e){var t=e.data,n=t.progress,r=t.name;return(0,b.tZ)("div",{css:y,ref:function(e){return e&&e.scrollIntoViewIfNeeded&&e.scrollIntoViewIfNeeded()&&e.scrollIntoView(!1)},style:s.g.styles.progressBG(n),children:(0,b.tZ)("div",{className:"_label",children:(0,b.tZ)(p.u,{text:r,children:r})})})})),C=n(33346);function P(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Z(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function B(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?B(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I=(0,o.iv)("._title{min-width:130px;}._tabs{margin-bottom:-12px;",s.g.classes.margin_near("3em"),";font-weight:600;._active{font-weight:700;}}.dropzone{position:absolute;left:15px;top:55px;width:calc(100% - 30px);height:calc(100% - 101px);}.manager{._field_wrapper{max-width:500px;}}.searchBar{display:flex;align-items:baseline;>*:first-child{flex-grow:1;}}",""),A=(0,l.observer)((function(e){var t,n=e.onClose,o=e.onSelect,l=e.selectedItem,p=e.mediaStore,d=e.tabs,f=void 0===d?["images","gallery"]:d,m=e.my,g=void 0===m||m,h=(0,r.useMemo)((function(){return p||new a.Er({tabs:f,activeItemUrl:l,my:g})}),[]);(0,u.IV)(n,"MediaManager");var y=(0,u.aZ)(h.uploadItems).dndEvents;if(!h.ready)return(0,b.tZ)(i.a5,{title:lng("media manager").caps(),onClose:n});var v=Object.keys(h.tabs).map((function(e){return{val:e,label:h.allTabs[e]||e}})),_=(0,b.tZ)(c.m,{tabs:v,activeTab:h.activeTab,onSelect:function(e){h.activeTab=e,h.activeFolder=""},className:"_tabs"}),w=[{label:o?lng("cancel"):lng("close"),action:function(){return n()}},o&&{label:lng("confirm"),action:function(){return o(h.activeItem),n()}}].filter((function(e){return!!e}));return(0,b.tZ)(i.T,{css:I,width:"90vw",fullHeight:!0,title:lng("media manager").caps(),headTabs:_,tailButtons:w,onClose:n,children:(0,b.BX)(a.bw.Provider,{value:h,children:["gallery"!==h.activeTab&&h.activeFolder&&(0,b.BX)("span",{style:{fontWeight:600},children:[lng("folder").caps(),": ",h.activeFolder.slice(0,-1)]}),"gallery"===h.activeTab?(0,b.tZ)(D,{sections:h.tabs[h.activeTab]}):(0,b.BX)("div",{className:"manager",children:[(0,b.BX)("div",{className:"searchBar",children:[(0,b.tZ)(C.gN,{input:{type:"text",label:lng("search"),onMouseDown:function(e){return e.stopPropagation()}},value:h.search,onChange:function(e){return h.search=e}}),!(null!==(t=h.activeTab)&&void 0!==t&&t.startsWith("my_"))&&(0,b.tZ)(C.gN,{input:{type:"checkbox",label:lng("uploaded by me")},value:h.byMe,onChange:function(e){return h.byMe=e}})]}),(0,b.tZ)(N,{items:null==h?void 0:h.itemsInFolder,mayAdd:!0}),(0,b.tZ)("div",T(T({css:s.g.classes.dropzone,className:"dropzone"},y),{},{children:lng("drop files here").caps()}))]})]})})})),D=function(e){var t=e.sections;return(0,b.tZ)("div",{children:Object.entries(t).map((function(e){var t=P(e,2),n=t[0],r=t[1];return(0,b.tZ)(N,{title:n,items:r},n)}))})},R=(0,o.iv)(">._title{margin-top:10px;font-weight:600;color:",s.g.colors.text_main,";border-bottom:1px solid ",s.g.colors.border,";}>.thumbs{display:flex;flex-wrap:wrap;}",""),N=(0,l.observer)((function(e){var t=e.items,n=e.title,r=e.mayAdd;return(0,b.BX)("div",{css:R,children:[n&&(0,b.tZ)("div",{className:"_title",children:n.caps()}),(0,b.BX)("div",{className:"thumbs",children:[r&&(0,b.tZ)(S,{}),null==t?void 0:t.map((function(e){return e.folder?(0,b.tZ)(O,{data:e},e.name):void 0!==e.progress?(0,b.tZ)(j,{data:e},e.mf_id):(0,b.tZ)(_,{data:e},e.imgtag)}))]})]})}))},11766:function(e,t,n){"use strict";n.d(t,{Ql:function(){return M},Ux:function(){return re},uP:function(){return N}});var r=n(15560),o=n(70917),i=n(16920),a=n(71134),l=n(40236),s=n(56852),c=n(15967),u=n(40441),p=(n(57882),n(22334)),d=n(77376),f=n(95875),m=n(79990),g=n(35944),h=["reports","reportsBundle","group_id","workspace"],b=["data","group_id"],y=["data","group_id"],v=["data","group_id"],_=["data","group_id"],w=["data","group_id"],O=["data","group_id"],k=["data","group_id"],x=["data","group_id"],S=["data","group_id"],j=["data","group_id"],C=["data","group_id"],P=["data","group_id"],Z=["data","group_id"],B=["data","group_id"],T=["data","group_id","report","wrapWidget"];function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function I(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){A(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function A(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var R={name:"pktzvw",styles:"background-color:transparent;border-color:transparent;>a._title{font-size:1.1em;}"},N=(0,r.observer)((function(e){var t=e.reports,n=e.reportsBundle,r=e.group_id,o=e.workspace,a=D(e,h),s=R;return(0,g.BX)(l.Hl,{children:[(null==n?void 0:n.length)>0&&(0,g.tZ)(l.$L,{css:s,title:lng("additional reports"),children:(0,g.tZ)("div",{css:(0,m.Kv)({borderless:!0}),children:n.filter((function(e){return e})).map((function(e,t){var n=z(e,o);if(n)return(0,g.tZ)(f.o,{icon:"report",iconColor:i.g.colors.dominant_main,condenced:!0,title:re[e].caps(),href:n,newTab:!0,inContainer:!0,style:{textAlign:"center"}},t)}))})}),Object.keys(t).map((function(e){return t[e]&&(0,g.tZ)(M,I({report:e,data:t[e],group_id:r},a),e)}))]})})),z=function(e,t){var n,r;switch(e){case"ReportGroupStatus":return(0,u.p4)({report:"ReportGroupStatus"});case"CourseGradesReport":return(0,u.p4)({report:"CourseGradesReport"});case"ReportGroupMeetings":return(0,u.p4)({report:"ReportGroupMeetings"});case"ReportCompletion":return(0,u.p4)({report:"ReportCompletion"});case"GroupCourseParticipation":return!!("Qualification"===t.group_type&&["public","register"].includes(t.group_access)||"Qualification"!==t.group_type)&&(0,u.p4)({report:"GroupCourseParticipation",params:{group:t.group_id}});case"WorkspaceMembersListing":return(null===(n=t.members)||void 0===n?void 0:n.length)>0&&(0,u.p4)({report:"WorkspaceMembersListing",params:{group:t.group_id}});case"MeetingsSummary":return t.meetings.length>0&&(0,u.p4)({report:"MeetingsSummary",params:{group:t.group_id}});case"ReportCoursesinstructors":return!!(Blsm.isFeatureEnabled("resources")&&t.meetings.length>0)&&(0,u.p4)({report:"ReportCoursesinstructors",params:{group:t.group_id}});case"ReportMeetingsSchedule":return t.meetings.length>0&&(0,u.p4)({report:"ReportMeetingsSchedule",params:{range:"nextmonth",group:t.group_id}});case"ReportGroupParticipation":return(0,u.p4)({report:"ReportGroupParticipation"});case"ReportQualifications":return(0,u.p4)({report:"ReportQualifications"});case"BasicQualificationReport":return(0,u.p4)({report:"BasicQualificationReport",params:{group:t.group_id,qualification:t.group_id}});case"QualificationDependencies":return(null===(r=t.required_courses)||void 0===r?void 0:r.length)>0&&(0,u.p4)({report:"QualificationDependencies",params:{qualification:t.group_id}});case"QualificationComponents":var o,i="";return null===(o=t.members)||void 0===o||o.forEach((function(e){return i+="".concat(e.user_id,"_")})),(0,u.p4)({report:"QualificationComponents",params:{user:i,qualification:t.group_id,group:t.group_id}});case"Report_Approvals_Status_Reg":return!!t.sequence_id&&(0,u.p4)({report:"Report_Approvals_Status_Reg",params:{group:t.group_id}})}},M=function(e){switch(e.report){case"ReportGroupStatus":return(0,g.tZ)(X,I({},e));case"CourseGradesReport":return(0,g.tZ)(L,I({},e));case"ReportGroupMeetings":return(0,g.tZ)(U,I({},e));case"ReportCompletion":return(0,g.tZ)(V,I({},e));case"AssignmentCompletionReport":return(0,g.tZ)(J,I({},e));case"ReportOuQualificationStatus":return(0,g.tZ)(W,I({},e));case"OuStatusInCourses":return(0,g.tZ)(K,I({},e));case"MembersVisitReport":return(0,g.tZ)($,I({},e));case"FormsPerformancesReport":return(0,g.tZ)(Y,I({},e));case"ReportAccumulativeAssignments":return(0,g.tZ)(Q,I({},e));case"OuCoursesPlanExecute":return(0,g.tZ)(ee,I({},e));case"ReportQualifications":return(0,g.tZ)(H,I({},e));case"TasksStatusReport":return(0,g.tZ)(G,I({},e));case"ReportParticipationPlanning":return(0,g.tZ)(te,I({},e));default:return(0,g.tZ)(ne,I({},e))}},F=(0,o.iv)("display:flex;flex-direction:column;height:100%;._stats_section{display:flex;justify-content:space-around;flex-grow:1;align-items:center;._stat{height:60px;text-align:center;._number{font-weight:lighter;font-size:1.6em;color:",i.g.colors.text_sec,";}}}&._single{._chart_section{display:flex;flex-direction:column;height:100%;._chart{flex-grow:1;}}._stats_section{flex-wrap:wrap;justify-content:center;._stat{width:50%;}}}&._both{._chart_section{display:flex;border-top:1px solid ",i.g.colors.separator,";._chart{width:55%;padding:20px;}}}",""),q=function(e){var t=e.chart,n=e.chartData,r=e.passed_total,o=void 0===r?null:r,i=e.title,a=e.link,u=e.onlyPercent,p=e.stats,d=e.wrapWidget,f=void 0===d||d,m=o||(n&&"time"!==t?n.reduce((function(e,t){return e+parseFloat(t.number)}),0):0),h=(0,g.BX)("div",{css:F,className:null!=p&&p.length&&null!=n&&n.length?"_both":"_single",children:[(null==p?void 0:p.length)>0&&(0,g.tZ)("div",{className:"_stats_section",children:p.map((function(e,t){return(0,g.BX)("div",{className:"_stat",children:[(0,g.tZ)("div",{children:e.label.caps()}),(0,g.tZ)("div",{className:"_number",children:e.number})]},t)}))}),"time"===t&&(0,g.tZ)("div",{className:"_chart_section",children:(0,g.tZ)("div",{className:"_chart",children:(0,g.tZ)(s.kL,{type:t,data:n})})}),(null==n?void 0:n.length)>0&&(0,g.BX)("div",{className:"_chart_section",children:[(0,g.tZ)("div",{className:"_chart",children:(0,g.tZ)(s.kL,{type:t,data:n})}),(0,g.tZ)(c.Q,{side:(null==p?void 0:p.length)>0&&(null==n?void 0:n.length)>0,children:n.map((function(e,t){return!e.hideInLegend&&(0,g.tZ)(c.t,{denominator:m,numerator:e.number||0,label:e.label,color:e.color,onlyPercent:u},t)}))})]})]});return f?(0,g.tZ)(l.$L,{title:i,link:a,children:h}):h},X=function(e){var t=e.data,n=e.group_id,r=D(e,b),o=[{label:lng("passed"),color:i.g.colors.chart.success,number:t.passed_course},{label:lng("failed"),color:i.g.colors.chart.failure,number:t.completed-t.passed_course},{label:lng("not completed"),color:i.g.colors.chart.waiting,number:t.members-t.completed}];return(0,g.tZ)(q,I({chart:"pie",chartData:o,title:re.ReportGroupStatus,link:(0,u.p4)({report:"ReportGroupStatus",params:{group:n}})},r))},L=function(e){var t=e.data,n=e.group_id,r=D(e,y),o=Math.round(t.avg_score),a=o<33?i.g.colors.chart.failure:o<66?i.g.colors.chart.waiting:i.g.colors.chart.success,l=[{label:lng("average score"),color:a,number:o},{label:"",color:i.g.colors.chart.bg,number:100-o,hideInLegend:!0}];return(0,g.tZ)(q,I({chart:"pie",chartData:l,title:re.CourseGradesReport,link:(0,u.p4)({report:"CourseGradesReport",params:{group:n}})},r))},U=function(e){var t=e.data,n=e.group_id,r=D(e,v),o=t.attendees*t.meetings,a=[{label:lng("attendance"),color:i.g.colors.chart.success,number:t.attended},{label:lng("absence"),color:i.g.colors.chart.failure,number:o-t.attended}];return(0,g.tZ)(q,I({chart:"pie",chartData:a,title:lng("group meetings"),link:(0,u.p4)({report:"ReportGroupMeetings",params:{group:n}}),onlyPercent:!0},r))},V=function(e){var t,n=e.data,r=e.group_id,o=D(e,_),a=n.total-(parseInt(n.completed)+parseInt(n.failed)+parseInt(n.waiting)),l=null===(t=n.list_assignments)||void 0===t?void 0:t.replaceAll(",","_"),s=[{label:lng("success"),color:i.g.colors.chart.success,number:n.completed},{label:lng("failure"),color:i.g.colors.chart.failure,number:n.failed},{label:lng("in process"),color:i.g.colors.chart.progress,number:n.waiting},{label:lng("no progress"),color:i.g.colors.chart.waiting,number:a}];return(0,g.tZ)(q,I({chart:"pie",chartData:s,title:lng("completion report"),link:(0,u.p4)({report:"ReportCompletion",params:{group:r,assignment:l}}),onlyPercent:!0},o))},H=function(e){var t=e.data,n=e.group_id,r=D(e,w),o=t.in_process+t.renewing,a=[{label:lng("completed"),color:i.g.colors.chart.success,number:t.completed},{label:lng("expired"),color:i.g.colors.chart.failure,number:t.expired},{label:lng("in process")+" / "+lng("renewing"),color:i.g.colors.chart.progress,number:o},{label:lng("not completed"),color:i.g.colors.chart.waiting,number:t.not_completed}];return(0,g.tZ)(q,I({chart:"pie",chartData:a,title:lng("qualifications report"),link:(0,u.p4)({report:"ReportQualifications",params:{qualification:n}}),onlyPercent:!0},r))},G=function(e){var t=e.data,n=e.group_id,r=D(e,O),o=[{label:lng("open"),color:(0,d.Pp)("open"),number:t.open},{label:lng("closed"),color:(0,d.Pp)("closed"),number:t.closed},{label:lng("on hold"),color:(0,d.Pp)("on_hold"),number:t.on_hold}];return(0,g.tZ)(q,I({chart:"pie",chartData:o,title:lng("tasks status report"),link:(0,u.p4)({report:"TasksStatusReport",params:{group:n}})},r))},J=function(e){var t=e.data,n=e.group_id,r=D(e,k),o=t.total-(parseInt(t.success)+parseInt(t.failed)),a=[{label:lng("success"),color:i.g.colors.chart.success,number:t.success},{label:lng("failure"),color:i.g.colors.chart.failure,number:t.failed},{label:lng("no progress"),color:i.g.colors.chart.waiting,number:o}];return(0,g.tZ)(q,I({chart:"pie",chartData:a,title:lng("org' unit assignment completion"),link:(0,u.p4)({report:"AssignmentCompletionReport",params:{ou:n}}),onlyPercent:!0},r))},W=function(e){var t=e.data,n=e.group_id,r=D(e,x),o=(0,a.NM)(t.completed/t.qualifications_count*100,2),l=[{label:lng("progress"),color:i.g.colors.chart.progress,number:o},{label:lng("certified"),color:i.g.colors.chart.success,number:t.certified},{label:lng("no progress"),color:i.g.colors.chart.waiting,number:100-o}],s=[{label:lng("members"),color:"title",number:t.members},{label:lng("registered"),number:t.registered}];return(0,g.tZ)(q,I({chart:"pie",chartData:l,stats:s,title:lng("org' unit qualifications"),link:(0,u.p4)({report:"ReportOuQualificationStatus",params:{ou:n}}),onlyPercent:!0},r))},K=function(e){var t=e.data,n=e.group_id,r=D(e,S),o=[{label:lng("never started"),color:i.g.colors.chart.waiting,number:t.never_started},{label:lng("in process"),color:i.g.colors.chart.progress,number:t.in_process},{label:lng("completed"),color:i.g.colors.chart.success,number:t.completed}];return(0,g.tZ)(q,I({chart:"pie",chartData:o,stats:[{label:lng("in courses"),number:t.in_courses}],title:lng("org' unit status in courses"),link:(0,u.p4)({report:"OuStatusInCourses",params:{ou:n}})},r))},$=function(e){var t=e.data,n=e.group_id,r=D(e,j),o=[{label:lng("visited"),color:i.g.colors.chart.success,number:t.visited},{label:lng("first session"),color:i.g.colors.chart.progress,number:t.first_session},{label:lng("never logged"),color:i.g.colors.chart.waiting,number:t.never_logged},{label:lng("returning"),color:i.g.colors.chart.inactive,number:t.returning_users}];return(0,g.tZ)(q,I({chart:"pie",passed_total:t.members,chartData:o,title:lng("org' unit members visit"),link:(0,u.p4)({report:"MembersVisitReport",params:{ou:n,range:"month"}})},r))},Y=function(e){var t=e.data,n=e.group_id,r=D(e,C),o=[{label:lng("forms performed"),number:t.count},{label:lng("last date performed"),number:(0,p.GG)(t.last_date)}];return(0,g.tZ)(q,I({stats:o,title:lng("forms performances"),link:(0,u.p4)({report:"FormsPerformancesReport",params:{group:n}})},r))},Q=function(e){var t=e.data,n=e.group_id,r=D(e,P),o=[{label:lng("users"),number:t.user_count},{label:lng("assignments"),number:t.assignment_count+"%"},{label:lng("total performance"),number:(0,a.NM)(t.performance_sum/t.accumulation_sum*100)+"%"},{label:lng("average performance"),number:(0,a.NM)(t.avg_performance_percent)+"%"}];return(0,g.tZ)(q,I({stats:o,title:lng("accumulative assignments"),link:(0,u.p4)({report:"ReportAccumulativeAssignments",params:{group:n}})},r))},ee=function(e){var t=e.data,n=e.group_id,r=D(e,Z),o=[{label:lng("visited"),color:i.g.colors.chart.success,number:t.participants},{label:lng("first session"),color:i.g.colors.chart.waiting,number:t.members-t.participants}],l=[{label:lng("average score"),number:(0,a.NM)(t.avg_score)},{label:lng("average survey"),number:(0,a.NM)(t.avg_survey)},{label:lng("members"),number:t.members}];return(0,g.tZ)(q,I({chart:"pie",chartData:o,stats:l,title:lng("org' unit courses plan execute"),link:(0,u.p4)({report:"OuCoursesPlanExecute",params:{ou:n}})},r))},te=function(e){var t=e.data,n=e.group_id,r=D(e,B),o=[{label:lng("planned participants"),number:t[0].stats.total}];return(0,g.tZ)(q,I({chart:"time",chartData:t[0].data,stats:o,title:lng("participation planning"),link:(0,u.p4)({report:"ReportParticipationPlanning",params:{group:n}})},r))},ne=function(e){var t=e.data,n=e.group_id,r=e.report,o=e.wrapWidget,a=void 0===o||o,c=D(e,T),p=(0,g.tZ)(s.kL,I({type:"pie",data:I({labels:["success","failure","waiting"],datasets:[{data:[300,50,100],backgroundColor:[i.g.colors.chart.success,i.g.colors.chart.failure,i.g.colors.chart.waiting]}]},t)},c));return a?(0,g.tZ)(l.$L,{title:r,link:void 0!==c.link?c.link:(0,u.p4)({report:r,params:{group:n}}),children:p}):p},re={ReportGroupStatus:lng("workspace status"),CourseGradesReport:lng("grades report"),ReportGroupMeetings:lng("meetings"),ReportCourseMonitoring:lng("course monitoring"),ReportCompletion:lng("completion|report"),ReportQualifications:lng("qualifications"),AssignmentCompletionReport:lng("org' unit assignments completion"),ReportOuQualificationStatus:lng("org' unit qualification status"),OuStatusInCourses:lng("courses status"),MembersVisitReport:lng("members visits"),OuCoursesPlanExecute:lng("org' unit courses plan execute"),TasksStatusReport:lng("tasks status"),FormsPerformancesReport:lng("forms performances"),OuCompetencyReport:lng("org' unit competency level"),UserQualificationProgression:lng("qualification progression"),BasicQualificationReport:lng("basic qualification report"),GroupCourseParticipation:lng("course participation report"),WorkspaceMembersListing:lng("workspace members listing"),MeetingsSummary:lng("meetings summary"),ReportCoursesinstructors:lng("course instructors report"),ReportMeetingsSchedule:lng("meetings schedule"),QualificationDependencies:lng("qualification dependencies"),QualificationComponents:lng("qualification components"),Report_Approvals_Status_Reg:lng("courses registration request status")}},23016:function(e,t,n){"use strict";n.d(t,{O:function(){return v}});var r=n(15560),o=n(55832),i=n(16920),a=n(40676),l=(n(57882),n(87363)),s=n(66975),c=n(40441),u=n(64902),p=n(29180),d=n(70917),f=n(39483),m=n(40236),g=n(70081),h=n(71134),b=n(69637),y=n(35944),v=(0,r.observer)((function(e){var t=e.filteredItems,n=e.items,r=e.filterNsort,s=e.actions,c=e.showWorkspace,u=e.removeBlog,p=e.toggleUserVotePost,d=e.toggleLockPostComments,f=e.setActiveBlog,m=(0,o._V)("type",n).map((function(e){return Object.assign(e,{color:i.g.colors.entity[e.val],icon:"blog"===e.val?"vendor_blog":e.val,label:"blog"===e.val?lng("blogs"):"discussion"===e.val?lng("discussions",{phrase:!0}):e.val})})),h=[m.length>1&&{name:"type",label:lng("type"),type:"button_toggle",options:m},{name:"title",label:lng("title"),type:"text",outOfMenu:!0}],b=[{val:"",label:lng("default")},{val:"type",label:lng("type")},{val:"title",label:lng("title")}],v=[{title:lng("type"),sortVal:"type"},{title:lng("title"),sortVal:"title"},{title:lng("author")},c&&{title:lng("workspace")},{title:lng("last modified")},{title:lng("comments")},{title:lng("actions")}],O=(0,g.iP)().width,k=(0,l.useMemo)((function(){return O<1224}),[O]);return(0,y.tZ)(a.iA,{cols:v,collection:t,filters:h,sorts:b,filterNsort:r,actions:s,RowRenderer:_,rowProps:{showWorkspace:c,removeBlog:u,toggleUserVotePost:p,toggleLockPostComments:d,setActiveBlog:f},rowIdCol:"id",tableReplacement:k&&(0,y.tZ)(w,{discussions:t||n,rowProps:{setActiveBlog:f}})})})),_=(0,r.observer)((function(e){var t,n,r=e.row,o=e.rowProps,a=r.type,l=r.blog_id,d=r.discussion_id,f=r.mayEdit,m=r.lesson_options,g=r.date,h=r.user,v=r.comments_count,_=r.likes,w=r.group_name,O=r.data,k=o.removeBlog,x=o.toggleLockPostComments,S=o.toggleUserVotePost,j=o.setActiveBlog,C="blog"===a,P="discussion"===a,Z=C?l:P?d:null,B=C?null==m?void 0:m.lock_comments:P?"1"===(null==O?void 0:O.locked):null,T=P?null==O||null===(t=O.likes)||void 0===t?void 0:t.likes:C?null==_?void 0:_.likes:null,E=P?null==O||null===(n=O.likes)||void 0===n?void 0:n.user_vote:C?null==_?void 0:_.user_vote:null,I=null;"discussion"===a?I=(0,y.tZ)(s.JO,{icon:"discussion",toolTip:lng("discussion"),color:i.g.colors.entity.discussion}):"blog"===a&&(I=(0,y.tZ)(s.JO,{icon:"vendor_blog",toolTip:lng("blog",{phrase:!0}),color:i.g.colors.entity.blog}));var A=Blsm.user.id==h.user_id||Blsm.user.isPowerManager;return(0,y.BX)("tr",{onClick:function(){return"discussion"===r.type&&(0,c.p4)({edit:"discussion",params:{id:r.discussion_id,ws:r.data.group_id}},!0),void("blog"===r.type&&j(Z,a))},children:[(0,y.tZ)("td",{className:"_type_icon",children:I}),(0,y.tZ)(b.U6,{children:r.title}),(0,y.tZ)("td",{children:(0,y.tZ)(u.qE,{user:h})}),o.showWorkspace&&(0,y.tZ)("td",{children:w}),(0,y.tZ)("td",{children:(0,y.tZ)(p.ij,{time:g})}),(0,y.BX)("td",{children:[(0,y.tZ)(s.JO,{icon:"discussion"})," ",v?v+" "+lng("comments"):lng("no comments").caps()]}),(0,y.BX)(b.jA,{children:[P&&(0,y.tZ)(s.JO,{icon:E?"love_full":"love",buttonLike:!0,badge:T,onClick:function(){return S(Z,a)},color:E?i.g.colors.dominant_main:void 0}),(C||P)&&Blsm.isFeatureEnabled("assignments_comments")&&A&&(B?(0,y.tZ)(s.JO,{icon:"lock_open",toolTip:lng("lock comments"),buttonLike:!0,onClick:function(){return x(Z,a)}}):(0,y.tZ)(s.JO,{icon:"lock",toolTip:lng("unlock comments"),buttonLike:!0,onClick:function(){return x(Z,a)}})),f&&(0,y.tZ)(s.JO,{icon:"edit",buttonLike:!0,onClick:function(){return(0,c.p4)({edit:"content",id:Z},!0)}})," ",f&&(0,y.tZ)(s.JO,{icon:"trash",buttonLike:!0,onClick:function(){return k(Z,a)}})]})]})})),w=function(e){var t=e.discussions,n=e.rowProps;return(0,y.BX)(m.Hl,{children:[t.map((function(e){return(0,y.tZ)(k,{discussion:e,rowProps:n},e.discussion_id)})),(0,h.w6)(3).map((function(e){return(0,y.tZ)("div",{className:"_filler"},e)}))]})},O=(0,d.iv)("padding:7px;margin-top:10px;border-radius:8px;background-color:#FFF;",i.g.classes.shadow_light,";position:relative;min-width:",i.g.consts.CARD_WIDTH,"px;width:",i.g.consts.CARD_WIDTH,"px;a{display:flex;flex-direction:column;justify-content:space-between;min-height:125px;}&:hover{",i.g.classes.shadow_strong,";background-color:",i.g.colors.dominant_main_shade,";}.meta-row{display:flex;justify-content:space-between;font-size:.9em;margin-bottom:7px;>span{max-width:35%;max-height:35px;}&.bottom{align-items:flex-end;}}._title{color:",i.g.colors.text_main,";font-size:1.1em;font-weight:600;margin-bottom:7px;text-align:justify;white-space:nowrap;}.selected &{background-color:",i.g.colors.dominant_main_shade,";}.dragging &{background-color:",i.g.colors.dominant_main_shade,";}",""),k=(0,r.observer)((function(e){var t=e.discussion,n=e.topRightIcon,r=e.rowProps.setActiveBlog,o=t.type,a=t.blog_id,l=t.discussion_id,u=t.data,d="blog"===o,m="discussion"===o;return(0,y.tZ)("div",{css:O,children:(0,y.BX)(c.A,{href:m?{edit:"discussion",params:{id:l,ws:null==u?void 0:u.group_id}}:void 0,onClick:d?function(){return r(a,o)}:void 0,children:[(0,y.BX)("div",{className:"meta-row",children:[(0,y.BX)("span",{children:[m&&(0,y.tZ)(s.JO,{icon:"discussion",toolTip:lng("discussion"),color:i.g.colors.entity.discussion}),d&&(0,y.tZ)(s.JO,{icon:"vendor_blog",toolTip:lng("blog",{phrase:!0}),color:i.g.colors.entity.blog}),lng(t.type,{phrase:!0})]}),(0,y.tZ)("span",{children:(0,y.tZ)(p.ij,{time:t.date})}),n]}),(0,y.tZ)("div",{className:"_title",children:(0,y.tZ)(f.m,{children:t.title})}),(0,y.BX)("div",{className:"meta-row bottom",children:[(0,y.BX)("span",{children:[(0,y.tZ)("b",{children:lng("author")}),(0,y.tZ)("br",{}),t.user.user_first_name," ",t.user.user_last_name]}),(0,y.BX)("span",{children:[(0,y.tZ)("b",{children:lng("workspace")}),(0,y.tZ)("br",{}),t.group_name]}),(0,y.BX)("span",{children:[(0,y.tZ)(s.JO,{icon:"discussion"})," ",t.comments_count?t.comments_count+" "+lng("comments"):lng("no comments").caps()]})]})]})})}))},27018:function(e,t,n){"use strict";n.d(t,{B:function(){return T}});var r=n(15560),o=n(55832),i=n(70081),a=n(40676),l=(n(57882),n(70917)),s=n(16920),c=n(75898),u=n(87363),p=n(23838),d=n(98e3),f=n(40441),m=n(73105),g=n(66975),h=n(39483),b=n(29180),y=n(95405),v=n(64902),_=n(98075),w=n(77376),O=n(22334),k=n(71134),x=n(69637),S=n(35944);function j(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?j(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e){return function(e){if(Array.isArray(e))return B(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return B(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return B(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function B(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var T=(0,r.observer)((function(e){var t=e.filteredTasks,n=e.tasks,r=e.priorityOn,l=e.markAsSeen,c=e.viewMode,u=e.filterNsort,p=e.actions,d=e.noFilterSort,f=e.listKey,m=e.showArchiveFilter,g=e.loading,h=e.barExtraComponent,b=e.displayCount,y=e.sticky,v=void 0===y?s.g.consts.TABLE_HEAD_HEIGHT:y,_=e.stickyStartHeight,O=void 0===_?s.g.consts.DEFAULT_STICKY_START_HEIGHT:_,x=Z(new Map(n.map((function(e){return[e.group_id+"",e.group_name]})))).sort((function(e,t){var n;return null===(n=e[1])||void 0===n?void 0:n.localeCompare(t[1])})),j=Z(new Map(n.map((function(e){return[e.allocated_to+"",e.assignee_name]})))).sort((function(e,t){var n;return null===(n=e[1])||void 0===n?void 0:n.localeCompare(t[1])})),C=d?void 0:[{name:"task_id",label:"#",type:"text"},{name:"task_title",label:lng("task",{phrase:!0}),type:"text",outOfMenu:!0},{name:"task_type",label:lng("type"),type:"select_multi",options:(0,o._V)("task_type",n)},{name:"status_name",label:lng("status"),type:"select_multi",options:(0,k.cT)(n,"status_name").sort((function(e,t){return w.oJ.indexOf(e.task_resolution)-w.oJ.indexOf(t.task_resolution)})).map((function(e){return{val:e.status_name,label:(0,w.HR)(e.status_name),color:(0,w.Pp)(e.task_resolution)}}))},{name:"creator_name",label:lng("creator"),type:"select_multi",options:(0,o._V)("creator_name",n)},c&&{name:"group_id",label:lng("workspace"),type:"select_multi",options:x.map((function(e){return{val:e[0],label:e[1]}}))},{name:"allocated_to",label:lng("assignee"),type:"select_multi",options:j.map((function(e){return{val:e[0],label:e[1]}}))},{name:"severity",label:lng("severity"),type:"select_multi",options:(0,o._V)("severity",n,{labelFunc:w.i4})},r&&{name:"priority",label:lng("priority"),type:"select_multi",options:(0,o._V)("priority",n,{labelFunc:w.aS})},{name:"task_resolution",label:lng("resolution"),type:"select_multi",options:(0,o._V)("task_resolution",n,{labelFunc:w.Ey})},m&&{name:"archive",label:lng("show archive"),type:"checkbox"}].filter((function(e){return e})),P=d?void 0:[{val:"",label:lng("default")},{val:"task_id",label:"#"},{val:"task_title",label:lng("task",{phrase:!0})},{val:"task_type",label:lng("type")},{val:"status_name",label:lng("status")},{val:"creator_name",label:lng("creator")},c&&{val:"group_name",src_field:"group_id",label:lng("workspace")},{val:"modified_time",label:lng("modification date")},{val:"due_date",label:lng("due date")},{val:"assignee_name",label:lng("assignee")},{val:"severity",label:lng("severity")},r&&{val:"priority",label:lng("priority")},{val:"task_resolution",label:lng("resolution")}].filter((function(e){return e})),B=[{title:"#",sortVal:"task_id"},{},{title:lng("task",{phrase:!0}),sortVal:"task_title"},{title:lng("type"),sortVal:"task_type"},{title:lng("status"),sortVal:"status_name"},{title:lng("creator"),sortVal:"creator_name"},c&&{title:"workspace",sortVal:"group_name"},{title:lng("last modified"),sortVal:"modified_time"},{title:lng("due date"),sortVal:"due_date"},{title:lng("assignee"),sortVal:"assignee_name"},{title:lng("severity"),sortVal:"severity"},r&&{title:lng("priority"),sortVal:"priority"},{},!c&&{checkAll:!0}].filter((function(e){return e})),T=(0,i.iP)().width<1224;return(0,S.tZ)(a.iA,{cols:B,collection:t||n,filters:C,sorts:P,filterNsort:u,actions:p,RowRenderer:A,rowIdCol:"task_id",rowProps:{priorityOn:r,markAsSeen:l,viewMode:c,listKey:f},tableReplacement:T?(0,S.tZ)(w.D8,{tasks:t||n}):void 0,loading:g,barExtraComponent:h,displayCount:b,sticky:v,stickyStartHeight:O})})),E=(0,l.iv)(">._bold>div{display:flex;>div:first-of-type{",s.g.classes.margin_far("3px"),";}}&.display-new{background-color:",s.g.colors.highlight,";}",""),I={name:"14tpgxo",styles:"font-size:.9em"},A=(0,r.observer)((function(e){var t=e.row,n=e.rowProps,r=n.priorityOn,o=n.markAsSeen,i=n.viewMode,a=n.listKey,l=t.due_date,j=t.task_id,P=t.shownAt,Z=t.parent_task,B=t.task_title,T=t.task_type,A=t.task_type_color,D=t.task_resolution,R=t.status_name,N=t.group_id,z=t.group_name,M=t.modified_time,F=t.creator_id,q=t.creator_name,X=t.creator_avatar,L=t.assignee_name,U=t.severity,V=t.priority,H=t.bookmarked,G=t.comments_count,J=t.files_count,W=null;if(l)if("closed"===D)W=(0,S.tZ)(b.qp,{time:l,showTime:!1});else{var K=(0,O._3)(l),$=K.diff(new Date,"days"),Y={icon:"clock",text:$<0?lng("overdue").caps():$<5?lng("%s days left",$):(0,O.k6)(K,{time:!1}),color:$<0?"negative":$<5?"warning":"positive",title:$<0?(0,O.k6)(K,{time:!1}):void 0};W=(0,S.tZ)(c.jC,C(C({},Y),{},{css:I}))}var Q=(0,u.useContext)(p.l9);return(0,S.BX)("tr",{css:E,onClick:function(){return(0,f.p4)({edit:"task",id:j},!0)},className:P>(0,k.c7)()-60?"display-new":"",children:[(0,S.tZ)("td",{children:j}),(0,S.tZ)("td",{children:Z&&(0,S.tZ)(m.u,{text:lng("sub task"),children:(0,S.tZ)(g.vB,{})})}),(0,S.tZ)(x.U6,{children:(0,S.tZ)(h.m,{keepAlign:!0,children:(0,S.tZ)(f.A,{href:{edit:"task",id:j},css:s.g.classes.ellipsis_lines(3),stopPropagation:!0,children:B})})}),(0,S.tZ)("td",{children:T&&(0,S.tZ)(c.jC,{color:A,children:T})}),(0,S.tZ)("td",{className:"_bold",children:(0,S.BX)("div",{children:[(0,S.tZ)("div",{children:(0,S.tZ)(g.gT,{color:(0,w.Pp)(D),size:".7em"})}),(0,w.HR)(R,D).caps(!1)]})}),(0,S.tZ)("td",{children:(0,S.tZ)(y.SV,{children:(0,S.tZ)(v.qE,{user:{user_id:F,full_name:q,user_avatar:X}})})}),i&&(0,S.tZ)("td",{children:(0,S.tZ)(f.A,{href:{workspace:N,tab:"tasks"},onClick:function(e){return e.stopPropagation()},children:(z||"").caps()})}),(0,S.tZ)("td",{children:(0,S.tZ)(b.qp,{time:M})}),(0,S.tZ)("td",{children:W}),(0,S.tZ)("td",{children:L}),(0,S.tZ)("td",{children:(0,w.i4)(U)}),!!r&&void 0!==V&&(0,S.tZ)("td",{children:(0,w.aS)(V)}),(0,S.BX)(x.jA,{children:[(0,S.tZ)(g.JO,{icon:H?"bookmark_filled":"bookmark",onClick:function(){return(0,_.k)(t)}}),G>0&&(0,S.tZ)(g.JO,{icon:"discussion",toolTip:G+" "+lng("comments"),badge:G}),J>0&&(0,S.tZ)(g.JO,{icon:"attachment",toolTip:J+" "+lng("attachments"),badge:J}),o&&void 0!==V&&(0,S.tZ)(g.JO,{icon:"mark_v",toolTip:lng("mark as seen"),onClick:function(){var e=Q.getStore("home").getTasksStore(!0);(0,d.SC)("tasks/mark_as_seen",{method:"POST",data:{task_id:j}},(function(){null==e||e.removeTaskFromList(a,j)}))}})]}),!i&&(t.may_edit?(0,S.tZ)(x.Fo,{o:t}):(0,S.tZ)("td",{}))]})}))},77376:function(e,t,n){"use strict";n.d(t,{D8:function(){return _},Ey:function(){return b},HR:function(){return h},Pp:function(){return g},aS:function(){return y},i4:function(){return v},oJ:function(){return m},sD:function(){return O}});var r=n(66975),o=n(15560),i=n(75898),a=n(70917),l=n(16920),s=(n(57882),n(40441)),c=n(39483),u=n(71134),p=n(40236),d=n(7166),f=n(35944),m=["open","in_progress","closed","on_hold"],g=function(e){switch(e){case"open":return l.g.colors.task.authorized;case"closed":return l.g.colors.task.completed;case"on_hold":return l.g.colors.task.incomplete;case"in_progress":return l.g.colors.task.in_progress}return l.g.colors.task.incomplete},h=function(e,t){if(e)return e;switch(t){case"open":return lng("open");case"closed":return lng("closed");case"on_hold":return lng("on hold");case"in_progress":return lng("in progress")}return""},b=function(e){return h(null,e)},y=function(e){if(!e)return lng("unprioritized").caps();switch(parseInt(e)){case 1:return lng("low").caps();case 5:return lng("medium").caps();case 7:return lng("high").caps();case 9:return lng("urgent").caps()}return"-"},v=function(e){switch(parseInt(e)){case 1:return lng("cosmetic").caps();case 3:return lng("minor").caps();case 5:return lng("moderate").caps();case 7:return lng("major").caps();case 9:return lng("critical").caps()}return""},_=function(e){var t=e.tasks;return(0,f.BX)(p.Hl,{children:[t.map((function(e){return(0,f.tZ)(O,{task:e},e.task_id)})),(0,u.w6)(3).map((function(e){return(0,f.tZ)("div",{className:"_filler"},e)}))]})},w=(0,a.iv)("padding:7px;margin-top:10px;border-radius:8px;background-color:",l.g.colors.bg_cont,";",l.g.classes.shadow_light,";position:relative;min-width:",l.g.consts.CARD_WIDTH,"px;width:",l.g.consts.CARD_WIDTH,"px;color:",l.g.colors.text_main,";a{display:flex;flex-direction:column;justify-content:space-between;min-height:125px;}&:hover{",l.g.classes.shadow_strong,";background-color:",l.g.colors.dominant_main_shade,";}.meta-row{display:flex;justify-content:space-between;flex-grow:1;>span{max-width:35%;max-height:35px;font-size:0.8em;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;}&.bottom{align-items:flex-end;}}._title{color:",l.g.colors.text_main,";font-size:1.1em;font-weight:600;margin-bottom:7px;text-align:justify;word-break:break-word;}.selected &{background-color:",l.g.colors.dominant_main_shade,";}.dragging &{background-color:",l.g.colors.dominant_main_shade,";}",""),O=(0,o.observer)((function(e){var t=e.task,n=e.topRightIcon,o=e.onCheck,a=e.checked,u=t.task_id,p=t.task_resolution,m=t.status_name,b=t.task_type_color,_=t.task_type,O=t.task_title,k=t.assignee_name,x=t.group_name,S=t.priority,j=t.severity;return(0,f.tZ)("div",{css:w,children:(0,f.BX)(s.A,{href:{edit:"task",id:u},children:[(0,f.BX)("div",{className:"meta-row",children:[(0,f.BX)("span",{children:[(0,f.tZ)(r.gT,{color:g(p),size:".7em"})," ",h(m,p).caps(!1)]}),(0,f.tZ)("span",{children:(0,f.tZ)(i.jC,{color:b,children:_})}),n]}),(0,f.tZ)("div",{className:"_title",children:(0,f.tZ)(c.m,{children:O})}),(0,f.BX)("div",{className:"meta-row bottom",children:[S>0&&(0,f.BX)("span",{children:[lng("priority").caps(),": ",y(S)]}),j>0&&(0,f.BX)("span",{children:[lng("severity").caps(),": ",v(j)]})]}),(0,f.BX)("div",{className:"meta-row bottom",children:[(0,f.BX)("span",{children:[o&&(0,f.tZ)(r.JO,{icon:"checkbox"+(a?"_checked":""),color:l.g.colors.green,onClick:o})," ",(0,f.BX)("span",{className:"task-id",children:["#",u,(0,f.tZ)(d.g,{copy:""+u,success:lng("task id copied to clipboard"),smallButtonLike:!0})]})]}),(0,f.tZ)("span",{children:k}),(0,f.tZ)("span",{children:x})]})]})})}))},37938:function(e,t,n){"use strict";n.d(t,{Z5:function(){return Re},J:function(){return Ee},h3:function(){return Be},DL:function(){return Oe},PH:function(){return ke},v2:function(){return Pe}});var r,o,i=n(87363),a=n(70917),l=n(15560),s=(n(57882),n(40676)),c=n(23838),u=n(1010),p=n(64902),d=n(40441),f=n(68567),m=n(98e3),g=n(66975),h=n(71134),b=n(33051),y=n(24210),v=n(27821),_=n(9934),w=n(69637),O=n(35944);function k(e){return(k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function x(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return S(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function C(e,t){return(C=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function P(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=T(e);if(t){var o=T(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z(this,n)}}function Z(e,t){return!t||"object"!==k(t)&&"function"!=typeof t?B(e):t}function B(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T(e){return(T=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var I,A,D,R,N,z,M=(r=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&C(e,t)}(s,e);var t,n,r,a=P(s);function s(e){var t,n,r,c,u;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s),E(B(t=a.call(this,e)),"groupId",null),E(B(t),"sequenceId",null),n=B(t),r="users",c=o,u=B(t),c&&Object.defineProperty(n,r,{enumerable:c.enumerable,configurable:c.configurable,writable:c.writable,value:c.initializer?c.initializer.call(u):void 0}),(0,v.makeObservable)(B(t));var p=e.data,d=void 0===p?{}:p;t.groupId=d.group_id,t.sequenceId=d.sequenceId,t.title=lng("import members from other workspaces").caps(),t.confirmButtonLabel=lng("import").caps();var f=(0,l.observer)((function(e){var n=e.item,r=x((0,i.useState)("add"),2),o=r[0],a=r[1],l="add"===o?"new":"trash",s=lng("%s children",o);return(0,O.tZ)("div",{children:n.children&&(0,O.tZ)(g.JO,{icon:l,toolTip:s,onClick:function(){"add"===o&&t.addChildren({children:n.children}),"remove"===o&&t.removeChildren({children:n.children}),a("add"===o?"remove":"add")}})})}));return t._fields=[{type:"checkbox",name:"start_sequence",label:lng("start approval sequence"),insert:t.sequenceId},{type:"multiple_items",name:"groups",label:lng("select workspaces"),poster:!0,theme:"bright",valueIsMap:!0,searchData:function(e,n){var r,o=[];null===(r=t.values.get("groups"))||void 0===r||r.forEach((function(e){return o.push(e.id)})),(0,m.SC)("ajax/GroupsAjax.class.php",{data:{exclude:o||[],req:"searchGroups",types:["Ou","Group","Qualification","Workplan"],term:e.term||"",id:e.ids||""}},n)},buttons:[{Render:f}],onSelect:function(){return t.updateUsers()},onValueChange:function(){return t.updateUsers()}},{type:"component",name:"users",visible:function(){return t.users.length>0},node:(0,O.tZ)(F,{users:t.users})}],t._prepFields(),t.ready=!0,t}return t=s,(n=[{key:"updateUsers",value:function(){var e=this,t=this.values.get("groups"),n=Array.from(t.keys()).join(",");(0,m.SC)("groups/import_users",{data:{group_to_join:this.groupId,groups:n}},(function(t){var n,r=null==t||null===(n=t.items)||void 0===n?void 0:n.map((function(t){var n=e.users.find((function(e){return e.user_id===t.user_id})),r=!n||n._checked;return new _.o(t,r)}));e.users.replace(r||[])}))}},{key:"addChildren",value:function(e){var t=this,n=e.children;(0,m.SC)("ajax/GroupsAjax.class.php?",{data:{req:"AutoComplete",show_all:1,types:["Ou","Group","Qualification","Workplan"],id:n.split(",")}},(function(e){if(e.length>0){var n=new Map(t.values.get("groups"));e.map((function(e){return n.set(e.id,e)})),t.updateValue(n,"groups")}}))}},{key:"removeChildren",value:function(e){var t=e.children,n=new Map(this.values.get("groups"));t.split(",").forEach((function(e){return n.delete(e)})),this.updateValue(n,"groups")}},{key:"save",value:function(e){var t=this.users.filter((function(e){return e._checked})).map((function(e){return e.user_id})).join(",");e.groups=[this.groupId],this.saveToUrl("users/add_users_to_groups",Object.assign({users:t,ignore_exist:1},e))}}])&&j(t.prototype,n),r&&j(t,r),s}(y.I),I=r.prototype,A="users",D=[v.observable],R={configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}},z={},Object.keys(R).forEach((function(e){z[e]=R[e]})),z.enumerable=!!z.enumerable,z.configurable=!!z.configurable,("value"in z||z.initializer)&&(z.writable=!0),z=D.slice().reverse().reduce((function(e,t){return t(I,A,e)||e}),z),N&&void 0!==z.initializer&&(z.value=z.initializer?z.initializer.call(N):void 0,z.initializer=void 0),void 0===z.initializer&&(Object.defineProperty(I,A,z),z=null),o=z,r),F=(0,l.observer)((function(e){var t=e.users,n=[{title:lng("name")},{title:lng("workspace")},{title:lng("member of an instance")},{checkAll:!0}],r=(0,l.observer)((function(e){var t=e.row,n=t.name,r=t.group_name,o=t.instance;return(0,O.BX)("tr",{children:[(0,O.tZ)(w.U6,{children:n}),(0,O.tZ)("td",{children:r}),(0,O.tZ)("td",{children:o&&(0,O.tZ)(g.JO,{icon:"mark_v"})}),(0,O.tZ)(w.Fo,{o:t})]})}));return(0,O.tZ)("div",{children:(0,O.tZ)(s.iA,{cols:n,collection:t,rowIdCol:"user_id",loading:null===t,RowRenderer:r,compact:!0,noWindow:!0})})})),q=n(28534),X=n(33079);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function U(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function V(e,t){return(V=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function H(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return G(this,n)}}function G(e,t){return!t||"object"!==L(t)&&"function"!=typeof t?J(e):t}function J(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return(W=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var $=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&V(e,t)}(i,e);var t,n,r,o=H(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),K(J(t=o.call(this,e)),"selectedUsers",void 0),K(J(t),"groupId",void 0),t.selectedUsers=e.data.selectedUsers,t.groupId=e.data.groupId,t.title=lng("send schedule").caps(),t.saveUrl="invites/send_schedule",t.successMessage=lng("schedule sent");var n=[["all","".concat(lng("all users").caps()," (").concat(lng("members"),", ").concat(lng("managers"),", ").concat(lng("owners"),")")],["members",lng("only members").caps()],["mailing_list",lng("mailing list users").caps()]];return t.selectedUsers&&n.unshift(["selected",lng("only selected users")]),(0,m.SC)("systemMessages/select_system_messages",{},(function(e){var r=e.system_messages;t.buildFields(r,n)})),t}return t=i,(n=[{key:"buildFields",value:function(e,t){this._fields=[{type:"hidden",name:"group_id",value:this.groupId},{type:"hidden",name:"filter_users",value:this.selectedUsers,insert:this.selectedUsers},{type:"select",name:"send_schedule_to",label:lng("send to"),options:t},{type:"select",name:"schedule_custom_message",label:lng("select message"),options:e,mod:["","ENT"]},{type:"file",name:"schedule_attach_file",label:"".concat(lng("attach a file").caps()," (").concat(lng("optional"),")")}],this._prepFields(),this.ready=!0}},{key:"save",value:function(e){this.saveToUrl(this.saveUrl,Object.assign(e))}}])&&U(t.prototype,n),r&&U(t,r),i}(y.I),Y=n(43698),Q=n(16920),ee=n(22334),te=n(73105),ne=n(64454),re=n(62945),oe=n(60409);function ie(e){return(ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,t){return(le=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function se(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ue(e);if(t){var o=ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ce(this,n)}}function ce(e,t){return!t||"object"!==ie(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ue(e){return(ue=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var pe=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&le(e,t)}(i,e);var t,n,r,o=se(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),t=o.call(this,e);var n=e.data,r=void 0===n?{}:n;return t.group_id=r.group_id,t.existingUsers=r.users,t.existingGroups=r.groups,t.title=t.group_id?lng("add members").caps():"change_ou"===r.action?lng("change users org unit").caps():lng("add selected users to workspace"),t._fields=[{type:"multiple_items",name:"mailing_list_groups",label:lng("workspaces"),poster:!0,theme:"bright",helpKey:"@group/advanced/mailing/workspaces",searchData:function(e,n){(0,m.SC)("ajax/GroupsAjax.class.php",{data:{req:"AutoComplete",owned:1,types:["Group"],term:e.term||"",id:e.ids||"",exclude:t.existingGroups}},n)}},{type:"multiple_items",name:"mailing_list_users",label:lng("users"),poster:!0,theme:"bright",helpKey:"@group/advanced/mailing/users",searchData:function(e,n){(0,m.SC)("ajax/UsersAjax.class.php",{data:{req:"AutoComplete",term:e.term||"",id:e.ids||"",exclude:t.existingUsers}},n)}}],t._prepFields(),t.ready=!0,t}return t=i,(n=[{key:"save",value:function(e){this.saveToUrl("groups/add_to_mailing_list",Object.assign({group_id:this.group_id},e))}}])&&ae(t.prototype,n),r&&ae(t,r),i}(y.I),de=(n(60421),["user"]);function fe(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||ge(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function me(e){return function(e){if(Array.isArray(e))return he(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ge(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ge(e,t){if(e){if("string"==typeof e)return he(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?he(e,t):void 0}}function he(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function be(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ye(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?be(Object(n),!0).forEach((function(t){ve(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):be(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ve(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _e(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var we=function(e){return Blsm.user.isPowerManager||!Blsm.isFeatureEnabled("isolate_users")||(null==e?void 0:e.is_member)&&(e.is_owner||e.is_manager)},Oe=function(e){var t=e.user,n=_e(e,de);return Blsm.user.isPowerManager||!Blsm.isFeatureEnabled("isolate_users")?(0,O.tZ)(d.A,ye(ye({},n),{},{href:{user:t.user_id},children:(0,h.v2)(t)})):n.toolTip?(0,O.tZ)(te.u,{text:n.toolTip,children:(0,h.v2)(t)}):(0,h.v2)(t)},ke=(0,l.observer)((function(e){var t,n=e.collection,r=e.scrollParent,o=e.reload,i=e.workspace,a=e.noFilterSort,l=e.allowedUserFields,p=void 0===l?[]:l,g=e.userActions,h=void 0===g||g,b=e.sticky,y=void 0===b?Q.g.consts.TABLE_HEAD_HEIGHT+1:b,v=e.stickyStartHeight,_=void 0===v?Q.g.consts.DEFAULT_STICKY_START_HEIGHT:v,w=null==i?void 0:i.mayEditMembers(),k=null==i?void 0:i.maySetCoaches(),x=null==i?void 0:i.mayImportMembers(),S=[{narrow:!0},{title:lng("name").caps(),sortVal:"full_name"}].concat(me(p.map((function(e){return{title:(0,oe.X)(e),sortVal:e}}))),[Blsm.isFeatureEnabled("skills_occupations")&&{title:lng("skills")},h&&{},w&&{checkAll:!0}]),j=a?void 0:[{name:"user_id",label:"#",type:"text"},{name:"full_name",label:lng("name"),type:"text"}].concat(me(p.map((function(e){return"user_gender"===e?{name:"user_gender",label:lng("gender"),type:"select",exact:!0,options:[{val:"",label:""},{val:"Male",label:lng("male").caps()},{val:"Female",label:lng("female").caps()}]}:{label:(0,oe.X)(e),name:e,type:"text"}})))),C=a?void 0:[{val:"",label:lng("default")},{val:"full_name",label:lng("name")}].concat(me(p.map((function(e){return{val:e,label:(0,oe.X)(e)}})))),P=(0,c.vm)(),Z=w?[{icon:"new",menu:[{label:lng("add members"),onClick:function(){return P.openDialog("form",new u.l({data:{group_id:i.group_id,group_type:i.group_type,owner_options:i.owner_options,is_owner:i.is_owner,sequence_id:i.sequence_id},onSaveSuccess:function(e){e.warning?(0,q.nb)(e.warning):e.success?(0,q.qV)(lng("members successfully added")):e.request&&(0,q.qV)(lng("members successfully started an approval sequence")),P.closeDialog(),o()}}))}},{label:lng("import members from other workspaces"),onClick:function(){return P.openDialog("form",new M({data:{group_id:i.group_id,sequenceId:i.sequence_id},onSaveSuccess:function(e){e.success?(0,q.qV)(lng("members successfully imported to the group")):e.request?(0,q.qV)(lng("members successfully started an approval sequence")):e.warning&&(0,q.nb)(e.warning),P.closeDialog(),o()}}))}},x&&{label:lng("import members from a CSV or Excel"),onClick:function(){return(0,d.p4)({import:"members",params:{workspace_id:i.group_id}},!0)}}]},{icon:"trash",toolTip:lng("remove members"),action:function(){0!==n.filter((function(e){return e._checked})).length&&(0,f.cS)(lng("are you sure you want to remove the selected members?").caps(),{text:lng("remove members").caps(),inputType:"textarea",placeholder:lng("reason for removing"),onConfirm:function(e){return(0,m.SC)("users/remove_users_from_group",{method:"POST",data:{members:n.filter((function(e){return e._checked})).map((function(e){return e.user_id})),group_id:i.group_id,reason:e},json:!0},o)}})}},we(i)&&{icon:"by_mail",toolTip:lng("send message"),action:n.filter((function(e){return e._checked})).length?(0,d.p4)("#messages/in/new/&to="+n.filter((function(e){return e._checked})).map((function(e){return e.user_id}))):(0,d.p4)("#messages/in/new/&ws="+i.group_id)},{label:lng("send schedule").caps(),action:null!=i&&null!==(t=i.meetings)&&void 0!==t&&t.some((function(e){return e.start_date.isAfter()}))?function(){P.openDialog("form",new $({data:{selectedUsers:n.filter((function(e){return e._checked})).map((function(e){return e.user_id})).join(),groupId:i.group_id},onSaveSuccess:function(){return P.closeDialog()}}))}:void 0},Blsm.isFeatureEnabled("participation_planning")&&{icon:"calendar",toolTip:lng("participation planning"),action:function(){return(0,d.p4)({list:"participation_planning",params:"group_id=".concat(i.group_id)},!0)}}]:void 0;return(0,O.tZ)(s.iA,{cols:S,collection:n,filters:j,sorts:C,actions:Z,RowRenderer:je,rowIdCol:"user_id",scrollParent:r,sticky:y,stickyStartHeight:_,rowProps:{canAddRemove:w,canSetCoaches:k,group_id:null==i?void 0:i.group_id,group_type:null==i?void 0:i.group_type,userActions:h,allowedUserFields:p,ws:i}})})),xe=(0,a.iv)("color:",Q.g.colors.negative,";",""),Se=(0,a.iv)("display:flex;align-items:center;border-radius:20px;font-size:.9rem;padding:5px;background-color:",Q.g.colors.warning,";color:white;",""),je=(0,l.observer)((function(e){var t=e.row,n=e.rowProps,r=n.canAddRemove,o=n.canSetCoaches,i=n.group_id,a=n.group_type,l=n.userActions,s=n.allowedUserFields,c=n.ws,u=t.expire_time,d=t.skills,f=t.match_rate;return(0,O.BX)("tr",{children:[(0,O.tZ)("td",{className:"_avatar",children:(0,O.tZ)(p.qE,{user:t,balloon:we(c)})}),(0,O.BX)(w.U6,{width:"300px",children:[(0,O.tZ)(Oe,{user:t}),u&&parseInt(u)<(0,h.c7)()&&(0,O.BX)(O.HY,{children:[(0,O.tZ)("br",{}),(0,O.tZ)(te.u,{text:lng("member expiration date is %s",(0,ee.GG)(u,{time:!1})),children:(0,O.tZ)("span",{css:xe,children:lng("inactive member").caps()})})]})]}),s.map((function(e){return(0,O.tZ)("td",{children:t[e]},e)})),Blsm.isFeatureEnabled("skills_occupations")&&(0,O.tZ)("td",{children:(0,O.BX)("div",{css:Ce,children:[(0,O.tZ)("div",{children:d}),f&&(0,O.tZ)("div",{className:"match-rate",children:(0,O.BX)(te.u,{css:Se,text:lng("skill match percent").caps(),children:[f,"%"]})})]})}),l&&(0,O.tZ)(w.jA,{children:(0,O.tZ)(Ae,{user:t,canSetCoaches:o,group_id:i,group_type:a,ws:c})}),r&&(0,O.tZ)(w.Fo,{o:t})]})})),Ce={name:"ivau7f",styles:"display:flex;justify-content:space-between;.match-rate{display:flex;align-self:center;}"},Pe=(0,l.observer)((function(e){var t=e.collection,n=e.scrollParent,r=e.workspace,o=e.allowedUserFields,i=null==r?void 0:r.mayEditMembers(),a=[{narrow:!0},{title:lng("name").caps(),sortVal:"full_name"}].concat(me(o.map((function(e){return{title:(0,oe.X)(e),sortVal:e}}))),[{},i&&{checkAll:!0}]),l=[{name:"user_id",label:"#",type:"text"},{name:"full_name",label:lng("name"),type:"text"}].concat(me(o.map((function(e){return{val:e,label:(0,oe.X)(e)}})))),c=[{val:"",label:lng("default")},{val:"full_name",label:lng("name")}].concat(me(o.map((function(e){return{val:e,label:(0,oe.X)(e)}})))),u=r.canApproveMembers(r.waitingListSelected.length),p=0===r.waitingListSelected.length,m=[{icon:"like",action:r.waitingListSelected.length>0&&u?function(){return(0,f.BB)(lng("are you sure that you want to add the selected users to %s?",r.group_name).caps(),{onConfirm:function(){return r.waitingListApprove()}})}:void 0,color:Q.g.colors.positive,toolTip:p?void 0:u?lng("approve selected users").caps():lng("members limit reached, remove members to add").caps()},{icon:"dislike",action:p?void 0:function(){return(0,f.BB)(lng("are you sure that you want to reject the selected users from %s?",r.group_name).caps(),{onConfirm:function(){return r.waitingListReject()}})},color:Q.g.colors.negative,toolTip:p?void 0:lng("reject selected users").caps()},{icon:"by_mail",action:function(){return(0,d.p4)({messages:"in",id:"new",params:{to:r.waitingList.map((function(e){return e.user_id})).join(",")}},!0)},toolTip:lng("message to waiting list").caps()}];return(0,O.tZ)(s.iA,{cols:a,collection:t,filters:l,sorts:c,actions:m,RowRenderer:Ze,rowIdCol:"user_id",scrollParent:n,sticky:Q.g.consts.TABLE_HEAD_HEIGHT+1,rowProps:{canAddRemove:i,canApprove:r.canApproveMembers(),approve:r.waitingListApprove,reject:r.waitingListReject,group_id:null==r?void 0:r.group_id,group_name:r.group_name,allowedUserFields:o}})})),Ze=(0,l.observer)((function(e){var t=e.row,n=e.rowProps,r=n.canAddRemove,o=n.canApprove,i=n.approve,a=n.reject,l=n.group_name,s=n.allowedUserFields,c=t.user_id;return(0,O.BX)("tr",{children:[(0,O.tZ)("td",{className:"_avatar",children:(0,O.tZ)(p.qE,{user:t})}),(0,O.tZ)(w.U6,{width:"300px",children:(0,O.tZ)(Oe,{user:t})}),s.map((function(e,n){return(0,O.tZ)("td",{children:t[e]},"allowed-user-fields_"+n)})),(0,O.BX)(w.jA,{children:[(0,O.tZ)(g.JO,{icon:"like",buttonLike:!0,toolTip:o?lng("approve").caps():lng("members limit reached, remove members to add").caps(),onClick:function(){return(0,f.BB)(lng("are you sure that you want to add %s to %s?",(0,h.v2)(t),l),{onConfirm:function(){return i([c])}})},color:o&&Q.g.colors.positive,disabled:!o}),(0,O.tZ)(g.JO,{icon:"dislike",buttonLike:!0,toolTip:lng("reject").caps(),onClick:function(){return(0,f.BB)(lng("are you sure that you want to reject %s from %s?",(0,h.v2)(t),l),{onConfirm:function(){return a([c])}})},color:Q.g.colors.negative})]}),r&&(0,O.tZ)(w.Fo,{o:t})]})})),Be=(0,l.observer)((function(e){var t=e.collection,n=e.scrollParent,r=e.workspace,o=null==r?void 0:r.mayEditMembers(),i=[{narrow:!0},{title:lng("name").caps(),sortVal:"full_name"},{title:lng("job title").caps(),sortVal:"user_job_title"},{title:lng("company").caps(),sortVal:"user_company"},{title:lng("department").caps(),sortVal:"user_department"},{title:lng("gender").caps(),sortVal:"user_gender"},{title:lng("request time").caps(),sortVal:"addition_time"},{},o&&{checkAll:!0}].filter((function(e){return!!e})),a=[{name:"full_name",label:lng("name"),type:"text"},{name:"user_job_title",label:lng("job title"),type:"text"},{name:"user_company",label:lng("company"),type:"text"},{name:"user_department",label:lng("department"),type:"text"},{name:"user_gender",label:lng("gender"),type:"select",exact:!0,options:[{val:"",label:""},{val:"Male",label:lng("male").caps()},{val:"Female",label:lng("female").caps()}]}],l=[{val:"",label:lng("default")},{val:"full_name",label:lng("name")},{val:"user_job_title",label:lng("job title")},{val:"user_company",label:lng("company")},{val:"user_department",label:lng("department")},{val:"user_gender",label:lng("gender")},{val:"addition_time",label:lng("request time")}],c=[{icon:"by_mail",action:r.registeredUsersSelected.length>0?function(){return(0,d.p4)({messages:"in",id:"new",params:{to:r.registeredUsersSelected.join(",")}},!0)}:function(){return(0,d.p4)({messages:"in",id:"new",params:{to:r.registeredUsers.map((function(e){return e.user_id})).join(",")}},!0)},toolTip:lng("send message").caps()},ye({icon:"dislike"},r.registeredUsersSelected.length>0&&{color:Q.g.colors.negative,action:function(){(0,f.cS)(lng("add rejection reason (optional)"),{title:lng("are you sure that you want to reject these requests for this workspace?"),confirmText:lng("confirm"),inputType:"text",width:"700px",onConfirm:function(e){return r.registeredUsersReject(e)}})},toolTip:lng("reject selected users").caps()})];return(0,O.tZ)(s.iA,{cols:i,collection:t,filters:a,sorts:l,actions:c,RowRenderer:Te,rowIdCol:"user_id",scrollParent:n,sticky:Q.g.consts.TABLE_HEAD_HEIGHT+1,rowProps:{canAddRemove:o,group_id:null==r?void 0:r.group_id,group_name:r.group_name}})})),Te=(0,l.observer)((function(e){var t=e.row,n=e.rowProps.canAddRemove,r=t.user_job_title,o=t.user_company,i=t.user_department,a=t.user_gender,l=t.addition_time,s=t.user_id;return(0,O.BX)("tr",{children:[(0,O.tZ)("td",{className:"_avatar",children:(0,O.tZ)(p.qE,{user:t})}),(0,O.tZ)(w.U6,{width:"300px",children:(0,O.tZ)(Oe,{user:t})}),(0,O.tZ)("td",{children:r}),(0,O.tZ)("td",{children:o}),(0,O.tZ)("td",{children:i}),(0,O.tZ)("td",{children:a}),(0,O.tZ)("td",{children:(0,ee.GG)(l)}),(0,O.tZ)(w.jA,{children:(0,O.tZ)(g.JO,{icon:"by_mail",onClick:function(){return(0,d.p4)({messages:"in",id:"new",params:{to:s}},!0)}})}),n&&(0,O.tZ)(w.Fo,{o:t})]})})),Ee=(0,l.observer)((function(e){var t=e.collection,n=e.scrollParent,r=e.reload,o=e.workspace,i=e.userActions,a=void 0===i||i,l=e.roleWorkspace,u=void 0!==l&&l,p=o.group_id,g=o.group_type,h=o.is_owner,b=o.toggleDisplayManager,y=!h&&!o.is_manager,v=u?Blsm.user.isPowerManager:!y,_=u?[{title:lng("primary").caps()}]:[{title:lng("permission type").caps(),narrow:!y}].concat(me(y?[]:[{title:lng("create assignments").caps(),narrow:!0},{title:lng("set assignments weights").caps(),narrow:!0},{title:lng("create meetings").caps(),narrow:!0},{title:lng("edit meetings").caps(),narrow:!0},{title:lng("set meetings attendance").caps(),narrow:!0},{title:lng("share content").caps(),narrow:!0},Blsm.isFeatureEnabled("evaluation")&&{title:u?void 0:lng("view evaluations").caps(),narrow:!0},{title:lng("general").caps(),narrow:!0},"Ou"===g?{}:{title:lng("members director").caps(),narrow:!0}])),w=[{narrow:!0},{title:lng("name").caps(),sortVal:"full_name"}].concat(me(_),[0===_.length&&{},a&&{},v&&{checkAll:!0}]),k=[{name:"user_id",label:"#",type:"text"},{name:"full_name",label:lng("name"),type:"text"}],x=[{val:"",label:lng("default")},{val:"full_name",label:lng("name")}],S=(0,c.vm)(),j=function(e){S.openDialog("form",new ne.U({data:{group_id:o.group_id,manager_permission_types:o.manager_permission_types,managers:e},onSaveSuccess:function(){(0,q.qV)(lng("permissions changed successfully")),S.closeDialog(),r()}}))},C=function(e){var n=e.areYouSure,i=t.filter((function(e){return e._checked}));if(0!==i.length){var a=i.map((function(e){return!!e.manager&&!e.inherited&&e.user_id})).filter((function(e){return e})),l=i.map((function(e){return!!e.owner&&e.user_id})).filter((function(e){return e})),s=[];if(a.length>0&&s.push({label:lng("managers"),val:"managers"}),l.length>0&&s.push({label:lng("owners"),val:"owners"}),l.length>0&&a.length>0&&s.push({label:lng("managers and owners"),val:"managers_and_owners"}),s.length>1)(0,f.cS)(lng("remove from this workspace").caps(),{title:lng("remove users"),confirmText:lng("remove"),inputType:"select",selectOptions:s,onConfirm:function(e){(0,m.SC)("users/remove_users_from_group",{method:"POST",data:{managers:e.includes("managers")&&a,owners:e.includes("owners")&&l,group_id:o.group_id},json:!0},r)}});else{var c=n||(a.length>0?lng("are you sure you want to remove the selected managers?").caps():lng("are you sure you want to remove the selected owners?").caps());(0,f.BB)(c,{text:lng("remove").caps(),onConfirm:function(){(0,m.SC)("users/remove_users_from_group",{method:"POST",data:{managers:a,owners:l,group_id:o.group_id},json:!0},r)}})}}},P=t.filter((function(e){return e._checked})),Z=P.filter((function(e){return e.manager})),B=u?[{icon:"new",toolTip:lng("add role members"),action:function(){return S.openDialog("form",new ne.C({data:{group_id:p,group_type:g},onSaveSuccess:function(){return S.closeDialog(),r()}}))}},{icon:"trash",toolTip:lng("remove role members"),action:function(){return C({areYouSure:lng("are you sure you want to remove the selected role members?")})}},{icon:"ActionsSubmit",menu:[{label:lng("import members from a CSV or Excel"),onClick:function(){return(0,d.p4)({import:"members",params:{workspace_id:p}},!0)}}]}]:h?[{icon:"new",menu:[{label:lng("add managers"),onClick:function(){S.openDialog("form",new ne.U({data:{group_id:o.group_id,manager_permission_types:o.manager_permission_types,default_manager_setting:o.default_manager_setting,default_permissions:o.default_permissions},onSaveSuccess:function(){(0,q.qV)(lng("managers assigned successfully")),S.closeDialog(),r()}}))}},{label:lng("add owners"),onClick:function(){return S.openDialog("form",new re.J({data:{group_id:p,group_type:g},onSaveSuccess:function(){return S.closeDialog(),r()}}))}}]},{icon:"edit",toolTip:P.length>Z.length?lng("choose only managers to change permissions"):lng("change permissions"),action:P.length>Z.length||0===Z.length?void 0:function(){return j(Z)}},{icon:"trash",toolTip:lng("remove managers & owners"),action:0===P.length?void 0:C}]:null;return(0,O.tZ)(s.iA,{cols:w,collection:t,filters:k,sorts:x,RowRenderer:Ie,actions:B,rowIdCol:"user_id",rowProps:{rowAction:o.is_owner?function(e){j([e])}:void 0,userActions:a,roleWorkspace:u,group_id:p,group_type:g,less:y,is_owner:h,setPrimary:function(e){(0,m.SC)("users/set_manager_permissions",{method:"POST",json:!0,data:{user_id:e.user_id,group_id:p,main_manager:!0}}),t.forEach((function(e){return e.main_manager=!1})),e.main_manager=!0},checkboxes:v,ws:o,toggleDisplayManager:b},scrollParent:n,sticky:Q.g.consts.TABLE_HEAD_HEIGHT+1})})),Ie=(0,l.observer)((function(e){var t=e.row,n=e.rowProps,r=n.userActions,o=n.group_id,i=n.group_type,a=n.less,l=n.is_owner,s=n.roleWorkspace,c=n.checkboxes,u=n.ws,d=n.toggleDisplayManager,f=t.inherited,m=t.owner,b=t.main_manager,y=t.mpt_name,v=t.perm_assignments,_=t.perm_meetings,k=t.perm_content,x=t.perm_config,S=t.members_director,j=t.perm_evaluation,C=t.display_about,P=!!t.manager,Z=c&&(s||!f||m),B=[];return m&&B.push(lng("owner")),b&&B.push(lng("primary")),f&&B.push(lng("inherited")),P&&m&&!b&&!f&&B.push(lng("manager")),B.length>0&&(B[0]=B[0].caps()),(0,O.BX)("tr",{onClick:f||!P?void 0:function(){var e;return null===(e=n.rowAction)||void 0===e?void 0:e.call(n,t)},children:[(0,O.tZ)("td",{className:"_avatar",children:(0,O.tZ)(p.qE,{user:t,balloon:we(u)})}),(0,O.BX)(w.U6,{width:"300px",children:[(0,h.v2)(t),s?"":B.length>0&&(0,O.BX)("b",{children:[" (",B.join(", "),")"]})]}),s?(0,O.tZ)("td",{children:b?(0,O.tZ)(g.JO,{icon:"radio_checked",color:Q.g.colors.positive,buttonLike:!0}):(0,O.tZ)(g.JO,{icon:"radio",buttonLike:!0,color:Q.g.colors.grey,onClick:function(){return n.setPrimary(t)}})}):(0,O.BX)(O.HY,{children:[(0,O.tZ)("td",{className:(0,h.AK)({_center:!a}),children:y}),!a&&(0,O.BX)(O.HY,{children:[(0,O.tZ)("td",{className:"_center",children:"1"==v?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:v>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:"1"==_?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:"1"==_||"2"==_?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:_>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:k>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),Blsm.isFeatureEnabled("evaluation")&&(0,O.tZ)("td",{className:"_center",children:j>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:x>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""}),(0,O.tZ)("td",{className:"_center",children:S>0?(0,O.tZ)(g.JO,{icon:"mark_v_strong"}):""})]})]}),r&&(0,O.tZ)(w.jA,{children:(0,O.tZ)(Ae,{display_about:C,toggleDisplayManager:d,user:t,userLink:!0,group_id:o,group_type:i,connected_user_is_owner:l,ws:u,managersTable:!0})}),Z&&(0,O.tZ)(w.Fo,{o:t})]})})),Ae=function(e){var t=e.user,n=e.userLink,r=e.canSetCoaches,o=e.group_id,a=e.group_type,l=e.connected_user_is_owner,s=e.ws,u=e.managersTable,p=e.display_about,f=e.toggleDisplayManager,h=t.pretend,y=t.user_id,v=t.owned,_=t.automatic_enrollment,w=t.members_director,k=t.manager,x=t.inherited,S=(0,X.N)({user_id:y,is_manager:v}).map((function(e){return ye(ye({},e),{},{newTab:!0})})),j=fe((0,i.useState)(w),2),C=j[0],P=j[1];return(0,O.BX)(O.HY,{children:[h&&(0,O.tZ)(g.JO,{icon:"pretend",onClick:function(){return(0,c.vm)().pretend(y)},toolTip:lng("pretend to be this user"),buttonLike:!0}),we(s)&&void 0!==window.bchat&&(0,O.tZ)(g.JO,{icon:"chat",onClick:function(){return window.bchat.openChat(y)},toolTip:lng("start chat")}),we(s)&&(0,O.tZ)(g.JO,{icon:"message",buttonLike:!0,onClick:function(){return(0,d.p4)({message:"new",params:{to:t.user_id}},!0)},toolTip:lng("send message")}),!u&&(0,O.tZ)(b.x,{options:S,children:(0,O.tZ)(g.JO,{icon:"report",buttonLike:!0})}),n&&y&&(0,O.tZ)(g.JO,{icon:"user",buttonLike:!0,onClick:function(){return(0,d.p4)({user:y},!0)},toolTip:lng("user profile")}),_&&(0,O.tZ)(g.JO,{icon:"auto_enrolled",toolTip:lng("auto enrolled")}),r&&(0,O.tZ)(g.JO,{icon:"manager",buttonLike:!0,toolTip:lng("set coaches"),onClick:function(){return(0,c.vm)().openDialog("Component",{child:(0,O.tZ)(De,{user:t,group_id:o}),title:lng("assignment member options")})}}),l&&k&&"1"!==x&&"Ou"!==a&&(0,O.tZ)(g.JO,{icon:"user_sync",color:C?Q.g.colors.positive:"",toolTip:lng("set as members director"),buttonLike:!0,onClick:function(){var e=C?0:1;(0,m.SC)("users/set_members_director",{data:{group_id:o,user_id:y,set:e},method:"POST"},(function(){return(0,q.qV)(e?lng("members director set"):lng("members director removed"))})),P(e)}}),k&&!x&&(0,O.tZ)(g.JO,{icon:"menu_info",buttonLike:!0,toolTip:lng("display info about manager"),color:p?Q.g.colors.positive:"",onClick:function(e){return f(e,y)}})]})},De=(0,l.observer)((function(e){var t=e.user,n=e.group_id,r=fe((0,i.useState)(null),2),o=r[0],a=r[1];o||(0,m.SC)("assignment/assignment_users_options",{data:{user:t.user_id,group:n}},(function(e){a(e.items.map((function(e){return new _.o(e)})))}));var c=[{title:lng("assignment name").caps()},{title:lng("coach").caps()},o&&{checkAll:!0}],u=(0,l.observer)((function(e){var t=e.row,n=e.rowProps,r=t.assignment_name,o=t.assignment_id,a=t.possible_coaches,l=t.coach_id,s=t.coach_type,c=t.set_coach,u=n.updateCoach,p=fe((0,i.useState)(l||""),2),d=p[0],f=p[1];return s?(0,O.BX)("tr",{children:[(0,O.tZ)("td",{children:r}),(0,O.tZ)("td",{children:c||lng("not set").caps()}),(0,O.tZ)("td",{})]}):(0,O.BX)("tr",{children:[(0,O.tZ)("td",{children:r}),(0,O.tZ)("td",{children:(0,O.tZ)(Y.I,{wrapped:!0,type:"select",options:(0,h.wd)(a),value:d,emptyOption:!0,onChange:function(e){return t.coach_id=e,f(e),u(ve({},o,e))}})}),(0,O.tZ)(w.Fo,{o:t})]})})),p=function(e){(0,m.SC)("assignment/set_coach",{data:{user:t.user_id,data:e},method:"POST"})},d=o?[{icon:"group",toolTip:lng("set coach"),action:0===o.filter((function(e){return e._checked})).length?void 0:function(){var e=o.filter((function(e){return e._checked})),t={};e.forEach((function(e){return Object.assign(t,(0,v.toJS)(e.possible_coaches))})),(0,f.cS)(lng("select coach"),{title:lng("select coach"),confirmText:lng("set"),inputType:"select",selectOptions:(0,h.wd)(t),onConfirm:function(t){var n={};e.map((function(e){Object.keys(e.possible_coaches).includes(t)&&(n[e.assignment_id]=t,e.coach_id=t)})),p(n),a(o.map((function(e){return e._checked&&n[e.assignment_id]&&(e.coach_id=t),e})))}})}},{icon:"notifications",toolTip:lng("notify coaches"),action:0===o.filter((function(e){return e._checked})).length?void 0:function(){var e=o.filter((function(e){return e._checked})).map((function(e){return e.assignment_id}));(0,m.SC)("assignment/notify_coach",{data:{user:t.user_id,assignments:e},method:"POST"},(function(){return(0,q.qV)("notification will be sent to selected coaches")}))}}]:void 0;return(0,O.BX)("div",{children:[(0,O.tZ)("b",{children:t.full_name}),(0,O.tZ)(s.iA,{cols:c,collection:o,RowRenderer:u,loading:null===o,actions:d,rowIdCol:"assignment_id",rowProps:{updateCoach:p},noWindow:!0})]})})),Re=(0,l.observer)((function(e){var t=e.scrollParent,n=e.workspace;n.mailingListLoaded||n.fetchMailinList();var r=[{narrow:!0},{title:lng("name").caps(),sortVal:"object_name"},n.mailingList.length>0&&{checkAll:!0}].filter((function(e){return!!e})),o=[{name:"full_name",label:lng("name"),type:"text"}],i=[{val:"",label:lng("default")},{val:"name",label:lng("name")}],a=n.mailingList.filter((function(e){return e._checked&&"user"===e.object_type})).map((function(e){return e.user_id})),l=n.mailingList.filter((function(e){return e._checked&&"group"===e.object_type})).map((function(e){return e.group_id})),u=[{icon:"new",action:function(){(0,c.vm)().openDialog("form",new pe({data:{group_id:n.group_id,users:n.mailingList.filter((function(e){return"user"===e.object_type})).map((function(e){return e.user_id})),groups:n.mailingList.filter((function(e){return"group"===e.object_type})).map((function(e){return e.group_id}))},onSaveSuccess:function(){(0,c.vm)().closeDialog(),n.fetchMailinList()}}))}},{icon:"send_schedule",toolTip:lng("send schedule"),action:0===a.length&&0===l.length?void 0:function(){(0,m.SC)("ajax/GroupsAjax.class.php",{method:"POST",data:{req:"send_schedule_mailing_list",users:a,groups:l,group_id:n.group_id}},(function(e){return 1==e&&(0,q.qV)(lng("schedule sent successfully"))}))}},{icon:"trash",action:0===a.length&&0===l.length?void 0:function(){(0,f.BB)(lng("are you sure you want to delete the selected from mailing list?"),{onConfirm:function(){(0,m.SC)("groups/remove_from_mailing_list",{method:"POST",data:{users:a,groups:l,group_id:n.group_id}},(function(){n.mailingList=n.mailingList.filter((function(e){return!e._checked}))}))}})}}];return(0,O.tZ)(s.iA,{cols:r,collection:n.mailingList,loading:!n.mailingListLoaded,filters:o,sorts:i,actions:u,RowRenderer:Ne,rowIdCol:"key",scrollParent:t,sticky:Q.g.consts.TABLE_HEAD_HEIGHT+1})})),Ne=(0,l.observer)((function(e){var t=e.row,n=t.object_name,r=t.object_id,o=t.object_type;return(0,O.BX)("tr",{children:[(0,O.tZ)("td",{className:"_avatar",children:"user"===o&&(0,O.tZ)(p.qE,{user:t})}),(0,O.BX)(w.U6,{children:["#",r," ",n,"group"===o&&(0,O.tZ)(g.JO,{icon:"manager",toolTip:lng("a schedule will be sent to the managers of the workspaces|help")})]}),(0,O.tZ)(w.Fo,{o:t})]})}))},40443:function(e,t,n){"use strict";n.d(t,{B:function(){return p}});var r=n(70917),o=n(16920),i=(n(57882),n(31092)),a=n(42755),l=n(85311),s=n(71134),c=n(35944),u=(0,r.iv)("padding-bottom:15px;margin-bottom:20px;border-bottom:1px solid ",o.g.colors.separator,";display:flex;align-items:center;>._children{display:flex;align-items:center;&._is_mobile{flex-direction:column;}>._separator{margin:10px;}}._tabs{color:",o.g.colors.text_main,";font-weight:bold;position:relative;top:22px;}.Icon{",o.g.classes.margin_near("11px"),";}",""),p=function(e){var t=e.title,n=e.icons,r=void 0===n?[]:n,p=e.tabs,d=e.tab,f=e.onTabSelect,m=e.content,g=e.children;return(0,c.BX)("div",{css:u,className:"widget-header",children:[(0,c.BX)("div",{css:o.g.classes.flex_grow,children:[t&&(0,c.tZ)("div",{css:o.g.classes.widget_title,children:t.caps()}),p&&(0,c.tZ)(i.m,{tabs:p,activeTab:d,onSelect:f,className:"_tabs"}),m]}),g&&(0,c.BX)(c.HY,{children:[(0,c.BX)("div",{className:(0,s.AK)("_children",{_is_mobile:(0,s.tq)()}),children:[g.reduce((function(e,t){return e?(0,c.BX)(c.HY,{children:[e,(0,c.tZ)("div",{className:"_separator"}),t]}):t}),null),(0,c.tZ)(l.zh,{})]}),(0,c.tZ)(l.zh,{})]}),(0,c.tZ)(a.bV,{icons:r})]})}},99234:function(e,t,n){"use strict";n.d(t,{Iy:function(){return M},PQ:function(){return z},TY:function(){return R},gL:function(){return E},ol:function(){return T},tP:function(){return I},uO:function(){return D}});var r=n(70917),o=n(75898),i=n(95875),a=n(16920),l=n(48207),s=n(55832),c=n(8411),u=n(71134),p=n(70081),d=(n(57882),n(40441)),f=n(31991),m=n(64902),g=n(3755),h=n(40236),b=n(60409),y=(n(22906),n(25562),n(23838)),v=n(86303),_=n(15560),w=n(66975),O=n(34765),k=n(35944),x=["entity","inContainer","className","href","showImg","newTab","onClick","children"];function S(e){return function(e){if(Array.isArray(e))return j(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return j(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function C(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?C(Object(n),!0).forEach((function(t){Z(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):C(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var T=function(e){var t=e.entity,n=e.inContainer,r=e.className;return(0,k.tZ)(o.xr,{className:(0,u.AK)("smooth-theme",r),entity:t,playLink:t.link,inContainer:n,noComments:!0})},E=function(e){var t=e.entity,n=e.inContainer,r=e.className,i=e.activeTab;return(0,k.tZ)(o.xr,{className:(0,u.AK)("smooth-theme",r),entity:t,playLink:{courseCatalog:!0,tab:i,id:(null==t?void 0:t.url_id)||t.group_id},inContainer:n,noComments:!0})},I=function(e){var t,n,r=e.entity,o=e.inContainer,a=e.className,l=e.href,s=e.showImg,c=e.newTab,u=void 0!==c&&c,p=e.onClick,d=e.children,f=B(e,x);return(0,k.BX)(i.o,P(P({title:r.title,markColor:r.markColor,className:a,href:void 0!==l?l:{workspace:r.group_id,newTab:u},newTab:u,onClick:p,inContainer:o,img:s?r.image:void 0,menuOptions:r.menu(),tags:r.tags||[!r.hide_type&&(null===(t=r.type_title)||void 0===t?void 0:t.toUpperCase()),r.category].filter((function(e){return e})),progress:r.progress},f),{},{children:[d,r.progress&&(0,k.tZ)("div",{children:(0,k.tZ)(g.k,{numerator:r.progress[0],denominator:r.progress[1]})}),(null===(n=r.users)||void 0===n?void 0:n.length)>0&&(0,k.tZ)("div",{children:(0,k.tZ)(m.I9,{users:r.users,totalCount:r.count_users,maxSlots:3})})]}))},A={name:"1gpzra0",styles:"margin-bottom:1em"},D=function(e){var t=e.workspaces,n=e.compactView,r=e.onViewSelect,o=e.className,i=e.setShowOld,a=e.recent,d=e.displayCount,f=(0,p.qD)(),m=f.filtersVals,g=f.setFilterVals,h=f.sort,y=f.setSort,_=(0,s._V)("classification_name",t);t.find((function(e){return!e.attr("classification_name")}))&&_.unshift({val:null,label:lng("no classification").caps()});var w={Ou:1,Course:2,Group:3,Qualification:4,Workplan:5,Campus:6,Course_template:7,Subset:8,PatientCase:9},O=[{val:"",label:lng("all")}].concat(S((0,s._V)("group_type",t,{labelFunc:function(e){return(0,b.p)(e,null,!0)},sortFunc:function(e,t){return w[e]-w[t]}}))),x=[{name:"group_name",label:lng("name"),type:"text",outOfMenu:!0},!Blsm.isFeatureEnabled("hide_group_types")&&{name:"group_type",label:lng("type"),type:"tab",options:O},{name:"membership",label:lng("membership"),type:"select_multi",options:[{val:"is_manager",label:lng("is manager").caps()},{val:"is_member",label:lng("is member").caps()}],func:function(e,t){var n=!1;if(e.forEach((function(e){return"1"==(null==t?void 0:t._attr[e])?n=!0:""})),n)return t}},{name:"show_old",label:lng("include past workspaces"),type:"checkbox",func:function(e,t){return t},onValueChange:function(e){m.show_old=e.show_old,i(e.show_old)}}].filter((function(e){return!!e})),j=[{val:"",label:lng("default")},{val:"group_name",label:lng("name")},{val:"group_type",label:lng("type")},{val:"classification_name",label:lng("classification")}],C=(0,s.WB)(t,m,h,{recent:a,filters:x}),P=(0,k.tZ)(c.CX,{filters:x,filtersVals:m,onFilter:g,sorts:j,sort:h,onSort:y,compactView:n,onViewSelect:r,alwaysShow:!0,displayCount:{count:C.length,display:d}});return(0,k.BX)(l.W2,{head:P,className:o,noBottomPadding:!0,children:[_.length>1&&(0,k.tZ)(v._,{options:_,value:m.classification_name,theme:"tags",css:A,onChange:function(e){return g((0,u.v7)(Object.assign({},m,{classification_name:e||void 0})))}}),(0,k.tZ)(R,{workspaces:(0,s.WB)(t,m,h,{recent:a,filters:x}),compactView:n})]})},R=(0,_.observer)((function(e){var t=e.workspaces,n=e.compactView,r=e.page,o=e.activeTab,i=e.title,l=e.mainTitle,s=e.useCarousel,c=e.floatingControls,u=t.map((function(e){var t,i={key:e.url_id||e.group_id,entity:e,inContainer:!0};return n?t=(0,k.tZ)(O.Q,{item:e},e.group_id):"registration"===r?t=(0,k.tZ)(E,P(P({},i),{},{activeTab:o})):"dashboard"===r?("assignments"===o&&(i.key=e.assignment_dashboard_id),t=(0,k.tZ)(M,P(P({},i),{},{activeTab:o}))):t=(0,k.tZ)(T,P({},i)),t}));return(0,k.BX)("div",{children:[i&&t.length>0&&(0,k.tZ)(z,{title:i,mainTitle:l,count:t.length}),s?(0,k.tZ)(f.T,{floatingControls:c,children:u}):n?(0,k.tZ)("div",{css:a.g.classes.list,children:u}):(0,k.tZ)(h.Hl,{children:u})]})})),N=function(e){return(0,r.iv)("font-size:",e?"1.4rem;":"1.2rem;",";font-weight:600;margin:10px 0;padding:5px 0;>span{font-size:1.2rem;color:",a.g.colors.text_sec,";margin:10px 0;padding:5px 0;}.Icon{display:none;font-size:",e?"1rem;":".8rem;",";}&:hover{.Icon{display:inline;}}","")},z=function(e){var t=e.title,n=e.count,r=e.mainTitle,o=e.icon,i=e.className,a="string"==typeof o?(0,k.tZ)(w.JO,{icon:o}):o;return(0,k.BX)("div",{className:i,css:N(r),children:[null==t?void 0:t.caps(),n>0&&(0,k.BX)("span",{children:[" (",n,")"]})," ",(0,k.tZ)("span",{children:a})]})},M=function(e){var t=e.entity,n=e.inContainer,r=e.className;return(0,k.tZ)(o.xr,{className:(0,u.AK)(r),entity:t,inContainer:n,onTitleClick:function(){"assignment"===t.type?(0,y.vm)().showSideDrawer(t):"workspace"===t.type&&(0,d.p4)({workspace:t.group_id},!0)},noComments:!0,noAction:!0})}},10918:function(e,t,n){"use strict";n.d(t,{a:function(){return S},v:function(){return h}});var r=n(70917),o=n(16920),i=n(73105),a=n(71134),l=n(40441),s=n(86344),c=n(87363),u=n(35944);function p(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var g=(0,r.iv)("width:100%;table-layout:fixed;border-collapse:collapse;border:1px solid ",o.g.colors.border,";color:",o.g.colors.text_sec,";th{border:1px solid ",o.g.colors.border,";height:30px;padding:0;}th.weekend{background-color:",o.g.colors.highlight,";}td.month-name,th:first-of-type{width:90px;}",""),h=function(e){var t=e.curYear,n=e.eventsArray,r=(0,a.w6)(37),o=(0,a.w6)(12).map((function(e){var n=new Date(t,e,1).getDay(),r=new Date(t,e+1,0).getDate();return{month:e,startIndex:n,endIndex:n+r,daysInMonth:r}}));return(0,u.BX)("table",{css:g,children:[(0,u.tZ)("thead",{children:(0,u.BX)("tr",{children:[(0,u.tZ)("th",{}),r.map((function(e){return(0,u.tZ)("th",{className:e%7>4?"weekend":"",children:(0,u.tZ)("div",{children:Blsm.lang.shortWeekDays[e%7]})},e)}))]})}),(0,u.tZ)("tbody",{children:o.map((function(e){var r=e.startIndex,o=e.endIndex,i=e.month,a=e.daysInMonth;return(0,u.tZ)(y,{startIndex:r,endIndex:o,daysInMonth:a,month:i,year:t,monthEvents:n[i]},i)}))})]})},b=(0,r.iv)("td{border:solid ",o.g.colors.border,";border-width:1px 0 1px;vertical-align:top;.month-label{text-align:center;}&:first-child{border-",o.g.far,"-width:1px;}}",""),y=function(e){var t=e.year,n=e.month,r=e.startIndex,o=e.endIndex,i=e.daysInMonth,l=e.monthEvents,s=(0,a.w6)(37),c=l.sort((function(e,t){return e.start-t.start})),p=[],d={};return c.length&&c.forEach((function(e){e.curMonthDayStart=t===e.start_year&&n===e.start_month?e.start_day-1:0,e.curMonthDayEnd=t===e.end_year&&n===e.end_month?e.end_day-1:i-1,e.open=n===e.start_month&&e.start_year===t,e.close=n===e.end_month&&e.end_year===t;for(var r=x(e,p,i),o=e.curMonthDayStart;o<=e.curMonthDayEnd;o++)p[r][o]=e.id;d[r]=d[r]||{},d[r][e.curMonthDayStart]=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){m(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e)})),(0,u.BX)(u.HY,{children:[(0,u.BX)("tr",{css:b,children:[(0,u.tZ)("td",{rowSpan:p.length+1,className:"month-name",children:(0,u.tZ)("div",{className:"month-label",children:Blsm.lang.Months[n]})}),s.map((function(e){return(0,u.tZ)(_,{dayIndex:e,startIndex:r,endIndex:o},e)}))]}),p.map((function(e,t){return(0,u.tZ)("tr",{children:s.map((function(e){return d[t][e-r]?(0,u.tZ)(O,{month:n,event:d[t][e-r]},n+"_"+t+"_"+e):(0,u.tZ)(k,{},t+"_"+e)}))},t)}))]})},v=(0,r.iv)("color:",o.g.colors.text_light_disabled,";text-align:center;&.weekend{background-color:",o.g.colors.highlight,";}",""),_=function(e){var t=e.dayIndex,n=e.startIndex,r=e.endIndex;return t>=n&&t<r?(0,u.tZ)("td",{css:v,className:t%7>4?"weekend":"",children:(0,u.tZ)(i.u,{text:Blsm.lang.weekDays[t%7],children:t-n+1})}):(0,u.tZ)(k,{})},w=(0,r.iv)("color:white;cursor:default;position:relative;.event{line-height:1em;&:hover{box-shadow:0 1px 3px ",o.g.colors.blue,";}&.open{border-top-",o.g.near,"-radius:",o.g.consts.SKINNY_BORDER_RADIUS,"px;border-bottom-",o.g.near,"-radius:",o.g.consts.SKINNY_BORDER_RADIUS,"px;}&.close{border-top-",o.g.far,"-radius:",o.g.consts.SKINNY_BORDER_RADIUS,"px;border-bottom-",o.g.far,"-radius:",o.g.consts.SKINNY_BORDER_RADIUS,"px;}.label{padding:2px 4px;white-space:nowrap;}div{width:100%;display:inline-block;}&>div>div{",o.g.classes.ellipsis,";}}",""),O=function(e){var t=e.event,n=p((0,c.useState)(),2),r=n[0],d=n[1],f=t.curMonthDayEnd,m=t.curMonthDayStart,g=t.datesString,h=t.eventIndex,b=t.id,y=t.name,v=t.open,_=t.close,O=t.className,k=1+f-m,x=o.g.colors.set[h%16],S={color:(0,s.ou)(x),backgroundColor:x,width:r?"".concat(r*k,"px"):"".concat(k,"00%")};return(0,u.tZ)("td",{css:w,ref:function(e){return e&&d(e.getBoundingClientRect().width)},children:(0,u.tZ)("div",{onClick:function(){return(0,l.p4)({workspace:b},!0)},className:(0,a.AK)("event",O,{open:v,close:_}),style:S,children:(0,u.tZ)(i.u,{text:y+"\r\n"+g,children:(0,u.tZ)("div",{className:"label",children:y})})})})},k=function(){return(0,u.tZ)("td",{css:(0,r.iv)("background-color:",o.g.colors.bg_page_containers,";","")})},x=function(e,t,n){for(var r=0;r>=0;){if(!t[r])return t[r]=Array(n),r;for(var o=!0,i=e.curMonthDayStart;i<=e.curMonthDayEnd;i++)o=o&&!t[r][i];if(o)return r;r++}},S=function(e,t){var n=[[],[],[],[],[],[],[],[],[],[],[],[]];return null==e||e.forEach((function(e,r){e.eventIndex=r+1;var o=new Date(1e3*e.start),i=new Date(1e3*e.end);if(o.getFullYear()===t||i.getFullYear()===t){e.start_year=o.getFullYear(),e.start_month=e.start_year<t?0:o.getMonth(),e.start_day=e.start_year<t?1:o.getDate(),e.end_year=i.getFullYear(),e.end_month=e.end_year>t?11:i.getMonth(),e.end_day=e.end_year>t?31:i.getDate(),e.datesString=moment(o).format("DD.MM.YYYY")+" - "+moment(i).format("DD.MM.YYYY");for(var a=e.start_month;a<=e.end_month;a++)n[a].push(e)}})),n}},80504:function(e,t,n){"use strict";n.d(t,{$:function(){return G},d:function(){return L}});var r=n(87363),o=n(70917),i=n(15560),a=n(48207),l=n(16920),s=n(71137),c=n(66975),u=n(75898),p=n(71134),d=n(99844),f=n(40441),m=n(32808),g=n(24210),h=n(68567),b=n(35944);function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _(e,t){return(_=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function w(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return O(this,n)}}function O(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function k(e){return(k=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var x=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_(e,t)}(i,e);var t,n,r,o=w(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),(t=o.call(this,e)).confirmButtonLabel=lng("submit").caps();var n=e.data,r=void 0===n?{}:n,a=e.group_id,l=e.user_id;return r.user_id=l,r.group_id=a,Object.assign(t._initialValues,r),t.title=r.receipt_id?lng("edit expense"):lng("new expense"),t.successMessage=lng("saved"),t.saveUrl="groups/save_external_course_receipt",t.buildFields(t._initialValues,e.limitAmount),t}return t=i,(n=[{key:"buildFields",value:function(e,t){var n=this;this._fields=[{type:"hidden",name:"receipt_id"},{type:"hidden",name:"group_id"},{type:"hidden",name:"user_id"},{type:"text",name:"description",label:lng("description"),required:!0},{type:"text",name:"notes",label:lng("notes")},{type:"row_set",fields:[{type:"number",name:"amount",label:lng("amount|money"),symbol:(0,p.OM)().symbol,min:0,max:t,required:!0},{type:"component",node:(0,b.tZ)(G,{label:lng("maximum"),amount:t})}]}],(0,p.w6)(20).forEach((function(e){return n._fields.push({type:"file",name:"files[".concat(e,"]"),label:0===e?lng("attach a file"):void 0,visible:e?function(){return!!n.values.get("files[".concat(e-1,"]"))}:void 0,required:!e})})),this._prepFields(e),this.ready=!0}},{key:"save",value:function(e){var t=this,n=Object.values(e.files||{}).length;(0,h.BB)((0,b.BX)(b.HY,{children:[(0,b.BX)("div",{children:[lng("amount|money").caps(),": ",(0,b.tZ)("b",{children:(0,p.vC)(e.amount)}),"."]}),(0,b.BX)("div",{children:[lng("description").caps(),": ",(0,b.tZ)("b",{children:e.description}),"."]}),(0,b.BX)("div",{children:[n?lng("%s attached files",n).caps():(0,b.tZ)("b",{children:lng("no attached files").caps()}),"."]}),(0,b.BX)("div",{children:[lng("your submission is final.").caps()," ",lng("are you sure you want to continue?").caps()]})]}),{title:lng("please confirm these details"),confirmText:lng("submit").caps(),onConfirm:function(){return t.saveToUrl(t.saveUrl,e)}})}}])&&v(t.prototype,n),r&&v(t,r),i}(g.I),S=n(98e3),j=n(38320),C=n(28534),P=n(29180),Z=n(73105),B=n(85597),T=n(31092),E=n(7392),I=n(23205),A=["external","receipts","readOnly","onClose","approvalRequest","performApprovalAction"];function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){N(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return M(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return M(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function M(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function F(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var q={name:"7djjp0",styles:".amounts{margin-bottom:10px;}.link_to_report{display:block;margin-top:10px;}"},X={name:"1m8i2j7",styles:"overflow:auto;max-height:calc(100%)"},L=(0,i.observer)((function(e){var t=e.external,n=e.receipts,o=e.readOnly,i=e.onClose,u=e.approvalRequest,p=e.performApprovalAction,d=F(e,A),m=(0,r.useRef)(null),g=t.group_id,h=z((0,r.useState)(null),2),y=h[0],v=h[1],_=z((0,r.useState)(null),2),w=_[0],O=_[1],k=function(e){return parseFloat(e||0)},P=z((0,r.useState)("receipts"),2),D=P[0],N=P[1],M=[{val:"receipts",label:lng("receipts")}];return null!=u&&u.request_id&&M.push({val:"requestDetails",label:lng("request details")}),y||(0,S.SC)("groups/excourse_details/".concat(g),{},(function(e){return v(e)})),(0,b.tZ)(s.d,R(R({from:l.g.near,ref:m,scroll:!0,onClose:i},d),{},{children:(0,b.tZ)(a.W2,{head:(0,b.tZ)(a.$0,{icon:"receipt",title:"".concat(lng("receipts")," - ").concat(t.group_name),onClose:function(){return m.current.close()}}),stickyHead:!0,css:q,children:(0,b.BX)(b.HY,{children:[(0,b.tZ)("b",{children:t.ect_name}),y?(0,b.BX)(b.HY,{children:[M.length>1&&(0,b.tZ)(T.m,{tabs:M,onSelect:N,activeTab:D}),"requestDetails"!==D&&(0,b.BX)(b.HY,{children:[(0,b.BX)("div",{className:"amounts",children:[(0,b.tZ)(G,{amount:y.approved_funding,label:lng("total funding"),alwaysDisplay:!0}),(0,b.tZ)(G,{amount:y.amount_approved,label:lng("amount approved")}),(0,b.tZ)(G,{amount:k(y.amount_waiting),label:lng("amount waiting")}),(0,b.tZ)(G,{amount:y.amount_rejected,label:lng("amount rejected")}),(0,b.tZ)(G,{amount:k(y.approved_funding)-k(y.amount_approved)-k(y.amount_waiting),label:lng("available amount|expenses")})]}),!o&&(0,b.tZ)(Z.u,{text:null!=y&&y.amount_spare?null:lng("cannot report more than the approved amount"),children:(0,b.BX)(E.l,{theme:"contained",disabled:!(null!=y&&y.amount_spare),onClick:function(){if(null==y||!y.amount_spare)return(0,C.Mj)(lng("cannot report more than the approved amount"));O(w?null:new x({external:t,group_id:g,user_id:Blsm.user.id,initialData:{},limitAmount:y.amount_spare,onSaveSuccess:function(e){n.push(e),v(null),O(null)}}))},children:[(0,b.tZ)(c.JO,{icon:"mark_plus_light"})," ",lng("report an expense").caps()]})}),w&&(0,b.tZ)(I.l,{type:"inline",form:w,enableConfirmButton:!0,onClose:function(){return O(null)}}),(0,b.tZ)("div",{css:X,children:n.map((function(e){return(0,b.tZ)(U,{receipt:e,readOnly:o},e.receipt_id)}))}),Blsm.canAccessModule("Reports")&&(0,b.tZ)(f.A,{className:"link_to_report",theme:"highlight",href:{report:"ReportExternalCourseExpenses",params:{user:Blsm.user.id,group:g}},children:lng("expenses status report").caps()})]}),"requestDetails"===D&&(0,b.tZ)(B.rl,{approvalRequest:u,performAction:p})]}):(0,b.tZ)(j.a,{})]})})}))})),U=(0,i.observer)((function(e){var t=e.receipt,n=(0,o.iv)("border-radius:",l.g.consts.FIELD_BORDER_RADIUS,"px;background:",t.highlight?l.g.colors.highlight:l.g.colors.background_dark,";border-color:",t.highlight?l.g.colors.dominant_orange:l.g.colors.border_dark,";border-style:solid;border-width:1px;padding:0 10px 10px 10px;margin-top:20px;._note{margin-top:calc(-.5em - 10px);}.inner{display:flex;flex-direction:row;gap:20px;.left{display:flex;flex-direction:column;min-width:calc(100% - 100px);}.right{width:100%;}.title{font-weight:bold;}.files{display:block;text-align:",l.g.far,";}}",""),r=t.description,i=t.notes,a=t.amount,s=t.files,c=t.time,f=(0,d.O)(t.status||null);return(0,b.BX)("div",{css:n,children:[(0,b.tZ)(u.jC,{color:f.color,children:f.title.caps()}),(0,b.BX)("div",{className:"inner",children:[(0,b.BX)("div",{className:"left",children:[(0,b.BX)("span",{className:"title",children:[(0,b.tZ)("div",{children:(0,p.vC)(a)}),(0,b.tZ)("div",{children:r||" "})]}),(0,b.tZ)("div",{children:i||" "}),(0,b.tZ)("div",{children:(0,b.tZ)(P.qp,{time:c,showTime:!1,showDate:!0})})]}),(0,b.tZ)("div",{className:"right",children:(0,b.tZ)("div",{className:"files",children:null==s?void 0:s.map((function(e){return(0,b.tZ)(V,{file:e},e.file_id)}))})})]})]})})),V=(0,i.observer)((function(e){var t=e.file,n=t.file_id,r=t.file_name,i=(0,o.iv)("._icon{font-size:","18px",";}","");return(0,b.tZ)(c.JO,{newTab:!0,href:{file:"file_id=".concat(n)},"data-preview":(0,m.BX)(r),css:i,icon:"attachment",className:"_icon",toolTip:r,buttonLike:!0})})),H={name:"1gammwy",styles:"margin-top:5px"},G=(0,i.observer)((function(e){var t=e.amount,n=e.label,r=e.alwaysDisplay,o=e.toolTip;if(!r&&!+t)return null;var i=(0,b.BX)("div",{css:H,children:[n.caps(),": ",(0,p.vC)(t)]});return o?(0,b.tZ)(Z.u,{text:o,children:i}):i}))},9107:function(e,t,n){"use strict";n.d(t,{G:function(){return h},a:function(){return b}});var r=n(87363),o=n(70917),i=n(15560),a=n(48207),l=n(16920),s=n(71137),c=n(66975),u=n(29180),p=n(40441),d=n(68567),f=n(32808),m=n(35944),g=(0,o.iv)("._children{>*{margin-top:1em;}}.new_file{margin-top:0;height:61px;border-width:2px;border-radius:7px;",l.g.classes.flex_center,";",l.g.classes.drop_button,";>.Icon{font-size:1.3rem;}>input{display:none;}}",""),h=(0,i.observer)((function(e){var t=e.userStore,n=(0,r.useRef)(null),o=t.files;return(0,m.tZ)(s.d,{from:"side",size:"300px",ref:n,onClose:function(){return t.showFiles=!1},scroll:!0,children:(0,m.BX)(a.W2,{head:(0,m.tZ)(a.$0,{icon:"vendor_file",title:lng("files"),onClose:function(){return n.current.close()}}),stickyHead:!0,css:g,children:[(0,m.BX)("label",{className:"new_file",children:[(0,m.tZ)(c.JO,{icon:"mark_plus_light"})," ",lng("add file").caps(),(0,m.tZ)("input",{type:"file",onChange:function(e){return e.target.files.length&&t.uploadFiles(e.target.files)}})]}),o.map((function(e){return(0,m.tZ)(y,{file:e,userStore:t},e.file_id)}))]})})})),b=(0,o.iv)(l.g.classes.font_reset,";color:",l.g.colors.text_sec,";border:1px solid ",l.g.colors.border,";border-radius:7px;padding:5px;.meta{display:flex;margin-bottom:3px;.Icon{font-size:1.4rem;color:",l.g.colors.text_main,";}.time{font-size:.8em;}}.name{font-weight:600;word-break:break-word;}",""),y=(0,i.observer)((function(e){var t=e.file,n=e.userStore,r=t.org_file_name,o=t.file_id,i=t.file_name,a=t.creation_time,s=t.progress;return(0,m.BX)("div",{css:b,style:l.g.styles.progressBG(s),children:[(0,m.BX)("div",{className:"meta",children:[(0,m.tZ)(c.JO,{icon:(0,f.DW)(r,!0),toolTip:(0,f.BX)(r).toUpperCase()}),(0,m.tZ)("div",{css:l.g.classes.flex_grow}),void 0===s&&(0,m.BX)("div",{children:[(0,m.tZ)(u.qp,{time:a,showTime:!1,className:"time"})," ",(0,m.tZ)(c.JO,{icon:"trash",toolTip:lng("delete file"),onClick:function(){(0,d.BB)(lng("are you sure you want to delete this file?").caps(),{title:lng("delete file"),confirmText:lng("delete"),onConfirm:function(){return n.deleteFile(t)}})}})," ",(0,m.tZ)(c.JO,{icon:"edit",toolTip:lng("rename file"),onClick:function(){(0,d.cS)(lng("enter new file name").caps(),{title:lng("rename file"),confirmText:lng("rename"),startValue:i,onConfirm:function(e){return n.updateFileName(t,e)}})}})]})]}),(0,m.tZ)(p.A,{theme:"highlight",href:{file:"type=user_file&id=".concat(o)},toolTip:r,className:"name",children:i})]})}))},99844:function(e,t,n){"use strict";n.d(t,{O:function(){return S},V:function(){return _}});var r=n(40676),o=n(87363),i=n(16920),a=n(15560),l=(n(57882),n(66975)),s=n(48207),c=n(29180),u=n(71134),p=n(62366),d=n(80504),f=n(68567),m=n(98e3),g=n(28534),h=n(85597),b=n(35944);function y(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return v(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return v(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var _=(0,a.observer)((function(e){var t=e.userStore,n=t.external,r=t.requests,o=t.manageGroups,i=t.user_id,a=t.removeUserExternalCourse;return(0,b.BX)(b.HY,{children:[n.length>0&&(0,b.tZ)(w,{title:lng("external events"),collection:n,manageGroups:o,user_id:i,removeUserExternalCourse:a}),r.length>0&&(0,b.tZ)(k,{title:lng("user courses requests status"),collection:r})]})})),w=(0,a.observer)((function(e){var t=e.title,n=e.collection,o=e.manageGroups,i=e.user_id,a=e.removeUserExternalCourse,l=n.some((function(e){return e.time_commitment})),c=n.some((function(e){return e.weekly_hours})),p=[lng("name"),lng("start date"),lng("end date"),lng("academic hours"),lng("days off"),lng("paid leave days"),lng("tuition"),lng("total required funding"),lng("diploma"),l&&lng("time commitment"),c&&lng("weekly hours"),((0,u.Tz)(i)||o)&&lng("actions")];return(0,b.BX)(b.HY,{children:[t&&(0,b.tZ)(s.uD,{children:t.caps()}),(0,b.tZ)(r.iA,{cols:p,rowIdCol:"group_id",collection:n,RowRenderer:O,compact:!0,noWindow:!0,mobileSupport:!0,rowProps:{hasTimeCommitment:l,hasWeeklyHours:c,manageGroups:o,user_id:i,removeUserExternalCourse:a}})]})})),O=(0,a.observer)((function(e){var t=e.row,n=e.rowProps,i=n.hasTimeCommitment,a=n.hasWeeklyHours,s=n.manageGroups,f=n.user_id,m=n.removeUserExternalCourse,g=t.group_id,v=t.group_name,_=t.group_open_date,w=t.group_close_date,O=t.target_data,k=t.diploma_file,x=t.time_commitment,S=t.weekly_hours,j=t.request_id,C=O||{},P=y((0,o.useState)(null),2),Z=P[0],B=P[1],T=y((0,o.useState)(null),2),E=T[0],I=T[1],A=[{type:"main",_:v},_||C.group_open_date?{_:(0,b.tZ)(c.qp,{time:_||C.group_open_date})}:"",w||C.group_close_date?{_:(0,b.tZ)(c.qp,{time:w||C.group_close_date})}:"",(0,h._9)("hours",C),(0,h._9)("days_off",C),(0,h._9)("paid_leave",C),(0,h._9)("price",C),(0,h._9)("funding",C),{type:"icons",_:k&&(0,b.tZ)(l.JO,{icon:"diploma",toolTip:lng("download diploma"),href:{file:"file_id=".concat(k.file_id)}})},i&&{_:x&&(0,b.BX)(b.HY,{children:[x," ",((0,u.P$)(x)?lng("month"):lng("months")).caps()]})},a&&S,((0,u.Tz)(f)||s)&&{type:"icons",_:(0,b.BX)(b.HY,{children:[(0,b.tZ)(l.JO,{icon:"edit",toolTip:lng("details").caps(),onClick:function(){return B(!0)},smallButtonLike:!0}),s&&(0,b.tZ)(l.JO,{icon:"trash",toolTip:lng("remove external event").caps(),onClick:function(){return m(t)},smallButtonLike:!0}),Z&&(0,b.tZ)(p.G,{approvalRequest:t,request_id:j,group_id:g,user_id:f,ect_id:C.ect_id,readOnly:!0,onClose:function(){return B(!1)}}),E&&(0,b.tZ)(d.d,{external:t,receipts:t.receipts,readOnly:!(0,u.Tz)(f),onClose:function(){return I(!1)}}),t.ect_receipt_sequence&&(0,b.tZ)(l.JO,{icon:"receipt",toolTip:lng("expenses").caps(),onClick:function(){return I(!E)},smallButtonLike:!0})]})}];return(0,b.tZ)(r.lF,{tds:A})})),k=(0,a.observer)((function(e){var t=e.title,n=e.collection,o=[lng("name"),lng("request date"),lng("decision date"),lng("status"),lng("description")];return Blsm.user.isPowerManager&&o.push(lng("actions")),(0,b.BX)(b.HY,{children:[t&&(0,b.tZ)(s.uD,{children:t.caps()}),(0,b.tZ)(r.iA,{cols:o,rowIdCol:"request_id",collection:n,RowRenderer:x,compact:!0,noWindow:!0,mobileSupport:!0,whiteSpace:"normal"})]})})),x=(0,a.observer)((function(e){var t=e.row,n=t.status,o=t.approver_name,a=t.approval_step,s=t.sequence_length,u=t.group_name,p=t.target_data,d=t.request_date,h=t.decision_date,y=t.step_status,v=t.ect_name,_=t.request_id,w=S(n),O=n?"":o+" - "+lng("step %s of %s",a,s).caps(),k=[{type:"main",_:(0,b.BX)(b.HY,{children:[u||(null==p?void 0:p.ext_course_name),(null==p?void 0:p.ext_course_name)&&(0,b.BX)("i",{style:{color:i.g.colors.text_sec},children:[" (",lng("external event"),": ",v,")"]})]})},{_:(0,b.tZ)(c.qp,{time:d})},{_:(0,b.tZ)(c.qp,{time:h})},{_:(0,b.BX)(b.HY,{children:[(0,b.tZ)(l.JO,{icon:w.icon,color:w.color})," ",w.title," ",O&&(0,b.tZ)(l.An,{})," ",O," "]})},y];return Blsm.user.isPowerManager&&k.push({_:(0,b.tZ)(l.JO,{icon:"trash",onClick:function(){return(0,f.BB)((0,b.BX)(b.HY,{children:[lng("are you sure you want to delete this request?").caps(),(0,b.tZ)("br",{}),lng("this action cannot be undone").caps(),"."]}),{confirmText:lng("delete"),onConfirm:function(){return(0,m.SC)("approval/delete_approval_requests",{method:"DELETE",data:{id:_}},(function(){return(0,g.qV)(lng("operation completed successfully!")+" "+lng("refresh to update.").caps())}))}})}})}),(0,b.tZ)(r.lF,{tds:k})})),S=function(e){var t,n,r,o;switch(e){case"approved":t="like",n=lng("approved").caps(),r=lng("approve").caps(),o=i.g.colors.positive;break;case"rejected":t="dislike",n=lng("rejected").caps(),r=lng("reject").caps(),o=i.g.colors.negative;break;case"canceled":t="mark_x",n=lng("canceled by user").caps(),r=lng("cancel").caps(),o=i.g.colors.text_black;break;case"waiting_list":t="waiting_list",n=lng("waiting list").caps(),r=lng("add to waiting list").caps(),o=i.g.colors.chart.progress;break;case"back":t="mark_x",n=lng("canceled by user").caps(),r=lng("cancel").caps(),o=i.g.colors.text_black;break;case null:t="manager",n=lng("waiting for approval").caps(),o=i.g.colors.chart.progress}return{icon:t,title:n,color:o,action:r}}},34765:function(e,t,n){"use strict";n.d(t,{Q:function(){return j}});var r=n(70917),o=n(16920),i=n(15560),a=n(87363),l=n(95405),s=n(33550),c=n(71134),u=n(66975),p=n(75898),d=n(25680),f=n(65405),m=n(33051),g=n(95033),h=n(40441),b=n(42755),y=n(29180),v=n(21858),_=n(38152),w=n(35944);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){x(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function x(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var S=function(e){var t=e.type;return(0,r.iv)("border:1px solid ",o.g.colors.separator,";border-radius:6px;margin:10px 0;height:60px;background-color:",o.g.colors.bg_cont,";position:relative;overflow:hidden;display:flex;align-items:center;box-shadow:rgb(0 0 0 / 5%) 1.95px 1.95px 2.6px;.padding{padding:10px;display:flex;align-items:center;width:100%;}.main,.meta{display:flex;align-items:center;}&:not(:first-of-type){margin-top:10px;}.main{flex-grow:1;",o.g.classes.margin_far("10px"),";.item-kind{width:37px;font-size:22px;color:",o.g.colors.entity[t]||o.g.colors.text_main,";}.item-name{font-weight:600;font-size:1.1em;align-self:center;}}.meta{display:flex;width:53%;min-width:53%;gap:5px;.item-date{text-align:center;display:flex;justify-content:space-between;width:180px;}.item-type-title{flex-grow:1;white-space:nowrap;display:flex;justify-content:flex-end;gap:6px;padding:0 5px;}.item-status{min-width:80px;>div{display:inline-block;}}.actions{display:flex;align-items:center;gap:2px;justify-content:flex-end;.invisible{visibility:hidden;display:flex;align-items:center;}}}&:hover{border:1px solid ",o.g.colors.entity[t],";}&:hover,&.item-selected{.meta .actions .invisible{visibility:visible;}}&.narrow{margin:3px 0;height:70px;.padding{flex-direction:column;.main,.meta{display:flex;align-items:center;place-items:center;width:100%;max-width:none;flex-basis:auto;}.meta{justify-content:end;}.item-kind{width:28px;font-size:18px;text-align:center;}.item-name{font-size:1em;padding:0 3px;flex-basis:auto;",o.g.classes.ellipsis_lines(2),";}.actions{width:auto;}.item-type-title,.item-menu{display:none;}.meta>*{min-width:0;width:auto;font-size:.8em;}}}","")},j=function(e){return(0,w.tZ)(l.SV,{children:(0,w.tZ)(C,k({},e))})},C=(0,i.observer)((function(e){var t,n,r=e.item,i=e.onClick,l=e.narrow,h=e.actions,b=void 0===h?{action:!0,menu:!0,select:!0}:h,O=(0,a.useContext)(s.y),x=r.dateNote,j=r.cardNote,C=r.status,T=r.link,E=r.customIcons,I=r.title,A=r.displayWorkspace,D=r.workspace,R=r.type,N=r.category,z=r.category_id,M=r.notice,F=r.selected,q=(null==D?void 0:D.group_name)||r.attr("group_name"),X=(null===(t=r.workspace)||void 0===t||null===(n=t.mayChangeComponents)||void 0===n?void 0:n.call(t,r.type))&&!r._attr.condition_component,L=(0,c.g4)(r.menu,r),U=r.hide_type?null:r.type_title,V=r.onClick?function(){return r.onClick(r)}:i?function(){return i(r)}:null,H=l?{ceiling:15,floor:5}:{};return(0,w.tZ)("div",{css:S({type:R}),className:(0,c.AK)({"item-selected":r.selected,narrow:l}),onClick:V,children:(0,w.BX)("div",{className:"padding",children:[(0,w.BX)("div",{className:"main",children:[(0,w.tZ)("div",{className:"item-kind",children:(0,w.tZ)(u.JO,{icon:r.icon,toolTip:r.iconTooltip})}),I&&(0,w.BX)("div",{className:"item-name",children:[r._attr.condition_component&&(0,w.BX)(w.HY,{children:[(0,w.tZ)(u.JO,{icon:"tree",color:o.g.colors.dominant_main,toolTip:"".concat(lng("from"),": ").concat(r._attr.origin_group_name)})," "]}),(0,w.tZ)(v.u,k({text:I+(A&&q?" (".concat(q,")"):"")},H))]})]}),(0,w.BX)("div",{className:"meta",children:[(0,w.tZ)("div",{className:"item-date",children:null!=j&&j.text?(0,w.tZ)(p.jC,k(k({},j),{},{className:"mainNote"})):(0,w.tZ)(y.qm,{dateNote:x})}),(0,w.BX)("div",{className:"item-type-title",children:[U&&(0,w.tZ)("span",{css:r._attr.group_type?o.g.classes.ws_type_style:o.g.classes.content_type_style,children:U.caps()}),N&&(0,w.tZ)(_.W,{category:N,category_id:z})]}),(0,w.tZ)("div",{className:"item-status",children:(null==C?void 0:C.text)&&(0,w.tZ)(d.V,{tag:C.text,color:null==C?void 0:C.color,tooltip:null==C?void 0:C.tooltip})}),(0,w.BX)("div",{className:"actions",children:[X&&O&&(0,w.tZ)("span",k(k(k({className:"invisible mobile_off"},O.attributes),O.listeners),{},{children:(0,w.tZ)(u.JO,{icon:"move"})})),b.action&&(0,w.BX)("div",{className:"item-action",children:[T?(0,w.tZ)(P,{item:r,narrow:l}):M?(0,w.tZ)(Z,{message:M}):E?null:(0,w.tZ)(B,{}),E]}),b.menu&&L&&L.length>0&&(0,w.tZ)("div",{className:"item-menu",onClick:function(e){return e.stopPropagation()},children:(0,w.tZ)(m.x,{className:"item-menu",options:L,onSelect:function(e){return(0,g.Xq)(e,r)},children:(0,w.tZ)(u.JO,{icon:"menu_h",smallButtonLike:!0})})}),b.select&&X&&(0,w.tZ)("div",{className:"invisible mobile_off",children:(0,w.tZ)(f.X,{className:F?"item-cb-selected":"item-cb",value:F,onChange:function(e){return r.select(e)}})})]})]})]})})})),P=function(e){var t,n=e.item;if(!1===(null===(t=n.canPlay)||void 0===t?void 0:t.call(n)))return(0,w.tZ)(B,{});var r="workspace"===n.type?"enter":"play",i="workspace"===n.type?n.color:o.g.colors.positive;return(0,w.tZ)(h.A,{href:n.link,processHrefClick:!0,stopPropagation:!0,newTab:n.newTab,children:(0,w.tZ)(b.ZT,{icon:r,toolTip:n.linkToolTip,color:i,bgColor:i+"1A",size:24})})},Z=function(e){var t=e.message;return(0,w.tZ)(b.ZT,{icon:"lock",toolTip:t,color:o.g.colors.negative,bgColor:o.g.colors.negative+"1A",size:24})},B=function(){return(0,w.tZ)("div",{style:{height:"24px",width:"24px"}})}},28432:function(e,t,n){"use strict";n.d(t,{Yy:function(){return K},bP:function(){return V},bp:function(){return j},iR:function(){return R},ns:function(){return $},p8:function(){return I}});var r=n(70917),o=n(16920),i=n(87363),a=n(48207),l=n(73105),s=n(64902),c=n(71134),u=n(7392),p=n(40965),d=n(40443),f=n(85311),m=n(66975),g=n(52205),h=(n(60421),n(70081)),b=n(35944),y=["ws"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){w(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function w(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)n=i[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function k(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==n)return;var r,o,i=[],a=!0,l=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){l=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(l)throw o}}return i}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return x(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return x(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function x(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=(0,r.iv)("width:345px;",o.g.classes.margin_far("1em"),";color:",o.g.colors.text_main,";.container-children{display:flex;flex-direction:column;justify-content:space-between;height:100%;}._status{color:",o.g.colors.negative,";text-align:center;margin-top:10px;}._details{display:flex;flex-direction:column;justify-content:space-between;}._users{margin-top:5px;}._manager{margin-top:10px;border-top:1px solid ",o.g.colors.separator,";padding-top:8px;}",""),j=function(e){var t=e.ws;return(0,b.BX)(a.W2,{css:S,children:[(0,b.tZ)(I,{ws:t}),(0,b.tZ)("div",{className:"_status",children:t.warnings.map((function(e){return(0,b.tZ)("div",{children:e.caps()},e)}))}),(0,b.BX)("div",{className:"_details",children:[(0,b.tZ)(z,{ws:t}),(0,b.BX)("div",{children:[(0,b.tZ)(G,{ws:t}),(0,b.tZ)(W,{ws:t})]})]})]})},C={name:"1nlm8k2",styles:"width:240px;height:240px;margin:0 auto 25px;background-color:#e4e4e4;background-size:cover;background-position:center;border-radius:10px"},P=function(e){var t=e.patient,n=e.onClose,r=[[lng("name").caps(),t.patient_first_name+" "+t.patient_last_name],[lng("phone").caps(),(0,b.tZ)(T,{phone:t.patient_phone},"phone")],[lng("email").caps(),(0,b.tZ)(E,{email:t.patient_email},"email")],[lng("identity number").caps(),t.patient_identity_number],[lng("birthdate").caps(),t.patient_birthdate]];return(0,b.BX)(a.T,{title:lng("patient info").caps(),onClose:n,children:[(0,b.tZ)("div",{css:C,style:{backgroundImage:'url("'.concat(t.patient_photo,'")')}}),(0,b.tZ)(B,{data:r})]})},Z=(0,r.iv)("margin:0 150px;>div{display:flex;justify-content:space-between;margin-bottom:10px;div:last-of-type{font-weight:600;}}",o.g.mQuery.max(640),"{margin:0 10px;}",""),B=function(e){var t=e.data;return(0,b.tZ)("div",{css:Z,children:t.map((function(e,t){return(0,b.BX)("div",{children:[(0,b.tZ)("div",{children:e[0]}),(0,b.tZ)("div",{children:e[1]})]},t)}))})},T=function(e){var t=e.phone;return(0,b.tZ)("a",{href:"tel:".concat(t),children:t})},E=function(e){var t=e.email;return(0,b.tZ)("a",{href:"mailto:".concat(t),children:t})},I=function(e){var t=e.ws,n=t.status?"draft"===t.status?lng("draft"):lng("approval waiting"):void 0;return(0,b.tZ)(g.d,{title:t.group_name,poster:t.group_image,status:n})},A=(0,r.iv)("width:100%;",o.g.classes.margin_far("1em"),";color:",o.g.colors.text_main,";._poster{height:164px;width:164px;background-color:",o.g.colors.bg_1,";background-size:cover;background-position:center;margin:-102px auto 0;border-radius:20px;box-shadow:0 2px 6px rgba(0, 0, 0, 0.5);}._status{color:",o.g.colors.negative,";text-align:center;margin-top:10px;}.widget-header{width:calc(100% - 200px);}._top{justify-content:space-between;align-items:flex-start;margin-bottom:10px;}._users{",o.g.classes.margin_far("30px"),";}._desc{min-width:300px;max-width:300px;",o.g.classes.margin_far("30px"),";}",""),D=(0,r.iv)("width:100%;color:",o.g.colors.text_main,";._all{flex-direction:column;gap:15px 0;.widget-header{margin-bottom:0;}}",""),R=function(e){var t=e.ws,n=(0,b.tZ)(f.c_,{children:t.patient&&(0,b.tZ)(L,{patient:t.patient})});return(0,h.iP)(),(0,c.tq)()?(0,b.tZ)(a.W2,{css:D,children:(0,b.BX)(f.c_,{className:"_all",children:[(0,b.tZ)(I,{ws:t}),(0,b.BX)(d.B,{icons:t.headerActions(),content:n,children:[(0,b.tZ)(K,{ws:t}),(0,b.tZ)($,{ws:t})]}),t.group_description&&(0,b.tZ)(F,{desc:t.group_description}),(0,b.BX)("div",{style:{textAlign:"center"},children:[t.classification_name&&(0,b.tZ)(X,{name:t.classification_name}),(0,b.tZ)(V,{ws:t})]}),(0,b.tZ)(G,{ws:t}),(0,b.tZ)(W,{ws:t})]})}):(0,b.BX)(a.W2,{css:A,children:[(0,b.BX)(f.c_,{className:"_top",children:[(0,b.tZ)(I,{ws:t}),(0,b.BX)(d.B,{icons:t.headerActions(),content:n,children:[(0,b.tZ)(K,{ws:t}),(0,b.tZ)($,{ws:t})]})]}),(0,b.BX)(f.c_,{children:[(0,b.tZ)(F,{desc:t.group_description}),(0,b.BX)("div",{style:{textAlign:"center"},children:[t.classification_name&&(0,b.tZ)(X,{name:t.classification_name}),(0,b.tZ)(V,{ws:t})]}),(0,b.tZ)(f.zh,{}),(0,b.tZ)(G,{ws:t}),(0,b.tZ)(W,{ws:t})]})]})},N={name:"10etijs",styles:"._syllabus{margin-top:6px;}._classification{margin-top:6px;}._patient{margin-top:5px;}"},z=function(e){var t=e.ws,n=t.patient,r=t.group_description,o=t.classification_name;return(0,b.BX)("div",{css:N,className:"_metadata",children:[(0,b.tZ)(F,{desc:r}),n&&(0,b.tZ)(L,{patient:n}),(0,b.tZ)(f.zh,{}),(0,b.BX)("div",{style:{textAlign:"center"},children:[(0,b.tZ)(V,{ws:t}),o&&(0,b.tZ)(X,{name:o})]})]})},M={name:"1azakc",styles:"text-align:center"},F=function(e){var t=e.desc;return(0,b.tZ)("div",{css:M,children:(0,b.tZ)(l.u,{html:null==t?void 0:t.nl2br(),children:(0,b.tZ)(p.x,{className:"_desc",content:t,css:o.g.classes.descriptionShowMore})})})},q={name:"yvzwtf",styles:"&._classification{font-size:1.1em;font-weight:600;}"},X=function(e){var t=e.name;return(0,b.BX)("div",{css:q,className:"_classification",children:[(0,b.tZ)(m.An,{})," ",(0,b.tZ)(l.u,{text:lng("classification"),children:t})," ",(0,b.tZ)(m.An,{})]})},L=function(e){var t=e.patient,n=k((0,i.useState)(!1),2),r=n[0],a=n[1];return(0,b.BX)("div",{className:"_patient",style:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[r&&(0,b.tZ)(P,{patient:t,onClose:function(){return a(!1)}}),(0,b.tZ)("div",{css:o.g.classes.flex_grow,children:lng("patient").caps()}),(0,b.tZ)("div",{css:o.g.classes.margin_far("5px"),children:(0,b.BX)(u.l,{theme:"outlined",onClick:function(){return a(!0)},children:[t.patient_first_name," ",t.patient_last_name]})})]})},U={name:"1rrjp2w",styles:"._syllabus{}"},V=function(e){var t=e.ws,n=O(e,y),r=k((0,i.useState)(!1),2),o=r[0],l=r[1],s=t.syllabus_text,p=t.syllabus_url,d=t.syllabus_file,f=t.group_id||t.id;return s||p||d?(0,b.BX)("div",_(_({css:U},n),{},{children:[o&&(0,b.tZ)(a.T,{title:lng("syllabus").caps(),onClose:function(){return l(!1)},children:(0,c.rj)(s)}),d&&(0,b.tZ)(u.l,{theme:"outlined",className:"_syllabus",href:{file:"type=syllabus&group_id="+f},newTab:!0,children:lng("syllabus").caps()}),s&&(0,b.tZ)(u.l,{theme:"outlined",className:"_syllabus",onClick:function(){return l(!0)},children:lng("syllabus").caps()}),p&&(0,b.tZ)(u.l,{theme:"highlight",className:"_syllabus",href:p,newTab:!0,children:lng("syllabus").caps()})]})):null},H=(0,r.iv)("&._users{display:flex;align-items:center;justify-content:space-between;min-width:150px;>div{margin:0 5px;}>div:first-of-type{text-align:center;>div{color:",o.g.colors.text_sec,";}}}",""),G=function(e){var t=e.ws;if(!(t.group_options.show_members&&t.features.users||t.mayEditMembers()))return null;var n="Course_template"===t.group_type;if(n&&(0,c.xb)(t.waitingList))return null;var r=n?lng("waiting list"):lng("members");return(0,b.BX)("div",{className:"_users",css:H,children:[(0,b.BX)("div",{children:[(0,b.tZ)("div",{children:r.caps()}),(0,b.tZ)("b",{children:n?t.waitingList.length:t.users_count})]}),(0,b.tZ)("div",{css:o.g.classes.flex_grow}),(0,b.tZ)(u.l,{theme:"contained",onClick:function(){return t.tab=n?"waiting_list":"members"},children:lng("see all").caps()})]})},J={name:"15rzxwi",styles:"&._manager{display:flex;align-items:center;._label{padding:0 10px;}}"},W=function(e){var t=e.ws,n=t.manager,r=t.group_options,o=t.is_owner,i=t.features,a=r.managers_primary;return[a,r.managers_managers,r.managers_viewers,r.managers_inherited].some((function(e){return e}))||o?(o||(0,c.B5)(null==n?void 0:n.user_id))&&(0,b.BX)("div",{className:"_manager",css:J,children:[(0,c.B5)(null==n?void 0:n.user_id)&&(a||o)&&(0,b.BX)(f.c_,{children:[(0,b.tZ)(s.qE,{user:n,size:"42px"}),(0,b.BX)("div",{className:"_label",children:[(0,b.tZ)("b",{children:n.full_name}),(0,b.tZ)("br",{}),lng("manager").caps()]})]}),(0,b.tZ)(f.zh,{}),(i.users||o)&&(0,b.tZ)("div",{children:(0,b.tZ)(u.l,{theme:"contained",onClick:function(){return t.tab="managers"},children:lng("see managers").caps()})})]}):null},K=function(e){var t=e.ws;return t.creditRequired?(0,b.BX)("div",{children:[(0,b.BX)("div",{children:[lng("credits required").caps(),": ",t.creditRequired]}),(0,b.BX)("div",{children:[lng("credits earned").caps(),": ",t.userCredit]})]}):null},$=function(e){var t=e.ws;return t.creditOnCompletion>0?(0,b.BX)("div",{children:[lng("credit units given on completion").caps(),": ",t.creditOnCompletion]}):null}},343:function(e,t,n){"use strict";n.d(t,{g:function(){return k}});var r,o,i,a,l,s,c,u,p,d,f,m,g,h,b=emotion;function y(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var v=$("HTML").hasClass("RTL"),_=v?"rtl":"ltr",w=v?"right":"left",O=v?"left":"right",k={colors:{bg:"#f5f4f5",blue:"#0d2532",orange:"#e87e0d",fg_dark_grey:"#5D676D",admin_panel:"#0D364C",separator:"#f2f2f2",input_bg:"#f2f2f2",row_dark:"#dbdbdd",fg_grey:"#727A7F",blossom:"#20ae61",strong:"#ff9800",fg_light_grey:"#b1b9b9",grey_1:"#6a6a6a",warning:"#e87e0d",report_blue:"#2196F3",report_green:"#43CC48",report_red:"#F44336",report_yellow:"#FFB300",report_gray:"#E5E5E5",grey_input_border:"#c5c5c5",positive:"#1FAE60",negative:"#D03434",success:"#1FAE60",failure:"#E70722",no_progress:"#F7B549",in_process:"#2196F3",title:"#646D7A",neutral:"#D2D4D8",title_dark:"#435964",black:"#000000",white:"#ffffff",none:"transparent"},classes:{direction:(0,b.css)(r||(r=y(["direction: ",";"])),_),float:(0,b.css)(o||(o=y(["float: ",";"])),w),opposite_float:(0,b.css)(i||(i=y(["float: ",";"])),O),text_align:(0,b.css)(a||(a=y(["text-align: ",";"])),w),opposite_text_align:(0,b.css)(l||(l=y(["text-align: ",";"])),O),circled_text:(0,b.css)(s||(s=y(["\n\t\tdisplay:inline-block;\n\t\tmin-width: 1em;\n\t\tmin-height: 1em;\n\t\tline-height: 1em;\n\t\tpadding:0.2em 0.4em;\n\t\ttext-align: center;\n\t\tborder-radius: 50%;"]))),bg_overlay:(0,b.css)(c||(c=y(['//background overlay\n\t\tcontent: "";\n\t\tposition: absolute;\n\t\ttop: 0;\n\t\tleft: 0;\n\t\twidth: 100%;\n\t\theight: 100%;\n\t\topacity: 0.4;']))),card_shadow:(0,b.css)(u||(u=y(["\n\t\tbox-shadow: 0 0 1px 0 rgba(0, 0, 0, 0.3), 2px 2px 4px 1px rgba(0, 0, 0, 0.2);\n\t\tborder-radius: 3px;"]))),near:function(e){return(0,b.css)(p||(p=y(["",": ",";"])),w,e)},far:function(e){return(0,b.css)(d||(d=y(["",": ",";"])),O,e)},margin_near:function(e){return(0,b.css)(f||(f=y(["margin-",": ",";"])),w,e)},margin_far:function(e){return(0,b.css)(m||(m=y(["margin-",": ",";"])),O,e)},padding_near:function(e){return(0,b.css)(g||(g=y(["padding-",": ",";"])),w,e)},padding_far:function(e){return(0,b.css)(h||(h=y(["padding-",": ",";"])),O,e)}},mobile_resolution:1024,near:w,far:O,direction:_,isRTL:v,card_title_height:54}},72466:function(){window.Blsm=window.Blsm||{},window.lng=function(e,t){var n=[].slice.call(arguments);$.isPlainObject(t)&&n.splice(1,1);var r=!1;if(t&&t.phrase){if(r=Blsm.InitialData&&Blsm.InitialData.phrases&&Blsm.InitialData.phrases[e])return t.replace&&(r=r.replaceAll("%s",t.replace)),_.escape(r);if(t.replace)return window.lng(e,t.replace)}n[0]=Blsm.translations&&Blsm.translations[e]||e,n[0].indexOf("|")>0&&(n[0]=n[0].split("|")[0]);try{return n.length>1?sprintf.apply(null,n):n[0]}catch(e){return console&&console.error&&console.error(e),n[0]}}},87363:function(e){"use strict";e.exports=React},61533:function(e){"use strict";e.exports=ReactDOM},27821:function(e){"use strict";e.exports=mobx},15560:function(e){"use strict";e.exports=mobxReactLite},48488:function(e){"use strict";if("undefined"==typeof moment){var t=new Error("Cannot find module 'moment'");throw t.code="MODULE_NOT_FOUND",t}e.exports=moment},22334:function(e,t,n){"use strict";function r(e,t,n){return(r=o()?Reflect.construct:function(e,t,n){var r=[null];r.push.apply(r,t);var o=new(Function.bind.apply(e,r));return n&&i(o,n.prototype),o}).apply(null,arguments)}function o(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}function i(e,t){return(i=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}n.d(t,{CR:function(){return y},ER:function(){return g},FT:function(){return v},GG:function(){return p},KC:function(){return _},Mx:function(){return c},WQ:function(){return O},_3:function(){return d},_9:function(){return u},f1:function(){return w},k6:function(){return f},xt:function(){return h},zk:function(){return b}});var c=6e4,u=36e5,p=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e&&f(d(e,t),t)},d=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e instanceof moment?e:e?("string"==typeof e&&/^\d+$/.test(e)&&(e=+e),"object"!==s(e)||e instanceof moment||e instanceof Date||(e=(e.date||"")+" "+(e.hour||"")),"string"!=typeof e||/^\d{4}-\d\d-\d\d/.test(e)||(t=moment(e,Blsm.prm.datetime_moment_format)),"number"==typeof e&&e<9e9&&(e*=1e3),t||(t=n.utc?moment.utc(e):moment(e)),void 0!==t._tzm&&t.utcOffset(t._tzm),t):void 0},f=function(e,t){var n=O().startOf("day");if(e){var r=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({date:!0,time:!0,year:!0,leading_zero:!1,named_month:!1,format:!1,html5format:!1,relative:!1,obj:!1},t),o={};if(void 0!==e._tzm&&e.utcOffset(e._tzm),r.relative&&e.isAfter(n))return m(e);if(r.html5format)return e.format(Blsm.prm[(r.date?"date":"")+(r.time?"time":"")+"_input_format"]);if(r.format)return e.format(r.format);var i=e.format(r.year?Blsm.prm.date_moment_format:Blsm.prm.short_date_moment_format),s=e.format(Blsm.prm.time_moment_format);return r.hideMidnight&&/^0+\D0+$/.test(s)&&(s=""),r.obj?(r.date&&(o.date=i),r.time&&(o.hour=s),o):(o="",(!0===r.date||"not_today"===r.date&&e.isBefore(n))&&(o=i),!r.time&&o||(o+=(o?" ":"")+s),o)}},m=function(e){var t=parseInt(Date.now()/1e3),n=t-e.unix();return n<60?lng("few seconds ago"):(n=Math.round(n/60))<2?lng("one minute ago"):n<60?lng("%s minutes ago",n):e.format("M-D-Y")!==d(t).format("M-D-Y")?f(e,{time:!1}):f(e,{date:!1})},g=function(e,t,n){var r,o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"+",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{repeat:!1,stopDate:null,stopAfter:!1},l=a.stopDate||O();"+"===i?(r=a.stopAfter?"isAfter":"isBefore",o="add",l.add(5,"minute")):(r=a.stopAfter?"isBefore":"isAfter",r="isAfter",o="subtract",l.subtract(5,"minute"));var s=n.clone();if(s[o](t,e),!s[r](l))return!1;if(a.repeat&&t>0)for(var c;;)if(c=s.clone(),s[o](t,e),!s[r](l))return c.format(Blsm.prm.date_moment_format);return s.format(Blsm.prm.date_moment_format)},h=function(e){return moment.utc(1e3*e).format("HH:mm:ss")},b=function(e){return e.isSame(new Date,"day")},y=function(e){return e.isBefore(new Date)},v=function(e,t){return e.isSame(t,"year")},_=function(e,t){return e.isSame(t,"day")},w=function(e,t){return t.diff(e)<864e5&&!_(e,t)},O=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var o=r(moment,t);return o.utcOffset(Blsm.prm.timezone_offset),o}},51125:function(e,t,n){"use strict";n.d(t,{vy:function(){return r},wj:function(){return o}});var r={ActionsSubmit:"far fa-caret-square-down",AssignActivity:"far fa-clipboard-check",AssignOutsource:"fas fa-share-square",AssignReview:"fas fa-users",accessibility:"fal fa-glasses",align_center:"far fa-align-center",align_left:"far fa-align-left",align_right:"far fa-align-right",arrow_down:"fas fa-chevron-down",arrow_down_double:"fas fa-chevrons-down",arrow_go_left:"far fa-arrow-left",arrow_go_right:"far fa-arrow-right",arrow_left:"fas fa-chevron-left",arrow_left_double:"fas fa-chevrons-left",arrow_out_square:"far fa-arrow-up-right-from-square",arrow_right:"fas fa-chevron-right",arrow_right_double:"fas fa-chevrons-right",arrow_to_left:"far fa-arrow-to-left",arrow_to_right:"far fa-arrow-to-right",arrow_up:"fas fa-chevron-up",arrow_up_double:"fas fa-chevrons-up",asterisk:"fas fa-asterisk",attachment:"far fa-paperclip",auto_enrolled:"fas fa-sync-alt",back:"fas fa-reply","badge-airplane":"fas fa-plane","badge-ambulance":"fas fa-ambulance","badge-badge":"fas fa-award","badge-bananas":"fas fa-sausage","badge-beer":"fas fa-beer","badge-bicycle":"fas fa-biking","badge-branch":"fas fa-leaf-maple","badge-bulb":"fas fa-lightbulb","badge-bus":"fas fa-bus","badge-cake":"fas fa-birthday-cake","badge-car":"fas fa-car","badge-cherries":"fas fa-apple-alt","badge-chilis":"fas fa-pepper-hot","badge-clapper":"fas fa-ticket","badge-fire":"fas fa-fire","badge-flag":"fas fa-flag","badge-flower":"fas fa-flower-tulip","badge-globe":"fas fa-globe-stand","badge-good-mood":"fas fa-smile-beam","badge-graduation":"fas fa-diploma","badge-ice-crystal":"fas fa-snowflake","badge-juice":"fas fa-glass-citrus","badge-leaf":"fas fa-leaf","badge-lifting":"fas fa-whistle","badge-lightning":"fas fa-bolt","badge-line-chart":"fas fa-chart-bar","badge-love":"fas fa-heart","badge-medal":"fas fa-medal","badge-mobile-phone":"fas fa-mobile-android-alt","badge-money-bag":"fas fa-sack-dollar","badge-moon":"fas fa-moon","badge-old-phone":"fas fa-phone-rotary","badge-open-book":"fas fa-book-open","badge-rain":"fas fa-cloud-showers-heavy","badge-rising-graph":"fas fa-chart-line","badge-running":"fas fa-running","badge-shield":"fas fa-shield-alt","badge-ski":"fas fa-skiing","badge-strech":"fas fa-boxing-glove","badge-sun":"fas fa-sun","badge-swimming":"fas fa-swimmer","badge-target":"fas fa-bullseye-arrow","badge-taxi":"fas fa-taxi","badge-tea-cup":"fas fa-mug-tea","badge-traffic-light":"fas fa-traffic-light","badge-train":"fas fa-train","badge-tree":"fas fa-tree-alt","badge-trophy":"fas fa-trophy","badge-video-camera":"fas fa-camera-movie","badge-wine-glasses":"fas fa-champagne-glasses","badge-wrench-screw":"fas fa-tools",bold:"far fa-bold",bookmark:"far fa-star",bookmark_filled:"fas fa-star",bug:"fas fa-bug",burger:"fas fa-bars",broken_graph:"far fa-chart-pie",by_mail:"far fa-envelope",calendar:"fas fa-calendar-alt",call:"fas fa-phone-alt",camera:"fas fa-camera",caret_down:"fas fa-caret-down",caret_up:"fas fa-caret-up",chalkboard:"fas fa-chalkboard",challenge:"fas fa-bullseye-arrow",channel:"fas fa-signal-stream",chat:"fas fa-comment-dots",chat_info:"far fa-comment-exclamation",checkbox:"far fa-square",checkbox_checked:"fas fa-check-square",cheers:"fas fa-champagne-glasses",clear:"far fa-minus-hexagon",clock:"far fa-clock",clone:"far fa-clone",close:"fas fa-times",coach:"fas fa-chalkboard-teacher",collapse_all:"far fa-compress-alt",content:"fas fa-book-open",copy:"far fa-copy",course:"fas fa-graduation-cap",create:"fas fa-pen-square",cupcake:"far fa-birthday-cake",desktop:"fas fa-briefcase",details:"far fa-list-alt",digging:"fas fa-person-digging",diploma:"far fa-diploma",discussion:"far fa-comments-alt",dislike:"fas fa-thumbs-down",download:"fas fa-download",edit:"fas fa-pencil-alt",empty:"",empty_cart:"fas fa-dolly-empty",enter:"fas fa-sign-in-alt",entity_assignment:"fas fa-clipboard-check",entity_course:"fas fa-graduation-cap",entity_event:"fas fa-calendar-star",entity_external:"fas fa-suitcase-rolling",entity_group:"fas fa-people-group",entity_meeting:"fas fa-calendar-alt",entity_org_unit:"fas fa-sitemap",entity_qualification:"fas fa-stamp",entity_share:"fas fa-book-open",entity_workplan:"fas fa-briefcase",equals:"far fa-equals",event:"fas fa-calendar-star",exit:"fas fa-sign-out-alt",exit_full_screen:"fas fa-compress",expand_all:"far fa-expand-alt",export:"fas fa-file-export",external_content:"fas fa-puzzle",feedback:"fas fa-comment-alt-edit",filter:"far fa-filter",fire:"fas fa-fire",font:"far fa-font",for_u:"fas fa-hand-holding-seedling",forward:"fas fa-share",full_screen:"fas fa-expand",fullscreen:"fas fa-expand",game:"fas fa-gamepad-alt","globe-americas":"fas fa-globe-americas",go_arrow:"fas fa-arrow-right",go_backward:"fas fa-backward",go_forward:"fas fa-forward",google:"fab fa-google",group:"fas fa-user-friends",hierarchy:"fas fa-folder-tree",history:"fas fa-history",home:"fas fa-home",image:"far fa-image",import:"fas fa-file-plus",italic:"far fa-italic",kiosk:"fas fa-tablet-alt",light_bulb:"fal fa-lightbulb-on",like:"fas fa-thumbs-up",link:"far fa-link",list:"far fa-list",list_music:"fas fa-list-music",list_ol:"fas fa-list-ol",lock:"fas fa-lock-alt",lock_open:"fas fa-lock-open-alt",love:"far fa-heart",love_full:"fas fa-heart",mailbox:"fas fa-inbox",manager:"fas fa-user-tie",map_spot:"fas fa-map-marked-alt",mark_plus:"far fa-plus",mark_plus_light:"far fa-plus",mark_v:"fas fa-check",mark_v_light:"fas fa-check",mark_v_strong:"fas fa-check",mark_x:"fas fa-times",mark_x_light:"fas fa-times",media:"far fa-photo-video",meeting:"fas fa-users-class",menu:"far fa-ellipsis-v",menu_calendar:"fas fa-calendar-alt",menu_dashboard:"fas fa-tachometer-alt",menu_h:"far fa-ellipsis-h",menu_info:"fas fa-info-circle",menu_library:"fas fa-book-open",menu_management:"fas fa-cog",menu_messages:"fas fa-inbox",menu_overview:"fas fa-clipboard-check",menu_workspaces:"fas fa-briefcase",message:"fas fa-envelope",mfa:"far fa-shield",mfa_on:"far fa-shield-check",minimize:"far fa-window-minimize",mng_approvals:"fas fa-file-certificate",mng_budget:"fas fa-wallet",mng_courses:"fas fa-graduation-cap",mng_domain:"fas fa-server",mng_elearning:"fas fa-clipboard-check",mng_qualifications:"fas fa-stamp",mng_resources:"fas fa-box-open",mng_settings:"fas fa-cog",mng_site:"fas fa-at",mng_users:"fas fa-users",mobile:"fas fa-mobile-alt",move:"fas fa-arrows-alt",new:"far fa-plus-square",no_entry:"fas fa-ban",notice:"fas fa-megaphone",notifications:"far fa-bell",notifications_off:"far fa-bell-slash",online_content:"fas fa-globe-americas",open:"fas fa-folder-open",order:"far fa-list-ol",pause:"fas fa-pause",phone:"fas fa-mobile-alt",photos:"far fa-images",pin:"far fa-thumbtack",pin_filled:"fas fa-thumbtack",placeholder:"far fa-brackets-curly",play:"fas fa-play",pointer:"fas fa-map-marker",pointer_alt:"fas fa-map-marker-alt",poll:"fas fa-poll",popout:"fas fa-external-link",portal:"fas fa-archway",pretend:"fas fa-mask",preview:"fas fa-eye",print:"fas fa-print",qrcode:"fas fa-qrcode",radio:"far fa-circle",radio_checked:"fas fa-check-circle",radio_full:"fas fa-circle",receipt:"fas fa-file-invoice-dollar",recycle:"fas fa-recycle",reload:"fas fa-redo",reply:"fas fa-reply",reply_all:"fas fa-reply-all",report:"fas fa-chart-column",required:"fas fa-star",rescue:"far fa-comment-alt-medical",reset:"fas fa-undo",sand_clock:"fas fa-hourglass-end",save:"far fa-save",search:"fas fa-search",send:"fas fa-paper-plane",send_comment:"fas fa-paper-plane-top",send_schedule:"fal fa-envelope-open-text",settings:"fas fa-cog",share:"fas fa-share-alt",shuffle:"fas fa-random",sign_minus:"fas fa-minus-circle",sign_notification:"fas fa-exclamation-circle",sign_ok:"far fa-check-circle",sign_plus:"fas fa-plus-circle",signature:"fas fa-file-signature",skill:"fas fa-brain",skill_l0:"fas fa-paper-plane",skill_l1:"fas fa-helicopter",skill_l2:"fas fa-fighter-jet",skill_l3:"fas fa-space-shuttle",skill_unranked:"fas fa-circle-question",slack:"fab fa-slack",sort:"fas fa-sort",sort_down:"fad fa-sort-down",sort_up:"fad fa-sort-up",split:"fas fa-users-class",strikethrough:"far fa-strikethrough",suitcase:"fas fa-suitcase",support:"fas fa-headset",support_login:"fas fa-headset",switch_users:"fas fa-people-arrows",sync:"fas fa-sync-alt",telescope:"fas fa-telescope",trash:"far fa-trash-alt",trash_all:"fas fa-broom",tree:"fas fa-project-diagram",triangle_down:"fas fa-caret-down",underline:"far fa-underline",upload:"fas fa-cloud-upload-alt",user:"fas fa-user",user_advanced_filter:"fas fa-users-cog",user_pin:"fas fa-id-badge",user_plus:"fas fa-user-plus",user_sync:"fas fa-users-cog",users:"fas fa-users",vendor_activity:"far fa-flag-checkered",vendor_assignment:"far fa-clipboard-check",vendor_audio:"far fa-file-audio",vendor_blog:"far fa-blog",vendor_checklist:"far fa-clipboard-list-check",vendor_courseware:"far fa-file",vendor_dictionary:"far fa-spell-check",vendor_doc:"far fa-file-word",vendor_evaluation:"far fa-file-user",vendor_excel:"far fa-file-times",vendor_external:"far fa-link",vendor_faq:"far fa-question-square",vendor_file:"far fa-file",vendor_final:"far fa-badge-check",vendor_form:"far fa-file-contract",vendor_general:"far fa-file",vendor_glossary:"far fa-spell-check",vendor_html:"far fa-file-code",vendor_image:"far fa-file-image",vendor_lesson:"far fa-file",vendor_master:"far fa-archive",vendor_meeting:"far fa-stopwatch",vendor_pdf:"far fa-file-pdf",vendor_ppt:"far fa-file-powerpoint",vendor_scorm:"far fa-shapes",vendor_survey:"far fa-ballot",vendor_swf:"far fa-shapes",vendor_test:"far fa-ballot-check",vendor_text:"far fa-text-size",vendor_tincan:"far fa-shapes",vendor_video:"far fa-file-video",vendor_wiki:"fab fa-wikipedia-w",view_list:"fas fa-bars",view_tiles:"fas fa-grid-2",visible_off:"fas fa-eye-low-vision",volume:"fas fa-volume",volume_mute:"fas fa-volume-mute",waiting_list:"fas fa-user-clock",warning_triangle:"fas fa-triangle-exclamation",width:"fas fa-arrows-h",wizard:"fas fa-magic",zoom_meeting:"fad fa-camera-home"},o=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return"arrow_far"===e?e="arrow_".concat(t?"left":"right"):"arrow_near"===e&&(e="arrow_".concat(t?"right":"left")),"arrow_to_far"===e?e="arrow_to_".concat(t?"left":"right"):"arrow_to_near"===e&&(e="arrow_to_".concat(t?"right":"left")),"arrow_go_far"===e?e="arrow_go_".concat(t?"left":"right"):"arrow_go_near"===e&&(e="arrow_go_".concat(t?"right":"left")),e in r?r[e]:(console.log("unknown '".concat(e,"' icon")),"fas fa-bug")}}},i={};function a(e){var t=i[e];if(void 0!==t)return t.exports;var n=i[e]={id:e,loaded:!1,exports:{}};return o[e].call(n.exports,n,n.exports,a),n.loaded=!0,n.exports}a.m=o,e=[],a.O=function(t,n,r,o){if(!n){var i=1/0;for(u=0;u<e.length;u++){n=e[u][0],r=e[u][1],o=e[u][2];for(var l=!0,s=0;s<n.length;s++)(!1&o||i>=o)&&Object.keys(a.O).every((function(e){return a.O[e](n[s])}))?n.splice(s--,1):(l=!1,o<i&&(i=o));if(l){e.splice(u--,1);var c=r();void 0!==c&&(t=c)}}return t}o=o||0;for(var u=e.length;u>0&&e[u-1][2]>o;u--)e[u]=e[u-1];e[u]=[n,r,o]},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,{a:t}),t},n=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},a.t=function(e,r){if(1&r&&(e=this(e)),8&r)return e;if("object"==typeof e&&e){if(4&r&&e.__esModule)return e;if(16&r&&"function"==typeof e.then)return e}var o=Object.create(null);a.r(o);var i={};t=t||[null,n({}),n([]),n(n)];for(var l=2&r&&e;"object"==typeof l&&!~t.indexOf(l);l=n(l))Object.getOwnPropertyNames(l).forEach((function(t){i[t]=function(){return e[t]}}));return i.default=function(){return e},a.d(o,i),o},a.d=function(e,t){for(var n in t)a.o(t,n)&&!a.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},a.f={},a.e=function(e){return Promise.all(Object.keys(a.f).reduce((function(t,n){return a.f[n](e,t),t}),[]))},a.u=function(e){return{94:"alyssum.full_calendar",218:"alyssum.vendors.react-beautiful-dnd",263:"alyssum.reportspage",287:"alyssum.vendors.fullcalendar",547:"alyssum.chart",583:"alyssum.testpage",740:"alyssum.vendors.chartjs",800:"alyssum.edit_page",822:"alyssum.lists",833:"alyssum.vendors.react-xarrows"}[e]+".js?hash="+{94:"b9f7808f8635655f496d",218:"18ce288f3d3381554ed3",263:"342899b8e661362bfcc1",287:"af78564bc89239d704bd",547:"4477790aadc2871ce180",583:"5ea120df93878770e57a",740:"e26ca524ea8713df3bbe",800:"dcb7b8bb0955977e1390",822:"e451eb995ac350e6dfa6",833:"853f37a7ae61b8553b73"}[e]},a.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),a.hmd=function(e){return(e=Object.create(e)).children||(e.children=[]),Object.defineProperty(e,"exports",{enumerable:!0,set:function(){throw new Error("ES Modules may not assign module.exports or exports.*, Use ESM export syntax, instead: "+e.id)}}),e},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r={},a.l=function(e,t,n,o){if(r[e])r[e].push(t);else{var i,l;if(void 0!==n)for(var s=document.getElementsByTagName("script"),c=0;c<s.length;c++){var u=s[c];if(u.getAttribute("src")==e||u.getAttribute("data-webpack")=="ui:"+n){i=u;break}}i||(l=!0,(i=document.createElement("script")).charset="utf-8",i.timeout=120,a.nc&&i.setAttribute("nonce",a.nc),i.setAttribute("data-webpack","ui:"+n),i.src=e),r[e]=[t];var p=function(t,n){i.onerror=i.onload=null,clearTimeout(d);var o=r[e];if(delete r[e],i.parentNode&&i.parentNode.removeChild(i),o&&o.forEach((function(e){return e(n)})),t)return t(n)},d=setTimeout(p.bind(null,void 0,{type:"timeout",target:i}),12e4);i.onerror=p.bind(null,i.onerror),i.onload=p.bind(null,i.onload),l&&document.head.appendChild(i)}},a.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e;a.g.importScripts&&(e=a.g.location+"");var t=a.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),a.p=e}(),function(){var e={770:0};a.f.j=function(t,n){var r=a.o(e,t)?e[t]:void 0;if(0!==r)if(r)n.push(r[2]);else{var o=new Promise((function(n,o){r=e[t]=[n,o]}));n.push(r[2]=o);var i=a.p+a.u(t),l=new Error;a.l(i,(function(n){if(a.o(e,t)&&(0!==(r=e[t])&&(e[t]=void 0),r)){var o=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+o+": "+i+")",l.name="ChunkLoadError",l.type=o,l.request=i,r[1](l)}}),"chunk-"+t,t)}},a.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,o,i=n[0],l=n[1],s=n[2],c=0;if(i.some((function(t){return 0!==e[t]}))){for(r in l)a.o(l,r)&&(a.m[r]=l[r]);if(s)var u=s(a)}for(t&&t(n);c<i.length;c++)o=i[c],a.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return a.O(u)},n=self.webpackChunkui=self.webpackChunkui||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}(),a.nc=void 0;var l=a.O(void 0,[866],(function(){return a(32656)}));l=a.O(l)}();